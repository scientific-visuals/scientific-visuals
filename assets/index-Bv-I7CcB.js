var _Z=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var S4e=_Z((oUe,jS)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function RZ(){Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"))}const Pc={get(n,e){var t;return(t=e[Symbol.metadata])==null?void 0:t[n]},define(n,e,...t){var s;let i=(s=Object.getOwnPropertyDescriptor(e,Symbol.metadata))==null?void 0:s.value;i==null&&Object.defineProperty(e,Symbol.metadata,{value:i=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const r=t.length;switch(r){case 0:throw new Error("At least one key must be provided");case 1:i[t[0]]=n;return;case 2:i[t[0]]=i[t[1]]=n;return;default:{for(let o=0;o<r;++o)i[t[o]]=n;return}}},has(n,e){const t=e[Symbol.metadata];return t==null?!1:n in t},delete(n,e){const t=e[Symbol.metadata];t!=null&&Reflect.deleteProperty(t,n)}},Ow=Object.freeze,E6=Object.assign,EZ=String,tl=Pc.get,Gb=Pc.define,fi=n=>n instanceof Promise,ai=n=>n instanceof Array,Op=n=>n instanceof Set,Iu=n=>n instanceof Map,x6=n=>n instanceof Object;function zS(n){return typeof n=="object"&&n!==null||typeof n=="function"}const $t=n=>typeof n=="function",Ct=n=>typeof n=="string",xZ=n=>typeof n=="number",on=()=>Object.create(null),Jo=Object.is,Xn=(n,...e)=>new Error(`AUR${EZ(n).padStart(4,"0")}: ${MZ(n,...e)}`),TZ={1:"No registration for interface: '{{0}}'",2:`'{{0}}' was registered with "none" resolver, are you injecting the right key?`,3:"Cyclic dependency found: {{0}}",4:"Resolver for {{0}} returned a null factory",5:"Invalid resolver strategy specified: {{0}}. Did you assign an invalid strategy value?",6:"Unable to autoregister dependency: {{0}}",7:'Resource key "{{0}}" already registered',8:"Unable to resolve key: {{0}}",9:"Attempted to jitRegister something that is not a constructor: '{{0}}'. Did you forget to register this resource?",10:'Attempted to jitRegister an intrinsic type: "{{0}}". Did you forget to add @inject(Key)',11:"Invalid resolver, null/undefined returned from the static register method.",12:"Attempted to jitRegister an interface: {{0}}",13:"Cannot call resolve '{{0}}' before calling prepare or after calling dispose.",14:"Key cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?A common cause is circular dependency with bundler, did you accidentally introduce circular dependency into your module graph?",15:"'{{0}}' is a native function and cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.",16:'There is not a currently active container to resolve "{{0}}". Are you trying to "new Class(...)" that has a resolve(...) call?',17:"Failed to instantiate '{{0}}' via @newInstanceOf/@newInstanceForScope, there's no registration and no default implementation, or the default implementation does not result in factory for constructing the instances.",18:"Invalid channel name or instance: '{{0}}'.",19:"Invalid channel name or type: {{0}}.",20:"No defined value found when calling firstDefined()",21:"Invalid module transform input: {{0}}. Expected Promise or Object.",22:"The @inject decorator on the target ('{{0}}') type '{{1}}' is not supported.",23:"Resource key '{{0}}' has already been registered."},MZ=(n,...e)=>{let t=TZ[n];for(let i=0;i<e.length;++i)t=t.replace(`{{${i}}}`,String(e[i]));return t},fp=(...n)=>globalThis.console.error(...n),Yb=(()=>{const n={};let e=!1,t=0,i=0,r=0;return s=>{switch(typeof s){case"number":return s>=0&&(s|0)===s;case"string":if(e=n[s],e!==void 0)return e;if(t=s.length,t===0)return n[s]=!1;for(i=0,r=0;r<t;++r)if(i=s.charCodeAt(r),r===0&&i===48&&t>1||i<48||i>57)return n[s]=!1;return n[s]=!0;default:return!1}}})(),T6=function(){const n=E6(on(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=t=>t===""?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:n[t]===!0?1:0;return(t,i)=>{const r=t.length;if(r===0)return t;let s=!1,o="",a,l="",c=0,u=t.charAt(0),h=e(u),d=0;for(;d<r;++d)a=c,l=u,c=h,u=t.charAt(d+1),h=e(u),c===0?o.length>0&&(s=!0):(!s&&o.length>0&&c===2&&(s=a===3||h===3),o+=i(l,s),s=!1);return o}}(),Ni=function(){const n=on(),e=(t,i)=>i?t.toUpperCase():t.toLowerCase();return t=>{let i=n[t];return i===void 0&&(i=n[t]=T6(t,e)),i}}(),M6=function(){const n=on();return e=>{let t=n[e];return t===void 0&&(t=Ni(e),t.length>0&&(t=t[0].toUpperCase()+t.slice(1)),n[e]=t),t}}(),A6=function(){const n=on(),e=(t,i)=>i?`-${t.toLowerCase()}`:t.toLowerCase();return t=>{let i=n[t];return i===void 0&&(i=n[t]=T6(t,e)),i}}(),PE=n=>{const e=n.length,t=Array(e);let i=0;for(;i<e;++i)t[i]=n[i];return t},Of=(n,e)=>{const t=e.name;e.addInitializer(function(){Reflect.defineProperty(this,t,{value:n.bind(this),writable:!0,configurable:!0,enumerable:!1})})},di=(...n)=>{const e=[];let t=0;const i=n.length;let r=0,s,o=0;for(;o<i;++o)if(s=n[o],s!==void 0){r=s.length;let a=0;for(;a<r;++a)e[t++]=s[a]}return e},gu=(...n)=>{const e=n.length;let t,i=0;for(;e>i;++i)if(t=n[i],t!==void 0)return t;throw Xn(20)},AZ=function(){const n=Function.prototype,e=Object.getPrototypeOf,t=new WeakMap;let i=n,r=0,s;return function(o){if(s=t.get(o),s===void 0)for(t.set(o,s=[i=o]),r=0;(i=e(i))!==n;)s[++r]=i;return s}}();function pA(...n){return E6(on(),...n)}const WH=(()=>{const n=new WeakMap;let e=!1,t="",i=0;return r=>(e=n.get(r),e==null&&(i=(t=r.toString()).length,e=i>28&&t.indexOf("[native code] }")===i-15,n.set(r,e)),e)})(),tt=(n,e)=>fi(n)?n.then(e):e(n),Ri=(...n)=>{let e,t,i,r=0,s=n.length;for(;r<s;++r)e=n[r],fi(e=n[r])&&(t===void 0?t=e:i===void 0?i=[t,e]:i.push(e));return i===void 0?t:Promise.all(i)},PZ=(n,e)=>new ro(n,0,e),Kb=(n,e)=>new ro(n,1,e),P6=(n,e)=>new ro(n,2,e),IZ=(n,e)=>new ro(n,3,e),OZ=(n,e)=>new ro(n,3,I6(e)),US=(n,e)=>new ro(e,5,n),kZ=(n,...e)=>new qZ(n,e),jH=new WeakMap,I6=n=>(e,t,i)=>{let r=jH.get(e);if(r===void 0&&jH.set(e,r=new WeakMap),r.has(i))return r.get(i);const s=n(e,t,i);return r.set(i,s),s},Fd={instance:PZ,singleton:Kb,transient:P6,callback:IZ,cachedCallback:OZ,aliasTo:US,defer:kZ},kw=function(n){return function(t){t.register(Kb(this,this),US(this,n))}},Ad="au:annotation",Ou=(n,e)=>e===void 0?`${Ad}:${n}`:`${Ad}:${n}:${e}`,DZ=(n,e)=>{const t=tl(Ad,n);t===void 0?Gb([e],n,Ad):t.push(e)},NZ=Ow({name:"au:annotation",appendTo:DZ,set(n,e,t){Gb(t,n,Ou(e))},get:(n,e)=>tl(Ou(e),n),getKeys(n){let e=tl(Ad,n);return e===void 0&&Gb(e=[],n,Ad),e},isKey:n=>n.startsWith(Ad),keyFor:Ou}),Ya="au:resource",df=(n,e,t)=>`${Ya}:${n}`,O6={annotation:NZ},k6=Object.prototype.hasOwnProperty;function Ps(n,e,t,i){let r=tl(Ou(n),t);return r===void 0?(r=e[n],r===void 0?(r=t[n],r===void 0||!k6.call(t,n)?i():r):r):r}function yo(n,e,t){let i=tl(Ou(n),e);return i===void 0?(i=e[n],i===void 0||!k6.call(e,n)?t():i):i}function Co(n,e,t){const i=e[n];return i===void 0?t():i}const hl=Symbol.for("au:registrable"),LZ={none(n){throw Xn(2,n)},singleton:n=>new ro(n,1,n),transient:n=>new ro(n,2,n)};class Xa{constructor(e,t){this.inheritParentResources=e,this.defaultResolver=t}static from(e){return e===void 0||e===Xa.DEFAULT?Xa.DEFAULT:new Xa(e.inheritParentResources??!1,e.defaultResolver??LZ.singleton)}}Xa.DEFAULT=Xa.from({});const HZ=n=>new Yv(null,Xa.from(n)),$Z=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let FZ=0,Pn=null;class Yv{get depth(){return this._parent===null?0:this._parent.depth+1}get parent(){return this._parent}constructor(e,t){if(this.id=++FZ,this._registerDepth=0,this._disposableResolvers=new Map,this._parent=e,this.config=t,this._resolvers=new Map,this.res={},e===null)this.root=this,this._factories=new Map;else if(this.root=e.root,this._factories=e._factories,t.inheritParentResources)for(const i in e.res)this.registerResolver(i,e.res[i]);this._resolvers.set(Dw,VZ)}register(...e){var u,h,d,f;if(++this._registerDepth===100)throw Xn(6,...e);let t,i,r,s,o,a=0,l=e.length,c;for(;a<l;++a)if(t=e[a],!!zS(t))if(Iv(t))t.register(this);else if((c=tl(Ya,t))!=null)c.register(this);else if(jZ(t)){const g=(u=t[Symbol.metadata])==null?void 0:u[hl];if(Iv(g))g.register(this);else if(Ct((h=t.$au)==null?void 0:h.type)){const p=t.$au,m=(t.aliases??mt).concat(p.aliases??mt);let b=`${Ya}:${p.type}:${p.name}`;if(this.has(b,!1)){(d=globalThis.console)==null||d.warn(Xn(7,b));continue}for(US(t,b).register(this),this.has(t,!1)||Kb(t,t).register(this),s=0,o=m.length;s<o;++s){if(b=`${Ya}:${p.type}:${m[s]}`,this.has(b,!1)){(f=globalThis.console)==null||f.warn(Xn(7,b));continue}US(t,b).register(this)}}else Kb(t,t).register(this)}else for(i=Object.keys(t),s=0,o=i.length;s<o;++s)r=t[i[s]],zS(r)&&(Iv(r)?r.register(this):this.register(r));return--this._registerDepth,this}registerResolver(e,t,i=!1){um(e);const r=this._resolvers,s=r.get(e);if(s==null){if(r.set(e,t),IE(e)){if(this.res[e]!==void 0)throw Xn(7,e);this.res[e]=t}}else s instanceof ro&&s._strategy===4?s._state.push(t):r.set(e,new ro(e,4,[s,t]));return i&&this._disposableResolvers.set(e,t),t}deregister(e){um(e);const t=this._resolvers.get(e);t!=null&&(this._resolvers.delete(e),IE(e)&&delete this.res[e],this._disposableResolvers.has(e)&&(t.dispose(),this._disposableResolvers.delete(e)))}registerTransformer(e,t){const i=this.getResolver(e);if(i==null)return!1;if(i.getFactory){const r=i.getFactory(this);return r==null?!1:(r.registerTransformer(t),!0)}return!1}getResolver(e,t=!0){if(um(e),e.resolve!==void 0)return e;const i=Pn;let r=Pn=this,s,o;try{for(;r!=null;)if(s=r._resolvers.get(e),s==null){if(r._parent==null)return o=GH(e)?this:r,t?this._jitRegister(e,o):null;r=r._parent}else return s}finally{Pn=i}return null}has(e,t=!1){var i;return this._resolvers.has(e)||IE(e)&&e in this.res||((t&&((i=this._parent)==null?void 0:i.has(e,!0)))??!1)}get(e){if(um(e),e.$isResolver)return e.resolve(this,this);const t=Pn;let i=Pn=this,r,s;try{for(;i!=null;)if(r=i._resolvers.get(e),r==null){if(i._parent==null)return s=GH(e)?this:i,r=this._jitRegister(e,s),r.resolve(i,this);i=i._parent}else return r.resolve(i,this)}finally{Pn=t}throw Xn(8,e)}getAll(e,t=!1){um(e);const i=Pn,r=Pn=this;let s=r,o,a=mt;try{if(t){for(;s!=null;)o=s._resolvers.get(e),o!=null&&(a=a.concat(UH(o,s,r))),s=s._parent;return a}for(;s!=null;)if(o=s._resolvers.get(e),o==null){if(s=s._parent,s==null)return mt}else return UH(o,s,r)}finally{Pn=i}return mt}invoke(e,t){if(WH(e))throw Xn(15,e);const i=Pn;Pn=this;{let r,s;try{r=kg(e).map(o=>this.get(s=o))}catch(o){throw fp(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}, caused by dependency: ${String(s)}`),Pn=i,o}try{return t===void 0?new e(...r):new e(...r,...t)}catch(o){throw fp(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}`),o}finally{Pn=i}}try{return t===void 0?new e(...kg(e).map(qb,this)):new e(...kg(e).map(qb,this),...t)}finally{Pn=i}}hasFactory(e){return this._factories.has(e)}getFactory(e){let t=this._factories.get(e);if(t===void 0){if(WH(e))throw Xn(15,e);this._factories.set(e,t=new BZ(e,kg(e)))}return t}registerFactory(e,t){this._factories.set(e,t)}createChild(e){return e===void 0&&this.config.inheritParentResources?this.config===Xa.DEFAULT?new Yv(this,this.config):new Yv(this,Xa.from({...this.config,inheritParentResources:!1})):new Yv(this,Xa.from(e??this.config))}disposeResolvers(){var s;const e=this._resolvers,t=this._disposableResolvers;let i,r;for([r,i]of t.entries())(s=i.dispose)==null||s.call(i),e.delete(r);t.clear()}useResources(e){const t=e.res;for(const i in t)this.registerResolver(i,t[i])}find(e,t){var o,a;const i=Ct(t)?`${Ya}:${e}:${t}`:e;let r=this,s=r.res[i];return s==null&&(r=r.root,s=r.res[i]),s==null?null:((a=(o=s.getFactory)==null?void 0:o.call(s,r))==null?void 0:a.Type)??null}dispose(){this._disposableResolvers.size>0&&this.disposeResolvers(),this._resolvers.clear(),this.root===this&&(this._factories.clear(),this.res={})}_jitRegister(e,t){const i=Iv(e);if(!$t(e)&&!i)throw Xn(9,e);if($Z.has(e.name))throw Xn(10,e);if(i){const s=e.register(t,e);if(!(s instanceof Object)||s.resolve==null){const o=t._resolvers.get(e);if(o!=null)return o;throw Xn(11,e)}return s}if(e.$isInterface)throw Xn(12,e.friendlyName);const r=this.config.defaultResolver(e,t);return t._resolvers.set(e,r),r}}class BZ{constructor(e,t){this.Type=e,this.dependencies=t,this.transformers=null}construct(e,t){const i=Pn;Pn=e;let r;{let s,o;try{s=this.dependencies.map(a=>e.get(o=a))}catch(a){throw fp(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}, caused by dependency: ${String(o)}`),Pn=i,a}try{return t===void 0?r=new this.Type(...s):r=new this.Type(...s,...t),this.transformers==null?r:this.transformers.reduce(zH,r)}catch(a){throw fp(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}`),a}finally{Pn=i}}try{return t===void 0?r=new this.Type(...this.dependencies.map(qb,e)):r=new this.Type(...this.dependencies.map(qb,e),...t),this.transformers==null?r:this.transformers.reduce(zH,r)}finally{Pn=i}}registerTransformer(e){(this.transformers??(this.transformers=[])).push(e)}}function zH(n,e){return e(n)}function um(n){if(n==null)throw Xn(14)}function qb(n){return this.get(n)}function pe(...n){if(Pn==null)throw Xn(16,...n);if(n.length===1)try{return Pn.get(n[0])}catch(e){throw fp(`[DEV:aurelia] resolve() call error for: ${String(n[0])}`),e}else{let e;try{return n.map(t=>Pn.get(e=t))}catch(t){throw fp(`[DEV:aurelia] resolve() call error for: ${String(e)}`),t}}return n.length===1?Pn.get(n[0]):n.map(qb,Pn)}const UH=(n,e,t)=>{if(n instanceof ro&&n._strategy===4){const i=n._state,r=i.length,s=Array(r);let o=0;for(;o<r;++o)s[o]=i[o].resolve(e,t);return s}return[n.resolve(e,t)]},VZ={$isResolver:!0,resolve(n,e){return e}},Iv=n=>$t(n==null?void 0:n.register),WZ=n=>Iv(n)&&typeof n.registerInRequestor=="boolean",GH=n=>WZ(n)&&n.registerInRequestor,jZ=n=>n.prototype!==void 0,IE=n=>Ct(n)&&n.indexOf(":")>0;class zZ{constructor(e,t){this._container=e,this._key=t}instance(e){return this._registerResolver(0,e)}singleton(e){return this._registerResolver(1,e)}transient(e){return this._registerResolver(2,e)}callback(e){return this._registerResolver(3,e)}cachedCallback(e){return this._registerResolver(3,I6(e))}aliasTo(e){return this._registerResolver(5,e)}_registerResolver(e,t){const{_container:i,_key:r}=this;return this._container=this._key=void 0,i.registerResolver(r,new ro(r,e,t))}}const hm=n=>{const e=n.slice(),t=Object.keys(n),i=t.length;let r;for(let s=0;s<i;++s)r=t[s],Yb(r)||(e[r]=n[r]);return e},eS=Ou("di:paramtypes"),UZ=n=>tl(eS,n),D6=n=>tl("design:paramtypes",n),YH=n=>{var e;return(e=n.metadata)[eS]??(e[eS]=[])},kg=n=>{const e=Ou("di:dependencies");let t=tl(e,n);if(t===void 0){const i=n.inject;if(i===void 0){const r=D6(n),s=UZ(n);if(r===void 0)if(s===void 0){const o=Object.getPrototypeOf(n);$t(o)&&o!==Function.prototype?t=hm(kg(o)):t=[]}else t=hm(s);else if(s===void 0)t=hm(r);else{t=hm(r);let o=s.length,a,l=0;for(;l<o;++l)a=s[l],a!==void 0&&(t[l]=a);const c=Object.keys(s);let u;for(l=0,o=c.length,l=0;l<o;++l)u=c[l],Yb(u)||(t[u]=s[u])}}else t=hm(i);Gb(t,n,e)}return t},Ic=(n,e)=>{const t=$t(n)?n:e,i=(Ct(n)?n:void 0)??"(anonymous)",r={$isInterface:!0,friendlyName:i,toString:()=>`InterfaceSymbol<${i}>`,register:t!=null?(s,o)=>t(new zZ(s,o??r)):void 0};return r},sO=(...n)=>(e,t)=>{switch(t.kind){case"class":{const i=YH(t);let r,s=0;for(;s<n.length;++s)r=n[s],r!==void 0&&(i[s]=r);break}case"field":{const i=YH(t),r=n[0];r!==void 0&&(i[t.name]=r);break}default:throw Xn(22,String(t.name),t.kind)}},Zu=(RZ(),{createContainer:HZ,getDesignParamtypes:D6,getDependencies:kg,createInterface:Ic,inject:sO,transient(n){return n.register=function(e){return P6(n,n).register(e,n)},n.registerInRequestor=!1,n},singleton(n,e=KZ){return n.register=function(t){return Kb(n,n).register(t,n)},n.registerInRequestor=e.scoped,n}}),Dw=Ic("IContainer"),GZ=Dw;function KH(n,e){return Zu.transient(n)}function YZ(n,e){return n==null?KH:KH(n)}const KZ={scoped:!1};class ro{get $isResolver(){return!0}constructor(e,t,i){this._resolving=!1,this._cachedFactory=null,this._key=e,this._strategy=t,this._state=i}register(e,t){return e.registerResolver(t||this._key,this)}resolve(e,t){switch(this._strategy){case 0:return this._state;case 1:{if(this._resolving)throw Xn(3,this._state.name);return this._resolving=!0,this._state=(this._cachedFactory=e.getFactory(this._state)).construct(t),this._strategy=0,this._resolving=!1,this._state}case 2:{const i=e.getFactory(this._state);if(i===null)throw Xn(4,this._key);return i.construct(t)}case 3:return this._state(e,t,this);case 4:return this._state[0].resolve(e,t);case 5:return t.get(this._state);default:throw Xn(5,this._strategy)}}getFactory(e){var t,i;switch(this._strategy){case 1:case 2:return e.getFactory(this._state);case 5:return((i=(t=e.getResolver(this._state))==null?void 0:t.getFactory)==null?void 0:i.call(t,e))??null;case 0:return this._cachedFactory;default:return null}}}class gi{get friendlyName(){return this._name}constructor(e,t=null,i=null){this._name=e,this._instance=t,this._Type=i}prepare(e){this._instance=e}get $isResolver(){return!0}resolve(){if(this._instance==null)throw Xn(13,this._name);return this._instance}getFactory(e){return this._Type==null?null:e.getFactory(this._Type)}dispose(){this._instance=null}}class qZ{constructor(e,t){this.key=e,this.params=t}register(e){e.has(this.key,!0)?e.get(this.key).register(e,...this.params):e.register(...this.params.filter(t=>typeof t=="object"))}}const mt=Ow([]),N6=Ow({});function Za(){}const kp=Ic("IPlatform");function Nw(n){return function(e){function t(i,r){sO(t)(i,r)}return t.$isResolver=!0,t.resolve=function(i,r){return n(e,i,r)},t}}const oO=(n,e=!1)=>{function t(i,r){sO(t)(i,r)}return t.$isResolver=!0,t.resolve=(i,r)=>r.getAll(n,e),t},L6=Nw((n,e,t)=>{if(t.has(n,!0))return t.get(n)}),XZ=Nw((n,e,t)=>t.has(n,!1)?t.get(n):void 0),gp=Nw((n,e,t)=>t.has(n,!1)?t.get(n):t.root.get(n)),ZZ=Nw((n,e,t)=>t.has(n,!1)?t.get(n):t.root.has(n,!1)?t.root.get(n):void 0),QZ=Nw((n,e,t)=>t===t.root?t.getAll(n,!1):t.has(n,!1)?t.getAll(n,!1).concat(t.root.getAll(n,!1)):t.root.getAll(n,!1));function kf(n,e,t,i,r,s){function o(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var a=i.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=n?i.static?n:n.prototype:null,u=c?Object.getOwnPropertyDescriptor(c,i.name):{},h,d=!1,f=t.length-1;f>=0;f--){var g={};for(var p in i)g[p]=p==="access"?{}:i[p];for(var p in i.access)g.access[p]=i.access[p];g.addInitializer=function(b){if(d)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(b||null))};var m=(0,t[f])(a==="accessor"?{get:u.get,set:u.set}:u[l],g);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(h=o(m.get))&&(u.get=h),(h=o(m.set))&&(u.set=h),(h=o(m.init))&&r.unshift(h)}else(h=o(m))&&(a==="field"?r.unshift(h):u[l]=h)}c&&Object.defineProperty(c,i.name,u),d=!0}function JZ(n,e,t){for(var i=arguments.length>2,r=0;r<e.length;r++)t=i?e[r].call(n,t):e[r].call(n);return i?t:void 0}const Kv=0,qv=1,Xv=2,Zg=3,Zv=4,Qv=5,eQ=6,tQ=Ow({trace:Kv,debug:qv,info:Xv,warn:Zg,error:Zv,fatal:Qv,none:eQ}),H6=Ic("ILogConfig",n=>n.instance(new oQ("no-colors",Zg))),nQ=Ic("ISink"),iQ=Ic("ILogEventFactory",n=>n.singleton(lQ)),Bd=Ic("ILogger",n=>n.singleton(cQ)),rQ=Ic("ILogScope"),sQ=Ow({key:Ou("logger-sink-handles"),define(n,e){Gb(e.handles,n,this.key)},getHandles(n){return tl(this.key,n.constructor)}}),Kl=pA({red(n){return`\x1B[31m${n}\x1B[39m`},green(n){return`\x1B[32m${n}\x1B[39m`},yellow(n){return`\x1B[33m${n}\x1B[39m`},blue(n){return`\x1B[34m${n}\x1B[39m`},magenta(n){return`\x1B[35m${n}\x1B[39m`},cyan(n){return`\x1B[36m${n}\x1B[39m`},white(n){return`\x1B[37m${n}\x1B[39m`},grey(n){return`\x1B[90m${n}\x1B[39m`}});class oQ{constructor(e,t){this.colorOptions=e,this.level=t}}const OE=function(){const n={"no-colors":pA({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:pA({TRC:Kl.grey("TRC"),DBG:Kl.grey("DBG"),INF:Kl.white("INF"),WRN:Kl.yellow("WRN"),ERR:Kl.red("ERR"),FTL:Kl.red("FTL"),QQQ:Kl.grey("???")})};return(e,t)=>e<=Kv?n[t].TRC:e<=qv?n[t].DBG:e<=Xv?n[t].INF:e<=Zg?n[t].WRN:e<=Zv?n[t].ERR:e<=Qv?n[t].FTL:n[t].QQQ}(),qH=(n,e)=>e==="no-colors"?n.join("."):n.map(Kl.cyan).join("."),kE=(n,e)=>e==="no-colors"?new Date(n).toISOString():Kl.grey(new Date(n).toISOString());class aQ{constructor(e,t,i,r,s,o){this.severity=e,this.message=t,this.optionalParams=i,this.scope=r,this.colorOptions=s,this.timestamp=o}toString(){const{severity:e,message:t,scope:i,colorOptions:r,timestamp:s}=this;return i.length===0?`${kE(s,r)} [${OE(e,r)}] ${t}`:`${kE(s,r)} [${OE(e,r)} ${qH(i,r)}] ${t}`}getFormattedLogInfo(e=!1){const{severity:t,message:i,scope:r,colorOptions:s,timestamp:o,optionalParams:a}=this;let l=null,c="";e&&i instanceof Error?l=i:c=i;const u=r.length===0?"":` ${qH(r,s)}`;let h=`${kE(o,s)} [${OE(t,s)}${u}] ${c}`;if(a===void 0||a.length===0)return l===null?[h]:[h,l];let d=0;for(;h.includes("%s");)h=h.replace("%s",String(a[d++]));return l!==null?[h,l,...a.slice(d)]:[h,...a.slice(d)]}}class lQ{constructor(){this.config=pe(H6)}createLogEvent(e,t,i,r){return new aQ(t,i,r,e.scope,this.config.colorOptions,Date.now())}}let cQ=(()=>{var n;let e=[],t,i,r,s,o,a;return n=class{constructor(c=pe(H6),u=pe(iQ),h=pe(oO(nQ)),d=pe(L6(rQ))??[],f=null){this.scope=(JZ(this,e),d),this._scopedLoggers=on();let g,p,m,b,y,w;if(this.config=c,this._factory=u,this.sinks=h,f===null){this.root=this,this.parent=this,g=this._traceSinks=[],p=this._debugSinks=[],m=this._infoSinks=[],b=this._warnSinks=[],y=this._errorSinks=[],w=this._fatalSinks=[];for(const R of h){const E=sQ.getHandles(R);((E==null?void 0:E.includes(Kv))??!0)&&g.push(R),((E==null?void 0:E.includes(qv))??!0)&&p.push(R),((E==null?void 0:E.includes(Xv))??!0)&&m.push(R),((E==null?void 0:E.includes(Zg))??!0)&&b.push(R),((E==null?void 0:E.includes(Zv))??!0)&&y.push(R),((E==null?void 0:E.includes(Qv))??!0)&&w.push(R)}}else this.root=f.root,this.parent=f,g=this._traceSinks=f._traceSinks,p=this._debugSinks=f._debugSinks,m=this._infoSinks=f._infoSinks,b=this._warnSinks=f._warnSinks,y=this._errorSinks=f._errorSinks,w=this._fatalSinks=f._fatalSinks}trace(c,...u){this.config.level<=Kv&&this._emit(this._traceSinks,Kv,c,u)}debug(c,...u){this.config.level<=qv&&this._emit(this._debugSinks,qv,c,u)}info(c,...u){this.config.level<=Xv&&this._emit(this._infoSinks,Xv,c,u)}warn(c,...u){this.config.level<=Zg&&this._emit(this._warnSinks,Zg,c,u)}error(c,...u){this.config.level<=Zv&&this._emit(this._errorSinks,Zv,c,u)}fatal(c,...u){this.config.level<=Qv&&this._emit(this._fatalSinks,Qv,c,u)}scopeTo(c){const u=this._scopedLoggers;let h=u[c];return h===void 0&&(h=u[c]=new n(this.config,this._factory,null,this.scope.concat(c),this)),h}_emit(c,u,h,d){const f=$t(h)?h():h,g=this._factory.createLogEvent(this,u,f,d);for(let p=0,m=c.length;p<m;++p)c[p].handleEvent(g)}},(()=>{const l=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[Of],i=[Of],r=[Of],s=[Of],o=[Of],a=[Of],kf(n,null,t,{kind:"method",name:"trace",static:!1,private:!1,access:{has:c=>"trace"in c,get:c=>c.trace},metadata:l},null,e),kf(n,null,i,{kind:"method",name:"debug",static:!1,private:!1,access:{has:c=>"debug"in c,get:c=>c.debug},metadata:l},null,e),kf(n,null,r,{kind:"method",name:"info",static:!1,private:!1,access:{has:c=>"info"in c,get:c=>c.info},metadata:l},null,e),kf(n,null,s,{kind:"method",name:"warn",static:!1,private:!1,access:{has:c=>"warn"in c,get:c=>c.warn},metadata:l},null,e),kf(n,null,o,{kind:"method",name:"error",static:!1,private:!1,access:{has:c=>"error"in c,get:c=>c.error},metadata:l},null,e),kf(n,null,a,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:c=>"fatal"in c,get:c=>c.fatal},metadata:l},null,e),l&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),n})();class uQ{constructor(e,t){this.type=e,this.cb=t}handle(e){e instanceof this.type&&this.cb.call(null,e)}}const aO=Ic("IEventAggregator",n=>n.singleton(hQ));class hQ{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(e,t){if(!e)throw Xn(18,e);if(Ct(e)){let i=this.eventLookup[e];if(i!==void 0){i=i.slice();let r=i.length;for(;r-- >0;)i[r](t,e)}}else{const i=this.messageHandlers.slice();let r=i.length;for(;r-- >0;)i[r].handle(e)}}subscribe(e,t){if(!e)throw Xn(19,e);let i,r;return Ct(e)?(this.eventLookup[e]===void 0&&(this.eventLookup[e]=[]),i=t,r=this.eventLookup[e]):(i=new uQ(e,t),r=this.messageHandlers),r.push(i),{dispose(){const s=r.indexOf(i);s!==-1&&r.splice(s,1)}}}subscribeOnce(e,t){const i=this.subscribe(e,(r,s)=>{i.dispose(),t(r,s)});return i}}const $6="AccessThis",dQ="AccessBoundary",lO="AccessGlobal",cO="AccessScope",fQ="ArrayLiteral",gQ="ObjectLiteral",pQ="PrimitiveLiteral",mQ="Template",vQ="Unary",bQ="CallScope",wQ="CallMember",yQ="CallFunction",CQ="CallGlobal",LR="AccessMember",F6="AccessKeyed",SQ="TaggedTemplate",_Q="Binary",RQ="Conditional",EQ="Assign",xQ="ArrowFunction",TQ="ValueConverter",MQ="BindingBehavior",B6="ArrayBindingPattern",V6="ObjectBindingPattern",W6="BindingIdentifier",AQ="ForOfStatement",PQ="Interpolation",j6="ArrayDestructuring",IQ="ObjectDestructuring",OQ="DestructuringAssignmentLeaf",kQ="Custom";class z6{constructor(e){this.value=e,this.$kind=kQ}evaluate(...e){return this.value}assign(...e){return e}bind(...e){}unbind(...e){}accept(e){}}class DQ{constructor(e,t,i){this.expression=e,this.name=t,this.args=i,this.$kind=MQ,this.key=`_bb_${t}`}}class NQ{constructor(e,t,i){this.expression=e,this.name=t,this.args=i,this.$kind=TQ}}class LQ{constructor(e,t,i="="){this.target=e,this.value=t,this.op=i,this.$kind=EQ}}class HQ{constructor(e,t,i){this.condition=e,this.yes=t,this.no=i,this.$kind=RQ}}class $Q{constructor(e){this.name=e,this.$kind=lO}}class Jv{constructor(e=0){this.ancestor=e,this.$kind=$6}}class FQ{constructor(){this.$kind=dQ}}class eb{constructor(e,t=0){this.name=e,this.ancestor=t,this.$kind=cO}}const U6=n=>n.$kind===lO||(n.$kind===LR||n.$kind===F6)&&n.accessGlobal;class mA{constructor(e,t,i=!1){this.object=e,this.name=t,this.optional=i,this.$kind=LR,this.accessGlobal=U6(e)}}class G6{constructor(e,t,i=!1){this.object=e,this.key=t,this.optional=i,this.$kind=F6,this.accessGlobal=U6(e)}}class Y6{constructor(e,t,i=0,r=!1){this.name=e,this.args=t,this.ancestor=i,this.optional=r,this.$kind=bQ}}class GS{constructor(e,t,i,r=!1,s=!1){this.object=e,this.name=t,this.args=i,this.optionalMember=r,this.optionalCall=s,this.$kind=wQ}}class tS{constructor(e,t,i=!1){this.func=e,this.args=t,this.optional=i,this.$kind=yQ}}class BQ{constructor(e,t){this.name=e,this.args=t,this.$kind=CQ}}class VQ{constructor(e,t,i){this.operation=e,this.left=t,this.right=i,this.$kind=_Q}}class XH{constructor(e,t,i=0){this.operation=e,this.expression=t,this.pos=i,this.$kind=vQ}}class $i{constructor(e){this.value=e,this.$kind=pQ}}$i.$undefined=new $i(void 0);$i.$null=new $i(null);$i.$true=new $i(!0);$i.$false=new $i(!1);$i.$empty=new $i("");class vA{constructor(e){this.elements=e,this.$kind=fQ}}vA.$empty=new vA(mt);class bA{constructor(e,t){this.keys=e,this.values=t,this.$kind=gQ}}bA.$empty=new bA(mt,mt);class YS{constructor(e,t=mt){this.cooked=e,this.expressions=t,this.$kind=mQ}}YS.$empty=new YS([""]);class K6{constructor(e,t,i,r=mt){this.cooked=e,this.func=i,this.expressions=r,this.$kind=SQ,e.raw=t}}class WQ{constructor(e){this.elements=e,this.$kind=B6}}class jQ{constructor(e,t){this.keys=e,this.values=t,this.$kind=V6}}class KS{constructor(e){this.name=e,this.$kind=W6}}class zQ{constructor(e,t,i){this.declaration=e,this.iterable=t,this.semiIdx=i,this.$kind=AQ}}class UQ{constructor(e,t=mt){this.parts=e,this.expressions=t,this.$kind=PQ,this.isMulti=t.length>1,this.firstExpression=t[0]}}class GQ{constructor(e,t,i,r){this.$kind=e,this.list=t,this.source=i,this.initializer=r}}class q6{constructor(e,t,i){this.target=e,this.source=t,this.initializer=i,this.$kind=OQ}}class wA{constructor(e,t,i=!1){this.args=e,this.body=t,this.rest=i,this.$kind=xQ}}const yA=String,nS=()=>Object.create(null),gn=(n,...e)=>new Error(`AUR${yA(n).padStart(4,"0")}: ${KQ(n,...e)}`),YQ={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`},KQ=(n,...e)=>{var i;let t=YQ[n];for(let r=0;r<e.length;++r){const s=new RegExp(`{{${r}(:.*)?}}`,"g");let o=s.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[r];if(l!=null)switch(a){case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=yA(l[a.slice(1)]):l=yA(l)}t=t.slice(0,o.index)+l+t.slice(s.lastIndex),o=s.exec(t)}}return t},Dp=Zu.createInterface("IExpressionParser");class X6{constructor(){this._expressionLookup=nS(),this._forOfLookup=nS(),this._interpolationLookup=nS()}parse(e,t){let i;switch(t){case J6:return new z6(e);case qS:return i=this._interpolationLookup[e],i===void 0&&(i=this._interpolationLookup[e]=this.$parse(e,t)),i;case oc:return i=this._forOfLookup[e],i===void 0&&(i=this._forOfLookup[e]=this.$parse(e,t)),i;default:{if(e.length===0){if(t===JQ||t===ZH)return $i.$empty;throw pJ()}return i=this._expressionLookup[e],i===void 0&&(i=this._expressionLookup[e]=this.$parse(e,t)),i}}}$parse(e,t){return Nt=e,wt=0,nl=e.length,ms=0,Vd=0,Te=6291456,wn="",hn=Wd(0),jt=!0,Ot=!1,Ov=!0,hO=-1,Qn(61,t===void 0?ZH:t)}}X6.register=kw(Dp);function uO(n){switch(n){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return n}}const qQ=$i.$false,XQ=$i.$true,ZQ=$i.$null,Z6=$i.$undefined,tb=new Jv(0),DE=new Jv(1),QQ=new FQ,bc="None",qS="Interpolation",oc="IsIterator",Q6="IsChainable",JQ="IsFunction",ZH="IsProperty",J6="IsCustom";let Nt="",wt=0,nl=0,ms=0,Vd=0,Te=6291456,wn="",hn,jt=!0,Ot=!1,Ov=!0,hO=-1;const Xb=String.fromCharCode,Wd=n=>Nt.charCodeAt(n),wc=()=>Nt.slice(Vd,wt),eJ="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function Qn(n,e){if(e===J6)return new z6(Nt);if(wt===0){if(e===qS)return lJ();if(Ge(),Te&4194304)throw dJ()}jt=513>n,Ot=!1,Ov=514>n;let t=!1,i,r=0;if(Te&131072){const s=_g[Te&63];Ge(),i=new XH(s,Qn(514,e)),jt=!1}else{e:switch(Te){case 12295:r=ms,jt=!1,Ov=!1;do switch(Ge(),++r,Te){case 65546:if(Ge(),!(Te&12288))throw Bl();break;case 11:case 12:throw Bl();case 2162701:if(Ot=!0,Ge(),!(Te&12288)){i=r===0?tb:r===1?DE:new Jv(r),t=!0;break e}break;default:if(Te&2097152){i=r===0?tb:r===1?DE:new Jv(r);break e}throw fJ()}while(Te===12295);case 4096:{const s=wn;if(e===oc)i=new KS(s);else if(Ov&&eJ.includes(s))i=new $Q(s);else{if(Ov&&s==="import")throw yJ();i=new eb(s,r)}if(jt=!Ot,Ge(),$a(51)){if(Te===524297)throw rz();const o=Ot,a=ms;++ms;const l=Qn(62,bc);Ot=o,ms=a,jt=!1,i=new wA([new KS(s)],l)}break}case 11:throw EJ();case 12:throw CA();case 12292:switch(jt=!1,Ge(),ms){case 0:i=tb;break;case 1:i=DE;break;default:i=new Jv(ms);break}break;case 12293:jt=!1,Ge(),i=QQ;break;case 2688008:i=iJ(e);break;case 2688019:i=Nt.search(/\s+of\s+/)>wt?tJ():rJ(e);break;case 524297:i=aJ(e);break;case 2163760:i=new YS([wn]),jt=!1,Ge();break;case 2163761:i=NE(e,i,!1);break;case 16384:case 32768:i=new $i(wn),jt=!1,Ge();break;case 8194:case 8195:case 8193:case 8192:i=_g[Te&63],jt=!1,Ge();break;default:throw wt>=nl?gJ():LE()}if(e===oc)return oJ(i);switch(Te){case 2228280:case 2228281:i=new XH(_g[Te&63],i,1),Ge(),jt=!1;break}if(514<n)return i;if(Te===11||Te===12)throw Bl();if(i.$kind===$6)switch(Te){case 2162701:if(Ot=!0,jt=!1,Ge(),!(Te&13312))throw dO();if(Te&12288)i=new eb(wn,i.ancestor),Ge();else if(Te===2688008)i=new tS(i,jo(),!0);else if(Te===2688019)i=iS(i,!0);else throw rS();break;case 65546:if(jt=!Ot,Ge(),!(Te&12288))throw Bl();i=new eb(wn,i.ancestor),Ge();break;case 11:case 12:throw Bl();case 2688008:i=new tS(i,jo(),t);break;case 2688019:i=iS(i,t);break;case 2163760:i=QH(i);break;case 2163761:i=NE(e,i,!0);break}for(;(Te&65536)>0;)switch(Te){case 2162701:i=nJ(i);break;case 65546:if(Ge(),!(Te&12288))throw Bl();i=ez(i,!1);break;case 11:case 12:throw Bl();case 2688008:i.$kind===cO?i=new Y6(i.name,jo(),i.ancestor,!1):i.$kind===LR?i=new GS(i.object,i.name,jo(),i.optional,!1):i.$kind===lO?i=new BQ(i.name,jo()):i=new tS(i,jo(),!1);break;case 2688019:i=iS(i,!1);break;case 2163760:if(Ot)throw rS();i=QH(i);break;case 2163761:if(Ot)throw rS();i=NE(e,i,!0);break}}if(Te===11||Te===12)throw Bl();if(513<n)return i;for(;(Te&262144)>0;){const s=Te;if((s&960)<=n)break;Ge(),i=new VQ(_g[s&63],i,Qn(s&960,e)),jt=!1}if(63<n)return i;if($a(6291479)){const s=Qn(62,e);qo(6291477),i=new HQ(i,s,Qn(62,e)),jt=!1}if(62<n)return i;switch(Te){case 4194350:case 4194356:case 4194357:case 4194358:case 4194359:{if(!jt)throw mJ();const s=_g[Te&63];Ge(),i=new LQ(i,Qn(62,e),s);break}}if(61<n)return i;for(;$a(6291481);){if(Te===6291456)throw vJ();const s=wn;Ge();const o=new Array;for(;$a(6291477);)o.push(Qn(62,e));i=new NQ(i,s,o)}for(;$a(6291480);){if(Te===6291456)throw bJ();const s=wn;Ge();const o=new Array;for(;$a(6291477);)o.push(Qn(62,e));i=new DQ(i,s,o)}if(Te!==6291456){if(e===qS&&Te===7340046)return i;if(e===Q6&&Te===6291478){if(wt===nl)throw LE();return hO=wt-1,i}throw wc()==="of"?wJ():LE()}return i}function tJ(){const n=[],e=new GQ(j6,n,void 0,void 0);let t="",i=!0,r=0;for(;i;)switch(Ge(),Te){case 7340052:i=!1,s();break;case 6291472:s();break;case 4096:t=wc();break;default:throw _J()}return qo(7340052),e;function s(){t!==""?(n.push(new q6(new mA(tb,t),new G6(tb,new $i(r++)),void 0)),t=""):r++}}function jo(){const n=Ot;Ge();const e=[];for(;Te!==7340047&&(e.push(Qn(62,bc)),!!$a(6291472)););return qo(7340047),jt=!1,Ot=n,e}function iS(n,e){const t=Ot;return Ge(),n=new G6(n,Qn(62,bc),e),qo(7340052),jt=!t,Ot=t,n}function nJ(n){if(Ot=!0,jt=!1,Ge(),!(Te&13312))throw dO();if(Te&12288)return ez(n,!0);if(Te===2688008)return n.$kind===cO?new Y6(n.name,jo(),n.ancestor,!0):n.$kind===LR?new GS(n.object,n.name,jo(),n.optional,!0):new tS(n,jo(),!0);if(Te===2688019)return iS(n,!0);throw rS()}function ez(n,e){const t=wn;switch(Te){case 2162701:{Ot=!0,jt=!1;const i=wt,r=Vd,s=Te,o=hn,a=wn,l=jt,c=Ot;if(Ge(),!(Te&13312))throw dO();return Te===2688008?new GS(n,t,jo(),e,!0):(wt=i,Vd=r,Te=s,hn=o,wn=a,jt=l,Ot=c,new mA(n,t,e))}case 2688008:return jt=!1,new GS(n,t,jo(),e,!1);default:return jt=!Ot,Ge(),new mA(n,t,e)}}function iJ(n){Ge();const e=wt,t=Vd,i=Te,r=hn,s=wn,o=Ot,a=[];let l=1,c=!1;e:for(;;){if(Te===12){if(Ge(),Te!==4096)throw Bl();if(a.push(new KS(wn)),Ge(),Te===6291472)throw RJ();if(Te!==7340047||(Ge(),Te!==51))throw CA();Ge();const d=Ot,f=ms;++ms;const g=Qn(62,bc);return Ot=d,ms=f,jt=!1,new wA(a,g,!0)}switch(Te){case 4096:a.push(new KS(wn)),Ge();break;case 7340047:Ge();break e;case 524297:case 2688019:Ge(),l=4;break;case 6291472:l=2,c=!0;break e;case 2688008:l=2;break e;default:Ge(),l=2;break}switch(Te){case 6291472:if(Ge(),c=!0,l===1)break;break e;case 7340047:Ge();break e;case 4194350:l===1&&(l=3);break e;case 51:if(c)throw My();Ge(),l=2;break e;default:l===1&&(l=2);break e}}if(Te===51){if(l===1){if(Ge(),Te===524297)throw rz();const d=Ot,f=ms;++ms;const g=Qn(62,bc);return Ot=d,ms=f,jt=!1,new wA(a,g)}throw My()}else if(l===1&&a.length===0)throw iz(51);if(c)switch(l){case 2:throw My();case 3:throw t$();case 4:throw n$()}wt=e,Vd=t,Te=i,hn=r,wn=s,Ot=o;const u=Ot,h=Qn(62,n);if(Ot=u,qo(7340047),Te===51)switch(l){case 2:throw My();case 3:throw t$();case 4:throw n$()}return h}function rJ(n){const e=Ot;Ge();const t=new Array;for(;Te!==7340052;)if($a(6291472)){if(t.push(Z6),Te===7340052)break}else if(t.push(Qn(62,n===oc?bc:n)),$a(6291472)){if(Te===7340052)break}else break;return Ot=e,qo(7340052),n===oc?new WQ(t):(jt=!1,new vA(t))}const sJ=[B6,V6,W6,j6,IQ];function oJ(n){if(!sJ.includes(n.$kind)||Te!==4204594)throw e$(n.$kind);Ge();const e=n,t=Qn(61,Q6);return new zQ(e,t,hO)}function aJ(n){const e=Ot,t=new Array,i=new Array;for(Ge();Te!==7340046;){if(t.push(wn),Te&49152)Ge(),qo(6291477),i.push(Qn(62,n===oc?bc:n));else if(Te&12288){const r=hn,s=Te,o=wt;Ge(),$a(6291477)?i.push(Qn(62,n===oc?bc:n)):(hn=r,Te=s,wt=o,i.push(Qn(515,n===oc?bc:n)))}else throw CJ();Te!==7340046&&qo(6291472)}return Ot=e,qo(7340046),n===oc?new jQ(t,i):(jt=!1,new bA(t,i))}function lJ(){const n=[],e=[],t=nl;let i="";for(;wt<t;){switch(hn){case 36:if(Wd(wt+1)===123){n.push(i),i="",wt+=2,hn=Wd(wt),Ge();const r=Qn(61,qS);e.push(r);continue}else i+="$";break;case 92:i+=Xb(uO(Xe()));break;default:i+=Xb(hn)}Xe()}return e.length?(n.push(i),new UQ(n,e)):null}function NE(n,e,t){const i=Ot,r=[wn];qo(2163761);const s=[Qn(62,n)];for(;(Te=hJ())!==2163760;)r.push(wn),qo(2163761),s.push(Qn(62,n));return r.push(wn),jt=!1,Ot=i,t?(Ge(),new K6(r,r,e,s)):(Ge(),new YS(r,s))}function QH(n){jt=!1;const e=[wn];return Ge(),new K6(e,e,n)}function Ge(){for(;wt<nl;)if(Vd=wt,(Te=TJ[hn]())!=null)return;Te=6291456}function Xe(){return hn=Wd(++wt)}function cJ(){for(;MJ[Xe()];);const n=xJ[wn=wc()];return n===void 0?4096:n}function JH(n){let e=hn;if(n===!1){do e=Xe();while(e<=57&&e>=48);if(e!==46)return wn=parseInt(wc(),10),32768;if(e=Xe(),wt>=nl)return wn=parseInt(wc().slice(0,-1),10),32768}if(e<=57&&e>=48)do e=Xe();while(e<=57&&e>=48);else hn=Wd(--wt);return wn=parseFloat(wc()),32768}function uJ(){const n=hn;Xe();let e=0;const t=new Array;let i=wt;for(;hn!==n;)if(hn===92)t.push(Nt.slice(i,wt)),Xe(),e=uO(hn),Xe(),t.push(Xb(e)),i=wt;else{if(wt>=nl)throw SJ();Xe()}const r=Nt.slice(i,wt);return Xe(),t.push(r),wn=t.join(""),16384}function tz(){let n=!0,e="";for(;Xe()!==96;)if(hn===36)if(wt+1<nl&&Wd(wt+1)===123){wt++,n=!1;break}else e+="$";else if(hn===92)e+=Xb(uO(Xe()));else{if(wt>=nl)throw nz();e+=Xb(hn)}return Xe(),wn=e,n?2163760:2163761}const hJ=()=>{if(wt>=nl)throw nz();return wt--,tz()},$a=n=>Te===n?(Ge(),!0):!1,qo=n=>{if(Te===n)Ge();else throw iz(n)},dJ=()=>gn(151,Nt),CA=()=>gn(152,Nt),Bl=()=>gn(153,Nt),fJ=()=>gn(154,Nt),gJ=()=>gn(155,Nt),LE=()=>gn(156,wc(),wt,Nt),pJ=()=>gn(157),mJ=()=>gn(158,Nt),vJ=()=>gn(159,Nt),bJ=()=>gn(160,Nt),wJ=()=>gn(161,Nt),yJ=()=>gn(162,Nt),e$=n=>gn(163,Nt,n),CJ=()=>gn(164,Nt),SJ=()=>gn(165,Nt),nz=()=>gn(166,Nt),iz=n=>gn(167,_g[n&63],Nt),_J=()=>gn(170,wc(),wt,Nt),dO=()=>gn(171,wc(),wt-1,Nt),rS=()=>gn(172,Nt),My=()=>gn(173,Nt),t$=()=>gn(174,Nt),n$=()=>gn(175,Nt),RJ=()=>gn(176,Nt),rz=()=>gn(178,Nt),EJ=()=>gn(179,wt-1,Nt),_g=[qQ,XQ,ZQ,Z6,"this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",2163760,2163761,"of","=>","+=","-=","*=","/=","++","--"],xJ=Object.assign(nS(),{true:8193,null:8194,false:8192,undefined:8195,this:12293,$this:12292,$parent:12295,in:6562213,instanceof:6562214,typeof:139305,void:139306,of:4204594}),{CharScanners:TJ,IdParts:MJ}=(()=>{const n=()=>{throw gn(168,Nt)};n.notMapped=!0;const e={AsciiIdPart:[36,0,48,58,65,91,95,0,97,123],IdStart:[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Digit:[48,58],Skip:[0,33,127,161]},t=(o,a,l,c)=>{const u=l.length;for(let h=0;h<u;h+=2){const d=l[h];let f=l[h+1];f=f>0?f:d+1,o&&o.fill(c,d,f)}},i=(o=>(t(o,null,e.IdStart,1),t(o,null,e.Digit,1),o))(new Uint8Array(65535)),r=o=>()=>(Xe(),o),s=new Array(65535);return s.fill(n,0,65535),t(s,null,e.Skip,()=>(Xe(),null)),t(s,null,e.IdStart,cJ),t(s,null,e.Digit,()=>JH(!1)),s[34]=s[39]=()=>uJ(),s[96]=()=>tz(),s[33]=()=>Xe()!==61?131119:Xe()!==61?6553950:(Xe(),6553952),s[61]=()=>Xe()===62?(Xe(),51):hn!==61?4194350:Xe()!==61?6553949:(Xe(),6553951),s[38]=()=>Xe()!==38?6291480:(Xe(),6553884),s[124]=()=>Xe()!==124?6291481:(Xe(),6553819),s[63]=()=>{if(Xe()===46){const o=Wd(wt+1);return o<=48||o>=57?(Xe(),2162701):6291479}return hn!==63?6291479:(Xe(),6553754)},s[46]=()=>Xe()<=57&&hn>=48?JH(!0):hn===46?Xe()!==46?11:(Xe(),12):65546,s[60]=()=>Xe()!==61?6554017:(Xe(),6554019),s[62]=()=>Xe()!==61?6554018:(Xe(),6554020),s[37]=r(6554156),s[40]=r(2688008),s[41]=r(7340047),s[42]=()=>Xe()!==61?6554155:(Xe(),4194358),s[43]=()=>Xe()===43?(Xe(),2228280):hn!==61?2490855:(Xe(),4194356),s[44]=r(6291472),s[45]=()=>Xe()===45?(Xe(),2228281):hn!==61?2490856:(Xe(),4194357),s[47]=()=>Xe()!==61?6554157:(Xe(),4194359),s[58]=r(6291477),s[59]=r(6291478),s[91]=r(2688019),s[93]=r(7340052),s[123]=r(524297),s[125]=r(7340046),{CharScanners:s,IdParts:i}})(),dl=Zu.createInterface,Np=Object.freeze,{aliasTo:i$,singleton:fO}=Fd,So="Interpolation",sz="IsFunction",fl="IsProperty",Rg="custom-element",Lw=Np({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),HR=dl("ITemplateCompiler"),oz=dl("IAttrMapper"),Kn=(n,...e)=>new Error(`AUR${String(n).padStart(4,"0")}: ${PJ(n,...e)}`),AJ={88:"AttributeParser is already initialized; cannot add patterns after initialization.",89:'Attribute pattern "{{0}}" has already been registered.',99:"Method {{0}} not implemented",157:"Binding command {{0}} has already been registered.",701:'Template compilation error in element "{{0:name}}": the root <template> cannot be a local element template.',702:'Template compilation error: attribute "{{0}}" is invalid on element surrogate.',703:'Template compilation error: template controller "{{0}}" is invalid on element surrogate.',704:'Template compilation error: Invalid command "{{0:.command}}" for <let>. Only to-view/bind supported.',706:'Template compilation error: detected projection with [au-slot="{{0}}"] attempted on a non custom element {{1}}.',707:"Template compilation error: creating binding to non-bindable property {{0}} on {{1}}.",708:'Template compilation error: the custom element "{{0}}" does not have any content other than local template(s).',709:'Template compilation error: local element template needs to be defined directly under root of element "{{0}}".',710:'Template compilation error: bindable properties of local element "{{0}}" template needs to be defined directly under <template>.',711:`Template compilation error: the attribute 'property' is missing in {{0:outerHTML}} in local element "{{1}}"`,712:"Template compilation error: Bindable property and attribute needs to be unique; found property: {{0}}, attribute: {{1}}",713:'Template compilation error: unknown binding command: "{{0}}".{{0:bindingCommandHelp}}',714:'Template compilation error: primary already exists on element/attribute "{{0}}"',715:'Template compilation error: the value of "as-custom-element" attribute cannot be empty for local element in element "{{0}}"',716:'Template compilation error: duplicate definition of the local template named "{{0}} in element {{1}}"',717:'Template compilation error: detected a usage of "<slot>" element without specifying shadow DOM options in element: {{0}}',718:'Spreading template controller "{{0}}" is not supported.',719:"Attribute {{0}} has been already registered for {{1:element}}",720:'Spreading syntax "...xxx" is reserved. Encountered "...{{0}}"',721:'Usage of $bindables is only allowed on custom element. Encountered: <{{0}} {{1}}="{{2}}">',722:"Invalid platform object provided to the compilation, no DOM API found.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?"},PJ=(n,...e)=>{var i;let t=AJ[n];for(let r=0;r<e.length;++r){const s=new RegExp(`{{${r}(:.*)?}}`,"g");let o=s.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[r];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=IJ(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=String(l[a.slice(1)]):l=String(l)}t=t.slice(0,o.index)+l+t.slice(s.lastIndex),o=s.exec(t)}}return t};function IJ(n){switch(n){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}var az,lz,cz,uz,hz;class gO{constructor(e,t,i,r){if(this.chars=e,this.repeat=t,this.isSymbol=i,this.isInverted=r,r)switch(e.length){case 0:this.has=this._hasOfNoneInverse;break;case 1:this.has=this._hasOfSingleInverse;break;default:this.has=this._hasOfMultipleInverse}else switch(e.length){case 0:this.has=this._hasOfNone;break;case 1:this.has=this._hasOfSingle;break;default:this.has=this._hasOfMultiple}}equals(e){return this.chars===e.chars&&this.repeat===e.repeat&&this.isSymbol===e.isSymbol&&this.isInverted===e.isInverted}_hasOfMultiple(e){return this.chars.includes(e)}_hasOfSingle(e){return this.chars===e}_hasOfNone(e){return!1}_hasOfMultipleInverse(e){return!this.chars.includes(e)}_hasOfSingleInverse(e){return this.chars!==e}_hasOfNoneInverse(e){return!0}}class OJ{constructor(){this.parts=mt,this._pattern="",this._currentRecord={},this._partsRecord={}}get pattern(){const e=this._pattern;return e===""?null:e}set pattern(e){e==null?(this._pattern="",this.parts=mt):(this._pattern=e,this.parts=this._partsRecord[e])}append(e,t){const i=this._currentRecord;i[e]===void 0?i[e]=t:i[e]+=t}next(e){const t=this._currentRecord;let i;t[e]!==void 0&&(i=this._partsRecord,i[e]===void 0?i[e]=[t[e]]:i[e].push(t[e]),t[e]=void 0)}}class pO{get _pattern(){return this._isEndpoint?this._patterns[0]:null}constructor(e,...t){this.charSpec=e,this._nextStates=[],this._types=null,this._isEndpoint=!1,this._patterns=t}findChild(e){const t=this._nextStates,i=t.length;let r=null,s=0;for(;s<i;++s)if(r=t[s],e.equals(r.charSpec))return r;return null}append(e,t){const i=this._patterns;i.includes(t)||i.push(t);let r=this.findChild(e);return r==null&&(r=new pO(e,t),this._nextStates.push(r),e.repeat&&r._nextStates.push(r)),r}findMatches(e,t){const i=[],r=this._nextStates,s=r.length;let o=0,a=null,l=0,c=0;for(;l<s;++l)if(a=r[l],a.charSpec.has(e))if(i.push(a),o=a._patterns.length,c=0,a.charSpec.isSymbol)for(;c<o;++c)t.next(a._patterns[c]);else for(;c<o;++c)t.append(a._patterns[c],e);return i}}class r${constructor(e){this.text=e;const t=this._len=e.length,i=this._specs=[];let r=0;for(;t>r;++r)i.push(new gO(e[r],!1,!1,!1))}eachChar(e){const t=this._len,i=this._specs;let r=0;for(;t>r;++r)e(i[r])}}class kJ{constructor(e){this.text="PART",this._spec=new gO(e,!0,!1,!0)}eachChar(e){e(this._spec)}}class DJ{constructor(e){this.text=e,this._spec=new gO(e,!1,!0,!1)}eachChar(e){e(this._spec)}}class NJ{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const LJ=dl("ISyntaxInterpreter",n=>n.singleton(HJ));class HJ{constructor(){this._rootState=new pO(null),this._initialStates=[this._rootState]}add(e){e=e.slice(0).sort((d,f)=>d.pattern>f.pattern?1:-1);const t=e.length;let i,r,s,o,a,l,c,u=0,h;for(;t>u;){for(i=this._rootState,r=e[u],s=r.pattern,o=new NJ,a=this._parse(r,o),l=a.length,c=d=>i=i.append(d,s),h=0;l>h;++h)a[h].eachChar(c);i._types=o,i._isEndpoint=!0,++u}}interpret(e){const t=new OJ,i=e.length;let r=this._initialStates,s=0,o;for(;s<i&&(r=this._getNextStates(r,e.charAt(s),t),r.length!==0);++s);return r=r.filter($J),r.length>0&&(r.sort(FJ),o=r[0],o.charSpec.isSymbol||t.next(o._pattern),t.pattern=o._pattern),t}_getNextStates(e,t,i){const r=[];let s=null;const o=e.length;let a=0;for(;a<o;++a)s=e[a],r.push(...s.findMatches(t,i));return r}_parse(e,t){const i=[],r=e.pattern,s=r.length,o=e.symbols;let a=0,l=0,c="";for(;a<s;)c=r.charAt(a),o.length===0||!o.includes(c)?a===l&&c==="P"&&r.slice(a,a+4)==="PART"?(l=a=a+4,i.push(new kJ(o)),++t.dynamics):++a:a!==l?(i.push(new r$(r.slice(l,a))),++t.statics,l=a):(i.push(new DJ(r.slice(l,a+1))),++t.symbols,l=++a);return l!==a&&(i.push(new r$(r.slice(l,a))),++t.statics),i}}function $J(n){return n._isEndpoint}function FJ(n,e){const t=n._types,i=e._types;return t.statics!==i.statics?i.statics-t.statics:t.dynamics!==i.dynamics?i.dynamics-t.dynamics:t.symbols!==i.symbols?i.symbols-t.symbols:0}class Ss{constructor(e,t,i,r,s=null){this.rawName=e,this.rawValue=t,this.target=i,this.command=r,this.parts=s}}const BJ=dl("IAttributePattern"),mO=dl("IAttributeParser",n=>n.singleton(VJ));class VJ{constructor(){this._cache={},this._patterns={},this._initialized=!1,this._allDefinitions=[],this._interpreter=pe(LJ),this._container=pe(Dw)}registerPattern(e,t){if(this._initialized)throw Kn(88);const i=this._patterns;for(const{pattern:r}of e){if(i[r]!=null)throw Kn(89,r);i[r]={patternType:t}}this._allDefinitions.push(...e)}_initialize(){this._interpreter.add(this._allDefinitions);const e=this._container;for(const[,t]of Object.entries(this._patterns))t.pattern=e.get(t.patternType)}parse(e,t){this._initialized||(this._initialize(),this._initialized=!0);let i=this._cache[e];i==null&&(i=this._cache[e]=this._interpreter.interpret(e));const r=i.pattern;return r==null?new Ss(e,t,e,null,null):this._patterns[r].pattern[r](e,t,i.parts)}}const Qu=Np({name:df("attribute-pattern"),create(n,e){return{register(t){t.get(mO).registerPattern(n,e),fO(BJ,e).register(t)}}}});class SA{"PART.PART"(e,t,i){return new Ss(e,t,i[0],i[1])}"PART.PART.PART"(e,t,i){return new Ss(e,t,`${i[0]}.${i[1]}`,i[2])}}az=Symbol.metadata;SA[az]={[hl]:Qu.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],SA)};class _A{ref(e,t,i){return new Ss(e,t,"element","ref")}"PART.ref"(e,t,i){let r=i[0];return r==="view-model"&&(r="component",console.warn(`[aurelia] Detected view-model.ref usage: "${e}=${t}". This is deprecated and component.ref should be used instead`)),new Ss(e,t,r,"ref")}}lz=Symbol.metadata;_A[lz]={[hl]:Qu.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],_A)};class RA{"PART.trigger:PART"(e,t,i){return new Ss(e,t,i[0],"trigger",i)}"PART.capture:PART"(e,t,i){return new Ss(e,t,i[0],"capture",i)}}cz=Symbol.metadata;RA[cz]={[hl]:Qu.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],RA)};class s${":PART"(e,t,i){return new Ss(e,t,i[0],"bind")}}uz=Symbol.metadata;s$[uz]={[hl]:Qu.create([{pattern:":PART",symbols:":"}],s$)};class o${"@PART"(e,t,i){return new Ss(e,t,i[0],"trigger")}"@PART:PART"(e,t,i){return new Ss(e,t,i[0],"trigger",[i[0],"trigger",...i.slice(1)])}}hz=Symbol.metadata;o$[hz]={[hl]:Qu.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],o$)};const EA=Pc.get,a$=Pc.define,dz="ra",fz="rb",gz="rc",pz="rd",mz="re",vz="rf",vO="rg",bz="ri",wz="rj",yz="rk",Cz="rl",Sz="ha",_z="hb",Rz="hc",WJ="hd",Ez="he",xz="hf",Tz="hg",Mz="hs",Az="hp",Pz="svb",mi=Np({hydrateElement:dz,hydrateAttribute:fz,hydrateTemplateController:gz,hydrateLetElement:pz,setProperty:mz,interpolation:vz,propertyBinding:vO,letBinding:bz,refBinding:wz,iteratorBinding:yz,multiAttr:Cz,textBinding:Sz,listenerBinding:_z,attributeBinding:Rz,stylePropertyBinding:WJ,setAttribute:Ez,setClassAttribute:xz,setStyleAttribute:Tz,spreadTransferedBinding:Mz,spreadElementProp:Az,spreadValueBinding:Pz}),Lp=dl("Instruction");class Rl{constructor(e,t){this.from=e,this.to=t,this.type=vz}}class Hw{constructor(e,t,i){this.from=e,this.to=t,this.mode=i,this.type=vO}}class jJ{constructor(e,t,i){this.forOf=e,this.to=t,this.props=i,this.type=yz}}class zJ{constructor(e,t){this.from=e,this.to=t,this.type=wz}}class Df{constructor(e,t){this.value=e,this.to=t,this.type=mz}}class UJ{constructor(e,t,i){this.value=e,this.to=t,this.command=i,this.type=Cz}}class GJ{constructor(e,t,i,r,s,o){this.res=e,this.props=t,this.projections=i,this.containerless=r,this.captures=s,this.data=o,this.type=dz}}class HE{constructor(e,t,i){this.res=e,this.alias=t,this.props=i,this.type=fz}}class YJ{constructor(e,t,i,r){this.def=e,this.res=t,this.alias=i,this.props=r,this.type=gz}}class KJ{constructor(e,t){this.instructions=e,this.toBindingContext=t,this.type=pz}}class l${constructor(e,t){this.from=e,this.to=t,this.type=bz}}class qJ{constructor(e){this.from=e,this.type=Sz}}class Iz{constructor(e,t,i,r){this.from=e,this.to=t,this.capture=i,this.modifier=r,this.type=_z}}class c${constructor(e,t){this.value=e,this.to=t,this.type=Ez}}class u${constructor(e){this.value=e,this.type=xz}}class h${constructor(e){this.value=e,this.type=Tz}}class bO{constructor(e,t,i){this.attr=e,this.from=t,this.to=i,this.type=Rz}}class d${constructor(){this.type=Mz}}class f${constructor(e){this.instruction=e,this.type=Az}}class xA{constructor(e,t){this.target=e,this.from=t,this.type=Pz}}class XS{constructor(e,t,i,r){this.Type=e,this.name=t,this.aliases=i,this.key=r}static create(e,t){let i,r;return Ct(e)?(i=e,r={name:i}):(i=e.name,r=e),new XS(t,gu(TA(t,"name"),i),di(TA(t,"aliases"),r.aliases,t.aliases),Qg(i))}register(e,t){const i=this.Type,r=typeof t=="string"?Qg(t):this.key,s=this.aliases;e.has(r,!1)?console.warn(`[DEV:aurelia] ${Kn(157,this.name)}`):e.register(e.has(i,!1)?null:fO(i,i),i$(i,r),...s.map(o=>i$(i,Qg(o))))}}const cr="binding-command",sS=df(cr),Qg=n=>`${sS}:${n}`,TA=(n,e)=>EA(O6.annotation.keyFor(e),n),XJ=(()=>{const n="__au_static_resource__",e=(t,i,r)=>{var o;let s=EA(n,t);return s==null&&((o=t.$au)==null?void 0:o.type)===i&&(s=r(t.$au,t),a$(s,t,n)),s};return Np({name:sS,keyFrom:Qg,define(t,i){const r=XS.create(t,i),s=r.Type;return a$(r,s,sS,Ya),s},getAnnotation:TA,find(t,i){const r=t.find(cr,i);return r==null?null:EA(sS,r)??e(r,cr,XS.create)??null},get(t,i){try{return t.get(gp(Qg(i)))}catch(r){throw console.log(`


[DEV:aurelia] Cannot retrieve binding command with name




`,i),r}return t.get(gp(Qg(i)))}})})();class Oz{get ignoreAttr(){return!1}build(e,t,i){let s=e.attr.target,o=e.attr.rawValue;return o=o===""?Ni(s):o,e.bindable==null?s=i.map(e.node,s)??Ni(s):s=e.bindable.name,new Hw(t.parse(o,fl),s,1)}}Oz.$au={type:cr,name:"one-time"};class kz{get ignoreAttr(){return!1}build(e,t,i){let s=e.attr.target,o=e.attr.rawValue;return o=o===""?Ni(s):o,e.bindable==null?s=i.map(e.node,s)??Ni(s):s=e.bindable.name,new Hw(t.parse(o,fl),s,2)}}kz.$au={type:cr,name:"to-view"};class Dz{get ignoreAttr(){return!1}build(e,t,i){const r=e.attr;let s=r.target,o=r.rawValue;return o=o===""?Ni(s):o,e.bindable==null?s=i.map(e.node,s)??Ni(s):s=e.bindable.name,new Hw(t.parse(o,fl),s,4)}}Dz.$au={type:cr,name:"from-view"};class Nz{get ignoreAttr(){return!1}build(e,t,i){const r=e.attr;let s=r.target,o=r.rawValue;return o=o===""?Ni(s):o,e.bindable==null?s=i.map(e.node,s)??Ni(s):s=e.bindable.name,new Hw(t.parse(o,fl),s,6)}}Nz.$au={type:cr,name:"two-way"};class Lz{get ignoreAttr(){return!1}build(e,t,i){const r=e.attr,s=e.bindable;let o=r.rawValue,a=r.target,l,c;return o=o===""?Ni(a):o,s==null?(c=i.isTwoWay(e.node,a)?6:2,a=i.map(e.node,a)??Ni(a)):(l=e.def.defaultBindingMode??0,c=s.mode===0||s.mode==null?l==null||l===0?2:l:s.mode,a=s.name),new Hw(t.parse(o,fl),a,Ct(c)?Lw[c]??0:c)}}Lz.$au={type:cr,name:"bind"};class Hz{constructor(){this._attrParser=pe(mO)}get ignoreAttr(){return!1}build(e,t){const i=e.bindable===null?Ni(e.attr.target):e.bindable.name,r=t.parse(e.attr.rawValue,"IsIterator");let s=mt;if(r.semiIdx>-1){const o=e.attr.rawValue.slice(r.semiIdx+1),a=o.indexOf(":");if(a>-1){const l=o.slice(0,a).trim(),c=o.slice(a+1).trim(),u=this._attrParser.parse(l,c);s=[new UJ(c,u.target,u.command)]}}return new jJ(r,i,s)}}Hz.$au={type:cr,name:"for"};class $z{get ignoreAttr(){return!0}build(e,t){var i;return new Iz(t.parse(e.attr.rawValue,sz),e.attr.target,!1,((i=e.attr.parts)==null?void 0:i[2])??null)}}$z.$au={type:cr,name:"trigger"};class Fz{get ignoreAttr(){return!0}build(e,t){var i;return new Iz(t.parse(e.attr.rawValue,sz),e.attr.target,!0,((i=e.attr.parts)==null?void 0:i[2])??null)}}Fz.$au={type:cr,name:"capture"};class Bz{get ignoreAttr(){return!0}build(e,t){const i=e.attr,r=i.target;let s=i.rawValue;return s=s===""?Ni(r):s,new bO(r,t.parse(s,fl),r)}}Bz.$au={type:cr,name:"attr"};class Vz{get ignoreAttr(){return!0}build(e,t){return new bO("style",t.parse(e.attr.rawValue,fl),e.attr.target)}}Vz.$au={type:cr,name:"style"};class Wz{get ignoreAttr(){return!0}build(e,t){return new bO("class",t.parse(e.attr.rawValue,fl),e.attr.target)}}Wz.$au={type:cr,name:"class"};class jz{get ignoreAttr(){return!0}build(e,t){return new zJ(t.parse(e.attr.rawValue,fl),e.attr.target)}}jz.$au={type:cr,name:"ref"};class zz{get ignoreAttr(){return!1}build(e){return new xA(e.attr.target,e.attr.rawValue)}}zz.$au={type:cr,name:"spread"};const ZJ=dl("ITemplateElementFactory",n=>n.singleton(QJ)),g$={};class QJ{constructor(){this.p=pe(kp),this._template=this.t()}t(){return this.p.document.createElement("template")}createTemplate(e){var i;if(Ct(e)){let r=g$[e];if(r===void 0){const s=this._template;s.innerHTML=e;const o=s.content.firstElementChild;t(o)?(this._template=this.t(),r=s):(s.content.removeChild(o),r=o),g$[e]=r}return r.cloneNode(!0)}if(e.nodeName!=="TEMPLATE"){const r=this.t();return r.content.appendChild(e),r}return(i=e.parentNode)==null||i.removeChild(e),e.cloneNode(!0);function t(r){if(r==null||r.nodeName!=="TEMPLATE"||r.nextElementSibling!=null)return!0;const o=r.previousSibling;if(o!=null)switch(o.nodeType){case 3:return o.textContent.trim().length>0}const a=r.nextSibling;if(a!=null)switch(a.nodeType){case 3:return a.textContent.trim().length>0}return!1}}}const $E="au-start",FE="au-end",BE=(n,e,t)=>n.insertBefore(e,t),p$=(n,e,t)=>{if(n===null)return;const i=t.length;let r=0;for(;i>r;)n.insertBefore(t[r],e),++r},hh=(n,e)=>n.content.appendChild(e),m$=(n,e)=>{const t=e.length;let i=0;for(;t>i;)n.content.appendChild(e[i]),++i},v$=n=>n.nodeType===1,b$=n=>n.nodeType===3,dm="au-slot",w$="default",fm=(n=>()=>`anonymous-${++n}`)(0);class Uz{constructor(){this.debug=!1,this.resolveResources=!0}compile(e,t){var h,d;if(e.template==null||e.needsCompile===!1)return e;const i=new ZS(e,t,null,null,void 0),r=Ct(e.template)||!e.enhance?i._templateFactory.createTemplate(e.template):e.template,s=r.nodeName===VE&&r.content!=null,o=s?r.content:r,a=ree.findAll(t),l=a.length;let c=0;if(l>0)for(;l>c;)(d=(h=a[c]).compiling)==null||d.call(h,r),++c;if(r.hasAttribute(MA))throw Kn(701,e);return this._compileLocalElement(o,i),this._compileNode(o,i),{...e,name:e.name||fm(),dependencies:(e.dependencies??mt).concat(i.deps??mt),instructions:i.rows,surrogates:s?this._compileSurrogate(r,i):mt,template:r,hasSlots:i.hasSlot,needsCompile:!1}}compileSpread(e,t,i,r,s){const o=new ZS(e,i,null,null,void 0),a=[],l=s??o._findElement(r.nodeName.toLowerCase()),c=l!==null,u=o._exprParser,h=t.length;let d=0,f,g=null,p,m,b,y,w,R=null,E,_,T,I;for(;h>d;++d){if(f=t[d],T=f.target,I=f.rawValue,T==="...$attrs"){a.push(new d$);continue}if(R=o._getCommand(f),R!==null&&R.ignoreAttr){Oe.node=r,Oe.attr=f,Oe.bindable=null,Oe.def=null,a.push(R.build(Oe,o._exprParser,o._attrMapper));continue}if(c&&(b=o._getBindables(l),y=b.attrs[T],y!==void 0)){R==null?(E=u.parse(I,So),a.push(new f$(E==null?new Df(I,y.name):new Rl(E,y.name)))):(Oe.node=r,Oe.attr=f,Oe.bindable=y,Oe.def=l,a.push(new f$(R.build(Oe,o._exprParser,o._attrMapper))));continue}if(g=o._findAttr(T),g!==null){if(g.isTemplateController)throw Kn(9998,T);b=o._getBindables(g),_=g.noMultiBindings===!1&&R===null&&WE(I),_?m=this._compileMultiBindings(r,I,g,o):(w=b.primary,R===null?(E=u.parse(I,So),m=[E===null?new Df(I,w.name):new Rl(E,w.name)]):(Oe.node=r,Oe.attr=f,Oe.bindable=w,Oe.def=g,m=[R.build(Oe,o._exprParser,o._attrMapper)])),(p??(p=[])).push(new HE(this.resolveResources?g:g.name,g.aliases!=null&&g.aliases.includes(T)?T:void 0,m));continue}if(R==null)if(E=u.parse(I,So),E!=null)a.push(new Rl(E,o._attrMapper.map(r,T)??Ni(T)));else switch(T){case"class":a.push(new u$(I));break;case"style":a.push(new h$(I));break;default:a.push(new c$(I,T))}else Oe.node=r,Oe.attr=f,Oe.bindable=null,Oe.def=null,a.push(R.build(Oe,o._exprParser,o._attrMapper))}return Ay(),p!=null?p.concat(a):a}_compileSurrogate(e,t){const i=[],r=e.attributes,s=t._exprParser;let o=r.length,a=0,l,c,u,h,d=null,f,g,p,m,b=null,y,w,R,E;for(;o>a;++a){if(l=r[a],c=l.name,u=l.value,h=t._attrParser.parse(c,u),R=h.target,E=h.rawValue,eee[R])throw Kn(702,c);if(b=t._getCommand(h),b!==null&&b.ignoreAttr){Oe.node=e,Oe.attr=h,Oe.bindable=null,Oe.def=null,i.push(b.build(Oe,t._exprParser,t._attrMapper));continue}if(d=t._findAttr(R),d!==null){if(d.isTemplateController)throw Kn(703,R);p=t._getBindables(d),w=d.noMultiBindings===!1&&b===null&&WE(E),w?g=this._compileMultiBindings(e,E,d,t):(m=p.primary,b===null?(y=s.parse(E,So),g=y===null?E===""?[]:[new Df(E,m.name)]:[new Rl(y,m.name)]):(Oe.node=e,Oe.attr=h,Oe.bindable=m,Oe.def=d,g=[b.build(Oe,t._exprParser,t._attrMapper)])),e.removeAttribute(c),--a,--o,(f??(f=[])).push(new HE(this.resolveResources?d:d.name,d.aliases!=null&&d.aliases.includes(R)?R:void 0,g));continue}if(b===null)if(y=s.parse(E,So),y!=null)e.removeAttribute(c),--a,--o,i.push(new Rl(y,t._attrMapper.map(e,R)??Ni(R)));else switch(c){case"class":i.push(new u$(E));break;case"style":i.push(new h$(E));break;default:i.push(new c$(E,c))}else Oe.node=e,Oe.attr=h,Oe.bindable=null,Oe.def=null,i.push(b.build(Oe,t._exprParser,t._attrMapper))}return Ay(),f!=null?f.concat(i):i}_compileNode(e,t){switch(e.nodeType){case 1:switch(e.nodeName){case"LET":return this._compileLet(e,t);default:return this._compileElement(e,t)}case 3:return this._compileText(e,t);case 11:{let i=e.firstChild;for(;i!==null;)i=this._compileNode(i,t);break}}return e.nextSibling}_compileLet(e,t){const i=e.attributes,r=i.length,s=[],o=t._exprParser;let a=!1,l=0,c,u,h,d,f,g,p,m;for(;r>l;++l){if(c=i[l],h=c.name,d=c.value,h==="to-binding-context"){a=!0;continue}if(u=t._attrParser.parse(h,d),g=u.target,p=u.rawValue,f=t._getCommand(u),f!==null){if(u.command==="bind")s.push(new l$(o.parse(p,fl),Ni(g)));else throw Kn(704,u);continue}m=o.parse(p,So),m===null&&console.warn(`[DEV:aurelia] Property "${g}" is declared with literal string ${p}. Did you mean ${g}.bind="${p}"?`),s.push(new l$(m===null?new $i(p):m,Ni(g)))}return t.rows.push([new KJ(s,a)]),this._markAsTarget(e,t).nextSibling}_compileElement(e,t){var q,Q,ce,le,Me,Ce,J,oe;const i=e.nextSibling,r=(e.getAttribute("as-element")??e.nodeName).toLowerCase(),s=t._findElement(r),o=s!==null,a=o&&s.shadowOptions!=null,l=s==null?void 0:s.capture,c=l!=null&&typeof l!="boolean",u=l?[]:mt,h=t._exprParser,d=this.debug?Za:()=>{e.removeAttribute(y),--m,--p};let f=e.attributes,g,p=f.length,m=0,b,y,w,R,E,_,T=null,I=!1,x,P,D,B,V,z,L,k=null,F,G,U,se,v=!0,C=!1,S=!1,A=!1,H,M=0;if(r==="slot"){if(t.root.def.shadowOptions==null)throw Kn(717,t.root.def.name);t.root.hasSlot=!0}for(o&&(H={},v=(q=s.processContent)==null?void 0:q.call(s.Type,e,t.p,H),f=e.attributes,p=f.length);p>m;++m){switch(b=f[m],y=b.name,w=b.value,y){case"as-element":case"containerless":d(),C=C||y==="containerless";continue}if(R=t._attrParser.parse(y,w),k=t._getCommand(R),U=R.target,se=R.rawValue,l&&(!c||c&&l(U))){if(k!=null&&k.ignoreAttr){d(),u.push(R);continue}if(S=U!==dm&&U!=="slot"&&((M=U.indexOf("..."))===-1||M===0&&U==="...$attrs"),S&&(F=t._getBindables(s),F.attrs[U]==null&&!((Q=t._findAttr(U))!=null&&Q.isTemplateController))){d(),u.push(R);continue}}if(U==="...$attrs"){(E??(E=[])).push(new d$),d();continue}if(k!=null&&k.ignoreAttr){Oe.node=e,Oe.attr=R,Oe.bindable=null,Oe.def=null,(E??(E=[])).push(k.build(Oe,t._exprParser,t._attrMapper)),d();continue}if(U.indexOf("...")===0){if(o&&(U=U.slice(3))!=="$element"){(_??(_=[])).push(new xA("$bindables",U==="$bindables"?se:U)),d();continue}throw(U==="$bindable"||U==="bindables")&&console.warn(`[DEV:aurelia] Detected usage of ${U} on <${e.nodeName}>, did you mean "$bindables"?`),Kn(720,U)}if(o){if(F=t._getBindables(s),x=F.attrs[U],x!==void 0){k===null?(z=h.parse(se,So),(_??(_=[])).push(z==null?new Df(se,x.name):new Rl(z,x.name))):(Oe.node=e,Oe.attr=R,Oe.bindable=x,Oe.def=s,(_??(_=[])).push(k.build(Oe,t._exprParser,t._attrMapper))),d(),T=t._findAttr(U),T!==null&&console.warn(`[DEV:aurelia] Binding with bindable "${U}" on custom element "${s.name}" is ambiguous.There is a custom attribute with the same name.`);continue}if(U==="$bindables"){if(k!=null){Oe.node=e,Oe.attr=R,Oe.bindable=null,Oe.def=s;{const ae=k.build(Oe,t._exprParser,t._attrMapper);ae instanceof xA||console.warn(`[DEV:aurelia] Binding with "$bindables" on custom element "${s.name}" with command ${R.command}  did not result in a spread binding instruction. This likely won't work as expected.`),(_??(_=[])).push(ae)}}else console.warn(`[DEV:aurelia] Usage of "$bindables" on custom element "<${s.name}>" is ignored.`);d();continue}}if(U==="$bindables")throw Kn(721,e.nodeName,U,se);if(T=t._findAttr(U),T!==null){F=t._getBindables(T),I=T.noMultiBindings===!1&&k===null&&WE(se),I?D=this._compileMultiBindings(e,se,T,t):(G=F.primary,k===null?(z=h.parse(se,So),D=z===null?se===""?[]:[new Df(se,G.name)]:[new Rl(z,G.name)]):(Oe.node=e,Oe.attr=R,Oe.bindable=G,Oe.def=T,D=[k.build(Oe,t._exprParser,t._attrMapper)])),d(),T.isTemplateController?(B??(B=[])).push(new YJ(JJ,this.resolveResources?T:T.name,void 0,D)):(P??(P=[])).push(new HE(this.resolveResources?T:T.name,T.aliases!=null&&T.aliases.includes(U)?U:void 0,D));continue}if(k===null){z=h.parse(se,So),z!=null&&(d(),(E??(E=[])).push(new Rl(z,t._attrMapper.map(e,U)??Ni(U))));continue}Oe.node=e,Oe.attr=R,Oe.bindable=null,Oe.def=null,(E??(E=[])).push(k.build(Oe,t._exprParser,t._attrMapper)),d()}Ay(),this._shouldReorderAttrs(e,E)&&E!=null&&E.length>1&&this._reorder(e,E),o&&(L=new GJ(this.resolveResources?s:s.name,_??mt,null,C,u,H)),(E!=null||L!=null||P!=null)&&(g=mt.concat(L??mt,P??mt,E??mt),A=!0);let $;if(B!=null){p=B.length-1,m=p,V=B[m];let ae;y$(e)?(ae=t.t(),m$(ae,[t._marker(),t._comment($E),t._comment(FE)])):(this._replaceByMarker(e,t),e.nodeName==="TEMPLATE"?ae=e:(ae=t.t(),hh(ae,e)));const Fe=ae,ve=t._createChild(g==null?[]:[g]);let Se,O,N=!1,W,ee,Y,ie,Z,K,te=0,ne=0,re=e.firstChild,be=!1;if(v!==!1)for(;re!==null;){if(O=v$(re)?re.getAttribute(dm):null,N=O!==null||o&&!a,Se=re.nextSibling,N){if(!o)throw Kn(706,O,r);(ce=re.removeAttribute)==null||ce.call(re,dm),be=b$(re)&&re.textContent.trim()==="",be||((le=ee??(ee={}))[Me=O||w$]??(le[Me]=[])).push(re),e.removeChild(re)}re=Se}if(ee!=null){W={};for(O in ee){for(ae=t.t(),Y=ee[O],te=0,ne=Y.length;ne>te;++te)ie=Y[te],ie.nodeName==="TEMPLATE"?ie.attributes.length>0?hh(ae,ie):hh(ae,ie.content):hh(ae,ie);K=t._createChild(),this._compileNode(ae.content,K),W[O]={name:fm(),type:Rg,template:ae,instructions:K.rows,needsCompile:!1}}L.projections=W}if(A&&(o&&(C||s.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),$=!o||!s.containerless&&!C&&v!==!1,$)if(e.nodeName===VE)this._compileNode(e.content,ve);else for(re=e.firstChild;re!==null;)re=this._compileNode(re,ve);for(V.def={name:fm(),type:Rg,template:Fe,instructions:ve.rows,needsCompile:!1};m-- >0;)V=B[m],ae=t.t(),Z=t._marker(),m$(ae,[Z,t._comment($E),t._comment(FE)]),V.def={name:fm(),type:Rg,template:ae,needsCompile:!1,instructions:[[B[m+1]]]};t.rows.push([V])}else{g!=null&&t.rows.push(g);let ae=e.firstChild,Fe,ve,Se=!1,O=null,N,W,ee,Y,ie,Z=!1,K=0,te=0;if(v!==!1)for(;ae!==null;){if(ve=v$(ae)?ae.getAttribute(dm):null,Se=ve!==null||o&&!a,Fe=ae.nextSibling,Se){if(!o)throw Kn(706,ve,r);(Ce=ae.removeAttribute)==null||Ce.call(ae,dm),Z=b$(ae)&&ae.textContent.trim()==="",Z||((J=N??(N={}))[oe=ve||w$]??(J[oe]=[])).push(ae),e.removeChild(ae)}ae=Fe}if(N!=null){O={};for(ve in N){for(Y=t.t(),W=N[ve],K=0,te=W.length;te>K;++K)ee=W[K],ee.nodeName===VE?ee.attributes.length>0?hh(Y,ee):hh(Y,ee.content):hh(Y,ee);ie=t._createChild(),this._compileNode(Y.content,ie),O[ve]={name:fm(),type:Rg,template:Y,instructions:ie.rows,needsCompile:!1}}L.projections=O}if(A&&(o&&(C||s.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),$=!o||!s.containerless&&!C&&v!==!1,$&&e.childNodes.length>0)for(ae=e.firstChild;ae!==null;)ae=this._compileNode(ae,t)}return i}_compileText(e,t){const i=e.parentNode,r=t._exprParser.parse(e.textContent,So),s=e.nextSibling;let o,a,l,c,u;if(r!==null){for({parts:o,expressions:a}=r,(u=o[0])&&BE(i,t._text(u),e),l=0,c=a.length;c>l;++l)p$(i,e,[t._marker(),t._text(" ")]),(u=o[l+1])&&BE(i,t._text(u),e),t.rows.push([new qJ(a[l])]);i.removeChild(e)}return s}_compileMultiBindings(e,t,i,r){const s=r._getBindables(i),o=t.length,a=[];let l,c,u=0,h=0,d,f,g,p;for(let m=0;m<o;++m)if(h=t.charCodeAt(m),h===92)++m;else if(h===58){for(l=t.slice(u,m);t.charCodeAt(++m)<=32;);for(u=m;m<o;++m)if(h=t.charCodeAt(m),h===92)++m;else if(h===59){c=t.slice(u,m);break}if(c===void 0&&(c=t.slice(u)),f=r._attrParser.parse(l,c),g=r._getCommand(f),p=s.attrs[f.target],p==null)throw Kn(707,f.target,i.name);for(g===null?(d=r._exprParser.parse(c,So),a.push(d===null?new Df(c,p.name):new Rl(d,p.name))):(Oe.node=e,Oe.attr=f,Oe.bindable=p,Oe.def=i,a.push(g.build(Oe,r._exprParser,r._attrMapper)));m<o&&t.charCodeAt(++m)<=32;);u=m,l=void 0,c=void 0}return Ay(),a}_compileLocalElement(e,t){const i=t.root.def.name,r=e,s=PE(r.querySelectorAll("template[as-custom-element]")),o=s.length;if(o===0)return;if(o===r.childElementCount)throw Kn(708,i);const a=new Set,l=[];for(const u of s){if(u.parentNode!==r)throw Kn(709,i);const h=iee(i,u,a),d=u.content,f=PE(d.querySelectorAll("bindable")),g=new Set,p=new Set,m=f.reduce((y,w)=>{if(w.parentNode!==d)throw Kn(710,h);const R=w.getAttribute("name");if(R===null)throw Kn(711,w,h);const E=w.getAttribute("attribute");if(E!==null&&p.has(E)||g.has(R))throw Kn(712,g,E);E!==null&&p.add(E),g.add(R);const _=PE(w.attributes).filter(T=>!C$.includes(T.name));return _.length>0&&console.warn(`[DEV:aurelia] The attribute(s) ${_.map(T=>T.name).join(", ")} will be ignored for ${w.outerHTML}. Only ${C$.join(", ")} are processed.`),w.remove(),y[R]={name:R,attribute:E??void 0,mode:w.getAttribute("mode")??"default"},y},{});class b{}b.$au={type:Rg,name:h,template:u,bindables:m},Reflect.defineProperty(b,"name",{value:M6(h)}),l.push(b),r.removeChild(u)}const c=(t.root.def.dependencies??[]).concat(t.root.def.Type==null?mt:[t.root.def.Type]);for(const u of l)u.dependencies=c.concat(l.filter(h=>h!==u)),t._addLocalDep(u)}_shouldReorderAttrs(e,t){const i=e.nodeName;return i==="INPUT"&&tee[e.type]===1||i==="SELECT"&&(e.hasAttribute("multiple")||(t==null?void 0:t.some(r=>r.type===vO&&r.to==="multiple")))}_reorder(e,t){switch(e.nodeName){case"INPUT":{const i=t;let r,s,o=0,a;for(let l=0;l<i.length&&o<3;l++)switch(a=i[l],a.to){case"model":case"value":case"matcher":r=l,o++;break;case"checked":s=l,o++;break}s!==void 0&&r!==void 0&&s<r&&([i[r],i[s]]=[i[s],i[r]]);break}case"SELECT":{const i=t;let r=0,s=0,o=0,a;for(let l=0;l<i.length&&o<2;++l){switch(a=i[l],a.to){case"multiple":s=l,o++;break;case"value":r=l,o++;break}o===2&&r<s&&([i[s],i[r]]=[i[r],i[s]])}}}}_markAsTarget(e,t){return BE(e.parentNode,t._comment("au*"),e),e}_replaceByMarker(e,t){if(y$(e))return e;const i=e.parentNode,r=t._marker();return p$(i,e,[r,t._comment($E),t._comment(FE)]),i.removeChild(e),r}}Uz.register=kw(HR);const VE="TEMPLATE",y$=n=>n.nodeValue==="au*";class ZS{constructor(e,t,i,r,s){var a;this.hasSlot=!1,this.deps=null;const o=i!==null;if(this.c=t,this.root=r===null?this:r,this.def=e,this.parent=i,this._resourceResolver=o?i._resourceResolver:t.get(Gz),this._commandResolver=o?i._commandResolver:t.get(nee),this._templateFactory=o?i._templateFactory:t.get(ZJ),this._attrParser=o?i._attrParser:t.get(mO),this._exprParser=o?i._exprParser:t.get(Dp),this._attrMapper=o?i._attrMapper:t.get(oz),this._logger=o?i._logger:t.get(Bd),typeof((a=(this.p=o?i.p:t.get(kp)).document)==null?void 0:a.nodeType)!="number")throw Kn(722);this.localEls=o?i.localEls:new Set,this.rows=s??[]}_addLocalDep(e){var t;return((t=this.root).deps??(t.deps=[])).push(e),this.root.c.register(e),this}_text(e){return this.p.document.createTextNode(e)}_comment(e){return this.p.document.createComment(e)}_marker(){return this._comment("au*")}h(e){const t=this.p.document.createElement(e);return e==="template"&&this.p.document.adoptNode(t.content),t}t(){return this.h("template")}_findElement(e){return this._resourceResolver.el(this.c,e)}_findAttr(e){return this._resourceResolver.attr(this.c,e)}_getBindables(e){return this._resourceResolver.bindables(e)}_createChild(e){return new ZS(this.def,this.c,this,this.root,e)}_getCommand(e){const t=e.command;return t===null?null:this._commandResolver.get(this.c,t)}}const WE=n=>{const e=n.length;let t=0,i=0;for(;e>i;){if(t=n.charCodeAt(i),t===92)++i;else{if(t===58)return!0;if(t===36&&n.charCodeAt(i+1)===123)return!1}++i}return!1},Ay=()=>{Oe.node=Oe.attr=Oe.bindable=Oe.def=null},JJ={name:"unnamed",type:Rg},Oe={node:null,attr:null,bindable:null,def:null},eee={id:!0,name:!0,"au-slot":!0,"as-element":!0},tee={checkbox:1,radio:1},Gz=dl("IResourceResolver"),nee=dl("IBindingCommandResolver",n=>{class e{constructor(){this._cache=new WeakMap}get(i,r){let s=this._cache.get(i);return s||this._cache.set(i,s={}),r in s?s[r]:s[r]=XJ.get(i,r)}}return n.singleton(e)}),C$=Np(["name","attribute","mode"]),MA="as-custom-element",iee=(n,e,t)=>{const i=e.getAttribute(MA);if(i===null||i==="")throw Kn(715,n);if(t.has(i))throw Kn(716,i,n);return t.add(i),e.removeAttribute(MA),i},S$=dl("ITemplateCompilerHooks"),ree=Np({name:df("compiler-hooks"),define(n){return{register(e){fO(S$,n).register(e)}}},findAll(n){return n.get(QZ(S$))}}),see=Object.prototype.hasOwnProperty,Xo=Reflect.defineProperty;function il(n,e,t){return Xo(n,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t}function tc(n,e,t){e in n||il(n,e,t)}const Yz=Object.assign,wO=Object.freeze,jd=String,$R=Zu.createInterface,oee=Pc.get,aee=Pc.define,Je=(n,...e)=>new Error(`AUR${jd(n).padStart(4,"0")}: ${cee(n,...e)}`),lee={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`,199:"Trying to observe property {{0}} on null/undefined",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",206:"Trying to switch to a null/undefined connectable",207:"Trying to enter an active connectable",208:"Trying to pop a null/undefined connectable",209:"Trying to exit an inactive connectable",210:"Unrecognised collection type {{0:toString}}.",217:"There is no registration for IDirtyChecker interface. If you want to use your own dirty checker, make sure you register it.",218:"Dirty checked is not permitted in this application. Property key {{0}} is being dirty checked.",219:"Trying to set value for property {{0}} in dirty checker",220:'Map/Set "size" is a readonly property',221:'Trying to assign value to readonly property "{{0}}" through computed observer.',224:"Invalid @observable decorator usage, cannot determine property name",225:"Trying to stop an effect that has already been stopped",226:"Maximum number of recursive effect run reached. Consider handle effect dependencies differently."},cee=(n,...e)=>{var i;let t=lee[n];for(let r=0;r<e.length;++r){const s=new RegExp(`{{${r}(:.*)?}}`,"g");let o=s.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[r];if(l!=null)switch(a){case"typeof":l=typeof l;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=jd(l[a.slice(1)]):l=jd(l)}t=t.slice(0,o.index)+l+t.slice(s.lastIndex),o=s.exec(t)}}return t};class pi{constructor(e,t,i,r){this.parent=e,this.bindingContext=t,this.overrideContext=i,this.isBoundary=r}static getContext(e,t,i){if(e==null)throw Je(203);let r=e.overrideContext,s=e;if(i>0){for(;i>0;)if(i--,s=s.parent,s==null)return;return r=s.overrideContext,t in r?r:s.bindingContext}for(;s!=null&&!s.isBoundary&&!(t in s.overrideContext)&&!(t in s.bindingContext);)s=s.parent;return s==null?e.bindingContext:(r=s.overrideContext,t in r?r:s.bindingContext)}static create(e,t,i){if(e==null)throw Je(204);return new pi(null,e,t??new R$,i??!1)}static fromParent(e,t,i=new R$){if(e==null)throw Je(203);return new pi(e,t,i,!1)}}class _${constructor(e,t){e!==void 0&&(this[e]=t)}}class R${}const{astAssign:Zb,astEvaluate:Nn,astBind:Ju,astUnbind:eh}=(()=>{const n="AccessThis",e="AccessBoundary",t="AccessGlobal",i="AccessScope",r="ArrayLiteral",s="ObjectLiteral",o="PrimitiveLiteral",a="Template",l="Unary",c="CallScope",u="CallMember",h="CallFunction",d="CallGlobal",f="AccessMember",g="AccessKeyed",p="TaggedTemplate",m="Binary",b="Conditional",y="Assign",w="ArrowFunction",R="ValueConverter",E="BindingBehavior",_="ArrayBindingPattern",T="ObjectBindingPattern",I="BindingIdentifier",x="ForOfStatement",P="Interpolation",D="ArrayDestructuring",B="ObjectDestructuring",V="DestructuringAssignmentLeaf",z="Custom",L=pi.getContext;function k(v,C,S,A){var H;switch(v.$kind){case n:{let M=C.overrideContext,$=C,q=v.ancestor;for(;q--&&M;)$=$.parent,M=($==null?void 0:$.overrideContext)??null;return q<1&&$?$.bindingContext:void 0}case e:{let M=C;for(;M!=null&&!M.isBoundary;)M=M.parent;return M?M.bindingContext:void 0}case i:{const M=L(C,v.name,v.ancestor);A!==null&&A.observe(M,v.name);const $=M[v.name];if($==null){if(v.name==="$host")throw Je(105);return $}return S!=null&&S.boundFn&&$t($)?$.bind(M):$}case t:return globalThis[v.name];case d:{const M=globalThis[v.name];if($t(M))return M(...v.args.map($=>k($,C,S,A)));if(!(S!=null&&S.strict)&&M==null)return;throw Je(107)}case r:return v.elements.map(M=>k(M,C,S,A));case s:{const M={};for(let $=0;$<v.keys.length;++$)M[v.keys[$]]=k(v.values[$],C,S,A);return M}case o:return v.value;case a:{let M=v.cooked[0];for(let $=0;$<v.expressions.length;++$)M+=jd(k(v.expressions[$],C,S,A)),M+=v.cooked[$+1];return M}case l:{const M=k(v.expression,C,S,A);switch(v.operation){case"void":return;case"typeof":return typeof M;case"!":return!M;case"-":return-M;case"+":return+M;case"--":if(A!=null)throw Je(113);return F(v.expression,C,S,M-1)+v.pos;case"++":if(A!=null)throw Je(113);return F(v.expression,C,S,M+1)-v.pos;default:throw Je(109,v.operation)}}case c:{const M=L(C,v.name,v.ancestor);if(M==null){if(S!=null&&S.strict)throw Je(114,v.name,M);return}const $=M[v.name];if($t($))return $.apply(M,v.args.map(q=>k(q,C,S,A)));if($==null){if(S!=null&&S.strict&&!v.optional)throw Je(111,v.name);return}throw Je(111,v.name)}case u:{const M=k(v.object,C,S,A);if(M==null&&S!=null&&S.strict&&!v.optionalMember)throw Je(114,v.name,M);const $=M==null?void 0:M[v.name];if($==null){if(!v.optionalCall&&(S!=null&&S.strict))throw Je(111,v.name);return}if(!$t($))throw Je(111,v.name);const q=$.apply(M,v.args.map(Q=>k(Q,C,S,A)));return ai(M)&&se.includes(v.name)&&(A==null||A.observeCollection(M)),q}case h:{const M=k(v.func,C,S,A);if($t(M))return M(...v.args.map($=>k($,C,S,A)));if(M==null){if(!v.optional&&(S!=null&&S.strict))throw Je(107);return}throw Je(107)}case w:return(...$)=>{const q=v.args,Q=v.rest,ce=q.length-1,le=q.reduce((Ce,J,oe)=>(Q&&oe===ce?Ce[J.name]=$.slice(oe):Ce[J.name]=$[oe],Ce),{}),Me=pi.fromParent(C,le);return k(v.body,Me,S,A)};case f:{const M=k(v.object,C,S,A);if(M==null){if(!v.optional&&(S!=null&&S.strict))throw Je(114,v.name,M);return}A!==null&&!v.accessGlobal&&A.observe(M,v.name);const $=M[v.name];return S!=null&&S.boundFn&&$t($)?$.bind(M):$}case g:{const M=k(v.object,C,S,A),$=k(v.key,C,S,A);if(M==null){if(!v.optional&&(S!=null&&S.strict))throw Je(115,$,M);return}return A!==null&&!v.accessGlobal&&A.observe(M,$),M[$]}case p:{const M=v.expressions.map(q=>k(q,C,S,A)),$=k(v.func,C,S,A);if(!$t($))throw Je(110);return $(v.cooked,...M)}case m:{const M=v.left,$=v.right;switch(v.operation){case"&&":return k(M,C,S,A)&&k($,C,S,A);case"||":return k(M,C,S,A)||k($,C,S,A);case"??":return k(M,C,S,A)??k($,C,S,A);case"==":return k(M,C,S,A)==k($,C,S,A);case"===":return k(M,C,S,A)===k($,C,S,A);case"!=":return k(M,C,S,A)!=k($,C,S,A);case"!==":return k(M,C,S,A)!==k($,C,S,A);case"instanceof":{const q=k($,C,S,A);return $t(q)?k(M,C,S,A)instanceof q:!1}case"in":{const q=k($,C,S,A);return zS(q)?k(M,C,S,A)in q:!1}case"+":return k(M,C,S,A)+k($,C,S,A);case"-":return k(M,C,S,A)-k($,C,S,A);case"*":return k(M,C,S,A)*k($,C,S,A);case"/":return k(M,C,S,A)/k($,C,S,A);case"%":return k(M,C,S,A)%k($,C,S,A);case"<":return k(M,C,S,A)<k($,C,S,A);case">":return k(M,C,S,A)>k($,C,S,A);case"<=":return k(M,C,S,A)<=k($,C,S,A);case">=":return k(M,C,S,A)>=k($,C,S,A);default:throw Je(108,v.operation)}}case b:return k(v.condition,C,S,A)?k(v.yes,C,S,A):k(v.no,C,S,A);case y:{let M=k(v.value,C,S,A);if(v.op!=="="){if(A!=null)throw Je(113);const $=k(v.target,C,S,A);switch(v.op){case"/=":M=$/M;break;case"*=":M=$*M;break;case"+=":M=$+M;break;case"-=":M=$-M;break;default:throw Je(108,v.op)}}return F(v.target,C,S,M)}case R:return(H=S==null?void 0:S.useConverter)==null?void 0:H.call(S,v.name,"toView",k(v.expression,C,S,A),v.args.map(M=>k(M,C,S,A)));case E:return k(v.expression,C,S,A);case I:return v.name;case x:return k(v.iterable,C,S,A);case P:if(v.isMulti){let M=v.parts[0],$=0;for(;$<v.expressions.length;++$)M+=jd(k(v.expressions[$],C,S,A)),M+=v.parts[$+1];return M}else return`${v.parts[0]}${k(v.firstExpression,C,S,A)}${v.parts[1]}`;case V:return k(v.target,C,S,A);case D:return v.list.map(M=>k(M,C,S,A));case _:case T:case B:default:return;case z:return v.evaluate(C,S,A)}}function F(v,C,S,A){var H;switch(v.$kind){case i:{if(v.name==="$host")throw Je(106);const M=L(C,v.name,v.ancestor);return M[v.name]=A}case f:{const M=k(v.object,C,S,null);if(M==null){if(S!=null&&S.strict)throw Je(116,v.name);F(v.object,C,S,{[v.name]:A})}else zS(M)&&(v.name==="length"&&ai(M)&&!isNaN(A)?M.splice(A):M[v.name]=A);return A}case g:{const M=k(v.object,C,S,null),$=k(v.key,C,S,null);if(M==null){if(S!=null&&S.strict)throw Je(116,$);return F(v.object,C,S,{[$]:A}),A}if(ai(M)){if($==="length"&&!isNaN(A))return M.splice(A),A;if(Yb($))return M.splice($,1,A),A}return M[$]=A}case y:return F(v.value,C,S,A),F(v.target,C,S,A);case R:return A=(H=S==null?void 0:S.useConverter)==null?void 0:H.call(S,v.name,"fromView",A,v.args.map(M=>k(M,C,S,null))),F(v.expression,C,S,A);case E:return F(v.expression,C,S,A);case D:case B:{const M=v.list,$=M.length;let q,Q;for(q=0;q<$;q++)switch(Q=M[q],Q.$kind){case V:F(Q,C,S,A);break;case D:case B:{if(typeof A!="object"||A===null)throw Je(112);let ce=k(Q.source,pi.create(A),S,null);ce===void 0&&Q.initializer&&(ce=k(Q.initializer,C,S,null)),F(Q,C,S,ce);break}}break}case V:{if(v instanceof q6){if(A==null)return;if(typeof A!="object")throw Je(112);let M=k(v.source,pi.create(A),S,null);M===void 0&&v.initializer&&(M=k(v.initializer,C,S,null)),F(v.target,C,S,M)}else{if(A==null)return;if(typeof A!="object")throw Je(112);const M=v.indexOrProperties;let $;if(Yb(M)){if(!Array.isArray(A))throw Je(112);$=A.slice(M)}else $=Object.entries(A).reduce((q,[Q,ce])=>(M.includes(Q)||(q[Q]=ce),q),{});F(v.target,C,S,$)}break}case z:return v.assign(C,S,A);default:return}}function G(v,C,S){var A,H,M;switch(v.$kind){case E:{(A=S.bindBehavior)==null||A.call(S,v.name,C,v.args.map($=>k($,C,S,null))),G(v.expression,C,S);break}case R:{(H=S.bindConverter)==null||H.call(S,v.name),G(v.expression,C,S);break}case x:{G(v.iterable,C,S);break}case z:(M=v.bind)==null||M.call(v,C,S)}}function U(v,C,S){var A,H,M;switch(v.$kind){case E:{(A=S.unbindBehavior)==null||A.call(S,v.name,C),U(v.expression,C,S);break}case R:{(H=S.unbindConverter)==null||H.call(S,v.name),U(v.expression,C,S);break}case x:{U(v.iterable,C,S);break}case z:(M=v.unbind)==null||M.call(v,C,S)}}const se="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:k,astAssign:F,astBind:G,astUnbind:U}})(),uee=n=>{const e=n.prototype;["bindBehavior","unbindBehavior","bindConverter","unbindConverter","useConverter"].forEach(t=>{il(e,t,()=>{throw Je(99,t)})})},Kz=Zu.createInterface("ICoercionConfiguration"),FR=0,Oc=1,hee=2,dee=4,yO=wO({None:FR,Observer:Oc,Node:hee,Layout:dee});function zd(n=0){const e=Array(n);let t=0;for(;t<n;)e[t]=t++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}let fee=!1;const so=(()=>{function n(a,l){return a==null?s:s(a)}function e(){return il(this,"subs",new o)}function t(a){return this.subs.add(a)}function i(a){return this.subs.remove(a)}const r=new WeakSet;function s(a,l){if(!r.has(a)){r.add(a);const c=a.prototype;Xo(c,"subs",{get:e}),tc(c,"subscribe",t),tc(c,"unsubscribe",i)}return a}class o{constructor(){this.count=0,this._subs=[],this._requestDirtySubs=[],this._hasDirtySubs=!1}add(l){return this._subs.includes(l)?!1:(this._subs[this._subs.length]=l,"handleDirty"in l&&(this._requestDirtySubs[this._requestDirtySubs.length]=l,this._hasDirtySubs=!0),++this.count,!0)}remove(l){let c=this._subs.indexOf(l);return c!==-1?(this._subs.splice(c,1),c=this._requestDirtySubs.indexOf(l),c!==-1&&(this._requestDirtySubs.splice(c,1),this._hasDirtySubs=this._requestDirtySubs.length>0),--this.count,!0):!1}notify(l,c){for(const u of this._subs.slice(0))u.handleChange(l,c)}notifyCollection(l,c){const u=this._subs.slice(0),h=u.length;let d=0;for(;d<h;++d)u[d].handleCollectionChange(l,c)}notifyDirty(){if(this._hasDirtySubs)for(const l of this._requestDirtySubs.slice(0))l.handleDirty()}}return n})();class qz{constructor(e){this.owner=e,this.type=Oc,this._value=(this._obj=e.collection).length}getValue(){return this._obj.length}setValue(e){e!==this._value&&(Number.isNaN(e)?console.warn(`Invalid value "${e}" for array length`):(this._obj.splice(e),this._value=this._obj.length))}handleDirty(){this._value!==this._obj.length&&this.subs.notifyDirty()}handleCollectionChange(e,t){const i=this._value,r=this._obj.length;(this._value=r)!==i&&(this.subs.notifyDirty(),this.subs.notify(this._value,i))}}Xz(qz);class CO{constructor(e){this.owner=e,this.type=Oc,this._value=(this._obj=e.collection).size}getValue(){return this._obj.size}setValue(){throw Je(220)}handleDirty(){this._value!==this._obj.size&&this.subs.notifyDirty()}handleCollectionChange(e,t){const i=this._value,r=this._obj.size;(this._value=r)!==i&&this.subs.notify(this._value,i)}}Xz(CO);function Xz(n){const e=n.prototype;return tc(e,"subscribe",gee),tc(e,"unsubscribe",pee),so(n,null)}function gee(n){this.subs.add(n)&&this.subs.count===1&&this.owner.subscribe(this)}function pee(n){this.subs.remove(n)&&this.subs.count===0&&this.owner.subscribe(this)}const nb=(()=>{const n=Symbol.for("__au_arr_obs__"),e=Array[n]??il(Array,n,new WeakMap);function t(p,m){return p===m?0:(p=p===null?"null":p.toString(),m=m===null?"null":m.toString(),p<m?-1:1)}function i(p,m){return p===void 0?m===void 0?0:1:m===void 0?-1:0}function r(p,m,b,y,w){let R,E,_,T,I,x,P;for(x=b+1;x<y;x++){for(R=p[x],E=m[x],P=x-1;P>=b&&(_=p[P],T=m[P],I=w(_,R),I>0);P--)p[P+1]=_,m[P+1]=T;p[P+1]=R,m[P+1]=E}}function s(p,m,b,y,w){let R=0,E=0,_,T,I,x,P,D,B,V,z,L,k,F,G,U,se,v,C,S,A;for(;;){if(y-b<=10){r(p,m,b,y,w);return}R=b+(y-b>>1),_=p[b],x=m[b],T=p[y-1],P=m[y-1],I=p[R],D=m[R],B=w(_,T),B>0&&(L=_,k=x,_=T,x=P,T=L,P=k),V=w(_,I),V>=0?(L=_,k=x,_=I,x=D,I=T,D=P,T=L,P=k):(z=w(T,I),z>0&&(L=T,k=P,T=I,P=D,I=L,D=k)),p[b]=_,m[b]=x,p[y-1]=I,m[y-1]=D,F=T,G=P,U=b+1,se=y-1,p[R]=p[U],m[R]=m[U],p[U]=F,m[U]=G;e:for(E=U+1;E<se;E++)if(v=p[E],C=m[E],S=w(v,F),S<0)p[E]=p[U],m[E]=m[U],p[U]=v,m[U]=C,U++;else if(S>0){do{if(se--,se==E)break e;A=p[se],S=w(A,F)}while(S>0);p[E]=p[se],m[E]=m[se],p[se]=v,m[se]=C,S<0&&(v=p[E],C=m[E],p[E]=p[U],m[E]=m[U],p[U]=v,m[U]=C,U++)}y-se<U-b?(s(p,m,se,y,w),y=U):(s(p,m,b,U,w),b=se)}}const o=Array.prototype,a=["push","unshift","pop","shift","splice","reverse","sort"];let l;function c(){const p=o.push,m=o.unshift,b=o.pop,y=o.shift,w=o.splice,R=o.reverse,E=o.sort;l={push:function(..._){const T=e.get(this);if(T===void 0)return p.apply(this,_);const I=this.length,x=_.length;if(x===0)return I;this.length=T.indexMap.length=I+x;let P=I;for(;P<this.length;)this[P]=_[P-I],T.indexMap[P]=-2,P++;return T.notify(),this.length},unshift:function(..._){const T=e.get(this);if(T===void 0)return m.apply(this,_);const I=_.length,x=new Array(I);let P=0;for(;P<I;)x[P++]=-2;m.apply(T.indexMap,x);const D=m.apply(this,_);return T.notify(),D},pop:function(){const _=e.get(this);if(_===void 0)return b.call(this);const T=_.indexMap,I=b.call(this),x=T.length-1;return T[x]>-1&&(T.deletedIndices.push(T[x]),T.deletedItems.push(I)),b.call(T),_.notify(),I},shift:function(){const _=e.get(this);if(_===void 0)return y.call(this);const T=_.indexMap,I=y.call(this);return T[0]>-1&&(T.deletedIndices.push(T[0]),T.deletedItems.push(I)),y.call(T),_.notify(),I},splice:function(..._){const T=_[0],I=_[1],x=e.get(this);if(x===void 0)return w.apply(this,_);const P=this.length,D=T|0,B=D<0?Math.max(P+D,0):Math.min(D,P),V=x.indexMap,z=_.length,L=z===0?0:z===1?P-B:I;let k=B;if(L>0){const G=k+L;for(;k<G;)V[k]>-1&&(V.deletedIndices.push(V[k]),V.deletedItems.push(this[k])),k++}if(k=0,z>2){const G=z-2,U=new Array(G);for(;k<G;)U[k++]=-2;w.call(V,T,I,...U)}else w.apply(V,_);const F=w.apply(this,_);return(L>0||k>0)&&x.notify(),F},reverse:function(){const _=e.get(this);if(_===void 0)return R.call(this),this;const T=this.length,I=T/2|0;let x=0;for(;x!==I;){const P=T-x-1,D=this[x],B=_.indexMap[x],V=this[P],z=_.indexMap[P];this[x]=V,_.indexMap[x]=z,this[P]=D,_.indexMap[P]=B,x++}return _.notify(),this},sort:function(_){const T=e.get(this);if(T===void 0)return E.call(this,_),this;let I=this.length;if(I<2)return this;s(this,T.indexMap,0,I,i);let x=0;for(;x<I&&this[x]!==void 0;)x++;(_===void 0||!$t(_))&&(_=t),s(this,T.indexMap,0,x,_);let P=!1;for(x=0,I=T.indexMap.length;I>x;++x)if(T.indexMap[x]!==x){P=!0;break}return(P||fee)&&T.notify(),this}};for(const _ of a)Xo(l[_],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1})}let u=!1;const h="__au_arr_on__";function d(){if(l===void 0&&c(),!(oee(h,Array)??!1)){aee(!0,Array,h);for(const p of a)o[p].observing!==!0&&il(o,p,l[p])}}class f{constructor(m){this.type=Oc,u||(u=!0,d()),this.indexObservers={},this.collection=m,this.indexMap=zd(m.length),this.lenObs=void 0,e.set(m,this)}notify(){const m=this.subs;m.notifyDirty();const b=this.indexMap,y=this.collection,w=y.length;this.indexMap=zd(w),m.notifyCollection(y,b)}getLengthObserver(){return this.lenObs??(this.lenObs=new qz(this))}getIndexObserver(m){var b;return(b=this.indexObservers)[m]??(b[m]=new g(this,m))}}so(f,null);class g{constructor(m,b){this.owner=m,this.index=b,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(m){if(m===this.getValue())return;const b=this.owner,y=this.index,w=b.indexMap;w[y]>-1&&w.deletedIndices.push(w[y]),w[y]=-2,b.collection[y]=m,b.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(m,b){const y=this.index;if(b[y]===y)return;const R=this.value,E=this.value=this.getValue();R!==E&&this.subs.notify(E,R)}subscribe(m){this.subs.add(m)&&this.subs.count===1&&this.owner.subscribe(this)}unsubscribe(m){this.subs.remove(m)&&this.subs.count===0&&this.owner.unsubscribe(this)}}return so(g,null),function(m){let b=e.get(m);return b===void 0&&(e.set(m,b=new f(m)),d()),b}})(),QS=(()=>{const n=Symbol.for("__au_set_obs__"),e=Set[n]??il(Set,n,new WeakMap),{add:t,clear:i,delete:r}=Set.prototype,s=["add","clear","delete"],o={add:function(c){const u=e.get(this);if(u===void 0)return t.call(this,c),this;const h=this.size;return t.call(this,c),this.size===h?this:(u.indexMap[h]=-2,u.notify(),this)},clear:function(){const c=e.get(this);if(c===void 0)return i.call(this);if(this.size>0){const h=c.indexMap;let d=0;for(const f of this.keys())h[d]>-1&&(h.deletedIndices.push(h[d]),h.deletedItems.push(f)),d++;i.call(this),h.length=0,c.notify()}},delete:function(c){const u=e.get(this);if(u===void 0)return r.call(this,c);if(this.size===0)return!1;let d=0;const f=u.indexMap;for(const g of this.keys()){if(g===c){f[d]>-1&&(f.deletedIndices.push(f[d]),f.deletedItems.push(g)),f.splice(d,1);const p=r.call(this,c);return p===!0&&u.notify(),p}d++}return!1}};function a(c){for(const u of s)il(c,u,o[u])}class l{constructor(u){this.type=Oc,this.collection=u,this.indexMap=zd(u.size),this.lenObs=void 0}notify(){const u=this.subs;u.notifyDirty();const h=this.indexMap,d=this.collection,f=d.size;this.indexMap=zd(f),u.notifyCollection(d,h)}getLengthObserver(){return this.lenObs??(this.lenObs=new CO(this))}}return so(l,null),function(u){let h=e.get(u);return h===void 0&&(e.set(u,h=new l(u)),a(u)),h}})(),JS=(()=>{const n=Symbol.for("__au_map_obs__"),e=Map[n]??il(Map,n,new WeakMap),{set:t,clear:i,delete:r}=Map.prototype,s=["set","clear","delete"],o={set:function(c,u){const h=e.get(this);if(h===void 0)return t.call(this,c,u),this;const d=this.get(c),f=this.size;if(t.call(this,c,u),this.size===f){let p=0;for(const m of this.entries()){if(m[0]===c)return m[1]!==d&&(h.indexMap.deletedIndices.push(h.indexMap[p]),h.indexMap.deletedItems.push(m),h.indexMap[p]=-2,h.notify()),this;p++}return this}return h.indexMap[f]=-2,h.notify(),this},clear:function(){const c=e.get(this);if(c===void 0)return i.call(this);if(this.size>0){const h=c.indexMap;let d=0;for(const f of this.keys())h[d]>-1&&(h.deletedIndices.push(h[d]),h.deletedItems.push(f)),d++;i.call(this),h.length=0,c.notify()}},delete:function(c){const u=e.get(this);if(u===void 0)return r.call(this,c);if(this.size===0)return!1;let d=0;const f=u.indexMap;for(const g of this.keys()){if(g===c){f[d]>-1&&(f.deletedIndices.push(f[d]),f.deletedItems.push(g)),f.splice(d,1);const p=r.call(this,c);return p===!0&&u.notify(),p}++d}return!1}};function a(c){for(const u of s)il(c,u,o[u])}class l{constructor(u){this.type=Oc,this.collection=u,this.indexMap=zd(u.size),this.lenObs=void 0}notify(){const u=this.subs;u.notifyDirty();const h=this.indexMap,d=this.collection,f=d.size;this.indexMap=zd(f),u.notifyCollection(d,h)}getLengthObserver(){return this.lenObs??(this.lenObs=new CO(this))}}return so(l,null),function(u){let h=e.get(u);return h===void 0&&(e.set(u,h=new l(u)),a(u)),h}})(),E$=(()=>{class n{constructor(u){this.version=0,this.count=0,this.o=new Map,this.b=u}add(u){this.o.has(u)||(u.subscribe(this.b),++this.count),this.o.set(u,this.version)}clear(){this.o.forEach(t,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(c,u){u.unsubscribe(this.b)}function t(c,u){this.version!==c&&(u.unsubscribe(this.b),this.o.delete(u))}function i(){return il(this,"obs",new n(this))}function r(c,u){this.obs.add(this.oL.getObserver(c,u))}function s(c){let u;if(ai(c))u=nb(c);else if(Op(c))u=QS(c);else if(Iu(c))u=JS(c);else throw Je(210,c);this.obs.add(u)}function o(c){this.obs.add(c)}function a(){throw Je(99,"handleChange")}function l(){throw Je(99,"handleCollectionChange")}return function(u,h){const d=u.prototype;return tc(d,"observe",r),tc(d,"observeCollection",s),tc(d,"subscribeTo",o),Xo(d,"obs",{get:i}),tc(d,"handleChange",a),tc(d,"handleCollectionChange",l),u}})();function sa(n,e){return n==null?E$:E$(n,e)}let Rt=null;const Dg=[];let _c=!1;function mee(){_c=!1}function vee(){_c=!0}function BR(){return Rt}function SO(n){if(n==null)throw Je(206);if(Rt==null){Rt=n,Dg[0]=Rt,_c=!0;return}if(Rt===n)throw Je(207);Dg.push(n),Rt=n,_c=!0}function _O(n){if(n==null)throw Je(208);if(Rt!==n)throw Je(209);Dg.pop(),Rt=Dg.length>0?Dg[Dg.length-1]:null,_c=Rt!=null}const bee=wO({get current(){return Rt},get connecting(){return _c},enter:SO,exit:_O,pause:mee,resume:vee}),pp=Reflect.get,wee=Object.prototype.toString,AA=new WeakMap,yee="__au_nw__",Cee="__au_nw";function Zz(n){switch(wee.call(n)){case"[object Object]":return n.constructor[yee]!==!0;case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const Hp="__raw__";function St(n){return Zz(n)?VR(n):n}function VR(n){return AA.get(n)??See(n)}function Ht(n){return n[Hp]??n}function Ir(n){return Zz(n)&&n[Hp]||n}function RO(n,e){return e==="constructor"||e==="__proto__"||e==="$observers"||e===Symbol.toPrimitive||e===Symbol.toStringTag||n.constructor[`${Cee}_${jd(e)}__`]===!0}function See(n){const e=ai(n)?Ree:Iu(n)||Op(n)?Yee:_ee,t=new Proxy(n,e);return AA.set(n,t),AA.set(t,t),t}const _ee={get(n,e,t){if(e===Hp)return n;const i=BR();return!_c||RO(n,e)||i==null?pp(n,e,t):(i.observe(n,e),St(pp(n,e,t)))}},Ree={get(n,e,t){if(e===Hp)return n;if(!_c||RO(n,e)||Rt==null)return pp(n,e,t);switch(e){case"length":return Rt.observe(n,"length"),n.length;case"map":return Eee;case"includes":return Mee;case"indexOf":return Aee;case"lastIndexOf":return Pee;case"every":return xee;case"filter":return Tee;case"find":return Oee;case"findIndex":return Iee;case"flat":return kee;case"flatMap":return Dee;case"join":return Nee;case"push":return Hee;case"pop":return Lee;case"reduce":return Uee;case"reduceRight":return Gee;case"reverse":return Vee;case"shift":return $ee;case"unshift":return Fee;case"slice":return zee;case"splice":return Bee;case"some":return Wee;case"sort":return jee;case"keys":return Qz;case"values":case Symbol.iterator:return PA;case"entries":return IA}return Rt.observe(n,e),St(pp(n,e,t))},ownKeys(n){var e;return(e=BR())==null||e.observe(n,"length"),Reflect.ownKeys(n)}};function Eee(n,e){const t=Ht(this),i=t.map((r,s)=>Ir(n.call(e,St(r),s,this)));return Un(Rt,t),St(i)}function xee(n,e){const t=Ht(this),i=t.every((r,s)=>n.call(e,St(r),s,this));return Un(Rt,t),i}function Tee(n,e){const t=Ht(this),i=t.filter((r,s)=>Ir(n.call(e,St(r),s,this)));return Un(Rt,t),St(i)}function Mee(n){const e=Ht(this),t=e.includes(Ir(n));return Un(Rt,e),t}function Aee(n){const e=Ht(this),t=e.indexOf(Ir(n));return Un(Rt,e),t}function Pee(n){const e=Ht(this),t=e.lastIndexOf(Ir(n));return Un(Rt,e),t}function Iee(n,e){const t=Ht(this),i=t.findIndex((r,s)=>Ir(n.call(e,St(r),s,this)));return Un(Rt,t),i}function Oee(n,e){const t=Ht(this),i=t.find((r,s)=>n(St(r),s,this),e);return Un(Rt,t),St(i)}function kee(){const n=Ht(this);return Un(Rt,n),St(n.flat())}function Dee(n,e){const t=Ht(this);return Un(Rt,t),VR(t.flatMap((i,r)=>St(n.call(e,St(i),r,this))))}function Nee(n){const e=Ht(this);return Un(Rt,e),e.join(n)}function Lee(){return St(Ht(this).pop())}function Hee(...n){return Ht(this).push(...n)}function $ee(){return St(Ht(this).shift())}function Fee(...n){return Ht(this).unshift(...n)}function Bee(...n){return St(Ht(this).splice(...n))}function Vee(...n){const e=Ht(this),t=e.reverse();return Un(Rt,e),St(t)}function Wee(n,e){const t=Ht(this),i=t.some((r,s)=>Ir(n.call(e,St(r),s,this)));return Un(Rt,t),i}function jee(n){const e=Ht(this),t=e.sort(n);return Un(Rt,e),St(t)}function zee(n,e){const t=Ht(this);return Un(Rt,t),VR(t.slice(n,e))}function Uee(n,e){const t=Ht(this),i=t.reduce((r,s,o)=>n(r,St(s),o,this),e);return Un(Rt,t),St(i)}function Gee(n,e){const t=Ht(this),i=t.reduceRight((r,s,o)=>n(r,St(s),o,this),e);return Un(Rt,t),St(i)}const Yee={get(n,e,t){if(e===Hp)return n;const i=BR();if(!_c||RO(n,e)||i==null)return pp(n,e,t);switch(e){case"size":return i.observe(n,"size"),n.size;case"clear":return Jee;case"delete":return ete;case"forEach":return Kee;case"add":if(Op(n))return Qee;break;case"get":if(Iu(n))return Xee;break;case"set":if(Iu(n))return Zee;break;case"has":return qee;case"keys":return Qz;case"values":return PA;case"entries":return IA;case Symbol.iterator:return Iu(n)?IA:PA}return St(pp(n,e,t))}};function Kee(n,e){const t=Ht(this);return Un(Rt,t),t.forEach((i,r)=>{n.call(e,St(i),St(r),this)})}function qee(n){const e=Ht(this);return Un(Rt,e),e.has(Ir(n))}function Xee(n){const e=Ht(this);return Un(Rt,e),St(e.get(Ir(n)))}function Zee(n,e){return St(Ht(this).set(Ir(n),Ir(e)))}function Qee(n){return St(Ht(this).add(Ir(n)))}function Jee(){return St(Ht(this).clear())}function ete(n){return St(Ht(this).delete(Ir(n)))}function Qz(){const n=Ht(this);Un(Rt,n);const e=n.keys();return{next(){const t=e.next(),i=t.value,r=t.done;return r?{value:void 0,done:r}:{value:St(i),done:r}},[Symbol.iterator](){return this}}}function PA(){const n=Ht(this);Un(Rt,n);const e=n.values();return{next(){const t=e.next(),i=t.value,r=t.done;return r?{value:void 0,done:r}:{value:St(i),done:r}},[Symbol.iterator](){return this}}}function IA(){const n=Ht(this);Un(Rt,n);const e=n.entries();return{next(){const t=e.next(),i=t.value,r=t.done;return r?{value:void 0,done:r}:{value:[St(i[0]),St(i[1])],done:r}},[Symbol.iterator](){return this}}}const Un=(n,e)=>n==null?void 0:n.observeCollection(e),tte=wO({getProxy:VR,getRaw:Ht,wrap:St,unwrap:Ir,rawKey:Hp});class e_{constructor(e,t,i,r,s){this.type=Oc,this._value=void 0,this._isRunning=!1,this._isDirty=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._wrapped=s?St(e):e,this.$get=t,this.$set=i,this.oL=r}init(e){this._value=e,this._isDirty=!1}getValue(){return this.subs.count===0?this.$get.call(this._obj,this._obj,this):(this._isDirty&&(this.compute(),this._isDirty=!1),this._value)}setValue(e){if($t(this.$set))this._coercer!==void 0&&(e=this._coercer.call(null,e,this._coercionConfig)),Jo(e,this._value)||(this._isRunning=!0,this.$set.call(this._obj,e),this._isRunning=!1,this.run());else throw Je(221)}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,!0}useCallback(e){return this._callback=e,!0}handleDirty(){this._isDirty||(this._isDirty=!0,this.subs.notifyDirty())}handleChange(){this._isDirty=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this._isDirty=!0,this.subs.count>0&&this.run()}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this.compute(),this._isDirty=!1)}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&(this._isDirty=!0,this.obs.clearAll())}run(){var i;if(this._isRunning)return;const e=this._value,t=this.compute();this._isDirty=!1,Jo(t,e)||((i=this._callback)==null||i.call(this,t,e),this.subs.notify(this._value,e))}compute(){this._isRunning=!0,this.obs.version++;try{return SO(this),this._value=Ir(this.$get.call(this._wrapped,this._wrapped,this))}finally{this.obs.clear(),this._isRunning=!1,_O(this)}}}sa(e_,null),so(e_,null);const EO=$R("IDirtyChecker",n=>n.callback(()=>{throw Je(217)})),nte={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}};class ite{static register(e){e.register(Fd.singleton(this,this),Fd.aliasTo(this,EO))}constructor(){this.tracked=[],this._task=null,this._elapsedFrames=0,this.p=pe(kp),this.check=()=>{if(++this._elapsedFrames<nte.timeoutsPerCheck)return;this._elapsedFrames=0;const e=this.tracked,t=e.length;let i,r=0;for(;r<t;++r)i=e[r],i.isDirty()&&i.flush()},so(x$,null)}createProperty(e,t){return new x$(this,e,t)}addProperty(e){this.tracked.push(e),this.tracked.length===1&&(this._task=this.p.taskQueue.queueTask(this.check,{persistent:!0}))}removeProperty(e){this.tracked.splice(this.tracked.indexOf(e),1),this.tracked.length===0&&(this._task.cancel(),this._task=null)}}class x${constructor(e,t,i){this.obj=t,this.key=i,this.type=FR,this._oldValue=void 0,this._dirtyChecker=e}getValue(){return this.obj[this.key]}setValue(e){throw Je(219,this.key)}isDirty(){return this._oldValue!==this.obj[this.key]}flush(){const e=this._oldValue,t=this.getValue();this._oldValue=t,this.subs.notify(t,e)}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this._oldValue=this.obj[this.key],this._dirtyChecker.addProperty(this))}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&this._dirtyChecker.removeProperty(this)}}class rte{get doNotCache(){return!0}constructor(e,t){this.type=FR,this._obj=e,this._key=t}getValue(){return this._obj[this._key]}setValue(){}subscribe(){}unsubscribe(){}}class Jz{constructor(){this.type=FR}getValue(e,t){return e[t]}setValue(e,t,i){t[i]=e}}class xO{constructor(e,t){this.type=Oc,this._value=void 0,this._observing=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._key=t}getValue(){return this._value}setValue(e){var t,i;if(this._coercer!==void 0&&(e=this._coercer.call(void 0,e,this._coercionConfig)),this._observing){if(Jo(e,this._value))return;Py=this._value,this._value=e,this.subs.notifyDirty(),this.subs.notify(e,Py),Jo(e,this._value)&&((t=this._callback)==null||t.call(this,e,Py))}else this._value=this._obj[this._key]=e,(i=this._callback)==null||i.call(this,e,Py)}useCallback(e){return this._callback=e,this.start(),!0}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,this.start(),!0}subscribe(e){this._observing===!1&&this.start(),this.subs.add(e)}start(){return this._observing===!1&&(this._observing=!0,this._value=this._obj[this._key],Xo(this._obj,this._key,{enumerable:!0,configurable:!0,get:Yz(()=>this.getValue(),{getObserver:()=>this}),set:e=>{this.setValue(e)}})),this}stop(){return this._observing&&(Xo(this._obj,this._key,{enumerable:!0,configurable:!0,writable:!0,value:this._value}),this._observing=!1),this}}so(xO,null);let Py;const OA=new Jz,$p=$R("IObserverLocator",n=>n.singleton(ate)),TO=$R("INodeObserverLocator",n=>n.cachedCallback(e=>(e.getAll(Bd).forEach(t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")}),new ste)));class ste{handles(){return!1}getObserver(){return OA}getAccessor(){return OA}}const ote=$R("IComputedObserverLocator",n=>n.singleton(class{getObserver(t,i,r,s){const o=new e_(t,r.get,r.set,s,!0);return Xo(t,i,{enumerable:r.enumerable,configurable:!0,get:Yz(()=>o.getValue(),{getObserver:()=>o}),set:a=>{o.setValue(a)}}),o}}));class ate{constructor(){this._adapters=[],this._dirtyChecker=pe(EO),this._nodeObserverLocator=pe(TO),this._computedObserverLocator=pe(ote)}addAdapter(e){this._adapters.push(e)}getObserver(e,t){if(e==null)throw Je(199,t);if(!x6(e))return new rte(e,$t(t)?"":t);if($t(t))return new e_(e,t,void 0,this,!0);const i=e5(e);let r=i[t];return r===void 0&&(r=this.createObserver(e,t),r.doNotCache||(i[t]=r)),r}getAccessor(e,t){var r;const i=(r=e.$observers)==null?void 0:r[t];return i!==void 0?i:this._nodeObserverLocator.handles(e,t,this)?this._nodeObserverLocator.getAccessor(e,t,this):OA}getArrayObserver(e){return nb(e)}getMapObserver(e){return JS(e)}getSetObserver(e){return QS(e)}createObserver(e,t){var r,s;if(this._nodeObserverLocator.handles(e,t,this))return this._nodeObserverLocator.getObserver(e,t,this);switch(t){case"length":if(ai(e))return nb(e).getLengthObserver();break;case"size":if(Iu(e))return JS(e).getLengthObserver();if(Op(e))return QS(e).getLengthObserver();break;default:if(ai(e)&&Yb(t))return nb(e).getIndexObserver(Number(t));break}let i=M$(e,t);if(i===void 0){let o=T$(e);for(;o!==null&&(i=M$(o,t),i===void 0);)o=T$(o)}if(i!==void 0&&!see.call(i,"value")){let o=this._getAdapterObserver(e,t,i);return o==null&&(o=(s=(r=i.get)==null?void 0:r.getObserver)==null?void 0:s.call(r,e)),o??(i.configurable?this._computedObserverLocator.getObserver(e,t,i,this):this._dirtyChecker.createProperty(e,t))}return new xO(e,t)}_getAdapterObserver(e,t,i){if(this._adapters.length>0)for(const r of this._adapters){const s=r.getObserver(e,t,i,this);if(s!=null)return s}return null}}const MO=n=>{let e;return ai(n)?e=nb(n):Iu(n)?e=JS(n):Op(n)&&(e=QS(n)),e},T$=Object.getPrototypeOf,M$=Object.getOwnPropertyDescriptor,e5=n=>{let e=n.$observers;return e===void 0&&Xo(n,"$observers",{enumerable:!1,value:e=on()}),e};class lte{constructor(e,t){this.oL=e,this.fn=t,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1,this._cleanupTask=void 0,this.run=()=>{var i;if(this.stopped)throw Je(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{(i=this._cleanupTask)==null||i.call(void 0),SO(this),this._cleanupTask=this.fn(this)}finally{this.obs.clear(),this.running=!1,_O(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,Je(226);this.run()}else this.runCount=0}},this.stop=()=>{var i;(i=this._cleanupTask)==null||i.call(void 0),this._cleanupTask=void 0,this.stopped=!0,this.obs.clearAll()}}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}}sa(lte,null);class A${constructor(e,t,i,r){this.oL=t,this._value=void 0,this.boundFn=!1,this._scope=e,this.ast=i,this._callback=r}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.obs.version++;const e=this._value,t=Nn(this.ast,this._scope,this,this);this.obs.clear(),Jo(t,e)||(this._value=t,this._callback.call(void 0,t,e))}stop(){this.obs.clearAll(),this._value=void 0}}sa(A$,null),uee(A$);const cte=(()=>{function n(s){return s.$observers===void 0&&Xo(s,"$observers",{value:{}}),s.$observers}const e={};function t(s,o){r.mixed||(r.mixed=!0,so(r,null));let a=!1,l;if(typeof s=="object"?l=s:s!=null?(l={name:s},a=!0):l=N6,arguments.length===0)return function(h,d){if(d.kind!=="field")throw Je(224);return c(d)};if((o==null?void 0:o.kind)==="field")return c(o);if(a)return function(h,d){u(h,l.name,()=>e,!0)};return function(h,d){switch(d.kind){case"field":return c(d);case"class":return u(h,l.name,()=>e,!0);default:throw Je(224)}};function c(h){let d;return h.addInitializer(function(){u(this,h.name,()=>d,!1)}),function(f){return d=f}}function u(h,d,f,g){const p=l.callback||`${jd(d)}Changed`,m=l.set,b=function(){var R;const w=i(this,d,p,f,m);return(R=BR())==null||R.subscribeTo(w),w.getValue()};b.getObserver=function(w){return i(w,d,p,f,m)};const y={enumerable:!0,configurable:!0,get:b,set(w){i(this,d,p,f,m).setValue(w)}};Xo(g?h.prototype:h,d,y)}}function i(s,o,a,l,c){const u=n(s);let h=u[o];if(h==null){const d=l();h=new r(s,a,c,d===e?void 0:d),u[o]=h}return h}class r{constructor(o,a,l,c){this.type=Oc,this._value=void 0,this._oldValue=void 0,this._obj=o,this._setter=l,this._hasSetter=$t(l);const u=o[a];this.cb=$t(u)?u:void 0,this._value=c}getValue(){return this._value}setValue(o){var a;this._hasSetter&&(o=this._setter(o)),Jo(o,this._value)||(this._oldValue=this._value,this._value=o,this.subs.notifyDirty(),this.subs.notify(this._value,this._oldValue),Jo(o,this._value)&&((a=this.cb)==null||a.call(this._obj,this._value,this._oldValue)))}}return r.mixed=!1,t})(),gm="pending",oS="running",jE="completed",Iy="canceled",zE=new Map,P$=n=>()=>{throw Ud(`AUR1005: The PLATFORM did not receive a valid reference to the global function '${n}'.`)};class AO{constructor(e,t={}){var i,r;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=e,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach(s=>{this[s]=s in t?t[s]:e[s]}),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach(s=>{var o;this[s]=s in t?t[s]:((o=e[s])==null?void 0:o.bind(e))??P$(s)}),this.performanceNow="performanceNow"in t?t.performanceNow:((r=(i=e.performance)==null?void 0:i.now)==null?void 0:r.bind(e.performance))??P$("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new PO(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(e,t={}){let i=zE.get(e);return i===void 0&&zE.set(e,i=new AO(e,t)),i}static set(e,t){zE.set(e,t)}requestMacroTask(){this.macroTaskRequested=!0,this.macroTaskHandle===-1&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,this.macroTaskRequested===!0&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class PO{get isEmpty(){return this._pendingAsyncCount===0&&this._processing.length===0&&this._pending.length===0&&this._delayed.length===0}get _hasNoMoreFiniteWork(){return this._pendingAsyncCount===0&&this._processing.every(UE)&&this._pending.every(UE)&&this._delayed.every(UE)}constructor(e,t,i){this.platform=e,this.$request=t,this.$cancel=i,this._suspenderTask=void 0,this._pendingAsyncCount=0,this._processing=[],this._pending=[],this._delayed=[],this._flushRequested=!1,this._yieldPromise=void 0,this._lastRequest=0,this._lastFlush=0,this._requestFlush=()=>{this._tracer.enabled&&this._tracer.enter(this,"requestFlush"),this._flushRequested||(this._flushRequested=!0,this._lastRequest=this._now(),this.$request()),this._tracer.enabled&&this._tracer.leave(this,"requestFlush")},this._now=e.performanceNow,this._tracer=new dte(e.console)}flush(e=this._now()){if(this._tracer.enabled&&this._tracer.enter(this,"flush"),this._flushRequested=!1,this._lastFlush=e,this._suspenderTask===void 0){let t;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let r=0;r<this._delayed.length;++r)t=this._delayed[r],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(r--,1));let i;for(;this._processing.length>0;)if((i=this._processing.shift()).run(),i.status===oS)if(i.suspend===!0){this._suspenderTask=i,this._requestFlush(),this._tracer.enabled&&this._tracer.leave(this,"flush early async");return}else++this._pendingAsyncCount;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let r=0;r<this._delayed.length;++r)t=this._delayed[r],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(r--,1));if((this._processing.length>0||this._delayed.length>0||this._pendingAsyncCount>0)&&this._requestFlush(),this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const r=this._yieldPromise;this._yieldPromise=void 0,r.resolve()}}else this._requestFlush();this._tracer.enabled&&this._tracer.leave(this,"flush full")}cancel(){this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._flushRequested&&(this.$cancel(),this._flushRequested=!1),this._tracer.enabled&&this._tracer.leave(this,"cancel")}async yield(){this._tracer.enabled&&this._tracer.enter(this,"yield"),this.isEmpty?this._tracer.enabled&&this._tracer.leave(this,"yield empty"):(this._yieldPromise===void 0&&(this._tracer.enabled&&this._tracer.trace(this,"yield - creating promise"),this._yieldPromise=i5()),await this._yieldPromise,this._tracer.enabled&&this._tracer.leave(this,"yield task"))}queueTask(e,t){this._tracer.enabled&&this._tracer.enter(this,"queueTask");const{delay:i,preempt:r,persistent:s,suspend:o}={...fte,...t};if(r){if(i>0)throw pte();if(s)throw mte()}this._processing.length===0&&this._requestFlush();const a=this._now(),l=new hte(this._tracer,this,a,a+i,r,s,o,e);return r?this._processing[this._processing.length]=l:i===0?this._pending[this._pending.length]=l:this._delayed[this._delayed.length]=l,this._tracer.enabled&&this._tracer.leave(this,"queueTask"),l}remove(e){this._tracer.enabled&&this._tracer.enter(this,"remove");let t=this._processing.indexOf(e);if(t>-1){this._processing.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove processing");return}if(t=this._pending.indexOf(e),t>-1){this._pending.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove pending");return}if(t=this._delayed.indexOf(e),t>-1){this._delayed.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove delayed");return}throw this._tracer.enabled&&this._tracer.leave(this,"remove error"),Ud(`Task #${e.id} could not be found`)}_resetPersistentTask(e){this._tracer.enabled&&this._tracer.enter(this,"resetPersistentTask"),e.reset(this._now()),e.createdTime===e.queueTime?this._pending[this._pending.length]=e:this._delayed[this._delayed.length]=e,this._tracer.enabled&&this._tracer.leave(this,"resetPersistentTask")}_completeAsyncTask(e){var t;if(this._tracer.enabled&&this._tracer.enter(this,"completeAsyncTask"),e.suspend===!0){if(this._suspenderTask!==e)throw this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask error"),Ud(`Async task completion mismatch: suspenderTask=${(t=this._suspenderTask)==null?void 0:t.id}, task=${e.id}`);this._suspenderTask=void 0}else--this._pendingAsyncCount;if(this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const i=this._yieldPromise;this._yieldPromise=void 0,i.resolve()}this.isEmpty&&this.cancel(),this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask")}}class kA extends Error{constructor(e){super("Task was canceled."),this.task=e}}let ute=0;class hte{get result(){const e=this._result;if(e===void 0)switch(this._status){case gm:{const t=this._result=i5();return this._resolve=t.resolve,this._reject=t.reject,t}case oS:throw Ud("Trying to await task from within task will cause a deadlock.");case jE:return this._result=Promise.resolve();case Iy:return this._result=Promise.reject(new kA(this))}return e}get status(){return this._status}constructor(e,t,i,r,s,o,a,l){this.taskQueue=t,this.createdTime=i,this.queueTime=r,this.preempt=s,this.persistent=o,this.suspend=a,this.callback=l,this.id=++ute,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._status=gm,this._tracer=e}run(e=this.taskQueue.platform.performanceNow()){if(this._tracer.enabled&&this._tracer.enter(this,"run"),this._status!==gm)throw this._tracer.enabled&&this._tracer.leave(this,"run error"),Ud(`Cannot run task in ${this._status} state`);const{persistent:t,taskQueue:i,callback:r,_resolve:s,_reject:o,createdTime:a}=this;let l;this._status=oS;try{l=r(e-a),l instanceof Promise?l.then(c=>{this.persistent?i._resetPersistentTask(this):(t?this._status=Iy:this._status=jE,this.dispose()),i._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async then"),s!==void 0&&s(c)}).catch(c=>{if(this.persistent||this.dispose(),i._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async catch"),o!==void 0)o(c);else throw c}):(this.persistent?i._resetPersistentTask(this):(t?this._status=Iy:this._status=jE,this.dispose()),this._tracer.enabled&&this._tracer.leave(this,"run sync success"),s!==void 0&&s(l))}catch(c){if(this.persistent||this.dispose(),this._tracer.enabled&&this._tracer.leave(this,"run sync error"),o!==void 0)o(c);else throw c}}cancel(){if(this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._status===gm){const e=this.taskQueue,t=this._reject;return e.remove(this),e.isEmpty&&e.cancel(),this._status=Iy,this.dispose(),t!==void 0&&t(new kA(this)),this._tracer.enabled&&this._tracer.leave(this,"cancel true =pending"),!0}else if(this._status===oS&&this.persistent)return this.persistent=!1,this._tracer.enabled&&this._tracer.leave(this,"cancel true =running+persistent"),!0;return this._tracer.enabled&&this._tracer.leave(this,"cancel false"),!1}reset(e){this._tracer.enabled&&this._tracer.enter(this,"reset");const t=this.queueTime-this.createdTime;this.createdTime=e,this.queueTime=e+t,this._status=gm,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._tracer.enabled&&this._tracer.leave(this,"reset")}dispose(){this._tracer.enabled&&this._tracer.trace(this,"dispose"),this.callback=void 0,this._resolve=void 0,this._reject=void 0,this._result=void 0}}class dte{constructor(e){this.console=e,this.enabled=!1,this.depth=0}enter(e,t){this.log(`${"  ".repeat(this.depth++)}> `,e,t)}leave(e,t){this.log(`${"  ".repeat(--this.depth)}< `,e,t)}trace(e,t){this.log(`${"  ".repeat(this.depth)}- `,e,t)}log(e,t,i){if(t instanceof PO){const r=t._processing.length,s=t._pending.length,o=t._delayed.length,a=t._flushRequested,l=!!t._suspenderTask,c=`processing=${r} pending=${s} delayed=${o} flushReq=${a} susTask=${l}`;this.console.log(`${e}[Q.${i}] ${c}`)}else{const r=t.id,s=Math.round(t.createdTime*10)/10,o=Math.round(t.queueTime*10)/10,a=t.preempt,l=t.persistent,c=t.suspend,u=t._status,h=`id=${r} created=${s} queue=${o} preempt=${a} persistent=${l} status=${u} suspend=${c}`;this.console.log(`${e}[T.${i}] ${h}`)}}}const fte={delay:0,preempt:!1,persistent:!1,suspend:!1};let t5,n5;const gte=(n,e)=>{t5=n,n5=e},i5=()=>{const n=new Promise(gte);return n.resolve=t5,n.reject=n5,n},UE=n=>n.persistent,pte=()=>Ud("AUR1006: Invalid arguments: preempt cannot be combined with a greater-than-zero delay"),mte=()=>Ud("AUR1007: Invalid arguments: preempt cannot be combined with persistent"),Ud=n=>new Error(n);class Cu extends AO{static getOrCreate(e,t={}){let i=Cu._lookup.get(e);return i===void 0&&Cu._lookup.set(e,i=new Cu(e,t)),i}static set(e,t){Cu._lookup.set(e,t)}get domWriteQueue(){return this.console.log("[DEV:aurelia] platform.domQueue is deprecated, please use platform.domQueue instead."),this.domQueue}get domReadQueue(){return this.console.log("[DEV:aurelia] platform.domReadQueue has been removed, please use platform.domQueue instead."),this.domQueue}constructor(e,t={}){super(e,t);const i=r=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${r}'.`)};"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach(r=>this[r]=r in t?t[r]:e[r]),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach(r=>{var s;return this[r]=r in t?t[r]:((s=e[r])==null?void 0:s.bind(e))??i(r)}),this.domQueue=(()=>{let r=!1,s=-1;const o=()=>{r=!0,s===-1&&(s=this.requestAnimationFrame(l))},a=()=>{r=!1,s>-1&&(this.cancelAnimationFrame(s),s=-1)},l=()=>{s=-1,r===!0&&(r=!1,c.flush())},c=new PO(this,o,a);return c})()}}Cu._lookup=new WeakMap;const{default:IO,oneTime:WR,toView:ei,fromView:Rc,twoWay:r5}=Lw,ur=Pc.get,jR=Pc.has,ea=Pc.define,{annotation:vte}=O6,kc=vte.keyFor,$w=Object,Gd=String,s5=$w.prototype,bd=s5.hasOwnProperty,Dc=$w.freeze,o5=$w.assign,a5=$w.getOwnPropertyNames,OO=$w.keys,I$=on(),DA=(n,e,t)=>{if(I$[e]===!0)return!0;if(!Ct(e))return!1;const i=e.slice(0,5);return I$[e]=i==="aria-"||i==="data-"||t.isStandardSvgAttribute(n,e)},NA=n=>{throw n},l5=Reflect.defineProperty,vs=(n,e,t)=>(l5(n,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t),c5=(n,e,t)=>n.addSignalListener(e,t),u5=(n,e,t)=>n.removeSignalListener(e,t),bte="Interpolation",wte="IsIterator",yte="IsFunction",rl="IsProperty",O$="pending",GE="running",kO=yO.Observer,th=yO.Node,gl=yO.Layout,_e=(n,...e)=>new Error(`AUR${Gd(n).padStart(4,"0")}: ${Ste(n,...e)}`),Cte={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:"No binding behavior definition found for type {{0:name}}",152:"No value converter definition found for type {{0:name}}",153:'Element "{{0}}" has already been registered.',154:'Attribute "{{0}}" has already been registered.',155:"Value converter {{0}} has already been registered.",156:"Binding behavior {{0}} has already been registered.",157:"Binding command {{0}} has already been registered.",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",227:"@bindable is not supported for properties that uses a symbol for name. Use a string for the property name instead.",228:"@bindable cannot be used as a class decorator when no configuration object is supplied.",229:"@bindable cannot be used as a class decorator when no property name is supplied in the configuration object.",500:"There is no cached controller for the provided ViewModel: {{0}}",501:"Invalid combination: cannot combine the containerless custom element option with Shadow DOM.",502:"Trying to activate a disposed controller: {{0}}.",503:"Controller at {{0}} is in an unexpected state: {{1}} during activation.",504:"Synthetic view at {{0}} is being activated with null/undefined scope.",505:"Controller at {{0}} is in an unexpected state: {{1}} during deactivation.",506:"Invalid callback for @watch decorator: {{0}}",507:"Observer for bindable property {{0}} does not support coercion.",508:"Observer for property {{0}} does not support change handler.",759:"No attribute definition found for type {{0:name}}",760:"No element definition found for type {{0:name}}",761:"Cannot create a custom element definition with only a name and no type: {{0}}",762:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",763:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",764:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",765:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",766:"Invalid @processContent hook. Expected the hook to be a function (when defined in a class, it needs to be a static function) but got a {{0:typeof}}.",652:"Aurelia is unable to observe property {{0}}. Register observation mapping with .useConfig().",653:"Mapping for property {{0}} of <{{1}} /> already exists",654:"Array values can only be bound to a multi-select.",714:'Template compilation error: primary already exists on element/attribute "{{0}}"',719:"Attribute {{0}} has been already registered for {{1:element}}",767:"Aurelia.root was accessed without a valid root.",768:"An instance of Aurelia is already registered with the container or an ancestor of it.",769:"Failed to initialize the platform object. The host element's ownerDocument does not have a defaultView, did you create the host from a DOMParser and forget to call adoptNode()?",770:"Aurelia.start() was called without a composition root",771:"The aurelia instance must be fully stopped before it can be disposed",750:"view.ref is not supported. If you are migrating from v1, this can be understood as the controller.",751:`Attempted to reference "{{0}}", but it was not found amongst the target's API.`,752:"Element {{0:.res}} is not registered in {{1:name}}.",753:"Attribute {{0:.res}} is not registered in {{1:name}}.",754:"Attribute {{0:.res}} is not registered in {{1:name}}.",755:"Cannot resolve ViewFactory before the provider was prepared.",756:"Cannot resolve ViewFactory without a (valid) name.",757:"AUR0757: The compiled template is not aligned with the render instructions. There are {{0}} targets and {{1}} instructions.",772:"Invalid @watch decorator config. Expected an expression or a fn but received null/undefined.",773:'Invalid @watch decorator change handler config.Method "{{0}}" not found in class {{1}}',774:"Invalid @watch decorator usage: decorated target {{0}} is not a class method.",775:'Invalid command "{{0}}" usage with [repeat]',776:'Invalid [repeat] usage, found extraneous target "{{0}}"',777:"Unsupported: [repeat] cannot iterate over {{0:toString}}",778:"Unsupported: [repeat] cannot count {{0:toString}}",814:"[repeat] encountered an error: number of views != number of items {{0:join(!=)}}",779:"Invalid portal insertion position: {{0}}",801:'"& self" binding behavior only supports listener binding via trigger/capture command.',802:`"& updateTrigger" invalid usage. This binding behavior requires at least one event name argument: eg <input value.bind="firstName & updateTrigger:'blur'">`,803:'"& updateTrigger" invalid usage. This binding behavior can only be applied to two-way/ from-view bindings.',805:'Invalid scope behavior "{{0}}" on <au-compose />. Only "scoped" or "auto" allowed.',806:`<au-compose /> couldn't find a custom element with name "{{0}}", did you forget to register it locally or globally?`,807:"Composition has already been activated/deactivated. Id: {{0:controller}}",808:"Composition has already been deactivated.",810:"Invalid [else] usage, it should follow an [if]",811:"Invalid portal strict target query, empty query.",812:"Invalid portal strict target resolution, target not found.",813:'Invalid [pending]/[then]/[catch] usage. The parent [promise].resolve not found; only "*[promise.resolve] > *[pending|then|catch]" relation is supported.',815:'Invalid [case/default-case] usage. The parent [switch] not found; only "*[switch] > *[case|default-case]" relation is supported.',816:"Invalid [default-case] usage. Multiple 'default-case's are not allowed.",817:'"& signal" binding behavior can only be used with bindings that have a "handleChange" method',818:`"& signal" invalid usage. At least one signal name must be passed to the signal behavior, e.g. "expr & signal:'my-signal'"`,819:"Spreading to bindables onto non custom element",820:"Invalid spread target {{0}}",9999:"No scope context for spread binding.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?",9997:"Marker is malformed. This likely happens when a compiled template has been modified. Did you accidentally modified some compiled template? You can modify template before compilation with compiling Template compiler hook.",9996:"Invalid usage, a rate limit has already been applied. Did you have both throttle and debounce on the same binding?",9995:"The binding already has a target subscriber.",9994:`"& attr" can be only used on property binding. It's used on {{0:ctor}}`,9993:'"& updateTrigger" binding behavior only works with the default implementation of Aurelia HTML observation. Implement your own node observation + updateTrigger',9992:'"& updateTrigger" uses node observer to observe, but it does not know how to use events to observe property <{{0:target@property}} />',9991:"Invalid @children usage. @children decorator can only be used on a field",9990:"Invalid @slotted usage. @slotted decorator can only be used on a field",9989:"Invalid query selector. Only selectors with alpha-numeric characters, or $all are allowed. Got {{0}} instead."},Ste=(n,...e)=>{var i;let t=Cte[n];for(let r=0;r<e.length;++r){const s=new RegExp(`{{${r}(:.*)?}}`,"g");let o=s.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[r];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=_te(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=Gd(l[a.slice(1)]):l=Gd(l)}t=t.slice(0,o.index)+l+t.slice(s.lastIndex),o=s.exec(t)}}return t};function _te(n){switch(n){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}function Fa(n,e){let t;function i(r,s){var c;let o;switch(s.kind){case"getter":case"field":{const u=s.name;if(typeof u!="string")throw _e(227);o=u;break}case"class":if(t==null)throw _e(228);if(typeof t=="string")o=t;else{const u=t.name;if(!u)throw _e(229);if(typeof u!="string")throw _e(227);o=u}break}const a=t==null||typeof t=="string"?{name:o}:t,l=(c=s.metadata)[pu]??(c[pu]=on());l[o]=ac.create(o,a)}if(arguments.length>1){t={},i(n,e);return}else if(Ct(n))return t=n,i;return t=n===void 0?{}:n,i}const pu=kc("bindables"),cs=Dc({name:pu,keyFrom:n=>`${pu}:${n}`,from(...n){const e={},t=Array.isArray;function i(o){e[o]=ac.create(o)}function r(o,a){e[o]=a instanceof ac?a:ac.create(o,a===!0?{}:a)}function s(o){t(o)?o.forEach(a=>Ct(a)?i(a):r(a.name,a)):o instanceof ac?e[o.name]=o:o!==void 0&&OO(o).forEach(a=>r(a,o[a]))}return n.forEach(s),e},getAll(n){const e=[],t=AZ(n);let i=t.length,r;for(;--i>=0;){r=t[i];const s=ur(pu,r);s!=null&&e.push(...Object.values(s))}return e},_add(n,e){let t=ur(pu,e);t==null&&ea(t=on(),e,pu),t[n.name]=n}});class ac{constructor(e,t,i,r,s,o){this.attribute=e,this.callback=t,this.mode=i,this.primary=r,this.name=s,this.set=o}static create(e,t={}){const i=t.mode??ei;return new ac(t.attribute??A6(e),t.callback??`${e}Changed`,Ct(i)?Lw[i]??IO:i,t.primary??!1,t.name??e,t.set??Rte(t))}}const LA={key:kc("coercer"),define(n,e){ea(n[e].bind(n),n,LA.key)},for(n){return ur(LA.key,n)}};function Rte(n={}){const e=n.type??null;if(e==null)return Za;let t;switch(e){case Number:case Boolean:case String:case BigInt:t=e;break;default:{const i=e.coerce;t=typeof i=="function"?i.bind(e):LA.for(e)??Za;break}}return t===Za?t:Ete(t,n.nullable)}function Ete(n,e){return function(t,i){return i!=null&&i.enableCoercion?(e??!((i==null?void 0:i.coerceNullish)??!1))&&t==null?t:n(t,i):t}}const pn=Zu.createInterface,pl=Fd.singleton,Bu=Fd.aliasTo,h5=Fd.instance,_n=(n,e,t)=>n.registerResolver(e,t),xte="custom-element",Tte="custom-attribute",Vu=(n,e,t,i="__au_static_resource__")=>{var s;let r=ur(i,n);return r==null&&((s=n.$au)==null?void 0:s.type)===e&&(r=t(n.$au,n),ea(r,n,i)),r};class ib{constructor(e,t,i,r){this.Type=e,this.name=t,this.aliases=i,this.key=r}static create(e,t){let i,r;return Ct(e)?(i=e,r={name:i}):(i=e.name,r=e),new ib(t,gu(k$(t,"name"),i),di(k$(t,"aliases"),r.aliases,t.aliases),d5.keyFrom(i))}register(e,t){const i=this.Type,r=typeof t=="string"?rb(t):this.key,s=this.aliases;e.has(r,!1)?console.warn(`[DEV:aurelia] ${_e(156,this.name)}`):e.register(e.has(i,!1)?null:pl(i,i),Bu(i,r),...s.map(o=>Bu(i,rb(o))))}}const Js="binding-behavior",Eg=df(Js),k$=(n,e)=>ur(kc(e),n),rb=n=>`${Eg}:${n}`,d5=Dc({name:Eg,keyFrom:rb,isType(n){var e;return $t(n)&&(jR(Eg,n)||((e=n.$au)==null?void 0:e.type)===Js)},define(n,e){const t=ib.create(n,e),i=t.Type;return ea(t,i,Eg,Ya),i},getDefinition(n){const e=ur(Eg,n)??Vu(n,Js,ib.create);if(e===void 0)throw _e(151,n);return e},find(n,e){const t=n.find(Js,e);return t==null?null:ur(Eg,t)??Vu(t,Js,ib.create)??null},get(n,e){try{return n.get(gp(rb(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve binding behavior with name",e),t}return n.get(gp(rb(e)))}}),YE=new Map,zR=n=>({type:Js,name:n});class UR{bind(e,t){YE.set(t,t.mode),t.mode=this.mode}unbind(e,t){t.mode=YE.get(t),YE.delete(t)}}class f5 extends UR{get mode(){return WR}}f5.$au=zR("oneTime");class g5 extends UR{get mode(){return ei}}g5.$au=zR("toView");class p5 extends UR{get mode(){return Rc}}p5.$au=zR("fromView");class m5 extends UR{get mode(){return r5}}m5.$au=zR("twoWay");const KE=new WeakMap,Mte=200;class v5{constructor(){this._platform=pe(kp)}bind(e,t,i,r){var a;const s={type:"debounce",delay:i??Mte,now:this._platform.performanceNow,queue:this._platform.taskQueue,signals:Ct(r)?[r]:r??mt},o=(a=t.limit)==null?void 0:a.call(t,s);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):KE.set(t,o)}unbind(e,t){var i;(i=KE.get(t))==null||i.dispose(),KE.delete(t)}}v5.$au={type:Js,name:"debounce"};const t_=pn("ISignaler",n=>n.singleton(Ate));class Ate{constructor(){this.signals=on()}dispatchSignal(e){const t=this.signals[e];if(t===void 0)return;let i;for(i of t.keys())i.handleChange(void 0,void 0)}addSignalListener(e,t){var i;((i=this.signals)[e]??(i[e]=new Set)).add(t)}removeSignalListener(e,t){var i;(i=this.signals[e])==null||i.delete(t)}}class b5{constructor(){this._lookup=new Map,this._signaler=pe(t_)}bind(e,t,...i){if(!("handleChange"in t))throw _e(817);if(i.length===0)throw _e(818);this._lookup.set(t,i);let r;for(r of i)c5(this._signaler,r,t)}unbind(e,t){const i=this._lookup.get(t);this._lookup.delete(t);let r;for(r of i)u5(this._signaler,r,t)}}b5.$au={type:Js,name:"signal"};const qE=new WeakMap,Pte=200;class w5{constructor(){({performanceNow:this._now,taskQueue:this._taskQueue}=pe(kp))}bind(e,t,i,r){var a;const s={type:"throttle",delay:i??Pte,now:this._now,queue:this._taskQueue,signals:Ct(r)?[r]:r??mt},o=(a=t.limit)==null?void 0:a.call(t,s);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):qE.set(t,o)}unbind(e,t){var i;(i=qE.get(t))==null||i.dispose(),qE.delete(t)}}w5.$au={type:Js,name:"throttle"};const D$=pn("IAppTask"),Pr=kp,HA=(()=>{const n=new WeakMap;return Dc({add(e,t){let i=n.get(e);i==null&&n.set(e,i=[]),i.push(t)},getDefinitions(e){return n.get(e)??mt}})})();class Yd{get type(){return Tte}constructor(e,t,i,r,s,o,a,l,c,u,h){this.Type=e,this.name=t,this.aliases=i,this.key=r,this.defaultBindingMode=s,this.isTemplateController=o,this.bindables=a,this.noMultiBindings=l,this.watches=c,this.dependencies=u,this.containerStrategy=h}static create(e,t){let i,r;Ct(e)?(i=e,r={name:i}):(i=e.name,r=e);const s=gu(Vl(t,"defaultBindingMode"),r.defaultBindingMode,t.defaultBindingMode,ei);for(const o of Object.values(cs.from(r.bindables)))cs._add(o,t);return new Yd(t,gu(Vl(t,"name"),i),di(Vl(t,"aliases"),r.aliases,t.aliases),Jg(i),Ct(s)?Lw[s]??IO:s,gu(Vl(t,"isTemplateController"),r.isTemplateController,t.isTemplateController,!1),cs.from(...cs.getAll(t),Vl(t,"bindables"),t.bindables,r.bindables),gu(Vl(t,"noMultiBindings"),r.noMultiBindings,t.noMultiBindings,!1),di(HA.getDefinitions(t),t.watches),di(Vl(t,"dependencies"),r.dependencies,t.dependencies),gu(Vl(t,"containerStrategy"),r.containerStrategy,t.containerStrategy,"reuse"))}register(e,t){const i=this.Type,r=typeof t=="string"?Jg(t):this.key,s=this.aliases;e.has(r,!1)?(Yd.warnDuplicate&&e.get(Bd).warn(_e(154,this.name)),console.warn(`[DEV:aurelia] ${_e(154,this.name)}`)):e.register(e.has(i,!1)?null:pl(i,i),Bu(i,r),...s.map(o=>Bu(i,Jg(o))))}toString(){return`au:ca:${this.name}`}}Yd.warnDuplicate=!0;const hr="custom-attribute",mp=df(hr),Jg=n=>`${mp}:${n}`,Vl=(n,e)=>ur(kc(e),n),Ite=n=>{var e;return $t(n)&&(jR(mp,n)||((e=n.$au)==null?void 0:e.type)===hr)},y5=(n,e)=>Bg(n,Jg(e))??void 0,DO=(n,e)=>{const t=Yd.create(n,e),i=t.Type;return ea(t,i,mp,Ya),i},NO=n=>{const e=ur(mp,n)??Vu(n,hr,Yd.create);if(e===void 0)throw _e(759,n);return e},Ote=(n,e)=>{let t="",i="";if(Ct(e))t=Jg(e),i=e;else{const s=NO(e);t=s.key,i=s.name}let r=n;for(;r!==null;){const s=Bg(r,t);if(s!=null&&s.is(i))return s;r=r_(r)}return null},LO=Dc({name:mp,keyFrom:Jg,isType:Ite,for:y5,closest:Ote,define:DO,getDefinition:NO,annotate(n,e,t){ea(t,n,kc(e))},getAnnotation:Vl,find(n,e){const t=n.find(hr,e);return t===null?null:ur(mp,t)??Vu(t,hr,Yd.create)??null}}),Nf=pn("ILifecycleHooks");class kte{constructor(e,t){this.definition=e,this.instance=t}}class HO{constructor(e,t){this.Type=e,this.propertyNames=t}static create(e,t){const i=new Set;let r=t.prototype;for(;r!==s5;){for(const s of a5(r))s!=="constructor"&&!s.startsWith("_")&&i.add(s);r=Object.getPrototypeOf(r)}return new HO(t,i)}}const N$=(()=>{const n=new WeakMap,e=new WeakMap;return Dc({define(t,i){const r=HO.create(t,i),s=r.Type;return e.set(s,r),{register(o){pl(Nf,s).register(o)}}},resolve(t){let i=n.get(t);if(i===void 0){n.set(t,i=new Dte);const r=t.root,s=r===t?t.getAll(Nf):t.has(Nf,!1)?r.getAll(Nf).concat(t.getAll(Nf)):r.getAll(Nf);let o,a,l,c,u;for(o of s){a=e.get(o.constructor),l=new kte(a,o);for(c of a.propertyNames)u=i[c],u===void 0?i[c]=[l]:u.push(l)}}return i}})})();class Dte{}class sb{constructor(e,t,i,r){this.Type=e,this.name=t,this.aliases=i,this.key=r}static create(e,t){let i,r;return Ct(e)?(i=e,r={name:i}):(i=e.name,r=e),new sb(t,gu($A(t,"name"),i),di($A(t,"aliases"),r.aliases,t.aliases),C5.keyFrom(i))}register(e,t){const i=this.Type,r=typeof t=="string"?ob(t):this.key,s=this.aliases;e.has(r,!1)?console.warn(`[DEV:aurelia] ${_e(155,this.name)}`):e.register(e.has(i,!1)?null:pl(i,i),Bu(i,r),...s.map(o=>Bu(i,ob(o))))}}const Ng="value-converter",xg=df(Ng),$A=(n,e)=>ur(kc(e),n),ob=n=>`${xg}:${n}`,C5=Dc({name:xg,keyFrom:ob,isType(n){var e;return $t(n)&&(jR(xg,n)||((e=n.$au)==null?void 0:e.type)===Ng)},define(n,e){const t=sb.create(n,e),i=t.Type;return ea(t,i,xg,Ya),i},getDefinition(n){const e=ur(xg,n)??Vu(n,Ng,sb.create);if(e===void 0)throw _e(152,n);return e},annotate(n,e,t){ea(t,n,kc(e))},getAnnotation:$A,find(n,e){const t=n.find(Ng,e);return t==null?null:ur(xg,t)??Vu(t,Ng,sb.create)??null},get(n,e){try{return n.get(gp(ob(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve value converter with name",e),t}return n.get(gp(ob(e)))}});class Nte{constructor(e,t){this._value=void 0,this.b=e,this._flushQueue=t}flush(){this.b.updateSource(this._value)}handleChange(e,t){const i=this.b;e!==Nn(i.ast,i._scope,i,null)&&(this._value=e,this._flushQueue.add(this))}}const ff=(()=>{function n(e){this._scope=e}return e=>{vs(e.prototype,"useScope",n)}})(),Nc=(()=>{class n{}const e=new WeakMap,t=new WeakMap,i=new WeakMap;function r(d){return this.l.get(d)}function s(d,f){let g=t.get(d);return g==null&&t.set(d,g=new n),g[f]??(g[f]=d5.get(d.l,f))}function o(d,f,g){var b;const p=s(this,d);if(p==null)throw _e(101,d);let m=i.get(this);if(m==null&&i.set(this,m={}),m[d])throw _e(102,d);(b=p.bind)==null||b.call(p,f,this,...g)}function a(d,f){var m;const g=s(this,d),p=i.get(this);(m=g==null?void 0:g.unbind)==null||m.call(g,f,this),p!=null&&(p[d]=!1)}function l(d,f){let g=e.get(d);return g==null&&e.set(d,g=new n),g[f]??(g[f]=C5.get(d.l,f))}function c(d){const f=l(this,d);if(f==null)throw _e(103,d);const g=f.signals;if(g!=null){const p=this.l.get(t_),m=g.length;let b=0;for(;b<m;++b)p.addSignalListener(g[b],this)}}function u(d){const f=l(this,d);if((f==null?void 0:f.signals)===void 0)return;const g=this.l.get(t_);let p=0;for(;p<f.signals.length;++p)g.removeSignalListener(f.signals[p],this)}function h(d,f,g,p){var b;const m=l(this,d);if(m==null)throw _e(103,d);switch(f){case"toView":return"toView"in m?m.toView(g,...p):g;case"fromView":return"fromView"in m?(b=m.fromView)==null?void 0:b.call(m,g,...p):g}}return d=>{const f=d.prototype;vs(f,"get",r),vs(f,"bindBehavior",o),vs(f,"unbindBehavior",a),vs(f,"bindConverter",c),vs(f,"unbindConverter",u),vs(f,"useConverter",h)}})(),Lte=pn("IFlushQueue",n=>n.singleton(Hte));class Hte{constructor(){this._flushing=!1,this._items=new Set}get count(){return this._items.size}add(e){if(this._items.add(e),!this._flushing){this._flushing=!0;try{this._items.forEach($te)}finally{this._flushing=!1}}}clear(){this._items.clear(),this._flushing=!1}}const $te=function(n,e,t){t.delete(n),n.flush()},gf=(()=>{const n=new WeakSet,e=(i,r,s)=>{let o,a,l,c=!1;const u=i.queue,h=()=>r(l),d=g=>{l=g,s.isBound?(a=o,o=u.queueTask(h,{delay:i.delay}),a==null||a.cancel()):h()},f=d.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return d.flush=()=>{c=(o==null?void 0:o.status)===O$,f(),c&&h()},d},t=(i,r,s)=>{let o,a,l=0,c=0,u,h=!1;const d=i.queue,f=()=>i.now(),g=()=>r(u),p=b=>{u=b,s.isBound?(c=f()-l,a=o,c>i.delay?(l=f(),g()):o=d.queueTask(()=>{l=f(),g()},{delay:i.delay-c}),a==null||a.cancel()):g()},m=p.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return p.flush=()=>{h=(o==null?void 0:o.status)===O$,m(),h&&g()},p};return(i,r)=>{vs(i.prototype,"limit",function(s){if(n.has(this))throw _e(9996);n.add(this);const o=r(this,s),a=s.signals,l=a.length>0?this.get(t_):null,c=this[o],u=(...f)=>c.call(this,...f),h=s.type==="debounce"?e(s,u,this):t(s,u,this),d=l?{handleChange:h.flush}:null;return this[o]=h,l&&a.forEach(f=>c5(l,f,d)),{dispose:()=>{l&&a.forEach(f=>u5(l,f,d)),n.delete(this),h.dispose(),delete this[o]}}})}})(),nh=((n=new WeakSet)=>e=>function(){n.has(this)||(n.add(this),e.call(this))})(),Fte={preempt:!0};class hd{constructor(e,t,i,r,s,o,a,l,c,u){this.targetAttribute=a,this.targetProperty=l,this.mode=c,this.strict=u,this.isBound=!1,this._scope=void 0,this._task=null,this._value=void 0,this.boundFn=!1,this.l=t,this.ast=s,this._controller=e,this.target=o,this.oL=i,this._taskQueue=r}updateTarget(e){const t=this.target,i=this.targetAttribute,r=this.targetProperty;switch(i){case"class":t.classList.toggle(r,!!e);break;case"style":{let s="",o=Gd(e);Ct(o)&&o.includes("!important")&&(s="important",o=o.replace("!important","")),t.style.setProperty(r,o,s);break}default:e==null?t.removeAttribute(i):t.setAttribute(i,Gd(e))}}handleChange(){if(!this.isBound)return;let e;this.obs.version++;const t=Nn(this.ast,this._scope,this,(this.mode&ei)>0?this:null);this.obs.clear(),t!==this._value&&(this._value=t,this._controller.state!==bs?(e=this._task,this._task=this._taskQueue.queueTask(()=>{this._task=null,this.updateTarget(t)},Fte),e==null||e.cancel()):this.updateTarget(t))}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Ju(this.ast,e,this),this.mode&(ei|WR)&&this.updateTarget(this._value=Nn(this.ast,e,this,(this.mode&ei)>0?this:null)),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,eh(this.ast,this._scope,this),this._scope=void 0,this._value=void 0,(e=this._task)==null||e.cancel(),this._task=null,this.obs.clearAll())}}hd.mix=nh(()=>{ff(hd),gf(hd,()=>"updateTarget"),sa(hd,null),Nc(hd)});const Bte={preempt:!0};class Vte{constructor(e,t,i,r,s,o,a,l,c){this.ast=s,this.target=o,this.targetProperty=a,this.mode=l,this.strict=c,this.isBound=!1,this._scope=void 0,this._task=null,this._controller=e,this.oL=i,this._taskQueue=r,this._targetObserver=i.getAccessor(o,a);const u=s.expressions,h=this.partBindings=Array(u.length),d=u.length;let f=0;for(;d>f;++f)h[f]=new dd(u[f],o,a,t,i,c,this)}_handlePartChange(){this.updateTarget()}updateTarget(){const e=this.partBindings,t=this.ast.parts,i=e.length;let r="",s=0;if(i===1)r=t[0]+e[0]._value+t[1];else for(r=t[0];i>s;++s)r+=e[s]._value+t[s+1];const o=this._targetObserver,a=this._controller.state!==bs&&(o.type&gl)>0;let l;a?(l=this._task,this._task=this._taskQueue.queueTask(()=>{this._task=null,o.setValue(r,this.target,this.targetProperty)},Bte),l==null||l.cancel(),l=null):o.setValue(r,this.target,this.targetProperty)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e;const t=this.partBindings,i=t.length;let r=0;for(;i>r;++r)t[r].bind(e);this.updateTarget(),this.isBound=!0}unbind(){var r;if(!this.isBound)return;this.isBound=!1,this._scope=void 0;const e=this.partBindings,t=e.length;let i=0;for(;t>i;++i)e[i].unbind();(r=this._task)==null||r.cancel(),this._task=null}useAccessor(e){this._targetObserver=e}}class dd{constructor(e,t,i,r,s,o,a){this.ast=e,this.target=t,this.targetProperty=i,this.strict=o,this.owner=a,this.mode=ei,this.task=null,this.isBound=!1,this._value="",this.boundFn=!1,this.l=r,this.oL=s}updateTarget(){this.owner._handlePartChange()}handleChange(){if(!this.isBound)return;this.obs.version++;const e=Nn(this.ast,this._scope,this,(this.mode&ei)>0?this:null);this.obs.clear(),e!=this._value&&(this._value=e,ai(e)&&this.observeCollection(e),this.updateTarget())}handleCollectionChange(){this.updateTarget()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Ju(this.ast,e,this),this._value=Nn(this.ast,this._scope,this,(this.mode&ei)>0?this:null),ai(this._value)&&this.observeCollection(this._value),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,eh(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}dd.mix=nh(()=>{ff(dd),gf(dd,()=>"updateTarget"),sa(dd,null),Nc(dd)});const Wte={preempt:!0};class fd{constructor(e,t,i,r,s,o,a,l){this.p=s,this.ast=o,this.target=a,this.strict=l,this.isBound=!1,this.mode=ei,this._task=null,this._value="",this._needsRemoveNode=!1,this.boundFn=!1,this.l=t,this._controller=e,this.oL=i,this._taskQueue=r}updateTarget(e){var r,s;const t=this.target,i=this._value;this._value=e,this._needsRemoveNode&&((r=i.parentNode)==null||r.removeChild(i),this._needsRemoveNode=!1),e instanceof this.p.Node&&((s=t.parentNode)==null||s.insertBefore(e,t),e="",this._needsRemoveNode=!0),t.textContent=Gd(e??"")}handleChange(){var i;if(!this.isBound)return;this.obs.version++;const e=Nn(this.ast,this._scope,this,(this.mode&ei)>0?this:null);if(this.obs.clear(),e===this._value){(i=this._task)==null||i.cancel(),this._task=null;return}this._controller.state!==bs?this._queueUpdate(e):this.updateTarget(e)}handleCollectionChange(){if(!this.isBound)return;this.obs.version++;const e=this._value=Nn(this.ast,this._scope,this,(this.mode&ei)>0?this:null);this.obs.clear(),ai(e)&&this.observeCollection(e),this._controller.state!==bs?this._queueUpdate(e):this.updateTarget(e)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Ju(this.ast,e,this);const t=this._value=Nn(this.ast,this._scope,this,(this.mode&ei)>0?this:null);ai(t)&&this.observeCollection(t),this.updateTarget(t),this.isBound=!0}unbind(){var e,t;this.isBound&&(this.isBound=!1,eh(this.ast,this._scope,this),this._needsRemoveNode&&((e=this._value.parentNode)==null||e.removeChild(this._value)),this._scope=void 0,this.obs.clearAll(),(t=this._task)==null||t.cancel(),this._task=null)}_queueUpdate(e){const t=this._task;this._task=this._taskQueue.queueTask(()=>{this._task=null,this.updateTarget(e)},Wte),t==null||t.cancel()}}fd.mix=nh(()=>{ff(fd),gf(fd,()=>"updateTarget"),sa(fd,null),Nc(fd)});class gd{constructor(e,t,i,r,s,o){this.ast=i,this.targetProperty=r,this.isBound=!1,this._scope=void 0,this.target=null,this.boundFn=!1,this.l=e,this.oL=t,this.strict=o,this._toBindingContext=s}updateTarget(){this.target[this.targetProperty]=this._value}handleChange(){this.isBound&&(this.obs.version++,this._value=Nn(this.ast,this._scope,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,this.target=this._toBindingContext?e.bindingContext:e.overrideContext,Ju(this.ast,e,this),this._value=Nn(this.ast,this._scope,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,eh(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}gd.mix=nh(()=>{ff(gd),gf(gd,()=>"updateTarget"),sa(gd,null),Nc(gd)});class Mr{constructor(e,t,i,r,s,o,a,l,c){this.ast=s,this.target=o,this.targetProperty=a,this.mode=l,this.strict=c,this.isBound=!1,this._scope=void 0,this._targetObserver=void 0,this._task=null,this._targetSubscriber=null,this.boundFn=!1,this.l=t,this._controller=e,this._taskQueue=r,this.oL=i}updateTarget(e){this._targetObserver.setValue(e,this.target,this.targetProperty)}updateSource(e){Zb(this.ast,this._scope,this,e)}handleChange(){if(!this.isBound)return;this.obs.version++;const e=Nn(this.ast,this._scope,this,(this.mode&ei)>0?this:null);this.obs.clear(),this._controller.state!==bs&&(this._targetObserver.type&gl)>0?(pm=this._task,this._task=this._taskQueue.queueTask(()=>{this.updateTarget(e),this._task=null},jte),pm==null||pm.cancel(),pm=null):this.updateTarget(e)}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Ju(this.ast,e,this);const t=this.oL,i=this.mode;let r=this._targetObserver;r||(i&Rc?r=t.getObserver(this.target,this.targetProperty):r=t.getAccessor(this.target,this.targetProperty),this._targetObserver=r);const s=(i&ei)>0;i&(ei|WR)&&this.updateTarget(Nn(this.ast,this._scope,this,s?this:null)),i&Rc&&(r.subscribe(this._targetSubscriber??(this._targetSubscriber=new Nte(this,this.l.get(Lte)))),s||this.updateSource(r.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,eh(this.ast,this._scope,this),this._scope=void 0,this._targetSubscriber&&(this._targetObserver.unsubscribe(this._targetSubscriber),this._targetSubscriber=null),(e=this._task)==null||e.cancel(),this._task=null,this.obs.clearAll())}useTargetObserver(e){var t;(t=this._targetObserver)==null||t.unsubscribe(this),(this._targetObserver=e).subscribe(this)}useTargetSubscriber(e){if(this._targetSubscriber!=null)throw _e(9995);this._targetSubscriber=e}}Mr.mix=nh(()=>{ff(Mr),gf(Mr,n=>n.mode&Rc?"updateSource":"updateTarget"),sa(Mr,null),Nc(Mr)});let pm=null;const jte={preempt:!0};class FA{constructor(e,t,i,r){this.ast=t,this.target=i,this.strict=r,this.isBound=!1,this._scope=void 0,this.l=e}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Ju(this.ast,e,this),Zb(this.ast,this._scope,this,this.target),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Nn(this.ast,this._scope,this,null)===this.target&&Zb(this.ast,this._scope,this,null),eh(this.ast,this._scope,this),this._scope=void 0)}}FA.mix=nh(()=>{Nc(FA)});class zte{constructor(e,t=!1,i){this.prevent=e,this.capture=t,this.onError=i}}class Lg{constructor(e,t,i,r,s,o,a){this.ast=t,this.target=i,this.targetEvent=r,this.strict=a,this.isBound=!1,this.self=!1,this.boundFn=!0,this._modifiedEventHandler=null,this.l=e,this._options=s,this._modifiedEventHandler=o}callSource(e){const t=this._scope.overrideContext;t.$event=e;let i=Nn(this.ast,this._scope,this,null);delete t.$event,$t(i)&&(i=i(e)),i!==!0&&this._options.prevent&&e.preventDefault()}handleEvent(e){var t;if(!(this.self&&this.target!==e.composedPath()[0])&&((t=this._modifiedEventHandler)==null?void 0:t.call(this,e))!==!1)try{this.callSource(e)}catch(i){this._options.onError(e,i)}}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Ju(this.ast,e,this),this.target.addEventListener(this.targetEvent,this,this._options),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,eh(this.ast,this._scope,this),this._scope=void 0,this.target.removeEventListener(this.targetEvent,this,this._options))}}Lg.mix=nh(function(){ff(Lg),gf(Lg,()=>"callSource"),Nc(Lg)});const GR=pn("IEventModifier"),S5=pn("IKeyMapping",n=>n.instance({meta:Dc(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce((e,t,i)=>{let r=String.fromCharCode(i+65);return e[i+65]=r,r=String.fromCharCode(i+97),e[i+97]=e[r]=r,e},{})}}));class $O{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this._mapping=pe(S5),this._mouseButtons=["left","middle","right"]}static register(e){e.register(pl(GR,$O))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let r=!1,s=!1,o;for(o of t){switch(o){case"prevent":r=!0;continue;case"stop":s=!0;continue;case"left":case"middle":case"right":if(i.button!==this._mouseButtons.indexOf(o))return!1;continue}if(this._mapping.meta.includes(o)&&i[`${o}Key`]!==!0)return!1;console.warn(`Modifier '${o}' is not supported for mouse events.`)}return r&&i.preventDefault(),s&&i.stopPropagation(),!0}}}class FO{constructor(){this._mapping=pe(S5),this.type=["keydown","keyup"]}static register(e){e.register(pl(GR,FO))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let r=!1,s=!1,o;for(o of t){switch(o){case"prevent":r=!0;continue;case"stop":s=!0;continue}if(this._mapping.meta.includes(o)){if(i[`${o}Key`]!==!0)return!1;continue}if(this._mapping.keys[o]!==i.key)return!1;console.warn(`Modifier '${o}' is not supported for keyboard event with key "${i.key}".`)}return r&&i.preventDefault(),s&&i.stopPropagation(),!0}}}class BO{constructor(){this.type=["$ALL"]}static register(e){e.register(pl(GR,BO))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let r=!1,s=!1,o;for(o of t){switch(o){case"prevent":r=!0;continue;case"stop":s=!0;continue}console.warn(`Modifier '${o}' is not supported for event "${i.type}".`)}return r&&i.preventDefault(),s&&i.stopPropagation(),!0}}}const _5=pn("IEventModifierHandler",n=>n.instance({getHandler:()=>(console.warn("No event modifier handler registered"),null)}));class VO{constructor(){this._reg=pe(oO(GR)).reduce((e,t)=>((ai(t.type)?t.type:[t.type]).forEach(r=>e[r]=t),e),{})}static register(e){e.register(pl(_5,VO))}getHandler(e,t){var i;return Ct(t)?((i=this._reg[e]??this._reg.$ALL)==null?void 0:i.getHandler(t))??null:null}}const Ute={register(n){n.register(VO,$O,FO,BO)}},xs=pn("IViewFactory");class YR{constructor(e,t){this.isCaching=!1,this._cache=null,this._cacheSize=-1,this.name=t.name,this.container=e,this.def=t}setCacheSize(e,t){e&&(e==="*"?e=YR.maxCacheSize:Ct(e)&&(e=parseInt(e,10)),(this._cacheSize===-1||!t)&&(this._cacheSize=e)),this._cacheSize>0?this._cache=[]:this._cache=null,this.isCaching=this._cacheSize>0}canReturnToCache(e){return this._cache!=null&&this._cache.length<this._cacheSize}tryReturnToCache(e){return this.canReturnToCache(e)?(this._cache.push(e),!0):!1}create(e){const t=this._cache;let i;return t!=null&&t.length>0?(i=t.pop(),i):(i=ys.$view(this,e),i)}}YR.maxCacheSize=65535;const Gte=(()=>{const n=(e,t)=>e.document.createComment(t);return e=>{const t=n(e,"au-end");return t.$start=n(e,"au-start"),t}})(),Oy=(n,e,t)=>{if(n===null)return;const i=t.length;let r=0;for(;i>r;)n.insertBefore(t[r],e),++r},R5=(n,e)=>new n.ownerDocument.defaultView.MutationObserver(e),Yte=n=>n.nodeType===1,E5="default",Kte="au-slot",x5=pn("IAuSlotsInfo");class T5{constructor(e){this.projectedSlots=e}}const qte=pn("IAuSlotWatcher");class KR{static create(e,t,i,r,s,o,a,l){const c=[],u=r.renderers,h=f=>{let g=f,p=e;for(;p!=null&&g>0;)p=p.parent,--g;if(p==null)throw _e(9999);return p},d=f=>{var y;const g=h(f),p=new KR(g),m=s.compileSpread(g.controller.definition,((y=g.instruction)==null?void 0:y.captures)??mt,g.controller.container,t,i);let b;for(b of m)switch(b.type){case mi.spreadTransferedBinding:d(f+1);break;case mi.spreadElementProp:u[b.instruction.type].render(p,Pd(t),b.instruction,o,a,l);break;default:u[b.type].render(p,t,b,o,a,l)}c.push(p)};return d(0),c}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(e){this.isBound=!1,this._innerBindings=[],this.locator=(this.$controller=(this._hydrationContext=e).controller).container}get(e){return this.locator.get(e)}bind(e){if(this.isBound)return;this.isBound=!0;const t=this.scope=this._hydrationContext.controller.scope.parent??void 0;if(t==null)throw _e(9999);this._innerBindings.forEach(i=>i.bind(t))}unbind(){this._innerBindings.forEach(e=>e.unbind()),this.isBound=!1}addBinding(e){this._innerBindings.push(e)}addChild(e){if(e.vmKind!==od)throw _e(9998);this.$controller.addChild(e)}}class Ba{constructor(e,t,i,r,s,o,a,l){this.target=t,this.targetKeys=i,this.ast=r,this.strict=l,this.isBound=!1,this._scope=void 0,this.boundFn=!1,this._bindingCache={},this._scopeCache=new WeakMap,this._controller=e,this.oL=s,this.l=o,this._taskQueue=a}updateTarget(){this.obs.version++;const e=Nn(this.ast,this._scope,this,this);this.obs.clear(),this._createBindings(e,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(e){if(this.isBound){if(e===this._scope)return;this.unbind()}this.isBound=!0,this._scope=e,Ju(this.ast,e,this);const t=Nn(this.ast,e,this,this);this._createBindings(t,!1)}unbind(){if(!this.isBound)return;this.isBound=!1,eh(this.ast,this._scope,this),this._scope=void 0;let e;for(e in this._bindingCache)this._bindingCache[e].unbind()}_createBindings(e,t){var o,a;let i;if(!x6(e)){console.warn(`[DEV:aurelia] $bindable spread is given a non object for properties: "${this.targetKeys.join(", ")}" of ${this.target.constructor.name}`);for(i in this._bindingCache)(o=this._bindingCache[i])==null||o.unbind();return}let r,s=this._scopeCache.get(e);s==null&&this._scopeCache.set(e,s=pi.fromParent(this._scope,e));for(i of this.targetKeys)r=this._bindingCache[i],i in e?(r==null&&(r=this._bindingCache[i]=new Mr(this._controller,this.l,this.oL,this._taskQueue,(a=Ba._astCache)[i]??(a[i]=new eb(i,0)),this.target,i,Lw.toView,this.strict)),r.bind(s)):t&&(r==null||r.unbind())}}Ba.mix=nh(()=>{ff(Ba),gf(Ba,()=>"updateTarget"),sa(Ba,null),Nc(Ba)});Ba._astCache={};const L$=(n,e,t,i)=>{n.addEventListener(e,t,i)},H$=(n,e,t,i)=>{n.removeEventListener(e,t,i)},WO=n=>{let e;const t=n.prototype;vs(t,"subscribe",function(i){var r;if(this.subs.add(i)&&this.subs.count===1){for(e of this._config.events)L$(this._el,e,this);this._listened=!0,(r=this._start)==null||r.call(this)}}),vs(t,"unsubscribe",function(i){var r;if(this.subs.remove(i)&&this.subs.count===0){for(e of this._config.events)H$(this._el,e,this);this._listened=!1,(r=this._stop)==null||r.call(this)}}),vs(t,"useConfig",function(i){if(this._config=i,this._listened){for(e of this._config.events)H$(this._el,e,this);for(e of this._config.events)L$(this._el,e,this)}})},qR=n=>{vs(n.prototype,"subscribe",Za),vs(n.prototype,"unsubscribe",Za)};class XR{get doNotCache(){return!0}constructor(e,t={}){this.obj=e,this.mapping=t,this.type=th|gl,this._value="",this._nameIndex={},this._version=0}getValue(){return this._value}setValue(e){e!==this._value&&(this._value=e,this._flushChanges())}_flushChanges(){const e=this._nameIndex,t=++this._version,i=this.obj.classList,r=M5(this._value),s=r.length;let o=0,a;if(s>0)for(;o<s;o++)a=r[o],a=this.mapping[a]||a,a.length!==0&&(e[a]=this._version,i.add(a));if(t!==1)for(a in e)a=this.mapping[a]||a,e[a]!==t&&i.remove(a)}}qR(XR);function M5(n){if(Ct(n))return $$(n);if(typeof n!="object")return mt;if(ai(n)){const i=n.length;if(i>0){const r=[];let s=0;for(;i>s;++s)r.push(...M5(n[s]));return r}else return mt}const e=[];let t;for(t in n)n[t]&&(t.includes(" ")?e.push(...$$(t)):e.push(t));return e}function $$(n){const e=n.match(/\S+/g);return e===null?mt:e}const A5=n=>({$isResolver:!0,resolve(e,t){return t.get(Kd).controller.container.get(XZ(n))}}),P5=pn("IRenderer");function Fi(n,e){var i;const t=n[i=Symbol.metadata]??(n[i]=Object.create(null));return t[hl]={register(r){pl(P5,n).register(r)}},n}function sl(n,e,t){return Ct(e)?n.parse(e,t):e}function ZR(n){return n.viewModel!=null?n.viewModel:n}function Xte(n,e){if(e==="element")return n;switch(e){case"controller":return Pd(n);case"view":throw _e(750);case"component":return Pd(n).viewModel;default:{const t=y5(n,e);if(t!==void 0)return t.viewModel;const i=Pd(n,{name:e});if(i===void 0)throw _e(751,e);return i.viewModel}}}const Zte=Fi(class{constructor(){this.target=mi.setProperty}render(e,t,i){var s;const r=ZR(t);((s=r.$observers)==null?void 0:s[i.to])!==void 0?r.$observers[i.to].setValue(i.value):r[i.to]=i.value}}),Qte=Fi(class{constructor(){this._rendering=pe(pf),this.target=mi.hydrateElement}render(e,t,i,r,s,o){let a,l,c;const u=i.res,h=i.projections,d=e.container;switch(typeof u){case"string":if(a=Ar.find(d,u),a==null)throw _e(752,i,e);break;default:a=u}const g=i.containerless||a.containerless?Qb(t):null,p=yne(r,e,t,i,g,h==null?void 0:new T5(OO(h)));l=p.invoke(a.Type),c=ys.$el(p,l,t,i,a,g),Sr(t,a.key,c);const m=this._rendering.renderers,b=i.props,y=b.length;let w=0,R;for(;y>w;)R=b[w],m[R.type].render(e,c,R,r,s,o),++w;e.addChild(c)}}),Jte=Fi(class{constructor(){this._rendering=pe(pf),this.target=mi.hydrateAttribute}render(e,t,i,r,s,o){let a=e.container,l;switch(typeof i.res){case"string":if(l=LO.find(a,i.res),l==null)throw _e(753,i,e);break;default:l=i.res}const c=N5(r,l,e,t,i,void 0,void 0),u=ys.$attr(c.ctn,c.vm,t,l);Sr(t,l.key,u);const h=this._rendering.renderers,d=i.props,f=d.length;let g=0,p;for(;f>g;)p=d[g],h[p.type].render(e,u,p,r,s,o),++g;e.addChild(u)}}),ene=Fi(class{constructor(){this._rendering=pe(pf),this.target=mi.hydrateTemplateController}render(e,t,i,r,s,o){var y,w;let a=e.container,l;switch(typeof i.res){case"string":if(l=LO.find(a,i.res),l==null)throw _e(754,i,e);break;default:l=i.res}const c=this._rendering.getViewFactory(i.def,l.containerStrategy==="new"?a.createChild({inheritParentResources:!0}):a),u=Qb(t),h=N5(r,l,e,t,i,c,u),d=ys.$attr(h.ctn,h.vm,t,l);Sr(u,l.key,d),(w=(y=h.vm).link)==null||w.call(y,e,d,t,i);const f=this._rendering.renderers,g=i.props,p=g.length;let m=0,b;for(;p>m;)b=g[m],f[b.type].render(e,d,b,r,s,o),++m;e.addChild(d)}}),tne=Fi(class{constructor(){this.target=mi.hydrateLetElement,gd.mix()}render(e,t,i,r,s,o){t.remove();const a=i.instructions,l=i.toBindingContext,c=e.container,u=a.length;let h,d,f=0;for(;u>f;)h=a[f],d=sl(s,h.from,rl),e.addBinding(new gd(c,o,d,h.to,l,e.strict??!1)),++f}}),nne=Fi(class{constructor(){this.target=mi.refBinding}render(e,t,i,r,s){e.addBinding(new FA(e.container,sl(s,i.from,rl),Xte(t,i.to),e.strict??!1))}}),ine=Fi(class{constructor(){this.target=mi.interpolation,dd.mix()}render(e,t,i,r,s,o){const a=e.container,l=new Vte(e,a,o,r.domQueue,sl(s,i.from,bte),ZR(t),i.to,ei,e.strict??!1);if(i.to==="class"&&l.target.nodeType>0){const c=a.get(A5(n_));l.useAccessor(new XR(l.target,c))}e.addBinding(l)}}),rne=Fi(class{constructor(){this.target=mi.propertyBinding,Mr.mix()}render(e,t,i,r,s,o){const a=e.container,l=new Mr(e,a,o,r.domQueue,sl(s,i.from,rl),ZR(t),i.to,i.mode,e.strict??!1);if(i.to==="class"&&l.target.nodeType>0){const c=a.get(A5(n_));l.useTargetObserver(new XR(l.target,c))}e.addBinding(l)}}),sne=Fi(class{constructor(){this.target=mi.iteratorBinding,Mr.mix()}render(e,t,i,r,s,o){e.addBinding(new Mr(e,e.container,o,r.domQueue,sl(s,i.forOf,wte),ZR(t),i.to,ei,e.strict??!1))}}),one=Fi(class{constructor(){this.target=mi.textBinding,fd.mix()}render(e,t,i,r,s,o){e.addBinding(new fd(e,e.container,o,r.domQueue,r,sl(s,i.from,rl),t,e.strict??!1))}}),ane=pn("IListenerBindingOptions",n=>n.singleton(class{constructor(){this.p=pe(Pr),this.prevent=!1,this.onError=(e,t)=>{const i=new this.p.CustomEvent("au-event-error",{cancelable:!0,detail:{event:e,error:t}});if(this.p.window.dispatchEvent(i),!i.defaultPrevented)throw t}}})),lne=Fi(class{constructor(){this.target=mi.listenerBinding,this._modifierHandler=pe(_5),this._defaultOptions=pe(ane),Lg.mix()}render(e,t,i,r,s){e.addBinding(new Lg(e.container,sl(s,i.from,yte),t,i.to,new zte(this._defaultOptions.prevent,i.capture,this._defaultOptions.onError),this._modifierHandler.getHandler(i.to,i.modifier),e.strict??!1))}}),cne=Fi(class{constructor(){this.target=mi.setAttribute}render(e,t,i){t.setAttribute(i.to,i.value)}}),une=Fi(class{constructor(){this.target=mi.setClassAttribute}render(e,t,i){bne(t.classList,i.value)}}),hne=Fi(class{constructor(){this.target=mi.setStyleAttribute}render(e,t,i){t.style.cssText+=i.value}}),dne=["height","width","border-width","padding","padding-left","padding-right","padding-top","padding-right","padding-inline","padding-block","margin","margin-left","margin-right","margin-top","margin-bottom","margin-inline","margin-block","top","right","bottom","left"],fne=Fi(class{constructor(){this.target=mi.stylePropertyBinding,Mr.mix()}render(e,t,i,r,s,o){if(dne.includes(i.to)){e.addBinding(new gne(e,e.container,o,r.domQueue,sl(s,i.from,rl),t.style,i.to,ei,e.strict??!1));return}e.addBinding(new Mr(e,e.container,o,r.domQueue,sl(s,i.from,rl),t.style,i.to,ei,e.strict??!1))}});class gne extends Mr{updateTarget(e){return typeof e=="number"&&e>0&&console.warn(`[DEV]: Setting number ${e} as value for style.${this.targetProperty}. Did you meant "${e}px"?`),super.updateTarget(e)}}const pne=Fi(class{constructor(){this.target=mi.attributeBinding,hd.mix()}render(e,t,i,r,s,o){const a=e.container,l=a.has(n_,!1)?a.get(n_):null;e.addBinding(new hd(e,a,o,r.domQueue,sl(s,i.from,rl),t,i.attr,l==null?i.to:i.to.split(/\s/g).map(c=>l[c]??c).join(" "),ei,e.strict??!1))}}),mne=Fi(class{constructor(){this._compiler=pe(HR),this._rendering=pe(pf),this.target=mi.spreadTransferedBinding}render(e,t,i,r,s,o){KR.create(e.container.get(Kd),t,void 0,this._rendering,this._compiler,r,s,o).forEach(a=>e.addBinding(a))}}),vne=Fi(class{constructor(){this.target=mi.spreadValueBinding,Ba.mix()}render(e,t,i,r,s,o){const a=i.target;if(a==="$bindables")e.addBinding(new Ba(e,t.viewModel,OO(t.definition.bindables),s.parse(i.from,rl),o,e.container,r.domQueue,e.strict??!1));else throw _e(820,a)}});function bne(n,e){const t=e.length;let i=0;for(let r=0;r<t;++r)e.charCodeAt(r)===32?(r!==i&&n.add(e.slice(i,r)),i=r+1):r+1===t&&n.add(e.slice(i))}const I5="IController",O5="IInstruction",wne="IRenderLocation",k5="ISlotsInfo";function yne(n,e,t,i,r,s){const o=e.container.createChild();return e1(o,t,n),_n(o,QR,new gi(I5,e)),_n(o,Lp,new gi(O5,i)),_n(o,Or,r==null?H5:new L5(r)),_n(o,xs,$5),_n(o,x5,s==null?F5:new gi(k5,s)),o}class D5{get $isResolver(){return!0}constructor(e){this.f=e}resolve(){const e=this.f;if(e===null)throw _e(755);if(!Ct(e.name)||e.name.length===0)throw _e(756);return e}}function N5(n,e,t,i,r,s,o,a){const l=t instanceof ys?t:t.$controller,c=l.container.createChild();return e1(c,i,n),_n(c,QR,new gi(I5,l)),_n(c,Lp,new gi(O5,r)),_n(c,Or,o==null?H5:new gi(wne,o)),_n(c,xs,s==null?$5:new D5(s)),_n(c,x5,F5),{vm:c.invoke(e.Type),ctn:c}}class L5{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(e){this._location=e}resolve(){return this._location}}const H5=new L5(null),$5=new D5(null),F5=new gi(k5,new T5(mt)),pf=pn("IRendering",n=>n.singleton(Cne));class Cne{get renderers(){return this._renderers??(this._renderers=this._ctn.getAll(P5,!1).reduce((e,t)=>{var i;return e[t.target]!==void 0&&console.warn(`[DEV:aurelia] Renderer for target ${t.target} already exists.`),e[i=t.target]??(e[i]=t),e},on()))}constructor(){this._compilationCache=new WeakMap,this._fragmentCache=new WeakMap;const e=this._ctn=pe(Dw).root,t=this._platform=e.get(Pr);this._exprParser=e.get(Dp),this._observerLocator=e.get($p),this._marker=t.document.createElement("au-m"),this._empty=new JE(t,t.document.createDocumentFragment())}compile(e,t){const i=t.get(HR),r=this._compilationCache;let s=r.get(e);return s==null&&r.set(e,s=Qr.create(e.needsCompile?i.compile(e,t):e)),s}getViewFactory(e,t){return new YR(t,Qr.getOrCreate(e))}createNodes(e){if(e.enhance===!0)return new JE(this._platform,this._transformMarker(e.template));let t,i=!1;const r=this._fragmentCache,s=this._platform,o=s.document;if(r.has(e))t=r.get(e);else{const a=e.template;let l;a==null?t=null:a instanceof s.Node?a.nodeName==="TEMPLATE"?(t=a.content,i=!0):(t=o.createDocumentFragment()).appendChild(a.cloneNode(!0)):(l=o.createElement("template"),Ct(a)&&(l.innerHTML=a),t=l.content,i=!0),this._transformMarker(t),r.set(e,t)}return t==null?this._empty:new JE(this._platform,i?o.importNode(t,!0):o.adoptNode(t.cloneNode(!0)))}render(e,t,i,r){const s=i.instructions,o=this.renderers,a=t.length;let l=0,c=0,u=s.length,h,d,f;if(a!==u)throw _e(757,a,u);if(a>0)for(;a>l;){for(h=s[l],f=t[l],c=0,u=h.length;u>c;)d=h[c],o[d.type].render(e,f,d,this._platform,this._exprParser,this._observerLocator),++c;++l}if(r!=null&&(h=i.surrogates,(u=h.length)>0))for(c=0;u>c;)d=h[c],o[d.type].render(e,r,d,this._platform,this._exprParser,this._observerLocator),++c}_transformMarker(e){if(e==null)return null;const t=this._platform.document.createTreeWalker(e,128);let i;for(;(i=t.nextNode())!=null;)i.nodeValue==="au*"&&i.parentNode.replaceChild(t.currentNode=this._marker.cloneNode(),i);return e}}const F$=pn("IShadowDOMStyles"),Sne=pn("IShadowDOMGlobalStyles",n=>n.instance({applyTo:Za})),{enter:_ne,exit:Rne}=bee,{wrap:Ene,unwrap:xne}=tte;class B5{get value(){return this._value}constructor(e,t,i,r,s){this.obj=e,this.$get=i,this.useProxy=s,this.isBound=!1,this.running=!1,this._value=void 0,this._callback=r,this.oL=t}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const e=this.obj,t=this._value,i=this.compute();Jo(i,t)||this._callback.call(e,i,t,e)}compute(){this.running=!0,this.obs.version++;try{return _ne(this),this._value=xne(this.$get.call(void 0,this.useProxy?Ene(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,Rne(this)}}}sa(B5,null);class BA{get value(){return this._value}constructor(e,t,i,r,s){this.scope=e,this.l=t,this.oL=i,this.isBound=!1,this.boundFn=!1,this.obj=e.bindingContext,this._expression=r,this._callback=s}handleChange(e){const t=this._expression,i=this.obj,r=this._value;t.$kind==="AccessScope"&&this.obs.count===1||(this.obs.version++,e=Nn(t,this.scope,this,this),this.obs.clear()),Jo(e,r)||(this._value=e,this._callback.call(i,e,r,i))}bind(){this.isBound||(this.obs.version++,this._value=Nn(this._expression,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this._value=void 0)}}sa(BA,null),Nc(BA);class ys{get lifecycleHooks(){return this._lifecycleHooks}get isActive(){return(this.state&(bs|pd))>0&&(this.state&ab)===0}get name(){var e;if(this.parent===null)switch(this.vmKind){case od:return`[${this.definition.name}]`;case Vs:return this.definition.name;case Xi:return this.viewFactory.name}switch(this.vmKind){case od:return`${this.parent.name}>[${this.definition.name}]`;case Vs:return`${this.parent.name}>${this.definition.name}`;case Xi:return this.viewFactory.name===((e=this.parent.definition)==null?void 0:e.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this._vm}set viewModel(e){this._vm=e,this._vmHooks=e==null||this.vmKind===Xi?Hg.none:new Hg(e)}get strict(){var e;return(e=this.definition)==null?void 0:e.strict}constructor(e,t,i,r,s,o,a){this.container=e,this.vmKind=t,this.definition=i,this.viewFactory=r,this.host=o,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this._isBindingDone=!1,this.hostController=null,this.mountTarget=V5,this.shadowRoot=null,this.nodes=null,this.location=null,this._lifecycleHooks=null,this.state=XE,this._fullyNamed=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this._activatingStack=0,this._detachingStack=0,this._unbindingStack=0,this._vm=s,this._vmHooks=t===Xi?Hg.none:new Hg(s),this.logger=null,this.debug=!1,this.location=a,this._rendering=e.root.get(pf),this.coercion=t===Xi?void 0:e.get(Ane)}static getCached(e){return zc.get(e)}static getCachedOrThrow(e){const t=ys.getCached(e);if(t===void 0)throw _e(500,e);return t}static $el(e,t,i,r,s=void 0,o=null){if(zc.has(t))return zc.get(t);if(s==null)try{s=U5(t.constructor)}catch(c){throw console.error(`[DEV:aurelia] Custom element definition not found for creating a controller with host: <${i.nodeName} /> and component ${t.constructor.name||"(Anonymous) class"}`),c}_n(e,s.Type,new gi(s.key,t,s.Type));const a=new ys(e,Vs,s,null,t,i,o),l=e.get(L6(Kd));return s.dependencies.length>0&&e.register(...s.dependencies),_n(e,Kd,new gi("IHydrationContext",new W5(a,r,l))),zc.set(t,a),(r==null||r.hydrate!==!1)&&a._hydrateCustomElement(r),a}static $attr(e,t,i,r){if(zc.has(t))return zc.get(t);r=r??NO(t.constructor),_n(e,r.Type,new gi(r.key,t,r.Type));const s=new ys(e,od,r,null,t,i,null);return r.dependencies.length>0&&e.register(...r.dependencies),zc.set(t,s),s._hydrateCustomAttribute(),s}static $view(e,t=void 0){const i=new ys(e.container,Xi,null,e,null,null,null);return i.parent=t??null,i._hydrateSynthetic(),i}_hydrateCustomElement(e){this.logger=this.container.get(Bd).root,this.debug=this.logger.config.level<=tQ.debug,this.debug&&(this.logger=this.logger.scopeTo(this.name));const t=this.container,i=this._vm,r=this.definition;this.scope=pi.create(i,null,!0),r.watches.length>0&&W$(this,t,r,i),B$(this,r,i),this._lifecycleHooks=N$.resolve(t),t.register(r.Type),r.injectable!==null&&_n(t,r.injectable,new gi("definition.injectable",i)),(e==null||e.hydrate!==!1)&&(this._hydrate(e==null?void 0:e.hostController),this._hydrateChildren())}_hydrate(e){this._lifecycleHooks.hydrating!=null&&this._lifecycleHooks.hydrating.forEach(Dne,this),this._vmHooks._hydrating&&(this.debug&&this.logger.trace("invoking hydrating() hook"),this._vm.hydrating(this));const t=this.definition,i=this._compiledDef=this._rendering.compile(t,this.container),r=i.shadowOptions,s=i.hasSlots,o=i.containerless;let a=this.host,l=this.location,c=!1;if(e!=null?(this.hostController=e,c=!0):(this.hostController=Pd(a,Mne))!==null&&(a=this.host=this.container.root.get(Pr).document.createElement(t.name),c=!0),c&&o&&l==null&&(l=this.location=Qb(a)),Sr(a,ji,this),Sr(a,t.key,this),r!==null||s){if(l!=null)throw _e(501);Sr(this.shadowRoot=a.attachShadow(r??Ine),ji,this),Sr(this.shadowRoot,t.key,this),this.mountTarget=rd}else l!=null?(Sr(l,ji,this),Sr(l,t.key,this),this.mountTarget=sd):this.mountTarget=id;this._vm.$controller=this,this.nodes=this._rendering.createNodes(i),this._lifecycleHooks.hydrated!==void 0&&this._lifecycleHooks.hydrated.forEach(Nne,this),this._vmHooks._hydrated&&(this.debug&&this.logger.trace("invoking hydrated() hook"),this._vm.hydrated(this))}_hydrateChildren(){this._rendering.render(this,this.nodes.findTargets(),this._compiledDef,this.host),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(j$,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateCustomAttribute(){const e=this.definition,t=this._vm;e.watches.length>0&&W$(this,this.container,e,t),B$(this,e,t),t.$controller=this,this._lifecycleHooks=N$.resolve(this.container),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(j$,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateSynthetic(){this._compiledDef=this._rendering.compile(this.viewFactory.def,this.container),this._rendering.render(this,(this.nodes=this._rendering.createNodes(this._compiledDef)).findTargets(),this._compiledDef,void 0)}activate(e,t,i){switch(this.state){case XE:case $g:if(!(t===null||t.isActive))return;this.state=bs;break;case pd:return;case lu:throw _e(502,this.name);default:throw _e(503,this.name,One(this.state))}switch(this.parent=t,this.debug&&!this._fullyNamed&&(this._fullyNamed=!0,(this.logger??(this.logger=this.container.get(Bd).root.scopeTo(this.name))).trace("activate()")),this.vmKind){case Vs:this.scope.parent=i??null;break;case od:this.scope=i??null;break;case Xi:if(i==null)throw _e(504,this.name);this.hasLockedScope||(this.scope=i);break}this.$initiator=e,this._enterActivating();let r;return this.vmKind!==Xi&&this._lifecycleHooks.binding!=null&&(this.debug&&this.logger.trace("lifecycleHooks.binding()"),r=Ri(...this._lifecycleHooks.binding.map(Lne,this))),this._vmHooks._binding&&(this.debug&&this.logger.trace("binding()"),r=Ri(r,this._vm.binding(this.$initiator,this.parent))),fi(r)?(this._ensurePromise(),r.then(()=>{this._isBindingDone=!0,this.state!==bs?this._leaveActivating():this.bind()}).catch(s=>{this._reject(s)}),this.$promise):(this._isBindingDone=!0,this.bind(),this.$promise)}bind(){this.debug&&this.logger.trace("bind()");let e=0,t=0,i;if(this.bindings!==null)for(e=0,t=this.bindings.length;t>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==Xi&&this._lifecycleHooks.bound!=null&&(this.debug&&this.logger.trace("lifecycleHooks.bound()"),i=Ri(...this._lifecycleHooks.bound.map(Hne,this))),this._vmHooks._bound&&(this.debug&&this.logger.trace("bound()"),i=Ri(i,this._vm.bound(this.$initiator,this.parent))),fi(i)){this._ensurePromise(),i.then(()=>{this.isBound=!0,this.state!==bs?this._leaveActivating():this._attach()}).catch(r=>{this._reject(r)});return}this.isBound=!0,this._attach()}_append(...e){switch(this.mountTarget){case id:this.host.append(...e);break;case rd:this.shadowRoot.append(...e);break;case sd:{let t=0;for(;t<e.length;++t)this.location.parentNode.insertBefore(e[t],this.location);break}}}_attach(){if(this.debug&&this.logger.trace("attach()"),this.hostController!==null)switch(this.mountTarget){case id:case rd:this.hostController._append(this.host);break;case sd:this.hostController._append(this.location.$start,this.location);break}switch(this.mountTarget){case id:this.nodes.appendTo(this.host,this.definition!=null&&this.definition.enhance);break;case rd:{const i=this.container;(i.has(F$,!1)?i.get(F$):i.get(Sne)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case sd:this.nodes.insertBefore(this.location);break}let e=0,t;if(this.vmKind!==Xi&&this._lifecycleHooks.attaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.attaching()"),t=Ri(...this._lifecycleHooks.attaching.map($ne,this))),this._vmHooks._attaching&&(this.debug&&this.logger.trace("attaching()"),t=Ri(t,this._vm.attaching(this.$initiator,this.parent))),fi(t)&&(this._ensurePromise(),this._enterActivating(),t.then(()=>{this._leaveActivating()}).catch(i=>{this._reject(i)})),this.children!==null)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this._leaveActivating()}deactivate(e,t){var o;let i;switch(this.state&~Fg){case pd:this.state=ab;break;case bs:this.state=ab,i=(o=this.$promise)==null?void 0:o.catch(a=>{this.logger.warn("The activation error will be ignored, as the controller is already scheduled for deactivation. The activation was rejected with: %s",a)});break;case XE:case $g:case lu:case $g|lu:return;default:throw _e(505,this.name,this.state)}this.debug&&this.logger.trace("deactivate()"),this.$initiator=e,e===this&&this._enterDetaching();let r=0,s;if(this.children!==null)for(r=0;r<this.children.length;++r)this.children[r].deactivate(e,this);return tt(i,()=>{if(this.isBound&&(this.vmKind!==Xi&&this._lifecycleHooks.detaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.detaching()"),s=Ri(...this._lifecycleHooks.detaching.map(Bne,this))),this._vmHooks._detaching&&(this.debug&&this.logger.trace("detaching()"),s=Ri(s,this._vm.detaching(this.$initiator,this.parent)))),fi(s)&&(this._ensurePromise(),e._enterDetaching(),s.then(()=>{e._leaveDetaching()}).catch(a=>{e._reject(a)})),e.head===null?e.head=this:e.tail.next=this,e.tail=this,e===this)return this._leaveDetaching(),this.$promise})}removeNodes(){switch(this.vmKind){case Vs:case Xi:this.nodes.remove(),this.nodes.unlink()}if(this.hostController!==null)switch(this.mountTarget){case id:case rd:this.host.remove();break;case sd:this.location.$start.remove(),this.location.remove();break}}unbind(){this.debug&&this.logger.trace("unbind()");let e=0;if(this.bindings!==null)for(;e<this.bindings.length;++e)this.bindings[e].unbind();switch(this.parent=null,this.vmKind){case od:this.scope=null;break;case Xi:this.hasLockedScope||(this.scope=null),(this.state&Fg)===Fg&&!this.viewFactory.tryReturnToCache(this)&&this.$initiator===this&&this.dispose();break;case Vs:this.scope.parent=null;break}this.state=$g,this.$initiator=null,this._resolve()}_ensurePromise(){this.$promise===void 0&&(this.$promise=new Promise((e,t)=>{this.$resolve=e,this.$reject=t}),this.$initiator!==this&&this.parent._ensurePromise())}_resolve(){this.$promise!==void 0&&(ZE=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,ZE(),ZE=void 0)}_reject(e){this.$promise!==void 0&&(QE=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,QE(e),QE=void 0),this.$initiator!==this&&this.parent._reject(e)}_enterActivating(){++this._activatingStack,this.$initiator!==this&&this.parent._enterActivating()}_leaveActivating(){if(this.state!==bs){--this._activatingStack,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating();return}if(--this._activatingStack===0){if(this.vmKind!==Xi&&this._lifecycleHooks.attached!=null&&(dh=Ri(...this._lifecycleHooks.attached.map(Fne,this))),this._vmHooks._attached&&(this.debug&&this.logger.trace("attached()"),dh=Ri(dh,this._vm.attached(this.$initiator))),fi(dh)){this._ensurePromise(),dh.then(()=>{this.state=pd,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating()}).catch(e=>{this._reject(e)}),dh=void 0;return}dh=void 0,this.state=pd,this._resolve()}this.$initiator!==this&&this.parent._leaveActivating()}_enterDetaching(){++this._detachingStack}_leaveDetaching(){if(--this._detachingStack===0){this.debug&&this.logger.trace("detach()"),this._enterUnbinding(),this.removeNodes();let e=this.$initiator.head,t;for(;e!==null;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e._isBindingDone&&(e.vmKind!==Xi&&e._lifecycleHooks.unbinding!=null&&(t=Ri(...e._lifecycleHooks.unbinding.map(Vne,e))),e._vmHooks._unbinding&&(e.debug&&e.logger.trace("unbinding()"),t=Ri(t,e.viewModel.unbinding(e.$initiator,e.parent)))),fi(t)&&(this._ensurePromise(),this._enterUnbinding(),t.then(()=>{this._leaveUnbinding()}).catch(i=>{this._reject(i)})),t=void 0,e=e.next;this._leaveUnbinding()}}_enterUnbinding(){++this._unbindingStack}_leaveUnbinding(){if(--this._unbindingStack===0){this.debug&&this.logger.trace("unbind()");let e=this.$initiator.head,t=null;for(;e!==null;)e!==this&&(e._isBindingDone=!1,e.isBound=!1,e.unbind()),t=e.next,e.next=null,e=t;this.head=this.tail=null,this._isBindingDone=!1,this.isBound=!1,this.unbind()}}addBinding(e){this.bindings===null?this.bindings=[e]:this.bindings[this.bindings.length]=e}addChild(e){this.children===null?this.children=[e]:this.children[this.children.length]=e}is(e){switch(this.vmKind){case od:case Vs:return this.definition.name===e;case Xi:return this.viewFactory.name===e}}lockScope(e){this.scope=e,this.hasLockedScope=!0}setHost(e){return this.vmKind===Vs&&(Sr(e,ji,this),Sr(e,this.definition.key,this)),this.host=e,this.mountTarget=id,this}setShadowRoot(e){return this.vmKind===Vs&&(Sr(e,ji,this),Sr(e,this.definition.key,this)),this.shadowRoot=e,this.mountTarget=rd,this}setLocation(e){return this.vmKind===Vs&&(Sr(e,ji,this),Sr(e,this.definition.key,this)),this.location=e,this.mountTarget=sd,this}release(){this.state|=Fg}dispose(){this.debug&&this.logger.trace("dispose()"),(this.state&lu)!==lu&&(this.state|=lu,this._vmHooks._dispose&&this._vm.dispose(),this.children!==null&&(this.children.forEach(kne),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,this._vm!==null&&(zc.delete(this._vm),this._vm=null),this._vm=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(e){if(e(this)===!0||this._vmHooks._accept&&this._vm.accept(e)===!0)return!0;if(this.children!==null){const{children:t}=this;for(let i=0,r=t.length;i<r;++i)if(t[i].accept(e)===!0)return!0}}}const zc=new WeakMap,V5=0,id=1,rd=2,sd=3,Tne=Dc({none:V5,host:id,shadowRoot:rd,location:sd}),Mne={optional:!0},Ane=ZZ(Kz);function B$(n,e,t){var c,u;const i=e.bindables,r=a5(i),s=r.length,o=n.container.get($p),a="propertiesChanged"in t;if(s===0)return;const l=a?(()=>{let h={},d,f=0;const g=Promise.resolve(),p=()=>{d==null&&(d=g.then(()=>{var b;const m=h;h={},f=0,d=void 0,n.isBound&&((b=t.propertiesChanged)==null||b.call(t,m),f>0&&p())}))};return(m,b,y)=>{h[m]={newValue:b,oldValue:y},f++,p()}})():Za;for(let h=0;h<s;++h){const d=r[h],f=i[d],g=f.callback,p=o.getObserver(t,d);if(f.set!==Za&&((c=p.useCoercer)==null?void 0:c.call(p,f.set,n.coercion))!==!0)throw _e(507,d);if(t[g]!=null||t.propertyChanged!=null||a){const m=(b,y)=>{var w,R;n.isBound&&((w=t[g])==null||w.call(t,b,y),(R=t.propertyChanged)==null||R.call(t,d,b,y),l(d,b,y))};if(((u=p.useCallback)==null?void 0:u.call(p,m))!==!0)throw _e(508,d)}}}const V$=new Map,Pne=n=>{let e=V$.get(n);return e==null&&(e=new eb(n,0),V$.set(n,e)),e};function W$(n,e,t,i){const r=e.get($p),s=e.get(Dp),o=t.watches,a=n.vmKind===Vs?n.scope:pi.create(i,null,!0),l=o.length;let c,u,h,d=0;for(;l>d;++d){if({expression:c,callback:u}=o[d],u=$t(u)?u:Reflect.get(i,u),!$t(u))throw _e(506,u);$t(c)?n.addBinding(new B5(i,r,c,u,!0)):(h=Ct(c)?s.parse(c,rl):Pne(c),n.addBinding(new BA(a,e,r,h,u)))}}class Hg{constructor(e){this._define="define"in e,this._hydrating="hydrating"in e,this._hydrated="hydrated"in e,this._created="created"in e,this._binding="binding"in e,this._bound="bound"in e,this._attaching="attaching"in e,this._attached="attached"in e,this._detaching="detaching"in e,this._unbinding="unbinding"in e,this._dispose="dispose"in e,this._accept="accept"in e}}Hg.none=new Hg({});const Ine={mode:"open"},Vs="customElement",od="customAttribute",Xi="synthetic",XE=0,bs=1,pd=2,ab=4,$g=8,Fg=16,lu=32;function One(n){const e=[];return(n&bs)===bs&&e.push("activating"),(n&pd)===pd&&e.push("activated"),(n&ab)===ab&&e.push("deactivating"),(n&$g)===$g&&e.push("deactivated"),(n&Fg)===Fg&&e.push("released"),(n&lu)===lu&&e.push("disposed"),e.length===0?"none":e.join("|")}const QR=pn("IController"),Kd=pn("IHydrationContext");class W5{constructor(e,t,i){this.instruction=t,this.parent=i,this.controller=e}}function kne(n){n.dispose()}function j$(n){n.instance.created(this._vm,this)}function Dne(n){n.instance.hydrating(this._vm,this)}function Nne(n){n.instance.hydrated(this._vm,this)}function Lne(n){return n.instance.binding(this._vm,this.$initiator,this.parent)}function Hne(n){return n.instance.bound(this._vm,this.$initiator,this.parent)}function $ne(n){return n.instance.attaching(this._vm,this.$initiator,this.parent)}function Fne(n){return n.instance.attached(this._vm,this.$initiator)}function Bne(n){return n.instance.detaching(this._vm,this.$initiator,this.parent)}function Vne(n){return n.instance.unbinding(this._vm,this.$initiator,this.parent)}let ZE,QE,dh;class Wne{}function Bg(n,e){var t;return((t=n.$au)==null?void 0:t[e])??null}function Sr(n,e,t){(n.$au??(n.$au=new Wne))[e]=t}const JR=pn("INode"),jne=pn("IEventTarget",n=>n.cachedCallback(e=>e.has(o_,!0)?e.get(o_).host:e.get(Pr).document)),Or=pn("IRenderLocation"),n_=pn("ICssClassMapping"),i_=new WeakMap;function r_(n){if(i_.has(n))return i_.get(n);let e=0,t=n.nextSibling;for(;t!==null;){if(t.nodeType===8)switch(t.textContent){case"au-start":++e;break;case"au-end":if(e--===0)return t}t=t.nextSibling}if(n.parentNode===null&&n.nodeType===11){const i=Pd(n,{optional:!0});if(i==null)return null;if(i.mountTarget===Tne.shadowRoot)return r_(i.host)}return n.parentNode}function zne(n,e){if(n.platform!==void 0&&!(n instanceof n.platform.Node)){const t=n.childNodes;for(let i=0,r=t.length;i<r;++i)i_.set(t[i],e)}else i_.set(n,e)}function Qb(n){if(j5(n))return n;const e=n.ownerDocument.createComment("au-end"),t=e.$start=n.ownerDocument.createComment("au-start"),i=n.parentNode;return i!==null&&(i.replaceChild(e,n),i.insertBefore(t,e)),e}function j5(n){return n.textContent==="au-end"}class JE{get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}constructor(e,t){this.platform=e,this.next=void 0,this._isMounted=!1,this._isLinked=!1,this.ref=null;const i=(this.f=t).querySelectorAll("au-m");let r=0,s=i.length,o=this.t=Array(s),a,l;for(;s>r;)l=i[r],a=l.nextSibling,l.remove(),a.nodeType===8&&(l=a,(a=a.nextSibling).$start=l),o[r]=a,++r;const c=t.childNodes,u=this.childNodes=Array(s=c.length);for(r=0;s>r;)u[r]=c[r],++r;this._firstChild=t.firstChild,this._lastChild=t.lastChild}findTargets(){return this.t}insertBefore(e){if(this._isLinked&&this.ref)this.addToLinked();else{const t=e.parentNode;if(this._isMounted){let i=this._firstChild,r;const s=this._lastChild;for(;i!=null&&(r=i.nextSibling,t.insertBefore(i,e),i!==s);)i=r}else this._isMounted=!0,e.parentNode.insertBefore(this.f,e)}}appendTo(e,t=!1){if(this._isMounted){let i=this._firstChild,r;const s=this._lastChild;for(;i!=null&&(r=i.nextSibling,e.appendChild(i),i!==s);)i=r}else this._isMounted=!0,t||e.appendChild(this.f)}remove(){if(this._isMounted){this._isMounted=!1;const e=this.f,t=this._lastChild;let i,r=this._firstChild;for(;r!==null&&(i=r.nextSibling,e.appendChild(r),r!==t);)r=i}}addToLinked(){const e=this.ref,t=e.parentNode;if(this._isMounted){let i=this._firstChild,r;const s=this._lastChild;for(;i!=null&&(r=i.nextSibling,t.insertBefore(i,e),i!==s);)i=r}else this._isMounted=!0,t.insertBefore(this.f,e)}unlink(){this._isLinked=!1,this.next=void 0,this.ref=void 0}link(e){this._isLinked=!0,j5(e)?this.ref=e:(this.next=e,this._obtainRefNode())}_obtainRefNode(){this.next!==void 0?this.ref=this.next.firstChild:this.ref=void 0}}const e1=(n,e,t=n.get(Pr))=>(_n(n,t.HTMLElement,_n(n,t.Element,_n(n,JR,new gi("ElementResolver",e)))),n);function mf(n){return function(e,t){return t.addInitializer(function(){z5(n,this)}),e}}const ex=new WeakMap;class Qr{get type(){return xte}constructor(e,t,i,r,s,o,a,l,c,u,h,d,f,g,p,m,b,y,w){this.Type=e,this.name=t,this.aliases=i,this.key=r,this.capture=s,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=u,this.surrogates=h,this.bindables=d,this.containerless=f,this.shadowOptions=g,this.hasSlots=p,this.enhance=m,this.watches=b,this.strict=y,this.processContent=w}static create(e,t=null){if(t===null){const r=e;if(Ct(r))throw _e(761,e);const s=Co("name",r,s_);$t(r.Type)?t=r.Type:t=G5(M6(s));for(const o of Object.values(cs.from(r.bindables)))cs._add(o,t);return new Qr(t,s,di(r.aliases),Co("key",r,()=>Tg(s)),Ps("capture",r,t,Os),Co("template",r,Is),di(r.instructions),di(is(t,"dependencies"),r.dependencies),Co("injectable",r,Is),Co("needsCompile",r,nx),di(r.surrogates),cs.from(is(t,"bindables"),r.bindables),Ps("containerless",r,t,Os),Co("shadowOptions",r,Is),Co("hasSlots",r,Os),Co("enhance",r,Os),Co("watches",r,Gne),Co("strict",r,tx),yo("processContent",t,Is))}if(Ct(e))return new Qr(t,e,di(is(t,"aliases"),t.aliases),Tg(e),yo("capture",t,Os),yo("template",t,Is),di(is(t,"instructions"),t.instructions),di(is(t,"dependencies"),t.dependencies),yo("injectable",t,Is),yo("needsCompile",t,nx),di(is(t,"surrogates"),t.surrogates),cs.from(...cs.getAll(t),is(t,"bindables"),t.bindables),yo("containerless",t,Os),yo("shadowOptions",t,Is),yo("hasSlots",t,Os),yo("enhance",t,Os),di(HA.getDefinitions(t),t.watches),yo("strict",t,tx),yo("processContent",t,Is));const i=Co("name",e,s_);for(const r of Object.values(cs.from(e.bindables)))cs._add(r,t);return new Qr(t,i,di(is(t,"aliases"),e.aliases,t.aliases),Tg(i),Ps("capture",e,t,Os),Ps("template",e,t,Is),di(is(t,"instructions"),e.instructions,t.instructions),di(is(t,"dependencies"),e.dependencies,t.dependencies),Ps("injectable",e,t,Is),Ps("needsCompile",e,t,nx),di(is(t,"surrogates"),e.surrogates,t.surrogates),cs.from(...cs.getAll(t),is(t,"bindables"),t.bindables,e.bindables),Ps("containerless",e,t,Os),Ps("shadowOptions",e,t,Is),Ps("hasSlots",e,t,Os),Ps("enhance",e,t,Os),di(e.watches,HA.getDefinitions(t),t.watches),Ps("strict",e,t,tx),Ps("processContent",e,t,Is))}static getOrCreate(e){if(e instanceof Qr)return e;if(ex.has(e))return ex.get(e);const t=Qr.create(e);return ex.set(e,t),ea(t,t.Type,ji),t}register(e,t){const i=this.Type,r=typeof t=="string"?Tg(t):this.key,s=this.aliases;if(e.has(r,!1)){console.warn(_e(153,this.name));return}e.register(e.has(i,!1)?null:pl(i,i),Bu(i,r),...s.map(o=>Bu(i,Tg(o))))}toString(){return`au:ce:${this.name}`}}const Une={name:void 0,searchParents:!1,optional:!1},Is=()=>null,tx=()=>{},Os=()=>!1,nx=()=>!0,Gne=()=>mt,qd="custom-element",ji=df(qd),Tg=n=>`${ji}:${n}`,s_=(n=>()=>`unnamed-${++n}`)(0),Yne=(n,e,t)=>{ea(t,n,kc(e))},z5=(n,e)=>{const t=Qr.create(n,e),i=t.Type;return ea(t,i,ji,Ya),i},Kne=n=>{var e;return $t(n)&&(jR(ji,n)||((e=n.$au)==null?void 0:e.type)===qd)},Pd=(n,e=Une)=>{if(e.name===void 0&&e.searchParents!==!0){const i=Bg(n,ji);if(i===null){if(e.optional===!0)return null;throw _e(762,n)}return i}if(e.name!==void 0){if(e.searchParents!==!0){const s=Bg(n,ji);if(s===null)throw _e(763,n);return s.is(e.name)?s:void 0}let i=n,r=!1;for(;i!==null;){const s=Bg(i,ji);if(s!==null&&(r=!0,s.is(e.name)))return s;i=r_(i)}if(r)return;throw _e(764,n)}let t=n;for(;t!==null;){const i=Bg(t,ji);if(i!==null)return i;t=r_(t)}throw _e(765,n)},is=(n,e)=>ur(kc(e),n),U5=n=>{const e=ur(ji,n)??Vu(n,qd,Qr.create);if(e==null)throw _e(760,n);return e},qne=()=>{const n={$isInterface:!1,register(){return{$isResolver:!0,resolve(e,t){return t.has(n,!0)?t.get(n):null}}}};return n},G5=function(){const n={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(t,i=e){const r=class{};return n.value=t,l5(r,"name",n),i!==e&&o5(r.prototype,i),r}}(),Ar=Dc({name:ji,keyFrom:Tg,isType:Kne,for:Pd,define:z5,getDefinition:U5,annotate:Yne,getAnnotation:is,generateName:s_,createInjectable:qne,generateType:G5,find(n,e){const t=n.find(qd,e);return t==null?null:ur(ji,t)??Vu(t,qd,Qr.create)??null}}),o_=pn("IAppRoot");class z${get controller(){return this._controller}constructor(e,t,i,r=!1){this.config=e,this.container=t,this._hydratePromise=void 0,this._useOwnAppTasks=r;const s=this.host=e.host;i.prepare(this),_n(t,jne,new gi("IEventTarget",s)),e1(t,s,this.platform=this._createPlatform(t,s)),this._hydratePromise=tt(this._runAppTasks("creating"),()=>{e.allowActionlessForm||s.addEventListener("submit",d=>{const f=d.target,g=!f.getAttribute("action");f.tagName==="FORM"&&g&&d.preventDefault()},!1);const o=r?t:t.createChild(),a=e.component;let l;$t(a)?l=o.invoke(a):l=e.component;const c={hydrate:!1,projections:null},u=r?Qr.create({name:s_(),template:this.host,enhance:!0,strict:e.strictBinding}):void 0,h=this._controller=ys.$el(o,l,s,c,u);return h._hydrateCustomElement(c),tt(this._runAppTasks("hydrating"),()=>(h._hydrate(),tt(this._runAppTasks("hydrated"),()=>{h._hydrateChildren(),this._hydratePromise=void 0})))})}activate(){return tt(this._hydratePromise,()=>tt(this._runAppTasks("activating"),()=>tt(this._controller.activate(this._controller,null,void 0),()=>this._runAppTasks("activated"))))}deactivate(){return tt(this._runAppTasks("deactivating"),()=>tt(this._controller.deactivate(this._controller,null),()=>this._runAppTasks("deactivated")))}_runAppTasks(e){const t=this.container,i=this._useOwnAppTasks&&!t.has(D$,!1)?[]:t.getAll(D$);return Ri(...i.reduce((r,s)=>(s.slot===e&&r.push(s.run()),r),[]))}_createPlatform(e,t){let i;if(e.has(Pr,!1))i=e.get(Pr);else{if(t.ownerDocument.defaultView===null)throw _e(769);i=new Cu(t.ownerDocument.defaultView),e.register(h5(Pr,i))}return i}dispose(){var e;(e=this._controller)==null||e.dispose()}}const U$=pn("IAurelia");let Xne=class VA{get isRunning(){return this._isRunning}get isStarting(){return this._isStarting}get isStopping(){return this._isStopping}get root(){if(this._root==null){if(this.next==null)throw _e(767);return this.next}return this._root}constructor(e=Zu.createContainer()){if(this.container=e,this._isRunning=!1,this._isStarting=!1,this._isStopping=!1,this._root=void 0,this.next=void 0,this._startPromise=void 0,this._stopPromise=void 0,e.has(U$,!0)||e.has(VA,!0))throw _e(768);_n(e,U$,new gi("IAurelia",this)),_n(e,VA,new gi("Aurelia",this)),_n(e,o_,this._rootProvider=new gi("IAppRoot"))}register(...e){return this.container.register(...e),this}app(e){return this.next=new z$(e,this.container,this._rootProvider),this}enhance(e){const t=e.container??this.container.createChild(),i=_n(t,o_,new gi("IAppRoot")),r=new z$({host:e.host,component:e.component},t,i,!0);return tt(r.activate(),()=>r)}async waitForIdle(){const e=this.root.platform;await e.domQueue.yield(),await e.taskQueue.yield()}start(e=this.next){if(e==null)throw _e(770);return fi(this._startPromise)?this._startPromise:this._startPromise=tt(this.stop(),()=>(Reflect.set(e.host,"$aurelia",this),this._rootProvider.prepare(this._root=e),this._isStarting=!0,tt(e.activate(),()=>{this._isRunning=!0,this._isStarting=!1,this._startPromise=void 0,this._dispatchEvent(e,"au-started",e.host)})))}stop(e=!1){if(fi(this._stopPromise))return this._stopPromise;if(this._isRunning===!0){const t=this._root;return this._isRunning=!1,this._isStopping=!0,this._stopPromise=tt(t.deactivate(),()=>{Reflect.deleteProperty(t.host,"$aurelia"),e&&t.dispose(),this._root=void 0,this._rootProvider.dispose(),this._isStopping=!1,this._dispatchEvent(t,"au-stopped",t.host)})}}dispose(){if(this._isRunning||this._isStopping)throw _e(771);this.container.dispose()}_dispatchEvent(e,t,i){const r=new e.platform.window.CustomEvent(t,{detail:this,bubbles:!0,cancelable:!0});i.dispatchEvent(r)}};const Y5=pn("ISVGAnalyzer",n=>n.singleton(Zne));class Zne{isStandardSvgAttribute(e,t){return!1}}class K5{constructor(){this.fns=[],this._tagAttrMap=on(),this._globalAttrMap=on(),this.svg=pe(Y5),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(e){var o;let t,i,r,s;for(r in e){t=e[r],i=(o=this._tagAttrMap)[r]??(o[r]=on());for(s in t){if(i[s]!==void 0)throw G$(s,r);i[s]=t[s]}}}useGlobalMapping(e){const t=this._globalAttrMap;for(const i in e){if(t[i]!==void 0)throw G$(i,"*");t[i]=e[i]}}useTwoWay(e){this.fns.push(e)}isTwoWay(e,t){return Qne(e,t)||this.fns.length>0&&this.fns.some(i=>i(e,t))}map(e,t){var i;return((i=this._tagAttrMap[e.nodeName])==null?void 0:i[t])??this._globalAttrMap[t]??(DA(e,t,this.svg)?t:null)}}K5.register=kw(oz);function Qne(n,e){switch(n.nodeName){case"INPUT":switch(n.type){case"checkbox":case"radio":return e==="checked";default:return e==="value"||e==="files"||e==="value-as-number"||e==="value-as-date"}case"TEXTAREA":case"SELECT":return e==="value";default:switch(e){case"textcontent":case"innerhtml":return n.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}function G$(n,e){return _e(719,n,e)}const Jne={register(n){n.register(Uz,K5,q5)}};class eie{constructor(e,t,i){this.attrs=e,this.bindables=t,this.primary=i}}class q5{constructor(){this._resourceCache=new WeakMap,this._bindableCache=new WeakMap}el(e,t){let i=this._resourceCache.get(e);return i==null&&this._resourceCache.set(e,i=new Y$),t in i._element?i._element[t]:i._element[t]=Ar.find(e,t)}attr(e,t){let i=this._resourceCache.get(e);return i==null&&this._resourceCache.set(e,i=new Y$),t in i._attr?i._attr[t]:i._attr[t]=LO.find(e,t)}bindables(e){let t=this._bindableCache.get(e);if(t==null){const i=e.bindables,r=on();let s,o,a=!1,l,c;for(o in i){if(s=i[o],c=s.attribute,s.primary===!0){if(a)throw _e(714,e);a=!0,l=s}else!a&&l==null&&(l=s);r[c]=ac.create(o,s)}s==null&&e.type==="custom-attribute"&&(l=r.value=ac.create("value",{mode:e.defaultBindingMode??IO})),this._bindableCache.set(e,t=new eie(r,i,l??null))}return t}}q5.register=kw(Gz);class Y${constructor(){this._element=on(),this._attr=on()}}const ix=on();class Jb{static forNs(e){return ix[e]??(ix[e]=new Jb(e))}constructor(e){this.ns=e,this.type=th|gl}getValue(e,t){return e.getAttributeNS(this.ns,t)}setValue(e,t,i){e==null?t.removeAttributeNS(this.ns,i):t.setAttributeNS(this.ns,i,e)}}qR(Jb);class X5{constructor(){this.type=th|gl}getValue(e,t){return e.getAttribute(t)}setValue(e,t,i){e==null?t.removeAttribute(i):t.setAttribute(i,e)}}qR(X5);const aS=new X5;class Id{static _getSelectedOptions(e){const t=[];if(e.length===0)return t;const i=e.length;let r=0,s;for(;i>r;)s=e[r],s.selected&&(t[t.length]=bd.call(s,"model")?s.model:s.value),++r;return t}static _defaultMatcher(e,t){return e===t}constructor(e,t,i,r){this.type=th|kO|gl,this._value=void 0,this._oldValue=void 0,this._hasChanges=!1,this._arrayObserver=void 0,this._nodeObserver=void 0,this._observing=!1,this._listened=!1,this._el=e,this._observerLocator=r,this._config=i}getValue(){return this._observing?this._value:this._el.multiple?Id._getSelectedOptions(this._el.options):this._el.value}setValue(e){this._oldValue=this._value,this._value=e,this._hasChanges=e!==this._oldValue,this._observeArray(e instanceof Array?e:null),this._flushChanges()}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const e=this._value,t=this._el,i=ai(e),r=t.matcher??Id._defaultMatcher,s=t.options;let o=s.length;for(;o-- >0;){const a=s[o],l=bd.call(a,"model")?a.model:a.value;if(i){a.selected=e.findIndex(c=>!!r(l,c))!==-1;continue}a.selected=!!r(l,e)}}syncValue(){const e=this._el,t=e.options,i=t.length,r=this._value;let s=0;if(e.multiple){if(!(r instanceof Array))return!0;let l;const c=e.matcher||Id._defaultMatcher,u=[];for(;s<i;)l=t[s],l.selected&&u.push(bd.call(l,"model")?l.model:l.value),++s;let h;for(s=0;s<r.length;)h=r[s],u.findIndex(d=>!!c(h,d))===-1?r.splice(s,1):++s;for(s=0;s<u.length;)h=u[s],r.findIndex(d=>!!c(h,d))===-1&&r.push(h),++s;return!1}let o=null,a;for(;s<i;){if(a=t[s],a.selected){o=bd.call(a,"model")?a.model:a.value;break}++s}return this._oldValue=this._value,this._value=o,!0}_start(){(this._nodeObserver=R5(this._el,this._handleNodeChange.bind(this))).observe(this._el,{childList:!0,subtree:!0,characterData:!0}),this._observeArray(this._value instanceof Array?this._value:null),this._observing=!0}_stop(){var e;this._nodeObserver.disconnect(),(e=this._arrayObserver)==null||e.unsubscribe(this),this._nodeObserver=this._arrayObserver=void 0,this._observing=!1}_observeArray(e){var t;if((t=this._arrayObserver)==null||t.unsubscribe(this),this._arrayObserver=void 0,e!=null){if(!this._el.multiple)throw _e(654);(this._arrayObserver=this._observerLocator.getArrayObserver(e)).subscribe(this)}}handleEvent(){this.syncValue()&&this._flush()}_handleNodeChange(e){this.syncOptions(),this.syncValue()&&this._flush()}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}WO(Id),so(Id,null);const tie="--";class Z5{constructor(e){this.obj=e,this.type=th|gl,this._value="",this._oldValue="",this.styles={},this.version=0,this._hasChanges=!1}getValue(){return this.obj.style.cssText}setValue(e){this._value=e,this._hasChanges=e!==this._oldValue,this._flushChanges()}_getStyleTuplesFromString(e){const t=[],i=/url\([^)]+$/;let r=0,s="",o,a,l,c;for(;r<e.length;){if(o=e.indexOf(";",r),o===-1&&(o=e.length),s+=e.substring(r,o),r=o+1,i.test(s)){s+=";";continue}a=s.indexOf(":"),l=s.substring(0,a).trim(),c=s.substring(a+1).trim(),t.push([l,c]),s=""}return t}_getStyleTuplesFromObject(e){let t,i;const r=[];for(i in e)if(t=e[i],t!=null){if(Ct(t)){if(i.startsWith(tie)){r.push([i,t]);continue}r.push([A6(i),t]);continue}r.push(...this._getStyleTuples(t))}return r}_getStyleTuplesFromArray(e){const t=e.length;if(t>0){const i=[];let r=0;for(;t>r;++r)i.push(...this._getStyleTuples(e[r]));return i}return mt}_getStyleTuples(e){return Ct(e)?this._getStyleTuplesFromString(e):e instanceof Array?this._getStyleTuplesFromArray(e):e instanceof Object?this._getStyleTuplesFromObject(e):mt}_flushChanges(){if(this._hasChanges){this._hasChanges=!1;const e=this._value,t=this.styles,i=this._getStyleTuples(e);let r,s=this.version;this._oldValue=e;let o,a,l,c=0;const u=i.length;for(;c<u;++c)o=i[c],a=o[0],l=o[1],this.setProperty(a,l),t[a]=s;if(this.styles=t,this.version+=1,s===0)return;s-=1;for(r in t)!bd.call(t,r)||t[r]!==s||this.obj.style.removeProperty(r)}}setProperty(e,t){let i="";t!=null&&$t(t.indexOf)&&t.includes("!important")&&(i="important",t=t.replace("!important","")),this.obj.style.setProperty(e,t,i)}bind(){this._value=this._oldValue=this.obj.style.cssText}}qR(Z5);class WA{constructor(e,t,i){this.type=th|kO|gl,this._value="",this._oldValue="",this._hasChanges=!1,this._listened=!1,this._el=e,this._key=t,this._config=i}getValue(){return this._value}setValue(e){Jo(e,this._value)||(this._oldValue=this._value,this._value=e,this._hasChanges=!0,this._config.readonly||this._flushChanges())}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this._el[this._key]=this._value??this._config.default,this._flush())}handleEvent(){this._oldValue=this._value,this._value=this._el[this._key],this._oldValue!==this._value&&(this._hasChanges=!1,this._flush())}_start(){this._value=this._oldValue=this._el[this._key]}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}WO(WA),so(WA,null);const K$=(()=>{const n="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",t="http://www.w3.org/2000/xmlns/";return o5(on(),{"xlink:actuate":["actuate",n],"xlink:arcrole":["arcrole",n],"xlink:href":["href",n],"xlink:role":["role",n],"xlink:show":["show",n],"xlink:title":["title",n],"xlink:type":["type",n],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",t],"xmlns:xlink":["xlink",t]})})(),Q5=new Jz;Q5.type=th|gl;class jO{constructor(){this.allowDirtyCheck=!0,this._events=on(),this._globalEvents=on(),this._overrides=on(),this._globalOverrides=on(),this._locator=pe(GZ),this._platform=pe(Pr),this._dirtyChecker=pe(EO),this.svg=pe(Y5);const e=["change","input"],t={events:e,default:""};this.useConfig({INPUT:{value:t,valueAsNumber:{events:e,default:0},checked:{type:jA,events:e},files:{events:e,readonly:!0}},SELECT:{value:{type:Id,events:["change"],default:""}},TEXTAREA:{value:t}});const i={events:["change","input","blur","keyup","paste"],default:""},r={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:r,scrollLeft:r,textContent:i,innerHTML:i}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(e,t){return e instanceof this._platform.Node}useConfig(e,t,i){const r=this._events;let s;if(Ct(e))s=r[e]??(r[e]=on()),s[t]==null?s[t]=i:ky(e,t);else for(const o in e){s=r[o]??(r[o]=on());const a=e[o];for(t in a)s[t]==null?s[t]=a[t]:ky(o,t)}}useConfigGlobal(e,t){const i=this._globalEvents;if(typeof e=="object")for(const r in e)i[r]==null?i[r]=e[r]:ky("*",r);else i[e]==null?i[e]=t:ky("*",e)}getAccessor(e,t,i){if(t in this._globalOverrides||t in(this._overrides[e.tagName]??N6))return this.getObserver(e,t,i);switch(t){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return(t==="popovertarget"||t==="popovertargetaction")&&e.nodeName!=="INPUT"&&e.nodeName!=="BUTTON"&&console.warn(`[aurelia] Popover API are only valid on <input> or <button>. Detected ${t} on <${e.nodeName.toLowerCase()}>`),aS;default:{const r=K$[t];return r!==void 0?Jb.forNs(r[1]):DA(e,t,this.svg)?aS:Q5}}}overrideAccessor(e,t){var r,s;let i;if(Ct(e))i=(r=this._overrides)[e]??(r[e]=on()),i[t]=!0;else for(const o in e)for(const a of e[o])i=(s=this._overrides)[o]??(s[o]=on()),i[a]=!0}overrideAccessorGlobal(...e){for(const t of e)this._globalOverrides[t]=!0}getNodeObserverConfig(e,t){var i;return((i=this._events[e.tagName])==null?void 0:i[t])??this._globalEvents[t]}getNodeObserver(e,t,i){var o;const r=((o=this._events[e.tagName])==null?void 0:o[t])??this._globalEvents[t];let s;return r!=null?(s=new(r.type??WA)(e,t,r,i,this._locator),s.doNotCache||(e5(e)[t]=s),s):null}getObserver(e,t,i){switch(t){case"class":return new XR(e);case"css":case"style":return new Z5(e)}const r=this.getNodeObserver(e,t,i);if(r!=null)return r;const s=K$[t];if(s!==void 0)return Jb.forNs(s[1]);if(DA(e,t,this.svg))return aS;if(t in e.constructor.prototype){if(this.allowDirtyCheck)return this._dirtyChecker.createProperty(e,t);throw _e(652,t)}else return new xO(e,t)}}jO.register=kw(TO);function nie(n,e){if(n instanceof Array)return e.getArrayObserver(n);if(n instanceof Map)return e.getMapObserver(n);if(n instanceof Set)return e.getSetObserver(n)}function ky(n,e){throw _e(653,n,e)}function q$(n,e){return n===e}class jA{constructor(e,t,i,r){this.type=th|kO|gl,this._value=void 0,this._oldValue=void 0,this._collectionObserver=void 0,this._valueObserver=void 0,this._listened=!1,this._el=e,this.oL=r,this._config=i}getValue(){return this._value}setValue(e){const t=this._value;e!==t&&(this._value=e,this._oldValue=t,this._observe(),this._synchronizeElement(),this._flush())}handleCollectionChange(){this._synchronizeElement()}handleChange(e,t){this._synchronizeElement()}_synchronizeElement(){const e=this._value,t=this._el,i=bd.call(t,"model")?t.model:t.value,r=t.type==="radio",s=t.matcher!==void 0?t.matcher:q$;if(r)t.checked=!!s(e,i);else if(e===!0)t.checked=!0;else{let o=!1;if(ai(e))o=e.findIndex(a=>!!s(a,i))!==-1;else if(e instanceof Set){for(const a of e)if(s(a,i)){o=!0;break}}else if(e instanceof Map)for(const a of e){const l=a[0],c=a[1];if(s(l,i)&&c===!0){o=!0;break}}t.checked=o}}handleEvent(){let e=this._oldValue=this._value;const t=this._el,i=bd.call(t,"model")?t.model:t.value,r=t.checked,s=t.matcher!==void 0?t.matcher:q$;if(t.type==="checkbox"){if(ai(e)){const o=e.findIndex(a=>!!s(a,i));r&&o===-1?e.push(i):!r&&o!==-1&&e.splice(o,1);return}else if(e instanceof Set){const o={};let a=o;for(const l of e)if(s(l,i)===!0){a=l;break}r&&a===o?e.add(i):!r&&a!==o&&e.delete(a);return}else if(e instanceof Map){let o;for(const a of e){const l=a[0];if(s(l,i)===!0){o=l;break}}e.set(o,r);return}e=r}else if(r)e=i;else return;this._value=e,this._flush()}_start(){this._observe()}_stop(){var e,t;this._value=this._oldValue=void 0,(e=this._collectionObserver)==null||e.unsubscribe(this),(t=this._valueObserver)==null||t.unsubscribe(this),this._collectionObserver=this._valueObserver=void 0}_flush(){rx=this._oldValue,this._oldValue=this._value,this.subs.notify(this._value,rx),rx=void 0}_observe(){var t,i,r,s,o;const e=this._el;(r=this._valueObserver??(this._valueObserver=((t=e.$observers)==null?void 0:t.model)??((i=e.$observers)==null?void 0:i.value)))==null||r.subscribe(this),(s=this._collectionObserver)==null||s.unsubscribe(this),this._collectionObserver=void 0,e.type==="checkbox"&&((o=this._collectionObserver=nie(this._value,this.oL))==null||o.subscribe(this))}}WO(jA),so(jA,null);let rx;class J5{bind(e,t){if(!(t instanceof Mr))throw _e(9994,t);t.useTargetObserver(aS)}}J5.$au={type:Js,name:"attr"};class e8{bind(e,t){if(!("handleEvent"in t))throw _e(801);t.self=!0}unbind(e,t){t.self=!1}}e8.$au={type:Js,name:"self"};class t8{constructor(){this._observerLocator=pe($p),this._nodeObserverLocator=pe(TO)}bind(e,t,...i){if(!(this._nodeObserverLocator instanceof jO))throw _e(9993);if(i.length===0)throw _e(802);if(!(t instanceof Mr)||!(t.mode&Rc))throw _e(803);const r=this._nodeObserverLocator.getNodeObserverConfig(t.target,t.targetProperty);if(r==null)throw _e(9992,t);const s=this._nodeObserverLocator.getNodeObserver(t.target,t.targetProperty,this._observerLocator);s.useConfig({readonly:r.readonly,default:r.default,events:i}),t.useTargetObserver(s)}}t8.$au={type:Js,name:"updateTrigger"};class a_{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this._wantsDeactivate=!1,this._swapId=0,this._ifFactory=pe(xs),this._location=pe(Or)}attaching(e,t){return this._swap(this.value)}detaching(e,t){return this._wantsDeactivate=!0,tt(this.pending,()=>{var i;this._wantsDeactivate=!1,this.pending=void 0,(i=this.view)==null||i.deactivate(e,this.$controller)})}valueChanged(e,t){if(this.$controller.isActive&&(e=!!e,t=!!t,e!==t))return this._swap(e)}_swap(e){const t=this.view,i=this.$controller,r=this._swapId++,s=()=>!this._wantsDeactivate&&this._swapId===r+1;let o;return tt(this.pending,()=>this.pending=tt(t==null?void 0:t.deactivate(t,i),()=>{var a;if(s()&&(e?o=this.view=this.ifView=this.cache&&this.ifView!=null?this.ifView:this._ifFactory.create():o=this.view=this.elseView=this.cache&&this.elseView!=null?this.elseView:(a=this.elseFactory)==null?void 0:a.create(),o!=null))return o.setLocation(this._location),tt(o.activate(o,i,i.scope),()=>{s()&&(this.pending=void 0)})}))}dispose(){var e,t;(e=this.ifView)==null||e.dispose(),(t=this.elseView)==null||t.dispose(),this.ifView=this.elseView=this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}a_.$au={type:hr,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:n=>n===""||!!n&&n!=="false"}}};class n8{constructor(){this._factory=pe(xs)}link(e,t,i,r){const s=e.children,o=s[s.length-1];if(o instanceof a_)o.elseFactory=this._factory;else if(o.viewModel instanceof a_)o.viewModel.elseFactory=this._factory;else throw _e(810)}}n8.$au={type:"custom-attribute",name:"else",isTemplateController:!0};function iie(n){n.dispose()}const rie=["BindingBehavior","ValueConverter"];class i8{constructor(){this.views=[],this.key=null,this._oldViews=[],this._scopes=[],this._oldScopes=[],this._scopeMap=new Map,this._observer=void 0,this._observingInnerItems=!1,this._reevaluating=!1,this._innerItemsExpression=null,this._normalizedItems=void 0,this._hasDestructuredLocal=!1,this._location=pe(Or),this._parent=pe(QR),this._factory=pe(xs),this._resolver=pe(oie);const t=pe(Lp).props[0].props[0];if(t!==void 0){const{to:i,value:r,command:s}=t;if(i==="key")if(s===null)this.key=r;else if(s==="bind")this.key=pe(Dp).parse(r,rl);else throw _e(775,s);else throw _e(776,i)}}binding(e,t){const i=this._parent.bindings,r=i.length;let s,o,a=0;for(;r>a;++a)if(s=i[a],s.target===this&&s.targetProperty==="items"){o=this.forOf=s.ast,this._forOfBinding=s;let c=o.iterable;for(;c!=null&&rie.includes(c.$kind);)c=c.expression,this._observingInnerItems=!0;this._innerItemsExpression=c;break}this._refreshCollectionObserver();const l=o.declaration;(this._hasDestructuredLocal=l.$kind==="ArrayDestructuring"||l.$kind==="ObjectDestructuring")||(this.local=Nn(l,this.$controller.scope,s,null))}attaching(e,t){return this._normalizeToArray(),this._createScopes(),this._activateAllViews(e,this._normalizedItems??mt)}detaching(e,t){return this._refreshCollectionObserver(),this._deactivateAllViews(e)}unbinding(e,t){this._scopeMap.clear()}itemsChanged(){this.$controller.isActive&&(this._refreshCollectionObserver(),this._normalizeToArray(),this._createScopes(),this._applyIndexMap(void 0))}handleCollectionChange(e,t){const i=this.$controller;if(i.isActive){if(this._observingInnerItems){if(this._reevaluating)return;this._reevaluating=!0,this.items=Nn(this.forOf.iterable,i.scope,this._forOfBinding,null),this._reevaluating=!1;return}this._normalizeToArray(),this._createScopes(),this._applyIndexMap(t)}}_applyIndexMap(e){const t=this.views;this._oldViews=t.slice();const i=t.length,r=this.key,s=r!==null,o=this._oldScopes,a=this._scopes;if(s||e===void 0){const l=this.local,u=this._normalizedItems.length,d=this.forOf.declaration,f=this._forOfBinding,g=this._hasDestructuredLocal;e=zd(u);let p=0;if(i===0)for(;p<u;++p)e[p]=-2;else if(u===0)for(p=0;p<i;++p)e.deletedIndices.push(p),e.deletedItems.push(lS(g,d,o[p],f,l));else if(s){const m=Array(i);for(p=0;p<i;++p)m[p]=n2(g,r,d,o[p],f,l);const b=Array(i);for(p=0;p<u;++p)b[p]=n2(g,r,d,a[p],f,l);for(p=0;p<u;++p)m.includes(b[p])?e[p]=m.indexOf(b[p]):e[p]=-2;for(p=0;p<i;++p)b.includes(m[p])||(e.deletedIndices.push(p),e.deletedItems.push(lS(g,d,o[p],f,l)))}else{for(p=0;p<u;++p)o.includes(a[p])?e[p]=o.indexOf(a[p]):e[p]=-2;for(p=0;p<i;++p)a.includes(o[p])||(e.deletedIndices.push(p),e.deletedItems.push(lS(g,d,o[p],f,l)))}}if(e.deletedIndices.length>0){const l=tt(this._deactivateAndRemoveViewsByKey(e),()=>this._createAndActivateAndSortViewsByKey(e));fi(l)&&l.catch(NA)}else this._createAndActivateAndSortViewsByKey(e)}_refreshCollectionObserver(){var o,a;const e=this.$controller.scope;let t=this._innerItems,i=this._observingInnerItems,r;i&&(t=this._innerItems=Nn(this._innerItemsExpression,e,this._forOfBinding,null)??null,i=this._observingInnerItems=!Jo(this.items,t));const s=this._observer;if(this.$controller.isActive){const l=i?t:this.items;r=this._observer=(a=(o=this._resolver.resolve(l)).getObserver)==null?void 0:a.call(o,l),s!==r&&(s==null||s.unsubscribe(this),r==null||r.subscribe(this))}else s==null||s.unsubscribe(this),this._observer=void 0}_createScopes(){const e=this._scopes;this._oldScopes=e.slice();const t=this._normalizedItems,i=t.length,r=this._scopes=Array(t.length),s=this._scopeMap,o=new Map,a=this.$controller.scope,l=this._forOfBinding,c=this.forOf,u=this.local,h=this._hasDestructuredLocal;for(let d=0;d<i;++d)r[d]=hie(s,o,t[d],c,a,l,u,h);s.clear(),this._scopeMap=o}_normalizeToArray(){const e=this.items;if(ai(e)){this._normalizedItems=e.slice(0);return}const t=[];this._resolver.resolve(e).iterate(e,(i,r)=>{t[r]=i}),this._normalizedItems=t}_activateAllViews(e,t){let i,r,s,o;const{$controller:a,_factory:l,_location:c,_scopes:u}=this,h=t.length,d=this.views=Array(h);for(let f=0;f<h;++f)s=d[f]=l.create().setLocation(c),s.nodes.unlink(),o=u[f],Ny(o.overrideContext,f,h),r=s.activate(e??s,a,o),fi(r)&&(i??(i=[])).push(r);if(i!==void 0)return i.length===1?i[0]:Promise.all(i)}_deactivateAllViews(e){let t,i,r,s=0;const{views:o,$controller:a}=this,l=o.length;for(;l>s;++s)r=o[s],r.release(),i=r.deactivate(e??r,a),fi(i)&&(t??(t=[])).push(i);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_deactivateAndRemoveViewsByKey(e){let t,i,r;const{$controller:s,views:o}=this,a=e.deletedIndices.slice().sort(fie),l=a.length;let c=0;for(;l>c;++c)r=o[a[c]],r.release(),i=r.deactivate(r,s),fi(i)&&(t??(t=[])).push(i);for(c=0;l>c;++c)o.splice(a[c]-c,1);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_createAndActivateAndSortViewsByKey(e){let t,i,r,s=0;const{$controller:o,_factory:a,_location:l,views:c,_scopes:u,_oldViews:h}=this,d=e.length;for(;d>s;++s)e[s]===-2&&(r=a.create(),c.splice(s,0,r));if(c.length!==d)throw _e(814,[c.length,d]);let f=0;for(s=0;s<e.length;++s)(f=e[s])!==-2&&(c[s]=h[f]);const g=sie(e),p=g.length;let m,b=p-1;for(s=d-1;s>=0;--s)r=c[s],m=c[s+1],r.nodes.link((m==null?void 0:m.nodes)??l),e[s]===-2?(r.setLocation(l),Ny(u[s].overrideContext,s,d),i=r.activate(r,o,u[s]),fi(i)&&(t??(t=[])).push(i)):b<0||p===1||s!==g[b]?(Ny(r.scope.overrideContext,s,d),r.nodes.insertBefore(r.location)):(Ny(r.scope.overrideContext,s,d),--b);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}dispose(){this.views.forEach(iie),this.views=void 0}accept(e){const{views:t}=this;if(t!==void 0){for(let i=0,r=t.length;i<r;++i)if(t[i].accept(e)===!0)return!0}}}i8.$au={type:hr,name:"repeat",isTemplateController:!0,bindables:["items"]};let l_=16,El=new Int32Array(l_),Dy=new Int32Array(l_);function sie(n){const e=n.length;e>l_&&(l_=e,El=new Int32Array(e),Dy=new Int32Array(e));let t=0,i=0,r=0,s=0,o=0,a=0,l=0,c=0;for(;s<e;s++)if(i=n[s],i!==-2){if(o=El[t],r=n[o],r!==-2&&r<i){Dy[s]=o,El[++t]=s;continue}for(a=0,l=t;a<l;)c=a+l>>1,r=n[El[c]],r!==-2&&r<i?a=c+1:l=c;r=n[El[a]],(i<r||r===-2)&&(a>0&&(Dy[s]=El[a-1]),El[a]=s)}s=++t;const u=new Int32Array(s);for(i=El[t-1];t-- >0;)u[t]=i,i=Dy[i];for(;s-- >0;)El[s]=0;return u}class X${get $odd(){return!this.$even}get $even(){return this.$index%2===0}get $first(){return this.$index===0}get $middle(){return!this.$first&&!this.$last}get $last(){return this.$index===this.$length-1}constructor(e=0,t=1){this.$index=e,this.$length=t}}const Ny=(n,e,t)=>{n.$index=e,n.$length=t},oie=pn("IRepeatableHandlerResolver",n=>n.singleton(aie));class aie{constructor(){this._handlers=pe(oO(lie))}resolve(e){if(Z$.handles(e))return Z$;if(Q$.handles(e))return Q$;if(J$.handles(e))return J$;if(e2.handles(e))return e2;if(t2.handles(e))return t2;const t=this._handlers.find(i=>i.handles(e));return t!==void 0?t:cie}}const lie=pn("IRepeatableHandler"),Z$={handles:ai,getObserver:MO,iterate(n,e){const t=n.length;let i=0;for(;i<t;++i)e(n[i],i,n)}},Q$={handles:Op,getObserver:MO,iterate(n,e){let t=0,i;for(i of n.keys())e(i,t++,n)}},J$={handles:Iu,getObserver:MO,iterate(n,e){let t=0,i;for(i of n.entries())e(i,t++,n)}},e2={handles:xZ,iterate(n,e){let t=0;for(;t<n;++t)e(t,t,n)}},t2={handles:n=>n==null,iterate(){}},cie={handles(n){return!1},iterate(n,e){throw _e(777,n)}},uie=(n,e,t,i,r,s)=>{n?Zb(e,t,i,s):t.bindingContext[r]=s},lS=(n,e,t,i,r)=>n?Nn(e,t,i,null):t.bindingContext[r],n2=(n,e,t,i,r,s)=>typeof e=="string"?lS(n,t,i,r,s)[e]:Nn(e,i,r,null),hie=(n,e,t,i,r,s,o,a)=>{let l=n.get(t);if(l===void 0?l=die(t,i,r,s,o,a):l instanceof pi?n.delete(t):l.length===1?(l=l[0],n.delete(t)):l=l.shift(),e.has(t)){const c=e.get(t);c instanceof pi?e.set(t,[c,l]):c.push(l)}else e.set(t,l);return uie(a,i.declaration,l,s,o,t),l},die=(n,e,t,i,r,s)=>{if(s){const o=pi.fromParent(t,new _$,new X$);Zb(e.declaration,o,i,n)}return pi.fromParent(t,new _$(r,n),new X$)},fie=(n,e)=>n-e;class r8{constructor(){this.view=pe(xs).create().setLocation(pe(Or))}valueChanged(e,t){const i=this.$controller,r=this.view.bindings;let s,o=0,a=0;if(i.isActive&&r!=null)for(s=pi.fromParent(i.scope,e===void 0?{}:e),a=r.length;a>o;++o)r[o].bind(s)}attaching(e,t){const{$controller:i,value:r}=this,s=pi.fromParent(i.scope,r===void 0?{}:r);return this.view.activate(e,i,s)}detaching(e,t){return this.view.deactivate(e,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}r8.$au={type:hr,name:"with",isTemplateController:!0,bindables:["value"]};class zO{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this._factory=pe(xs),this._location=pe(Or)}link(e,t,i,r){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const i=this.view,r=this.$controller;return this.queue(()=>i.activate(e,r,r.scope)),this.queue(()=>this.swap(e,this.value)),this.promise}detaching(e,t){return this.queue(()=>this.view.deactivate(e,this.$controller)),this.promise}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}valueChanged(e,t){this.$controller.isActive&&this.queue(()=>this.swap(null,this.value))}caseChanged(e){this.queue(()=>this._handleCaseChange(e))}_handleCaseChange(e){const t=e.isMatch(this.value),i=this.activeCases,r=i.length;if(!t)return r>0&&i[0].id===e.id?this._clearActiveCases(null):void 0;if(r>0&&i[0].id<e.id)return;const s=[];let o=e.fallThrough;if(!o)s.push(e);else{const a=this.cases,l=a.indexOf(e);for(let c=l,u=a.length;c<u&&o;c++){const h=a[c];s.push(h),o=h.fallThrough}}return tt(this._clearActiveCases(null,s),()=>(this.activeCases=s,this._activateCases(null)))}swap(e,t){const i=[];let r=!1;for(const o of this.cases)if((r||o.isMatch(t))&&(i.push(o),r=o.fallThrough),i.length>0&&!r)break;const s=this.defaultCase;return i.length===0&&s!==void 0&&i.push(s),tt(this.activeCases.length>0?this._clearActiveCases(e,i):void 0,()=>{if(this.activeCases=i,i.length!==0)return this._activateCases(e)})}_activateCases(e){const t=this.$controller;if(!t.isActive)return;const i=this.activeCases,r=i.length;if(r===0)return;const s=t.scope;return r===1?i[0].activate(e,s):Ri(...i.map(o=>o.activate(e,s)))}_clearActiveCases(e,t=[]){const i=this.activeCases,r=i.length;if(r!==0){if(r===1){const s=i[0];return t.includes(s)?void 0:(i.length=0,s.deactivate(e))}return tt(Ri(...i.reduce((s,o)=>(t.includes(o)||s.push(o.deactivate(e)),s),[])),()=>{i.length=0})}}queue(e){const t=this.promise;let i;i=this.promise=tt(tt(t,e),()=>{this.promise===i&&(this.promise=void 0)})}accept(e){if(this.$controller.accept(e)===!0||this.activeCases.some(t=>t.accept(e)))return!0}}zO.$au={type:hr,name:"switch",isTemplateController:!0,bindables:["value"]};let gie=0;const s8=["value",{name:"fallThrough",mode:WR,set(n){switch(n){case"true":return!0;case"false":return!1;default:return!!n}}}];class UO{constructor(){this.id=++gie,this.fallThrough=!1,this.view=void 0,this._factory=pe(xs),this._locator=pe($p),this._location=pe(Or),this._logger=pe(Bd).scopeTo(`${this.constructor.name}-#${this.id}`)}link(e,t,i,r){const s=e.parent,o=s==null?void 0:s.viewModel;if(o instanceof zO)this.$switch=o,this.linkToSwitch(o);else throw _e(815)}detaching(e,t){return this.deactivate(e)}isMatch(e){this._logger.debug("isMatch()");const t=this.value;return ai(t)?(this._observer===void 0&&(this._observer=this._observeCollection(t)),t.includes(e)):t===e}valueChanged(e,t){var i;ai(e)?((i=this._observer)==null||i.unsubscribe(this),this._observer=this._observeCollection(e)):this._observer!==void 0&&this._observer.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(e,t){let i=this.view;if(i===void 0&&(i=this.view=this._factory.create().setLocation(this._location)),!i.isActive)return i.activate(e??i,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(e??t,this.$controller)}dispose(){var e,t;(e=this._observer)==null||e.unsubscribe(this),(t=this.view)==null||t.dispose(),this.view=void 0}linkToSwitch(e){e.cases.push(this)}_observeCollection(e){const t=this._locator.getArrayObserver(e);return t.subscribe(this),t}accept(e){var t;return this.$controller.accept(e)===!0?!0:(t=this.view)==null?void 0:t.accept(e)}}DO({name:"case",bindables:s8,isTemplateController:!0},UO);class o8 extends UO{linkToSwitch(e){if(e.defaultCase!==void 0)throw _e(816);e.defaultCase=this}}DO({name:"default-case",bindables:s8,isTemplateController:!0},o8);var a8,l8,c8;class GO{constructor(){this.preSettledTask=null,this.postSettledTask=null,this._factory=pe(xs),this._location=pe(Or),this._platform=pe(Pr),this.logger=pe(Bd).scopeTo("promise.resolve")}link(e,t,i,r){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const i=this.view,r=this.$controller;return tt(i.activate(e,r,this.viewScope=pi.fromParent(r.scope,{})),()=>this.swap(e))}valueChanged(e,t){this.$controller.isActive&&this.swap(null)}swap(e){var u,h;const t=this.value;if(!fi(t)){this.logger.warn(`The value '${Gd(t)}' is not a promise. No change will be done.`);return}const i=this._platform.domQueue,r=this.fulfilled,s=this.rejected,o=this.pending,a=this.viewScope;let l;const c=()=>{Ri(l=(this.preSettledTask=i.queueTask(()=>Ri(r==null?void 0:r.deactivate(e),s==null?void 0:s.deactivate(e),o==null?void 0:o.activate(e,a)))).result.catch(d=>{if(!(d instanceof kA))throw d}),t.then(d=>{if(this.value!==t)return;const f=()=>{this.postSettlePromise=(this.postSettledTask=i.queueTask(()=>Ri(o==null?void 0:o.deactivate(e),s==null?void 0:s.deactivate(e),r==null?void 0:r.activate(e,a,d)))).result};this.preSettledTask.status===GE?l.then(f):(this.preSettledTask.cancel(),f())},d=>{if(this.value!==t)return;const f=()=>{this.postSettlePromise=(this.postSettledTask=i.queueTask(()=>Ri(o==null?void 0:o.deactivate(e),r==null?void 0:r.deactivate(e),s==null?void 0:s.activate(e,a,d)))).result};this.preSettledTask.status===GE?l.then(f):(this.preSettledTask.cancel(),f())}))};((u=this.postSettledTask)==null?void 0:u.status)===GE?this.postSettlePromise.then(c):((h=this.postSettledTask)==null||h.cancel(),c())}detaching(e,t){var i,r;return(i=this.preSettledTask)==null||i.cancel(),(r=this.postSettledTask)==null||r.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(e,this.$controller)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}GO.$au={type:hr,name:"promise",isTemplateController:!0,bindables:["value"]};class u8{constructor(){this.view=void 0,this._factory=pe(xs),this._location=pe(Or)}link(e,t,i,r){YO(e).pending=this}activate(e,t){let i=this.view;if(i===void 0&&(i=this.view=this._factory.create().setLocation(this._location)),!i.isActive)return i.activate(i,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}u8.$au={type:hr,name:"pending",isTemplateController:!0,bindables:{value:{mode:ei}}};class h8{constructor(){this.view=void 0,this._factory=pe(xs),this._location=pe(Or)}link(e,t,i,r){YO(e).fulfilled=this}activate(e,t,i){this.value=i;let r=this.view;if(r===void 0&&(r=this.view=this._factory.create().setLocation(this._location)),!r.isActive)return r.activate(r,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}h8.$au={type:hr,name:"then",isTemplateController:!0,bindables:{value:{mode:Rc}}};class d8{constructor(){this.view=void 0,this._factory=pe(xs),this._location=pe(Or)}link(e,t,i,r){YO(e).rejected=this}activate(e,t,i){this.value=i;let r=this.view;if(r===void 0&&(r=this.view=this._factory.create().setLocation(this._location)),!r.isActive)return r.activate(r,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}d8.$au={type:hr,name:"catch",isTemplateController:!0,bindables:{value:{mode:Rc}}};function YO(n){const e=n.parent,t=e==null?void 0:e.viewModel;if(t instanceof GO)return t;throw _e(813)}class zA{"promise.resolve"(e,t){return new Ss(e,t,"promise","bind")}}a8=Symbol.metadata;zA[a8]={[hl]:Qu.create([{pattern:"promise.resolve",symbols:""}],zA)};class UA{then(e,t){return new Ss(e,t,"then","from-view")}}l8=Symbol.metadata;UA[l8]={[hl]:Qu.create([{pattern:"then",symbols:""}],UA)};class GA{catch(e,t){return new Ss(e,t,"catch","from-view")}}c8=Symbol.metadata;GA[c8]={[hl]:Qu.create([{pattern:"catch",symbols:""}],GA)};class f8{constructor(){this._needsApply=!1,this._element=pe(JR),this._platform=pe(Pr)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this._apply():this._needsApply=!0}attached(){this._needsApply&&(this._needsApply=!1,this._apply()),this._element.addEventListener("focus",this),this._element.addEventListener("blur",this)}detaching(){const e=this._element;e.removeEventListener("focus",this),e.removeEventListener("blur",this)}handleEvent(e){e.type==="focus"?this.value=!0:this._isElFocused||(this.value=!1)}_apply(){const e=this._element,t=this._isElFocused,i=this.value;i&&!t?e.focus():!i&&t&&e.blur()}get _isElFocused(){return this._element===this._platform.document.activeElement}}f8.$au={type:hr,name:"focus",bindables:{value:{mode:r5}}};class g8{constructor(){this.position="beforeend",this.strict=!1;const e=pe(xs),t=pe(Or),i=pe(Pr);this._platform=i,this._resolvedTarget=i.document.createElement("div"),(this.view=e.create()).setLocation(this._targetLocation=Gte(i)),zne(this.view.nodes,t)}attaching(e){this.callbackContext==null&&(this.callbackContext=this.$controller.scope.bindingContext);const t=this._resolvedTarget=this._getTarget();return this._moveLocation(t,this.position),this._activating(e,t)}detaching(e){return this._deactivating(e,this._resolvedTarget)}targetChanged(){const{$controller:e}=this;if(!e.isActive)return;const t=this._getTarget();if(this._resolvedTarget===t)return;this._resolvedTarget=t;const i=tt(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));fi(i)&&i.catch(NA)}positionChanged(){const{$controller:e,_resolvedTarget:t}=this;if(!e.isActive)return;const i=tt(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));fi(i)&&i.catch(NA)}_activating(e,t){const{activating:i,callbackContext:r,view:s}=this;return tt(i==null?void 0:i.call(r,t,s),()=>this._activate(e,t))}_activate(e,t){const{$controller:i,view:r}=this;if(e===null)r.nodes.insertBefore(this._targetLocation);else return tt(r.activate(e??r,i,i.scope),()=>this._activated(t));return this._activated(t)}_activated(e){const{activated:t,callbackContext:i,view:r}=this;return t==null?void 0:t.call(i,e,r)}_deactivating(e,t){const{deactivating:i,callbackContext:r,view:s}=this;return tt(i==null?void 0:i.call(r,t,s),()=>this._deactivate(e,t))}_deactivate(e,t){const{$controller:i,view:r}=this;if(e===null)r.nodes.remove();else return tt(r.deactivate(e,i),()=>this._deactivated(t));return this._deactivated(t)}_deactivated(e){const{deactivated:t,callbackContext:i,view:r}=this;return tt(t==null?void 0:t.call(i,e,r),()=>this._removeLocation())}_getTarget(){const e=this._platform,t=e.document;let i=this.target,r=this.renderContext;if(i===""){if(this.strict)throw _e(811);return t.body}if(Ct(i)){let s=t;Ct(r)&&(r=t.querySelector(r)),r instanceof e.Node&&(s=r),i=s.querySelector(i)}if(i instanceof e.Node)return i;if(i==null){if(this.strict)throw _e(812);return t.body}return i}_removeLocation(){this._targetLocation.remove(),this._targetLocation.$start.remove()}_moveLocation(e,t){const i=this._targetLocation,r=i.$start,s=e.parentNode,o=[r,i];switch(t){case"beforeend":Oy(e,null,o);break;case"afterbegin":Oy(e,e.firstChild,o);break;case"beforebegin":Oy(s,e,o);break;case"afterend":Oy(s,e.nextSibling,o);break;default:throw _e(779,t)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}g8.$au={type:hr,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};let pie;class t1{constructor(){var h,d,f,g;this._parentScope=null,this._outerScope=null,this._attached=!1,this.expose=null,this.slotchange=null,this._subs=new Set,this._observer=null;const e=pe(Kd),t=pe(Or),i=pe(Lp),r=pe(pf),s=this.name=i.data.name,o=(h=i.projections)==null?void 0:h[E5],a=(f=(d=e.instruction)==null?void 0:d.projections)==null?void 0:f[s],l=e.controller.container;let c,u;a==null?(u=l.createChild({inheritParentResources:!0}),c=r.getViewFactory(o??pie??(pie=Qr.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),u),this._hasProjection=!1):(u=l.createChild(),u.useResources(e.parent.controller.container),_n(u,Kd,new gi(void 0,e.parent)),c=r.getViewFactory(a,u),this._hasProjection=!0,this._slotwatchers=((g=l.getAll(qte,!1))==null?void 0:g.filter(p=>p.slotName==="*"||p.slotName===s))??mt),this._hasSlotWatcher=(this._slotwatchers??(this._slotwatchers=mt)).length>0,this._hdrContext=e,this.view=c.create().setLocation(this._location=t)}get nodes(){const e=[],t=this._location;let i=t.$start.nextSibling;for(;i!=null&&i!==t;)i.nodeType!==8&&e.push(i),i=i.nextSibling;return e}subscribe(e){this._subs.add(e)}unsubscribe(e){this._subs.delete(e)}binding(e,t){var s;for(this._parentScope=t.scope;t.vmKind==="synthetic"&&((s=t.parent)==null?void 0:s.viewModel)instanceof t1;)t=t.parent.parent;const i=t.scope.bindingContext;let r;this._hasProjection&&(r=this._hdrContext.controller.scope.parent,(this._outerScope=pi.fromParent(r,r.bindingContext)).overrideContext.$host=this.expose??i)}attaching(e,t){return tt(this.view.activate(e,this.$controller,this._hasProjection?this._outerScope:this._parentScope),()=>{this._hasSlotWatcher&&(this._slotwatchers.forEach(i=>i.watch(this)),this._observe(),this._notifySlotChange(),this._attached=!0)})}detaching(e,t){return this._attached=!1,this._unobserve(),this._slotwatchers.forEach(i=>i.unwatch(this)),this.view.deactivate(e,this.$controller)}exposeChanged(e){this._hasProjection&&this._outerScope!=null&&(this._outerScope.overrideContext.$host=e)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}_observe(){if(this._observer!=null)return;const e=this._location,t=e.parentElement;t!=null&&(this._observer=R5(t,i=>{mie(e,i)&&this._notifySlotChange()})).observe(t,{childList:!0})}_unobserve(){var e;(e=this._observer)==null||e.disconnect(),this._observer=null}_notifySlotChange(){var r;const e=this.nodes,t=new Set(this._subs);let i;this._attached&&((r=this.slotchange)==null||r.call(void 0,this.name,e));for(i of t)i.handleSlotChange(this,e)}}t1.$au={type:qd,name:"au-slot",template:null,containerless:!0,processContent(n,e,t){t.name=n.getAttribute("name")??E5;let i=n.firstChild,r=null;for(;i!==null;)r=i.nextSibling,Yte(i)&&i.hasAttribute(Kte)&&(console.warn("[DEV:aurelia] detected [au-slot] attribute on a child node",`of an <au-slot> element: "<${i.nodeName} au-slot>".`,"This element will be ignored and removed"),n.removeChild(i)),i=r},bindables:["expose","slotchange"]};const Ly=(n,e)=>n.compareDocumentPosition(e),mie=(n,e)=>{for(const{addedNodes:t,removedNodes:i,nextSibling:r}of e){let s=0,o=t.length,a;for(;s<o;++s)if(a=t[s],Ly(n.$start,a)===4&&Ly(n,a)===2)return!0;if(i.length>0&&r!=null&&Ly(n.$start,r)===4&&Ly(n,r)===2)return!0}};class p8{constructor(){this.scopeBehavior="auto",this._composition=void 0,this.tag=null,this._container=pe(Dw),this.parent=pe(QR),this._host=pe(JR),this._location=pe(Or),this._platform=pe(Pr),this._rendering=pe(pf),this._instruction=pe(Lp),this._contextFactory=pe(YZ(bie)),this._compiler=pe(HR),this._hydrationContext=pe(Kd),this._exprParser=pe(Dp),this._observerLocator=pe($p)}get composing(){return this._composing}get composition(){return this._composition}attaching(e,t){return this._composing=tt(this.queue(new i2(this.template,this.component,this.model,void 0),e),i=>{this._contextFactory._isCurrent(i)&&(this._composing=void 0)})}detaching(e){const t=this._composition,i=this._composing;return this._contextFactory.invalidate(),this._composition=this._composing=void 0,tt(i,()=>t==null?void 0:t.deactivate(e))}propertyChanged(e){var t;if(!(e==="composing"||e==="composition")){if(e==="model"&&this._composition!=null){this._composition.update(this.model);return}if(e==="tag"&&((t=this._composition)==null?void 0:t.controller.vmKind)===Vs){console.warn("[DEV:aurelia] Changing tag name of a custom element composition is ignored.");return}this._composing=tt(this._composing,()=>tt(this.queue(new i2(this.template,this.component,this.model,e),void 0),i=>{this._contextFactory._isCurrent(i)&&(this._composing=void 0)}))}}queue(e,t){const i=this._contextFactory,r=this._composition;return tt(i.create(e),s=>i._isCurrent(s)?tt(this.compose(s),o=>i._isCurrent(s)?tt(o.activate(t),()=>i._isCurrent(s)?(this._composition=o,tt(r==null?void 0:r.deactivate(t),()=>s)):tt(o.controller.deactivate(o.controller,this.$controller),()=>(o.controller.dispose(),s))):(o.controller.dispose(),s)):s)}compose(e){const{_template:t,_component:i,_model:r}=e.change,{_container:s,$controller:o,_location:a,_instruction:l}=this,c=this._getDefinition(this._hydrationContext.controller.container,i),u=s.createChild(),h=this._platform.document.createElement(c==null?this.tag??"div":c.name);a.parentNode.insertBefore(h,a);let d;c==null?d=this.tag==null?Qb(h):null:d=c.containerless?Qb(h):null;const f=()=>{var m;if(h.remove(),d!=null){let b=d.$start.nextSibling,y=null;for(;b!==null&&b!==d;)y=b.nextSibling,b.remove(),b=y;(m=d.$start)==null||m.remove(),d.remove()}},g=this._createComponentInstance(u,typeof i=="string"?c.Type:i,h,d),p=()=>{const m=l.captures??mt;if(c!==null){const b=c.capture,[y,w]=m.reduce((E,_)=>{const T=!(_.target in c.bindables)&&(b===!0||$t(b)&&!!b(_.target));return E[T?0:1].push(_),E},[[],[]]),R=ys.$el(u,g,h,{projections:l.projections,captures:y},c,d);return this._createSpreadBindings(h,c,w).forEach(E=>R.addBinding(E)),new s2(R,E=>R.activate(E??R,o,o.scope.parent),E=>tt(R.deactivate(E??R,o),f),E=>{var _;return(_=g.activate)==null?void 0:_.call(g,E)},e)}else{const b=Qr.create({name:Ar.generateName(),template:t}),y=this._rendering.getViewFactory(b,u),w=ys.$view(y,o),R=this.scopeBehavior==="auto"?pi.fromParent(this.parent.scope,g):pi.create(g);return w.setHost(h),d==null?this._createSpreadBindings(h,b,m).forEach(E=>w.addBinding(E)):w.setLocation(d),new s2(w,E=>w.activate(E??w,o,R),E=>tt(w.deactivate(E??w,o),f),E=>{var _;return(_=g.activate)==null?void 0:_.call(g,E)},e)}};return"activate"in g?tt(g.activate(r),()=>p()):p()}_createComponentInstance(e,t,i,r){if(t==null)return new vie;if(typeof t=="object")return t;const s=this._platform;e1(e,i,s),_n(e,Or,new gi("IRenderLocation",r));const o=e.invoke(t);return _n(e,t,new gi("au-compose.component",o)),o}_getDefinition(e,t){if(typeof t=="string"){const r=Ar.find(e,t);if(r==null)throw _e(806,t);return r}const i=$t(t)?t:t==null?void 0:t.constructor;return Ar.isType(i,void 0)?Ar.getDefinition(i,null):null}_createSpreadBindings(e,t,i){const r=new W5(this.$controller,{projections:null,captures:i},this._hydrationContext.parent);return KR.create(r,e,t,this._rendering,this._compiler,this._platform,this._exprParser,this._observerLocator)}}p8.$au={type:qd,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:n=>{if(n==="scoped"||n==="auto")return n;throw _e(805,n)}},{name:"composing",mode:Rc},{name:"composition",mode:Rc},"tag"]};class vie{}class bie{constructor(){this.id=0}_isCurrent(e){return e.id===this.id}create(e){return tt(e.load(),t=>new wie(++this.id,t))}invalidate(){this.id++}}class i2{constructor(e,t,i,r){this._template=e,this._component=t,this._model=i,this._src=r}load(){return fi(this._template)||fi(this._component)?Promise.all([this._template,this._component]).then(([e,t])=>new r2(e,t,this._model,this._src)):new r2(this._template,this._component,this._model,this._src)}}class r2{constructor(e,t,i,r){this._template=e,this._component=t,this._model=i,this._src=r}}class wie{constructor(e,t){this.id=e,this.change=t}}class s2{constructor(e,t,i,r,s){this.controller=e,this.start=t,this.stop=i,this.update=r,this.context=s,this.state=0}activate(e){if(this.state!==0)throw _e(807,this);return this.state=1,this.start(e)}deactivate(e){switch(this.state){case 1:return this.state=-1,this.stop(e);case-1:throw _e(808);default:this.state=-1}}}const yie=pn("ISanitizer",n=>n.singleton(class{sanitize(){throw _e(99,"sanitize")}}));class m8{constructor(){this._sanitizer=pe(yie)}toView(e){return e==null?null:this._sanitizer.sanitize(e)}}m8.$au={type:Ng,name:"sanitize"};class v8{constructor(){this.el=pe(JR),this.p=pe(Pr),this._isActive=!1,this._task=null,this.$val="",this.$prio="",this.update=()=>{this._task=null,!!this.value!==this._isToggled&&(this._isToggled===this._base?(this._isToggled=!this._base,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this._isToggled=this._base,this.el.style.setProperty("display",this.$val,this.$prio),this.el.getAttribute("style")===""&&this.el.removeAttribute("style")))};const e=pe(Lp);this._isToggled=this._base=e.alias!=="hide"}binding(){this._isActive=!0,this.update()}detaching(){var e;this._isActive=!1,(e=this._task)==null||e.cancel(),this._task=null}valueChanged(){this._isActive&&this._task===null&&(this._task=this.p.domQueue.queueTask(this.update))}}v8.$au={type:hr,name:"show",bindables:["value"],aliases:["hide"]};const Cie=[Jne,ite,jO],Sie=[_A,SA,RA,Ute],_ie=[Lz,Oz,Dz,kz,Nz,Hz,jz,$z,Fz,Wz,Vz,Bz,zz],Rie=[v5,f5,g5,p5,b5,w5,m5,m8,a_,n8,i8,r8,zO,UO,o8,GO,u8,h8,d8,zA,UA,GA,J5,e8,t8,p8,g8,f8,v8,t1],Eie=[rne,sne,nne,ine,Zte,Qte,Jte,ene,tne,lne,pne,cne,une,hne,fne,one,mne,vne],xie=b8(Za);function b8(n){return{optionsProvider:n,register(e){const t={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return n(t),e.register(h5(Kz,t.coercingOptions),X6,...Cie,...Rie,...Sie,..._ie,...Eie)},customize(e){return b8(e??n)}}}const Tie=Cu.getOrCreate(globalThis);function Mie(){return Zu.createContainer().register(Fd.instance(Pr,Tie),xie)}class lb extends Xne{constructor(e=Mie()){super(e)}static app(e){return new lb().app(e)}static enhance(e){return new lb().enhance(e)}static register(...e){return new lb().register(...e)}app(e){if(Ar.isType(e)){const t=Ar.getDefinition(e);let i=document.querySelector(t.name);return i===null&&(i=document.body),super.app({host:i,component:e})}return super.app(e)}}const w8="my-app",YA=`<!--import from="./components/chartjs"></import>
<import from="./components/chartjs-scatter"></import>
<import from="./components/table"></import>
<import from="./components/chartjs-geo"></import>
<import from="./components/network"></import-->
<!--sv-chartjs-geo datasrc="g/National_Initiatives_Figure_Data.csv"></sv-chartjs-geo-->
<!--sv-tabs idlist="all,help,table1,visual" titlelist="Help,Data Table,Network Graph Visualisation"></sv-tabs-->
<div id="all">
    <sv-table datachannel="data" tabid="all" style="position:fixed;opacity:90%;z-index:10;"></sv-table>
    <sv-network tabid="visual" datachannel="data"></sv-network>
</div>
`,y8=[],C8={};let sx;function Aie(n){sx||(sx=Ar.define({name:w8,template:YA,dependencies:y8,bindables:C8})),n.register(sx)}const Pie=Object.freeze(Object.defineProperty({__proto__:null,bindables:C8,default:YA,dependencies:y8,name:w8,register:Aie,template:YA},Symbol.toStringTag,{value:"Module"}));var S8;let _8;function Iie(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],b=e.length;function y(_,T,I){return function(x,P){T&&(P=x,x=n);for(var D=0;D<_.length;D++)P=_[D].apply(x,I?[P]:[]);return I?P:x}}function w(_,T,I,x){if(typeof _!="function"&&(x||_!==void 0))throw new TypeError(T+" must "+(I||"be")+" a function"+(x?"":" or undefined"));return _}function R(_,T,I,x,P,D,B,V,z,L,k){function F(oe){if(!k(oe))throw new TypeError("Attempted to access private element on non-instance")}var G=[].concat(T[0]),U=T[3],se=!B,v=P===1,C=P===3,S=P===4,A=P===2;function H(oe,ae,Fe){return function(ve,Se){return ae&&(Se=ve,ve=_),Fe&&Fe(ve),M[oe].call(ve,Se)}}if(!se){var M={},$=[],q=C?"get":S||v?"set":"value";if(z?(L||v?M={get:o2(function(){return U(this)},x,"get"),set:function(oe){T[4](this,oe)}}:M[q]=U,L||o2(M[q],x,A?"":q)):L||(M=Object.getOwnPropertyDescriptor(_,x)),!L&&!z){if((a=m[+V][x])&&(a^P)!=7)throw Error("Decorating two elements with the same name ("+M[q].name+") is not supported yet");m[+V][x]=P<3?1:P}}for(var Q=_,ce=G.length-1;ce>=0;ce-=I?2:1){var le=w(G[ce],"A decorator","be",!0),Me=I?G[ce-1]:void 0,Ce={},J={kind:["field","accessor","method","getter","setter","class"][P],name:x,metadata:o,addInitializer:(function(oe,ae){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ae,"An initializer","be",!0),D.push(ae)}).bind(null,Ce)};if(se)a=le.call(Me,Q,J),Ce.v=1,w(a,"class decorators","return")&&(Q=a);else if(J.static=V,J.private=z,a=J.access={has:z?k.bind():function(oe){return x in oe}},S||(a.get=z?A?function(oe){return F(oe),M.value}:H("get",0,F):function(oe){return oe[x]}),A||C||(a.set=z?H("set",0,F):function(oe,ae){oe[x]=ae}),Q=le.call(Me,v?{get:M.get,set:M.set}:M[q],J),Ce.v=1,v){if(typeof Q=="object"&&Q)(a=w(Q.get,"accessor.get"))&&(M.get=a),(a=w(Q.set,"accessor.set"))&&(M.set=a),(a=w(Q.init,"accessor.init"))&&$.unshift(a);else if(Q!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(Q,(L?"field":"method")+" decorators","return")&&(L?$.unshift(Q):M[q]=Q)}return P<2&&B.push(y($,V,1),y(D,V,0)),L||se||(z?v?B.splice(-1,0,H("get",V),H("set",V)):B.push(A?M[q]:w.call.bind(M[q])):g(_,x,M)),Q}function E(_){return g(_,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(_){_&&u.push(y(_))},d=function(_,T){for(var I=0;I<t.length;I++){var x=t[I],P=x[1],D=7&P;if((8&P)==_&&!D==T){var B=x[2],V=!!x[3],z=16&P;R(_?n:n.prototype,x,z,V?"#"+B:Oie(B),D,D<2?[]:_?c=c||[]:l=l||[],u,!!_,V,T,_&&V?function(L){return Die(L)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,b||E(n),{e:a,get c(){var _=[];return b&&[E(n=R(n,[e],i,n.name,5,_)),y(_,1)]}}}function Oie(n){var e=kie(n,"string");return typeof e=="symbol"?e:e+""}function kie(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function o2(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function Die(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let R8;class Nie{constructor(){this.message="Hello World 6!"}}S8=Nie;[R8,_8]=Iie(S8,[mf(Pie)],[]).c;_8();const E8="chartjs",KA=`<div>
    <canvas ref="mychart"></canvas>
</div>
`,x8=[],T8={};let ox;function Lie(n){ox||(ox=Ar.define({name:E8,template:KA,dependencies:x8,bindables:T8})),n.register(ox)}const Hie=Object.freeze(Object.defineProperty({__proto__:null,bindables:T8,default:KA,dependencies:x8,name:E8,register:Lie,template:KA},Symbol.toStringTag,{value:"Module"}));/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Fw(n){return n+.5|0}const Su=(n,e,t)=>Math.max(Math.min(n,t),e);function kv(n){return Su(Fw(n*2.55),0,255)}function ku(n){return Su(Fw(n*255),0,255)}function ec(n){return Su(Fw(n/2.55)/100,0,1)}function a2(n){return Su(Fw(n*100),0,100)}const ks={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},qA=[..."0123456789ABCDEF"],$ie=n=>qA[n&15],Fie=n=>qA[(n&240)>>4]+qA[n&15],Hy=n=>(n&240)>>4===(n&15),Bie=n=>Hy(n.r)&&Hy(n.g)&&Hy(n.b)&&Hy(n.a);function Vie(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&ks[n[1]]*17,g:255&ks[n[2]]*17,b:255&ks[n[3]]*17,a:e===5?ks[n[4]]*17:255}:(e===7||e===9)&&(t={r:ks[n[1]]<<4|ks[n[2]],g:ks[n[3]]<<4|ks[n[4]],b:ks[n[5]]<<4|ks[n[6]],a:e===9?ks[n[7]]<<4|ks[n[8]]:255})),t}const Wie=(n,e)=>n<255?e(n):"";function jie(n){var e=Bie(n)?$ie:Fie;return n?"#"+e(n.r)+e(n.g)+e(n.b)+Wie(n.a,e):void 0}const zie=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function M8(n,e,t){const i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Uie(n,e,t){const i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function Gie(n,e,t){const i=M8(n,1,.5);let r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function Yie(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function KO(n){const t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=Yie(t,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function qO(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(ku)}function XO(n,e,t){return qO(M8,n,e,t)}function Kie(n,e,t){return qO(Gie,n,e,t)}function qie(n,e,t){return qO(Uie,n,e,t)}function A8(n){return(n%360+360)%360}function Xie(n){const e=zie.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?kv(+e[5]):ku(+e[5]));const r=A8(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=Kie(r,s,o):e[1]==="hsv"?i=qie(r,s,o):i=XO(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function Zie(n,e){var t=KO(n);t[0]=A8(t[0]+e),t=XO(t),n.r=t[0],n.g=t[1],n.b=t[2]}function Qie(n){if(!n)return;const e=KO(n),t=e[0],i=a2(e[1]),r=a2(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${ec(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}const l2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},c2={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Jie(){const n={},e=Object.keys(c2),t=Object.keys(l2);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<t.length;r++)s=t[r],a=a.replace(s,l2[s]);s=parseInt(c2[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}let $y;function ere(n){$y||($y=Jie(),$y.transparent=[0,0,0,0]);const e=$y[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const tre=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function nre(n){const e=tre.exec(n);let t=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?kv(o):Su(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?kv(i):Su(i,0,255)),r=255&(e[4]?kv(r):Su(r,0,255)),s=255&(e[6]?kv(s):Su(s,0,255)),{r:i,g:r,b:s,a:t}}}function ire(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ec(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const ax=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Lf=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function rre(n,e,t){const i=Lf(ec(n.r)),r=Lf(ec(n.g)),s=Lf(ec(n.b));return{r:ku(ax(i+t*(Lf(ec(e.r))-i))),g:ku(ax(r+t*(Lf(ec(e.g))-r))),b:ku(ax(s+t*(Lf(ec(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Fy(n,e,t){if(n){let i=KO(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=XO(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function P8(n,e){return n&&Object.assign(e||{},n)}function u2(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ku(n[3]))):(e=P8(n,{r:0,g:0,b:0,a:1}),e.a=ku(e.a)),e}function sre(n){return n.charAt(0)==="r"?nre(n):Xie(n)}let I8=class XA{constructor(e){if(e instanceof XA)return e;const t=typeof e;let i;t==="object"?i=u2(e):t==="string"&&(i=Vie(e)||ere(e)||sre(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=P8(this._rgb);return e&&(e.a=ec(e.a)),e}set rgb(e){this._rgb=u2(e)}rgbString(){return this._valid?ire(this._rgb):void 0}hexString(){return this._valid?jie(this._rgb):void 0}hslString(){return this._valid?Qie(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,r=e.rgb;let s;const o=t===s?.5:t,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=rre(this._rgb,e._rgb,t)),this}clone(){return new XA(this.rgb)}alpha(e){return this._rgb.a=ku(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Fw(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Fy(this._rgb,2,e),this}darken(e){return Fy(this._rgb,2,-e),this}saturate(e){return Fy(this._rgb,1,e),this}desaturate(e){return Fy(this._rgb,1,-e),this}rotate(e){return Zie(this._rgb,e),this}};/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function xl(){}const ore=(()=>{let n=0;return()=>n++})();function kt(n){return n===null||typeof n>"u"}function On(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Et(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ti(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function as(n,e){return ti(n)?n:e}function nt(n,e){return typeof n>"u"?e:n}const are=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,O8=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function bn(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function en(n,e,t,i){let r,s,o;if(On(n))for(s=n.length,r=0;r<s;r++)e.call(t,n[r],r);else if(Et(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function c_(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function u_(n){if(On(n))return n.map(u_);if(Et(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let r=0;for(;r<i;++r)e[t[r]]=u_(n[t[r]]);return e}return n}function k8(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function lre(n,e,t,i){if(!k8(n))return;const r=e[n],s=t[n];Et(r)&&Et(s)?_s(r,s,i):e[n]=u_(s)}function _s(n,e,t){const i=On(e)?e:[e],r=i.length;if(!Et(n))return n;t=t||{};const s=t.merger||lre;let o;for(let a=0;a<r;++a){if(o=i[a],!Et(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,t)}return n}function cb(n,e){return _s(n,e,{merger:cre})}function cre(n,e,t){if(!k8(n))return;const i=e[n],r=t[n];Et(i)&&Et(r)?cb(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=u_(r))}const h2={"":n=>n,x:n=>n.x,y:n=>n.y};function ure(n){const e=n.split("."),t=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function hre(n){const e=ure(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Wu(n,e){return(h2[e]||(h2[e]=hre(e)))(n)}function ZO(n){return n.charAt(0).toUpperCase()+n.slice(1)}const ew=n=>typeof n<"u",ju=n=>typeof n=="function",d2=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function dre(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const En=Math.PI,Rn=2*En,fre=Rn+En,h_=Number.POSITIVE_INFINITY,gre=En/180,oi=En/2,fh=En/4,f2=En*2/3,_u=Math.log10,Qa=Math.sign;function ub(n,e,t){return Math.abs(n-e)<t}function g2(n){const e=Math.round(n);n=ub(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(_u(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function pre(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function vp(n){return!isNaN(parseFloat(n))&&isFinite(n)}function mre(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function D8(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Yo(n){return n*(En/180)}function QO(n){return n*(180/En)}function p2(n){if(!ti(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function N8(n,e){const t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i);let s=Math.atan2(i,t);return s<-.5*En&&(s+=Rn),{angle:s,distance:r}}function ZA(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function vre(n,e){return(n-e+fre)%Rn-En}function gs(n){return(n%Rn+Rn)%Rn}function tw(n,e,t,i){const r=gs(n),s=gs(e),o=gs(t),a=gs(s-r),l=gs(o-r),c=gs(r-s),u=gs(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function Hi(n,e,t){return Math.max(e,Math.min(t,n))}function bre(n){return Hi(n,-32768,32767)}function lc(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function JO(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}const cc=(n,e,t,i)=>JO(n,t,i?r=>{const s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),wre=(n,e,t)=>JO(n,t,i=>n[i][e]>=t);function yre(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}const L8=["push","pop","shift","splice","unshift"];function Cre(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),L8.forEach(t=>{const i="_onData"+ZO(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function m2(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(L8.forEach(s=>{delete n[s]}),delete n._chartjs)}function H8(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const $8=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function F8(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,$8.call(window,()=>{i=!1,n.apply(e,t)}))}}function Sre(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const ek=n=>n==="start"?"left":n==="end"?"right":"center",nr=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,_re=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function B8(n,e,t){const i=e.length;let r=0,s=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(r=Hi(Math.min(cc(a,l,c).lo,t?i:cc(e,l,o.getPixelForValue(c)).lo),0,i-1)),d?s=Hi(Math.max(cc(a,o.axis,u,!0).hi+1,t?0:cc(e,l,o.getPixelForValue(u),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function V8(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}const By=n=>n===0||n===1,v2=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Rn/t)),b2=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Rn/t)+1,hb={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*oi)+1,easeOutSine:n=>Math.sin(n*oi),easeInOutSine:n=>-.5*(Math.cos(En*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>By(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>By(n)?n:v2(n,.075,.3),easeOutElastic:n=>By(n)?n:b2(n,.075,.3),easeInOutElastic(n){return By(n)?n:n<.5?.5*v2(n*2,.1125,.45):.5+.5*b2(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-hb.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?hb.easeInBounce(n*2)*.5:hb.easeOutBounce(n*2-1)*.5+.5};function tk(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function w2(n){return tk(n)?n:new I8(n)}function lx(n){return tk(n)?n:new I8(n).saturate(.5).darken(.1).hexString()}const Rre=["x","y","borderWidth","radius","tension"],Ere=["color","borderColor","backgroundColor"];function xre(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:Ere},numbers:{type:"number",properties:Rre}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Tre(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const y2=new Map;function Mre(n,e){e=e||{};const t=n+JSON.stringify(e);let i=y2.get(t);return i||(i=new Intl.NumberFormat(n,e),y2.set(t,i)),i}function Bw(n,e,t){return Mre(e,t).format(n)}const W8={values(n){return On(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let r,s=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=Are(n,t)}const o=_u(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Bw(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(_u(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?W8.numeric.call(this,n,e,t):""}};function Are(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var n1={formatters:W8};function Pre(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:n1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Xd=Object.create(null),QA=Object.create(null);function db(n,e){if(!e)return n;const t=e.split(".");for(let i=0,r=t.length;i<r;++i){const s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function cx(n,e,t){return typeof e=="string"?_s(db(n,e),t):_s(db(n,""),e)}class Ire{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>lx(r.backgroundColor),this.hoverBorderColor=(i,r)=>lx(r.borderColor),this.hoverColor=(i,r)=>lx(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return cx(this,e,t)}get(e){return db(this,e)}describe(e,t){return cx(QA,e,t)}override(e,t){return cx(Xd,e,t)}route(e,t,i,r){const s=db(this,e),o=db(this,i),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[r];return Et(l)?Object.assign({},c,l):nt(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var Dn=new Ire({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[xre,Tre,Pre]);function Ore(n){return!n||kt(n.size)||kt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function d_(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function kre(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0;const a=t.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=t[l],h!=null&&!On(h))o=d_(n,r,s,o,h);else if(On(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!On(d)&&(o=d_(n,r,s,o,d));n.restore();const f=s.length/2;if(f>t.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function gh(n,e,t){const i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function C2(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function f_(n,e,t,i){j8(n,e,t,i,null)}function j8(n,e,t,i,r){let s,o,a,l,c,u,h,d;const f=e.pointStyle,g=e.rotation,p=e.radius;let m=(g||0)*gre;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(m),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(p)||p<=0)){switch(n.beginPath(),f){default:r?n.ellipse(t,i,r/2,p,0,0,Rn):n.arc(t,i,p,0,Rn),n.closePath();break;case"triangle":u=r?r/2:p,n.moveTo(t+Math.sin(m)*u,i-Math.cos(m)*p),m+=f2,n.lineTo(t+Math.sin(m)*u,i-Math.cos(m)*p),m+=f2,n.lineTo(t+Math.sin(m)*u,i-Math.cos(m)*p),n.closePath();break;case"rectRounded":c=p*.516,l=p-c,o=Math.cos(m+fh)*l,h=Math.cos(m+fh)*(r?r/2-c:l),a=Math.sin(m+fh)*l,d=Math.sin(m+fh)*(r?r/2-c:l),n.arc(t-h,i-a,c,m-En,m-oi),n.arc(t+d,i-o,c,m-oi,m),n.arc(t+h,i+a,c,m,m+oi),n.arc(t-d,i+o,c,m+oi,m+En),n.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,u=r?r/2:l,n.rect(t-u,i-l,2*u,2*l);break}m+=fh;case"rectRot":h=Math.cos(m)*(r?r/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(r?r/2:p),n.moveTo(t-h,i-a),n.lineTo(t+d,i-o),n.lineTo(t+h,i+a),n.lineTo(t-d,i+o),n.closePath();break;case"crossRot":m+=fh;case"cross":h=Math.cos(m)*(r?r/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(r?r/2:p),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o);break;case"star":h=Math.cos(m)*(r?r/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(r?r/2:p),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o),m+=fh,h=Math.cos(m)*(r?r/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(r?r/2:p),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o);break;case"line":o=r?r/2:Math.cos(m)*p,a=Math.sin(m)*p,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(m)*(r?r/2:p),i+Math.sin(m)*p);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function uc(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Od(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function kd(n){n.restore()}function Dre(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function Nre(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function Lre(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),kt(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function Hre(n,e,t,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,c=t+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function $re(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Zd(n,e,t,i,r,s={}){const o=On(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(n.save(),n.font=r.string,Lre(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&$re(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),kt(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,t,i,s.maxWidth)),n.fillText(c,t,i,s.maxWidth),Hre(n,t,i,c,s),i+=Number(r.lineHeight);n.restore()}function nw(n,e){const{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*En,En,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,En,oi,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,oi,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-oi,!0),n.lineTo(t+o.topLeft,i)}const Fre=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Bre=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Vre(n,e){const t=(""+n).match(Fre);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const Wre=n=>+n||0;function nk(n,e){const t={},i=Et(e),r=i?Object.keys(e):e,s=Et(n)?i?o=>nt(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of r)t[o]=Wre(s(o));return t}function z8(n){return nk(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Dd(n){return nk(n,["topLeft","topRight","bottomLeft","bottomRight"])}function dr(n){const e=z8(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ti(n,e){n=n||{},e=e||Dn.font;let t=nt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=nt(n.style,e.style);i&&!(""+i).match(Bre)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:nt(n.family,e.family),lineHeight:Vre(nt(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:nt(n.weight,e.weight),string:""};return r.string=Ore(r),r}function Dv(n,e,t,i){let r,s,o;for(r=0,s=n.length;r<s;++r)if(o=n[r],o!==void 0&&o!==void 0)return o}function jre(n,e,t){const{min:i,max:r}=n,s=O8(e,(r-i)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function ih(n,e){return Object.assign(Object.create(n),e)}function ik(n,e=[""],t,i,r=()=>n[0]){const s=t||n;typeof i>"u"&&(i=K8("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>ik([a,...n],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return G8(a,l,()=>Zre(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return _2(a).includes(l)},ownKeys(a){return _2(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function bp(n,e,t,i){const r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:U8(n,i),setContext:s=>bp(n,s,t,i),override:s=>bp(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return G8(s,o,()=>Ure(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function U8(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:ju(t)?t:()=>t,isIndexable:ju(i)?i:()=>i}}const zre=(n,e)=>n?n+ZO(e):e,rk=(n,e)=>Et(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function G8(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function Ure(n,e,t){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n;let a=i[e];return ju(a)&&o.isScriptable(e)&&(a=Gre(e,a,n,t)),On(a)&&a.length&&(a=Yre(e,a,n,o.isIndexable)),rk(e,a)&&(a=bp(a,r,s&&s[e],o)),a}function Gre(n,e,t,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(s,o||i);return a.delete(n),rk(n,l)&&(l=sk(r._scopes,r,n,l)),l}function Yre(n,e,t,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(Et(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=sk(c,r,n,u);e.push(bp(h,s,o&&o[n],a))}}return e}function Y8(n,e,t){return ju(n)?n(e,t):n}const Kre=(n,e)=>n===!0?e:typeof n=="string"?Wu(e,n):void 0;function qre(n,e,t,i,r){for(const s of e){const o=Kre(t,s);if(o){n.add(o);const a=Y8(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function sk(n,e,t,i){const r=e._rootScopes,s=Y8(e._fallback,t,i),o=[...n,...r],a=new Set;a.add(i);let l=S2(a,o,t,s||t,i);return l===null||typeof s<"u"&&s!==t&&(l=S2(a,o,s,l,i),l===null)?!1:ik(Array.from(a),[""],r,s,()=>Xre(e,t,i))}function S2(n,e,t,i,r){for(;t;)t=qre(n,e,t,i,r);return t}function Xre(n,e,t){const i=n._getTarget();e in i||(i[e]={});const r=i[e];return On(r)&&Et(t)?t:r||{}}function Zre(n,e,t,i){let r;for(const s of e)if(r=K8(zre(s,n),t),typeof r<"u")return rk(n,r)?sk(t,i,n,r):r}function K8(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function _2(n){let e=n._keys;return e||(e=n._keys=Qre(n._scopes)),e}function Qre(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function q8(n,e,t,i){const{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+t,u=e[c],o[a]={r:r.parse(Wu(u,s),c)};return o}const Jre=Number.EPSILON||1e-14,wp=(n,e)=>e<n.length&&!n[e].skip&&n[e],X8=n=>n==="x"?"y":"x";function ese(n,e,t,i){const r=n.skip?e:n,s=e,o=t.skip?e:t,a=ZA(s,r),l=ZA(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function tse(n,e,t){const i=n.length;let r,s,o,a,l,c=wp(n,0);for(let u=0;u<i-1;++u)if(l=c,c=wp(n,u+1),!(!l||!c)){if(ub(e[u],0,Jre)){t[u]=t[u+1]=0;continue}r=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=r*o*e[u],t[u+1]=s*o*e[u])}}function nse(n,e,t="x"){const i=X8(t),r=n.length;let s,o,a,l=wp(n,0);for(let c=0;c<r;++c){if(o=a,a=l,l=wp(n,c+1),!a)continue;const u=a[t],h=a[i];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${i}`]=h-s*e[c]),l&&(s=(l[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${i}`]=h+s*e[c])}}function ise(n,e="x"){const t=X8(e),i=n.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=wp(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=wp(n,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[t]-l[t])/u:0}s[o]=a?c?Qa(r[o-1])!==Qa(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}tse(n,r,s),nse(n,s,e)}function Vy(n,e,t){return Math.max(Math.min(n,t),e)}function rse(n,e){let t,i,r,s,o,a=uc(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=a,a=t<i-1&&uc(n[t+1],e),s&&(r=n[t],o&&(r.cp1x=Vy(r.cp1x,e.left,e.right),r.cp1y=Vy(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Vy(r.cp2x,e.left,e.right),r.cp2y=Vy(r.cp2y,e.top,e.bottom)))}function sse(n,e,t,i,r){let s,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")ise(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=ese(c,a,n[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&rse(n,t)}function ok(){return typeof window<"u"&&typeof document<"u"}function ak(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function g_(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const i1=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function ose(n,e){return i1(n).getPropertyValue(e)}const ase=["top","right","bottom","left"];function Nd(n,e,t){const i={};t=t?"-"+t:"";for(let r=0;r<4;r++){const s=ase[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const lse=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function cse(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(lse(r,s,n.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ad(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,r=i1(t),s=r.boxSizing==="border-box",o=Nd(r,"padding"),a=Nd(r,"border","width"),{x:l,y:c,box:u}=cse(n,t),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:g}=e;return s&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/f*t.width/i),y:Math.round((c-d)/g*t.height/i)}}function use(n,e,t){let i,r;if(e===void 0||t===void 0){const s=n&&ak(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const o=s.getBoundingClientRect(),a=i1(s),l=Nd(a,"border","width"),c=Nd(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=g_(a.maxWidth,s,"clientWidth"),r=g_(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||h_,maxHeight:r||h_}}const Wy=n=>Math.round(n*10)/10;function hse(n,e,t,i){const r=i1(n),s=Nd(r,"margin"),o=g_(r.maxWidth,n,"clientWidth")||h_,a=g_(r.maxHeight,n,"clientHeight")||h_,l=use(n,e,t);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const d=Nd(r,"border","width"),f=Nd(r,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=Wy(Math.min(c,o,l.maxWidth)),u=Wy(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Wy(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Wy(Math.floor(u*i))),{width:c,height:u}}function R2(n,e,t){const i=e||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const dse=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};ok()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function E2(n,e){const t=ose(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ld(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function fse(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function gse(n,e,t,i){const r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=ld(n,r,t),a=ld(r,s,t),l=ld(s,e,t),c=ld(o,a,t),u=ld(a,l,t);return ld(c,u,t)}const pse=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},mse=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function ep(n,e,t){return n?pse(e,t):mse()}function Z8(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function Q8(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function J8(n){return n==="angle"?{between:tw,compare:vre,normalize:gs}:{between:lc,compare:(e,t)=>e-t,normalize:e=>e}}function x2({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function vse(n,e,t){const{property:i,start:r,end:s}=t,{between:o,normalize:a}=J8(i),l=e.length;let{start:c,end:u,loop:h}=n,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][i]),r,s);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:n.style}}function e4(n,e,t){if(!t)return[n];const{property:i,start:r,end:s}=t,o=e.length,{compare:a,between:l,normalize:c}=J8(i),{start:u,end:h,loop:d,style:f}=vse(n,e,t),g=[];let p=!1,m=null,b,y,w;const R=()=>l(r,w,b)&&a(r,w)!==0,E=()=>a(s,b)===0||l(s,w,b),_=()=>p||R(),T=()=>!p||E();for(let I=u,x=u;I<=h;++I)y=e[I%o],!y.skip&&(b=c(y[i]),b!==w&&(p=l(b,r,s),m===null&&_()&&(m=a(b,r)===0?I:x),m!==null&&T()&&(g.push(x2({start:m,end:I,loop:d,count:o,style:f})),m=null),x=I,w=b));return m!==null&&g.push(x2({start:m,end:h,loop:d,count:o,style:f})),g}function t4(n,e){const t=[],i=n.segments;for(let r=0;r<i.length;r++){const s=e4(i[r],n.points,e);s.length&&t.push(...s)}return t}function bse(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function wse(n,e,t,i){const r=n.length,s=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function yse(n,e){const t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];const s=!!n._loop,{start:o,end:a}=bse(t,r,s,i);if(i===!0)return T2(n,[{start:o,end:a,loop:s}],t,e);const l=a<o?a+r:a,c=!!n._fullLoop&&o===0&&a===r-1;return T2(n,wse(t,o,l,c),t,e)}function T2(n,e,t,i){return!i||!i.setContext||!t?e:Cse(n,e,t,i)}function Cse(n,e,t,i){const r=n._chart.getContext(),s=M2(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let u=s,h=e[0].start,d=h;function f(g,p,m,b){const y=a?-1:1;if(g!==p){for(g+=l;t[g%l].skip;)g-=y;for(;t[p%l].skip;)p+=y;g%l!==p%l&&(c.push({start:g%l,end:p%l,loop:m,style:b}),u=b,h=p%l)}}for(const g of e){h=a?h:g.start;let p=t[h%l],m;for(d=h+1;d<=g.end;d++){const b=t[d%l];m=M2(i.setContext(ih(r,{type:"segment",p0:p,p1:b,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),Sse(m,u)&&f(h,d-1,g.loop,u),p=b,u=m}h<d-1&&f(h,d-1,g.loop,u)}return c}function M2(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Sse(n,e){if(!e)return!1;const t=[],i=function(r,s){return tk(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class _se{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){const s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=$8.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Wl=new _se;const A2="transparent",Rse={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=w2(n||A2),r=i.valid&&w2(e||A2);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class Ese{constructor(e,t,i,r){const s=t[i];r=Dv([e.to,r,s,e.from]);const o=Dv([e.from,s,r]);this._active=!0,this._fn=e.fn||Rse[e.type||typeof o],this._easing=hb[e.easing]||hb.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Dv([e.to,t,r,e.from]),this._from=Dv([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}}class n4{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Et(e))return;const t=Object.keys(Dn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!Et(s))return;const o={};for(const a of t)o[a]=s[a];(On(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){const i=t.options,r=Tse(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&xse(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,t));continue}const u=t[c];let h=s[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}s[c]=h=new Ese(d,e,c,u),r.push(h)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return Wl.add(this._chart,i),!0}}function xse(n,e){const t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function Tse(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function P2(n,e){const t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function Mse(n,e,t){if(t===!1)return!1;const i=P2(n,t),r=P2(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Ase(n){let e,t,i,r;return Et(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function i4(n,e){const t=[],i=n._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function I2(n,e,t,i={}){const r=n.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===t){if(u=!0,i.all)continue;break}c=n.values[l],ti(c)&&(s||e===0||Qa(e)===Qa(c))&&(e+=c)}return!u&&!i.all?0:e}function Pse(n,e){const{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:n[u]};return a}function ux(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function Ise(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function Ose(n){const{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function kse(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function O2(n,e,t,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function k2(n,e){const{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=Ise(s,o,i),h=e.length;let d;for(let f=0;f<h;++f){const g=e[f],{[l]:p,[c]:m}=g,b=g._stacks||(g._stacks={});d=b[c]=kse(r,u,p),d[a]=m,d._top=O2(d,o,!0,i.type),d._bottom=O2(d,o,!1,i.type);const y=d._visualValues||(d._visualValues={});y[a]=m}}function hx(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function Dse(n,e){return ih(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Nse(n,e,t){return ih(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function mm(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}const dx=n=>n==="reset"||n==="none",D2=(n,e)=>e?n:Object.assign({},n),Lse=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:i4(t,!0),values:null};class ho{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ux(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&mm(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),r=(h,d,f,g)=>h==="x"?d:h==="r"?g:f,s=t.xAxisID=nt(i.xAxisID,hx(e,"x")),o=t.yAxisID=nt(i.yAxisID,hx(e,"y")),a=t.rAxisID=nt(i.rAxisID,hx(e,"r")),l=t.indexAxis,c=t.iAxisID=r(l,s,o,a),u=t.vAxisID=r(l,o,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&m2(this._data,this),e._stacked&&mm(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Et(t)){const r=this._cachedMeta;this._data=Pse(t,r)}else if(i!==t){if(i){m2(i,this);const r=this._cachedMeta;mm(r),r._parsed=[]}t&&Object.isExtensible(t)&&Cre(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=ux(t.vScale,t),t.stack!==i.stack&&(r=!0,mm(t),t.stack=i.stack),this._resyncElements(e),(r||s!==t._stacked)&&(k2(this,t._parsed),t._stacked=ux(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&t===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=r,i._sorted=!0,d=r;else{On(r[e])?d=this.parseArrayData(i,r,e,t):Et(r[e])?d=this.parseObjectData(i,r,e,t):d=this.parsePrimitiveData(i,r,e,t);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<t;++u)i._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&k2(this,d)}parsePrimitiveData(e,t,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(r);let d,f,g;for(d=0,f=r;d<f;++d)g=d+i,h[d]={[a]:u||s.parse(c[g],g),[l]:o.parse(t[g],g)};return h}parseArrayData(e,t,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+i,h=t[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,t,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,d,f;for(u=0,h=r;u<h;++u)d=u+i,f=t[d],c[u]={x:s.parse(Wu(f,a),d),y:o.parse(Wu(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const r=this.chart,s=this._cachedMeta,o=t[e.axis],a={keys:i4(r,!0),values:t._stacks[e.axis]._visualValues};return I2(a,o,s.index,{mode:i})}updateRangeFromParsed(e,t,i,r){const s=i[t.axis];let o=s===null?NaN:s;const a=r&&i._stacks[t.axis];r&&a&&(r.values=a,o=I2(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=Lse(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Ose(a);let d,f;function g(){f=r[d];const p=f[a.axis];return!ti(f[e.axis])||u>p||h<p}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(c,e,f,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=t.length;r<s;++r)o=t[r][e.axis],ti(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=Ase(nt(this.options.clip,Mse(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,r=i.data||[],s=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Nse(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Dse(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const r=t==="active",s=this._cachedDataOpts,o=e+"-"+t,a=s[o],l=this.enableOptionSharing&&ew(i);if(a)return D2(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Dn.elements[e]),g=()=>this.getContext(i,r,t),p=c.resolveNamedOptions(d,f,g,h);return p.$shared&&(p.$shared=l,s[o]=Object.freeze(D2(p,l))),p}_resolveAnimations(e,t,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,t),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,i,t))}const c=new n4(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||dx(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,i),{sharedOptions:s,includeOptions:o}}updateElement(e,t,i,r){dx(r)?Object.assign(e,i):this._resolveAnimations(t,r).update(e,i)}updateSharedOptions(e,t,i){e&&!dx(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=t.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t,i=!0){const r=this._cachedMeta,s=r.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,t),i&&this.updateElements(s,e,t,"reset")}updateElements(e,t,i,r){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,t);i._stacked&&mm(i,r)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,r]=e;this[t](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ho.defaults={};ho.datasetElementType=null;ho.dataElementType=null;function Hse(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=t.length;r<s;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=H8(i.sort((r,s)=>r-s))}return n._cache.$bar}function $se(n){const e=n.iScale,t=Hse(e,n.type);let i=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(ew(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=t.length;r<s;++r)o=e.getPixelForValue(t[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function Fse(n,e,t,i){const r=t.barThickness;let s,o;return kt(r)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[n]-s/2}}function Bse(n,e,t,i){const r=e.pixels,s=r[n];let o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null;const l=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:t.barPercentage,start:c}}function Vse(n,e,t,i){const r=t.parse(n[0],i),s=t.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function r4(n,e,t,i){return On(n)?Vse(n,e,t,i):e[t.axis]=t.parse(n,i),e}function N2(n,e,t,i){const r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,d;for(c=t,u=t+i;c<u;++c)d=e[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(r4(d,h,s,c));return l}function fx(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Wse(n,e,t){return n!==0?Qa(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function jse(n){let e,t,i,r,s;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:i,reverse:e,top:r,bottom:s}}function zse(n,e,t,i){let r=e.borderSkipped;const s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=jse(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=c:(t._bottom||0)===i?r=u:(s[L2(u,o,a,l)]=!0,r=c)),s[L2(r,o,a,l)]=!0,n.borderSkipped=s}function L2(n,e,t,i){return i?(n=Use(n,e,t),n=H2(n,t,e)):n=H2(n,e,t),n}function Use(n,e,t){return n===e?t:n===t?e:n}function H2(n,e,t){return n==="start"?e:n==="end"?t:n}function Gse(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class r1 extends ho{parsePrimitiveData(e,t,i,r){return N2(e,t,i,r)}parseArrayData(e,t,i,r){return N2(e,t,i,r)}parseObjectData(e,t,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,f,g,p;for(d=i,f=i+r;d<f;++d)p=t[d],g={},g[s.axis]=s.parse(Wu(p,c),d),h.push(r4(Wu(p,u),g,o,d));return h}updateRangeFromParsed(e,t,i,r){super.updateRangeFromParsed(e,t,i,r);const s=i._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:r}=t,s=this.getParsed(e),o=s._custom,a=fx(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(t,r);for(let f=t;f<t+i;f++){const g=this.getParsed(f),p=s||kt(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,u),b=(g._stacks||{})[a.axis],y={horizontal:c,base:p.base,enableBorderRadius:!b||fx(g._custom)||o===b._top||o===b._bottom,x:c?p.head:m.center,y:c?m.center:p.head,height:c?m.size:Math.abs(p.size),width:c?Math.abs(p.size):m.size};d&&(y.options=h||this.resolveDataElementOptions(f,e[f].active?"active":r));const w=y.options||e[f].options;zse(y,w,b,o),Gse(y,w,u.ratio),this.updateElement(e[f],f,y,r)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(t),l=a&&a[i.axis],c=u=>{const h=u._parsed.find(f=>f[i.axis]===l),d=h&&h[u.vScale.axis];if(kt(d)||isNaN(d))return!0};for(const u of r)if(!(t!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const r=this._getStacks(e,i),s=t!==void 0?r.indexOf(t):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,r=[];let s,o;for(s=0,o=t.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||$se(t),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=fx(c);let h=l[t.axis],d=0,f=i?this.applyStack(t,l,i):h,g,p;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&Qa(h)!==Qa(c.barEnd)&&(d=0),d+=h);const m=!kt(s)&&!u?s:d;let b=t.getPixelForValue(m);if(this.chart.getDataVisibility(e)?g=t.getPixelForValue(d+f):g=b,p=g-b,Math.abs(p)<o){p=Wse(p,t,a)*o,h===a&&(b-=p/2);const y=t.getPixelForDecimal(0),w=t.getPixelForDecimal(1),R=Math.min(y,w),E=Math.max(y,w);b=Math.max(Math.min(b,E),R),g=b+p,i&&!u&&(l._stacks[t.axis]._visualValues[r]=t.getValueForPixel(g)-t.getValueForPixel(b))}if(b===t.getPixelForValue(a)){const y=Qa(p)*t.getLineWidthForValue(a)/2;b+=y,p-=y}return{size:p,base:b,head:g,center:g+p/2}}_calculateBarIndexPixels(e,t){const i=t.scale,r=this.options,s=r.skipNull,o=nt(r.maxBarThickness,1/0);let a,l;if(t.grouped){const c=s?this._getStackCount(e):t.stackCount,u=r.barThickness==="flex"?Bse(e,t,r,c):Fse(e,t,r,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[t.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}r1.id="bar";r1.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};r1.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class s1 extends ho{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,r){const s=super.parsePrimitiveData(e,t,i,r);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+i).radius;return s}parseArrayData(e,t,i,r){const s=super.parseArrayData(e,t,i,r);for(let o=0;o<s.length;o++){const a=t[i+o];s[o]._custom=nt(a[2],this.resolveDataElementOptions(o+i).radius)}return s}parseObjectData(e,t,i,r){const s=super.parseObjectData(e,t,i,r);for(let o=0;o<s.length;o++){const a=t[i+o];s[o]._custom=nt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=t,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,r){const s=r==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(t,r),u=o.axis,h=a.axis;for(let d=t;d<t+i;d++){const f=e[d],g=!s&&this.getParsed(d),p={},m=p[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(g[u]),b=p[h]=s?a.getBasePixel():a.getPixelForValue(g[h]);p.skip=isNaN(m)||isNaN(b),c&&(p.options=l||this.resolveDataElementOptions(d,f.active?"active":r),s&&(p.options.radius=0)),this.updateElement(f,d,p,r)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return t!=="active"&&(r.radius=0),r.radius+=nt(i&&i._custom,s),r}}s1.id="bubble";s1.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};s1.overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};function Yse(n,e,t){let i=1,r=1,s=0,o=0;if(e<Rn){const a=n,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(w,R,E)=>tw(w,a,l,!0)?1:Math.max(R,R*t,E,E*t),g=(w,R,E)=>tw(w,a,l,!0)?-1:Math.min(R,R*t,E,E*t),p=f(0,c,h),m=f(oi,u,d),b=g(En,c,h),y=g(En+oi,u,d);i=(p-b)/2,r=(m-y)/2,s=-(p+b)/2,o=-(m+y)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}class vf extends ho{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(Et(i[e])){const{key:l="value"}=this._parsing;s=c=>+Wu(i[c],l)}let o,a;for(o=e,a=e+t;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return Yo(this.options.rotation-90)}_getCircumference(){return Yo(this.options.circumference)}_getRotationExtents(){let e=Rn,t=-Rn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();e=Math.min(e,s),t=Math.max(t,s+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(are(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:g,offsetY:p}=Yse(h,u,l),m=(i.width-o)/d,b=(i.height-o)/f,y=Math.max(Math.min(m,b)/2,0),w=O8(this.options.radius,y),R=Math.max(w*l,0),E=(w-R)/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=p*w,r.total=this.calculateTotal(),this.outerRadius=w-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/Rn)}updateElements(e,t,i,r){const s=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=s&&c.animateScale,f=d?0:this.innerRadius,g=d?0:this.outerRadius,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(t,r);let b=this._getRotation(),y;for(y=0;y<t;++y)b+=this._circumference(y,s);for(y=t;y<t+i;++y){const w=this._circumference(y,s),R=e[y],E={x:u+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+w,circumference:w,outerRadius:g,innerRadius:f};m&&(E.options=p||this.resolveDataElementOptions(y,R.active?"active":r)),b+=w,this.updateElement(R,y,E,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,r;for(r=0;r<t.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!t[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Rn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=Bw(t._parsed[e],i.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const i=this.chart;let r,s,o,a,l;if(!e){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,r=e.length;i<r;++i){const s=this.resolveDataElementOptions(i);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(nt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}vf.id="doughnut";vf.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};vf.descriptors={_scriptable:n=>n!=="spacing",_indexable:n=>n!=="spacing"&&!n.startsWith("borderDash")&&!n.startsWith("hoverBorderDash")};vf.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:i}}=n.legend.options;return e.labels.map((r,s)=>{const a=n.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:t,hidden:!n.getDataVisibility(s),index:s}})}return[]}},onClick(n,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}}};class o1 extends ho{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=B8(t,r,o);this._drawStart=a,this._drawCount=l,V8(t)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,t,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,r),d=o.axis,f=a.axis,{spanGaps:g,segment:p}=this.options,m=vp(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||s||r==="none",y=t+i,w=e.length;let R=t>0&&this.getParsed(t-1);for(let E=0;E<w;++E){const _=e[E],T=b?_:{};if(E<t||E>=y){T.skip=!0;continue}const I=this.getParsed(E),x=kt(I[f]),P=T[d]=o.getPixelForValue(I[d],E),D=T[f]=s||x?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,I,l):I[f],E);T.skip=isNaN(P)||isNaN(D)||x,T.stop=E>0&&Math.abs(I[d]-R[d])>m,p&&(T.parsed=I,T.raw=c.data[E]),h&&(T.options=u||this.resolveDataElementOptions(E,_.active?"active":r)),b||this.updateElement(_,E,T,r),R=I}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}o1.id="line";o1.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};o1.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Vw extends ho{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=Bw(t._parsed[e].r,i.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,t,i,r){return q8.bind(this)(e,t,i,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(r/2,0),o=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,i,r){const s=r==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,d=c.getIndexAngle(0)-.5*En;let f=d,g;const p=360/this.countVisibleElements();for(g=0;g<t;++g)f+=this._computeAngle(g,r,p);for(g=t;g<t+i;g++){const m=e[g];let b=f,y=f+this._computeAngle(g,r,p),w=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;f=y,s&&(l.animateScale&&(w=0),l.animateRotate&&(b=y=d));const R={x:u,y:h,innerRadius:0,outerRadius:w,startAngle:b,endAngle:y,options:this.resolveDataElementOptions(g,m.active?"active":r)};this.updateElement(m,g,R,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?Yo(this.resolveDataElementOptions(e,t).angle||i):0}}Vw.id="polarArea";Vw.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};Vw.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:i}}=n.legend.options;return e.labels.map((r,s)=>{const a=n.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:t,hidden:!n.getDataVisibility(s),index:s}})}return[]}},onClick(n,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class lk extends vf{}lk.id="pie";lk.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class a1 extends ho{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,r){return q8.bind(this)(e,t,i,r)}update(e){const t=this._cachedMeta,i=t.dataset,r=t.data||[],s=t.iScale.getLabels();if(i.points=r,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,i,r){const s=this._cachedMeta.rScale,o=r==="reset";for(let a=t;a<t+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":r),u=s.getPointPositionForValue(a,this.getParsed(a).r),h=o?s.xCenter:u.x,d=o?s.yCenter:u.y,f={x:h,y:d,angle:u.angle,skip:isNaN(h)||isNaN(d),options:c};this.updateElement(l,a,f,r)}}}a1.id="radar";a1.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};a1.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class l1 extends ho{getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=t,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,r=this.chart._animationsDisabled;let{start:s,count:o}=B8(t,i,r);if(this._drawStart=s,this._drawCount=o,V8(t)&&(s=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(t,r),h=this.getSharedOptions(u),d=this.includeOptions(r,h),f=o.axis,g=a.axis,{spanGaps:p,segment:m}=this.options,b=vp(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||r==="none";let w=t>0&&this.getParsed(t-1);for(let R=t;R<t+i;++R){const E=e[R],_=this.getParsed(R),T=y?E:{},I=kt(_[g]),x=T[f]=o.getPixelForValue(_[f],R),P=T[g]=s||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[g],R);T.skip=isNaN(x)||isNaN(P)||I,T.stop=R>0&&Math.abs(_[f]-w[f])>b,m&&(T.parsed=_,T.raw=c.data[R]),d&&(T.options=h||this.resolveDataElementOptions(R,E.active?"active":r)),y||this.updateElement(E,R,T,r),w=_}this.updateSharedOptions(h,r,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,r=i.options&&i.options.borderWidth||0;if(!t.length)return r;const s=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,s,o)/2}}l1.id="scatter";l1.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};l1.overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};var Kse=Object.freeze({__proto__:null,BarController:r1,BubbleController:s1,DoughnutController:vf,LineController:o1,PieController:lk,PolarAreaController:Vw,RadarController:a1,ScatterController:l1});function ph(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ck{static override(e){Object.assign(ck.prototype,e)}constructor(e){this.options=void 0,this.options=e||{}}init(){}formats(){return ph()}parse(){return ph()}format(){return ph()}add(){return ph()}diff(){return ph()}startOf(){return ph()}endOf(){return ph()}}var qse={_date:ck};function Xse(n,e,t,i){const{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?wre:cc;if(i){if(r._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(s,e,t-u),d=l(s,e,t+u);return{lo:h.lo,hi:d.hi}}}}else return l(s,e,t)}return{lo:0,hi:s.length-1}}function Ww(n,e,t,i,r){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:d}=Xse(s[a],e,o,r);for(let f=h;f<=d;++f){const g=u[f];g.skip||i(g,c,f)}}}function Zse(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function gx(n,e,t,i,r){const s=[];return!r&&!n.isPointInArea(e)||Ww(n,t,e,function(a,l,c){!r&&!uc(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function Qse(n,e,t,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=N8(o,{x:e.x,y:e.y});tw(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Ww(n,t,e,s),r}function Jse(n,e,t,i,r,s){let o=[];const a=Zse(t);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,r);if(i&&!f)return;const g=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(g))&&!f)return;const m=a(e,g);m<l?(o=[{element:u,datasetIndex:h,index:d}],l=m):m===l&&o.push({element:u,datasetIndex:h,index:d})}return Ww(n,t,e,c),o}function px(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?Qse(n,e,t,r):Jse(n,e,t,i,r,s)}function $2(n,e,t,i,r){const s=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return Ww(n,t,e,(l,c,u)=>{l[o]&&l[o](e[t],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var eoe={evaluateInteractionItems:Ww,modes:{index(n,e,t,i){const r=ad(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?gx(n,r,s,i,o):px(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,i){const r=ad(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?gx(n,r,s,i,o):px(n,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,e,t,i){const r=ad(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return gx(n,r,s,i,o)},nearest(n,e,t,i){const r=ad(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return px(n,r,s,t.intersect,i,o)},x(n,e,t,i){const r=ad(e,n);return $2(n,r,"x",t.intersect,i)},y(n,e,t,i){const r=ad(e,n);return $2(n,r,"y",t.intersect,i)}}};const s4=["left","top","right","bottom"];function vm(n,e){return n.filter(t=>t.pos===e)}function F2(n,e){return n.filter(t=>s4.indexOf(t.pos)===-1&&t.box.axis===e)}function bm(n,e){return n.sort((t,i)=>{const r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function toe(n){const e=[];let t,i,r,s,o,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function noe(n){const e={};for(const t of n){const{stack:i,pos:r,stackWeight:s}=t;if(!i||!s4.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function ioe(n,e){const t=noe(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,c=t[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return t}function roe(n){const e=toe(n),t=bm(e.filter(c=>c.box.fullSize),!0),i=bm(vm(e,"left"),!0),r=bm(vm(e,"right")),s=bm(vm(e,"top"),!0),o=bm(vm(e,"bottom")),a=F2(e,"x"),l=F2(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:vm(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function B2(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function o4(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function soe(n,e,t,i){const{pos:r,box:s}=t,o=n.maxPadding;if(!Et(r)){t.size&&(n[r]-=t.size);const h=i[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?s.height:s.width),t.size=h.size/h.count,n[r]+=t.size}s.getPadding&&o4(o,s.getPadding());const a=Math.max(0,e.outerWidth-B2(o,n,"left","right")),l=Math.max(0,e.outerHeight-B2(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function ooe(n){const e=n.maxPadding;function t(i){const r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function aoe(n,e){const t=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function Nv(n,e,t,i){const r=[];let s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||e.w,a.height||e.h,aoe(a.horizontal,e));const{same:h,other:d}=soe(e,t,a,i);c|=h&&r.length,u=u||d,l.fullSize||r.push(a)}return c&&Nv(r,e,t,i)||u}function jy(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function V2(n,e,t,i){const r=t.padding;let{x:s,y:o}=e;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;ew(c.start)&&(o=c.start),l.fullSize?jy(l,r.left,o,t.outerWidth-r.right-r.left,d):jy(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;ew(c.start)&&(s=c.start),l.fullSize?jy(l,s,r.top,d,t.outerHeight-r.bottom-r.top):jy(l,s,e.top+c.placed,d,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=o}var or={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const r=dr(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=roe(n.boxes),l=a.vertical,c=a.horizontal;en(n.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const u=l.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);o4(d,dr(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),g=ioe(l.concat(c),h);Nv(a.fullSize,f,h,g),Nv(l,f,h,g),Nv(c,f,h,g)&&Nv(l,f,h,g),ooe(f),V2(a.leftAndTop,f,h,g),f.x+=f.w,f.y+=f.h,V2(a.rightAndBottom,f,h,g),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},en(a.chartArea,p=>{const m=p.box;Object.assign(m,n.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class a4{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}}class loe extends a4{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const cS="$chartjs",coe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},W2=n=>n===null||n==="";function uoe(n,e){const t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[cS]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",W2(r)){const s=E2(n,"width");s!==void 0&&(n.width=s)}if(W2(i))if(n.style.height==="")n.height=n.width/(e||2);else{const s=E2(n,"height");s!==void 0&&(n.height=s)}return n}const l4=dse?{passive:!0}:!1;function hoe(n,e,t){n&&n.addEventListener(e,t,l4)}function doe(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,l4)}function foe(n,e){const t=coe[n.type]||n.type,{x:i,y:r}=ad(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function p_(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function goe(n,e,t){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||p_(a.addedNodes,i),o=o&&!p_(a.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function poe(n,e,t){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||p_(a.removedNodes,i),o=o&&!p_(a.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const iw=new Map;let j2=0;function c4(){const n=window.devicePixelRatio;n!==j2&&(j2=n,iw.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function moe(n,e){iw.size||window.addEventListener("resize",c4),iw.set(n,e)}function voe(n){iw.delete(n),iw.size||window.removeEventListener("resize",c4)}function boe(n,e,t){const i=n.canvas,r=i&&ak(i);if(!r)return;const s=F8((a,l)=>{const c=r.clientWidth;t(a,l),c<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),moe(n,s),o}function mx(n,e,t){t&&t.disconnect(),e==="resize"&&voe(n)}function woe(n,e,t){const i=n.canvas,r=F8(s=>{n.ctx!==null&&t(foe(s,n))},n);return hoe(i,e,r),r}class yoe extends a4{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(uoe(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[cS])return!1;const i=t[cS].initial;["height","width"].forEach(s=>{const o=i[s];kt(o)?t.removeAttribute(s):t.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[cS],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),o={attach:goe,detach:poe,resize:boe}[t]||woe;r[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:mx,detach:mx,resize:mx}[t]||doe)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return hse(e,t,i,r)}isAttached(e){const t=e&&ak(e);return!!(t&&t.isConnected)}}function Coe(n){return!ok()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?loe:yoe}class fo{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return vp(this.x)&&vp(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}fo.defaults={};fo.defaultRoutes=void 0;function Soe(n,e){const t=n.options.ticks,i=_oe(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?Eoe(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return xoe(e,c,s,o/r),c;const u=Roe(s,e,r);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(zy(e,c,u,kt(f)?0:a-f,a),h=0,d=o-1;h<d;h++)zy(e,c,u,s[h],s[h+1]);return zy(e,c,u,l,kt(f)?e.length:l+f),c}return zy(e,c,u),c}function _oe(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function Roe(n,e,t){const i=Toe(n),r=e.length/t;if(!i)return Math.max(r,1);const s=pre(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function Eoe(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function xoe(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function zy(n,e,t,i,r){const s=nt(i,0),o=Math.min(nt(r,n.length),n.length);let a=0,l,c,u;for(t=Math.ceil(t),r&&(l=r-i,t=l/Math.floor(l/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(n[c]),a++,u=Math.round(s+a*t))}function Toe(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const Moe=n=>n==="left"?"right":n==="right"?"left":n,z2=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,U2=(n,e)=>Math.min(e||n,n);function G2(n,e){const t=[],i=n.length/e,r=n.length;let s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function Aoe(n,e,t){const i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(r),c;if(!(t&&(i===1?c=Math.max(l-s,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function Poe(n,e){en(n,t=>{const i=t.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function wm(n){return n.drawTicks?n.tickLength:0}function Y2(n,e){if(!n.display)return 0;const t=Ti(n.font,e),i=dr(n.padding);return(On(n.text)?n.text.length:1)*t.lineHeight+i.height}function Ioe(n,e){return ih(n,{scale:e,type:"scale"})}function Ooe(n,e,t){return ih(n,{tick:t,index:e,type:"tick"})}function koe(n,e,t){let i=ek(n);return(t&&e!=="right"||!t&&e==="right")&&(i=Moe(i)),i}function Doe(n,e,t,i){const{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let h=0,d,f,g;const p=o-r,m=a-s;if(n.isHorizontal()){if(f=nr(i,s,a),Et(t)){const b=Object.keys(t)[0],y=t[b];g=u[b].getPixelForValue(y)+p-e}else t==="center"?g=(c.bottom+c.top)/2+p-e:g=z2(n,t,e);d=a-s}else{if(Et(t)){const b=Object.keys(t)[0],y=t[b];f=u[b].getPixelForValue(y)-m+e}else t==="center"?f=(c.left+c.right)/2-m+e:f=z2(n,t,e);g=nr(i,o,r),h=t==="left"?-oi:oi}return{titleX:f,titleY:g,maxWidth:d,rotation:h}}class rh extends fo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=as(e,Number.POSITIVE_INFINITY),t=as(t,Number.NEGATIVE_INFINITY),i=as(i,Number.POSITIVE_INFINITY),r=as(r,Number.NEGATIVE_INFINITY),{min:as(e,i),max:as(t,r),minDefined:ti(e),maxDefined:ti(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:as(t,as(i,t)),max:as(i,as(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){bn(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=jre(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?G2(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Soe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){bn(this.options.afterUpdate,[this])}beforeSetDimensions(){bn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){bn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),bn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){bn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=bn(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){bn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){bn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=U2(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=Hi(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-wm(e.grid)-t.padding-Y2(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=QO(Math.min(Math.asin(Hi((u.highest.height+6)/a,-1,1)),Math.asin(Hi(l/c,-1,1))-Math.asin(Hi(d/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){bn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){bn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Y2(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=wm(s)+l):(e.height=this.maxHeight,e.width=wm(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,g=Yo(this.labelRotation),p=Math.cos(g),m=Math.sin(g);if(a){const b=i.mirror?0:m*h.width+p*d.height;e.height=Math.min(this.maxHeight,e.height+b+f)}else{const b=i.mirror?0:p*h.width+m*d.height;e.width=Math.min(this.maxWidth,e.width+b+f)}this._calculatePadding(c,u,m,p)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=r*e.width,f=i*t.height):(d=i*e.height,f=r*t.width):s==="start"?f=t.width:s==="end"?d=e.width:s!=="inner"&&(d=e.width/2,f=t.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=t.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){bn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)kt(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=G2(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(t/U2(t,i));let c=0,u=0,h,d,f,g,p,m,b,y,w,R,E;for(h=0;h<t;h+=l){if(g=e[h].label,p=this._resolveTickFontOptions(h),r.font=m=p.string,b=s[m]=s[m]||{data:{},gc:[]},y=p.lineHeight,w=R=0,!kt(g)&&!On(g))w=d_(r,b.data,b.gc,w,g),R=y;else if(On(g))for(d=0,f=g.length;d<f;++d)E=g[d],!kt(E)&&!On(E)&&(w=d_(r,b.data,b.gc,w,E),R+=y);o.push(w),a.push(R),c=Math.max(w,c),u=Math.max(R,u)}Poe(s,t);const _=o.indexOf(c),T=a.indexOf(u),I=x=>({width:o[x]||0,height:a[x]||0});return{first:I(0),last:I(t-1),widest:I(_),highest:I(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return bre(this._alignToPixels?gh(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=Ooe(this.getContext(),e,i))}return this.$context||(this.$context=Ioe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Yo(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=wm(s),f=[],g=a.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,b=function(k){return gh(i,k,p)};let y,w,R,E,_,T,I,x,P,D,B,V;if(o==="top")y=b(this.bottom),T=this.bottom-d,x=y-m,D=b(e.top)+m,V=e.bottom;else if(o==="bottom")y=b(this.top),D=e.top,V=b(e.bottom)-m,T=y+m,x=this.top+d;else if(o==="left")y=b(this.right),_=this.right-d,I=y-m,P=b(e.left)+m,B=e.right;else if(o==="right")y=b(this.left),P=e.left,B=b(e.right)-m,_=y+m,I=this.left+d;else if(t==="x"){if(o==="center")y=b((e.top+e.bottom)/2+.5);else if(Et(o)){const k=Object.keys(o)[0],F=o[k];y=b(this.chart.scales[k].getPixelForValue(F))}D=e.top,V=e.bottom,T=y+m,x=T+d}else if(t==="y"){if(o==="center")y=b((e.left+e.right)/2);else if(Et(o)){const k=Object.keys(o)[0],F=o[k];y=b(this.chart.scales[k].getPixelForValue(F))}_=y-m,I=_-d,P=e.left,B=e.right}const z=nt(r.ticks.maxTicksLimit,h),L=Math.max(1,Math.ceil(h/z));for(w=0;w<h;w+=L){const k=this.getContext(w),F=s.setContext(k),G=a.setContext(k),U=F.lineWidth,se=F.color,v=G.dash||[],C=G.dashOffset,S=F.tickWidth,A=F.tickColor,H=F.tickBorderDash||[],M=F.tickBorderDashOffset;R=Aoe(this,w,l),R!==void 0&&(E=gh(i,R,U),c?_=I=P=B=E:T=x=D=V=E,f.push({tx1:_,ty1:T,tx2:I,ty2:x,x1:P,y1:D,x2:B,y2:V,width:U,color:se,borderDash:v,borderDashOffset:C,tickWidth:S,tickColor:A,tickBorderDash:H,tickBorderDashOffset:M}))}return this._ticksLength=h,this._borderValue=y,f}_computeLabelItems(e){const t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,d=wm(i.grid),f=d+u,g=h?-u:f,p=-Yo(this.labelRotation),m=[];let b,y,w,R,E,_,T,I,x,P,D,B,V="middle";if(r==="top")_=this.bottom-g,T=this._getXAxisLabelAlignment();else if(r==="bottom")_=this.top+g,T=this._getXAxisLabelAlignment();else if(r==="left"){const L=this._getYAxisLabelAlignment(d);T=L.textAlign,E=L.x}else if(r==="right"){const L=this._getYAxisLabelAlignment(d);T=L.textAlign,E=L.x}else if(t==="x"){if(r==="center")_=(e.top+e.bottom)/2+f;else if(Et(r)){const L=Object.keys(r)[0],k=r[L];_=this.chart.scales[L].getPixelForValue(k)+f}T=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")E=(e.left+e.right)/2-f;else if(Et(r)){const L=Object.keys(r)[0],k=r[L];E=this.chart.scales[L].getPixelForValue(k)}T=this._getYAxisLabelAlignment(d).textAlign}t==="y"&&(l==="start"?V="top":l==="end"&&(V="bottom"));const z=this._getLabelSizes();for(b=0,y=a.length;b<y;++b){w=a[b],R=w.label;const L=s.setContext(this.getContext(b));I=this.getPixelForTick(b)+s.labelOffset,x=this._resolveTickFontOptions(b),P=x.lineHeight,D=On(R)?R.length:1;const k=D/2,F=L.color,G=L.textStrokeColor,U=L.textStrokeWidth;let se=T;o?(E=I,T==="inner"&&(b===y-1?se=this.options.reverse?"left":"right":b===0?se=this.options.reverse?"right":"left":se="center"),r==="top"?c==="near"||p!==0?B=-D*P+P/2:c==="center"?B=-z.highest.height/2-k*P+P:B=-z.highest.height+P/2:c==="near"||p!==0?B=P/2:c==="center"?B=z.highest.height/2-k*P:B=z.highest.height-D*P,h&&(B*=-1),p!==0&&!L.showLabelBackdrop&&(E+=P/2*Math.sin(p))):(_=I,B=(1-D)*P/2);let v;if(L.showLabelBackdrop){const C=dr(L.backdropPadding),S=z.heights[b],A=z.widths[b];let H=B-C.top,M=0-C.left;switch(V){case"middle":H-=S/2;break;case"bottom":H-=S;break}switch(T){case"center":M-=A/2;break;case"right":M-=A;break;case"inner":b===y-1?M-=A:b>0&&(M-=A/2);break}v={left:M,top:H,width:A+C.width,height:S+C.height,color:L.backdropColor}}m.push({label:R,font:x,textOffset:B,options:{rotation:p,color:F,strokeColor:G,strokeWidth:U,textAlign:se,textBaseline:V,translation:[E,_],backdrop:v}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Yo(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return t==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){const l=r[s];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=gh(e,this.left,o)-o/2,u=gh(e,this.right,a)+a/2,h=d=l):(h=gh(e,this.top,o)-o/2,d=gh(e,this.bottom,a)+a/2,c=u=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(c,h),t.lineTo(u,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Od(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Zd(i,c,0,u,l,a)}r&&kd(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;const s=Ti(i.font),o=dr(i.padding),a=i.align;let l=s.lineHeight/2;t==="bottom"||t==="center"||Et(t)?(l+=o.bottom,On(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=Doe(this,l,t,a);Zd(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:d,textAlign:koe(a,t,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=nt(e.grid&&e.grid.z,-1),r=nt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==rh.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=t.length;s<o;++s){const a=t[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Ti(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Uy{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;Hoe(t)&&(i=this.register(t));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,Noe(e,o,i),this.override&&Dn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in Dn[r]&&(delete Dn[r][i],this.override&&delete Xd[i])}}function Noe(n,e,t){const i=_s(Object.create(null),[t?Dn.get(t):{},Dn.get(e),n.defaults]);Dn.set(e,i),n.defaultRoutes&&Loe(e,n.defaultRoutes),n.descriptors&&Dn.describe(e,n.descriptors)}function Loe(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");Dn.route(s,r,l,a)})}function Hoe(n){return"id"in n&&"defaults"in n}class $oe{constructor(){this.controllers=new Uy(ho,"datasets",!0),this.elements=new Uy(fo,"elements"),this.plugins=new Uy(Object,"plugins"),this.scales=new Uy(rh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):en(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){const r=ZO(e);bn(i["before"+r],[],i),t[e](i),bn(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Er=new $oe;class Foe{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[t,r,s.options];if(bn(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){kt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,r=nt(i.options&&i.options.plugins,{}),s=Boe(i);return r===!1&&!t?[]:Woe(e,s,r,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}}function Boe(n){const e={},t=[],i=Object.keys(Er.plugins.items);for(let s=0;s<i.length;s++)t.push(Er.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function Voe(n,e){return!e&&n===!1?null:n===!0?{}:n}function Woe(n,{plugins:e,localIds:t},i,r){const s=[],o=n.getContext();for(const a of e){const l=a.id,c=Voe(i[l],r);c!==null&&s.push({plugin:a,options:joe(n.config,{plugin:a,local:t[l]},c,o)})}return s}function joe(n,{plugin:e,local:t},i,r){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function JA(n,e){const t=Dn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function zoe(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function Uoe(n,e){return n===e?"_index_":"_value_"}function K2(n){if(n==="x"||n==="y"||n==="r")return n}function Goe(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function eP(n,...e){if(K2(n))return n;for(const t of e){const i=t.axis||Goe(t.position)||n.length>1&&K2(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function q2(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function Yoe(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return q2(n,"x",t[0])||q2(n,"y",t[0])}return{}}function Koe(n,e){const t=Xd[n.type]||{scales:{}},i=e.scales||{},r=JA(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Et(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=eP(o,a,Yoe(o,n),Dn.scales[a.type]),c=Uoe(l,r),u=t.scales||{};s[o]=cb(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||JA(a,e),u=(Xd[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=zoe(h,l),f=o[d+"AxisID"]||d;s[f]=s[f]||Object.create(null),cb(s[f],[{axis:d},i[f],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];cb(a,[Dn.scales[a.type],Dn.scale])}),s}function u4(n){const e=n.options||(n.options={});e.plugins=nt(e.plugins,{}),e.scales=Koe(n,e)}function h4(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function qoe(n){return n=n||{},n.data=h4(n.data),u4(n),n}const X2=new Map,d4=new Set;function Gy(n,e){let t=X2.get(n);return t||(t=e(),X2.set(n,t),d4.add(t)),t}const ym=(n,e,t)=>{const i=Wu(e,t);i!==void 0&&n.add(i)};class Xoe{constructor(e){this._config=qoe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=h4(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),u4(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Gy(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Gy(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Gy(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return Gy(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(h=>ym(l,e,h))),u.forEach(h=>ym(l,r,h)),u.forEach(h=>ym(l,Xd[s]||{},h)),u.forEach(h=>ym(l,Dn,h)),u.forEach(h=>ym(l,QA,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),d4.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,Xd[t]||{},Dn.datasets[t]||{},{type:t},Dn,QA]}resolveNamedOptions(e,t,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Z2(this._resolverCache,e,r);let l=o;if(Qoe(o,t)){s.$shared=!1,i=ju(i)?i():i;const c=this.createResolver(e,i,a);l=bp(o,i,c)}for(const c of t)s[c]=l[c];return s}createResolver(e,t,i=[""],r){const{resolver:s}=Z2(this._resolverCache,e,i);return Et(t)?bp(s,t,void 0,r):s}}function Z2(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const r=t.join();let s=i.get(r);return s||(s={resolver:ik(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const Zoe=n=>Et(n)&&Object.getOwnPropertyNames(n).some(e=>ju(n[e]));function Qoe(n,e){const{isScriptable:t,isIndexable:i}=U8(n);for(const r of e){const s=t(r),o=i(r),a=(o||s)&&n[r];if(s&&(ju(a)||Zoe(a))||o&&On(a))return!0}return!1}var Joe="4.4.6";const eae=["top","bottom","left","right","chartArea"];function Q2(n,e){return n==="top"||n==="bottom"||eae.indexOf(n)===-1&&e==="x"}function J2(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function eF(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),bn(t&&t.onComplete,[n],e)}function tae(n){const e=n.chart,t=e.options.animation;bn(t&&t.onProgress,[n],e)}function f4(n){return ok()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const m_={},g4=n=>{const e=f4(n);return Object.values(m_).filter(t=>t.canvas===e).pop()};function nae(n,e,t){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=e){const o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function iae(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function Yy(n,e,t){return n.options.clip?n[t]:e[t]}function rae(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:Yy(t,e,"left"),right:Yy(t,e,"right"),top:Yy(i,e,"top"),bottom:Yy(i,e,"bottom")}:e}class Rs{static register(...e){Er.add(...e),tF()}static unregister(...e){Er.remove(...e),tF()}constructor(e,t){const i=this.config=new Xoe(t),r=f4(e),s=g4(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Coe(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=ore(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Foe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Sre(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],m_[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Wl.listen(this,"complete",eF),Wl.listen(this,"progress",tae),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:s}=this;return kt(e)?t&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Er}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():R2(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return C2(this.canvas,this.ctx),this}stop(){return Wl.stop(this),this}resize(e,t){Wl.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,R2(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),bn(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};en(t,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const a=t[o],l=eP(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),en(s,o=>{const a=o.options,l=a.id,c=eP(l,a),u=nt(a.type,o.dtype);(a.position===void 0||Q2(a.position,c)!==Q2(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=Er.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),en(r,(o,a)=>{o||delete i[a]}),en(i,o=>{or.configure(this,o,o.options),or.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>t){for(let r=t;r<i;++r)this._destroyDatasetMeta(r);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(J2("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,r)=>{t.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=t.length;i<r;i++){const s=t[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||JA(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Er.getController(a),{datasetElementType:c,dataElementType:u}=Dn.datasets[a];Object.assign(l,{dataElementType:Er.getElement(u),datasetElementType:c&&Er.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){en(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!r&&s.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||en(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(J2("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){en(this.scales,e=>{or.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!d2(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of t){const o=i==="_removeElements"?-s:s;nae(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<t;s++)if(!d2(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;or.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],en(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,ju(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Wl.has(this)?this.attached&&!Wl.running(this)&&Wl.start(this):(this.draw(),eF({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let r,s;for(r=0,s=t.length;r<s;++r){const o=t[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,r=!i.disabled,s=rae(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&Od(t,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&kd(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return uc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,r){const s=eoe.modes[t];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=ih(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);ew(t)?(s.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Wl.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),C2(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete m_[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};en(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){en(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},en(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const r=i?"set":"remove";let s,o,a,l;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!c_(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(t,e),a=i?e:s(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:r=[],options:s}=this,o=t,a=this._getActiveElements(e,r,i,o),l=dre(e),c=iae(e,this._lastEvent,i,l);i&&(this._lastEvent=null,bn(s.onHover,[e,a,this],this),l&&bn(s.onClick,[e,a,this],this));const u=!c_(a,r);return(u||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=c,u}_getActiveElements(e,t,i,r){if(e.type==="mouseout")return[];if(!i)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}Rs.defaults=Dn;Rs.instances=m_;Rs.overrides=Xd;Rs.registry=Er;Rs.version=Joe;Rs.getChart=g4;function tF(){return en(Rs.instances,n=>n._plugins.invalidate())}function sae(n,e,t){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;n.beginPath(),n.arc(s,o,a,i-c,t+c),l>r?(c=r/l,n.arc(s,o,l,t+c,i-c,!0)):n.arc(s,o,r,t+oi,i-oi),n.closePath(),n.clip()}function oae(n){return nk(n,["outerStart","outerEnd","innerStart","innerEnd"])}function aae(n,e,t,i){const r=oae(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,i*e/2),a=l=>{const c=(t-Math.min(s,l))*i/2;return Hi(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Hi(r.innerStart,0,o),innerEnd:Hi(r.innerEnd,0,o)}}function Hf(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function v_(n,e,t,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+t-c,0),d=u>0?u+i+t+c:0;let f=0;const g=r-l;if(i){const L=u>0?u-i:0,k=h>0?h-i:0,F=(L+k)/2,G=F!==0?g*F/(F+i):g;f=(g-G)/2}const p=Math.max(.001,g*h-t/En)/h,m=(g-p)/2,b=l+m+f,y=r-m-f,{outerStart:w,outerEnd:R,innerStart:E,innerEnd:_}=aae(e,d,h,y-b),T=h-w,I=h-R,x=b+w/T,P=y-R/I,D=d+E,B=d+_,V=b+E/D,z=y-_/B;if(n.beginPath(),s){const L=(x+P)/2;if(n.arc(o,a,h,x,L),n.arc(o,a,h,L,P),R>0){const U=Hf(I,P,o,a);n.arc(U.x,U.y,R,P,y+oi)}const k=Hf(B,y,o,a);if(n.lineTo(k.x,k.y),_>0){const U=Hf(B,z,o,a);n.arc(U.x,U.y,_,y+oi,z+Math.PI)}const F=(y-_/d+(b+E/d))/2;if(n.arc(o,a,d,y-_/d,F,!0),n.arc(o,a,d,F,b+E/d,!0),E>0){const U=Hf(D,V,o,a);n.arc(U.x,U.y,E,V+Math.PI,b-oi)}const G=Hf(T,b,o,a);if(n.lineTo(G.x,G.y),w>0){const U=Hf(T,x,o,a);n.arc(U.x,U.y,w,b-oi,x)}}else{n.moveTo(o,a);const L=Math.cos(x)*h+o,k=Math.sin(x)*h+a;n.lineTo(L,k);const F=Math.cos(P)*h+o,G=Math.sin(P)*h+a;n.lineTo(F,G)}n.closePath()}function lae(n,e,t,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){v_(n,e,t,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(a)||(l=o+(a%Rn||Rn))}return v_(n,e,t,i,l,r),n.fill(),l}function cae(n,e,t,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;n.setLineDash(h||[]),n.lineDashOffset=d,f?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let g=e.endAngle;if(s){v_(n,e,t,i,g,r);for(let p=0;p<s;++p)n.stroke();isNaN(a)||(g=o+(a%Rn||Rn))}f&&sae(n,e,g),s||(v_(n,e,t,i,g,r),n.stroke())}class jw extends fo{constructor(e){super(),this.circumference=void 0,this.endAngle=void 0,this.fullCircles=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=void 0,this.startAngle=void 0,this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const r=this.getProps(["x","y"],i),{angle:s,distance:o}=N8(r,{x:e,y:t}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,f=nt(h,l-a),g=tw(s,a,l)&&a!==l,p=f>=Rn||g,m=lc(o,c+d,u+d);return p&&m}getCenterPoint(e){const{x:t,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,u=(r+s)/2,h=(o+a+c+l)/2;return{x:t+Math.cos(u)*h,y:i+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>Rn?Math.floor(i/Rn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const l=1-Math.sin(Math.min(En,i||0)),c=r*l;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,lae(e,this,c,s,o),cae(e,this,c,s,o),e.restore()}}jw.id="arc";jw.defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};jw.defaultRoutes={backgroundColor:"backgroundColor"};jw.descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"};function p4(n,e,t=e){n.lineCap=nt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(nt(t.borderDash,e.borderDash)),n.lineDashOffset=nt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=nt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=nt(t.borderWidth,e.borderWidth),n.strokeStyle=nt(t.borderColor,e.borderColor)}function uae(n,e,t){n.lineTo(t.x,t.y)}function hae(n){return n.stepped?Dre:n.tension||n.cubicInterpolationMode==="monotone"?Nre:uae}function m4(n,e,t={}){const i=n.length,{start:r=0,end:s=i-1}=t,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function dae(n,e,t,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=m4(r,t,i),u=hae(s);let{move:h=!0,reverse:d}=i||{},f,g,p;for(f=0;f<=c;++f)g=r[(a+(d?c-f:f))%o],!g.skip&&(h?(n.moveTo(g.x,g.y),h=!1):u(n,p,g,d,s.stepped),p=g);return l&&(g=r[(a+(d?c:0))%o],u(n,p,g,d,s.stepped)),!!l}function fae(n,e,t,i){const r=e.points,{count:s,start:o,ilen:a}=m4(r,t,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,d,f,g,p,m,b;const y=R=>(o+(c?a-R:R))%s,w=()=>{p!==m&&(n.lineTo(u,m),n.lineTo(u,p),n.lineTo(u,b))};for(l&&(f=r[y(0)],n.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=r[y(d)],f.skip)continue;const R=f.x,E=f.y,_=R|0;_===g?(E<p?p=E:E>m&&(m=E),u=(h*u+R)/++h):(w(),n.lineTo(R,E),g=_,h=0,p=m=E),b=E}w()}function tP(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?fae:dae}function gae(n){return n.stepped?fse:n.tension||n.cubicInterpolationMode==="monotone"?gse:ld}function pae(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),p4(n,e.options),n.stroke(r)}function mae(n,e,t,i){const{segments:r,options:s}=e,o=tP(e);for(const a of r)p4(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const vae=typeof Path2D=="function";function bae(n,e,t,i){vae&&!e.options.segment?pae(n,e,t,i):mae(n,e,t,i)}class sh extends fo{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;sse(this._points,i,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=yse(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,r=e[t],s=this.points,o=t4(this,{property:t,start:r,end:r});if(!o.length)return;const a=[],l=gae(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=s[h],g=s[d];if(f===g){a.push(f);continue}const p=Math.abs((r-f[t])/(g[t]-f[t])),m=l(f,g,p,i.stepped);m[t]=e[t],a.push(m)}return a.length===1?a[0]:a}pathSegment(e,t,i){return tP(this)(e,this,t,i)}path(e,t,i){const r=this.segments,s=tP(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const a of r)o&=s(e,this,a,{start:t,end:t+i-1});return!!o}draw(e,t,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),bae(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}sh.id="line";sh.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};sh.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};sh.descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"&&n!=="fill"};function nF(n,e,t,i){const r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}class zw extends fo{constructor(e){super(),this.parsed=void 0,this.skip=void 0,this.stop=void 0,this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const r=this.options,{x:s,y:o}=this.getProps(["x","y"],i);return Math.pow(e-s,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return nF(this,e,"x",t)}inYRange(e,t){return nF(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!uc(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,f_(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}zw.id="point";zw.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};zw.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function v4(n,e){const{x:t,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return n.horizontal?(h=o/2,a=Math.min(t,r),l=Math.max(t,r),c=i-h,u=i+h):(h=s/2,a=t-h,l=t+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function Ru(n,e,t,i){return n?0:Hi(e,t,i)}function wae(n,e,t){const i=n.options.borderWidth,r=n.borderSkipped,s=z8(i);return{t:Ru(r.top,s.top,0,t),r:Ru(r.right,s.right,0,e),b:Ru(r.bottom,s.bottom,0,t),l:Ru(r.left,s.left,0,e)}}function yae(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Dd(r),o=Math.min(e,t),a=n.borderSkipped,l=i||Et(r);return{topLeft:Ru(!l||a.top||a.left,s.topLeft,0,o),topRight:Ru(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Ru(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ru(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Cae(n){const e=v4(n),t=e.right-e.left,i=e.bottom-e.top,r=wae(n,t/2,i/2),s=yae(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function vx(n,e,t,i){const r=e===null,s=t===null,a=n&&!(r&&s)&&v4(n,i);return a&&(r||lc(e,a.left,a.right))&&(s||lc(t,a.top,a.bottom))}function Sae(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function _ae(n,e){n.rect(e.x,e.y,e.w,e.h)}function bx(n,e,t={}){const i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}class Fp extends fo{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=Cae(this),a=Sae(o.radius)?nw:_ae;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,bx(o,t,s)),e.clip(),a(e,bx(s,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,bx(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return vx(this,e,t,i)}inXRange(e,t){return vx(this,e,null,t)}inYRange(e,t){return vx(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Fp.id="bar";Fp.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};Fp.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Rae=Object.freeze({__proto__:null,ArcElement:jw,BarElement:Fp,LineElement:sh,PointElement:zw});const nP=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],iF=nP.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function b4(n){return nP[n%nP.length]}function w4(n){return iF[n%iF.length]}function Eae(n,e){return n.borderColor=b4(e),n.backgroundColor=w4(e),++e}function xae(n,e){return n.backgroundColor=n.data.map(()=>b4(e++)),e}function Tae(n,e){return n.backgroundColor=n.data.map(()=>w4(e++)),e}function Mae(n){let e=0;return(t,i)=>{const r=n.getDatasetMeta(i).controller;r instanceof vf?e=xae(t,e):r instanceof Vw?e=Tae(t,e):r&&(e=Eae(t,e))}}function rF(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function Aae(n){return n&&(n.borderColor||n.backgroundColor)}function Pae(){return Dn.borderColor!=="rgba(0,0,0,0.1)"||Dn.backgroundColor!=="rgba(0,0,0,0.1)"}var Iae={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:i},options:r}=n.config,{elements:s}=r,o=rF(i)||Aae(r)||s&&rF(s)||Pae();if(!t.forceOverride&&o)return;const a=Mae(n);i.forEach(a)}};function Oae(n,e,t,i,r){const s=r.samples||i;if(s>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(s-2);let l=0;const c=e+t-1;let u=e,h,d,f,g,p;for(o[l++]=n[u],h=0;h<s-2;h++){let m=0,b=0,y;const w=Math.floor((h+1)*a)+1+e,R=Math.min(Math.floor((h+2)*a)+1,t)+e,E=R-w;for(y=w;y<R;y++)m+=n[y].x,b+=n[y].y;m/=E,b/=E;const _=Math.floor(h*a)+1+e,T=Math.min(Math.floor((h+1)*a)+1,t)+e,{x:I,y:x}=n[u];for(f=g=-1,y=_;y<T;y++)g=.5*Math.abs((I-m)*(n[y].y-x)-(I-n[y].x)*(b-x)),g>f&&(f=g,d=n[y],p=y);o[l++]=d,u=p}return o[l++]=n[c],o}function kae(n,e,t,i){let r=0,s=0,o,a,l,c,u,h,d,f,g,p;const m=[],b=e+t-1,y=n[e].x,R=n[b].x-y;for(o=e;o<e+t;++o){a=n[o],l=(a.x-y)/R*i,c=a.y;const E=l|0;if(E===u)c<g?(g=c,h=o):c>p&&(p=c,d=o),r=(s*r+a.x)/++s;else{const _=o-1;if(!kt(h)&&!kt(d)){const T=Math.min(h,d),I=Math.max(h,d);T!==f&&T!==_&&m.push({...n[T],x:r}),I!==f&&I!==_&&m.push({...n[I],x:r})}o>0&&_!==f&&m.push(n[_]),m.push(a),u=E,s=0,g=p=c,h=d=f=o}}return m}function y4(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function sF(n){n.data.datasets.forEach(e=>{y4(e)})}function Dae(n,e){const t=e.length;let i=0,r;const{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=Hi(cc(e,s.axis,o).lo,0,t-1)),c?r=Hi(cc(e,s.axis,a).hi+1,i,t)-i:r=t-i,{start:i,count:r}}var Nae={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){sF(n);return}const i=n.width;n.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=n.getDatasetMeta(s),c=o||r.data;if(Dv([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:h,count:d}=Dae(l,c);const f=t.threshold||4*i;if(d<=f){y4(r);return}kt(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(p){this._data=p}}));let g;switch(t.algorithm){case"lttb":g=Oae(c,h,d,i,t);break;case"min-max":g=kae(c,h,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=g})},destroy(n){sF(n)}};function Lae(n,e,t){const i=n.segments,r=n.points,s=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=uk(l,c,r);const u=iP(t,r[l],r[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}const h=t4(e,u);for(const d of h){const f=iP(t,s[d.start],s[d.end],d.loop),g=e4(a,r,f);for(const p of g)o.push({source:p,target:d,start:{[t]:oF(u,f,"start",Math.max)},end:{[t]:oF(u,f,"end",Math.min)}})}}return o}function iP(n,e,t,i){if(i)return;let r=e[n],s=t[n];return n==="angle"&&(r=gs(r),s=gs(s)),{property:n,start:r,end:s}}function Hae(n,e){const{x:t=null,y:i=null}=n||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=uk(o,a,r);const l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):t!==null&&(s.push({x:t,y:l.y}),s.push({x:t,y:c.y}))}),s}function uk(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function oF(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function C4(n,e){let t=[],i=!1;return On(n)?(i=!0,t=n):t=Hae(n,e),t.length?new sh({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function aF(n){return n&&n.fill!==!1}function $ae(n,e,t){let r=n[e].fill;const s=[e];let o;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!ti(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function Fae(n,e,t){const i=jae(n);if(Et(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return ti(r)&&Math.floor(r)===r?Bae(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Bae(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function Vae(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Et(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Wae(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:Et(n)?i=n.value:i=e.getBaseValue(),i}function jae(n){const e=n.options,t=e.fill;let i=nt(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function zae(n){const{scale:e,index:t,line:i}=n,r=[],s=i.segments,o=i.points,a=Uae(e,t);a.push(C4({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)Gae(r,o[u],a)}return new sh({points:r,options:{}})}function Uae(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function Gae(n,e,t){const i=[];for(let r=0;r<t.length;r++){const s=t[r],{first:o,last:a,point:l}=Yae(s,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function Yae(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const r=i[t],s=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],h=o[u.start][t],d=o[u.end][t];if(lc(r,h,d)){a=r===h,l=r===d;break}}return{first:a,last:l,point:i}}class S4{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:r,y:s,radius:o}=this;return t=t||{start:0,end:Rn},e.arc(r,s,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function Kae(n){const{chart:e,fill:t,line:i}=n;if(ti(t))return qae(e,t);if(t==="stack")return zae(n);if(t==="shape")return!0;const r=Xae(n);return r instanceof S4?r:C4(r,i)}function qae(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function Xae(n){return(n.scale||{}).getPointPositionForValue?Qae(n):Zae(n)}function Zae(n){const{scale:e={},fill:t}=n,i=Vae(t,e);if(ti(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function Qae(n){const{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=Wae(t,e,s),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new S4({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}function wx(n,e,t){const i=Kae(e),{line:r,scale:s,axis:o}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};i&&r.points.length&&(Od(n,t),Jae(n,{line:r,target:i,above:u,below:h,area:t,scale:s,axis:o}),kd(n))}function Jae(n,e){const{line:t,target:i,above:r,below:s,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),l==="x"&&s!==r&&(lF(n,i,o.top),cF(n,{line:t,target:i,color:r,scale:a,property:l}),n.restore(),n.save(),lF(n,i,o.bottom)),cF(n,{line:t,target:i,color:s,scale:a,property:l}),n.restore()}function lF(n,e,t){const{segments:i,points:r}=e;let s=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,u=r[l],h=r[uk(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(h.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function cF(n,e){const{line:t,target:i,property:r,color:s,scale:o}=e,a=Lae(t,i,r);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:d=s}={}}=l,f=i!==!0;n.save(),n.fillStyle=d,ele(n,o,f&&iP(r,u,h)),n.beginPath();const g=!!t.pathSegment(n,l);let p;if(f){g?n.closePath():uF(n,i,h,r);const m=!!i.pathSegment(n,c,{move:g,reverse:!0});p=g&&m,p||uF(n,i,u,r)}n.closePath(),n.fill(p?"evenodd":"nonzero"),n.restore()}}function ele(n,e,t){const{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};s==="x"&&(n.beginPath(),n.rect(o,i,a-o,r-i),n.clip())}function uF(n,e,t,i){const r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var tle={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof sh&&(l={visible:n.isDatasetVisible(o),index:o,fill:Fae(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=$ae(r,o,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&wx(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;aF(s)&&wx(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!aF(i)||t.drawTime!=="beforeDatasetDraw"||wx(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const hF=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},nle=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class dF extends fo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=bn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Ti(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=hF(i,s);let c,u;t.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let h=e;s.textAlign="left",s.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((g,p)=>{const m=i+t/2+s.measureText(g.text).width;(p===0||c[c.length-1]+m+2*a>o)&&(h+=u,c[c.length-(p>0?0:1)]=0,f+=u,d++),l[p]={left:0,top:f,row:d,width:m,height:r},c[c.length-1]+=m+a}),h}_fitCols(e,t,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,g=0,p=0;return this.legendItems.forEach((m,b)=>{const{itemWidth:y,itemHeight:w}=ile(i,t,s,m,r);b>0&&f+w+2*a>u&&(h+=d+a,c.push({width:d,height:f}),g+=d+a,p++,d=f=0),l[b]={left:g,top:f,col:p,width:y,height:w},d=Math.max(d,y),f+=w+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,o=ep(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=nr(i,this.left+r,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=nr(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=nr(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=nr(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Od(e,this),this._draw(),kd(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Dn.color,l=ep(e.rtl,this.left,this.width),c=Ti(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=hF(o,h),b=function(_,T,I){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;r.save();const x=nt(I.lineWidth,1);if(r.fillStyle=nt(I.fillStyle,a),r.lineCap=nt(I.lineCap,"butt"),r.lineDashOffset=nt(I.lineDashOffset,0),r.lineJoin=nt(I.lineJoin,"miter"),r.lineWidth=x,r.strokeStyle=nt(I.strokeStyle,a),r.setLineDash(nt(I.lineDash,[])),o.usePointStyle){const P={radius:p*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:x},D=l.xPlus(_,g/2),B=T+d;j8(r,P,D,B,o.pointStyleWidth&&g)}else{const P=T+Math.max((h-p)/2,0),D=l.leftForLtr(_,g),B=Dd(I.borderRadius);r.beginPath(),Object.values(B).some(V=>V!==0)?nw(r,{x:D,y:P,w:g,h:p,radius:B}):r.rect(D,P,g,p),r.fill(),x!==0&&r.stroke()}r.restore()},y=function(_,T,I){Zd(r,I.text,_,T+m/2,c,{strikethrough:I.hidden,textAlign:l.textAlign(I.textAlign)})},w=this.isHorizontal(),R=this._computeTitleHeight();w?f={x:nr(s,this.left+u,this.right-i[0]),y:this.top+u+R,line:0}:f={x:this.left+u,y:nr(s,this.top+R+u,this.bottom-t[0].height),line:0},Z8(this.ctx,e.textDirection);const E=m+u;this.legendItems.forEach((_,T)=>{r.strokeStyle=_.fontColor,r.fillStyle=_.fontColor;const I=r.measureText(_.text).width,x=l.textAlign(_.textAlign||(_.textAlign=o.textAlign)),P=g+d+I;let D=f.x,B=f.y;l.setWidth(this.width),w?T>0&&D+P+u>this.right&&(B=f.y+=E,f.line++,D=f.x=nr(s,this.left+u,this.right-i[f.line])):T>0&&B+E>this.bottom&&(D=f.x=D+t[f.line].width+u,f.line++,B=f.y=nr(s,this.top+R+u,this.bottom-t[f.line].height));const V=l.x(D);if(b(V,B,_),D=_re(x,D+g+d,w?D+P:this.right,e.rtl),y(l.x(D),B,_),w)f.x+=P+u;else if(typeof _.text!="string"){const z=c.lineHeight;f.y+=_4(_,z)+u}else f.y+=E}),Q8(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=Ti(t.font),r=dr(t.padding);if(!t.display)return;const s=ep(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=i.size/2,c=r.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=nr(e.align,h,this.right-d);else{const g=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);u=c+nr(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=nr(a,h,h+d);o.textAlign=s.textAlign(ek(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Zd(o,t.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,t=Ti(e.font),i=dr(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(lc(e,this.left,this.right)&&lc(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],lc(e,r.left,r.left+r.width)&&lc(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!ole(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=nle(r,i);r&&!s&&bn(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&bn(t.onHover,[e,i,this],this)}else i&&bn(t.onClick,[e,i,this],this)}}function ile(n,e,t,i,r){const s=rle(i,n,e,t),o=sle(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function rle(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+i.measureText(r).width}function sle(n,e,t){let i=n;return typeof e.text!="string"&&(i=_4(e,t)),i}function _4(n,e){const t=n.text?n.text.length:0;return e*t}function ole(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var ale={id:"legend",_element:dF,start(n,e,t){const i=n.legend=new dF({ctx:n.ctx,options:t,chart:n});or.configure(n,i,t),or.addBox(n,i)},stop(n){or.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;or.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),u=dr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class hk extends fo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const r=On(i.text)?i.text.length:1;this._padding=dr(i.padding);const s=r*Ti(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=nr(a,i,s),h=t+e,c=s-i):(o.position==="left"?(u=i+e,h=nr(a,r,t),l=En*-.5):(u=s-e,h=nr(a,t,r),l=En*.5),c=r-t),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=Ti(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Zd(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:ek(t.align),textBaseline:"middle",translation:[o,a]})}}function lle(n,e){const t=new hk({ctx:n.ctx,options:e,chart:n});or.configure(n,t,e),or.addBox(n,t),n.titleBlock=t}var cle={id:"title",_element:hk,start(n,e,t){lle(n,t)},stop(n){const e=n.titleBlock;or.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;or.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ky=new WeakMap;var ule={id:"subtitle",start(n,e,t){const i=new hk({ctx:n.ctx,options:t,chart:n});or.configure(n,i,t),or.addBox(n,i),Ky.set(n,i)},stop(n){or.removeBox(n,Ky.get(n)),Ky.delete(n)},beforeUpdate(n,e,t){const i=Ky.get(n);or.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const fb={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){const l=n[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=ZA(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function Aa(n,e){return e&&(On(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function jl(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function hle(n,e){const{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function fF(n,e){const t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=e,l=Ti(e.bodyFont),c=Ti(e.titleFont),u=Ti(e.footerFont),h=s.length,d=r.length,f=i.length,g=dr(e.padding);let p=g.height,m=0,b=i.reduce((R,E)=>R+E.before.length+E.lines.length+E.after.length,0);if(b+=n.beforeBody.length+n.afterBody.length,h&&(p+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),b){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;p+=f*R+(b-f)*l.lineHeight+(b-1)*e.bodySpacing}d&&(p+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let y=0;const w=function(R){m=Math.max(m,t.measureText(R).width+y)};return t.save(),t.font=c.string,en(n.title,w),t.font=l.string,en(n.beforeBody.concat(n.afterBody),w),y=e.displayColors?o+2+e.boxPadding:0,en(i,R=>{en(R.before,w),en(R.lines,w),en(R.after,w)}),y=0,t.font=u.string,en(n.footer,w),t.restore(),m+=g.width,{width:m,height:p}}function dle(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function fle(n,e,t,i){const{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function gle(n,e,t,i){const{x:r,width:s}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),fle(c,n,e,t)&&(c="center"),c}function gF(n,e,t){const i=t.yAlign||e.yAlign||dle(n,t);return{xAlign:t.xAlign||e.xAlign||gle(n,e,t,i),yAlign:i}}function ple(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function mle(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function pF(n,e,t,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Dd(o);let g=ple(e,a);const p=mle(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,d)+r:a==="right"&&(g+=Math.max(h,f)+r),{x:Hi(g,0,i.width-e.width),y:Hi(p,0,i.height-e.height)}}function qy(n,e,t){const i=dr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function mF(n){return Aa([],jl(n))}function vle(n,e,t){return ih(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function vF(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const R4={beforeTitle:xl,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:xl,beforeBody:xl,beforeLabel:xl,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return kt(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:xl,afterBody:xl,beforeFooter:xl,footer:xl,afterFooter:xl};function Hr(n,e,t,i){const r=n[e].call(t,i);return typeof r>"u"?R4[e].call(t,i):r}class rP extends fo{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&t.options.animation&&i.animations,s=new n4(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=vle(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,r=Hr(i,"beforeTitle",this,e),s=Hr(i,"title",this,e),o=Hr(i,"afterTitle",this,e);let a=[];return a=Aa(a,jl(r)),a=Aa(a,jl(s)),a=Aa(a,jl(o)),a}getBeforeBody(e,t){return mF(Hr(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,r=[];return en(e,s=>{const o={before:[],lines:[],after:[]},a=vF(i,s);Aa(o.before,jl(Hr(a,"beforeLabel",this,s))),Aa(o.lines,Hr(a,"label",this,s)),Aa(o.after,jl(Hr(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,t){return mF(Hr(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,r=Hr(i,"beforeFooter",this,e),s=Hr(i,"footer",this,e),o=Hr(i,"afterFooter",this,e);let a=[];return a=Aa(a,jl(r)),a=Aa(a,jl(s)),a=Aa(a,jl(o)),a}_createItems(e){const t=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(hle(this.chart,t[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),en(a,u=>{const h=vF(e.callbacks,u);r.push(Hr(h,"labelColor",this,u)),s.push(Hr(h,"labelPointStyle",this,u)),o.push(Hr(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=fb[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=fF(this,i),c=Object.assign({},a,l),u=gF(this.chart,i,c),h=pF(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,r){const s=this.getCaretPosition(e,i,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Dd(a),{x:d,y:f}=e,{width:g,height:p}=t;let m,b,y,w,R,E;return s==="center"?(R=f+p/2,r==="left"?(m=d,b=m-o,w=R+o,E=R-o):(m=d+g,b=m+o,w=R-o,E=R+o),y=m):(r==="left"?b=d+Math.max(l,u)+o:r==="right"?b=d+g-Math.max(c,h)-o:b=this.caretX,s==="top"?(w=f,R=w-o,m=b-o,y=b+o):(w=f+p,R=w+o,m=b+o,y=b-o),E=w),{x1:m,x2:b,x3:y,y1:w,y2:R,y3:E}}drawTitle(e,t,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=ep(i.rtl,this.x,this.width);for(e.x=qy(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",o=Ti(i.titleFont),a=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,l=0;l<s;++l)t.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,t,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=Ti(s.bodyFont),h=qy(this,"left",s),d=r.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,g=t.y+f;if(s.usePointStyle){const p={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=r.leftForLtr(d,c)+c/2,b=g+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,f_(e,p,m,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,f_(e,p,m,b)}else{e.lineWidth=Et(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const p=r.leftForLtr(d,c),m=r.leftForLtr(r.xPlus(d,1),c-2),b=Dd(o.borderRadius);Object.values(b).some(y=>y!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,nw(e,{x:p,y:g,w:c,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),nw(e,{x:m,y:g+1,w:c-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(p,g,c,l),e.strokeRect(p,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(m,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=Ti(i.bodyFont);let d=h.lineHeight,f=0;const g=ep(i.rtl,this.x,this.width),p=function(I){t.fillText(I,g.x(e.x+f),e.y+d/2),e.y+=d+s},m=g.textAlign(o);let b,y,w,R,E,_,T;for(t.textAlign=o,t.textBaseline="middle",t.font=h.string,e.x=qy(this,m,i),t.fillStyle=i.bodyColor,en(this.beforeBody,p),f=a&&m!=="right"?o==="center"?c/2+u:c+2+u:0,R=0,_=r.length;R<_;++R){for(b=r[R],y=this.labelTextColors[R],t.fillStyle=y,en(b.before,p),w=b.lines,a&&w.length&&(this._drawColorBox(t,e,R,g,i),d=Math.max(h.lineHeight,l)),E=0,T=w.length;E<T;++E)p(w[E]),d=h.lineHeight;en(b.after,p)}f=0,d=h.lineHeight,en(this.afterBody,p),e.y-=s}drawFooter(e,t,i){const r=this.footer,s=r.length;let o,a;if(s){const l=ep(i.rtl,this.x,this.width);for(e.x=qy(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",o=Ti(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,a=0;a<s;++a)t.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Dd(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+h,l),o==="top"&&this.drawCaret(e,t,i,r),t.lineTo(a+c-d,l),t.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&s==="right"&&this.drawCaret(e,t,i,r),t.lineTo(a+c,l+u-g),t.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,t,i,r),t.lineTo(a+f,l+u),t.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,t,i,r),t.lineTo(a,l+h),t.quadraticCurveTo(a,l,a+h,l),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=fb[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=fF(this,e),l=Object.assign({},o,this._size),c=gF(t,e,l),u=pF(e,l,c,t);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=dr(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,t),Z8(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),Q8(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!c_(i,r),o=this._positionChanged(r,t);(s||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,i),a=this._positionChanged(o,e),l=t||!c_(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:r,options:s}=this,o=fb[s.position].call(this,e,t);return o!==!1&&(i!==o.x||r!==o.y)}}rP.positioners=fb;var ble={id:"tooltip",_element:rP,positioners:fb,afterInit(n,e,t){t&&(n.tooltip=new rP({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:R4},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},wle=Object.freeze({__proto__:null,Colors:Iae,Decimation:Nae,Filler:tle,Legend:ale,SubTitle:ule,Title:cle,Tooltip:ble});const yle=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function Cle(n,e,t,i){const r=n.indexOf(e);if(r===-1)return yle(n,e,t,i);const s=n.lastIndexOf(e);return r!==s?t:r}const Sle=(n,e)=>n===null?null:Hi(Math.round(n),0,e);function E4(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class dk extends rh{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:r,label:s}of t)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(kt(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:Cle(i,e,nt(t,e),this._addedLabels),Sle(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)r.push({value:o});return r}getLabelForValue(e){return E4.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}dk.id="category";dk.defaults={ticks:{callback:E4}};function _le(n,e){const t=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=n,f=s||1,g=u-1,{min:p,max:m}=e,b=!kt(o),y=!kt(a),w=!kt(c),R=(m-p)/(h+1);let E=g2((m-p)/g/f)*f,_,T,I,x;if(E<1e-14&&!b&&!y)return[{value:p},{value:m}];x=Math.ceil(m/E)-Math.floor(p/E),x>g&&(E=g2(x*E/g/f)*f),kt(l)||(_=Math.pow(10,l),E=Math.ceil(E*_)/_),r==="ticks"?(T=Math.floor(p/E)*E,I=Math.ceil(m/E)*E):(T=p,I=m),b&&y&&s&&mre((a-o)/s,E/1e3)?(x=Math.round(Math.min((a-o)/E,u)),E=(a-o)/x,T=o,I=a):w?(T=b?o:T,I=y?a:I,x=c-1,E=(I-T)/x):(x=(I-T)/E,ub(x,Math.round(x),E/1e3)?x=Math.round(x):x=Math.ceil(x));const P=Math.max(p2(E),p2(T));_=Math.pow(10,kt(l)?P:l),T=Math.round(T*_)/_,I=Math.round(I*_)/_;let D=0;for(b&&(d&&T!==o?(t.push({value:o}),T<o&&D++,ub(Math.round((T+D*E)*_)/_,o,bF(o,R,n))&&D++):T<o&&D++);D<x;++D){const B=Math.round((T+D*E)*_)/_;if(y&&B>a)break;t.push({value:B})}return y&&d&&I!==a?t.length&&ub(t[t.length-1].value,a,bF(a,R,n))?t[t.length-1].value=a:t.push({value:a}):(!y||I===a)&&t.push({value:I}),t}function bF(n,e,{horizontal:t,minRotation:i}){const r=Yo(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}class b_ extends rh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return kt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=t?r:l,a=l=>s=i?s:l;if(e){const l=Qa(r),c=Qa(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=_le(r,s);return e.bounds==="ticks"&&D8(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Bw(e,this.chart.options.locale,this.options.ticks.format)}}class Bp extends b_{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ti(e)?e:0,this.max=ti(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=Yo(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Bp.id="linear";Bp.defaults={ticks:{callback:n1.formatters.numeric}};const rw=n=>Math.floor(_u(n)),mh=(n,e)=>Math.pow(10,rw(n)+e);function wF(n){return n/Math.pow(10,rw(n))===1}function yF(n,e,t){const i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function Rle(n,e){const t=e-n;let i=rw(t);for(;yF(n,e,i)>10;)i++;for(;yF(n,e,i)<10;)i--;return Math.min(i,rw(n))}function Ele(n,{min:e,max:t}){e=as(n.min,e);const i=[],r=rw(e);let s=Rle(e,t),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,s)),d=as(n.min,Math.round((l+u+h*Math.pow(10,s))*o)/o);for(;d<t;)i.push({value:d,major:wF(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),d=Math.round((l+u+h*Math.pow(10,s))*o)/o;const f=as(n.max,d);return i.push({value:f,major:wF(f),significand:h}),i}class Vp extends rh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=b_.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return ti(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ti(e)?Math.max(0,e):null,this.max=ti(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ti(this._userMin)&&(this.min=e===mh(this.min,0)?mh(this.min,-1):mh(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=e?i:a,o=a=>r=t?r:a;i===r&&(i<=0?(s(1),o(10)):(s(mh(i,-1)),o(mh(r,1)))),i<=0&&s(mh(r,-1)),r<=0&&o(mh(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=Ele(t,this);return e.bounds==="ticks"&&D8(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Bw(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=_u(e),this._valueRange=_u(this.max)-_u(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(_u(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}Vp.id="logarithmic";Vp.defaults={ticks:{callback:n1.formatters.logarithmic,major:{enabled:!0}}};function sP(n){const e=n.ticks;if(e.display&&n.display){const t=dr(e.backdropPadding);return nt(e.font&&e.font.size,Dn.font.size)+t.height}return 0}function xle(n,e,t){return t=On(t)?t:[t],{w:kre(n,e.string,t),h:t.length*e.lineHeight}}function CF(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function Tle(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?En/s:0;for(let l=0;l<s;l++){const c=o.setContext(n.getPointLabelContext(l));r[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+r[l],a),h=Ti(c.font),d=xle(n.ctx,h,n._pointLabels[l]);i[l]=d;const f=gs(n.getIndexAngle(l)+a),g=Math.round(QO(f)),p=CF(g,u.x,d.w,0,180),m=CF(g,u.y,d.h,90,270);Mle(t,e,f,p,m)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=Ile(n,i,r)}function Mle(n,e,t,i,r){const s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,n.t=Math.min(n.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function Ale(n,e,t){const i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=t,l=n.getPointPosition(e,i+r+o,s),c=Math.round(QO(gs(l.angle+oi))),u=Dle(l.y,a.h,c),h=Ole(c),d=kle(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function Ple(n,e){if(!e)return!0;const{left:t,top:i,right:r,bottom:s}=n;return!(uc({x:t,y:i},e)||uc({x:t,y:s},e)||uc({x:r,y:i},e)||uc({x:r,y:s},e))}function Ile(n,e,t){const i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:sP(s)/2,additionalAngle:o?En/r:0};let c;for(let u=0;u<r;u++){l.padding=t[u],l.size=e[u];const h=Ale(n,u,l);i.push(h),a==="auto"&&(h.visible=Ple(h,c),h.visible&&(c=h))}return i}function Ole(n){return n===0||n===180?"center":n<180?"left":"right"}function kle(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function Dle(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function Nle(n,e,t){const{left:i,top:r,right:s,bottom:o}=t,{backdropColor:a}=e;if(!kt(a)){const l=Dd(e.borderRadius),c=dr(e.backdropPadding);n.fillStyle=a;const u=i-c.left,h=r-c.top,d=s-i+c.width,f=o-r+c.height;Object.values(l).some(g=>g!==0)?(n.beginPath(),nw(n,{x:u,y:h,w:d,h:f,radius:l}),n.fill()):n.fillRect(u,h,d,f)}}function Lle(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){const s=n._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(n.getPointLabelContext(r));Nle(t,o,s);const a=Ti(o.font),{x:l,y:c,textAlign:u}=s;Zd(t,n._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function x4(n,e,t,i){const{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,Rn);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function Hle(n,e,t,i,r){const s=n.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),x4(n,t,o,i),s.closePath(),s.stroke(),s.restore())}function $le(n,e,t){return ih(n,{label:t,index:e,type:"pointLabel"})}class Uw extends b_{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=dr(sP(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=ti(e)&&!isNaN(e)?e:0,this.max=ti(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/sP(this.options))}generateTickLabels(e){b_.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const r=bn(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?Tle(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){const t=Rn/(this._pointLabels.length||1),i=this.options.startAngle||0;return gs(e*t+Yo(i))}getDistanceFromCenterForValue(e){if(kt(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(kt(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return $le(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const r=this.getIndexAngle(e)-oi+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),x4(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,o=this._pointLabels.length;let a,l,c;if(t.pointLabels.display&&Lle(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=r.setContext(d),g=s.setContext(d);Hle(this,f,l,o,g)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const c=i.setContext(this.getContext(l)),u=Ti(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=dr(c.backdropPadding);e.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}Zd(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Uw.id="radialLinear";Uw.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:n1.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(n){return n},padding:5,centerPointLabels:!1}};Uw.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};Uw.descriptors={angleLines:{_fallback:"grid"}};const c1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Jr=Object.keys(c1);function SF(n,e){return n-e}function _F(n,e){if(kt(e))return null;const t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),ti(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(vp(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function RF(n,e,t,i){const r=Jr.length;for(let s=Jr.indexOf(n);s<r-1;++s){const o=c1[Jr[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return Jr[s]}return Jr[r-1]}function Fle(n,e,t,i,r){for(let s=Jr.length-1;s>=Jr.indexOf(t);s--){const o=Jr[s];if(c1[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return Jr[t?Jr.indexOf(t):0]}function Ble(n){for(let e=Jr.indexOf(n)+1,t=Jr.length;e<t;++e)if(c1[Jr[e]].common)return Jr[e]}function EF(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:r}=JO(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function Vle(n,e,t,i){const r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}function xF(n,e,t){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!t?i:Vle(n,i,r,t)}class Gw extends rh{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),r=this._adapter=new qse._date(e.adapters.date);r.init(t),cb(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:_F(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=ti(r)&&!isNaN(r)?r:+t.startOf(Date.now(),i),s=ti(s)&&!isNaN(s)?s:+t.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=yre(r,s,o);return this._unit=t.unit||(i.autoSkip?RF(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):Fle(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Ble(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),xF(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?t=1-r:t=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Hi(t,0,o),i=Hi(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||RF(s.minUnit,t,i,this._getLabelCapacity(t)),a=nt(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=vp(l)||l===!0,u={};let h=t,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,t,o)>1e5*a)throw new Error(t+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+e.add(d,a,o),f++)EF(u,d,g);return(d===i||r.bounds==="ticks"||f===1)&&EF(u,d,g),Object.keys(u).sort(SF).map(p=>+p)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,s=this._unit,o=t||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,r){const s=this.options,o=s.ticks.callback;if(o)return bn(o,[e,t,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[t],f=c&&h&&d&&d.major;return this._adapter.format(e,r||(f?h:u))}generateTickLabels(e){let t,i,r;for(t=0,i=e.length;t<i;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,r=Yo(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,r=i[t.unit]||i.millisecond,s=this._tickFormatFunction(e,0,xF(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,i=r.length;t<i;++t)e=e.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const r=this.getLabels();for(t=0,i=r.length;t<i;++t)e.push(_F(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return H8(e.sort(SF))}}Gw.id="time";Gw.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};function Xy(n,e,t){let i=0,r=n.length-1,s,o,a,l;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=cc(n,"pos",e)),{pos:s,time:a}=n[i],{pos:o,time:l}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=cc(n,"time",e)),{time:s,pos:a}=n[i],{time:o,pos:l}=n[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class fk extends Gw{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Xy(t,this.min),this._tableRange=Xy(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&r.push(c);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Xy(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Xy(this._table,i*this._tableRange+this._minPos,!0)}}fk.id="timeseries";fk.defaults=Gw.defaults;var Wle=Object.freeze({__proto__:null,CategoryScale:dk,LinearScale:Bp,LogarithmicScale:Vp,RadialLinearScale:Uw,TimeScale:Gw,TimeSeriesScale:fk});const T4=[Kse,Rae,wle,Wle];Rs.register(...T4);function M4(n,e,t,i={}){return new Rs(n,{type:e,data:t,options:i})}var A4;let P4;function jle(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],b=e.length;function y(_,T,I){return function(x,P){T&&(P=x,x=n);for(var D=0;D<_.length;D++)P=_[D].apply(x,I?[P]:[]);return I?P:x}}function w(_,T,I,x){if(typeof _!="function"&&(x||_!==void 0))throw new TypeError(T+" must "+(I||"be")+" a function"+(x?"":" or undefined"));return _}function R(_,T,I,x,P,D,B,V,z,L,k){function F(oe){if(!k(oe))throw new TypeError("Attempted to access private element on non-instance")}var G=[].concat(T[0]),U=T[3],se=!B,v=P===1,C=P===3,S=P===4,A=P===2;function H(oe,ae,Fe){return function(ve,Se){return ae&&(Se=ve,ve=_),Fe&&Fe(ve),M[oe].call(ve,Se)}}if(!se){var M={},$=[],q=C?"get":S||v?"set":"value";if(z?(L||v?M={get:TF(function(){return U(this)},x,"get"),set:function(oe){T[4](this,oe)}}:M[q]=U,L||TF(M[q],x,A?"":q)):L||(M=Object.getOwnPropertyDescriptor(_,x)),!L&&!z){if((a=m[+V][x])&&(a^P)!=7)throw Error("Decorating two elements with the same name ("+M[q].name+") is not supported yet");m[+V][x]=P<3?1:P}}for(var Q=_,ce=G.length-1;ce>=0;ce-=I?2:1){var le=w(G[ce],"A decorator","be",!0),Me=I?G[ce-1]:void 0,Ce={},J={kind:["field","accessor","method","getter","setter","class"][P],name:x,metadata:o,addInitializer:(function(oe,ae){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ae,"An initializer","be",!0),D.push(ae)}).bind(null,Ce)};if(se)a=le.call(Me,Q,J),Ce.v=1,w(a,"class decorators","return")&&(Q=a);else if(J.static=V,J.private=z,a=J.access={has:z?k.bind():function(oe){return x in oe}},S||(a.get=z?A?function(oe){return F(oe),M.value}:H("get",0,F):function(oe){return oe[x]}),A||C||(a.set=z?H("set",0,F):function(oe,ae){oe[x]=ae}),Q=le.call(Me,v?{get:M.get,set:M.set}:M[q],J),Ce.v=1,v){if(typeof Q=="object"&&Q)(a=w(Q.get,"accessor.get"))&&(M.get=a),(a=w(Q.set,"accessor.set"))&&(M.set=a),(a=w(Q.init,"accessor.init"))&&$.unshift(a);else if(Q!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(Q,(L?"field":"method")+" decorators","return")&&(L?$.unshift(Q):M[q]=Q)}return P<2&&B.push(y($,V,1),y(D,V,0)),L||se||(z?v?B.splice(-1,0,H("get",V),H("set",V)):B.push(A?M[q]:w.call.bind(M[q])):g(_,x,M)),Q}function E(_){return g(_,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(_){_&&u.push(y(_))},d=function(_,T){for(var I=0;I<t.length;I++){var x=t[I],P=x[1],D=7&P;if((8&P)==_&&!D==T){var B=x[2],V=!!x[3],z=16&P;R(_?n:n.prototype,x,z,V?"#"+B:zle(B),D,D<2?[]:_?c=c||[]:l=l||[],u,!!_,V,T,_&&V?function(L){return Gle(L)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,b||E(n),{e:a,get c(){var _=[];return b&&[E(n=R(n,[e],i,n.name,5,_)),y(_,1)]}}}function zle(n){var e=Ule(n,"string");return typeof e=="symbol"?e:e+""}function Ule(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function TF(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function Gle(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let u1;class Yle{constructor(){this.mychart=void 0}bind(){}attached(){const e=[{year:2010,count:10},{year:2011,count:20},{year:2012,count:15},{year:2013,count:25},{year:2014,count:22},{year:2015,count:30},{year:2016,count:28}],t={labels:e.map(i=>i.year),datasets:[{label:"Acquisitions by year",data:e.map(i=>i.count)}]};this.chartjs=M4(this.mychart,"bar",t)}}A4=Yle;[u1,P4]=jle(A4,[mf({...Hie,name:"sv-chartjs"})],[]).c;P4();const I4="chartjs-geo",oP=`<div class="chartjsgeocontainer">
    <div class="w3-bar w3-light-grey w3-small">
        <button class="w3-bar-item w3-button" click.trigger="resetView()">Home</button>
        <button class="w3-bar-item w3-button" click.trigger="toggleAnimation()">Animate</button>
        <div class="w3-dropdown-hover">
            <button class="w3-button">Projection</button>
            <div class="w3-dropdown-content w3-bar-block w3-card-4">
              <button repeat.for="item of projections" click.trigger='switchProjection(item)' class="w3-bar-item w3-button w3-ripple">\${item}</button>                           
          </div>
        </div>
        <div class="w3-dropdown-hover">
          <button class="w3-button">Continent</button>
          <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <button click.trigger='switchToEurope()' class="w3-bar-item w3-button w3-ripple">Europe</button> 
            <button click.trigger='switchToAsia()' class="w3-bar-item w3-button w3-ripple">Asia</button> 
            <button click.trigger='switchToNAmerica()' class="w3-bar-item w3-button w3-ripple">N.America</button> 
            <button click.trigger='switchToSAmerica()' class="w3-bar-item w3-button w3-ripple">S.America</button>
            <button click.trigger='switchToAfrica()' class="w3-bar-item w3-button w3-ripple">Africa</button> 
            <button click.trigger='switchToPacific()' class="w3-bar-item w3-button w3-ripple">Australia &amp; Oceania</button> 
            <button click.trigger='switchToWorld()' class="w3-bar-item w3-button w3-ripple">World</button>          
        </div>
      </div>
      </div>
<canvas ref="geochart" class="chartjsgeo"></canvas>
<div class="chartjsgeodesc">    
    click country for details: <b>\${countryName}</b><br/>
    <span>\${projectName} \${projectStatus} \${projectStatusText}</span><br/>
    <i>\${projectPublication}</i><br/>
    <span repeat.for="url of projecturls"><a href.bind='url' target="_blank" class="truncate">\${url}</a><br/></span>    
</div>
</div>`,O4=[],k4={};let yx;function Kle(n){yx||(yx=Ar.define({name:I4,template:oP,dependencies:O4,bindables:k4})),n.register(yx)}const qle=Object.freeze(Object.defineProperty({__proto__:null,bindables:k4,default:oP,dependencies:O4,name:I4,register:Kle,template:oP},Symbol.toStringTag,{value:"Module"}));class zu{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=t[r],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(t[i++]=a),e=o}return t[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let t=this._n,i,r,s,o=0;if(t>0){for(o=e[--t];t>0&&(i=o,r=e[--t],o=i+r,s=r-(o-i),!s););t>0&&(s<0&&e[t-1]<0||s>0&&e[t-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}function*Xle(n){for(const e of n)yield*e}function D4(n){return Array.from(Xle(n))}function Vg(n,e,t){n=+n,e=+e,t=(r=arguments.length)<2?(e=n,n=0,1):r<3?1:+t;for(var i=-1,r=Math.max(0,Math.ceil((e-n)/t))|0,s=new Array(r);++i<r;)s[i]=n+i*t;return s}var qe=1e-6,gk=1e-12,bt=Math.PI,Jn=bt/2,MF=bt/4,Es=bt*2,_r=180/bt,sn=bt/180,Dt=Math.abs,Wp=Math.atan,ol=Math.atan2,at=Math.cos,Zy=Math.ceil,N4=Math.exp,w_=Math.log,Cx=Math.pow,it=Math.sin,eo=Math.sign||function(n){return n>0?1:n<0?-1:0},kr=Math.sqrt,pk=Math.tan;function L4(n){return n>1?0:n<-1?bt:Math.acos(n)}function oo(n){return n>1?Jn:n<-1?-Jn:Math.asin(n)}function Li(){}function y_(n,e){n&&PF.hasOwnProperty(n.type)&&PF[n.type](n,e)}var AF={Feature:function(n,e){y_(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,r=t.length;++i<r;)y_(t[i].geometry,e)}},PF={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)n=t[i],e.point(n[0],n[1],n[2])},LineString:function(n,e){aP(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)aP(t[i],e,0)},Polygon:function(n,e){IF(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)IF(t[i],e)},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,r=t.length;++i<r;)y_(t[i],e)}};function aP(n,e,t){var i=-1,r=n.length-t,s;for(e.lineStart();++i<r;)s=n[i],e.point(s[0],s[1],s[2]);e.lineEnd()}function IF(n,e){var t=-1,i=n.length;for(e.polygonStart();++t<i;)aP(n[t],e,1);e.polygonEnd()}function md(n,e){n&&AF.hasOwnProperty(n.type)?AF[n.type](n,e):y_(n,e)}function lP(n){return[ol(n[1],n[0]),oo(n[2])]}function yp(n){var e=n[0],t=n[1],i=at(t);return[i*at(e),i*it(e),it(t)]}function Qy(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function C_(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function Sx(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function Jy(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function cP(n){var e=kr(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}function uP(n,e){function t(i,r){return i=n(i,r),e(i[0],i[1])}return n.invert&&e.invert&&(t.invert=function(i,r){return i=e.invert(i,r),i&&n.invert(i[0],i[1])}),t}function hP(n,e){return Dt(n)>bt&&(n-=Math.round(n/Es)*Es),[n,e]}hP.invert=hP;function H4(n,e,t){return(n%=Es)?e||t?uP(kF(n),DF(e,t)):kF(n):e||t?DF(e,t):hP}function OF(n){return function(e,t){return e+=n,Dt(e)>bt&&(e-=Math.round(e/Es)*Es),[e,t]}}function kF(n){var e=OF(n);return e.invert=OF(-n),e}function DF(n,e){var t=at(n),i=it(n),r=at(e),s=it(e);function o(a,l){var c=at(l),u=at(a)*c,h=it(a)*c,d=it(l),f=d*t+u*i;return[ol(h*r-f*s,u*t-d*i),oo(f*r+h*s)]}return o.invert=function(a,l){var c=at(l),u=at(a)*c,h=it(a)*c,d=it(l),f=d*r-h*s;return[ol(h*r+d*s,u*t+f*i),oo(f*t-u*i)]},o}function Zle(n){n=H4(n[0]*sn,n[1]*sn,n.length>2?n[2]*sn:0);function e(t){return t=n(t[0]*sn,t[1]*sn),t[0]*=_r,t[1]*=_r,t}return e.invert=function(t){return t=n.invert(t[0]*sn,t[1]*sn),t[0]*=_r,t[1]*=_r,t},e}function Qle(n,e,t,i,r,s){if(t){var o=at(e),a=it(e),l=i*t;r==null?(r=e+i*Es,s=e-l/2):(r=NF(o,r),s=NF(o,s),(i>0?r<s:r>s)&&(r+=i*Es));for(var c,u=r;i>0?u>s:u<s;u-=l)c=lP([o,-a*at(u),-a*it(u)]),n.point(c[0],c[1])}}function NF(n,e){e=yp(e),e[0]-=n,cP(e);var t=L4(-e[1]);return((-e[2]<0?-t:t)+Es-qe)%Es}function $4(){var n=[],e;return{point:function(t,i,r){e.push([t,i,r])},lineStart:function(){n.push(e=[])},lineEnd:Li,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function uS(n,e){return Dt(n[0]-e[0])<qe&&Dt(n[1]-e[1])<qe}function e0(n,e,t,i){this.x=n,this.z=e,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function F4(n,e,t,i,r){var s=[],o=[],a,l;if(n.forEach(function(g){if(!((p=g.length-1)<=0)){var p,m=g[0],b=g[p],y;if(uS(m,b)){if(!m[2]&&!b[2]){for(r.lineStart(),a=0;a<p;++a)r.point((m=g[a])[0],m[1]);r.lineEnd();return}b[0]+=2*qe}s.push(y=new e0(m,g,null,!0)),o.push(y.o=new e0(m,null,y,!1)),s.push(y=new e0(b,g,null,!1)),o.push(y.o=new e0(b,null,y,!0))}}),!!s.length){for(o.sort(e),LF(s),LF(o),a=0,l=o.length;a<l;++a)o[a].e=t=!t;for(var c=s[0],u,h;;){for(var d=c,f=!0;d.v;)if((d=d.n)===c)return;u=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(a=0,l=u.length;a<l;++a)r.point((h=u[a])[0],h[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(f)for(u=d.p.z,a=u.length-1;a>=0;--a)r.point((h=u[a])[0],h[1]);else i(d.x,d.p.x,-1,r);d=d.p}d=d.o,u=d.z,f=!f}while(!d.v);r.lineEnd()}}}function LF(n){if(e=n.length){for(var e,t=0,i=n[0],r;++t<e;)i.n=r=n[t],r.p=i,i=r;i.n=r=n[0],r.p=i}}function _x(n){return Dt(n[0])<=bt?n[0]:eo(n[0])*((Dt(n[0])+bt)%Es-bt)}function B4(n,e){var t=_x(e),i=e[1],r=it(i),s=[it(t),-at(t),0],o=0,a=0,l=new zu;r===1?i=Jn+qe:r===-1&&(i=-Jn-qe);for(var c=0,u=n.length;c<u;++c)if(d=(h=n[c]).length)for(var h,d,f=h[d-1],g=_x(f),p=f[1]/2+MF,m=it(p),b=at(p),y=0;y<d;++y,g=R,m=_,b=T,f=w){var w=h[y],R=_x(w),E=w[1]/2+MF,_=it(E),T=at(E),I=R-g,x=I>=0?1:-1,P=x*I,D=P>bt,B=m*_;if(l.add(ol(B*x*it(P),b*T+B*at(P))),o+=D?I+x*Es:I,D^g>=t^R>=t){var V=C_(yp(f),yp(w));cP(V);var z=C_(s,V);cP(z);var L=(D^I>=0?-1:1)*oo(z[2]);(i>L||i===L&&(V[0]||V[1]))&&(a+=D^I>=0?1:-1)}}return(o<-qe||o<qe&&l<-gk)^a&1}function V4(n,e,t,i){return function(r){var s=e(r),o=$4(),a=e(o),l=!1,c,u,h,d={point:f,lineStart:p,lineEnd:m,polygonStart:function(){d.point=b,d.lineStart=y,d.lineEnd=w,u=[],c=[]},polygonEnd:function(){d.point=f,d.lineStart=p,d.lineEnd=m,u=D4(u);var R=B4(c,i);u.length?(l||(r.polygonStart(),l=!0),F4(u,ece,R,t,r)):R&&(l||(r.polygonStart(),l=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(R,E){n(R,E)&&r.point(R,E)}function g(R,E){s.point(R,E)}function p(){d.point=g,s.lineStart()}function m(){d.point=f,s.lineEnd()}function b(R,E){h.push([R,E]),a.point(R,E)}function y(){a.lineStart(),h=[]}function w(){b(h[0][0],h[0][1]),a.lineEnd();var R=a.clean(),E=o.result(),_,T=E.length,I,x,P;if(h.pop(),c.push(h),h=null,!!T){if(R&1){if(x=E[0],(I=x.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),_=0;_<I;++_)r.point((P=x[_])[0],P[1]);r.lineEnd()}return}T>1&&R&2&&E.push(E.pop().concat(E.shift())),u.push(E.filter(Jle))}}return d}}function Jle(n){return n.length>1}function ece(n,e){return((n=n.x)[0]<0?n[1]-Jn-qe:Jn-n[1])-((e=e.x)[0]<0?e[1]-Jn-qe:Jn-e[1])}const HF=V4(function(){return!0},tce,ice,[-bt,-Jn]);function tce(n){var e=NaN,t=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(s,o){var a=s>0?bt:-bt,l=Dt(s-e);Dt(l-bt)<qe?(n.point(e,t=(t+o)/2>0?Jn:-Jn),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(a,t),n.point(s,t),r=0):i!==a&&l>=bt&&(Dt(e-i)<qe&&(e-=i*qe),Dt(s-a)<qe&&(s-=a*qe),t=nce(e,t,s,o),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(a,t),r=0),n.point(e=s,t=o),i=a},lineEnd:function(){n.lineEnd(),e=t=NaN},clean:function(){return 2-r}}}function nce(n,e,t,i){var r,s,o=it(n-t);return Dt(o)>qe?Wp((it(e)*(s=at(i))*it(t)-it(i)*(r=at(e))*it(n))/(r*s*o)):(e+i)/2}function ice(n,e,t,i){var r;if(n==null)r=t*Jn,i.point(-bt,r),i.point(0,r),i.point(bt,r),i.point(bt,0),i.point(bt,-r),i.point(0,-r),i.point(-bt,-r),i.point(-bt,0),i.point(-bt,r);else if(Dt(n[0]-e[0])>qe){var s=n[0]<e[0]?bt:-bt;r=t*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])}function rce(n){var e=at(n),t=2*sn,i=e>0,r=Dt(e)>qe;function s(u,h,d,f){Qle(f,n,t,d,u,h)}function o(u,h){return at(u)*at(h)>e}function a(u){var h,d,f,g,p;return{lineStart:function(){g=f=!1,p=1},point:function(m,b){var y=[m,b],w,R=o(m,b),E=i?R?0:c(m,b):R?c(m+(m<0?bt:-bt),b):0;if(!h&&(g=f=R)&&u.lineStart(),R!==f&&(w=l(h,y),(!w||uS(h,w)||uS(y,w))&&(y[2]=1)),R!==f)p=0,R?(u.lineStart(),w=l(y,h),u.point(w[0],w[1])):(w=l(h,y),u.point(w[0],w[1],2),u.lineEnd()),h=w;else if(r&&h&&i^R){var _;!(E&d)&&(_=l(y,h,!0))&&(p=0,i?(u.lineStart(),u.point(_[0][0],_[0][1]),u.point(_[1][0],_[1][1]),u.lineEnd()):(u.point(_[1][0],_[1][1]),u.lineEnd(),u.lineStart(),u.point(_[0][0],_[0][1],3)))}R&&(!h||!uS(h,y))&&u.point(y[0],y[1]),h=y,f=R,d=E},lineEnd:function(){f&&u.lineEnd(),h=null},clean:function(){return p|(g&&f)<<1}}}function l(u,h,d){var f=yp(u),g=yp(h),p=[1,0,0],m=C_(f,g),b=Qy(m,m),y=m[0],w=b-y*y;if(!w)return!d&&u;var R=e*b/w,E=-e*y/w,_=C_(p,m),T=Jy(p,R),I=Jy(m,E);Sx(T,I);var x=_,P=Qy(T,x),D=Qy(x,x),B=P*P-D*(Qy(T,T)-1);if(!(B<0)){var V=kr(B),z=Jy(x,(-P-V)/D);if(Sx(z,T),z=lP(z),!d)return z;var L=u[0],k=h[0],F=u[1],G=h[1],U;k<L&&(U=L,L=k,k=U);var se=k-L,v=Dt(se-bt)<qe,C=v||se<qe;if(!v&&G<F&&(U=F,F=G,G=U),C?v?F+G>0^z[1]<(Dt(z[0]-L)<qe?F:G):F<=z[1]&&z[1]<=G:se>bt^(L<=z[0]&&z[0]<=k)){var S=Jy(x,(-P+V)/D);return Sx(S,T),[z,lP(S)]}}}function c(u,h){var d=i?n:bt-n,f=0;return u<-d?f|=1:u>d&&(f|=2),h<-d?f|=4:h>d&&(f|=8),f}return V4(o,a,s,i?[0,-n]:[-bt,n-bt])}function sce(n,e,t,i,r,s){var o=n[0],a=n[1],l=e[0],c=e[1],u=0,h=1,d=l-o,f=c-a,g;if(g=t-o,!(!d&&g>0)){if(g/=d,d<0){if(g<u)return;g<h&&(h=g)}else if(d>0){if(g>h)return;g>u&&(u=g)}if(g=r-o,!(!d&&g<0)){if(g/=d,d<0){if(g>h)return;g>u&&(u=g)}else if(d>0){if(g<u)return;g<h&&(h=g)}if(g=i-a,!(!f&&g>0)){if(g/=f,f<0){if(g<u)return;g<h&&(h=g)}else if(f>0){if(g>h)return;g>u&&(u=g)}if(g=s-a,!(!f&&g<0)){if(g/=f,f<0){if(g>h)return;g>u&&(u=g)}else if(f>0){if(g<u)return;g<h&&(h=g)}return u>0&&(n[0]=o+u*d,n[1]=a+u*f),h<1&&(e[0]=o+h*d,e[1]=a+h*f),!0}}}}}var Lv=1e9,t0=-Lv;function oce(n,e,t,i){function r(c,u){return n<=c&&c<=t&&e<=u&&u<=i}function s(c,u,h,d){var f=0,g=0;if(c==null||(f=o(c,h))!==(g=o(u,h))||l(c,u)<0^h>0)do d.point(f===0||f===3?n:t,f>1?i:e);while((f=(f+h+4)%4)!==g);else d.point(u[0],u[1])}function o(c,u){return Dt(c[0]-n)<qe?u>0?0:3:Dt(c[0]-t)<qe?u>0?2:1:Dt(c[1]-e)<qe?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var h=o(c,1),d=o(u,1);return h!==d?h-d:h===0?u[1]-c[1]:h===1?c[0]-u[0]:h===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,h=$4(),d,f,g,p,m,b,y,w,R,E,_,T={point:I,lineStart:B,lineEnd:V,polygonStart:P,polygonEnd:D};function I(L,k){r(L,k)&&u.point(L,k)}function x(){for(var L=0,k=0,F=f.length;k<F;++k)for(var G=f[k],U=1,se=G.length,v=G[0],C,S,A=v[0],H=v[1];U<se;++U)C=A,S=H,v=G[U],A=v[0],H=v[1],S<=i?H>i&&(A-C)*(i-S)>(H-S)*(n-C)&&++L:H<=i&&(A-C)*(i-S)<(H-S)*(n-C)&&--L;return L}function P(){u=h,d=[],f=[],_=!0}function D(){var L=x(),k=_&&L,F=(d=D4(d)).length;(k||F)&&(c.polygonStart(),k&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),F&&F4(d,a,L,s,c),c.polygonEnd()),u=c,d=f=g=null}function B(){T.point=z,f&&f.push(g=[]),E=!0,R=!1,y=w=NaN}function V(){d&&(z(p,m),b&&R&&h.rejoin(),d.push(h.result())),T.point=I,R&&u.lineEnd()}function z(L,k){var F=r(L,k);if(f&&g.push([L,k]),E)p=L,m=k,b=F,E=!1,F&&(u.lineStart(),u.point(L,k));else if(F&&R)u.point(L,k);else{var G=[y=Math.max(t0,Math.min(Lv,y)),w=Math.max(t0,Math.min(Lv,w))],U=[L=Math.max(t0,Math.min(Lv,L)),k=Math.max(t0,Math.min(Lv,k))];sce(G,U,n,e,t,i)?(R||(u.lineStart(),u.point(G[0],G[1])),u.point(U[0],U[1]),F||u.lineEnd(),_=!1):F&&(u.lineStart(),u.point(L,k),_=!1)}y=L,w=k,R=F}return T}}var dP,fP,hS,dS,Cp={sphere:Li,point:Li,lineStart:ace,lineEnd:Li,polygonStart:Li,polygonEnd:Li};function ace(){Cp.point=cce,Cp.lineEnd=lce}function lce(){Cp.point=Cp.lineEnd=Li}function cce(n,e){n*=sn,e*=sn,fP=n,hS=it(e),dS=at(e),Cp.point=uce}function uce(n,e){n*=sn,e*=sn;var t=it(e),i=at(e),r=Dt(n-fP),s=at(r),o=it(r),a=i*o,l=dS*t-hS*i*s,c=hS*t+dS*i*s;dP.add(ol(kr(a*a+l*l),c)),fP=n,hS=t,dS=i}function hce(n){return dP=new zu,md(n,Cp),+dP}var gP=[null,null],dce={type:"LineString",coordinates:gP};function pP(n,e){return gP[0]=n,gP[1]=e,hce(dce)}var $F={Feature:function(n,e){return S_(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,r=t.length;++i<r;)if(S_(t[i].geometry,e))return!0;return!1}},FF={Sphere:function(){return!0},Point:function(n,e){return BF(n.coordinates,e)},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(BF(t[i],e))return!0;return!1},LineString:function(n,e){return VF(n.coordinates,e)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(VF(t[i],e))return!0;return!1},Polygon:function(n,e){return WF(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(WF(t[i],e))return!0;return!1},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,r=t.length;++i<r;)if(S_(t[i],e))return!0;return!1}};function S_(n,e){return n&&FF.hasOwnProperty(n.type)?FF[n.type](n,e):!1}function BF(n,e){return pP(n,e)===0}function VF(n,e){for(var t,i,r,s=0,o=n.length;s<o;s++){if(i=pP(n[s],e),i===0||s>0&&(r=pP(n[s],n[s-1]),r>0&&t<=r&&i<=r&&(t+i-r)*(1-Math.pow((t-i)/r,2))<gk*r))return!0;t=i}return!1}function WF(n,e){return!!B4(n.map(fce),W4(e))}function fce(n){return n=n.map(W4),n.pop(),n}function W4(n){return[n[0]*sn,n[1]*sn]}function gce(n,e){return(n&&$F.hasOwnProperty(n.type)?$F[n.type]:S_)(n,e)}function jF(n,e,t){var i=Vg(n,e-qe,t).concat(e);return function(r){return i.map(function(s){return[r,s]})}}function zF(n,e,t){var i=Vg(n,e-qe,t).concat(e);return function(r){return i.map(function(s){return[s,r]})}}function j4(){var n,e,t,i,r,s,o,a,l=10,c=l,u=90,h=360,d,f,g,p,m=2.5;function b(){return{type:"MultiLineString",coordinates:y()}}function y(){return Vg(Zy(i/u)*u,t,u).map(g).concat(Vg(Zy(a/h)*h,o,h).map(p)).concat(Vg(Zy(e/l)*l,n,l).filter(function(w){return Dt(w%u)>qe}).map(d)).concat(Vg(Zy(s/c)*c,r,c).filter(function(w){return Dt(w%h)>qe}).map(f))}return b.lines=function(){return y().map(function(w){return{type:"LineString",coordinates:w}})},b.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(p(o).slice(1),g(t).reverse().slice(1),p(a).reverse().slice(1))]}},b.extent=function(w){return arguments.length?b.extentMajor(w).extentMinor(w):b.extentMinor()},b.extentMajor=function(w){return arguments.length?(i=+w[0][0],t=+w[1][0],a=+w[0][1],o=+w[1][1],i>t&&(w=i,i=t,t=w),a>o&&(w=a,a=o,o=w),b.precision(m)):[[i,a],[t,o]]},b.extentMinor=function(w){return arguments.length?(e=+w[0][0],n=+w[1][0],s=+w[0][1],r=+w[1][1],e>n&&(w=e,e=n,n=w),s>r&&(w=s,s=r,r=w),b.precision(m)):[[e,s],[n,r]]},b.step=function(w){return arguments.length?b.stepMajor(w).stepMinor(w):b.stepMinor()},b.stepMajor=function(w){return arguments.length?(u=+w[0],h=+w[1],b):[u,h]},b.stepMinor=function(w){return arguments.length?(l=+w[0],c=+w[1],b):[l,c]},b.precision=function(w){return arguments.length?(m=+w,d=jF(s,r,90),f=zF(e,n,m),g=jF(a,o,90),p=zF(i,t,m),b):m},b.extentMajor([[-180,-90+qe],[180,90-qe]]).extentMinor([[-180,-80-qe],[180,80+qe]])}function pce(){return j4()()}const mP=n=>n;var Rx=new zu,vP=new zu,z4,U4,bP,wP,nc={point:Li,lineStart:Li,lineEnd:Li,polygonStart:function(){nc.lineStart=mce,nc.lineEnd=bce},polygonEnd:function(){nc.lineStart=nc.lineEnd=nc.point=Li,Rx.add(Dt(vP)),vP=new zu},result:function(){var n=Rx/2;return Rx=new zu,n}};function mce(){nc.point=vce}function vce(n,e){nc.point=G4,z4=bP=n,U4=wP=e}function G4(n,e){vP.add(wP*n-bP*e),bP=n,wP=e}function bce(){G4(z4,U4)}var Sp=1/0,__=Sp,sw=-Sp,R_=sw,E_={point:wce,lineStart:Li,lineEnd:Li,polygonStart:Li,polygonEnd:Li,result:function(){var n=[[Sp,__],[sw,R_]];return sw=R_=-(__=Sp=1/0),n}};function wce(n,e){n<Sp&&(Sp=n),n>sw&&(sw=n),e<__&&(__=e),e>R_&&(R_=e)}var yP=0,CP=0,Hv=0,x_=0,T_=0,Wg=0,SP=0,_P=0,$v=0,Y4,K4,Va,Wa,Zs={point:Qd,lineStart:UF,lineEnd:GF,polygonStart:function(){Zs.lineStart=Sce,Zs.lineEnd=_ce},polygonEnd:function(){Zs.point=Qd,Zs.lineStart=UF,Zs.lineEnd=GF},result:function(){var n=$v?[SP/$v,_P/$v]:Wg?[x_/Wg,T_/Wg]:Hv?[yP/Hv,CP/Hv]:[NaN,NaN];return yP=CP=Hv=x_=T_=Wg=SP=_P=$v=0,n}};function Qd(n,e){yP+=n,CP+=e,++Hv}function UF(){Zs.point=yce}function yce(n,e){Zs.point=Cce,Qd(Va=n,Wa=e)}function Cce(n,e){var t=n-Va,i=e-Wa,r=kr(t*t+i*i);x_+=r*(Va+n)/2,T_+=r*(Wa+e)/2,Wg+=r,Qd(Va=n,Wa=e)}function GF(){Zs.point=Qd}function Sce(){Zs.point=Rce}function _ce(){q4(Y4,K4)}function Rce(n,e){Zs.point=q4,Qd(Y4=Va=n,K4=Wa=e)}function q4(n,e){var t=n-Va,i=e-Wa,r=kr(t*t+i*i);x_+=r*(Va+n)/2,T_+=r*(Wa+e)/2,Wg+=r,r=Wa*n-Va*e,SP+=r*(Va+n),_P+=r*(Wa+e),$v+=r*3,Qd(Va=n,Wa=e)}function X4(n){this._context=n}X4.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,e){switch(this._point){case 0:{this._context.moveTo(n,e),this._point=1;break}case 1:{this._context.lineTo(n,e);break}default:{this._context.moveTo(n+this._radius,e),this._context.arc(n,e,this._radius,0,Es);break}}},result:Li};var RP=new zu,Ex,Z4,Q4,Fv,Bv,ow={point:Li,lineStart:function(){ow.point=Ece},lineEnd:function(){Ex&&J4(Z4,Q4),ow.point=Li},polygonStart:function(){Ex=!0},polygonEnd:function(){Ex=null},result:function(){var n=+RP;return RP=new zu,n}};function Ece(n,e){ow.point=J4,Z4=Fv=n,Q4=Bv=e}function J4(n,e){Fv-=n,Bv-=e,RP.add(kr(Fv*Fv+Bv*Bv)),Fv=n,Bv=e}let YF,M_,KF,qF;class XF{constructor(e){this._append=e==null?eU:xce(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:{this._append`M${e},${t}`,this._point=1;break}case 1:{this._append`L${e},${t}`;break}default:{if(this._append`M${e},${t}`,this._radius!==KF||this._append!==M_){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,KF=i,M_=this._append,qF=this._,this._=r}this._+=qF;break}}}result(){const e=this._;return this._="",e.length?e:null}}function eU(n){let e=1;this._+=n[0];for(const t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function xce(n){const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);if(e>15)return eU;if(e!==YF){const t=10**e;YF=e,M_=function(r){let s=1;this._+=r[0];for(const o=r.length;s<o;++s)this._+=Math.round(arguments[s]*t)/t+r[s]}}return M_}function ZF(n,e){let t=3,i=4.5,r,s;function o(a){return a&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),md(a,r(s))),s.result()}return o.area=function(a){return md(a,r(nc)),nc.result()},o.measure=function(a){return md(a,r(ow)),ow.result()},o.bounds=function(a){return md(a,r(E_)),E_.result()},o.centroid=function(a){return md(a,r(Zs)),Zs.result()},o.projection=function(a){return arguments.length?(r=a==null?(n=null,mP):(n=a).stream,o):n},o.context=function(a){return arguments.length?(s=a==null?(e=null,new XF(t)):new X4(e=a),typeof i!="function"&&s.pointRadius(i),o):e},o.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(s.pointRadius(+a),+a),o):i},o.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);t=l}return e===null&&(s=new XF(t)),o},o.projection(n).digits(t).context(e)}function mk(n){return function(e){var t=new EP;for(var i in n)t[i]=n[i];return t.stream=e,t}}function EP(){}EP.prototype={constructor:EP,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function vk(n,e,t){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),md(t,n.stream(E_)),e(E_.result()),i!=null&&n.clipExtent(i),n}function bk(n,e,t){return vk(n,function(i){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),a=+e[0][0]+(r-o*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(s-o*(i[1][1]+i[0][1]))/2;n.scale(150*o).translate([a,l])},t)}function tU(n,e,t){return bk(n,[[0,0],e],t)}function nU(n,e,t){return vk(n,function(i){var r=+e,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,a=-s*i[0][1];n.scale(150*s).translate([o,a])},t)}function iU(n,e,t){return vk(n,function(i){var r=+e,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],a=(r-s*(i[1][1]+i[0][1]))/2;n.scale(150*s).translate([o,a])},t)}var QF=16,Tce=at(30*sn);function JF(n,e){return+e?Ace(n,e):Mce(n)}function Mce(n){return mk({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}function Ace(n,e){function t(i,r,s,o,a,l,c,u,h,d,f,g,p,m){var b=c-i,y=u-r,w=b*b+y*y;if(w>4*e&&p--){var R=o+d,E=a+f,_=l+g,T=kr(R*R+E*E+_*_),I=oo(_/=T),x=Dt(Dt(_)-1)<qe||Dt(s-h)<qe?(s+h)/2:ol(E,R),P=n(x,I),D=P[0],B=P[1],V=D-i,z=B-r,L=y*V-b*z;(L*L/w>e||Dt((b*V+y*z)/w-.5)>.3||o*d+a*f+l*g<Tce)&&(t(i,r,s,o,a,l,D,B,x,R/=T,E/=T,_,p,m),m.point(D,B),t(D,B,x,R,E,_,c,u,h,d,f,g,p,m))}}return function(i){var r,s,o,a,l,c,u,h,d,f,g,p,m={point:b,lineStart:y,lineEnd:R,polygonStart:function(){i.polygonStart(),m.lineStart=E},polygonEnd:function(){i.polygonEnd(),m.lineStart=y}};function b(I,x){I=n(I,x),i.point(I[0],I[1])}function y(){h=NaN,m.point=w,i.lineStart()}function w(I,x){var P=yp([I,x]),D=n(I,x);t(h,d,u,f,g,p,h=D[0],d=D[1],u=I,f=P[0],g=P[1],p=P[2],QF,i),i.point(h,d)}function R(){m.point=b,i.lineEnd()}function E(){y(),m.point=_,m.lineEnd=T}function _(I,x){w(r=I,x),s=h,o=d,a=f,l=g,c=p,m.point=w}function T(){t(h,d,u,f,g,p,s,o,r,a,l,c,QF,i),m.lineEnd=R,R()}return m}}var Pce=mk({point:function(n,e){this.stream.point(n*sn,e*sn)}});function Ice(n){return mk({point:function(e,t){var i=n(e,t);return this.stream.point(i[0],i[1])}})}function Oce(n,e,t,i,r){function s(o,a){return o*=i,a*=r,[e+n*o,t-n*a]}return s.invert=function(o,a){return[(o-e)/n*i,(t-a)/n*r]},s}function eB(n,e,t,i,r,s){if(!s)return Oce(n,e,t,i,r);var o=at(s),a=it(s),l=o*n,c=a*n,u=o/n,h=a/n,d=(a*t-o*e)/n,f=(a*e+o*t)/n;function g(p,m){return p*=i,m*=r,[l*p-c*m+e,t-c*p-l*m]}return g.invert=function(p,m){return[i*(u*p-h*m+d),r*(f-h*p-u*m)]},g}function Lc(n){return rU(function(){return n})()}function rU(n){var e,t=150,i=480,r=250,s=0,o=0,a=0,l=0,c=0,u,h=0,d=1,f=1,g=null,p=HF,m=null,b,y,w,R=mP,E=.5,_,T,I,x,P;function D(L){return I(L[0]*sn,L[1]*sn)}function B(L){return L=I.invert(L[0],L[1]),L&&[L[0]*_r,L[1]*_r]}D.stream=function(L){return x&&P===L?x:x=Pce(Ice(u)(p(_(R(P=L)))))},D.preclip=function(L){return arguments.length?(p=L,g=void 0,z()):p},D.postclip=function(L){return arguments.length?(R=L,m=b=y=w=null,z()):R},D.clipAngle=function(L){return arguments.length?(p=+L?rce(g=L*sn):(g=null,HF),z()):g*_r},D.clipExtent=function(L){return arguments.length?(R=L==null?(m=b=y=w=null,mP):oce(m=+L[0][0],b=+L[0][1],y=+L[1][0],w=+L[1][1]),z()):m==null?null:[[m,b],[y,w]]},D.scale=function(L){return arguments.length?(t=+L,V()):t},D.translate=function(L){return arguments.length?(i=+L[0],r=+L[1],V()):[i,r]},D.center=function(L){return arguments.length?(s=L[0]%360*sn,o=L[1]%360*sn,V()):[s*_r,o*_r]},D.rotate=function(L){return arguments.length?(a=L[0]%360*sn,l=L[1]%360*sn,c=L.length>2?L[2]%360*sn:0,V()):[a*_r,l*_r,c*_r]},D.angle=function(L){return arguments.length?(h=L%360*sn,V()):h*_r},D.reflectX=function(L){return arguments.length?(d=L?-1:1,V()):d<0},D.reflectY=function(L){return arguments.length?(f=L?-1:1,V()):f<0},D.precision=function(L){return arguments.length?(_=JF(T,E=L*L),z()):kr(E)},D.fitExtent=function(L,k){return bk(D,L,k)},D.fitSize=function(L,k){return tU(D,L,k)},D.fitWidth=function(L,k){return nU(D,L,k)},D.fitHeight=function(L,k){return iU(D,L,k)};function V(){var L=eB(t,0,0,d,f,h).apply(null,e(s,o)),k=eB(t,i-L[0],r-L[1],d,f,h);return u=H4(a,l,c),T=uP(e,k),I=uP(u,T),_=JF(T,E),z()}function z(){return x=P=null,D}return function(){return e=n.apply(this,arguments),D.invert=e.invert&&B,V()}}function wk(n){var e=0,t=bt/3,i=rU(n),r=i(e,t);return r.parallels=function(s){return arguments.length?i(e=s[0]*sn,t=s[1]*sn):[e*_r,t*_r]},r}function kce(n){var e=at(n);function t(i,r){return[i*e,it(r)/e]}return t.invert=function(i,r){return[i/e,oo(r*e)]},t}function Dce(n,e){var t=it(n),i=(t+it(e))/2;if(Dt(i)<qe)return kce(n);var r=1+t*(2*i-t),s=kr(r)/i;function o(a,l){var c=kr(r-2*i*it(l))/i;return[c*it(a*=i),s-c*at(a)]}return o.invert=function(a,l){var c=s-l,u=ol(a,Dt(c))*eo(c);return c*i<0&&(u-=bt*eo(a)*eo(c)),[u/i,oo((r-(a*a+c*c)*i*i)/(2*i))]},o}function A_(){return wk(Dce).scale(155.424).center([0,33.6442])}function sU(){return A_().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Nce(n){var e=n.length;return{point:function(t,i){for(var r=-1;++r<e;)n[r].point(t,i)},sphere:function(){for(var t=-1;++t<e;)n[t].sphere()},lineStart:function(){for(var t=-1;++t<e;)n[t].lineStart()},lineEnd:function(){for(var t=-1;++t<e;)n[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<e;)n[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<e;)n[t].polygonEnd()}}}function Lce(){var n,e,t=sU(),i,r=A_().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=A_().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(d,f){l=[d,f]}};function u(d){var f=d[0],g=d[1];return l=null,i.point(f,g),l||(s.point(f,g),l)||(a.point(f,g),l)}u.invert=function(d){var f=t.scale(),g=t.translate(),p=(d[0]-g[0])/f,m=(d[1]-g[1])/f;return(m>=.12&&m<.234&&p>=-.425&&p<-.214?r:m>=.166&&m<.234&&p>=-.214&&p<-.115?o:t).invert(d)},u.stream=function(d){return n&&e===d?n:n=Nce([t.stream(e=d),r.stream(d),o.stream(d)])},u.precision=function(d){return arguments.length?(t.precision(d),r.precision(d),o.precision(d),h()):t.precision()},u.scale=function(d){return arguments.length?(t.scale(d),r.scale(d*.35),o.scale(d),u.translate(t.translate())):t.scale()},u.translate=function(d){if(!arguments.length)return t.translate();var f=t.scale(),g=+d[0],p=+d[1];return i=t.translate(d).clipExtent([[g-.455*f,p-.238*f],[g+.455*f,p+.238*f]]).stream(c),s=r.translate([g-.307*f,p+.201*f]).clipExtent([[g-.425*f+qe,p+.12*f+qe],[g-.214*f-qe,p+.234*f-qe]]).stream(c),a=o.translate([g-.205*f,p+.212*f]).clipExtent([[g-.214*f+qe,p+.166*f+qe],[g-.115*f-qe,p+.234*f-qe]]).stream(c),h()},u.fitExtent=function(d,f){return bk(u,d,f)},u.fitSize=function(d,f){return tU(u,d,f)},u.fitWidth=function(d,f){return nU(u,d,f)},u.fitHeight=function(d,f){return iU(u,d,f)};function h(){return n=e=null,u}return u.scale(1070)}function oU(n){return function(e,t){var i=at(e),r=at(t),s=n(i*r);return s===1/0?[2,0]:[s*r*it(e),s*it(t)]}}function Yw(n){return function(e,t){var i=kr(e*e+t*t),r=n(i),s=it(r),o=at(r);return[ol(e*s,i*o),oo(i&&t*s/i)]}}var aU=oU(function(n){return kr(2/(1+n))});aU.invert=Yw(function(n){return 2*oo(n/2)});function Hce(){return Lc(aU).scale(124.75).clipAngle(180-.001)}var lU=oU(function(n){return(n=L4(n))&&n/it(n)});lU.invert=Yw(function(n){return n});function $ce(){return Lc(lU).scale(79.4188).clipAngle(180-.001)}function h1(n,e){return[n,w_(pk((Jn+e)/2))]}h1.invert=function(n,e){return[n,2*Wp(N4(e))-Jn]};function Fce(){return cU(h1).scale(961/Es)}function cU(n){var e=Lc(n),t=e.center,i=e.scale,r=e.translate,s=e.clipExtent,o=null,a,l,c;e.scale=function(h){return arguments.length?(i(h),u()):i()},e.translate=function(h){return arguments.length?(r(h),u()):r()},e.center=function(h){return arguments.length?(t(h),u()):t()},e.clipExtent=function(h){return arguments.length?(h==null?o=a=l=c=null:(o=+h[0][0],a=+h[0][1],l=+h[1][0],c=+h[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var h=bt*i(),d=e(Zle(e.rotate()).invert([0,0]));return s(o==null?[[d[0]-h,d[1]-h],[d[0]+h,d[1]+h]]:n===h1?[[Math.max(d[0]-h,o),a],[Math.min(d[0]+h,l),c]]:[[o,Math.max(d[1]-h,a)],[l,Math.min(d[1]+h,c)]])}return u()}function n0(n){return pk((Jn+n)/2)}function Bce(n,e){var t=at(n),i=n===e?it(n):w_(t/at(e))/w_(n0(e)/n0(n)),r=t*Cx(n0(n),i)/i;if(!i)return h1;function s(o,a){r>0?a<-Jn+qe&&(a=-Jn+qe):a>Jn-qe&&(a=Jn-qe);var l=r/Cx(n0(a),i);return[l*it(i*o),r-l*at(i*o)]}return s.invert=function(o,a){var l=r-a,c=eo(i)*kr(o*o+l*l),u=ol(o,Dt(l))*eo(l);return l*i<0&&(u-=bt*eo(o)*eo(l)),[u/i,2*Wp(Cx(r/c,1/i))-Jn]},s}function Vce(){return wk(Bce).scale(109.5).parallels([30,30])}function P_(n,e){return[n,e]}P_.invert=P_;function Wce(){return Lc(P_).scale(152.63)}function jce(n,e){var t=at(n),i=n===e?it(n):(t-at(e))/(e-n),r=t/i+n;if(Dt(i)<qe)return P_;function s(o,a){var l=r-a,c=i*o;return[l*it(c),r-l*at(c)]}return s.invert=function(o,a){var l=r-a,c=ol(o,Dt(l))*eo(l);return l*i<0&&(c-=bt*eo(o)*eo(l)),[c/i,r-eo(i)*kr(o*o+l*l)]},s}function zce(){return wk(jce).scale(131.154).center([0,13.9389])}var gb=1.340264,pb=-.081106,mb=893e-6,vb=.003796,I_=kr(3)/2,Uce=12;function uU(n,e){var t=oo(I_*it(e)),i=t*t,r=i*i*i;return[n*at(t)/(I_*(gb+3*pb*i+r*(7*mb+9*vb*i))),t*(gb+pb*i+r*(mb+vb*i))]}uU.invert=function(n,e){for(var t=e,i=t*t,r=i*i*i,s=0,o,a,l;s<Uce&&(a=t*(gb+pb*i+r*(mb+vb*i))-e,l=gb+3*pb*i+r*(7*mb+9*vb*i),t-=o=a/l,i=t*t,r=i*i*i,!(Dt(o)<gk));++s);return[I_*n*(gb+3*pb*i+r*(7*mb+9*vb*i))/at(t),oo(it(t)/I_)]};function Gce(){return Lc(uU).scale(177.158)}function hU(n,e){var t=at(e),i=at(n)*t;return[t*it(n)/i,it(e)/i]}hU.invert=Yw(Wp);function Yce(){return Lc(hU).scale(144.049).clipAngle(60)}function dU(n,e){var t=e*e,i=t*t;return[n*(.8707-.131979*t+i*(-.013791+i*(.003971*t-.001529*i))),e*(1.007226+t*(.015085+i*(-.044475+.028874*t-.005916*i)))]}dU.invert=function(n,e){var t=e,i=25,r;do{var s=t*t,o=s*s;t-=r=(t*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-e)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Dt(r)>qe&&--i>0);return[n/(.8707+(s=t*t)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),t]};function Kce(){return Lc(dU).scale(175.295)}function fU(n,e){return[at(e)*it(n),it(e)]}fU.invert=Yw(oo);function xP(){return Lc(fU).scale(249.5).clipAngle(90+qe)}function gU(n,e){var t=at(e),i=1+at(n)*t;return[t*it(n)/i,it(e)/i]}gU.invert=Yw(function(n){return 2*Wp(n)});function qce(){return Lc(gU).scale(250).clipAngle(142)}function pU(n,e){return[w_(pk((Jn+e)/2)),-n]}pU.invert=function(n,e){return[-e,2*Wp(N4(n))-Jn]};function Xce(){var n=cU(pU),e=n.center,t=n.rotate;return n.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},n.rotate=function(i){return arguments.length?t([i[0],i[1],i.length>2?i[2]+90:90]):(i=t(),[i[0],i[1],i[2]-90])},t([0,0,90]).scale(159.155)}function zt(n){for(var e=n.length/6|0,t=new Array(e),i=0;i<e;)t[i]="#"+n.slice(i*6,++i*6);return t}function d1(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function yk(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function jp(){}var Jd=.7,_p=1/Jd,tp="\\s*([+-]?\\d+)\\s*",aw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ja="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Zce=/^#([0-9a-f]{3,8})$/,Qce=new RegExp(`^rgb\\(${tp},${tp},${tp}\\)$`),Jce=new RegExp(`^rgb\\(${Ja},${Ja},${Ja}\\)$`),eue=new RegExp(`^rgba\\(${tp},${tp},${tp},${aw}\\)$`),tue=new RegExp(`^rgba\\(${Ja},${Ja},${Ja},${aw}\\)$`),nue=new RegExp(`^hsl\\(${aw},${Ja},${Ja}\\)$`),iue=new RegExp(`^hsla\\(${aw},${Ja},${Ja},${aw}\\)$`),tB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};d1(jp,Ck,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:nB,formatHex:nB,formatHex8:rue,formatHsl:sue,formatRgb:iB,toString:iB});function nB(){return this.rgb().formatHex()}function rue(){return this.rgb().formatHex8()}function sue(){return vU(this).formatHsl()}function iB(){return this.rgb().formatRgb()}function Ck(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Zce.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?rB(e):t===3?new ar(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?i0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?i0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Qce.exec(n))?new ar(e[1],e[2],e[3],1):(e=Jce.exec(n))?new ar(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=eue.exec(n))?i0(e[1],e[2],e[3],e[4]):(e=tue.exec(n))?i0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=nue.exec(n))?aB(e[1],e[2]/100,e[3]/100,1):(e=iue.exec(n))?aB(e[1],e[2]/100,e[3]/100,e[4]):tB.hasOwnProperty(n)?rB(tB[n]):n==="transparent"?new ar(NaN,NaN,NaN,0):null}function rB(n){return new ar(n>>16&255,n>>8&255,n&255,1)}function i0(n,e,t,i){return i<=0&&(n=e=t=NaN),new ar(n,e,t,i)}function mU(n){return n instanceof jp||(n=Ck(n)),n?(n=n.rgb(),new ar(n.r,n.g,n.b,n.opacity)):new ar}function lw(n,e,t,i){return arguments.length===1?mU(n):new ar(n,e,t,i??1)}function ar(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}d1(ar,lw,yk(jp,{brighter(n){return n=n==null?_p:Math.pow(_p,n),new ar(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Jd:Math.pow(Jd,n),new ar(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ar(Ld(this.r),Ld(this.g),Ld(this.b),O_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sB,formatHex:sB,formatHex8:oue,formatRgb:oB,toString:oB}));function sB(){return`#${wd(this.r)}${wd(this.g)}${wd(this.b)}`}function oue(){return`#${wd(this.r)}${wd(this.g)}${wd(this.b)}${wd((isNaN(this.opacity)?1:this.opacity)*255)}`}function oB(){const n=O_(this.opacity);return`${n===1?"rgb(":"rgba("}${Ld(this.r)}, ${Ld(this.g)}, ${Ld(this.b)}${n===1?")":`, ${n})`}`}function O_(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ld(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function wd(n){return n=Ld(n),(n<16?"0":"")+n.toString(16)}function aB(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Uo(n,e,t,i)}function vU(n){if(n instanceof Uo)return new Uo(n.h,n.s,n.l,n.opacity);if(n instanceof jp||(n=Ck(n)),!n)return new Uo;if(n instanceof Uo)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(t-i)/a+(t<i)*6:t===s?o=(i-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new Uo(o,a,l,n.opacity)}function aue(n,e,t,i){return arguments.length===1?vU(n):new Uo(n,e,t,i??1)}function Uo(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}d1(Uo,aue,yk(jp,{brighter(n){return n=n==null?_p:Math.pow(_p,n),new Uo(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Jd:Math.pow(Jd,n),new Uo(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new ar(xx(n>=240?n-240:n+120,r,i),xx(n,r,i),xx(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new Uo(lB(this.h),r0(this.s),r0(this.l),O_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=O_(this.opacity);return`${n===1?"hsl(":"hsla("}${lB(this.h)}, ${r0(this.s)*100}%, ${r0(this.l)*100}%${n===1?")":`, ${n})`}`}}));function lB(n){return n=(n||0)%360,n<0?n+360:n}function r0(n){return Math.max(0,Math.min(1,n||0))}function xx(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const lue=Math.PI/180,cue=180/Math.PI;var bU=-.14861,Sk=1.78277,_k=-.29227,f1=-.90649,cw=1.97294,cB=cw*f1,uB=cw*Sk,hB=Sk*_k-f1*bU;function uue(n){if(n instanceof Hd)return new Hd(n.h,n.s,n.l,n.opacity);n instanceof ar||(n=mU(n));var e=n.r/255,t=n.g/255,i=n.b/255,r=(hB*i+cB*e-uB*t)/(hB+cB-uB),s=i-r,o=(cw*(t-r)-_k*s)/f1,a=Math.sqrt(o*o+s*s)/(cw*r*(1-r)),l=a?Math.atan2(o,s)*cue-120:NaN;return new Hd(l<0?l+360:l,a,r,n.opacity)}function al(n,e,t,i){return arguments.length===1?uue(n):new Hd(n,e,t,i??1)}function Hd(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}d1(Hd,al,yk(jp,{brighter(n){return n=n==null?_p:Math.pow(_p,n),new Hd(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Jd:Math.pow(Jd,n),new Hd(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*lue,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(n),r=Math.sin(n);return new ar(255*(e+t*(bU*i+Sk*r)),255*(e+t*(_k*i+f1*r)),255*(e+t*(cw*i)),this.opacity)}}));function hue(n,e,t,i,r){var s=n*n,o=s*n;return((1-3*n+3*s-o)*e+(4-6*s+3*o)*t+(1+3*n+3*s-3*o)*i+o*r)/6}function due(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),r=n[i],s=n[i+1],o=i>0?n[i-1]:2*r-s,a=i<e-1?n[i+2]:2*s-r;return hue((t-i/e)*e,o,r,s,a)}}const Rk=n=>()=>n;function wU(n,e){return function(t){return n+t*e}}function fue(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function gue(n,e){var t=e-n;return t?wU(n,t>180||t<-180?t-360*Math.round(t/360):t):Rk(isNaN(n)?e:n)}function pue(n){return(n=+n)==1?np:function(e,t){return t-e?fue(e,t,n):Rk(isNaN(e)?t:e)}}function np(n,e){var t=e-n;return t?wU(n,t):Rk(isNaN(n)?e:n)}(function n(e){var t=pue(e);function i(r,s){var o=t((r=lw(r)).r,(s=lw(s)).r),a=t(r.g,s.g),l=t(r.b,s.b),c=np(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=n,i})(1);function mue(n){return function(e){var t=e.length,i=new Array(t),r=new Array(t),s=new Array(t),o,a;for(o=0;o<t;++o)a=lw(e[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=n(i),r=n(r),s=n(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}var vue=mue(due);function yU(n){return function e(t){t=+t;function i(r,s){var o=n((r=al(r)).h,(s=al(s)).h),a=np(r.s,s.s),l=np(r.l,s.l),c=np(r.opacity,s.opacity);return function(u){return r.h=o(u),r.s=a(u),r.l=l(Math.pow(u,t)),r.opacity=c(u),r+""}}return i.gamma=e,i}(1)}yU(gue);var Ek=yU(np);const mn=n=>vue(n[n.length-1]);var bue=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(zt);const wue=mn(bue);var yue=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(zt);const Cue=mn(yue);var Sue=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(zt);const _ue=mn(Sue);var Rue=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(zt);const Eue=mn(Rue);var xue=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(zt);const Tue=mn(xue);var Mue=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(zt);const Aue=mn(Mue);var Pue=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(zt);const Iue=mn(Pue);var Oue=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(zt);const kue=mn(Oue);var Due=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(zt);const Nue=mn(Due);var Lue=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(zt);const Hue=mn(Lue);var $ue=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(zt);const Fue=mn($ue);var Bue=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(zt);const Vue=mn(Bue);var Wue=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(zt);const jue=mn(Wue);var zue=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(zt);const Uue=mn(zue);var Gue=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(zt);const Yue=mn(Gue);var Kue=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(zt);const que=mn(Kue);var Xue=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(zt);const Zue=mn(Xue);var Que=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(zt);const Jue=mn(Que);var ehe=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(zt);const the=mn(ehe);var nhe=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(zt);const ihe=mn(nhe);var rhe=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(zt);const she=mn(rhe);var ohe=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(zt);const ahe=mn(ohe);var lhe=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(zt);const che=mn(lhe);var uhe=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(zt);const hhe=mn(uhe);var dhe=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(zt);const fhe=mn(dhe);var ghe=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(zt);const phe=mn(ghe);var mhe=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(zt);const vhe=mn(mhe);function bhe(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-n*(35.34-n*(2381.73-n*(6402.7-n*(7024.72-n*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+n*(170.73+n*(52.82-n*(131.46-n*(176.58-n*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+n*(442.36-n*(2482.43-n*(6167.24-n*(6614.94-n*2475.67)))))))+")"}const whe=Ek(al(300,.5,0),al(-240,.5,1));var yhe=Ek(al(-100,.75,.35),al(80,1.5,.8)),Che=Ek(al(260,.75,.35),al(80,1.5,.8)),s0=al();function She(n){(n<0||n>1)&&(n-=Math.floor(n));var e=Math.abs(n-.5);return s0.h=360*n-100,s0.s=1.5-1.5*e,s0.l=.8-.9*e,s0+""}var o0=lw(),_he=Math.PI/3,Rhe=Math.PI*2/3;function Ehe(n){var e;return n=(.5-n)*Math.PI,o0.r=255*(e=Math.sin(n))*e,o0.g=255*(e=Math.sin(n+_he))*e,o0.b=255*(e=Math.sin(n+Rhe))*e,o0+""}function xhe(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+n*(1172.33-n*(10793.56-n*(33300.12-n*(38394.49-n*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+n*(557.33+n*(1225.33-n*(3574.96-n*(1073.77+n*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+n*(3211.1-n*(15327.97-n*(27814-n*(22569.18-n*6838.66)))))))+")"}function g1(n){var e=n.length;return function(t){return n[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}}const The=g1(zt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Mhe=g1(zt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Ahe=g1(zt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Phe=g1(zt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Ihe(n){return n}function Ohe(n){if(n==null)return Ihe;var e,t,i=n.scale[0],r=n.scale[1],s=n.translate[0],o=n.translate[1];return function(a,l){l||(e=t=0);var c=2,u=a.length,h=new Array(u);for(h[0]=(e+=a[0])*i+s,h[1]=(t+=a[1])*r+o;c<u;)h[c]=a[c],++c;return h}}function khe(n,e){for(var t,i=n.length,r=i-e;r<--i;)t=n[r],n[r++]=n[i],n[i]=t}function Dhe(n,e){return typeof e=="string"&&(e=n.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return dB(n,t)})}:dB(n,e)}function dB(n,e){var t=e.id,i=e.bbox,r=e.properties==null?{}:e.properties,s=Nhe(n,e);return t==null&&i==null?{type:"Feature",properties:r,geometry:s}:i==null?{type:"Feature",id:t,properties:r,geometry:s}:{type:"Feature",id:t,bbox:i,properties:r,geometry:s}}function Nhe(n,e){var t=Ohe(n.transform),i=n.arcs;function r(u,h){h.length&&h.pop();for(var d=i[u<0?~u:u],f=0,g=d.length;f<g;++f)h.push(t(d[f],f));u<0&&khe(h,g)}function s(u){return t(u)}function o(u){for(var h=[],d=0,f=u.length;d<f;++d)r(u[d],h);return h.length<2&&h.push(h[0]),h}function a(u){for(var h=o(u);h.length<4;)h.push(h[0]);return h}function l(u){return u.map(a)}function c(u){var h=u.type,d;switch(h){case"GeometryCollection":return{type:h,geometries:u.geometries.map(c)};case"Point":d=s(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(s);break;case"LineString":d=o(u.arcs);break;case"MultiLineString":d=u.arcs.map(o);break;case"Polygon":d=l(u.arcs);break;case"MultiPolygon":d=u.arcs.map(l);break;default:return null}return{type:h,coordinates:d}}return c(e)}const bb={geoAzimuthalEqualArea:Hce,geoAzimuthalEquidistant:$ce,geoGnomonic:Yce,geoOrthographic:xP,geoStereographic:qce,geoEqualEarth:Gce,geoAlbers:sU,geoAlbersUsa:Lce,geoConicConformal:Vce,geoConicEqualArea:A_,geoConicEquidistant:zce,geoEquirectangular:Wce,geoMercator:Fce,geoTransverseMercator:Xce,geoNaturalEarth1:Kce};Object.keys(bb).forEach(n=>{bb[`${n.charAt(3).toLowerCase()}${n.slice(4)}`]=bb[n]});class bf extends rh{constructor(e){super(e),this.outlineBounds=null,this.oldChartBounds=null,this.geoPath=ZF()}init(e){e.position="chartArea",super.init(e),typeof e.projection=="function"?this.projection=e.projection:this.projection=(bb[e.projection]||bb.albersUsa)(),this.geoPath.projection(this.projection),this.outlineBounds=null,this.oldChartBounds=null}computeBounds(e){const t=ZF(this.projection.fitWidth(1e3,e)).bounds(e),i=Math.ceil(t[1][1]-t[0][1]),r=Math.ceil(t[1][0]-t[0][0]),s=this.projection.translate();this.outlineBounds={width:r,height:i,aspectRatio:r/i,refScale:this.projection.scale(),refX:s[0],refY:s[1]}}updateBounds(){const e=this.chart.chartArea,t=this.outlineBounds;if(!t)return!1;const i=this.options.padding,r=typeof i=="number"?i:i.top,s=typeof i=="number"?i:i.left,o=typeof i=="number"?i:i.bottom,a=typeof i=="number"?i:i.right,l=e.right-e.left-s-a,c=e.bottom-e.top-r-o,u=this.oldChartBounds;this.oldChartBounds={chartWidth:l,chartHeight:c};const h=Math.min(l/t.width,c/t.height),d=t.width*h,f=t.height*h,g=(l-d)*.5+e.left+s,p=(c-f)*.5+e.top+r,m=this.options;return this.projection.scale(t.refScale*h*m.projectionScale).translate([h*t.refX+g+m.projectionOffset[0],h*t.refY+p+m.projectionOffset[1]]),!u||u.chartWidth!==this.oldChartBounds.chartWidth||u.chartHeight!==this.oldChartBounds.chartHeight}}bf.id="projection";bf.defaults={projection:"albersUsa",projectionScale:1,projectionOffset:[0,0],padding:0};bf.descriptors={_scriptable:n=>n!=="projection",_indexable:n=>n!=="projectionOffset"};const p1={position:"chartArea",property:"value",grid:{z:1,drawOnChartArea:!1},ticks:{z:1},legend:{align:"right",position:"bottom-right",length:100,width:50,margin:8,indicatorWidth:10}};function Lhe(n){const{indicatorWidth:e,align:t,margin:i}=n,r=(typeof i=="number"?i:i.left)+(t==="right"?e:0),s=(typeof i=="number"?i:i.top)+(t==="bottom"?e:0),o=(typeof i=="number"?i:i.right)+(t==="left"?e:0),a=(typeof i=="number"?i:i.bottom)+(t==="top"?e:0);return{left:r,top:s,right:o,bottom:a}}function Hhe(n,e,t,i,r){const{indicatorWidth:s,align:o,position:a}=e,l=o==="top"||o==="bottom",c=(o==="left"?r.w:t)+(l?s:0),u=(o==="top"?r.h:i)+(l?0:s),h=Lhe(e);if(typeof a=="string")switch(a){case"top-left":return[h.left,h.top];case"top":return[(n.right-c)/2,h.top];case"left":return[h.left,(n.bottom-u)/2];case"top-right":return[n.right-c-h.right,h.top];case"bottom-right":return[n.right-c-h.right,n.bottom-u-h.bottom];case"bottom":return[(n.right-c)/2,n.bottom-u-h.bottom];case"bottom-left":return[h.left,n.bottom-u-h.bottom];default:return[n.right-c-h.right,(n.bottom-u)/2]}return[a.x,a.y]}class jg extends Bp{constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(e){e.position="chartArea",super.init(e),this.axis="r"}parse(e,t){return e&&typeof e[this.options.property]=="number"?e[this.options.property]:super.parse(e,t)}isHorizontal(){return this.options.legend.align==="top"||this.options.legend.align==="bottom"}_getNormalizedValue(e){return e==null||Number.isNaN(e)?null:(e-this._startValue)/this._valueRange}update(e,t,i){const r=Math.min(t,this.bottom==null?Number.POSITIVE_INFINITY:this.bottom),s=Math.min(e,this.right==null?Number.POSITIVE_INFINITY:this.right),o=this.options.legend,a=this.isHorizontal(),l=(f,g)=>f<1?g*f:f,c=Math.min(s,l(a?o.length:o.width,s))-(a?0:o.indicatorWidth),u=Math.min(r,l(a?o.width:o.length,r))-(a?o.indicatorWidth:0);this.legendSize={w:c,h:u},this.bottom=u,this.height=u,this.right=c,this.width=c;const h=this.options.position;this.options.position=this.options.legend.align;const d=super.update(c,u,i);return this.options.position=h,this.height=Math.min(u,this.height),this.width=Math.min(c,this.width),d}_computeLabelArea(){}draw(e){if(!this._isVisible())return;const t=Hhe(e,this.options.legend,this.width,this.height,this.legendSize),{ctx:i}=this;i.save(),i.translate(t[0],t[1]);const r=this.options.position;this.options.position=this.options.legend.align,super.draw({...e,bottom:this.height+10,right:this.width}),this.options.position=r;const{indicatorWidth:s}=this.options.legend;switch(this.options.legend.align){case"left":i.translate(this.legendSize.w,0);break;case"top":i.translate(0,this.legendSize.h);break;case"bottom":i.translate(0,-s);break;default:i.translate(-s,0);break}this._drawIndicator(),i.restore()}_drawIndicator(){}}class CU extends Vp{constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(e){jg.prototype.init.call(this,e)}parse(e,t){return jg.prototype.parse.call(this,e,t)}isHorizontal(){return this.options.legend.align==="top"||this.options.legend.align==="bottom"}_getNormalizedValue(e){return e==null||Number.isNaN(e)?null:(Math.log10(e)-this._startValue)/this._valueRange}update(e,t,i){return jg.prototype.update.call(this,e,t,i)}_computeLabelArea(){}draw(e){return jg.prototype.draw.call(this,e)}_drawIndicator(){}}const ic={interpolateBlues:ahe,interpolateBrBG:wue,interpolateBuGn:Hue,interpolateBuPu:Fue,interpolateCividis:bhe,interpolateCool:Che,interpolateCubehelixDefault:whe,interpolateGnBu:Vue,interpolateGreens:che,interpolateGreys:hhe,interpolateInferno:Ahe,interpolateMagma:Mhe,interpolateOrRd:jue,interpolateOranges:vhe,interpolatePRGn:Cue,interpolatePiYG:_ue,interpolatePlasma:Phe,interpolatePuBu:Yue,interpolatePuBuGn:Uue,interpolatePuOr:Eue,interpolatePuRd:que,interpolatePurples:fhe,interpolateRainbow:She,interpolateRdBu:Tue,interpolateRdGy:Aue,interpolateRdPu:Zue,interpolateRdYlBu:Iue,interpolateRdYlGn:kue,interpolateReds:phe,interpolateSinebow:Ehe,interpolateSpectral:Nue,interpolateTurbo:xhe,interpolateViridis:The,interpolateWarm:yhe,interpolateYlGn:the,interpolateYlGnBu:Jue,interpolateYlOrBr:ihe,interpolateYlOrRd:she};Object.keys(ic).forEach(n=>{ic[`${n.charAt(11).toLowerCase()}${n.slice(12)}`]=ic[n],ic[n.slice(11)]=ic[n]});function SU(n,e){const t=1/e;if(n<=t)return 0;if(n>=1-t)return 1;for(let i=0;i<1;i+=t)if(n<i)return i-t/2;return n}const _U={interpolate:"blues",missing:"transparent",quantize:0};class Uu extends jg{get interpolate(){const e=this.options;return e?typeof e.interpolate=="function"?e.interpolate:ic[e.interpolate]||ic.blues:t=>`rgb(${t},${t},${t})`}getColorForValue(e){const t=this._getNormalizedValue(e);return t==null||Number.isNaN(t)?this.options.missing:this.getColor(t)}getColor(e){let t=e;return this.options.quantize>0&&(t=SU(t,this.options.quantize)),this.interpolate(t)}_drawIndicator(){const{indicatorWidth:e}=this.options.legend,t=this._reversePixels;if(this.isHorizontal()){const i=this.width;if(this.options.quantize>0){const r=i/this.options.quantize,s=t?o=>i-r-o:o=>o;for(let o=0;o<i;o+=r){const a=(o+r/2)/i;this.ctx.fillStyle=this.getColor(a),this.ctx.fillRect(s(o),0,r,e)}}else{const r=t?s=>i-1-s:s=>s;for(let s=0;s<i;s+=1)this.ctx.fillStyle=this.getColor((s+.5)/i),this.ctx.fillRect(r(s),0,1,e)}}else{const i=this.height;if(this.options.quantize>0){const r=i/this.options.quantize,s=t?o=>i-r-o:o=>o;for(let o=0;o<i;o+=r){const a=(o+r/2)/i;this.ctx.fillStyle=this.getColor(a),this.ctx.fillRect(0,s(o),e,r)}}else{const r=t?s=>i-1-s:s=>s;for(let s=0;s<i;s+=1)this.ctx.fillStyle=this.getColor((s+.5)/i),this.ctx.fillRect(0,r(s),e,1)}}}}Uu.id="color";Uu.defaults=_s({},[Bp.defaults,p1,_U]);Uu.descriptors={_scriptable:n=>n!=="interpolate",_indexable:!1};class xk extends CU{constructor(){super(...arguments),this.interpolate=e=>`rgb(${e},${e},${e})`}init(e){super.init(e),typeof e.interpolate=="function"?this.interpolate=e.interpolate:this.interpolate=ic[e.interpolate]||ic.blues}getColorForValue(e){return Uu.prototype.getColorForValue.call(this,e)}getColor(e){let t=e;return this.options.quantize>0&&(t=SU(t,this.options.quantize)),this.interpolate(t)}_drawIndicator(){return Uu.prototype._drawIndicator.call(this)}}xk.id="colorLogarithmic";xk.defaults=_s({},[Vp.defaults,p1,_U]);xk.descriptors={_scriptable:n=>n!=="interpolate",_indexable:!1};const RU={missing:1,mode:"area",range:[2,20],legend:{align:"bottom",length:90,width:70,indicatorWidth:42}};class ef extends jg{constructor(){super(...arguments),this._model=null}getSizeForValue(e){const t=this._getNormalizedValue(e);return t==null||Number.isNaN(t)?this.options.missing:this.getSizeImpl(t)}getSizeImpl(e){const[t,i]=this.options.range;if(this.options.mode==="area"){const s=i*i*Math.PI,o=t*t*Math.PI,a=s-o,l=e*a+o;return Math.sqrt(l/Math.PI)}const r=i-t;return e*r+t}_drawIndicator(){const{ctx:e}=this,t=this.options.legend.indicatorWidth/2,i=this.isHorizontal(),r=this.ticks,s=this.getLabelItems(),o=s?s.map(a=>({[i?"x":"y"]:a.options.translation[i?0:1]})):r.map((a,l)=>({[i?"x":"y"]:this.getPixelForTick(l)}));if((this._gridLineItems||[]).forEach(a=>{if(e.save(),e.strokeStyle=a.color,e.lineWidth=a.width,e.setLineDash&&(e.setLineDash(a.borderDash),e.lineDashOffset=a.borderDashOffset),e.beginPath(),this.options.grid.drawTicks)switch(this.options.legend.align){case"left":e.moveTo(0,a.ty1),e.lineTo(t,a.ty2);break;case"top":e.moveTo(a.tx1,0),e.lineTo(a.tx2,t);break;case"bottom":e.moveTo(a.tx1,t),e.lineTo(a.tx2,t*2);break;default:e.moveTo(t,a.ty1),e.lineTo(t*2,a.ty2);break}e.stroke(),e.restore()}),this._model){const a=this._model;e.strokeStyle=a.borderColor,e.lineWidth=a.borderWidth||0,e.fillStyle=a.backgroundColor}else e.fillStyle="blue";r.forEach((a,l)=>{const c=o[l],u=this.getSizeForValue(a.value),h=i?c.x:t,d=i?t:c.y,f={pointStyle:"circle",borderWidth:0,...this._model||{},radius:u};f_(e,f,h,d)})}}ef.id="size";ef.defaults=_s({},[Bp.defaults,p1,RU]);ef.descriptors={_scriptable:!0,_indexable:n=>n!=="range"};class EU extends CU{constructor(){super(...arguments),this._model=null}getSizeForValue(e){const t=this._getNormalizedValue(e);return t==null||Number.isNaN(t)?this.options.missing:this.getSizeImpl(t)}getSizeImpl(e){return ef.prototype.getSizeImpl.call(this,e)}_drawIndicator(){ef.prototype._drawIndicator.call(this)}}EU.id="sizeLogarithmic";EU.defaults=_s({},[Vp.defaults,p1,RU]);function $he(n,e){return[[n[0][0]-e,n[0][1]-e],[n[1][0]+e,n[1][1]+e]]}class Ec extends fo{constructor(){super(...arguments),this.cache=void 0}inRange(e,t){const i=this.getBounds(),r=(Number.isNaN(e)||e>=i.x&&e<=i.x2)&&(Number.isNaN(t)||t>=i.y&&t<=i.y2),s=this.projectionScale.geoPath.projection();if(r&&!Number.isNaN(e)&&!Number.isNaN(t)&&typeof s.invert=="function"){const o=s.invert([e,t]);return o!=null&&gce(this.feature,o)}return r}inXRange(e){return this.inRange(e,Number.NaN)}inYRange(e){return this.inRange(Number.NaN,e)}getCenterPoint(){if(this.cache&&this.cache.center)return this.cache.center;let e;if(this.center){const t=this.projectionScale.projection([this.center.longitude,this.center.latitude]);e={x:t[0],y:t[1]}}else{const t=this.projectionScale.geoPath.centroid(this.feature);e={x:t[0],y:t[1]}}return this.cache={...this.cache||{},center:e},e}getBounds(){if(this.cache&&this.cache.bounds)return this.cache.bounds;const e=$he(this.projectionScale.geoPath.bounds(this.feature),this.options.borderWidth/2),t={x:e[0][0],x2:e[1][0],y:e[0][1],y2:e[1][1],width:e[1][0]-e[0][0],height:e[1][1]-e[0][1]};return this.cache={...this.cache||{},bounds:t},t}_drawInCache(e){const t=this.getBounds();if(!Number.isFinite(t.x))return;const i=this.cache&&this.cache.canvas?this.cache.canvas:e.createElement("canvas"),r=Math.floor(t.x),s=Math.floor(t.y),o=Math.ceil(t.x+t.width),a=Math.ceil(t.y+t.height),l=this.pixelRatio||1,c=Math.ceil(Math.max(o-r,1)*l),u=Math.ceil(Math.max(a-s,1)*l);if(c<=0||u<=0)return;i.width=c,i.height=u;const h=i.getContext("2d");h&&(h.clearRect(0,0,i.width,i.height),h.save(),h.scale(l,l),h.translate(-r,-s),this._drawImpl(h),h.restore(),this.cache={...this.cache||{},canvas:i,canvasKey:this._optionsToKey()})}_optionsToKey(){const{options:e}=this;return`${e.backgroundColor};${e.borderColor};${e.borderWidth};${this.pixelRatio}`}_drawImpl(e){const{feature:t}=this,{options:i}=this;e.beginPath(),this.projectionScale.geoPath.context(e)(t),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fill()),i.borderColor&&(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.stroke())}draw(e){const{feature:t}=this;if(!t)return;(!this.cache||this.cache.canvasKey!==this._optionsToKey())&&e.canvas.ownerDocument!=null&&this._drawInCache(e.canvas.ownerDocument);const i=this.getBounds();if(this.cache&&this.cache.canvas&&this.cache.canvas.width>0&&this.cache.canvas.height>0){const r=Math.floor(i.x),s=Math.floor(i.y),o=Math.ceil(i.x+i.width),a=Math.ceil(i.y+i.height),l=o-r,c=a-s;l>0&&c>0&&e.drawImage(this.cache.canvas,r,s,o-r,a-s)}else Number.isFinite(i.x)&&(e.save(),this._drawImpl(e),e.restore())}}Ec.id="geoFeature";Ec.defaults={...Fp.defaults,outlineBackgroundColor:null,outlineBorderWidth:0,graticuleBorderColor:"#CCCCCC",graticuleBorderWidth:0};Ec.defaultRoutes={outlineBorderColor:"borderColor",...Fp.defaultRoutes||{}};const xU={showOutline:!1,showGraticule:!1,clipMap:!0},TU={scales:{projection:{axis:"x",type:bf.id,position:"chartArea",display:!1}}};function fB(n){const e={...n};return Object.keys(n).forEach(t=>{let i=t;if(t.startsWith("outline")){const r=t.slice(7);i=r[0].toLowerCase()+r.slice(1)}else if(t.startsWith("hoverOutline"))i=`hover${t.slice(12)}`;else return;delete e[t],e[i]=n[t]}),e}class MU extends ho{getGeoDataset(){return super.getDataset()}getGeoOptions(){return this.chart.options}getProjectionScale(){return this.getScaleForId("projection")}linkScales(){const e=this.getGeoDataset(),t=this.getMeta();t.xAxisID="projection",e.xAxisID="projection",t.yAxisID="projection",e.yAxisID="projection",t.xScale=this.getScaleForId("projection"),t.yScale=this.getScaleForId("projection"),this.getProjectionScale().computeBounds(this.resolveOutline())}showOutline(){return nt(this.getGeoDataset().showOutline,this.getGeoOptions().showOutline)}clipMap(){return nt(this.getGeoDataset().clipMap,this.getGeoOptions().clipMap)}getGraticule(){return nt(this.getGeoDataset().showGraticule,this.getGeoOptions().showGraticule)}update(e){super.update(e);const t=this.getMeta(),i=this.getProjectionScale(),r=i.updateBounds();if(this.showOutline()){const s=t.dataset;if(r&&delete s.cache,s.projectionScale=i,s.pixelRatio=this.chart.currentDevicePixelRatio,e!=="resize"){const o=fB(this.resolveDatasetElementOptions(e)),a={feature:this.resolveOutline(),options:o};this.updateElement(s,void 0,a,e),this.getGraticule()&&(t.graticule=o)}}else this.getGraticule()&&e!=="resize"&&(t.graticule=fB(this.resolveDatasetElementOptions(e)));this.updateElements(t.data,0,t.data.length,e),r&&t.data.forEach(s=>delete s.cache)}resolveOutline(){const t=this.getGeoDataset().outline||{type:"Sphere"};return Array.isArray(t)?{type:"FeatureCollection",features:t}:t}showGraticule(){const e=this.getGraticule(),t=this.getMeta().graticule;if(!e||!t)return;const{ctx:i}=this.chart,s=this.getProjectionScale().geoPath.context(i);if(i.save(),i.beginPath(),typeof e=="boolean")e&&s(pce());else{const o=j4();e.stepMajor&&o.stepMajor(e.stepMajor),e.stepMinor&&o.stepMinor(e.stepMinor),s(o())}i.strokeStyle=t.graticuleBorderColor,i.lineWidth=t.graticuleBorderWidth,i.stroke(),i.restore()}draw(){const{chart:e}=this,t=this.clipMap();let i=!1;(t===!0||t==="outline"||t==="outline+graticule")&&(i=!0,Od(e.ctx,e.chartArea)),this.showOutline()&&this.getMeta().dataset&&this.getMeta().dataset.draw.call(this.getMeta().dataset,e.ctx,e.chartArea),t===!0||t==="graticule"||t==="outline+graticule"?i||Od(e.ctx,e.chartArea):i&&(i=!1,kd(e.ctx)),this.showGraticule(),t===!0||t==="items"?i||Od(e.ctx,e.chartArea):i&&(i=!1,kd(e.ctx)),this.getMeta().data.forEach(r=>r.draw.call(r,e.ctx,e.chartArea)),i&&(i=!1,kd(e.ctx))}}function AU(n,e,t,i=[],r=[]){Er.addControllers(t),Array.isArray(i)?Er.addElements(...i):Er.addElements(i),Array.isArray(r)?Er.addScales(...r):Er.addScales(r);const s=e;return s.type=n,s}class zp extends MU{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const e=this.getGeoDataset(),t=this.getMeta();t.vAxisID="color",t.rAxisID="color",e.vAxisID="color",e.rAxisID="color",t.rScale=this.getScaleForId("color"),t.vScale=t.rScale,t.iScale=t.xScale,t.iAxisID=t.xAxisID,e.iAxisID=t.xAxisID}_getOtherScale(e){return e}parse(e,t){const i=this.getMeta().rScale,{data:r}=this.getDataset(),s=this._cachedMeta;for(let o=e;o<e+t;o+=1)s._parsed[o]={[i.axis]:i.parse(r[o],o)}}updateElements(e,t,i,r){const s=this.resolveDataElementOptions(t,r),o=this.getSharedOptions(s),a=this.includeOptions(r,o),l=this.getProjectionScale();this.updateSharedOptions(o,r,s);for(let c=t;c<t+i;c+=1){const u=e[c];u.projectionScale=l,u.feature=this._data[c].feature,u.center=this._data[c].center,u.pixelRatio=this.chart.currentDevicePixelRatio;const h=u.getCenterPoint(),d={x:h.x,y:h.y};a&&(d.options=o||this.resolveDataElementOptions(c,r)),this.updateElement(u,c,d,r)}}indexToColor(e){const t=this.getMeta().rScale;return t.getColorForValue(this.getParsed(e)[t.axis])}}zp.id="choropleth";zp.defaults=_s({},[xU,{datasetElementType:Ec.id,dataElementType:Ec.id}]);zp.overrides=_s({},[TU,{plugins:{tooltip:{callbacks:{title(){return""},label(n){var e,t,i,r;return n.formattedValue==null?(t=(e=n.chart.data)===null||e===void 0?void 0:e.labels)===null||t===void 0?void 0:t[n.dataIndex]:`${(r=(i=n.chart.data)===null||i===void 0?void 0:i.labels)===null||r===void 0?void 0:r[n.dataIndex]}: ${n.formattedValue}`}}},colors:{enabled:!1}},scales:{color:{type:Uu.id,axis:"x"}},elements:{geoFeature:{backgroundColor(n){return n.dataIndex==null?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToColor(n.dataIndex)}}}}]);class Fhe extends Rs{constructor(e,t){super(e,AU("choropleth",t,zp,Ec,[Uu,bf]))}}Fhe.id=zp.id;class Kw extends MU{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const e=this.getGeoDataset(),t=this.getMeta();t.vAxisID="size",t.rAxisID="size",e.vAxisID="size",e.rAxisID="size",t.rScale=this.getScaleForId("size"),t.vScale=t.rScale,t.iScale=t.xScale,t.iAxisID=t.xAxisID,e.iAxisID=t.xAxisID}_getOtherScale(e){return e}parse(e,t){const i=this.getMeta().rScale,r=this.getDataset().data,s=this._cachedMeta;for(let o=e;o<e+t;o+=1){const a=r[o];s._parsed[o]={x:a.longitude==null?a.x:a.longitude,y:a.latitude==null?a.y:a.latitude,[i.axis]:i.parse(a,o)}}}updateElements(e,t,i,r){const s=r==="reset",o=this.resolveDataElementOptions(t,r),a=this.getSharedOptions(o),l=this.includeOptions(r,a),c=this.getProjectionScale();this.getMeta().rScale._model=o,this.updateSharedOptions(a,r,o);for(let u=t;u<t+i;u+=1){const h=e[u],d=this.getParsed(u),f=c.projection([d.x,d.y]),g={x:f?f[0]:0,y:f?f[1]:0,skip:Number.isNaN(d.x)||Number.isNaN(d.y)};l&&(g.options=a||this.resolveDataElementOptions(u,r),s&&(g.options.radius=0)),this.updateElement(h,u,g,r)}}indexToRadius(e){const t=this.getMeta().rScale;return t.getSizeForValue(this.getParsed(e)[t.axis])}}Kw.id="bubbleMap";Kw.defaults=_s({},[xU,{dataElementType:zw.id,datasetElementType:Ec.id,showOutline:!0,clipMap:"outline+graticule"}]);Kw.overrides=_s({},[TU,{plugins:{tooltip:{callbacks:{title(){return""},label(n){var e,t,i,r;return n.formattedValue==null?(t=(e=n.chart.data)===null||e===void 0?void 0:e.labels)===null||t===void 0?void 0:t[n.dataIndex]:`${(r=(i=n.chart.data)===null||i===void 0?void 0:i.labels)===null||r===void 0?void 0:r[n.dataIndex]}: ${n.formattedValue}`}}}},scales:{size:{axis:"x",type:ef.id}},elements:{point:{radius(n){return n.dataIndex==null?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToRadius(n.dataIndex)},hoverRadius(n){return n.dataIndex==null?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToRadius(n.dataIndex)+1}}}}]);class Bhe extends Rs{constructor(e,t){super(e,AU("bubbleMap",t,Kw,Ec,[ef,bf]))}}Bhe.id=Kw.id;var zg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Up(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var TP={},Tk={};Object.defineProperty(Tk,"__esModule",{value:!0});const Vhe=[{country:"Afghanistan",alpha2:"AF",alpha3:"AFG",numeric:"004"},{country:"land Islands",alpha2:"AX",alpha3:"ALA",numeric:"248"},{country:"Albania",alpha2:"AL",alpha3:"ALB",numeric:"008"},{country:"Algeria",alpha2:"DZ",alpha3:"DZA",numeric:"012"},{country:"American Samoa",alpha2:"AS",alpha3:"ASM",numeric:"016"},{country:"Andorra",alpha2:"AD",alpha3:"AND",numeric:"020"},{country:"Angola",alpha2:"AO",alpha3:"AGO",numeric:"024"},{country:"Anguilla",alpha2:"AI",alpha3:"AIA",numeric:"660"},{country:"Antarctica",alpha2:"AQ",alpha3:"ATA",numeric:"010"},{country:"Antigua and Barbuda",alpha2:"AG",alpha3:"ATG",numeric:"028"},{country:"Argentina",alpha2:"AR",alpha3:"ARG",numeric:"032"},{country:"Armenia",alpha2:"AM",alpha3:"ARM",numeric:"051"},{country:"Aruba",alpha2:"AW",alpha3:"ABW",numeric:"533"},{country:"Australia",alpha2:"AU",alpha3:"AUS",numeric:"036"},{country:"Austria",alpha2:"AT",alpha3:"AUT",numeric:"040"},{country:"Azerbaijan",alpha2:"AZ",alpha3:"AZE",numeric:"031"},{country:"Bahamas",alpha2:"BS",alpha3:"BHS",numeric:"044"},{country:"Bahrain",alpha2:"BH",alpha3:"BHR",numeric:"048"},{country:"Bangladesh",alpha2:"BD",alpha3:"BGD",numeric:"050"},{country:"Barbados",alpha2:"BB",alpha3:"BRB",numeric:"052"},{country:"Belarus",alpha2:"BY",alpha3:"BLR",numeric:"112"},{country:"Belgium",alpha2:"BE",alpha3:"BEL",numeric:"056"},{country:"Belize",alpha2:"BZ",alpha3:"BLZ",numeric:"084"},{country:"Benin",alpha2:"BJ",alpha3:"BEN",numeric:"204"},{country:"Bermuda",alpha2:"BM",alpha3:"BMU",numeric:"060"},{country:"Bhutan",alpha2:"BT",alpha3:"BTN",numeric:"064"},{country:"Bolivia",alpha2:"BO",alpha3:"BOL",numeric:"068"},{country:"Bonaire, Sint Eustatius and Saba",alpha2:"BQ",alpha3:"BES",numeric:"535"},{country:"Bosnia and Herzegovina",alpha2:"BA",alpha3:"BIH",numeric:"070"},{country:"Botswana",alpha2:"BW",alpha3:"BWA",numeric:"072"},{country:"Bouvet Island",alpha2:"BV",alpha3:"BVT",numeric:"074"},{country:"Brazil",alpha2:"BR",alpha3:"BRA",numeric:"076"},{country:"British Indian Ocean Territory",alpha2:"IO",alpha3:"IOT",numeric:"086"},{country:"Brunei Darussalam",alpha2:"BN",alpha3:"BRN",numeric:"096"},{country:"Bulgaria",alpha2:"BG",alpha3:"BGR",numeric:"100"},{country:"Burkina Faso",alpha2:"BF",alpha3:"BFA",numeric:"854"},{country:"Burundi",alpha2:"BI",alpha3:"BDI",numeric:"108"},{country:"Cabo Verde",alpha2:"CV",alpha3:"CPV",numeric:"132"},{country:"Cambodia",alpha2:"KH",alpha3:"KHM",numeric:"116"},{country:"Cameroon",alpha2:"CM",alpha3:"CMR",numeric:"120"},{country:"Canada",alpha2:"CA",alpha3:"CAN",numeric:"124"},{country:"Cayman Islands",alpha2:"KY",alpha3:"CYM",numeric:"136"},{country:"Central African Republic",alpha2:"CF",alpha3:"CAF",numeric:"140"},{country:"Chad",alpha2:"TD",alpha3:"TCD",numeric:"148"},{country:"Chile",alpha2:"CL",alpha3:"CHL",numeric:"152"},{country:"China",alpha2:"CN",alpha3:"CHN",numeric:"156"},{country:"Christmas Island",alpha2:"CX",alpha3:"CXR",numeric:"162"},{country:"Cocos Islands",alpha2:"CC",alpha3:"CCK",numeric:"166"},{country:"Colombia",alpha2:"CO",alpha3:"COL",numeric:"170"},{country:"Comoros",alpha2:"KM",alpha3:"COM",numeric:"174"},{country:"Congo",alpha2:"CG",alpha3:"COG",numeric:"178"},{country:"Congo",alpha2:"CD",alpha3:"COD",numeric:"180"},{country:"Cook Islands",alpha2:"CK",alpha3:"COK",numeric:"184"},{country:"Costa Rica",alpha2:"CR",alpha3:"CRI",numeric:"188"},{country:"Cte d'Ivoire",alpha2:"CI",alpha3:"CIV",numeric:"384"},{country:"Croatia",alpha2:"HR",alpha3:"HRV",numeric:"191"},{country:"Cuba",alpha2:"CU",alpha3:"CUB",numeric:"192"},{country:"Curaao",alpha2:"CW",alpha3:"CUW",numeric:"531"},{country:"Cyprus",alpha2:"CY",alpha3:"CYP",numeric:"196"},{country:"Czech Republic",alpha2:"CZ",alpha3:"CZE",numeric:"203"},{country:"Denmark",alpha2:"DK",alpha3:"DNK",numeric:"208"},{country:"Djibouti",alpha2:"DJ",alpha3:"DJI",numeric:"262"},{country:"Dominica",alpha2:"DM",alpha3:"DMA",numeric:"212"},{country:"Dominican Republic",alpha2:"DO",alpha3:"DOM",numeric:"214"},{country:"Ecuador",alpha2:"EC",alpha3:"ECU",numeric:"218"},{country:"Egypt",alpha2:"EG",alpha3:"EGY",numeric:"818"},{country:"El Salvador",alpha2:"SV",alpha3:"SLV",numeric:"222"},{country:"Equatorial Guinea",alpha2:"GQ",alpha3:"GNQ",numeric:"226"},{country:"Eritrea",alpha2:"ER",alpha3:"ERI",numeric:"232"},{country:"Estonia",alpha2:"EE",alpha3:"EST",numeric:"233"},{country:"Ethiopia",alpha2:"ET",alpha3:"ETH",numeric:"231"},{country:"Falkland Islands",alpha2:"FK",alpha3:"FLK",numeric:"238"},{country:"Faroe Islands",alpha2:"FO",alpha3:"FRO",numeric:"234"},{country:"Fiji",alpha2:"FJ",alpha3:"FJI",numeric:"242"},{country:"Finland",alpha2:"FI",alpha3:"FIN",numeric:"246"},{country:"France",alpha2:"FR",alpha3:"FRA",numeric:"250"},{country:"French Guiana",alpha2:"GF",alpha3:"GUF",numeric:"254"},{country:"French Polynesia",alpha2:"PF",alpha3:"PYF",numeric:"258"},{country:"French Southern Territories",alpha2:"TF",alpha3:"ATF",numeric:"260"},{country:"Gabon",alpha2:"GA",alpha3:"GAB",numeric:"266"},{country:"Gambia",alpha2:"GM",alpha3:"GMB",numeric:"270"},{country:"Georgia",alpha2:"GE",alpha3:"GEO",numeric:"268"},{country:"Germany",alpha2:"DE",alpha3:"DEU",numeric:"276"},{country:"Ghana",alpha2:"GH",alpha3:"GHA",numeric:"288"},{country:"Gibraltar",alpha2:"GI",alpha3:"GIB",numeric:"292"},{country:"Greece",alpha2:"GR",alpha3:"GRC",numeric:"300"},{country:"Greenland",alpha2:"GL",alpha3:"GRL",numeric:"304"},{country:"Grenada",alpha2:"GD",alpha3:"GRD",numeric:"308"},{country:"Guadeloupe",alpha2:"GP",alpha3:"GLP",numeric:"312"},{country:"Guam",alpha2:"GU",alpha3:"GUM",numeric:"316"},{country:"Guatemala",alpha2:"GT",alpha3:"GTM",numeric:"320"},{country:"Guernsey",alpha2:"GG",alpha3:"GGY",numeric:"831"},{country:"Guinea",alpha2:"GN",alpha3:"GIN",numeric:"324"},{country:"Guinea-Bissau",alpha2:"GW",alpha3:"GNB",numeric:"624"},{country:"Guyana",alpha2:"GY",alpha3:"GUY",numeric:"328"},{country:"Haiti",alpha2:"HT",alpha3:"HTI",numeric:"332"},{country:"Heard Island and McDonald Islands",alpha2:"HM",alpha3:"HMD",numeric:"334"},{country:"Holy See",alpha2:"VA",alpha3:"VAT",numeric:"336"},{country:"Honduras",alpha2:"HN",alpha3:"HND",numeric:"340"},{country:"Hong Kong",alpha2:"HK",alpha3:"HKG",numeric:"344"},{country:"Hungary",alpha2:"HU",alpha3:"HUN",numeric:"348"},{country:"Iceland",alpha2:"IS",alpha3:"ISL",numeric:"352"},{country:"India",alpha2:"IN",alpha3:"IND",numeric:"356"},{country:"Indonesia",alpha2:"ID",alpha3:"IDN",numeric:"360"},{country:"Islamic Republic of Iran",alpha2:"IR",alpha3:"IRN",numeric:"364"},{country:"Iraq",alpha2:"IQ",alpha3:"IRQ",numeric:"368"},{country:"Ireland",alpha2:"IE",alpha3:"IRL",numeric:"372"},{country:"Isle of Man",alpha2:"IM",alpha3:"IMN",numeric:"833"},{country:"Israel",alpha2:"IL",alpha3:"ISR",numeric:"376"},{country:"Italy",alpha2:"IT",alpha3:"ITA",numeric:"380"},{country:"Jamaica",alpha2:"JM",alpha3:"JAM",numeric:"388"},{country:"Japan",alpha2:"JP",alpha3:"JPN",numeric:"392"},{country:"Jersey",alpha2:"JE",alpha3:"JEY",numeric:"832"},{country:"Jordan",alpha2:"JO",alpha3:"JOR",numeric:"400"},{country:"Kazakhstan",alpha2:"KZ",alpha3:"KAZ",numeric:"398"},{country:"Kenya",alpha2:"KE",alpha3:"KEN",numeric:"404"},{country:"Kiribati",alpha2:"KI",alpha3:"KIR",numeric:"296"},{country:"Democratic People's Republic of Korea",alpha2:"KP",alpha3:"PRK",numeric:"408"},{country:"Republic of Korea",alpha2:"KR",alpha3:"KOR",numeric:"410"},{country:"Kuwait",alpha2:"KW",alpha3:"KWT",numeric:"414"},{country:"Kyrgyzstan",alpha2:"KG",alpha3:"KGZ",numeric:"417"},{country:"Lao People's Democratic Republic",alpha2:"LA",alpha3:"LAO",numeric:"418"},{country:"Latvia",alpha2:"LV",alpha3:"LVA",numeric:"428"},{country:"Lebanon",alpha2:"LB",alpha3:"LBN",numeric:"422"},{country:"Lesotho",alpha2:"LS",alpha3:"LSO",numeric:"426"},{country:"Liberia",alpha2:"LR",alpha3:"LBR",numeric:"430"},{country:"Libya",alpha2:"LY",alpha3:"LBY",numeric:"434"},{country:"Liechtenstein",alpha2:"LI",alpha3:"LIE",numeric:"438"},{country:"Lithuania",alpha2:"LT",alpha3:"LTU",numeric:"440"},{country:"Luxembourg",alpha2:"LU",alpha3:"LUX",numeric:"442"},{country:"Macao",alpha2:"MO",alpha3:"MAC",numeric:"446"},{country:"Macedonia",alpha2:"MK",alpha3:"MKD",numeric:"807"},{country:"Madagascar",alpha2:"MG",alpha3:"MDG",numeric:"450"},{country:"Malawi",alpha2:"MW",alpha3:"MWI",numeric:"454"},{country:"Malaysia",alpha2:"MY",alpha3:"MYS",numeric:"458"},{country:"Maldives",alpha2:"MV",alpha3:"MDV",numeric:"462"},{country:"Mali",alpha2:"ML",alpha3:"MLI",numeric:"466"},{country:"Malta",alpha2:"MT",alpha3:"MLT",numeric:"470"},{country:"Marshall Islands",alpha2:"MH",alpha3:"MHL",numeric:"584"},{country:"Martinique",alpha2:"MQ",alpha3:"MTQ",numeric:"474"},{country:"Mauritania",alpha2:"MR",alpha3:"MRT",numeric:"478"},{country:"Mauritius",alpha2:"MU",alpha3:"MUS",numeric:"480"},{country:"Mayotte",alpha2:"YT",alpha3:"MYT",numeric:"175"},{country:"Mexico",alpha2:"MX",alpha3:"MEX",numeric:"484"},{country:"Federated States of Micronesia",alpha2:"FM",alpha3:"FSM",numeric:"583"},{country:"Republic of Moldova",alpha2:"MD",alpha3:"MDA",numeric:"498"},{country:"Monaco",alpha2:"MC",alpha3:"MCO",numeric:"492"},{country:"Mongolia",alpha2:"MN",alpha3:"MNG",numeric:"496"},{country:"Montenegro",alpha2:"ME",alpha3:"MNE",numeric:"499"},{country:"Montserrat",alpha2:"MS",alpha3:"MSR",numeric:"500"},{country:"Morocco",alpha2:"MA",alpha3:"MAR",numeric:"504"},{country:"Mozambique",alpha2:"MZ",alpha3:"MOZ",numeric:"508"},{country:"Myanmar",alpha2:"MM",alpha3:"MMR",numeric:"104"},{country:"Namibia",alpha2:"NA",alpha3:"NAM",numeric:"516"},{country:"Nauru",alpha2:"NR",alpha3:"NRU",numeric:"520"},{country:"Nepal",alpha2:"NP",alpha3:"NPL",numeric:"524"},{country:"Netherlands",alpha2:"NL",alpha3:"NLD",numeric:"528"},{country:"New Caledonia",alpha2:"NC",alpha3:"NCL",numeric:"540"},{country:"New Zealand",alpha2:"NZ",alpha3:"NZL",numeric:"554"},{country:"Nicaragua",alpha2:"NI",alpha3:"NIC",numeric:"558"},{country:"Niger",alpha2:"NE",alpha3:"NER",numeric:"562"},{country:"Nigeria",alpha2:"NG",alpha3:"NGA",numeric:"566"},{country:"Niue",alpha2:"NU",alpha3:"NIU",numeric:"570"},{country:"Norfolk Island",alpha2:"NF",alpha3:"NFK",numeric:"574"},{country:"Northern Mariana Islands",alpha2:"MP",alpha3:"MNP",numeric:"580"},{country:"Norway",alpha2:"NO",alpha3:"NOR",numeric:"578"},{country:"Oman",alpha2:"OM",alpha3:"OMN",numeric:"512"},{country:"Pakistan",alpha2:"PK",alpha3:"PAK",numeric:"586"},{country:"Palau",alpha2:"PW",alpha3:"PLW",numeric:"585"},{country:"State of Palestine",alpha2:"PS",alpha3:"PSE",numeric:"275"},{country:"Panama",alpha2:"PA",alpha3:"PAN",numeric:"591"},{country:"Papua New Guinea",alpha2:"PG",alpha3:"PNG",numeric:"598"},{country:"Paraguay",alpha2:"PY",alpha3:"PRY",numeric:"600"},{country:"Peru",alpha2:"PE",alpha3:"PER",numeric:"604"},{country:"Philippines",alpha2:"PH",alpha3:"PHL",numeric:"608"},{country:"Pitcairn",alpha2:"PN",alpha3:"PCN",numeric:"612"},{country:"Poland",alpha2:"PL",alpha3:"POL",numeric:"616"},{country:"Portugal",alpha2:"PT",alpha3:"PRT",numeric:"620"},{country:"Puerto Rico",alpha2:"PR",alpha3:"PRI",numeric:"630"},{country:"Qatar",alpha2:"QA",alpha3:"QAT",numeric:"634"},{country:"Runion",alpha2:"RE",alpha3:"REU",numeric:"638"},{country:"Romania",alpha2:"RO",alpha3:"ROU",numeric:"642"},{country:"Russian Federation",alpha2:"RU",alpha3:"RUS",numeric:"643"},{country:"Rwanda",alpha2:"RW",alpha3:"RWA",numeric:"646"},{country:"Saint Barthlemy",alpha2:"BL",alpha3:"BLM",numeric:"652"},{country:"Saint Helena, Ascension and Tristan da Cunha",alpha2:"SH",alpha3:"SHN",numeric:"654"},{country:"Saint Kitts and Nevis",alpha2:"KN",alpha3:"KNA",numeric:"659"},{country:"Saint Lucia",alpha2:"LC",alpha3:"LCA",numeric:"662"},{country:"Saint Martin",alpha2:"MF",alpha3:"MAF",numeric:"663"},{country:"Saint Pierre and Miquelon",alpha2:"PM",alpha3:"SPM",numeric:"666"},{country:"Saint Vincent and the Grenadines",alpha2:"VC",alpha3:"VCT",numeric:"670"},{country:"Samoa",alpha2:"WS",alpha3:"WSM",numeric:"882"},{country:"San Marino",alpha2:"SM",alpha3:"SMR",numeric:"674"},{country:"Sao Tome and Principe",alpha2:"ST",alpha3:"STP",numeric:"678"},{country:"Saudi Arabia",alpha2:"SA",alpha3:"SAU",numeric:"682"},{country:"Senegal",alpha2:"SN",alpha3:"SEN",numeric:"686"},{country:"Serbia",alpha2:"RS",alpha3:"SRB",numeric:"688"},{country:"Seychelles",alpha2:"SC",alpha3:"SYC",numeric:"690"},{country:"Sierra Leone",alpha2:"SL",alpha3:"SLE",numeric:"694"},{country:"Singapore",alpha2:"SG",alpha3:"SGP",numeric:"702"},{country:"Sint Maarten",alpha2:"SX",alpha3:"SXM",numeric:"534"},{country:"Slovakia",alpha2:"SK",alpha3:"SVK",numeric:"703"},{country:"Slovenia",alpha2:"SI",alpha3:"SVN",numeric:"705"},{country:"Solomon Islands",alpha2:"SB",alpha3:"SLB",numeric:"090"},{country:"Somalia",alpha2:"SO",alpha3:"SOM",numeric:"706"},{country:"South Africa",alpha2:"ZA",alpha3:"ZAF",numeric:"710"},{country:"South Georgia and the South Sandwich Islands",alpha2:"GS",alpha3:"SGS",numeric:"239"},{country:"South Sudan",alpha2:"SS",alpha3:"SSD",numeric:"728"},{country:"Spain",alpha2:"ES",alpha3:"ESP",numeric:"724"},{country:"Sri Lanka",alpha2:"LK",alpha3:"LKA",numeric:"144"},{country:"Sudan",alpha2:"SD",alpha3:"SDN",numeric:"729"},{country:"Suriname",alpha2:"SR",alpha3:"SUR",numeric:"740"},{country:"Svalbard and Jan Mayen",alpha2:"SJ",alpha3:"SJM",numeric:"744"},{country:"Swaziland",alpha2:"SZ",alpha3:"SWZ",numeric:"748"},{country:"Sweden",alpha2:"SE",alpha3:"SWE",numeric:"752"},{country:"Switzerland",alpha2:"CH",alpha3:"CHE",numeric:"756"},{country:"Syrian Arab Republic",alpha2:"SY",alpha3:"SYR",numeric:"760"},{country:"Taiwan, Province of China",alpha2:"TW",alpha3:"TWN",numeric:"158"},{country:"Tajikistan",alpha2:"TJ",alpha3:"TJK",numeric:"762"},{country:"United Republic of Tanzania",alpha2:"TZ",alpha3:"TZA",numeric:"834"},{country:"Thailand",alpha2:"TH",alpha3:"THA",numeric:"764"},{country:"Timor-Leste",alpha2:"TL",alpha3:"TLS",numeric:"626"},{country:"Togo",alpha2:"TG",alpha3:"TGO",numeric:"768"},{country:"Tokelau",alpha2:"TK",alpha3:"TKL",numeric:"772"},{country:"Tonga",alpha2:"TO",alpha3:"TON",numeric:"776"},{country:"Trinidad and Tobago",alpha2:"TT",alpha3:"TTO",numeric:"780"},{country:"Tunisia",alpha2:"TN",alpha3:"TUN",numeric:"788"},{country:"Turkey",alpha2:"TR",alpha3:"TUR",numeric:"792"},{country:"Turkmenistan",alpha2:"TM",alpha3:"TKM",numeric:"795"},{country:"Turks and Caicos Islands",alpha2:"TC",alpha3:"TCA",numeric:"796"},{country:"Tuvalu",alpha2:"TV",alpha3:"TUV",numeric:"798"},{country:"Uganda",alpha2:"UG",alpha3:"UGA",numeric:"800"},{country:"Ukraine",alpha2:"UA",alpha3:"UKR",numeric:"804"},{country:"United Arab Emirates",alpha2:"AE",alpha3:"ARE",numeric:"784"},{country:"United Kingdom of Great Britain and Northern Ireland",alpha2:"GB",alpha3:"GBR",numeric:"826"},{country:"United States of America",alpha2:"US",alpha3:"USA",numeric:"840"},{country:"United States Minor Outlying Islands",alpha2:"UM",alpha3:"UMI",numeric:"581"},{country:"Uruguay",alpha2:"UY",alpha3:"URY",numeric:"858"},{country:"Uzbekistan",alpha2:"UZ",alpha3:"UZB",numeric:"860"},{country:"Vanuatu",alpha2:"VU",alpha3:"VUT",numeric:"548"},{country:"Venezuela (Bolivarian Republic of)",alpha2:"VE",alpha3:"VEN",numeric:"862"},{country:"Viet Nam",alpha2:"VN",alpha3:"VNM",numeric:"704"},{country:"Virgin Islands",alpha2:"VG",alpha3:"VGB",numeric:"092"},{country:"Virgin Islands of the United States",alpha2:"VI",alpha3:"VIR",numeric:"850"},{country:"Wallis and Futuna",alpha2:"WF",alpha3:"WLF",numeric:"876"},{country:"Western Sahara",alpha2:"EH",alpha3:"ESH",numeric:"732"},{country:"Yemen",alpha2:"YE",alpha3:"YEM",numeric:"887"},{country:"Zambia",alpha2:"ZM",alpha3:"ZMB",numeric:"894"},{country:"Zimbabwe",alpha2:"ZW",alpha3:"ZWE",numeric:"716"}];Tk.default=Vhe;(function(n){var e=zg&&zg.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(n,"__esModule",{value:!0}),n.all=n.whereNumeric=n.whereAlpha3=n.whereAlpha2=n.whereCountry=void 0;const t=e(Tk);n.whereCountry=i=>t.default.find(r=>r.country.toUpperCase()===i.toUpperCase()),n.whereAlpha2=i=>t.default.find(r=>r.alpha2===i.toUpperCase()),n.whereAlpha3=i=>t.default.find(r=>r.alpha3===i.toUpperCase()),n.whereNumeric=i=>t.default.find(r=>r.numeric===String(i)),n.all=()=>t.default,n.default={all:n.all,whereCountry:n.whereCountry,whereAlpha2:n.whereAlpha2,whereAlpha3:n.whereAlpha3,whereNumeric:n.whereNumeric}})(TP);var PU;let IU,OU,kU,DU,NU,LU,HU;function Whe(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],b=e.length;function y(_,T,I){return function(x,P){T&&(P=x,x=n);for(var D=0;D<_.length;D++)P=_[D].apply(x,I?[P]:[]);return I?P:x}}function w(_,T,I,x){if(typeof _!="function"&&(x||_!==void 0))throw new TypeError(T+" must "+(I||"be")+" a function"+(x?"":" or undefined"));return _}function R(_,T,I,x,P,D,B,V,z,L,k){function F(oe){if(!k(oe))throw new TypeError("Attempted to access private element on non-instance")}var G=[].concat(T[0]),U=T[3],se=!B,v=P===1,C=P===3,S=P===4,A=P===2;function H(oe,ae,Fe){return function(ve,Se){return ae&&(Se=ve,ve=_),Fe&&Fe(ve),M[oe].call(ve,Se)}}if(!se){var M={},$=[],q=C?"get":S||v?"set":"value";if(z?(L||v?M={get:gB(function(){return U(this)},x,"get"),set:function(oe){T[4](this,oe)}}:M[q]=U,L||gB(M[q],x,A?"":q)):L||(M=Object.getOwnPropertyDescriptor(_,x)),!L&&!z){if((a=m[+V][x])&&(a^P)!=7)throw Error("Decorating two elements with the same name ("+M[q].name+") is not supported yet");m[+V][x]=P<3?1:P}}for(var Q=_,ce=G.length-1;ce>=0;ce-=I?2:1){var le=w(G[ce],"A decorator","be",!0),Me=I?G[ce-1]:void 0,Ce={},J={kind:["field","accessor","method","getter","setter","class"][P],name:x,metadata:o,addInitializer:(function(oe,ae){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ae,"An initializer","be",!0),D.push(ae)}).bind(null,Ce)};if(se)a=le.call(Me,Q,J),Ce.v=1,w(a,"class decorators","return")&&(Q=a);else if(J.static=V,J.private=z,a=J.access={has:z?k.bind():function(oe){return x in oe}},S||(a.get=z?A?function(oe){return F(oe),M.value}:H("get",0,F):function(oe){return oe[x]}),A||C||(a.set=z?H("set",0,F):function(oe,ae){oe[x]=ae}),Q=le.call(Me,v?{get:M.get,set:M.set}:M[q],J),Ce.v=1,v){if(typeof Q=="object"&&Q)(a=w(Q.get,"accessor.get"))&&(M.get=a),(a=w(Q.set,"accessor.set"))&&(M.set=a),(a=w(Q.init,"accessor.init"))&&$.unshift(a);else if(Q!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(Q,(L?"field":"method")+" decorators","return")&&(L?$.unshift(Q):M[q]=Q)}return P<2&&B.push(y($,V,1),y(D,V,0)),L||se||(z?v?B.splice(-1,0,H("get",V),H("set",V)):B.push(A?M[q]:w.call.bind(M[q])):g(_,x,M)),Q}function E(_){return g(_,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(_){_&&u.push(y(_))},d=function(_,T){for(var I=0;I<t.length;I++){var x=t[I],P=x[1],D=7&P;if((8&P)==_&&!D==T){var B=x[2],V=!!x[3],z=16&P;R(_?n:n.prototype,x,z,V?"#"+B:jhe(B),D,D<2?[]:_?c=c||[]:l=l||[],u,!!_,V,T,_&&V?function(L){return Uhe(L)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,b||E(n),{e:a,get c(){var _=[];return b&&[E(n=R(n,[e],i,n.name,5,_)),y(_,1)]}}}function jhe(n){var e=zhe(n,"string");return typeof e=="symbol"?e:e+""}function zhe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gB(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function Uhe(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}const Ghe=n=>n.startsWith("#")?n.slice(1):n;let $U;class Yhe{constructor(){this.datasrc=OU(this,"g/National_Initiatives_Figure_Data.csv"),this.countriessrc=(kU(this),DU(this,"g/countries-50m.json")),this.geochart=void NU(this),this.continent="",this.countryDataDesc={},this.projecturls=[],this.projections=["azimuthalEqualArea","azimuthalEquidistant","gnomonic","orthographic","stereographic","equalEarth","albers","albersUsa","conicConformal","conicEqualArea","conicEquidistant","equirectangular","mercator","transverseMercator","naturalEarth1"],this.countryName=LU(this,""),this.isAnimating=(HU(this),!1)}parseCSV(e){const t=[];let i=!1;for(let r=0,s=0,o=0;o<e.length;o++){let a=e[o],l=e[o+1];if(t[r]=t[r]||[],t[r][s]=t[r][s]||"",a=='"'&&i&&l=='"'){t[r][s]+=a,++o;continue}if(a=='"'){i=!i;continue}if(a==","&&!i){++s;continue}if(a=="\r"&&l==`
`&&!i){++r,s=0,++o;continue}if(a==`
`&&!i){++r,s=0;continue}if(a=="\r"&&!i){++r,s=0;continue}t[r][s]+=a}return t}showSelected(e){this.countryDataDesc?(this.selected=this.countryDataDesc[e],this.selected?(this.countryName=this.selected[0],this.projectName=this.selected[3],this.projectPublication=this.selected[2],this.projectStatus=this.selected[8],this.projectStatusText=this.selected[7],this.selected[4]?this.projecturls=this.selected[4].split(" / "):this.projecturls=[]):console.warn("showselected this.selected is null")):console.warn("showselected countryDataDesc is null")}bound(){if(this.paramshash=window.location.hash,this.params=this.paramshash.split("&"),console.log("bound() params",this.params),this.params.length>0){const e=this.params.length;if(e>0){const t=Ghe(this.params[0]);t&&(this.datasrc=t)}e>1&&(this.continent=this.params[1]),console.log("hash contains url:"+this.datasrc)}}attached(){console.log("attached"),Rs.register(zp,Ec,bf,Uu,...T4),Promise.all([fetch(this.countriessrc).then(e=>e.json()),fetch(this.datasrc).then(e=>e.text())]).then(([e,t])=>{let i=this;this.countries=Dhe(e,e.objects.countries).features;const r=this.parseCSV(t);let s={};this.countryDataDesc={};for(let o of r)try{let a=TP.whereAlpha2(o[1]);a&&(s[a.numeric]=o[8],this.countryDataDesc[a.numeric]=o)}catch(a){console.warn(a)}this.myData=[];for(let o of this.countries){let a=0,l=s[o.id];l?a=parseFloat(l):console.warn("no data for country with id"+o.id+" name:"+o.properties.name),this.myData.push({feature:o,value:a})}if(this.worlddata=this.myData,this.worldcountries=this.countries,console.log("geoOrthographic function:",xP),this.chart=new Rs(this.geochart.getContext("2d"),{type:"choropleth",data:{labels:this.countries.map(o=>o.id+":"+o.properties.name),datasets:[{label:"Countries",data:this.myData,outline:this.countries}]},options:{showOutline:!1,showGraticule:!0,plugins:{legend:{display:!1}},scales:{projection:{axis:"x",projection:"equalEarth"},color:{axis:"x",interpolate:"oranges",legend:{position:"bottom-right",align:"right"}}},onClick:(o,a)=>{let l=a.map(c=>c.element.feature.id);i.showSelected(l[0])}}}),this.continent)switch(console.log("switching to continent",this.continent),this.continent){case"europe":this.switchToEurope();break;case"asia":this.switchToAsia();break;case"namerica":this.switchToNAmerica();break;case"africa":this.switchToAfrica();break;case"samerica":this.switchToSAmerica();break;case"australia":this.switchToAustralia();break;default:console.warn("Unknown continent:",this.continent),this.switchToWorld();break}})}detached(){}switchToEurope(){this.currentProjection=="orthographic"&&this.chart.scales.projection.projection.rotate([0,0,0]);let e=4;this.chart.options.scales.projection.projectionScale=e;let t=e*(3/8*this.chart.chartArea.height);this.chart.options.scales.projection.projectionOffset=[0,t],this.chart.update()}switchToWorld(){this.currentProjection=="orthographic"&&this.chart.scales.projection.projection.rotate([0,0,0]),this.chart.options.scales.projection.projectionScale=1,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.update()}switchToAsia(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([-80,0,0])}else{let e=2.3,t=-e*(2/8*this.chart.chartArea.width),i=e*(3/16*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}switchToNAmerica(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([90,0,0])}else{let e=2.5,t=e*(2/8*this.chart.chartArea.width),i=e*(2/8*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}switchToSAmerica(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([60,0,0])}else{let e=2,t=e*(1/8*this.chart.chartArea.width),i=-e*(5/32*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}switchToAfrica(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([0,0,0])}else this.chart.options.scales.projection.projectionScale=1.8,this.chart.options.scales.projection.projectionOffset=[0,0];this.chart.update()}switchToPacific(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([-160,0,0])}else{let e=2,t=-e*(5/16*this.chart.chartArea.width),i=-e*(1/8*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}zoomChart(e,t,i){console.log("zoomChart:",e),e.options.scales.xy.projection.center=t,e.options.scales.xy.projection.scale=i,e.update()}switchToEurope2(){this.eucountryids=this.europeanCountryCodes.map(e=>{console.log("mapping "+e+" to numeric");let t=TP.whereAlpha2(e);return console.log("numeric",t),t?t.numeric:null}),this.eudata=this.worlddata.filter(e=>this.eucountryids.includes(e.feature.id)),this.eucountries=this.worldcountries.filter(e=>this.eucountryids.includes(e.id)),console.log("switching to EU view",this.eudata,this.eucountries),console.log("debug world data",this.worlddata,this.worldcountries),this.chart.data.labels=this.eucountries.map(e=>e.properties.name),this.chart.data.datasets[0].data=this.eudata,this.chart.data.outline=this.eucountries,this.chart.update()}switchToworld2(){this.chart.data.labels=this.worldcountries.map(e=>e.properties.name),this.chart.data.datasets[0].data=this.worlddata,this.chart.data.outline=this.worldcountries,this.chart.update()}switchProjection(e){console.log("switching projection:",e),this.currentProjection=e,e=="orthographic"?this.chart.options.scales.projection.projection=xP().rotate([0,0,0]):this.chart.options.scales.projection.projection=e,this.chart.update()}resetView(){this.switchProjection("equalEarth"),this.switchToWorld()}animate(){}toggleAnimation(){this.currentProjection=="orthographic"&&(this.isAnimating?(cancelAnimationFrame(this.animationFrameId),this.isAnimating=!1,console.log("Animation stopped.")):(this.isAnimating=!0,console.log("Animation started."),this.performAnimationFrame()))}performAnimationFrame(){this.isAnimating&&(this.animate(),this.animationFrameId=requestAnimationFrame(this.performAnimationFrame.bind(this)))}animate(){let e=performance.now()/1e3;this.chart.scales.projection.projection.rotate([e,0,0]),this.chart.update()}}PU=Yhe;({e:[OU,kU,DU,NU,LU,HU],c:[$U,IU]}=Whe(PU,[mf({...qle,name:"sv-chartjs-geo"})],[[Fa,0,"datasrc"],[Fa,0,"countriessrc"],[cte,0,"countryName"]]));IU();const FU="chartjs-scatter",MP=`<div>
    chart-scatter view - should not be used
    <canvas ref="mychart"></canvas>
</div>
`,BU=[],VU={};let Tx;function Khe(n){Tx||(Tx=Ar.define({name:FU,template:MP,dependencies:BU,bindables:VU})),n.register(Tx)}const qhe=Object.freeze(Object.defineProperty({__proto__:null,bindables:VU,default:MP,dependencies:BU,name:FU,register:Khe,template:MP},Symbol.toStringTag,{value:"Module"}));var WU;let jU;function Xhe(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],b=e.length;function y(_,T,I){return function(x,P){T&&(P=x,x=n);for(var D=0;D<_.length;D++)P=_[D].apply(x,I?[P]:[]);return I?P:x}}function w(_,T,I,x){if(typeof _!="function"&&(x||_!==void 0))throw new TypeError(T+" must "+(I||"be")+" a function"+(x?"":" or undefined"));return _}function R(_,T,I,x,P,D,B,V,z,L,k){function F(oe){if(!k(oe))throw new TypeError("Attempted to access private element on non-instance")}var G=[].concat(T[0]),U=T[3],se=!B,v=P===1,C=P===3,S=P===4,A=P===2;function H(oe,ae,Fe){return function(ve,Se){return ae&&(Se=ve,ve=_),Fe&&Fe(ve),M[oe].call(ve,Se)}}if(!se){var M={},$=[],q=C?"get":S||v?"set":"value";if(z?(L||v?M={get:pB(function(){return U(this)},x,"get"),set:function(oe){T[4](this,oe)}}:M[q]=U,L||pB(M[q],x,A?"":q)):L||(M=Object.getOwnPropertyDescriptor(_,x)),!L&&!z){if((a=m[+V][x])&&(a^P)!=7)throw Error("Decorating two elements with the same name ("+M[q].name+") is not supported yet");m[+V][x]=P<3?1:P}}for(var Q=_,ce=G.length-1;ce>=0;ce-=I?2:1){var le=w(G[ce],"A decorator","be",!0),Me=I?G[ce-1]:void 0,Ce={},J={kind:["field","accessor","method","getter","setter","class"][P],name:x,metadata:o,addInitializer:(function(oe,ae){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ae,"An initializer","be",!0),D.push(ae)}).bind(null,Ce)};if(se)a=le.call(Me,Q,J),Ce.v=1,w(a,"class decorators","return")&&(Q=a);else if(J.static=V,J.private=z,a=J.access={has:z?k.bind():function(oe){return x in oe}},S||(a.get=z?A?function(oe){return F(oe),M.value}:H("get",0,F):function(oe){return oe[x]}),A||C||(a.set=z?H("set",0,F):function(oe,ae){oe[x]=ae}),Q=le.call(Me,v?{get:M.get,set:M.set}:M[q],J),Ce.v=1,v){if(typeof Q=="object"&&Q)(a=w(Q.get,"accessor.get"))&&(M.get=a),(a=w(Q.set,"accessor.set"))&&(M.set=a),(a=w(Q.init,"accessor.init"))&&$.unshift(a);else if(Q!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(Q,(L?"field":"method")+" decorators","return")&&(L?$.unshift(Q):M[q]=Q)}return P<2&&B.push(y($,V,1),y(D,V,0)),L||se||(z?v?B.splice(-1,0,H("get",V),H("set",V)):B.push(A?M[q]:w.call.bind(M[q])):g(_,x,M)),Q}function E(_){return g(_,f,{configurable:!0,enumerable:!0,value:o})}return s!==void 0&&(o=s[f]),o=p(o??null),u=[],h=function(_){_&&u.push(y(_))},d=function(_,T){for(var I=0;I<t.length;I++){var x=t[I],P=x[1],D=7&P;if((8&P)==_&&!D==T){var B=x[2],V=!!x[3],z=16&P;R(_?n:n.prototype,x,z,V?"#"+B:Zhe(B),D,D<2?[]:_?c=c||[]:l=l||[],u,!!_,V,T,_&&V?function(L){return Jhe(L)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,b||E(n),{e:a,get c(){var _=[];return b&&[E(n=R(n,[e],i,n.name,5,_)),y(_,1)]}}}function Zhe(n){var e=Qhe(n,"string");return typeof e=="symbol"?e:e+""}function Qhe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pB(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function Jhe(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let zU;class ede extends u1{constructor(...e){super(...e),this.mychart=void 0}bind(){}attached(){const e={datasets:[{label:"First Dataset",data:[{x:20,y:30,r:15},{x:40,y:10,r:10},{x:30,y:12,r:5}]},{label:"Second Dataset",data:[{x:19,y:32,r:2},{x:41,y:12,r:5},{x:35,y:11,r:6}]}]};this.chartjs=M4(this.mychart,"bubble",e)}}WU=ede;[zU,jU]=Xhe(WU,[mf({...qhe,name:"sv-chartjs-scatter"})],[],0,void 0,u1).c;jU();const UU="table",AP=`<button class="w3-button w3-grey" click.trigger="submit()" show.bind="showtable">submit</button>
<button class="w3-button w3-grey" click.trigger="addRow()" show.bind="showtable">+ Subject (row)</button>
<button class="w3-button w3-grey" click.trigger="addColumn()" show.bind="showtable">+ Object (column)</button>
<button class="w3-button w3-grey" click.trigger="showHide()">show/hide</button>
<div ref="mytable" show.bind="showtable"></div>`,GU=[],YU={};let Mx;function tde(n){Mx||(Mx=Ar.define({name:UU,template:AP,dependencies:GU,bindables:YU})),n.register(Mx)}const nde=Object.freeze(Object.defineProperty({__proto__:null,bindables:YU,default:AP,dependencies:GU,name:UU,register:tde,template:AP},Symbol.toStringTag,{value:"Module"}));var Cm=function(n){return n&&n.Math===Math&&n},Ui=Cm(typeof globalThis=="object"&&globalThis)||Cm(typeof window=="object"&&window)||Cm(typeof self=="object"&&self)||Cm(typeof zg=="object"&&zg)||Cm(typeof zg=="object"&&zg)||function(){return this}()||Function("return this")(),Mk={},es=function(n){try{return!!n()}catch{return!0}},ide=es,oa=!ide(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),rde=es,m1=!rde(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),sde=m1,a0=Function.prototype.call,aa=sde?a0.bind(a0):function(){return a0.apply(a0,arguments)},KU={},qU={}.propertyIsEnumerable,XU=Object.getOwnPropertyDescriptor,ode=XU&&!qU.call({1:2},1);KU.f=ode?function(e){var t=XU(this,e);return!!t&&t.enumerable}:qU;var v1=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}},ZU=m1,QU=Function.prototype,PP=QU.call,ade=ZU&&QU.bind.bind(PP,PP),vi=ZU?ade:function(n){return function(){return PP.apply(n,arguments)}},JU=vi,lde=JU({}.toString),cde=JU("".slice),wf=function(n){return cde(lde(n),8,-1)},ude=vi,hde=es,dde=wf,Ax=Object,fde=ude("".split),gde=hde(function(){return!Ax("z").propertyIsEnumerable(0)})?function(n){return dde(n)==="String"?fde(n,""):Ax(n)}:Ax,b1=function(n){return n==null},pde=b1,mde=TypeError,qw=function(n){if(pde(n))throw new mde("Can't call method on "+n);return n},vde=gde,bde=qw,w1=function(n){return vde(bde(n))},Px=typeof document=="object"&&document.all,Gi=typeof Px>"u"&&Px!==void 0?function(n){return typeof n=="function"||n===Px}:function(n){return typeof n=="function"},wde=Gi,ml=function(n){return typeof n=="object"?n!==null:wde(n)},Ix=Ui,yde=Gi,Cde=function(n){return yde(n)?n:void 0},Gp=function(n,e){return arguments.length<2?Cde(Ix[n]):Ix[n]&&Ix[n][e]},Sde=vi,y1=Sde({}.isPrototypeOf),_de=Ui,mB=_de.navigator,vB=mB&&mB.userAgent,C1=vB?String(vB):"",e7=Ui,Ox=C1,bB=e7.process,wB=e7.Deno,yB=bB&&bB.versions||wB&&wB.version,CB=yB&&yB.v8,zo,k_;CB&&(zo=CB.split("."),k_=zo[0]>0&&zo[0]<4?1:+(zo[0]+zo[1]));!k_&&Ox&&(zo=Ox.match(/Edge\/(\d+)/),(!zo||zo[1]>=74)&&(zo=Ox.match(/Chrome\/(\d+)/),zo&&(k_=+zo[1])));var Rde=k_,SB=Rde,Ede=es,xde=Ui,Tde=xde.String,Ak=!!Object.getOwnPropertySymbols&&!Ede(function(){var n=Symbol("symbol detection");return!Tde(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&SB&&SB<41}),Mde=Ak,t7=Mde&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Ade=Gp,Pde=Gi,Ide=y1,Ode=t7,kde=Object,Pk=Ode?function(n){return typeof n=="symbol"}:function(n){var e=Ade("Symbol");return Pde(e)&&Ide(e.prototype,kde(n))},Dde=String,S1=function(n){try{return Dde(n)}catch{return"Object"}},Nde=Gi,Lde=S1,Hde=TypeError,Xw=function(n){if(Nde(n))return n;throw new Hde(Lde(n)+" is not a function")},$de=Xw,Fde=b1,_1=function(n,e){var t=n[e];return Fde(t)?void 0:$de(t)},kx=aa,Dx=Gi,Nx=ml,Bde=TypeError,Vde=function(n,e){var t,i;if(e==="string"&&Dx(t=n.toString)&&!Nx(i=kx(t,n))||Dx(t=n.valueOf)&&!Nx(i=kx(t,n))||e!=="string"&&Dx(t=n.toString)&&!Nx(i=kx(t,n)))return i;throw new Bde("Can't convert object to primitive value")},n7={exports:{}},_B=Ui,Wde=Object.defineProperty,Ik=function(n,e){try{Wde(_B,n,{value:e,configurable:!0,writable:!0})}catch{_B[n]=e}return e},jde=Ui,zde=Ik,RB="__core-js_shared__",EB=n7.exports=jde[RB]||zde(RB,{});(EB.versions||(EB.versions=[])).push({version:"3.39.0",mode:"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"});var Ok=n7.exports,xB=Ok,i7=function(n,e){return xB[n]||(xB[n]=e||{})},Ude=qw,Gde=Object,Zw=function(n){return Gde(Ude(n))},Yde=vi,Kde=Zw,qde=Yde({}.hasOwnProperty),vl=Object.hasOwn||function(e,t){return qde(Kde(e),t)},Xde=vi,Zde=0,Qde=Math.random(),Jde=Xde(1 .toString),r7=function(n){return"Symbol("+(n===void 0?"":n)+")_"+Jde(++Zde+Qde,36)},efe=Ui,tfe=i7,TB=vl,nfe=r7,ife=Ak,rfe=t7,Ug=efe.Symbol,Lx=tfe("wks"),sfe=rfe?Ug.for||Ug:Ug&&Ug.withoutSetter||nfe,oh=function(n){return TB(Lx,n)||(Lx[n]=ife&&TB(Ug,n)?Ug[n]:sfe("Symbol."+n)),Lx[n]},ofe=aa,MB=ml,AB=Pk,afe=_1,lfe=Vde,cfe=oh,ufe=TypeError,hfe=cfe("toPrimitive"),dfe=function(n,e){if(!MB(n)||AB(n))return n;var t=afe(n,hfe),i;if(t){if(e===void 0&&(e="default"),i=ofe(t,n,e),!MB(i)||AB(i))return i;throw new ufe("Can't convert object to primitive value")}return e===void 0&&(e="number"),lfe(n,e)},ffe=dfe,gfe=Pk,s7=function(n){var e=ffe(n,"string");return gfe(e)?e:e+""},pfe=Ui,PB=ml,IP=pfe.document,mfe=PB(IP)&&PB(IP.createElement),kk=function(n){return mfe?IP.createElement(n):{}},vfe=oa,bfe=es,wfe=kk,o7=!vfe&&!bfe(function(){return Object.defineProperty(wfe("div"),"a",{get:function(){return 7}}).a!==7}),yfe=oa,Cfe=aa,Sfe=KU,_fe=v1,Rfe=w1,Efe=s7,xfe=vl,Tfe=o7,IB=Object.getOwnPropertyDescriptor;Mk.f=yfe?IB:function(e,t){if(e=Rfe(e),t=Efe(t),Tfe)try{return IB(e,t)}catch{}if(xfe(e,t))return _fe(!Cfe(Sfe.f,e,t),e[t])};var ah={},Mfe=oa,Afe=es,a7=Mfe&&Afe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Pfe=ml,Ife=String,Ofe=TypeError,Hc=function(n){if(Pfe(n))return n;throw new Ofe(Ife(n)+" is not an object")},kfe=oa,Dfe=o7,Nfe=a7,l0=Hc,OB=s7,Lfe=TypeError,Hx=Object.defineProperty,Hfe=Object.getOwnPropertyDescriptor,$x="enumerable",Fx="configurable",Bx="writable";ah.f=kfe?Nfe?function(e,t,i){if(l0(e),t=OB(t),l0(i),typeof e=="function"&&t==="prototype"&&"value"in i&&Bx in i&&!i[Bx]){var r=Hfe(e,t);r&&r[Bx]&&(e[t]=i.value,i={configurable:Fx in i?i[Fx]:r[Fx],enumerable:$x in i?i[$x]:r[$x],writable:!1})}return Hx(e,t,i)}:Hx:function(e,t,i){if(l0(e),t=OB(t),l0(i),Dfe)try{return Hx(e,t,i)}catch{}if("get"in i||"set"in i)throw new Lfe("Accessors not supported");return"value"in i&&(e[t]=i.value),e};var $fe=oa,Ffe=ah,Bfe=v1,Qw=$fe?function(n,e,t){return Ffe.f(n,e,Bfe(1,t))}:function(n,e,t){return n[e]=t,n},l7={exports:{}},OP=oa,Vfe=vl,c7=Function.prototype,Wfe=OP&&Object.getOwnPropertyDescriptor,Dk=Vfe(c7,"name"),jfe=Dk&&(function(){}).name==="something",zfe=Dk&&(!OP||OP&&Wfe(c7,"name").configurable),Ufe={EXISTS:Dk,PROPER:jfe,CONFIGURABLE:zfe},Gfe=vi,Yfe=Gi,kP=Ok,Kfe=Gfe(Function.toString);Yfe(kP.inspectSource)||(kP.inspectSource=function(n){return Kfe(n)});var qfe=kP.inspectSource,Xfe=Ui,Zfe=Gi,kB=Xfe.WeakMap,Qfe=Zfe(kB)&&/native code/.test(String(kB)),Jfe=i7,ege=r7,DB=Jfe("keys"),u7=function(n){return DB[n]||(DB[n]=ege(n))},Nk={},tge=Qfe,h7=Ui,nge=ml,ige=Qw,Vx=vl,Wx=Ok,rge=u7,sge=Nk,NB="Object already initialized",DP=h7.TypeError,oge=h7.WeakMap,D_,uw,N_,age=function(n){return N_(n)?uw(n):D_(n,{})},lge=function(n){return function(e){var t;if(!nge(e)||(t=uw(e)).type!==n)throw new DP("Incompatible receiver, "+n+" required");return t}};if(tge||Wx.state){var ha=Wx.state||(Wx.state=new oge);ha.get=ha.get,ha.has=ha.has,ha.set=ha.set,D_=function(n,e){if(ha.has(n))throw new DP(NB);return e.facade=n,ha.set(n,e),e},uw=function(n){return ha.get(n)||{}},N_=function(n){return ha.has(n)}}else{var $f=rge("state");sge[$f]=!0,D_=function(n,e){if(Vx(n,$f))throw new DP(NB);return e.facade=n,ige(n,$f,e),e},uw=function(n){return Vx(n,$f)?n[$f]:{}},N_=function(n){return Vx(n,$f)}}var cge={set:D_,get:uw,has:N_,enforce:age,getterFor:lge},Lk=vi,uge=es,hge=Gi,c0=vl,NP=oa,dge=Ufe.CONFIGURABLE,fge=qfe,d7=cge,gge=d7.enforce,pge=d7.get,LB=String,fS=Object.defineProperty,mge=Lk("".slice),vge=Lk("".replace),bge=Lk([].join),wge=NP&&!uge(function(){return fS(function(){},"length",{value:8}).length!==8}),yge=String(String).split("String"),Cge=l7.exports=function(n,e,t){mge(LB(e),0,7)==="Symbol("&&(e="["+vge(LB(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!c0(n,"name")||dge&&n.name!==e)&&(NP?fS(n,"name",{value:e,configurable:!0}):n.name=e),wge&&t&&c0(t,"arity")&&n.length!==t.arity&&fS(n,"length",{value:t.arity});try{t&&c0(t,"constructor")&&t.constructor?NP&&fS(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch{}var i=gge(n);return c0(i,"source")||(i.source=bge(yge,typeof e=="string"?e:"")),n};Function.prototype.toString=Cge(function(){return hge(this)&&pge(this).source||fge(this)},"toString");var Sge=l7.exports,_ge=Gi,Rge=ah,Ege=Sge,xge=Ik,Tge=function(n,e,t,i){i||(i={});var r=i.enumerable,s=i.name!==void 0?i.name:e;if(_ge(t)&&Ege(t,s,i),i.global)r?n[e]=t:xge(e,t);else{try{i.unsafe?n[e]&&(r=!0):delete n[e]}catch{}r?n[e]=t:Rge.f(n,e,{value:t,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return n},f7={},Mge=Math.ceil,Age=Math.floor,Pge=Math.trunc||function(e){var t=+e;return(t>0?Age:Mge)(t)},Ige=Pge,Jw=function(n){var e=+n;return e!==e||e===0?0:Ige(e)},Oge=Jw,kge=Math.max,Dge=Math.min,Nge=function(n,e){var t=Oge(n);return t<0?kge(t+e,0):Dge(t,e)},Lge=Jw,Hge=Math.min,$ge=function(n){var e=Lge(n);return e>0?Hge(e,9007199254740991):0},Fge=$ge,ey=function(n){return Fge(n.length)},Bge=w1,Vge=Nge,Wge=ey,HB=function(n){return function(e,t,i){var r=Bge(e),s=Wge(r);if(s===0)return!n&&-1;var o=Vge(i,s),a;if(n&&t!==t){for(;s>o;)if(a=r[o++],a!==a)return!0}else for(;s>o;o++)if((n||o in r)&&r[o]===t)return n||o||0;return!n&&-1}},jge={includes:HB(!0),indexOf:HB(!1)},zge=vi,jx=vl,Uge=w1,Gge=jge.indexOf,Yge=Nk,$B=zge([].push),g7=function(n,e){var t=Uge(n),i=0,r=[],s;for(s in t)!jx(Yge,s)&&jx(t,s)&&$B(r,s);for(;e.length>i;)jx(t,s=e[i++])&&(~Gge(r,s)||$B(r,s));return r},Hk=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Kge=g7,qge=Hk,Xge=qge.concat("length","prototype");f7.f=Object.getOwnPropertyNames||function(e){return Kge(e,Xge)};var p7={};p7.f=Object.getOwnPropertySymbols;var Zge=Gp,Qge=vi,Jge=f7,epe=p7,tpe=Hc,npe=Qge([].concat),ipe=Zge("Reflect","ownKeys")||function(e){var t=Jge.f(tpe(e)),i=epe.f;return i?npe(t,i(e)):t},FB=vl,rpe=ipe,spe=Mk,ope=ah,m7=function(n,e,t){for(var i=rpe(e),r=ope.f,s=spe.f,o=0;o<i.length;o++){var a=i[o];!FB(n,a)&&!(t&&FB(t,a))&&r(n,a,s(e,a))}},ape=es,lpe=Gi,cpe=/#|\.prototype\./,ty=function(n,e){var t=hpe[upe(n)];return t===fpe?!0:t===dpe?!1:lpe(e)?ape(e):!!e},upe=ty.normalize=function(n){return String(n).replace(cpe,".").toLowerCase()},hpe=ty.data={},dpe=ty.NATIVE="N",fpe=ty.POLYFILL="P",gpe=ty,u0=Ui,ppe=Mk.f,mpe=Qw,vpe=Tge,bpe=Ik,wpe=m7,ype=gpe,Yi=function(n,e){var t=n.target,i=n.global,r=n.stat,s,o,a,l,c,u;if(i?o=u0:r?o=u0[t]||bpe(t,{}):o=u0[t]&&u0[t].prototype,o)for(a in e){if(c=e[a],n.dontCallGetSet?(u=ppe(o,a),l=u&&u.value):l=o[a],s=ype(i?a:t+(r?".":"#")+a,n.forced),!s&&l!==void 0){if(typeof c==typeof l)continue;wpe(c,l)}(n.sham||l&&l.sham)&&mpe(c,"sham",!0),vpe(o,a,c,n)}},Cpe=m1,v7=Function.prototype,BB=v7.apply,VB=v7.call,R1=typeof Reflect=="object"&&Reflect.apply||(Cpe?VB.bind(BB):function(){return VB.apply(BB,arguments)}),Spe=vi,_pe=Xw,b7=function(n,e,t){try{return Spe(_pe(Object.getOwnPropertyDescriptor(n,e)[t]))}catch{}},Rpe=ml,Epe=function(n){return Rpe(n)||n===null},xpe=Epe,Tpe=String,Mpe=TypeError,Ape=function(n){if(xpe(n))return n;throw new Mpe("Can't set "+Tpe(n)+" as a prototype")},Ppe=b7,Ipe=ml,Ope=qw,kpe=Ape,w7=Object.setPrototypeOf||("__proto__"in{}?function(){var n=!1,e={},t;try{t=Ppe(Object.prototype,"__proto__","set"),t(e,[]),n=e instanceof Array}catch{}return function(r,s){return Ope(r),kpe(s),Ipe(r)&&(n?t(r,s):r.__proto__=s),r}}():void 0),Dpe=ah.f,Npe=function(n,e,t){t in n||Dpe(n,t,{configurable:!0,get:function(){return e[t]},set:function(i){e[t]=i}})},Lpe=Gi,Hpe=ml,WB=w7,$pe=function(n,e,t){var i,r;return WB&&Lpe(i=e.constructor)&&i!==t&&Hpe(r=i.prototype)&&r!==t.prototype&&WB(n,r),n},Fpe=oh,Bpe=Fpe("toStringTag"),y7={};y7[Bpe]="z";var Vpe=String(y7)==="[object z]",Wpe=Vpe,jpe=Gi,gS=wf,zpe=oh,Upe=zpe("toStringTag"),Gpe=Object,Ype=gS(function(){return arguments}())==="Arguments",Kpe=function(n,e){try{return n[e]}catch{}},C7=Wpe?gS:function(n){var e,t,i;return n===void 0?"Undefined":n===null?"Null":typeof(t=Kpe(e=Gpe(n),Upe))=="string"?t:Ype?gS(e):(i=gS(e))==="Object"&&jpe(e.callee)?"Arguments":i},qpe=C7,Xpe=String,E1=function(n){if(qpe(n)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return Xpe(n)},Zpe=E1,Qpe=function(n,e){return n===void 0?arguments.length<2?"":e:Zpe(n)},Jpe=ml,eme=Qw,tme=function(n,e){Jpe(e)&&"cause"in e&&eme(n,"cause",e.cause)},nme=vi,S7=Error,ime=nme("".replace),rme=function(n){return String(new S7(n).stack)}("zxcasd"),_7=/\n\s*at [^:]*:[^\n]*/,sme=_7.test(rme),ome=function(n,e){if(sme&&typeof n=="string"&&!S7.prepareStackTrace)for(;e--;)n=ime(n,_7,"");return n},ame=es,lme=v1,cme=!ame(function(){var n=new Error("a");return"stack"in n?(Object.defineProperty(n,"stack",lme(1,7)),n.stack!==7):!0}),ume=Qw,hme=ome,dme=cme,jB=Error.captureStackTrace,fme=function(n,e,t,i){dme&&(jB?jB(n,e):ume(n,"stack",hme(t,i)))},zB=Gp,gme=vl,UB=Qw,pme=y1,GB=w7,YB=m7,KB=Npe,mme=$pe,vme=Qpe,bme=tme,wme=fme,yme=oa,Cme=function(n,e,t,i){var r="stackTraceLimit",s=i?2:1,o=n.split("."),a=o[o.length-1],l=zB.apply(null,o);if(l){var c=l.prototype;if(gme(c,"cause")&&delete c.cause,!t)return l;var u=zB("Error"),h=e(function(d,f){var g=vme(i?f:d,void 0),p=i?new l(d):new l;return g!==void 0&&UB(p,"message",g),wme(p,h,p.stack,2),this&&pme(c,this)&&mme(p,this,h),arguments.length>s&&bme(p,arguments[s]),p});h.prototype=c,a!=="Error"?GB?GB(h,u):YB(h,u,{name:!0}):yme&&r in l&&(KB(h,l,r),KB(h,l,"prepareStackTrace")),YB(h,l);try{c.name!==a&&UB(c,"name",a),c.constructor=h}catch{}return h}},R7=Yi,Sme=Ui,bl=R1,E7=Cme,LP="WebAssembly",qB=Sme[LP],L_=new Error("e",{cause:7}).cause!==7,yf=function(n,e){var t={};t[n]=E7(n,e,L_),R7({global:!0,constructor:!0,arity:1,forced:L_},t)},$k=function(n,e){if(qB&&qB[n]){var t={};t[n]=E7(LP+"."+n,e,L_),R7({target:LP,stat:!0,constructor:!0,arity:1,forced:L_},t)}};yf("Error",function(n){return function(t){return bl(n,this,arguments)}});yf("EvalError",function(n){return function(t){return bl(n,this,arguments)}});yf("RangeError",function(n){return function(t){return bl(n,this,arguments)}});yf("ReferenceError",function(n){return function(t){return bl(n,this,arguments)}});yf("SyntaxError",function(n){return function(t){return bl(n,this,arguments)}});yf("TypeError",function(n){return function(t){return bl(n,this,arguments)}});yf("URIError",function(n){return function(t){return bl(n,this,arguments)}});$k("CompileError",function(n){return function(t){return bl(n,this,arguments)}});$k("LinkError",function(n){return function(t){return bl(n,this,arguments)}});$k("RuntimeError",function(n){return function(t){return bl(n,this,arguments)}});var _me=wf,x7=Array.isArray||function(e){return _me(e)==="Array"},Rme=oa,Eme=x7,xme=TypeError,Tme=Object.getOwnPropertyDescriptor,Mme=Rme&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(n){return n instanceof TypeError}}(),T7=Mme?function(n,e){if(Eme(n)&&!Tme(n,"length").writable)throw new xme("Cannot set read only .length");return n.length=e}:function(n,e){return n.length=e},Ame=TypeError,Pme=9007199254740991,M7=function(n){if(n>Pme)throw Ame("Maximum allowed index exceeded");return n},Ime=Yi,Ome=Zw,kme=ey,Dme=T7,Nme=M7,Lme=es,Hme=Lme(function(){return[].push.call({length:4294967296},1)!==4294967297}),$me=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(n){return n instanceof TypeError}},Fme=Hme||!$me();Ime({target:"Array",proto:!0,arity:1,forced:Fme},{push:function(e){var t=Ome(this),i=kme(t),r=arguments.length;Nme(i+r);for(var s=0;s<r;s++)t[i]=arguments[s],i++;return Dme(t,i),i}});var zx=vi,h0=Set.prototype,wl={Set,add:zx(h0.add),has:zx(h0.has),remove:zx(h0.delete),proto:h0},Bme=wl.has,Cf=function(n){return Bme(n),n},Vme=aa,Sf=function(n,e,t){for(var i=t?n:n.iterator,r=n.next,s,o;!(s=Vme(r,i)).done;)if(o=e(s.value),o!==void 0)return o},A7=vi,Wme=Sf,P7=wl,jme=P7.Set,I7=P7.proto,zme=A7(I7.forEach),O7=A7(I7.keys),Ume=O7(new jme).next,ny=function(n,e,t){return t?Wme({iterator:O7(n),next:Ume},e):zme(n,e)},k7=wl,Gme=ny,Yme=k7.Set,Kme=k7.add,Fk=function(n){var e=new Yme;return Gme(n,function(t){Kme(e,t)}),e},qme=b7,Xme=wl,iy=qme(Xme.proto,"size","get")||function(n){return n.size},Zme=function(n){return{iterator:n,next:n.next,done:!1}},XB=Xw,D7=Hc,ZB=aa,Qme=Jw,Jme=Zme,QB="Invalid size",eve=RangeError,tve=TypeError,nve=Math.max,N7=function(n,e){this.set=n,this.size=nve(e,0),this.has=XB(n.has),this.keys=XB(n.keys)};N7.prototype={getIterator:function(){return Jme(D7(ZB(this.keys,this.set)))},includes:function(n){return ZB(this.has,this.set,n)}};var _f=function(n){D7(n);var e=+n.size;if(e!==e)throw new tve(QB);var t=Qme(e);if(t<0)throw new eve(QB);return new N7(n,t)},ive=Cf,L7=wl,rve=Fk,sve=iy,ove=_f,ave=ny,lve=Sf,cve=L7.has,JB=L7.remove,uve=function(e){var t=ive(this),i=ove(e),r=rve(t);return sve(t)<=i.size?ave(t,function(s){i.includes(s)&&JB(r,s)}):lve(i.getIterator(),function(s){cve(t,s)&&JB(r,s)}),r},hve=Gp,eV=function(n){return{size:n,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},Rf=function(n){var e=hve("Set");try{new e()[n](eV(0));try{return new e()[n](eV(-1)),!1}catch{return!0}}catch{return!1}},dve=Yi,fve=uve,gve=Rf;dve({target:"Set",proto:!0,real:!0,forced:!gve("difference")},{difference:fve});var pve=Cf,Bk=wl,mve=iy,vve=_f,bve=ny,wve=Sf,yve=Bk.Set,tV=Bk.add,Cve=Bk.has,Sve=function(e){var t=pve(this),i=vve(e),r=new yve;return mve(t)>i.size?wve(i.getIterator(),function(s){Cve(t,s)&&tV(r,s)}):bve(t,function(s){i.includes(s)&&tV(r,s)}),r},_ve=Yi,Rve=es,Eve=Sve,xve=Rf,Tve=!xve("intersection")||Rve(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});_ve({target:"Set",proto:!0,real:!0,forced:Tve},{intersection:Eve});var Mve=aa,nV=Hc,Ave=_1,Vk=function(n,e,t){var i,r;nV(n);try{if(i=Ave(n,"return"),!i){if(e==="throw")throw t;return t}i=Mve(i,n)}catch(s){r=!0,i=s}if(e==="throw")throw t;if(r)throw i;return nV(i),t},Pve=Cf,Ive=wl.has,Ove=iy,kve=_f,Dve=ny,Nve=Sf,Lve=Vk,Hve=function(e){var t=Pve(this),i=kve(e);if(Ove(t)<=i.size)return Dve(t,function(s){if(i.includes(s))return!1},!0)!==!1;var r=i.getIterator();return Nve(r,function(s){if(Ive(t,s))return Lve(r,"normal",!1)})!==!1},$ve=Yi,Fve=Hve,Bve=Rf;$ve({target:"Set",proto:!0,real:!0,forced:!Bve("isDisjointFrom")},{isDisjointFrom:Fve});var Vve=Cf,Wve=iy,jve=ny,zve=_f,Uve=function(e){var t=Vve(this),i=zve(e);return Wve(t)>i.size?!1:jve(t,function(r){if(!i.includes(r))return!1},!0)!==!1},Gve=Yi,Yve=Uve,Kve=Rf;Gve({target:"Set",proto:!0,real:!0,forced:!Kve("isSubsetOf")},{isSubsetOf:Yve});var qve=Cf,Xve=wl.has,Zve=iy,Qve=_f,Jve=Sf,ebe=Vk,tbe=function(e){var t=qve(this),i=Qve(e);if(Zve(t)<i.size)return!1;var r=i.getIterator();return Jve(r,function(s){if(!Xve(t,s))return ebe(r,"normal",!1)})!==!1},nbe=Yi,ibe=tbe,rbe=Rf;nbe({target:"Set",proto:!0,real:!0,forced:!rbe("isSupersetOf")},{isSupersetOf:ibe});var sbe=Cf,Wk=wl,obe=Fk,abe=_f,lbe=Sf,cbe=Wk.add,ube=Wk.has,hbe=Wk.remove,dbe=function(e){var t=sbe(this),i=abe(e).getIterator(),r=obe(t);return lbe(i,function(s){ube(t,s)?hbe(r,s):cbe(r,s)}),r},fbe=Yi,gbe=dbe,pbe=Rf;fbe({target:"Set",proto:!0,real:!0,forced:!pbe("symmetricDifference")},{symmetricDifference:gbe});var mbe=Cf,vbe=wl.add,bbe=Fk,wbe=_f,ybe=Sf,Cbe=function(e){var t=mbe(this),i=wbe(e).getIterator(),r=bbe(t);return ybe(i,function(s){vbe(r,s)}),r},Sbe=Yi,_be=Cbe,Rbe=Rf;Sbe({target:"Set",proto:!0,real:!0,forced:!Rbe("union")},{union:_be});var Ebe=wf,xbe=vi,Tbe=function(n){if(Ebe(n)==="Function")return xbe(n)},iV=Tbe,Mbe=Xw,Abe=m1,Pbe=iV(iV.bind),H7=function(n,e){return Mbe(n),e===void 0?n:Abe?Pbe(n,e):function(){return n.apply(e,arguments)}},Ibe=Gp,$7=Ibe("document","documentElement"),Obe=vi,jk=Obe([].slice),kbe=TypeError,F7=function(n,e){if(n<e)throw new kbe("Not enough arguments");return n},Dbe=C1,Nbe=/(?:ipad|iphone|ipod).*applewebkit/i.test(Dbe),Sm=Ui,Lbe=C1,Hbe=wf,d0=function(n){return Lbe.slice(0,n.length)===n},B7=function(){return d0("Bun/")?"BUN":d0("Cloudflare-Workers")?"CLOUDFLARE":d0("Deno/")?"DENO":d0("Node.js/")?"NODE":Sm.Bun&&typeof Bun.version=="string"?"BUN":Sm.Deno&&typeof Deno.version=="object"?"DENO":Hbe(Sm.process)==="process"?"NODE":Sm.window&&Sm.document?"BROWSER":"REST"}(),$be=B7,Fbe=$be==="NODE",Cs=Ui,Bbe=R1,Vbe=H7,rV=Gi,Wbe=vl,V7=es,sV=$7,jbe=jk,oV=kk,zbe=F7,Ube=Nbe,Gbe=Fbe,HP=Cs.setImmediate,$P=Cs.clearImmediate,Ybe=Cs.process,Ux=Cs.Dispatch,Kbe=Cs.Function,aV=Cs.MessageChannel,qbe=Cs.String,Gx=0,wb={},lV="onreadystatechange",hw,vh,Yx,Kx;V7(function(){hw=Cs.location});var zk=function(n){if(Wbe(wb,n)){var e=wb[n];delete wb[n],e()}},qx=function(n){return function(){zk(n)}},cV=function(n){zk(n.data)},uV=function(n){Cs.postMessage(qbe(n),hw.protocol+"//"+hw.host)};(!HP||!$P)&&(HP=function(e){zbe(arguments.length,1);var t=rV(e)?e:Kbe(e),i=jbe(arguments,1);return wb[++Gx]=function(){Bbe(t,void 0,i)},vh(Gx),Gx},$P=function(e){delete wb[e]},Gbe?vh=function(n){Ybe.nextTick(qx(n))}:Ux&&Ux.now?vh=function(n){Ux.now(qx(n))}:aV&&!Ube?(Yx=new aV,Kx=Yx.port2,Yx.port1.onmessage=cV,vh=Vbe(Kx.postMessage,Kx)):Cs.addEventListener&&rV(Cs.postMessage)&&!Cs.importScripts&&hw&&hw.protocol!=="file:"&&!V7(uV)?(vh=uV,Cs.addEventListener("message",cV,!1)):lV in oV("script")?vh=function(n){sV.appendChild(oV("script"))[lV]=function(){sV.removeChild(this),zk(n)}}:vh=function(n){setTimeout(qx(n),0)});var W7={set:HP,clear:$P},Xbe=Yi,Zbe=Ui,hV=W7.clear;Xbe({global:!0,bind:!0,enumerable:!0,forced:Zbe.clearImmediate!==hV},{clearImmediate:hV});var j7=Ui,Qbe=R1,Jbe=Gi,ewe=B7,twe=C1,nwe=jk,iwe=F7,rwe=j7.Function,swe=/MSIE .\./.test(twe)||ewe==="BUN"&&function(){var n=j7.Bun.version.split(".");return n.length<3||n[0]==="0"&&(n[1]<3||n[1]==="3"&&n[2]==="0")}(),owe=function(n,e){var t=e?2:1;return swe?function(i,r){var s=iwe(arguments.length,1)>t,o=Jbe(i)?i:rwe(i),a=s?nwe(arguments,t):[],l=s?function(){Qbe(o,this,a)}:o;return e?n(l,r):n(l)}:n},awe=Yi,z7=Ui,dV=W7.set,lwe=owe,fV=z7.setImmediate?lwe(dV,!1):dV;awe({global:!0,bind:!0,enumerable:!0,forced:z7.setImmediate!==fV},{setImmediate:fV});/*! @license DOMPurify 2.5.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.7/LICENSE */function mu(n){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mu(n)}function FP(n,e){return FP=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},FP(n,e)}function cwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pS(n,e,t){return cwe()?pS=Reflect.construct:pS=function(r,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(r,a),c=new l;return o&&FP(c,o.prototype),c},pS.apply(null,arguments)}function Do(n){return uwe(n)||hwe(n)||dwe(n)||fwe()}function uwe(n){if(Array.isArray(n))return BP(n)}function hwe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function dwe(n,e){if(n){if(typeof n=="string")return BP(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return BP(n,e)}}function BP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function fwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gwe=Object.hasOwnProperty,gV=Object.setPrototypeOf,pwe=Object.isFrozen,mwe=Object.getPrototypeOf,vwe=Object.getOwnPropertyDescriptor,Dr=Object.freeze,ao=Object.seal,bwe=Object.create,U7=typeof Reflect<"u"&&Reflect,H_=U7.apply,VP=U7.construct;H_||(H_=function(e,t,i){return e.apply(t,i)});Dr||(Dr=function(e){return e});ao||(ao=function(e){return e});VP||(VP=function(e,t){return pS(e,Do(t))});var wwe=lo(Array.prototype.forEach),pV=lo(Array.prototype.pop),_m=lo(Array.prototype.push),mS=lo(String.prototype.toLowerCase),Xx=lo(String.prototype.toString),mV=lo(String.prototype.match),_o=lo(String.prototype.replace),ywe=lo(String.prototype.indexOf),Cwe=lo(String.prototype.trim),Wi=lo(RegExp.prototype.test),Zx=Swe(TypeError);function lo(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return H_(n,e,i)}}function Swe(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return VP(n,t)}}function ft(n,e,t){var i;t=(i=t)!==null&&i!==void 0?i:mS,gV&&gV(n,null);for(var r=e.length;r--;){var s=e[r];if(typeof s=="string"){var o=t(s);o!==s&&(pwe(e)||(e[r]=o),s=o)}n[s]=!0}return n}function bh(n){var e=bwe(null),t;for(t in n)H_(gwe,n,[t])===!0&&(e[t]=n[t]);return e}function f0(n,e){for(;n!==null;){var t=vwe(n,e);if(t){if(t.get)return lo(t.get);if(typeof t.value=="function")return lo(t.value)}n=mwe(n)}function i(r){return console.warn("fallback value for",r),null}return i}var vV=Dr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Qx=Dr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Jx=Dr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_we=Dr(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),eT=Dr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Rwe=Dr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),bV=Dr(["#text"]),wV=Dr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),tT=Dr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),yV=Dr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),g0=Dr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ewe=ao(/\{\{[\w\W]*|[\w\W]*\}\}/gm),xwe=ao(/<%[\w\W]*|[\w\W]*%>/gm),Twe=ao(/\${[\w\W]*}/gm),Mwe=ao(/^data-[\-\w.\u00B7-\uFFFF]/),Awe=ao(/^aria-[\-\w]+$/),Pwe=ao(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Iwe=ao(/^(?:\w+script|data):/i),Owe=ao(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),kwe=ao(/^html$/i),Dwe=ao(/^[a-z][.\w]*(-[.\w]+)+$/i),Nwe=function(){return typeof window>"u"?null:window},Lwe=function(e,t){if(mu(e)!=="object"||typeof e.createPolicy!="function")return null;var i=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(i=t.currentScript.getAttribute(r));var s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML:function(a){return a},createScriptURL:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function G7(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nwe(),e=function(X){return G7(X)};if(e.version="2.5.7",e.removed=[],!n||!n.document||n.document.nodeType!==9)return e.isSupported=!1,e;var t=n.document,i=n.document,r=n.DocumentFragment,s=n.HTMLTemplateElement,o=n.Node,a=n.Element,l=n.NodeFilter,c=n.NamedNodeMap,u=c===void 0?n.NamedNodeMap||n.MozNamedAttrMap:c,h=n.HTMLFormElement,d=n.DOMParser,f=n.trustedTypes,g=a.prototype,p=f0(g,"cloneNode"),m=f0(g,"nextSibling"),b=f0(g,"childNodes"),y=f0(g,"parentNode");if(typeof s=="function"){var w=i.createElement("template");w.content&&w.content.ownerDocument&&(i=w.content.ownerDocument)}var R=Lwe(f,t),E=R?R.createHTML(""):"",_=i,T=_.implementation,I=_.createNodeIterator,x=_.createDocumentFragment,P=_.getElementsByTagName,D=t.importNode,B={};try{B=bh(i).documentMode?i.documentMode:{}}catch{}var V={};e.isSupported=typeof y=="function"&&T&&T.createHTMLDocument!==void 0&&B!==9;var z=Ewe,L=xwe,k=Twe,F=Mwe,G=Awe,U=Iwe,se=Owe,v=Dwe,C=Pwe,S=null,A=ft({},[].concat(Do(vV),Do(Qx),Do(Jx),Do(eT),Do(bV))),H=null,M=ft({},[].concat(Do(wV),Do(tT),Do(yV),Do(g0))),$=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,Q=null,ce=!0,le=!0,Me=!1,Ce=!0,J=!1,oe=!0,ae=!1,Fe=!1,ve=!1,Se=!1,O=!1,N=!1,W=!0,ee=!1,Y="user-content-",ie=!0,Z=!1,K={},te=null,ne=ft({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),re=null,be=ft({},["audio","video","img","source","image","track"]),Ae=null,Be=ft({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ot="http://www.w3.org/1998/Math/MathML",_t="http://www.w3.org/2000/svg",dt="http://www.w3.org/1999/xhtml",Ke=dt,Tt=!1,Ln=null,If=ft({},[ot,_t,dt],Xx),wo,lm=["application/xhtml+xml","text/html"],Ms="text/html",Mn,bi=null,Bi=i.createElement("form"),yn=function(X){return X instanceof RegExp||X instanceof Function},TE=function(X){bi&&bi===X||((!X||mu(X)!=="object")&&(X={}),X=bh(X),wo=lm.indexOf(X.PARSER_MEDIA_TYPE)===-1?wo=Ms:wo=X.PARSER_MEDIA_TYPE,Mn=wo==="application/xhtml+xml"?Xx:mS,S="ALLOWED_TAGS"in X?ft({},X.ALLOWED_TAGS,Mn):A,H="ALLOWED_ATTR"in X?ft({},X.ALLOWED_ATTR,Mn):M,Ln="ALLOWED_NAMESPACES"in X?ft({},X.ALLOWED_NAMESPACES,Xx):If,Ae="ADD_URI_SAFE_ATTR"in X?ft(bh(Be),X.ADD_URI_SAFE_ATTR,Mn):Be,re="ADD_DATA_URI_TAGS"in X?ft(bh(be),X.ADD_DATA_URI_TAGS,Mn):be,te="FORBID_CONTENTS"in X?ft({},X.FORBID_CONTENTS,Mn):ne,q="FORBID_TAGS"in X?ft({},X.FORBID_TAGS,Mn):{},Q="FORBID_ATTR"in X?ft({},X.FORBID_ATTR,Mn):{},K="USE_PROFILES"in X?X.USE_PROFILES:!1,ce=X.ALLOW_ARIA_ATTR!==!1,le=X.ALLOW_DATA_ATTR!==!1,Me=X.ALLOW_UNKNOWN_PROTOCOLS||!1,Ce=X.ALLOW_SELF_CLOSE_IN_ATTR!==!1,J=X.SAFE_FOR_TEMPLATES||!1,oe=X.SAFE_FOR_XML!==!1,ae=X.WHOLE_DOCUMENT||!1,Se=X.RETURN_DOM||!1,O=X.RETURN_DOM_FRAGMENT||!1,N=X.RETURN_TRUSTED_TYPE||!1,ve=X.FORCE_BODY||!1,W=X.SANITIZE_DOM!==!1,ee=X.SANITIZE_NAMED_PROPS||!1,ie=X.KEEP_CONTENT!==!1,Z=X.IN_PLACE||!1,C=X.ALLOWED_URI_REGEXP||C,Ke=X.NAMESPACE||dt,$=X.CUSTOM_ELEMENT_HANDLING||{},X.CUSTOM_ELEMENT_HANDLING&&yn(X.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($.tagNameCheck=X.CUSTOM_ELEMENT_HANDLING.tagNameCheck),X.CUSTOM_ELEMENT_HANDLING&&yn(X.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($.attributeNameCheck=X.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),X.CUSTOM_ELEMENT_HANDLING&&typeof X.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&($.allowCustomizedBuiltInElements=X.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),J&&(le=!1),O&&(Se=!0),K&&(S=ft({},Do(bV)),H=[],K.html===!0&&(ft(S,vV),ft(H,wV)),K.svg===!0&&(ft(S,Qx),ft(H,tT),ft(H,g0)),K.svgFilters===!0&&(ft(S,Jx),ft(H,tT),ft(H,g0)),K.mathMl===!0&&(ft(S,eT),ft(H,yV),ft(H,g0))),X.ADD_TAGS&&(S===A&&(S=bh(S)),ft(S,X.ADD_TAGS,Mn)),X.ADD_ATTR&&(H===M&&(H=bh(H)),ft(H,X.ADD_ATTR,Mn)),X.ADD_URI_SAFE_ATTR&&ft(Ae,X.ADD_URI_SAFE_ATTR,Mn),X.FORBID_CONTENTS&&(te===ne&&(te=bh(te)),ft(te,X.FORBID_CONTENTS,Mn)),ie&&(S["#text"]=!0),ae&&ft(S,["html","head","body"]),S.table&&(ft(S,["tbody"]),delete q.tbody),Dr&&Dr(X),bi=X)},OH=ft({},["mi","mo","mn","ms","mtext"]),kH=ft({},["annotation-xml"]),yZ=ft({},["title","style","font","a","script"]),xy=ft({},Qx);ft(xy,Jx),ft(xy,_we);var ME=ft({},eT);ft(ME,Rwe);var CZ=function(X){var ge=y(X);(!ge||!ge.tagName)&&(ge={namespaceURI:Ke,tagName:"template"});var xe=mS(X.tagName),Vt=mS(ge.tagName);return Ln[X.namespaceURI]?X.namespaceURI===_t?ge.namespaceURI===dt?xe==="svg":ge.namespaceURI===ot?xe==="svg"&&(Vt==="annotation-xml"||OH[Vt]):!!xy[xe]:X.namespaceURI===ot?ge.namespaceURI===dt?xe==="math":ge.namespaceURI===_t?xe==="math"&&kH[Vt]:!!ME[xe]:X.namespaceURI===dt?ge.namespaceURI===_t&&!kH[Vt]||ge.namespaceURI===ot&&!OH[Vt]?!1:!ME[xe]&&(yZ[xe]||!xy[xe]):!!(wo==="application/xhtml+xml"&&Ln[X.namespaceURI]):!1},As=function(X){_m(e.removed,{element:X});try{X.parentNode.removeChild(X)}catch{try{X.outerHTML=E}catch{X.remove()}}},Ty=function(X,ge){try{_m(e.removed,{attribute:ge.getAttributeNode(X),from:ge})}catch{_m(e.removed,{attribute:null,from:ge})}if(ge.removeAttribute(X),X==="is"&&!H[X])if(Se||O)try{As(ge)}catch{}else try{ge.setAttribute(X,"")}catch{}},DH=function(X){var ge,xe;if(ve)X="<remove></remove>"+X;else{var Vt=mV(X,/^[\r\n\t ]+/);xe=Vt&&Vt[0]}wo==="application/xhtml+xml"&&Ke===dt&&(X='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+X+"</body></html>");var Lr=R?R.createHTML(X):X;if(Ke===dt)try{ge=new d().parseFromString(Lr,wo)}catch{}if(!ge||!ge.documentElement){ge=T.createDocument(Ke,"template",null);try{ge.documentElement.innerHTML=Tt?E:Lr}catch{}}var qi=ge.body||ge.documentElement;return X&&xe&&qi.insertBefore(i.createTextNode(xe),qi.childNodes[0]||null),Ke===dt?P.call(ge,ae?"html":"body")[0]:ae?ge.documentElement:qi},NH=function(X){return I.call(X.ownerDocument||X,X,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null,!1)},LH=function(X){return X instanceof h&&(typeof X.nodeName!="string"||typeof X.textContent!="string"||typeof X.removeChild!="function"||!(X.attributes instanceof u)||typeof X.removeAttribute!="function"||typeof X.setAttribute!="function"||typeof X.namespaceURI!="string"||typeof X.insertBefore!="function"||typeof X.hasChildNodes!="function")},cm=function(X){return mu(o)==="object"?X instanceof o:X&&mu(X)==="object"&&typeof X.nodeType=="number"&&typeof X.nodeName=="string"},_l=function(X,ge,xe){V[X]&&wwe(V[X],function(Vt){Vt.call(e,ge,xe,bi)})},HH=function(X){var ge;if(_l("beforeSanitizeElements",X,null),LH(X)||Wi(/[\u0080-\uFFFF]/,X.nodeName))return As(X),!0;var xe=Mn(X.nodeName);if(_l("uponSanitizeElement",X,{tagName:xe,allowedTags:S}),X.hasChildNodes()&&!cm(X.firstElementChild)&&(!cm(X.content)||!cm(X.content.firstElementChild))&&Wi(/<[/\w]/g,X.innerHTML)&&Wi(/<[/\w]/g,X.textContent)||xe==="select"&&Wi(/<template/i,X.innerHTML)||X.nodeType===7||oe&&X.nodeType===8&&Wi(/<[/\w]/g,X.data))return As(X),!0;if(!S[xe]||q[xe]){if(!q[xe]&&FH(xe)&&($.tagNameCheck instanceof RegExp&&Wi($.tagNameCheck,xe)||$.tagNameCheck instanceof Function&&$.tagNameCheck(xe)))return!1;if(ie&&!te[xe]){var Vt=y(X)||X.parentNode,Lr=b(X)||X.childNodes;if(Lr&&Vt)for(var qi=Lr.length,Vi=qi-1;Vi>=0;--Vi){var uh=p(Lr[Vi],!0);uh.__removalCount=(X.__removalCount||0)+1,Vt.insertBefore(uh,m(X))}}return As(X),!0}return X instanceof a&&!CZ(X)||(xe==="noscript"||xe==="noembed"||xe==="noframes")&&Wi(/<\/no(script|embed|frames)/i,X.innerHTML)?(As(X),!0):(J&&X.nodeType===3&&(ge=X.textContent,ge=_o(ge,z," "),ge=_o(ge,L," "),ge=_o(ge,k," "),X.textContent!==ge&&(_m(e.removed,{element:X.cloneNode()}),X.textContent=ge)),_l("afterSanitizeElements",X,null),!1)},$H=function(X,ge,xe){if(W&&(ge==="id"||ge==="name")&&(xe in i||xe in Bi))return!1;if(!(le&&!Q[ge]&&Wi(F,ge))){if(!(ce&&Wi(G,ge))){if(!H[ge]||Q[ge]){if(!(FH(X)&&($.tagNameCheck instanceof RegExp&&Wi($.tagNameCheck,X)||$.tagNameCheck instanceof Function&&$.tagNameCheck(X))&&($.attributeNameCheck instanceof RegExp&&Wi($.attributeNameCheck,ge)||$.attributeNameCheck instanceof Function&&$.attributeNameCheck(ge))||ge==="is"&&$.allowCustomizedBuiltInElements&&($.tagNameCheck instanceof RegExp&&Wi($.tagNameCheck,xe)||$.tagNameCheck instanceof Function&&$.tagNameCheck(xe))))return!1}else if(!Ae[ge]){if(!Wi(C,_o(xe,se,""))){if(!((ge==="src"||ge==="xlink:href"||ge==="href")&&X!=="script"&&ywe(xe,"data:")===0&&re[X])){if(!(Me&&!Wi(U,_o(xe,se,"")))){if(xe)return!1}}}}}}return!0},FH=function(X){return X!=="annotation-xml"&&mV(X,v)},BH=function(X){var ge,xe,Vt,Lr;_l("beforeSanitizeAttributes",X,null);var qi=X.attributes;if(qi){var Vi={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H};for(Lr=qi.length;Lr--;){ge=qi[Lr];var uh=ge,wi=uh.name,AE=uh.namespaceURI;if(xe=wi==="value"?ge.value:Cwe(ge.value),Vt=Mn(wi),Vi.attrName=Vt,Vi.attrValue=xe,Vi.keepAttr=!0,Vi.forceKeepAttr=void 0,_l("uponSanitizeAttribute",X,Vi),xe=Vi.attrValue,!Vi.forceKeepAttr&&(Ty(wi,X),!!Vi.keepAttr)){if(!Ce&&Wi(/\/>/i,xe)){Ty(wi,X);continue}J&&(xe=_o(xe,z," "),xe=_o(xe,L," "),xe=_o(xe,k," "));var VH=Mn(X.nodeName);if($H(VH,Vt,xe)){if(ee&&(Vt==="id"||Vt==="name")&&(Ty(wi,X),xe=Y+xe),oe&&Wi(/((--!?|])>)|<\/(style|title)/i,xe)){Ty(wi,X);continue}if(R&&mu(f)==="object"&&typeof f.getAttributeType=="function"&&!AE)switch(f.getAttributeType(VH,Vt)){case"TrustedHTML":{xe=R.createHTML(xe);break}case"TrustedScriptURL":{xe=R.createScriptURL(xe);break}}try{AE?X.setAttributeNS(AE,wi,xe):X.setAttribute(wi,xe),LH(X)?As(X):pV(e.removed)}catch{}}}}_l("afterSanitizeAttributes",X,null)}},SZ=function Ve(X){var ge,xe=NH(X);for(_l("beforeSanitizeShadowDOM",X,null);ge=xe.nextNode();)_l("uponSanitizeShadowNode",ge,null),!HH(ge)&&(ge.content instanceof r&&Ve(ge.content),BH(ge));_l("afterSanitizeShadowDOM",X,null)};return e.sanitize=function(Ve){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge,xe,Vt,Lr,qi;if(Tt=!Ve,Tt&&(Ve="<!-->"),typeof Ve!="string"&&!cm(Ve))if(typeof Ve.toString=="function"){if(Ve=Ve.toString(),typeof Ve!="string")throw Zx("dirty is not a string, aborting")}else throw Zx("toString is not a function");if(!e.isSupported){if(mu(n.toStaticHTML)==="object"||typeof n.toStaticHTML=="function"){if(typeof Ve=="string")return n.toStaticHTML(Ve);if(cm(Ve))return n.toStaticHTML(Ve.outerHTML)}return Ve}if(Fe||TE(X),e.removed=[],typeof Ve=="string"&&(Z=!1),Z){if(Ve.nodeName){var Vi=Mn(Ve.nodeName);if(!S[Vi]||q[Vi])throw Zx("root node is forbidden and cannot be sanitized in-place")}}else if(Ve instanceof o)ge=DH("<!---->"),xe=ge.ownerDocument.importNode(Ve,!0),xe.nodeType===1&&xe.nodeName==="BODY"||xe.nodeName==="HTML"?ge=xe:ge.appendChild(xe);else{if(!Se&&!J&&!ae&&Ve.indexOf("<")===-1)return R&&N?R.createHTML(Ve):Ve;if(ge=DH(Ve),!ge)return Se?null:N?E:""}ge&&ve&&As(ge.firstChild);for(var uh=NH(Z?Ve:ge);Vt=uh.nextNode();)Vt.nodeType===3&&Vt===Lr||HH(Vt)||(Vt.content instanceof r&&SZ(Vt.content),BH(Vt),Lr=Vt);if(Lr=null,Z)return Ve;if(Se){if(O)for(qi=x.call(ge.ownerDocument);ge.firstChild;)qi.appendChild(ge.firstChild);else qi=ge;return(H.shadowroot||H.shadowrootmod)&&(qi=D.call(t,qi,!0)),qi}var wi=ae?ge.outerHTML:ge.innerHTML;return ae&&S["!doctype"]&&ge.ownerDocument&&ge.ownerDocument.doctype&&ge.ownerDocument.doctype.name&&Wi(kwe,ge.ownerDocument.doctype.name)&&(wi="<!DOCTYPE "+ge.ownerDocument.doctype.name+`>
`+wi),J&&(wi=_o(wi,z," "),wi=_o(wi,L," "),wi=_o(wi,k," ")),R&&N?R.createHTML(wi):wi},e.setConfig=function(Ve){TE(Ve),Fe=!0},e.clearConfig=function(){bi=null,Fe=!1},e.isValidAttribute=function(Ve,X,ge){bi||TE({});var xe=Mn(Ve),Vt=Mn(X);return $H(xe,Vt,ge)},e.addHook=function(Ve,X){typeof X=="function"&&(V[Ve]=V[Ve]||[],_m(V[Ve],X))},e.removeHook=function(Ve){if(V[Ve])return pV(V[Ve])},e.removeHooks=function(Ve){V[Ve]&&(V[Ve]=[])},e.removeAllHooks=function(){V={}},e}var Hwe=G7();//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Y7;function he(){return Y7.apply(null,arguments)}function $we(n){Y7=n}function ta(n){return n instanceof Array||Object.prototype.toString.call(n)==="[object Array]"}function $d(n){return n!=null&&Object.prototype.toString.call(n)==="[object Object]"}function Ft(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Uk(n){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(n).length===0;var e;for(e in n)if(Ft(n,e))return!1;return!0}function Ur(n){return n===void 0}function xc(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}function ry(n){return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}function K7(n,e){var t=[],i,r=n.length;for(i=0;i<r;++i)t.push(e(n[i],i));return t}function Eu(n,e){for(var t in e)Ft(e,t)&&(n[t]=e[t]);return Ft(e,"toString")&&(n.toString=e.toString),Ft(e,"valueOf")&&(n.valueOf=e.valueOf),n}function yl(n,e,t,i){return vG(n,e,t,i,!0).utc()}function Fwe(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ut(n){return n._pf==null&&(n._pf=Fwe()),n._pf}var WP;Array.prototype.some?WP=Array.prototype.some:WP=function(n){var e=Object(this),t=e.length>>>0,i;for(i=0;i<t;i++)if(i in e&&n.call(this,e[i],i,e))return!0;return!1};function Gk(n){var e=null,t=!1,i=n._d&&!isNaN(n._d.getTime());if(i&&(e=ut(n),t=WP.call(e.parsedDateParts,function(r){return r!=null}),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),n._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(n))n._isValid=i;else return i;return n._isValid}function x1(n){var e=yl(NaN);return n!=null?Eu(ut(e),n):ut(e).userInvalidated=!0,e}var CV=he.momentProperties=[],nT=!1;function Yk(n,e){var t,i,r,s=CV.length;if(Ur(e._isAMomentObject)||(n._isAMomentObject=e._isAMomentObject),Ur(e._i)||(n._i=e._i),Ur(e._f)||(n._f=e._f),Ur(e._l)||(n._l=e._l),Ur(e._strict)||(n._strict=e._strict),Ur(e._tzm)||(n._tzm=e._tzm),Ur(e._isUTC)||(n._isUTC=e._isUTC),Ur(e._offset)||(n._offset=e._offset),Ur(e._pf)||(n._pf=ut(e)),Ur(e._locale)||(n._locale=e._locale),s>0)for(t=0;t<s;t++)i=CV[t],r=e[i],Ur(r)||(n[i]=r);return n}function sy(n){Yk(this,n),this._d=new Date(n._d!=null?n._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),nT===!1&&(nT=!0,he.updateOffset(this),nT=!1)}function na(n){return n instanceof sy||n!=null&&n._isAMomentObject!=null}function q7(n){he.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+n)}function go(n,e){var t=!0;return Eu(function(){if(he.deprecationHandler!=null&&he.deprecationHandler(null,n),t){var i=[],r,s,o,a=arguments.length;for(s=0;s<a;s++){if(r="",typeof arguments[s]=="object"){r+=`
[`+s+"] ";for(o in arguments[0])Ft(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[s];i.push(r)}q7(n+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var SV={};function X7(n,e){he.deprecationHandler!=null&&he.deprecationHandler(n,e),SV[n]||(q7(e),SV[n]=!0)}he.suppressDeprecationWarnings=!1;he.deprecationHandler=null;function Cl(n){return typeof Function<"u"&&n instanceof Function||Object.prototype.toString.call(n)==="[object Function]"}function Bwe(n){var e,t;for(t in n)Ft(n,t)&&(e=n[t],Cl(e)?this[t]=e:this["_"+t]=e);this._config=n,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function jP(n,e){var t=Eu({},n),i;for(i in e)Ft(e,i)&&($d(n[i])&&$d(e[i])?(t[i]={},Eu(t[i],n[i]),Eu(t[i],e[i])):e[i]!=null?t[i]=e[i]:delete t[i]);for(i in n)Ft(n,i)&&!Ft(e,i)&&$d(n[i])&&(t[i]=Eu({},t[i]));return t}function Kk(n){n!=null&&this.set(n)}var zP;Object.keys?zP=Object.keys:zP=function(n){var e,t=[];for(e in n)Ft(n,e)&&t.push(e);return t};var Vwe={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Wwe(n,e,t){var i=this._calendar[n]||this._calendar.sameElse;return Cl(i)?i.call(e,t):i}function ll(n,e,t){var i=""+Math.abs(n),r=e-i.length,s=n>=0;return(s?t?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var qk=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,p0=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,iT={},ip={};function je(n,e,t,i){var r=i;typeof i=="string"&&(r=function(){return this[i]()}),n&&(ip[n]=r),e&&(ip[e[0]]=function(){return ll(r.apply(this,arguments),e[1],e[2])}),t&&(ip[t]=function(){return this.localeData().ordinal(r.apply(this,arguments),n)})}function jwe(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function zwe(n){var e=n.match(qk),t,i;for(t=0,i=e.length;t<i;t++)ip[e[t]]?e[t]=ip[e[t]]:e[t]=jwe(e[t]);return function(r){var s="",o;for(o=0;o<i;o++)s+=Cl(e[o])?e[o].call(r,n):e[o];return s}}function vS(n,e){return n.isValid()?(e=Z7(e,n.localeData()),iT[e]=iT[e]||zwe(e),iT[e](n)):n.localeData().invalidDate()}function Z7(n,e){var t=5;function i(r){return e.longDateFormat(r)||r}for(p0.lastIndex=0;t>=0&&p0.test(n);)n=n.replace(p0,i),p0.lastIndex=0,t-=1;return n}var Uwe={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Gwe(n){var e=this._longDateFormat[n],t=this._longDateFormat[n.toUpperCase()];return e||!t?e:(this._longDateFormat[n]=t.match(qk).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[n])}var Ywe="Invalid date";function Kwe(){return this._invalidDate}var qwe="%d",Xwe=/\d{1,2}/;function Zwe(n){return this._ordinal.replace("%d",n)}var Qwe={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Jwe(n,e,t,i){var r=this._relativeTime[t];return Cl(r)?r(n,e,t,i):r.replace(/%d/i,n)}function eye(n,e){var t=this._relativeTime[n>0?"future":"past"];return Cl(t)?t(e):t.replace(/%s/i,e)}var _V={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function po(n){return typeof n=="string"?_V[n]||_V[n.toLowerCase()]:void 0}function Xk(n){var e={},t,i;for(i in n)Ft(n,i)&&(t=po(i),t&&(e[t]=n[i]));return e}var tye={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function nye(n){var e=[],t;for(t in n)Ft(n,t)&&e.push({unit:t,priority:tye[t]});return e.sort(function(i,r){return i.priority-r.priority}),e}var Q7=/\d/,Ts=/\d\d/,J7=/\d{3}/,Zk=/\d{4}/,T1=/[+-]?\d{6}/,Tn=/\d\d?/,eG=/\d\d\d\d?/,tG=/\d\d\d\d\d\d?/,M1=/\d{1,3}/,Qk=/\d{1,4}/,A1=/[+-]?\d{1,6}/,Yp=/\d+/,P1=/[+-]?\d+/,iye=/Z|[+-]\d\d:?\d\d/gi,I1=/Z|[+-]\d\d(?::?\d\d)?/gi,rye=/[+-]?\d+(\.\d{1,3})?/,oy=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Kp=/^[1-9]\d?/,Jk=/^([1-9]\d|\d)/,$_;$_={};function De(n,e,t){$_[n]=Cl(e)?e:function(i,r){return i&&t?t:e}}function sye(n,e){return Ft($_,n)?$_[n](e._strict,e._locale):new RegExp(oye(n))}function oye(n){return yc(n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,r,s){return t||i||r||s}))}function yc(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function qs(n){return n<0?Math.ceil(n)||0:Math.floor(n)}function xt(n){var e=+n,t=0;return e!==0&&isFinite(e)&&(t=qs(e)),t}var UP={};function ln(n,e){var t,i=e,r;for(typeof n=="string"&&(n=[n]),xc(e)&&(i=function(s,o){o[e]=xt(s)}),r=n.length,t=0;t<r;t++)UP[n[t]]=i}function ay(n,e){ln(n,function(t,i,r,s){r._w=r._w||{},e(t,r._w,r,s)})}function aye(n,e,t){e!=null&&Ft(UP,n)&&UP[n](e,t._a,t,n)}function O1(n){return n%4===0&&n%100!==0||n%400===0}var lr=0,hc=1,ja=2,Mi=3,Ko=4,dc=5,yd=6,lye=7,cye=8;je("Y",0,0,function(){var n=this.year();return n<=9999?ll(n,4):"+"+n});je(0,["YY",2],0,function(){return this.year()%100});je(0,["YYYY",4],0,"year");je(0,["YYYYY",5],0,"year");je(0,["YYYYYY",6,!0],0,"year");De("Y",P1);De("YY",Tn,Ts);De("YYYY",Qk,Zk);De("YYYYY",A1,T1);De("YYYYYY",A1,T1);ln(["YYYYY","YYYYYY"],lr);ln("YYYY",function(n,e){e[lr]=n.length===2?he.parseTwoDigitYear(n):xt(n)});ln("YY",function(n,e){e[lr]=he.parseTwoDigitYear(n)});ln("Y",function(n,e){e[lr]=parseInt(n,10)});function yb(n){return O1(n)?366:365}he.parseTwoDigitYear=function(n){return xt(n)+(xt(n)>68?1900:2e3)};var nG=qp("FullYear",!0);function uye(){return O1(this.year())}function qp(n,e){return function(t){return t!=null?(iG(this,n,t),he.updateOffset(this,e),this):dw(this,n)}}function dw(n,e){if(!n.isValid())return NaN;var t=n._d,i=n._isUTC;switch(e){case"Milliseconds":return i?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return i?t.getUTCSeconds():t.getSeconds();case"Minutes":return i?t.getUTCMinutes():t.getMinutes();case"Hours":return i?t.getUTCHours():t.getHours();case"Date":return i?t.getUTCDate():t.getDate();case"Day":return i?t.getUTCDay():t.getDay();case"Month":return i?t.getUTCMonth():t.getMonth();case"FullYear":return i?t.getUTCFullYear():t.getFullYear();default:return NaN}}function iG(n,e,t){var i,r,s,o,a;if(!(!n.isValid()||isNaN(t))){switch(i=n._d,r=n._isUTC,e){case"Milliseconds":return void(r?i.setUTCMilliseconds(t):i.setMilliseconds(t));case"Seconds":return void(r?i.setUTCSeconds(t):i.setSeconds(t));case"Minutes":return void(r?i.setUTCMinutes(t):i.setMinutes(t));case"Hours":return void(r?i.setUTCHours(t):i.setHours(t));case"Date":return void(r?i.setUTCDate(t):i.setDate(t));case"FullYear":break;default:return}s=t,o=n.month(),a=n.date(),a=a===29&&o===1&&!O1(s)?28:a,r?i.setUTCFullYear(s,o,a):i.setFullYear(s,o,a)}}function hye(n){return n=po(n),Cl(this[n])?this[n]():this}function dye(n,e){if(typeof n=="object"){n=Xk(n);var t=nye(n),i,r=t.length;for(i=0;i<r;i++)this[t[i].unit](n[t[i].unit])}else if(n=po(n),Cl(this[n]))return this[n](e);return this}function fye(n,e){return(n%e+e)%e}var si;Array.prototype.indexOf?si=Array.prototype.indexOf:si=function(n){var e;for(e=0;e<this.length;++e)if(this[e]===n)return e;return-1};function eD(n,e){if(isNaN(n)||isNaN(e))return NaN;var t=fye(e,12);return n+=(e-t)/12,t===1?O1(n)?29:28:31-t%7%2}je("M",["MM",2],"Mo",function(){return this.month()+1});je("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)});je("MMMM",0,0,function(n){return this.localeData().months(this,n)});De("M",Tn,Kp);De("MM",Tn,Ts);De("MMM",function(n,e){return e.monthsShortRegex(n)});De("MMMM",function(n,e){return e.monthsRegex(n)});ln(["M","MM"],function(n,e){e[hc]=xt(n)-1});ln(["MMM","MMMM"],function(n,e,t,i){var r=t._locale.monthsParse(n,i,t._strict);r!=null?e[hc]=r:ut(t).invalidMonth=n});var gye="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),rG="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),sG=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,pye=oy,mye=oy;function vye(n,e){return n?ta(this._months)?this._months[n.month()]:this._months[(this._months.isFormat||sG).test(e)?"format":"standalone"][n.month()]:ta(this._months)?this._months:this._months.standalone}function bye(n,e){return n?ta(this._monthsShort)?this._monthsShort[n.month()]:this._monthsShort[sG.test(e)?"format":"standalone"][n.month()]:ta(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function wye(n,e,t){var i,r,s,o=n.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)s=yl([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(s,"").toLocaleLowerCase();return t?e==="MMM"?(r=si.call(this._shortMonthsParse,o),r!==-1?r:null):(r=si.call(this._longMonthsParse,o),r!==-1?r:null):e==="MMM"?(r=si.call(this._shortMonthsParse,o),r!==-1?r:(r=si.call(this._longMonthsParse,o),r!==-1?r:null)):(r=si.call(this._longMonthsParse,o),r!==-1?r:(r=si.call(this._shortMonthsParse,o),r!==-1?r:null))}function yye(n,e,t){var i,r,s;if(this._monthsParseExact)return wye.call(this,n,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=yl([2e3,i]),t&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!t&&!this._monthsParse[i]&&(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[i].test(n))return i;if(t&&e==="MMM"&&this._shortMonthsParse[i].test(n))return i;if(!t&&this._monthsParse[i].test(n))return i}}function oG(n,e){if(!n.isValid())return n;if(typeof e=="string"){if(/^\d+$/.test(e))e=xt(e);else if(e=n.localeData().monthsParse(e),!xc(e))return n}var t=e,i=n.date();return i=i<29?i:Math.min(i,eD(n.year(),t)),n._isUTC?n._d.setUTCMonth(t,i):n._d.setMonth(t,i),n}function aG(n){return n!=null?(oG(this,n),he.updateOffset(this,!0),this):dw(this,"Month")}function Cye(){return eD(this.year(),this.month())}function Sye(n){return this._monthsParseExact?(Ft(this,"_monthsRegex")||lG.call(this),n?this._monthsShortStrictRegex:this._monthsShortRegex):(Ft(this,"_monthsShortRegex")||(this._monthsShortRegex=pye),this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex)}function _ye(n){return this._monthsParseExact?(Ft(this,"_monthsRegex")||lG.call(this),n?this._monthsStrictRegex:this._monthsRegex):(Ft(this,"_monthsRegex")||(this._monthsRegex=mye),this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex)}function lG(){function n(l,c){return c.length-l.length}var e=[],t=[],i=[],r,s,o,a;for(r=0;r<12;r++)s=yl([2e3,r]),o=yc(this.monthsShort(s,"")),a=yc(this.months(s,"")),e.push(o),t.push(a),i.push(a),i.push(o);e.sort(n),t.sort(n),i.sort(n),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Rye(n,e,t,i,r,s,o){var a;return n<100&&n>=0?(a=new Date(n+400,e,t,i,r,s,o),isFinite(a.getFullYear())&&a.setFullYear(n)):a=new Date(n,e,t,i,r,s,o),a}function fw(n){var e,t;return n<100&&n>=0?(t=Array.prototype.slice.call(arguments),t[0]=n+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(n)):e=new Date(Date.UTC.apply(null,arguments)),e}function F_(n,e,t){var i=7+e-t,r=(7+fw(n,0,i).getUTCDay()-e)%7;return-r+i-1}function cG(n,e,t,i,r){var s=(7+t-i)%7,o=F_(n,i,r),a=1+7*(e-1)+s+o,l,c;return a<=0?(l=n-1,c=yb(l)+a):a>yb(n)?(l=n+1,c=a-yb(n)):(l=n,c=a),{year:l,dayOfYear:c}}function gw(n,e,t){var i=F_(n.year(),e,t),r=Math.floor((n.dayOfYear()-i-1)/7)+1,s,o;return r<1?(o=n.year()-1,s=r+Cc(o,e,t)):r>Cc(n.year(),e,t)?(s=r-Cc(n.year(),e,t),o=n.year()+1):(o=n.year(),s=r),{week:s,year:o}}function Cc(n,e,t){var i=F_(n,e,t),r=F_(n+1,e,t);return(yb(n)-i+r)/7}je("w",["ww",2],"wo","week");je("W",["WW",2],"Wo","isoWeek");De("w",Tn,Kp);De("ww",Tn,Ts);De("W",Tn,Kp);De("WW",Tn,Ts);ay(["w","ww","W","WW"],function(n,e,t,i){e[i.substr(0,1)]=xt(n)});function Eye(n){return gw(n,this._week.dow,this._week.doy).week}var xye={dow:0,doy:6};function Tye(){return this._week.dow}function Mye(){return this._week.doy}function Aye(n){var e=this.localeData().week(this);return n==null?e:this.add((n-e)*7,"d")}function Pye(n){var e=gw(this,1,4).week;return n==null?e:this.add((n-e)*7,"d")}je("d",0,"do","day");je("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)});je("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)});je("dddd",0,0,function(n){return this.localeData().weekdays(this,n)});je("e",0,0,"weekday");je("E",0,0,"isoWeekday");De("d",Tn);De("e",Tn);De("E",Tn);De("dd",function(n,e){return e.weekdaysMinRegex(n)});De("ddd",function(n,e){return e.weekdaysShortRegex(n)});De("dddd",function(n,e){return e.weekdaysRegex(n)});ay(["dd","ddd","dddd"],function(n,e,t,i){var r=t._locale.weekdaysParse(n,i,t._strict);r!=null?e.d=r:ut(t).invalidWeekday=n});ay(["d","e","E"],function(n,e,t,i){e[i]=xt(n)});function Iye(n,e){return typeof n!="string"?n:isNaN(n)?(n=e.weekdaysParse(n),typeof n=="number"?n:null):parseInt(n,10)}function Oye(n,e){return typeof n=="string"?e.weekdaysParse(n)%7||7:isNaN(n)?null:n}function tD(n,e){return n.slice(e,7).concat(n.slice(0,e))}var kye="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),uG="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Dye="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Nye=oy,Lye=oy,Hye=oy;function $ye(n,e){var t=ta(this._weekdays)?this._weekdays:this._weekdays[n&&n!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return n===!0?tD(t,this._week.dow):n?t[n.day()]:t}function Fye(n){return n===!0?tD(this._weekdaysShort,this._week.dow):n?this._weekdaysShort[n.day()]:this._weekdaysShort}function Bye(n){return n===!0?tD(this._weekdaysMin,this._week.dow):n?this._weekdaysMin[n.day()]:this._weekdaysMin}function Vye(n,e,t){var i,r,s,o=n.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)s=yl([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(s,"").toLocaleLowerCase();return t?e==="dddd"?(r=si.call(this._weekdaysParse,o),r!==-1?r:null):e==="ddd"?(r=si.call(this._shortWeekdaysParse,o),r!==-1?r:null):(r=si.call(this._minWeekdaysParse,o),r!==-1?r:null):e==="dddd"?(r=si.call(this._weekdaysParse,o),r!==-1||(r=si.call(this._shortWeekdaysParse,o),r!==-1)?r:(r=si.call(this._minWeekdaysParse,o),r!==-1?r:null)):e==="ddd"?(r=si.call(this._shortWeekdaysParse,o),r!==-1||(r=si.call(this._weekdaysParse,o),r!==-1)?r:(r=si.call(this._minWeekdaysParse,o),r!==-1?r:null)):(r=si.call(this._minWeekdaysParse,o),r!==-1||(r=si.call(this._weekdaysParse,o),r!==-1)?r:(r=si.call(this._shortWeekdaysParse,o),r!==-1?r:null))}function Wye(n,e,t){var i,r,s;if(this._weekdaysParseExact)return Vye.call(this,n,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=yl([2e3,1]).day(i),t&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(s.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[i].test(n))return i;if(t&&e==="ddd"&&this._shortWeekdaysParse[i].test(n))return i;if(t&&e==="dd"&&this._minWeekdaysParse[i].test(n))return i;if(!t&&this._weekdaysParse[i].test(n))return i}}function jye(n){if(!this.isValid())return n!=null?this:NaN;var e=dw(this,"Day");return n!=null?(n=Iye(n,this.localeData()),this.add(n-e,"d")):e}function zye(n){if(!this.isValid())return n!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return n==null?e:this.add(n-e,"d")}function Uye(n){if(!this.isValid())return n!=null?this:NaN;if(n!=null){var e=Oye(n,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Gye(n){return this._weekdaysParseExact?(Ft(this,"_weekdaysRegex")||nD.call(this),n?this._weekdaysStrictRegex:this._weekdaysRegex):(Ft(this,"_weekdaysRegex")||(this._weekdaysRegex=Nye),this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex)}function Yye(n){return this._weekdaysParseExact?(Ft(this,"_weekdaysRegex")||nD.call(this),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Ft(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Lye),this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Kye(n){return this._weekdaysParseExact?(Ft(this,"_weekdaysRegex")||nD.call(this),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Ft(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Hye),this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function nD(){function n(u,h){return h.length-u.length}var e=[],t=[],i=[],r=[],s,o,a,l,c;for(s=0;s<7;s++)o=yl([2e3,1]).day(s),a=yc(this.weekdaysMin(o,"")),l=yc(this.weekdaysShort(o,"")),c=yc(this.weekdays(o,"")),e.push(a),t.push(l),i.push(c),r.push(a),r.push(l),r.push(c);e.sort(n),t.sort(n),i.sort(n),r.sort(n),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function iD(){return this.hours()%12||12}function qye(){return this.hours()||24}je("H",["HH",2],0,"hour");je("h",["hh",2],0,iD);je("k",["kk",2],0,qye);je("hmm",0,0,function(){return""+iD.apply(this)+ll(this.minutes(),2)});je("hmmss",0,0,function(){return""+iD.apply(this)+ll(this.minutes(),2)+ll(this.seconds(),2)});je("Hmm",0,0,function(){return""+this.hours()+ll(this.minutes(),2)});je("Hmmss",0,0,function(){return""+this.hours()+ll(this.minutes(),2)+ll(this.seconds(),2)});function hG(n,e){je(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}hG("a",!0);hG("A",!1);function dG(n,e){return e._meridiemParse}De("a",dG);De("A",dG);De("H",Tn,Jk);De("h",Tn,Kp);De("k",Tn,Kp);De("HH",Tn,Ts);De("hh",Tn,Ts);De("kk",Tn,Ts);De("hmm",eG);De("hmmss",tG);De("Hmm",eG);De("Hmmss",tG);ln(["H","HH"],Mi);ln(["k","kk"],function(n,e,t){var i=xt(n);e[Mi]=i===24?0:i});ln(["a","A"],function(n,e,t){t._isPm=t._locale.isPM(n),t._meridiem=n});ln(["h","hh"],function(n,e,t){e[Mi]=xt(n),ut(t).bigHour=!0});ln("hmm",function(n,e,t){var i=n.length-2;e[Mi]=xt(n.substr(0,i)),e[Ko]=xt(n.substr(i)),ut(t).bigHour=!0});ln("hmmss",function(n,e,t){var i=n.length-4,r=n.length-2;e[Mi]=xt(n.substr(0,i)),e[Ko]=xt(n.substr(i,2)),e[dc]=xt(n.substr(r)),ut(t).bigHour=!0});ln("Hmm",function(n,e,t){var i=n.length-2;e[Mi]=xt(n.substr(0,i)),e[Ko]=xt(n.substr(i))});ln("Hmmss",function(n,e,t){var i=n.length-4,r=n.length-2;e[Mi]=xt(n.substr(0,i)),e[Ko]=xt(n.substr(i,2)),e[dc]=xt(n.substr(r))});function Xye(n){return(n+"").toLowerCase().charAt(0)==="p"}var Zye=/[ap]\.?m?\.?/i,Qye=qp("Hours",!0);function Jye(n,e,t){return n>11?t?"pm":"PM":t?"am":"AM"}var fG={calendar:Vwe,longDateFormat:Uwe,invalidDate:Ywe,ordinal:qwe,dayOfMonthOrdinalParse:Xwe,relativeTime:Qwe,months:gye,monthsShort:rG,week:xye,weekdays:kye,weekdaysMin:Dye,weekdaysShort:uG,meridiemParse:Zye},In={},Rm={},pw;function e0e(n,e){var t,i=Math.min(n.length,e.length);for(t=0;t<i;t+=1)if(n[t]!==e[t])return t;return i}function RV(n){return n&&n.toLowerCase().replace("_","-")}function t0e(n){for(var e=0,t,i,r,s;e<n.length;){for(s=RV(n[e]).split("-"),t=s.length,i=RV(n[e+1]),i=i?i.split("-"):null;t>0;){if(r=k1(s.slice(0,t).join("-")),r)return r;if(i&&i.length>=t&&e0e(s,i)>=t-1)break;t--}e++}return pw}function n0e(n){return!!(n&&n.match("^[^/\\\\]*$"))}function k1(n){var e=null,t;if(In[n]===void 0&&typeof jS<"u"&&jS&&jS.exports&&n0e(n))try{e=pw._abbr,t=require,t("./locale/"+n),Du(e)}catch{In[n]=null}return In[n]}function Du(n,e){var t;return n&&(Ur(e)?t=$c(n):t=rD(n,e),t?pw=t:typeof console<"u"&&console.warn&&console.warn("Locale "+n+" not found. Did you forget to load it?")),pw._abbr}function rD(n,e){if(e!==null){var t,i=fG;if(e.abbr=n,In[n]!=null)X7("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=In[n]._config;else if(e.parentLocale!=null)if(In[e.parentLocale]!=null)i=In[e.parentLocale]._config;else if(t=k1(e.parentLocale),t!=null)i=t._config;else return Rm[e.parentLocale]||(Rm[e.parentLocale]=[]),Rm[e.parentLocale].push({name:n,config:e}),null;return In[n]=new Kk(jP(i,e)),Rm[n]&&Rm[n].forEach(function(r){rD(r.name,r.config)}),Du(n),In[n]}else return delete In[n],null}function i0e(n,e){if(e!=null){var t,i,r=fG;In[n]!=null&&In[n].parentLocale!=null?In[n].set(jP(In[n]._config,e)):(i=k1(n),i!=null&&(r=i._config),e=jP(r,e),i==null&&(e.abbr=n),t=new Kk(e),t.parentLocale=In[n],In[n]=t),Du(n)}else In[n]!=null&&(In[n].parentLocale!=null?(In[n]=In[n].parentLocale,n===Du()&&Du(n)):In[n]!=null&&delete In[n]);return In[n]}function $c(n){var e;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return pw;if(!ta(n)){if(e=k1(n),e)return e;n=[n]}return t0e(n)}function r0e(){return zP(In)}function sD(n){var e,t=n._a;return t&&ut(n).overflow===-2&&(e=t[hc]<0||t[hc]>11?hc:t[ja]<1||t[ja]>eD(t[lr],t[hc])?ja:t[Mi]<0||t[Mi]>24||t[Mi]===24&&(t[Ko]!==0||t[dc]!==0||t[yd]!==0)?Mi:t[Ko]<0||t[Ko]>59?Ko:t[dc]<0||t[dc]>59?dc:t[yd]<0||t[yd]>999?yd:-1,ut(n)._overflowDayOfYear&&(e<lr||e>ja)&&(e=ja),ut(n)._overflowWeeks&&e===-1&&(e=lye),ut(n)._overflowWeekday&&e===-1&&(e=cye),ut(n).overflow=e),n}var s0e=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,o0e=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,a0e=/Z|[+-]\d\d(?::?\d\d)?/,m0=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],rT=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],l0e=/^\/?Date\((-?\d+)/i,c0e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,u0e={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function gG(n){var e,t,i=n._i,r=s0e.exec(i)||o0e.exec(i),s,o,a,l,c=m0.length,u=rT.length;if(r){for(ut(n).iso=!0,e=0,t=c;e<t;e++)if(m0[e][1].exec(r[1])){o=m0[e][0],s=m0[e][2]!==!1;break}if(o==null){n._isValid=!1;return}if(r[3]){for(e=0,t=u;e<t;e++)if(rT[e][1].exec(r[3])){a=(r[2]||" ")+rT[e][0];break}if(a==null){n._isValid=!1;return}}if(!s&&a!=null){n._isValid=!1;return}if(r[4])if(a0e.exec(r[4]))l="Z";else{n._isValid=!1;return}n._f=o+(a||"")+(l||""),aD(n)}else n._isValid=!1}function h0e(n,e,t,i,r,s){var o=[d0e(n),rG.indexOf(e),parseInt(t,10),parseInt(i,10),parseInt(r,10)];return s&&o.push(parseInt(s,10)),o}function d0e(n){var e=parseInt(n,10);return e<=49?2e3+e:e<=999?1900+e:e}function f0e(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function g0e(n,e,t){if(n){var i=uG.indexOf(n),r=new Date(e[0],e[1],e[2]).getDay();if(i!==r)return ut(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function p0e(n,e,t){if(n)return u0e[n];if(e)return 0;var i=parseInt(t,10),r=i%100,s=(i-r)/100;return s*60+r}function pG(n){var e=c0e.exec(f0e(n._i)),t;if(e){if(t=h0e(e[4],e[3],e[2],e[5],e[6],e[7]),!g0e(e[1],t,n))return;n._a=t,n._tzm=p0e(e[8],e[9],e[10]),n._d=fw.apply(null,n._a),n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),ut(n).rfc2822=!0}else n._isValid=!1}function m0e(n){var e=l0e.exec(n._i);if(e!==null){n._d=new Date(+e[1]);return}if(gG(n),n._isValid===!1)delete n._isValid;else return;if(pG(n),n._isValid===!1)delete n._isValid;else return;n._strict?n._isValid=!1:he.createFromInputFallback(n)}he.createFromInputFallback=go("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))});function Mg(n,e,t){return n??e??t}function v0e(n){var e=new Date(he.now());return n._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function oD(n){var e,t,i=[],r,s,o;if(!n._d){for(r=v0e(n),n._w&&n._a[ja]==null&&n._a[hc]==null&&b0e(n),n._dayOfYear!=null&&(o=Mg(n._a[lr],r[lr]),(n._dayOfYear>yb(o)||n._dayOfYear===0)&&(ut(n)._overflowDayOfYear=!0),t=fw(o,0,n._dayOfYear),n._a[hc]=t.getUTCMonth(),n._a[ja]=t.getUTCDate()),e=0;e<3&&n._a[e]==null;++e)n._a[e]=i[e]=r[e];for(;e<7;e++)n._a[e]=i[e]=n._a[e]==null?e===2?1:0:n._a[e];n._a[Mi]===24&&n._a[Ko]===0&&n._a[dc]===0&&n._a[yd]===0&&(n._nextDay=!0,n._a[Mi]=0),n._d=(n._useUTC?fw:Rye).apply(null,i),s=n._useUTC?n._d.getUTCDay():n._d.getDay(),n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),n._nextDay&&(n._a[Mi]=24),n._w&&typeof n._w.d<"u"&&n._w.d!==s&&(ut(n).weekdayMismatch=!0)}}function b0e(n){var e,t,i,r,s,o,a,l,c;e=n._w,e.GG!=null||e.W!=null||e.E!=null?(s=1,o=4,t=Mg(e.GG,n._a[lr],gw(xn(),1,4).year),i=Mg(e.W,1),r=Mg(e.E,1),(r<1||r>7)&&(l=!0)):(s=n._locale._week.dow,o=n._locale._week.doy,c=gw(xn(),s,o),t=Mg(e.gg,n._a[lr],c.year),i=Mg(e.w,c.week),e.d!=null?(r=e.d,(r<0||r>6)&&(l=!0)):e.e!=null?(r=e.e+s,(e.e<0||e.e>6)&&(l=!0)):r=s),i<1||i>Cc(t,s,o)?ut(n)._overflowWeeks=!0:l!=null?ut(n)._overflowWeekday=!0:(a=cG(t,i,r,s,o),n._a[lr]=a.year,n._dayOfYear=a.dayOfYear)}he.ISO_8601=function(){};he.RFC_2822=function(){};function aD(n){if(n._f===he.ISO_8601){gG(n);return}if(n._f===he.RFC_2822){pG(n);return}n._a=[],ut(n).empty=!0;var e=""+n._i,t,i,r,s,o,a=e.length,l=0,c,u;for(r=Z7(n._f,n._locale).match(qk)||[],u=r.length,t=0;t<u;t++)s=r[t],i=(e.match(sye(s,n))||[])[0],i&&(o=e.substr(0,e.indexOf(i)),o.length>0&&ut(n).unusedInput.push(o),e=e.slice(e.indexOf(i)+i.length),l+=i.length),ip[s]?(i?ut(n).empty=!1:ut(n).unusedTokens.push(s),aye(s,i,n)):n._strict&&!i&&ut(n).unusedTokens.push(s);ut(n).charsLeftOver=a-l,e.length>0&&ut(n).unusedInput.push(e),n._a[Mi]<=12&&ut(n).bigHour===!0&&n._a[Mi]>0&&(ut(n).bigHour=void 0),ut(n).parsedDateParts=n._a.slice(0),ut(n).meridiem=n._meridiem,n._a[Mi]=w0e(n._locale,n._a[Mi],n._meridiem),c=ut(n).era,c!==null&&(n._a[lr]=n._locale.erasConvertYear(c,n._a[lr])),oD(n),sD(n)}function w0e(n,e,t){var i;return t==null?e:n.meridiemHour!=null?n.meridiemHour(e,t):(n.isPM!=null&&(i=n.isPM(t),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function y0e(n){var e,t,i,r,s,o,a=!1,l=n._f.length;if(l===0){ut(n).invalidFormat=!0,n._d=new Date(NaN);return}for(r=0;r<l;r++)s=0,o=!1,e=Yk({},n),n._useUTC!=null&&(e._useUTC=n._useUTC),e._f=n._f[r],aD(e),Gk(e)&&(o=!0),s+=ut(e).charsLeftOver,s+=ut(e).unusedTokens.length*10,ut(e).score=s,a?s<i&&(i=s,t=e):(i==null||s<i||o)&&(i=s,t=e,o&&(a=!0));Eu(n,t||e)}function C0e(n){if(!n._d){var e=Xk(n._i),t=e.day===void 0?e.date:e.day;n._a=K7([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),oD(n)}}function S0e(n){var e=new sy(sD(mG(n)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function mG(n){var e=n._i,t=n._f;return n._locale=n._locale||$c(n._l),e===null||t===void 0&&e===""?x1({nullInput:!0}):(typeof e=="string"&&(n._i=e=n._locale.preparse(e)),na(e)?new sy(sD(e)):(ry(e)?n._d=e:ta(t)?y0e(n):t?aD(n):_0e(n),Gk(n)||(n._d=null),n))}function _0e(n){var e=n._i;Ur(e)?n._d=new Date(he.now()):ry(e)?n._d=new Date(e.valueOf()):typeof e=="string"?m0e(n):ta(e)?(n._a=K7(e.slice(0),function(t){return parseInt(t,10)}),oD(n)):$d(e)?C0e(n):xc(e)?n._d=new Date(e):he.createFromInputFallback(n)}function vG(n,e,t,i,r){var s={};return(e===!0||e===!1)&&(i=e,e=void 0),(t===!0||t===!1)&&(i=t,t=void 0),($d(n)&&Uk(n)||ta(n)&&n.length===0)&&(n=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=t,s._i=n,s._f=e,s._strict=i,S0e(s)}function xn(n,e,t,i){return vG(n,e,t,i,!1)}var R0e=go("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=xn.apply(null,arguments);return this.isValid()&&n.isValid()?n<this?this:n:x1()}),E0e=go("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=xn.apply(null,arguments);return this.isValid()&&n.isValid()?n>this?this:n:x1()});function bG(n,e){var t,i;if(e.length===1&&ta(e[0])&&(e=e[0]),!e.length)return xn();for(t=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][n](t))&&(t=e[i]);return t}function x0e(){var n=[].slice.call(arguments,0);return bG("isBefore",n)}function T0e(){var n=[].slice.call(arguments,0);return bG("isAfter",n)}var M0e=function(){return Date.now?Date.now():+new Date},Em=["year","quarter","month","week","day","hour","minute","second","millisecond"];function A0e(n){var e,t=!1,i,r=Em.length;for(e in n)if(Ft(n,e)&&!(si.call(Em,e)!==-1&&(n[e]==null||!isNaN(n[e]))))return!1;for(i=0;i<r;++i)if(n[Em[i]]){if(t)return!1;parseFloat(n[Em[i]])!==xt(n[Em[i]])&&(t=!0)}return!0}function P0e(){return this._isValid}function I0e(){return la(NaN)}function D1(n){var e=Xk(n),t=e.year||0,i=e.quarter||0,r=e.month||0,s=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=A0e(e),this._milliseconds=+u+c*1e3+l*6e4+a*1e3*60*60,this._days=+o+s*7,this._months=+r+i*3+t*12,this._data={},this._locale=$c(),this._bubble()}function bS(n){return n instanceof D1}function GP(n){return n<0?Math.round(-1*n)*-1:Math.round(n)}function O0e(n,e,t){var i=Math.min(n.length,e.length),r=Math.abs(n.length-e.length),s=0,o;for(o=0;o<i;o++)xt(n[o])!==xt(e[o])&&s++;return s+r}function wG(n,e){je(n,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+ll(~~(t/60),2)+e+ll(~~t%60,2)})}wG("Z",":");wG("ZZ","");De("Z",I1);De("ZZ",I1);ln(["Z","ZZ"],function(n,e,t){t._useUTC=!0,t._tzm=lD(I1,n)});var k0e=/([\+\-]|\d\d)/gi;function lD(n,e){var t=(e||"").match(n),i,r,s;return t===null?null:(i=t[t.length-1]||[],r=(i+"").match(k0e)||["-",0,0],s=+(r[1]*60)+xt(r[2]),s===0?0:r[0]==="+"?s:-s)}function cD(n,e){var t,i;return e._isUTC?(t=e.clone(),i=(na(n)||ry(n)?n.valueOf():xn(n).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+i),he.updateOffset(t,!1),t):xn(n).local()}function YP(n){return-Math.round(n._d.getTimezoneOffset())}he.updateOffset=function(){};function D0e(n,e,t){var i=this._offset||0,r;if(!this.isValid())return n!=null?this:NaN;if(n!=null){if(typeof n=="string"){if(n=lD(I1,n),n===null)return this}else Math.abs(n)<16&&!t&&(n=n*60);return!this._isUTC&&e&&(r=YP(this)),this._offset=n,this._isUTC=!0,r!=null&&this.add(r,"m"),i!==n&&(!e||this._changeInProgress?SG(this,la(n-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,he.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:YP(this)}function N0e(n,e){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,e),this):-this.utcOffset()}function L0e(n){return this.utcOffset(0,n)}function H0e(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(YP(this),"m")),this}function $0e(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var n=lD(iye,this._i);n!=null?this.utcOffset(n):this.utcOffset(0,!0)}return this}function F0e(n){return this.isValid()?(n=n?xn(n).utcOffset():0,(this.utcOffset()-n)%60===0):!1}function B0e(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function V0e(){if(!Ur(this._isDSTShifted))return this._isDSTShifted;var n={},e;return Yk(n,this),n=mG(n),n._a?(e=n._isUTC?yl(n._a):xn(n._a),this._isDSTShifted=this.isValid()&&O0e(n._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function W0e(){return this.isValid()?!this._isUTC:!1}function j0e(){return this.isValid()?this._isUTC:!1}function yG(){return this.isValid()?this._isUTC&&this._offset===0:!1}var z0e=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,U0e=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function la(n,e){var t=n,i=null,r,s,o;return bS(n)?t={ms:n._milliseconds,d:n._days,M:n._months}:xc(n)||!isNaN(+n)?(t={},e?t[e]=+n:t.milliseconds=+n):(i=z0e.exec(n))?(r=i[1]==="-"?-1:1,t={y:0,d:xt(i[ja])*r,h:xt(i[Mi])*r,m:xt(i[Ko])*r,s:xt(i[dc])*r,ms:xt(GP(i[yd]*1e3))*r}):(i=U0e.exec(n))?(r=i[1]==="-"?-1:1,t={y:wh(i[2],r),M:wh(i[3],r),w:wh(i[4],r),d:wh(i[5],r),h:wh(i[6],r),m:wh(i[7],r),s:wh(i[8],r)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=G0e(xn(t.from),xn(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),s=new D1(t),bS(n)&&Ft(n,"_locale")&&(s._locale=n._locale),bS(n)&&Ft(n,"_isValid")&&(s._isValid=n._isValid),s}la.fn=D1.prototype;la.invalid=I0e;function wh(n,e){var t=n&&parseFloat(n.replace(",","."));return(isNaN(t)?0:t)*e}function EV(n,e){var t={};return t.months=e.month()-n.month()+(e.year()-n.year())*12,n.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+n.clone().add(t.months,"M"),t}function G0e(n,e){var t;return n.isValid()&&e.isValid()?(e=cD(e,n),n.isBefore(e)?t=EV(n,e):(t=EV(e,n),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function CG(n,e){return function(t,i){var r,s;return i!==null&&!isNaN(+i)&&(X7(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=t,t=i,i=s),r=la(t,i),SG(this,r,n),this}}function SG(n,e,t,i){var r=e._milliseconds,s=GP(e._days),o=GP(e._months);n.isValid()&&(i=i??!0,o&&oG(n,dw(n,"Month")+o*t),s&&iG(n,"Date",dw(n,"Date")+s*t),r&&n._d.setTime(n._d.valueOf()+r*t),i&&he.updateOffset(n,s||o))}var Y0e=CG(1,"add"),K0e=CG(-1,"subtract");function _G(n){return typeof n=="string"||n instanceof String}function q0e(n){return na(n)||ry(n)||_G(n)||xc(n)||Z0e(n)||X0e(n)||n===null||n===void 0}function X0e(n){var e=$d(n)&&!Uk(n),t=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,s,o=i.length;for(r=0;r<o;r+=1)s=i[r],t=t||Ft(n,s);return e&&t}function Z0e(n){var e=ta(n),t=!1;return e&&(t=n.filter(function(i){return!xc(i)&&_G(n)}).length===0),e&&t}function Q0e(n){var e=$d(n)&&!Uk(n),t=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,s;for(r=0;r<i.length;r+=1)s=i[r],t=t||Ft(n,s);return e&&t}function J0e(n,e){var t=n.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function eCe(n,e){arguments.length===1&&(arguments[0]?q0e(arguments[0])?(n=arguments[0],e=void 0):Q0e(arguments[0])&&(e=arguments[0],n=void 0):(n=void 0,e=void 0));var t=n||xn(),i=cD(t,this).startOf("day"),r=he.calendarFormat(this,i)||"sameElse",s=e&&(Cl(e[r])?e[r].call(this,t):e[r]);return this.format(s||this.localeData().calendar(r,this,xn(t)))}function tCe(){return new sy(this)}function nCe(n,e){var t=na(n)?n:xn(n);return this.isValid()&&t.isValid()?(e=po(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function iCe(n,e){var t=na(n)?n:xn(n);return this.isValid()&&t.isValid()?(e=po(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function rCe(n,e,t,i){var r=na(n)?n:xn(n),s=na(e)?e:xn(e);return this.isValid()&&r.isValid()&&s.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(r,t):!this.isBefore(r,t))&&(i[1]===")"?this.isBefore(s,t):!this.isAfter(s,t))):!1}function sCe(n,e){var t=na(n)?n:xn(n),i;return this.isValid()&&t.isValid()?(e=po(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(i=t.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function oCe(n,e){return this.isSame(n,e)||this.isAfter(n,e)}function aCe(n,e){return this.isSame(n,e)||this.isBefore(n,e)}function lCe(n,e,t){var i,r,s;if(!this.isValid())return NaN;if(i=cD(n,this),!i.isValid())return NaN;switch(r=(i.utcOffset()-this.utcOffset())*6e4,e=po(e),e){case"year":s=wS(this,i)/12;break;case"month":s=wS(this,i);break;case"quarter":s=wS(this,i)/3;break;case"second":s=(this-i)/1e3;break;case"minute":s=(this-i)/6e4;break;case"hour":s=(this-i)/36e5;break;case"day":s=(this-i-r)/864e5;break;case"week":s=(this-i-r)/6048e5;break;default:s=this-i}return t?s:qs(s)}function wS(n,e){if(n.date()<e.date())return-wS(e,n);var t=(e.year()-n.year())*12+(e.month()-n.month()),i=n.clone().add(t,"months"),r,s;return e-i<0?(r=n.clone().add(t-1,"months"),s=(e-i)/(i-r)):(r=n.clone().add(t+1,"months"),s=(e-i)/(r-i)),-(t+s)||0}he.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";he.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function cCe(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function uCe(n){if(!this.isValid())return null;var e=n!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?vS(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Cl(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",vS(t,"Z")):vS(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function hCe(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var n="moment",e="",t,i,r,s;return this.isLocal()||(n=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+n+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",s=e+'[")]',this.format(t+i+r+s)}function dCe(n){n||(n=this.isUtc()?he.defaultFormatUtc:he.defaultFormat);var e=vS(this,n);return this.localeData().postformat(e)}function fCe(n,e){return this.isValid()&&(na(n)&&n.isValid()||xn(n).isValid())?la({to:this,from:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function gCe(n){return this.from(xn(),n)}function pCe(n,e){return this.isValid()&&(na(n)&&n.isValid()||xn(n).isValid())?la({from:this,to:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function mCe(n){return this.to(xn(),n)}function RG(n){var e;return n===void 0?this._locale._abbr:(e=$c(n),e!=null&&(this._locale=e),this)}var EG=go("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return n===void 0?this.localeData():this.locale(n)});function xG(){return this._locale}var B_=1e3,rp=60*B_,V_=60*rp,TG=(365*400+97)*24*V_;function sp(n,e){return(n%e+e)%e}function MG(n,e,t){return n<100&&n>=0?new Date(n+400,e,t)-TG:new Date(n,e,t).valueOf()}function AG(n,e,t){return n<100&&n>=0?Date.UTC(n+400,e,t)-TG:Date.UTC(n,e,t)}function vCe(n){var e,t;if(n=po(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?AG:MG,n){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=sp(e+(this._isUTC?0:this.utcOffset()*rp),V_);break;case"minute":e=this._d.valueOf(),e-=sp(e,rp);break;case"second":e=this._d.valueOf(),e-=sp(e,B_);break}return this._d.setTime(e),he.updateOffset(this,!0),this}function bCe(n){var e,t;if(n=po(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?AG:MG,n){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=V_-sp(e+(this._isUTC?0:this.utcOffset()*rp),V_)-1;break;case"minute":e=this._d.valueOf(),e+=rp-sp(e,rp)-1;break;case"second":e=this._d.valueOf(),e+=B_-sp(e,B_)-1;break}return this._d.setTime(e),he.updateOffset(this,!0),this}function wCe(){return this._d.valueOf()-(this._offset||0)*6e4}function yCe(){return Math.floor(this.valueOf()/1e3)}function CCe(){return new Date(this.valueOf())}function SCe(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function _Ce(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function RCe(){return this.isValid()?this.toISOString():null}function ECe(){return Gk(this)}function xCe(){return Eu({},ut(this))}function TCe(){return ut(this).overflow}function MCe(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}je("N",0,0,"eraAbbr");je("NN",0,0,"eraAbbr");je("NNN",0,0,"eraAbbr");je("NNNN",0,0,"eraName");je("NNNNN",0,0,"eraNarrow");je("y",["y",1],"yo","eraYear");je("y",["yy",2],0,"eraYear");je("y",["yyy",3],0,"eraYear");je("y",["yyyy",4],0,"eraYear");De("N",uD);De("NN",uD);De("NNN",uD);De("NNNN",FCe);De("NNNNN",BCe);ln(["N","NN","NNN","NNNN","NNNNN"],function(n,e,t,i){var r=t._locale.erasParse(n,i,t._strict);r?ut(t).era=r:ut(t).invalidEra=n});De("y",Yp);De("yy",Yp);De("yyy",Yp);De("yyyy",Yp);De("yo",VCe);ln(["y","yy","yyy","yyyy"],lr);ln(["yo"],function(n,e,t,i){var r;t._locale._eraYearOrdinalRegex&&(r=n.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[lr]=t._locale.eraYearOrdinalParse(n,r):e[lr]=parseInt(n,10)});function ACe(n,e){var t,i,r,s=this._eras||$c("en")._eras;for(t=0,i=s.length;t<i;++t){switch(typeof s[t].since){case"string":r=he(s[t].since).startOf("day"),s[t].since=r.valueOf();break}switch(typeof s[t].until){case"undefined":s[t].until=1/0;break;case"string":r=he(s[t].until).startOf("day").valueOf(),s[t].until=r.valueOf();break}}return s}function PCe(n,e,t){var i,r,s=this.eras(),o,a,l;for(n=n.toUpperCase(),i=0,r=s.length;i<r;++i)if(o=s[i].name.toUpperCase(),a=s[i].abbr.toUpperCase(),l=s[i].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(a===n)return s[i];break;case"NNNN":if(o===n)return s[i];break;case"NNNNN":if(l===n)return s[i];break}else if([o,a,l].indexOf(n)>=0)return s[i]}function ICe(n,e){var t=n.since<=n.until?1:-1;return e===void 0?he(n.since).year():he(n.since).year()+(e-n.offset)*t}function OCe(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].name;return""}function kCe(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].narrow;return""}function DCe(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].abbr;return""}function NCe(){var n,e,t,i,r=this.localeData().eras();for(n=0,e=r.length;n<e;++n)if(t=r[n].since<=r[n].until?1:-1,i=this.clone().startOf("day").valueOf(),r[n].since<=i&&i<=r[n].until||r[n].until<=i&&i<=r[n].since)return(this.year()-he(r[n].since).year())*t+r[n].offset;return this.year()}function LCe(n){return Ft(this,"_erasNameRegex")||hD.call(this),n?this._erasNameRegex:this._erasRegex}function HCe(n){return Ft(this,"_erasAbbrRegex")||hD.call(this),n?this._erasAbbrRegex:this._erasRegex}function $Ce(n){return Ft(this,"_erasNarrowRegex")||hD.call(this),n?this._erasNarrowRegex:this._erasRegex}function uD(n,e){return e.erasAbbrRegex(n)}function FCe(n,e){return e.erasNameRegex(n)}function BCe(n,e){return e.erasNarrowRegex(n)}function VCe(n,e){return e._eraYearOrdinalRegex||Yp}function hD(){var n=[],e=[],t=[],i=[],r,s,o,a,l,c=this.eras();for(r=0,s=c.length;r<s;++r)o=yc(c[r].name),a=yc(c[r].abbr),l=yc(c[r].narrow),e.push(o),n.push(a),t.push(l),i.push(o),i.push(a),i.push(l);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}je(0,["gg",2],0,function(){return this.weekYear()%100});je(0,["GG",2],0,function(){return this.isoWeekYear()%100});function N1(n,e){je(0,[n,n.length],0,e)}N1("gggg","weekYear");N1("ggggg","weekYear");N1("GGGG","isoWeekYear");N1("GGGGG","isoWeekYear");De("G",P1);De("g",P1);De("GG",Tn,Ts);De("gg",Tn,Ts);De("GGGG",Qk,Zk);De("gggg",Qk,Zk);De("GGGGG",A1,T1);De("ggggg",A1,T1);ay(["gggg","ggggg","GGGG","GGGGG"],function(n,e,t,i){e[i.substr(0,2)]=xt(n)});ay(["gg","GG"],function(n,e,t,i){e[i]=he.parseTwoDigitYear(n)});function WCe(n){return PG.call(this,n,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function jCe(n){return PG.call(this,n,this.isoWeek(),this.isoWeekday(),1,4)}function zCe(){return Cc(this.year(),1,4)}function UCe(){return Cc(this.isoWeekYear(),1,4)}function GCe(){var n=this.localeData()._week;return Cc(this.year(),n.dow,n.doy)}function YCe(){var n=this.localeData()._week;return Cc(this.weekYear(),n.dow,n.doy)}function PG(n,e,t,i,r){var s;return n==null?gw(this,i,r).year:(s=Cc(n,i,r),e>s&&(e=s),KCe.call(this,n,e,t,i,r))}function KCe(n,e,t,i,r){var s=cG(n,e,t,i,r),o=fw(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}je("Q",0,"Qo","quarter");De("Q",Q7);ln("Q",function(n,e){e[hc]=(xt(n)-1)*3});function qCe(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)}je("D",["DD",2],"Do","date");De("D",Tn,Kp);De("DD",Tn,Ts);De("Do",function(n,e){return n?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});ln(["D","DD"],ja);ln("Do",function(n,e){e[ja]=xt(n.match(Tn)[0])});var IG=qp("Date",!0);je("DDD",["DDDD",3],"DDDo","dayOfYear");De("DDD",M1);De("DDDD",J7);ln(["DDD","DDDD"],function(n,e,t){t._dayOfYear=xt(n)});function XCe(n){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return n==null?e:this.add(n-e,"d")}je("m",["mm",2],0,"minute");De("m",Tn,Jk);De("mm",Tn,Ts);ln(["m","mm"],Ko);var ZCe=qp("Minutes",!1);je("s",["ss",2],0,"second");De("s",Tn,Jk);De("ss",Tn,Ts);ln(["s","ss"],dc);var QCe=qp("Seconds",!1);je("S",0,0,function(){return~~(this.millisecond()/100)});je(0,["SS",2],0,function(){return~~(this.millisecond()/10)});je(0,["SSS",3],0,"millisecond");je(0,["SSSS",4],0,function(){return this.millisecond()*10});je(0,["SSSSS",5],0,function(){return this.millisecond()*100});je(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});je(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});je(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});je(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});De("S",M1,Q7);De("SS",M1,Ts);De("SSS",M1,J7);var xu,OG;for(xu="SSSS";xu.length<=9;xu+="S")De(xu,Yp);function JCe(n,e){e[yd]=xt(("0."+n)*1e3)}for(xu="S";xu.length<=9;xu+="S")ln(xu,JCe);OG=qp("Milliseconds",!1);je("z",0,0,"zoneAbbr");je("zz",0,0,"zoneName");function eSe(){return this._isUTC?"UTC":""}function tSe(){return this._isUTC?"Coordinated Universal Time":""}var fe=sy.prototype;fe.add=Y0e;fe.calendar=eCe;fe.clone=tCe;fe.diff=lCe;fe.endOf=bCe;fe.format=dCe;fe.from=fCe;fe.fromNow=gCe;fe.to=pCe;fe.toNow=mCe;fe.get=hye;fe.invalidAt=TCe;fe.isAfter=nCe;fe.isBefore=iCe;fe.isBetween=rCe;fe.isSame=sCe;fe.isSameOrAfter=oCe;fe.isSameOrBefore=aCe;fe.isValid=ECe;fe.lang=EG;fe.locale=RG;fe.localeData=xG;fe.max=E0e;fe.min=R0e;fe.parsingFlags=xCe;fe.set=dye;fe.startOf=vCe;fe.subtract=K0e;fe.toArray=SCe;fe.toObject=_Ce;fe.toDate=CCe;fe.toISOString=uCe;fe.inspect=hCe;typeof Symbol<"u"&&Symbol.for!=null&&(fe[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});fe.toJSON=RCe;fe.toString=cCe;fe.unix=yCe;fe.valueOf=wCe;fe.creationData=MCe;fe.eraName=OCe;fe.eraNarrow=kCe;fe.eraAbbr=DCe;fe.eraYear=NCe;fe.year=nG;fe.isLeapYear=uye;fe.weekYear=WCe;fe.isoWeekYear=jCe;fe.quarter=fe.quarters=qCe;fe.month=aG;fe.daysInMonth=Cye;fe.week=fe.weeks=Aye;fe.isoWeek=fe.isoWeeks=Pye;fe.weeksInYear=GCe;fe.weeksInWeekYear=YCe;fe.isoWeeksInYear=zCe;fe.isoWeeksInISOWeekYear=UCe;fe.date=IG;fe.day=fe.days=jye;fe.weekday=zye;fe.isoWeekday=Uye;fe.dayOfYear=XCe;fe.hour=fe.hours=Qye;fe.minute=fe.minutes=ZCe;fe.second=fe.seconds=QCe;fe.millisecond=fe.milliseconds=OG;fe.utcOffset=D0e;fe.utc=L0e;fe.local=H0e;fe.parseZone=$0e;fe.hasAlignedHourOffset=F0e;fe.isDST=B0e;fe.isLocal=W0e;fe.isUtcOffset=j0e;fe.isUtc=yG;fe.isUTC=yG;fe.zoneAbbr=eSe;fe.zoneName=tSe;fe.dates=go("dates accessor is deprecated. Use date instead.",IG);fe.months=go("months accessor is deprecated. Use month instead",aG);fe.years=go("years accessor is deprecated. Use year instead",nG);fe.zone=go("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",N0e);fe.isDSTShifted=go("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",V0e);function nSe(n){return xn(n*1e3)}function iSe(){return xn.apply(null,arguments).parseZone()}function kG(n){return n}var Bt=Kk.prototype;Bt.calendar=Wwe;Bt.longDateFormat=Gwe;Bt.invalidDate=Kwe;Bt.ordinal=Zwe;Bt.preparse=kG;Bt.postformat=kG;Bt.relativeTime=Jwe;Bt.pastFuture=eye;Bt.set=Bwe;Bt.eras=ACe;Bt.erasParse=PCe;Bt.erasConvertYear=ICe;Bt.erasAbbrRegex=HCe;Bt.erasNameRegex=LCe;Bt.erasNarrowRegex=$Ce;Bt.months=vye;Bt.monthsShort=bye;Bt.monthsParse=yye;Bt.monthsRegex=_ye;Bt.monthsShortRegex=Sye;Bt.week=Eye;Bt.firstDayOfYear=Mye;Bt.firstDayOfWeek=Tye;Bt.weekdays=$ye;Bt.weekdaysMin=Bye;Bt.weekdaysShort=Fye;Bt.weekdaysParse=Wye;Bt.weekdaysRegex=Gye;Bt.weekdaysShortRegex=Yye;Bt.weekdaysMinRegex=Kye;Bt.isPM=Xye;Bt.meridiem=Jye;function W_(n,e,t,i){var r=$c(),s=yl().set(i,e);return r[t](s,n)}function DG(n,e,t){if(xc(n)&&(e=n,n=void 0),n=n||"",e!=null)return W_(n,e,t,"month");var i,r=[];for(i=0;i<12;i++)r[i]=W_(n,i,t,"month");return r}function dD(n,e,t,i){typeof n=="boolean"?(xc(e)&&(t=e,e=void 0),e=e||""):(e=n,t=e,n=!1,xc(e)&&(t=e,e=void 0),e=e||"");var r=$c(),s=n?r._week.dow:0,o,a=[];if(t!=null)return W_(e,(t+s)%7,i,"day");for(o=0;o<7;o++)a[o]=W_(e,(o+s)%7,i,"day");return a}function rSe(n,e){return DG(n,e,"months")}function sSe(n,e){return DG(n,e,"monthsShort")}function oSe(n,e,t){return dD(n,e,t,"weekdays")}function aSe(n,e,t){return dD(n,e,t,"weekdaysShort")}function lSe(n,e,t){return dD(n,e,t,"weekdaysMin")}Du("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var e=n%10,t=xt(n%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return n+t}});he.lang=go("moment.lang is deprecated. Use moment.locale instead.",Du);he.langData=go("moment.langData is deprecated. Use moment.localeData instead.",$c);var Tl=Math.abs;function cSe(){var n=this._data;return this._milliseconds=Tl(this._milliseconds),this._days=Tl(this._days),this._months=Tl(this._months),n.milliseconds=Tl(n.milliseconds),n.seconds=Tl(n.seconds),n.minutes=Tl(n.minutes),n.hours=Tl(n.hours),n.months=Tl(n.months),n.years=Tl(n.years),this}function NG(n,e,t,i){var r=la(e,t);return n._milliseconds+=i*r._milliseconds,n._days+=i*r._days,n._months+=i*r._months,n._bubble()}function uSe(n,e){return NG(this,n,e,1)}function hSe(n,e){return NG(this,n,e,-1)}function xV(n){return n<0?Math.floor(n):Math.ceil(n)}function dSe(){var n=this._milliseconds,e=this._days,t=this._months,i=this._data,r,s,o,a,l;return n>=0&&e>=0&&t>=0||n<=0&&e<=0&&t<=0||(n+=xV(KP(t)+e)*864e5,e=0,t=0),i.milliseconds=n%1e3,r=qs(n/1e3),i.seconds=r%60,s=qs(r/60),i.minutes=s%60,o=qs(s/60),i.hours=o%24,e+=qs(o/24),l=qs(LG(e)),t+=l,e-=xV(KP(l)),a=qs(t/12),t%=12,i.days=e,i.months=t,i.years=a,this}function LG(n){return n*4800/146097}function KP(n){return n*146097/4800}function fSe(n){if(!this.isValid())return NaN;var e,t,i=this._milliseconds;if(n=po(n),n==="month"||n==="quarter"||n==="year")switch(e=this._days+i/864e5,t=this._months+LG(e),n){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(KP(this._months)),n){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+n)}}function Fc(n){return function(){return this.as(n)}}var HG=Fc("ms"),gSe=Fc("s"),pSe=Fc("m"),mSe=Fc("h"),vSe=Fc("d"),bSe=Fc("w"),wSe=Fc("M"),ySe=Fc("Q"),CSe=Fc("y"),SSe=HG;function _Se(){return la(this)}function RSe(n){return n=po(n),this.isValid()?this[n+"s"]():NaN}function Ef(n){return function(){return this.isValid()?this._data[n]:NaN}}var ESe=Ef("milliseconds"),xSe=Ef("seconds"),TSe=Ef("minutes"),MSe=Ef("hours"),ASe=Ef("days"),PSe=Ef("months"),ISe=Ef("years");function OSe(){return qs(this.days()/7)}var ql=Math.round,Gg={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function kSe(n,e,t,i,r){return r.relativeTime(e||1,!!t,n,i)}function DSe(n,e,t,i){var r=la(n).abs(),s=ql(r.as("s")),o=ql(r.as("m")),a=ql(r.as("h")),l=ql(r.as("d")),c=ql(r.as("M")),u=ql(r.as("w")),h=ql(r.as("y")),d=s<=t.ss&&["s",s]||s<t.s&&["ss",s]||o<=1&&["m"]||o<t.m&&["mm",o]||a<=1&&["h"]||a<t.h&&["hh",a]||l<=1&&["d"]||l<t.d&&["dd",l];return t.w!=null&&(d=d||u<=1&&["w"]||u<t.w&&["ww",u]),d=d||c<=1&&["M"]||c<t.M&&["MM",c]||h<=1&&["y"]||["yy",h],d[2]=e,d[3]=+n>0,d[4]=i,kSe.apply(null,d)}function NSe(n){return n===void 0?ql:typeof n=="function"?(ql=n,!0):!1}function LSe(n,e){return Gg[n]===void 0?!1:e===void 0?Gg[n]:(Gg[n]=e,n==="s"&&(Gg.ss=e-1),!0)}function HSe(n,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,i=Gg,r,s;return typeof n=="object"&&(e=n,n=!1),typeof n=="boolean"&&(t=n),typeof e=="object"&&(i=Object.assign({},Gg,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),r=this.localeData(),s=DSe(this,!t,i,r),t&&(s=r.pastFuture(+this,s)),r.postformat(s)}var sT=Math.abs;function Ff(n){return(n>0)-(n<0)||+n}function L1(){if(!this.isValid())return this.localeData().invalidDate();var n=sT(this._milliseconds)/1e3,e=sT(this._days),t=sT(this._months),i,r,s,o,a=this.asSeconds(),l,c,u,h;return a?(i=qs(n/60),r=qs(i/60),n%=60,i%=60,s=qs(t/12),t%=12,o=n?n.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",c=Ff(this._months)!==Ff(a)?"-":"",u=Ff(this._days)!==Ff(a)?"-":"",h=Ff(this._milliseconds)!==Ff(a)?"-":"",l+"P"+(s?c+s+"Y":"")+(t?c+t+"M":"")+(e?u+e+"D":"")+(r||i||n?"T":"")+(r?h+r+"H":"")+(i?h+i+"M":"")+(n?h+o+"S":"")):"P0D"}var It=D1.prototype;It.isValid=P0e;It.abs=cSe;It.add=uSe;It.subtract=hSe;It.as=fSe;It.asMilliseconds=HG;It.asSeconds=gSe;It.asMinutes=pSe;It.asHours=mSe;It.asDays=vSe;It.asWeeks=bSe;It.asMonths=wSe;It.asQuarters=ySe;It.asYears=CSe;It.valueOf=SSe;It._bubble=dSe;It.clone=_Se;It.get=RSe;It.milliseconds=ESe;It.seconds=xSe;It.minutes=TSe;It.hours=MSe;It.days=ASe;It.weeks=OSe;It.months=PSe;It.years=ISe;It.humanize=HSe;It.toISOString=L1;It.toString=L1;It.toJSON=L1;It.locale=RG;It.localeData=xG;It.toIsoString=go("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",L1);It.lang=EG;je("X",0,0,"unix");je("x",0,0,"valueOf");De("x",P1);De("X",rye);ln("X",function(n,e,t){t._d=new Date(parseFloat(n)*1e3)});ln("x",function(n,e,t){t._d=new Date(xt(n))});//! moment.js
he.version="2.30.1";$we(xn);he.fn=fe;he.min=x0e;he.max=T0e;he.now=M0e;he.utc=yl;he.unix=nSe;he.months=rSe;he.isDate=ry;he.locale=Du;he.invalid=x1;he.duration=la;he.isMoment=na;he.weekdays=oSe;he.parseZone=iSe;he.localeData=$c;he.isDuration=bS;he.monthsShort=sSe;he.weekdaysMin=lSe;he.defineLocale=rD;he.updateLocale=i0e;he.locales=r0e;he.weekdaysShort=aSe;he.normalizeUnits=po;he.relativeTimeRounding=NSe;he.relativeTimeThreshold=LSe;he.calendarFormat=J0e;he.prototype=fe;he.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function $G(n){const e=n.length;let t=0;for(;t<e;)n[t]=[n[t]],t+=1}function qP(n,e){const t=e.length;let i=0;for(;i<t;)n.push(e[i]),i+=1}function Cb(n){const e=[];if(!n||n.length===0||!n[0]||n[0].length===0)return e;const t=n.length,i=n[0].length;for(let r=0;r<t;r++)for(let s=0;s<i;s++)e[s]||(e[s]=[]),e[s][r]=n[r][s];return e}function ci(n,e,t,i){let r=-1,s=n,o=t;Array.isArray(n)||(s=Array.from(n));const a=s.length;for(i&&a&&(r+=1,o=s[r]),r+=1;r<a;)o=e(o,s[r],r,s),r+=1;return o}function Tc(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const r=i.length,s=[];let o=-1;for(;t<r;){const a=i[t];e(a,t,i)&&(o+=1,s[o]=a),t+=1}return s}function vt(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const r=i.length,s=[];let o=-1;for(;t<r;){const a=i[t];o+=1,s[o]=e(a,t,i),t+=1}return s}function j(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const r=i.length;for(;t<r&&e(i[t],t,i)!==!1;)t+=1;return n}function FG(n){return ci(n,(e,t)=>e+t,0)}function $Se(n){return ci(n,(e,t)=>e>t?e:t,Array.isArray(n)?n[0]:void 0)}function FSe(n){return ci(n,(e,t)=>e<t?e:t,Array.isArray(n)?n[0]:void 0)}function BSe(n){return n.length?FG(n)/n.length:0}function BG(n){return ci(n,(e,t)=>e.concat(Array.isArray(t)?BG(t):t),[])}function fD(n){const e=[];return j(n,t=>{e.indexOf(t)===-1&&e.push(t)}),e}function XP(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...r]=[...e];let s=i;return j(r,o=>{s=s.filter(a=>!o.includes(a))}),s}function VSe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...r]=[...e];let s=i;return j(r,o=>{s=s.filter(a=>o.includes(a))}),s}function WSe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...r]=[...e],s=new Set(i);return j(r,o=>{j(o,a=>{s.has(a)||s.add(a)})}),Array.from(s)}function ZP(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";return n.split(e)}const jSe=Object.freeze(Object.defineProperty({__proto__:null,arrayAvg:BSe,arrayEach:j,arrayFilter:Tc,arrayFlatten:BG,arrayMap:vt,arrayMax:$Se,arrayMin:FSe,arrayReduce:ci,arraySum:FG,arrayUnique:fD,extendArray:qP,getDifferenceOfArrays:XP,getIntersectionOfArrays:VSe,getUnionOfArrays:WSe,pivot:Cb,stringToArray:ZP,to2dArray:$G},Symbol.toStringTag,{value:"Module"}));function Kt(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return ci(n,(s,o,a)=>{const l=o.replace(/\r?\n\s*/g,""),c=t[a]?t[a]:"";return s+l+c},"").trim()}function jn(n){let e;switch(typeof n){case"string":case"number":e=`${n}`;break;case"object":e=n===null?"":n.toString();break;case"undefined":e="";break;default:e=n.toString();break}return e}function ke(n){return typeof n<"u"}function dn(n){return typeof n>"u"}function zn(n){return n===null||n===""||dn(n)}function VG(n){return Object.prototype.toString.call(n)==="[object RegExp]"}const Vv="length",Sb=n=>parseInt(n,16),TV=n=>parseInt(n,10),j_=(n,e,t)=>n.substr(e,t),_b=n=>n.codePointAt(0)-65,QP=n=>`${n}`.replace(/\-/g,""),zSe=n=>Sb(j_(QP(n),Sb("12"),_b("F")))/(Sb(j_(QP(n),_b("B"),~~![][Vv]))||9),USe=()=>typeof location<"u"&&/^([a-z0-9\-]+\.)?\x68\x61\x6E\x64\x73\x6F\x6E\x74\x61\x62\x6C\x65\x2E\x63\x6F\x6D$/i.test(location.host);let MV=!1;const AV={invalid:()=>Kt`
    The license key for Handsontable is invalid.\x20
    If you need any help, contact us at support@handsontable.com.`,expired:n=>{let{keyValidityDate:e,hotVersion:t}=n;return Kt`
    The license key for Handsontable expired on ${e}, and is not valid for the installed\x20
    version ${t}. Renew your license key at handsontable.com or downgrade to a version released prior\x20
    to ${e}. If you need any help, contact us at sales@handsontable.com.`},missing:()=>Kt`
    The license key for Handsontable is missing. Use your purchased key to activate the product.\x20
    Alternatively, you can activate Handsontable to use for non-commercial purposes by\x20
    passing the key: 'non-commercial-and-evaluation'. If you need any help, contact\x20
    us at support@handsontable.com.`,non_commercial:()=>""},PV={invalid:()=>Kt`
    The license key for Handsontable is invalid.\x20
    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> on how to\x20
    install it properly or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.`,expired:n=>{let{keyValidityDate:e,hotVersion:t}=n;return Kt`
    The license key for Handsontable expired on ${e}, and is not valid for the installed\x20
    version ${t}. <a href="https://handsontable.com/pricing" target="_blank">Renew</a> your\x20
    license key or downgrade to a version released prior to ${e}. If you need any\x20
    help, contact us at <a href="mailto:sales@handsontable.com">sales@handsontable.com</a>.`},missing:()=>Kt`
    The license key for Handsontable is missing. Use your purchased key to activate the product.\x20
    Alternatively, you can activate Handsontable to use for non-commercial purposes by\x20
    passing the key: 'non-commercial-and-evaluation'.\x20
    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> about it in\x20
    the documentation or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.`,non_commercial:()=>""};function WG(n,e){const t=!zn(n),i=typeof n=="string"&&n.toLowerCase()==="non-commercial-and-evaluation",r="14.6.1";let s,o="invalid",a="invalid";n=QP(n||"");const l=GSe(n);if(t||i||l)if(l){const c=he("17/10/2024","DD/MM/YYYY"),u=Math.floor(c.toDate().getTime()/864e5),h=zSe(n);s=he((h+1)*864e5,"x").format("MMMM DD, YYYY"),u>h?(o="expired",a="expired"):(o="valid",a="valid")}else i?(o="non_commercial",a="valid"):(o="invalid",a="invalid");else o="missing",a="missing";if(USe()&&(o="valid",a="valid"),!MV&&o!=="valid"&&(AV[o]({keyValidityDate:s,hotVersion:r})&&console[o==="non_commercial"?"info":"warn"](AV[o]({keyValidityDate:s,hotVersion:r})),MV=!0),a!=="valid"&&e.parentNode&&PV[a]({keyValidityDate:s,hotVersion:r})){const u=document.createElement("div");u.className="hot-display-license-info",u.innerHTML=PV[a]({keyValidityDate:s,hotVersion:r}),e.parentNode.insertBefore(u,e.nextSibling)}}function GSe(n){let e=[][Vv],t=e;if(n[Vv]!==_b("Z"))return!1;for(let i="",r="B<H4P+".split(""),s=_b(r.shift());s;s=_b(r.shift()||"A"))--s<""[Vv]?t=t|(TV(`${TV(Sb(i)+(Sb(j_(n,Math.abs(s),2))+[]).padStart(2,"0"))}`)%97||2)>>1:i=j_(n,s,s?r[Vv]===1?9:8:6);return t===e}const YSe=Object.freeze(Object.defineProperty({__proto__:null,_injectProductInfo:WG,isDefined:ke,isEmpty:zn,isRegExp:VG,isUndefined:dn,stringify:jn},Symbol.toStringTag,{value:"Module"}));function fr(n){return n[0].toUpperCase()+n.substr(1)}function KSe(){const n=[];for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];let r=t.length;for(;r;){r-=1;const s=jn(t[r]).toLowerCase();n.indexOf(s)===-1&&n.push(s)}return n.length===1}function gD(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+n()+n()}function pD(n){return/^([0-9][0-9]?%$)|(^100%$)/.test(n)}function mD(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return`${n}`.replace(/(?:\\)?\[([^[\]]+)]/g,(t,i)=>t.charAt(0)==="\\"?t.substr(1,t.length-1):e[i]===void 0?"":e[i])}function JP(n){return H1(`${n}`,{ALLOWED_TAGS:[]})}function H1(n,e){return Hwe.sanitize(n,e)}const qSe=Object.freeze(Object.defineProperty({__proto__:null,equalsIgnoreCase:KSe,isPercentValue:pD,randomString:gD,sanitize:H1,stripTags:JP,substitute:mD,toUpperCaseFirst:fr},Symbol.toStringTag,{value:"Module"})),Xp=n=>["tabindex",n],XSe=()=>["role","treegrid"],Ka=()=>["role","presentation"],ZSe=()=>["role","gridcell"],QSe=()=>["role","rowheader"],jG=()=>["role","rowgroup"],JSe=()=>["role","columnheader"],eI=()=>["role","row"],e_e=()=>["role","menu"],t_e=()=>["role","menuitem"],n_e=()=>["role","menuitemcheckbox"],i_e=()=>["role","combobox"],zG=()=>["role","listbox"],r_e=()=>["role","option"],s_e=()=>["role","checkbox"],o_e=()=>["scope","col"],a_e=()=>["scope","row"],l_e=()=>["type","text"],z_=n=>["aria-label",n],xf=()=>["aria-hidden","true"],c_e=()=>["aria-disabled","true"],u_e=()=>["aria-multiselectable","true"],UG=n=>["aria-haspopup",n],GG=n=>["aria-rowcount",n],$1=n=>["aria-colcount",n],YG=n=>["aria-rowindex",n],vD=n=>["aria-colindex",n],no=n=>["aria-expanded",n],h_e=n=>["aria-sort",n],IV=()=>["aria-readonly","true"],OV=()=>["aria-invalid","true"],KG=n=>["aria-checked",n],bD=()=>["aria-selected","true"],d_e=()=>["aria-autocomplete","list"],f_e=n=>["aria-controls",n],g_e=n=>["aria-activedescendant",n],p_e=n=>["aria-live",n],m_e=n=>["aria-relevant",n],v_e=n=>["aria-setsize",n],b_e=n=>["aria-posinset",n];function qG(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,i=null,r=n;for(;r!==null;){if(t===e){i=r;break}r.host&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r=r.host:(t+=1,r=r.parentNode)}return i}function XG(n,e){const t=n.closest(".handsontable");return!!t&&(t.parentNode===e||t===e)}function ZG(n){return Object.getPrototypeOf(n.parent)&&n.frameElement}function tf(n){return ZG(n)&&n.parent}function w_e(n){return!!Object.getPrototypeOf(n.parent)}function Gu(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;const{ELEMENT_NODE:i,DOCUMENT_FRAGMENT_NODE:r}=Node;let s=n;for(;s!=null&&s!==t;){const{nodeType:o,nodeName:a}=s;if(o===i&&(e.includes(a)||e.includes(s)))return s;const{host:l}=s;l&&o===r?s=l:s=s.parentNode}return null}function Wv(n,e,t){const i=[];let r=n;for(;r&&(r=Gu(r,e,t),!(!r||t&&!t.contains(r)));)i.push(r),r.host&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r=r.host:r=r.parentNode;const s=i.length;return s?i[s-1]:null}function Nu(n,e){let t=n.parentNode,i=[];for(typeof e=="string"?n.defaultView?i=Array.prototype.slice.call(n.querySelectorAll(e),0):i=Array.prototype.slice.call(n.ownerDocument.querySelectorAll(e),0):i.push(e);t!==null;){if(i.indexOf(t)>-1)return!0;t=t.parentNode}return!1}function QG(n){let e=0,t=n;if(t.previousSibling)for(;t=t.previousSibling;)e+=1;return e}function ou(n,e,t){const i=t.parentElement.querySelector(`.ht_clone_${n}`);return i?i.contains(e):null}function JG(n){return!n||!n.length?[]:n.filter(e=>!!e)}function e9(n,e){if(!n||!n.length)return{regexFree:[],regexes:[]};const t=[],i=[];return i.push(...n.filter(r=>{const s=r instanceof RegExp;return s&&e&&t.push(r),!s})),{regexFree:i,regexes:t}}function Ue(n,e){return n.classList===void 0||typeof e!="string"||e===""?!1:n.classList.contains(e)}function ue(n,e){typeof e=="string"&&(e=e.split(" ")),e=JG(e),e.length>0&&n.classList.add(...e)}function Ze(n,e){typeof e=="string"?e=e.split(" "):e instanceof RegExp&&(e=[e]);let{regexFree:t,regexes:i}=e9(e,!0);t=JG(t),t.length>0&&n.classList.remove(...t),i.forEach(r=>{n.classList.forEach(s=>{r.test(s)&&n.classList.remove(s)})})}function ze(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;Array.isArray(e)||(e=[[e,t]]),e.forEach(i=>{Array.isArray(i)&&i[0]!==""&&n.setAttribute(...i)})}function Tf(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];typeof e=="string"?e=e.split(" "):e instanceof RegExp&&(e=[e]);const{regexFree:t,regexes:i}=e9(e,!0);t.forEach(r=>{r!==""&&n.removeAttribute(r)}),i.forEach(r=>{n.getAttributeNames().forEach(s=>{r.test(s)&&n.removeAttribute(s)})})}function wD(n){if(n.nodeType===3)n.parentNode.removeChild(n);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(n.nodeName)>-1){const e=n.childNodes;for(let t=e.length-1;t>=0;t--)wD(e[t])}}function ia(n){let e;for(;e=n.lastChild;)n.removeChild(e)}const t9=/(<(.*)>|&(.*);)/;function Mf(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;t9.test(e)?n.innerHTML=t?H1(e):e:Yu(n,e)}function Yu(n,e){const t=n.firstChild;t&&t.nodeType===3&&t.nextSibling===null?t.textContent=e:(ia(n),n.appendChild(n.ownerDocument.createTextNode(e)))}function nf(n){const e=n.ownerDocument.documentElement;let t=n;for(;t!==e;){if(t===null)return!1;if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE)if(t.host){if(t.host.impl)return nf(t.host.impl);if(t.host)return nf(t.host);throw new Error("Lost in Web Components world")}else return!1;else if(cl(t).display==="none")return!1;t=t.parentNode}return!0}function xi(n){const e=n.ownerDocument,t=e.defaultView,i=e.documentElement;let r=n,s,o,a;for(s=r.offsetLeft,o=r.offsetTop,a=r;(r=r.offsetParent)&&!(r===e.body||!("offsetLeft"in r));)s+=r.offsetLeft,o+=r.offsetTop,a=r;return a&&a.style.position==="fixed"&&(s+=t.pageXOffset||i.scrollLeft,o+=t.pageYOffset||i.scrollTop),{left:s,top:o}}function yD(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window).scrollY}function F1(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window).scrollX}function B1(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n===e?yD(e):n.scrollTop}function CD(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n===e?F1(e):n.scrollLeft}function mw(n){let e=n.ownerDocument,t=e?e.defaultView:void 0;e||(e=n.document?n.document:n,t=e.defaultView);const i=["auto","scroll"];let r=n.parentNode;for(;r&&r.style&&e.body!==r;){let{overflow:s,overflowX:o,overflowY:a}=r.style;if([s,o,a].includes("scroll"))return r;if({overflow:s,overflowX:o,overflowY:a}=t.getComputedStyle(r),i.includes(s)||i.includes(o)||i.includes(a)||r.clientHeight<=r.scrollHeight+1&&(i.includes(a)||i.includes(s))||r.clientWidth<=r.scrollWidth+1&&(i.includes(o)||i.includes(s)))return r;r=r.parentNode}return t}function n9(n){return n.scrollHeight-n.clientHeight}function i9(n){return n.scrollWidth-n.clientWidth}function rf(n){const e=n.ownerDocument,t=e.defaultView;let i=n.parentNode;for(;i&&i.style&&e.body!==i;){if(i.style.overflow!=="visible"&&i.style.overflow!=="")return i;const r=cl(i,t),s=["scroll","hidden","auto"],o=r.getPropertyValue("overflow"),a=r.getPropertyValue("overflow-y"),l=r.getPropertyValue("overflow-x");if(s.includes(o)||s.includes(a)||s.includes(l))return i;i=i.parentNode}return t}function Rp(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window;if(n){if(n===t)return e==="width"?`${t.innerWidth}px`:e==="height"?`${t.innerHeight}px`:void 0}else return;const i=n.style[e];if(i!==""&&i!==void 0)return i;const r=cl(n,t);if(r[e]!==""&&r[e]!==void 0)return r[e]}function y_e(n,e){const{selectorText:t}=e;let i=!1;return e.type===CSSRule.STYLE_RULE&&t&&(n.msMatchesSelector?i=n.msMatchesSelector(t):n.matches&&(i=n.matches(t))),i}function cl(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n.currentStyle||e.getComputedStyle(n)}function fn(n){return n.offsetWidth}function ni(n){return n.offsetHeight}function Cd(n){return n.clientHeight||n.innerHeight}function SD(n){return n.clientWidth||n.innerWidth}function C_e(n,e,t){n.addEventListener(e,t,!1)}function S_e(n,e,t){n.removeEventListener(e,t,!1)}function _D(n){return n.selectionStart?n.selectionStart:0}function r9(n){return n.selectionEnd?n.selectionEnd:0}function __e(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;const e=n.document;let t="";return n.getSelection?t=n.getSelection().toString():e.selection&&e.selection.type!=="Control"&&(t=e.selection.createRange().text),t}function tI(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;n.getSelection&&(n.getSelection().empty?n.getSelection().empty():n.getSelection().removeAllRanges&&n.getSelection().removeAllRanges())}function ly(n,e,t){if(t===void 0&&(t=e),n.setSelectionRange){n.focus();try{n.setSelectionRange(e,t)}catch{const r=n.parentNode,s=r.style.display;r.style.display="block",n.setSelectionRange(e,t),r.style.display=s}}}let oT;function R_e(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;const e=n.createElement("div");e.style.height="200px",e.style.width="100%";const t=n.createElement("div");t.style.boxSizing="content-box",t.style.height="150px",t.style.left="0px",t.style.overflow="hidden",t.style.position="absolute",t.style.top="0px",t.style.width="200px",t.style.visibility="hidden",t.appendChild(e),(n.body||n.documentElement).appendChild(t);const i=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return i===r&&(r=t.clientWidth),(n.body||n.documentElement).removeChild(t),i-r}function Ai(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return oT===void 0&&(oT=R_e(n)),oT}function s9(n){return n.offsetWidth!==n.clientWidth}function o9(n){return n.offsetHeight!==n.clientHeight}function V1(n,e,t){n.style.transform=`translate3d(${e},${t},0)`}function E_e(n){let e;return n.style.transform&&(e=n.style.transform)!==""?["transform",e]:-1}function cy(n){n.style.transform&&n.style.transform!==""&&(n.style.transform="")}function Rb(n){return n&&(["INPUT","SELECT","TEXTAREA"].indexOf(n.nodeName)>-1||n.contentEditable==="true")}function W1(n){return Rb(n)&&n.hasAttribute("data-hot-input")===!1}function x_e(n){const e=n.ownerDocument.activeElement;W1(e)||n.select()}function RD(n){return!n.parentNode}function a9(n,e){new IntersectionObserver((i,r)=>{i.forEach(s=>{s.isIntersecting&&n.offsetParent!==null&&(e(),r.unobserve(n))})},{root:n.ownerDocument.body}).observe(n)}function ED(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=n.ownerDocument,r=i.createRange(),s=i.defaultView.getSelection();ze(n,"contenteditable",!0),t&&ze(n,...xf()),e&&ue(n,"invisibleSelection"),r.selectNodeContents(n),s.removeAllRanges(),s.addRange(r)}function xD(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const t=n.ownerDocument.defaultView.getSelection();n.hasAttribute("aria-hidden")&&n.removeAttribute("aria-hidden"),t.removeAllRanges(),e&&Ze(n,"invisibleSelection"),n.removeAttribute("contenteditable")}function l9(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;ED(n,t),e(),xD(n,t)}const T_e=Object.freeze(Object.defineProperty({__proto__:null,HTML_CHARACTERS:t9,addClass:ue,addEvent:C_e,clearTextSelection:tI,closest:Gu,closestDown:Wv,empty:ia,fastInnerHTML:Mf,fastInnerText:Yu,getCaretPosition:_D,getComputedStyle:cl,getCssTransform:E_e,getFrameElement:ZG,getMaximumScrollLeft:i9,getMaximumScrollTop:n9,getParent:qG,getParentWindow:tf,getScrollLeft:CD,getScrollTop:B1,getScrollableElement:mw,getScrollbarWidth:Ai,getSelectionEndPosition:r9,getSelectionText:__e,getStyle:Rp,getTrimmingContainer:rf,getWindowScrollLeft:F1,getWindowScrollTop:yD,hasAccessToParentWindow:w_e,hasClass:Ue,hasHorizontalScrollbar:o9,hasVerticalScrollbar:s9,index:QG,innerHeight:Cd,innerWidth:SD,isChildOf:Nu,isDetached:RD,isInput:Rb,isOutsideInput:W1,isThisHotChild:XG,isVisible:nf,makeElementContentEditableAndSelectItsContent:ED,matchesCSSRules:y_e,observeVisibilityChangeOnce:a9,offset:xi,outerHeight:ni,outerWidth:fn,overlayContainsElement:ou,removeAttribute:Tf,removeClass:Ze,removeContentEditableFromElementAndDeselect:xD,removeEvent:S_e,removeTextNodes:wD,resetCssTransform:cy,runWithSelectedContendEditableElement:l9,selectElementIfAllowed:x_e,setAttribute:ze,setCaretPosition:ly,setOverlayPosition:V1},Symbol.toStringTag,{value:"Module"}));function cn(n){return typeof n=="function"}function c9(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=0;const i={lastCallThrottled:!0};let r=null;function s(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];const c=Date.now();let u=!1;i.lastCallThrottled=!0,t||(t=c,u=!0);const h=e-(c-t);return u?(i.lastCallThrottled=!1,n.apply(this,a)):(r&&clearTimeout(r),r=setTimeout(()=>{i.lastCallThrottled=!1,n.apply(this,a),t=0,r=void 0},h)),i}return s}function M_e(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10;const i=c9(n,e);let r=t;function s(){r=t}function o(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return r?(r-=1,n.apply(this,l)):i.apply(this,l)}return o.clearHits=s,o}function j1(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=null,i;function r(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return t&&clearTimeout(t),t=setTimeout(()=>{i=n.apply(this,o)},e),i}return r}function A_e(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...r]=e;return function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return ci(r,(c,u)=>u(c),i.apply(this,a))}}function TD(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return n.apply(this,t.concat(o))}}function u9(n){const e=n.length;function t(i){return function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const l=i.concat(o);let c;return l.length>=e?c=n.apply(this,l):c=t(l),c}}return t([])}function P_e(n){const e=n.length;function t(i){return function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const l=i.concat(o.reverse());let c;return l.length>=e?c=n.apply(this,l):c=t(l),c}}return t([])}function U_(n,e,t,i,r,s,o,a){return ke(a)?n.call(e,t,i,r,s,o,a):ke(o)?n.call(e,t,i,r,s,o):ke(s)?n.call(e,t,i,r,s):ke(r)?n.call(e,t,i,r):ke(i)?n.call(e,t,i):ke(t)?n.call(e,t):n.call(e)}const I_e=Object.freeze(Object.defineProperty({__proto__:null,curry:u9,curryRight:P_e,debounce:j1,fastCall:U_,isFunction:cn,partial:TD,pipe:A_e,throttle:c9,throttleAfterHits:M_e},Symbol.toStringTag,{value:"Module"}));var O_e=vi,kV=x7,k_e=Gi,DV=wf,D_e=E1,NV=O_e([].push),N_e=function(n){if(k_e(n))return n;if(kV(n)){for(var e=n.length,t=[],i=0;i<e;i++){var r=n[i];typeof r=="string"?NV(t,r):(typeof r=="number"||DV(r)==="Number"||DV(r)==="String")&&NV(t,D_e(r))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(kV(this))return l;for(var c=0;c<s;c++)if(t[c]===a)return l}}},L_e=Yi,h9=Gp,d9=R1,H_e=aa,uy=vi,f9=es,LV=Gi,HV=Pk,g9=jk,$_e=N_e,F_e=Ak,B_e=String,Lu=h9("JSON","stringify"),v0=uy(/./.exec),$V=uy("".charAt),V_e=uy("".charCodeAt),W_e=uy("".replace),j_e=uy(1 .toString),z_e=/[\uD800-\uDFFF]/g,FV=/^[\uD800-\uDBFF]$/,BV=/^[\uDC00-\uDFFF]$/,VV=!F_e||f9(function(){var n=h9("Symbol")("stringify detection");return Lu([n])!=="[null]"||Lu({a:n})!=="{}"||Lu(Object(n))!=="{}"}),WV=f9(function(){return Lu("\uDF06\uD834")!=='"\\udf06\\ud834"'||Lu("\uDEAD")!=='"\\udead"'}),U_e=function(n,e){var t=g9(arguments),i=$_e(e);if(!(!LV(i)&&(n===void 0||HV(n))))return t[1]=function(r,s){if(LV(i)&&(s=H_e(i,this,B_e(r),s)),!HV(s))return s},d9(Lu,null,t)},G_e=function(n,e,t){var i=$V(t,e-1),r=$V(t,e+1);return v0(FV,n)&&!v0(BV,r)||v0(BV,n)&&!v0(FV,i)?"\\u"+j_e(V_e(n,0),16):n};Lu&&L_e({target:"JSON",stat:!0,arity:3,forced:VV||WV},{stringify:function(e,t,i){var r=g9(arguments),s=d9(VV?U_e:Lu,null,r);return WV&&typeof s=="string"?W_e(s,z_e,G_e):s}});function Ep(n){let e;return Array.isArray(n)?e=n.length?new Array(n.length).fill(null):[]:(e={},ct(n,(t,i)=>{i!=="__children"&&(t&&typeof t=="object"&&!Array.isArray(t)?e[i]=Ep(t):Array.isArray(t)?t.length&&typeof t[0]=="object"&&!Array.isArray(t[0])?e[i]=[Ep(t[0])]:e[i]=[]:e[i]=null)})),e}function ca(n,e){return e.prototype.constructor=e,n.prototype=new e,n.prototype.constructor=n,n}function li(n,e,t){const i=Array.isArray(t);return ct(e,(r,s)=>{(i===!1||t.includes(s))&&(n[s]=r)}),n}function hy(n,e){ct(e,(t,i)=>{e[i]&&typeof e[i]=="object"?(n[i]||(Array.isArray(e[i])?n[i]=[]:Object.prototype.toString.call(e[i])==="[object Date]"?n[i]=e[i]:n[i]={}),hy(n[i],e[i])):n[i]=e[i]})}function gr(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n}function ra(n){const e={};return ct(n,(t,i)=>{e[i]=t}),e}function Xt(n){n.MIXINS||(n.MIXINS=[]);for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return j(t,r=>{n.MIXINS.push(r.MIXIN_NAME),ct(r,(s,o)=>{if(n.prototype[o]!==void 0)throw new Error(`Mixin conflict. Property '${o}' already exist and cannot be overwritten.`);if(typeof s=="function")n.prototype[o]=s;else{const a=function(u,h){const d=`_${u}`,f=g=>{let p=g;return(Array.isArray(p)||lt(p))&&(p=gr(p)),p};return function(){return this[d]===void 0&&(this[d]=f(h)),this[d]}},l=function(u){const h=`_${u}`;return function(d){this[h]=d}};Object.defineProperty(n.prototype,o,{get:a(o,s),set:l(o),configurable:!0})}})}),n}function z1(n,e){return JSON.stringify(n)===JSON.stringify(e)}function lt(n){return Object.prototype.toString.call(n)==="[object Object]"}function Sl(n,e,t,i){i.value=t,i.writable=i.writable!==!1,i.enumerable=i.enumerable!==!1,i.configurable=i.configurable!==!1,Object.defineProperty(n,e,i)}function ct(n,e){for(const t in n)if((!n.hasOwnProperty||n.hasOwnProperty&&Object.prototype.hasOwnProperty.call(n,t))&&e(n[t],t,n)===!1)break;return n}function p9(n,e){const t=e.split(".");let i=n;return ct(t,r=>{if(i=i[r],i===void 0)return i=void 0,!1}),i}function yS(n,e,t){const i=e.split(".");let r=n;i.forEach((s,o)=>{o!==i.length-1?(kn(r,s)||(r[s]={}),r=r[s]):r[s]=t})}function U1(n){if(!lt(n))return 0;const e=function(t){let i=0;return lt(t)?ct(t,(r,s)=>{s!=="__children"&&(i+=e(r))}):i+=1,i};return e(n)}function to(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"value";const t=`_${e}`,i={_touched:!1,[t]:n,isTouched(){return this._touched}};return Object.defineProperty(i,e,{get(){return this[t]},set(r){this._touched=!0,this[t]=r},enumerable:!0,configurable:!0}),i}function kn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const Y_e=Object.freeze(Object.defineProperty({__proto__:null,clone:ra,createObjectPropListener:to,deepClone:gr,deepExtend:hy,deepObjectSize:U1,defineGetter:Sl,duckSchema:Ep,extend:li,getProperty:p9,hasOwnProperty:kn,inherit:ca,isObject:lt,isObjectEqual:z1,mixin:Xt,objectEach:ct,setProperty:yS},Symbol.toStringTag,{value:"Module"}));function G1(n){return window.requestAnimationFrame(n)}function vw(n){window.cancelAnimationFrame(n)}function MD(){return"ontouchstart"in window}function m9(){return typeof window<"u"}let Bf;function v9(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Bf||(typeof Intl=="object"?Bf=new Intl.Collator(n,e).compare:typeof String.prototype.localeCompare=="function"?Bf=(t,i)=>`${t}`.localeCompare(i):Bf=(t,i)=>t===i?0:t>i?-1:1,Bf)}const K_e=Object.freeze(Object.defineProperty({__proto__:null,cancelAnimationFrame:vw,getComparisonFunction:v9,isCSR:m9,isTouchSupported:MD,requestAnimationFrame:G1},Symbol.toStringTag,{value:"Module"})),zs=n=>{const e={value:!1};return e.test=(t,i)=>{e.value=n(t,i)},e},Bc={chrome:zs((n,e)=>/Chrome/.test(n)&&/Google/.test(e)),chromeWebKit:zs(n=>/CriOS/.test(n)),edge:zs(n=>/Edge/.test(n)),edgeWebKit:zs(n=>/EdgiOS/.test(n)),firefox:zs(n=>/Firefox/.test(n)),firefoxWebKit:zs(n=>/FxiOS/.test(n)),mobile:zs(n=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n)),safari:zs((n,e)=>/Safari/.test(n)&&/Apple Computer/.test(e))},Zp={mac:zs(n=>/^Mac/.test(n)),win:zs(n=>/^Win/.test(n)),linux:zs(n=>/^Linux/.test(n)),ios:zs(n=>/iPhone|iPad|iPod/i.test(n))};function b9(){let{userAgent:n=navigator.userAgent,vendor:e=navigator.vendor}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ct(Bc,t=>{let{test:i}=t;return void i(n,e)})}function w9(){let{platform:n=navigator.platform}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ct(Zp,e=>{let{test:t}=e;return void t(n)})}m9()&&(b9(),w9());function AD(){return Bc.chrome.value}function y9(){return Bc.chromeWebKit.value}function CS(){return Bc.firefox.value}function C9(){return Bc.firefoxWebKit.value}function PD(){return Bc.safari.value}function S9(){return Bc.edge.value}function q_e(){return Bc.edgeWebKit.value}function fc(){return Bc.mobile.value}function ID(){return Zp.ios.value}function OD(){let{maxTouchPoints:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:navigator;return n>2&&Zp.mac.value}function nI(){return Zp.win.value}function bw(){return Zp.mac.value}function X_e(){return Zp.linux.value}const Z_e=Object.freeze(Object.defineProperty({__proto__:null,isChrome:AD,isChromeWebKit:y9,isEdge:S9,isEdgeWebKit:q_e,isFirefox:CS,isFirefoxWebKit:C9,isIOS:ID,isIpadOS:OD,isLinuxOS:X_e,isMacOS:bw,isMobileBrowser:fc,isSafari:PD,isWindowsOS:nI,setBrowserMeta:b9,setPlatformMeta:w9},Symbol.toStringTag,{value:"Module"})),Le={ALT:18,ARROW_DOWN:40,ARROW_LEFT:37,ARROW_RIGHT:39,ARROW_UP:38,AUDIO_DOWN:CS()?182:174,AUDIO_MUTE:CS()?181:173,AUDIO_UP:CS()?183:175,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND_LEFT:91,COMMAND_RIGHT:93,COMMAND_FIREFOX:224,CONTROL:17,DELETE:46,END:35,ENTER:13,ESCAPE:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,HOME:36,INSERT:45,MEDIA_NEXT:176,MEDIA_PLAY_PAUSE:179,MEDIA_PREV:177,MEDIA_STOP:178,NULL:0,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PERIOD:190,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,A:65,C:67,D:68,F:70,L:76,O:79,P:80,S:83,V:86,X:88,Y:89,Z:90},Q_e=[Le.ALT,Le.ARROW_DOWN,Le.ARROW_LEFT,Le.ARROW_RIGHT,Le.ARROW_UP,Le.AUDIO_DOWN,Le.AUDIO_MUTE,Le.AUDIO_UP,Le.BACKSPACE,Le.CAPS_LOCK,Le.DELETE,Le.END,Le.ENTER,Le.ESCAPE,Le.F1,Le.F2,Le.F3,Le.F4,Le.F5,Le.F6,Le.F7,Le.F8,Le.F9,Le.F10,Le.F11,Le.F12,Le.F13,Le.F14,Le.F15,Le.F16,Le.F17,Le.F18,Le.F19,Le.HOME,Le.INSERT,Le.MEDIA_NEXT,Le.MEDIA_PLAY_PAUSE,Le.MEDIA_PREV,Le.MEDIA_STOP,Le.NULL,Le.NUM_LOCK,Le.PAGE_DOWN,Le.PAGE_UP,Le.PAUSE,Le.SCROLL_LOCK,Le.SHIFT,Le.TAB];function _9(n){return n===32||n>=48&&n<=57||n>=96&&n<=111||n>=186&&n<=192||n>=219&&n<=222||n>=226||n>=65&&n<=90}function kD(n){return Q_e.includes(n)}function J_e(n){const e=[];return bw()?e.push(Le.COMMAND_LEFT,Le.COMMAND_RIGHT,Le.COMMAND_FIREFOX):e.push(Le.CONTROL),e.includes(n)}function R9(n){return[Le.CONTROL,Le.COMMAND_LEFT,Le.COMMAND_RIGHT,Le.COMMAND_FIREFOX].includes(n)}function Qp(n,e){const t=e.split("|");let i=!1;return j(t,r=>{if(n===Le[r])return i=!0,!1}),i}const eRe=Object.freeze(Object.defineProperty({__proto__:null,KEY_CODES:Le,isCtrlKey:J_e,isCtrlMetaKey:R9,isFunctionKey:kD,isKey:Qp,isPrintableChar:_9},Symbol.toStringTag,{value:"Module"}));function mo(n){n.isImmediatePropagationEnabled=!1,n.cancelBubble=!0}function vu(n){return n.isImmediatePropagationEnabled===!1}function Ku(n){return n.button===2}function Y1(n){return n.button===0}function E9(n){return n instanceof TouchEvent}function x9(n,e){const t={x:n.offsetX,y:n.offsetY};let i=n.target;if(!(e instanceof HTMLElement)||i!==e&&i.contains(e))return t;for(;i!==e;)t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;return t}const tRe=Object.freeze(Object.defineProperty({__proto__:null,isImmediatePropagationStopped:vu,isLeftClick:Y1,isRightClick:Ku,isTouchEvent:E9,offsetRelativeTo:x9,stopImmediatePropagation:mo},Symbol.toStringTag,{value:"Module"}));var T9={},nRe=g7,iRe=Hk,rRe=Object.keys||function(e){return nRe(e,iRe)},sRe=oa,oRe=a7,aRe=ah,lRe=Hc,cRe=w1,uRe=rRe;T9.f=sRe&&!oRe?Object.defineProperties:function(e,t){lRe(e);for(var i=cRe(t),r=uRe(t),s=r.length,o=0,a;s>o;)aRe.f(e,a=r[o++],i[a]);return e};var hRe=Hc,dRe=T9,jV=Hk,fRe=Nk,gRe=$7,pRe=kk,mRe=u7,zV=">",UV="<",iI="prototype",rI="script",M9=mRe("IE_PROTO"),aT=function(){},A9=function(n){return UV+rI+zV+n+UV+"/"+rI+zV},GV=function(n){n.write(A9("")),n.close();var e=n.parentWindow.Object;return n=null,e},vRe=function(){var n=pRe("iframe"),e="java"+rI+":",t;return n.style.display="none",gRe.appendChild(n),n.src=String(e),t=n.contentWindow.document,t.open(),t.write(A9("document.F=Object")),t.close(),t.F},b0,SS=function(){try{b0=new ActiveXObject("htmlfile")}catch{}SS=typeof document<"u"?document.domain&&b0?GV(b0):vRe():GV(b0);for(var n=jV.length;n--;)delete SS[iI][jV[n]];return SS()};fRe[M9]=!0;var bRe=Object.create||function(e,t){var i;return e!==null?(aT[iI]=hRe(e),i=new aT,aT[iI]=null,i[M9]=e):i=SS(),t===void 0?i:dRe.f(i,t)},wRe=oh,yRe=bRe,CRe=ah.f,sI=wRe("unscopables"),oI=Array.prototype;oI[sI]===void 0&&CRe(oI,sI,{configurable:!0,value:yRe(null)});var DD=function(n){oI[sI][n]=!0},SRe=DD;SRe("flatMap");function Yt(){ke(console)&&console.warn(...arguments)}function ND(){ke(console)&&console.error(...arguments)}function _Re(n,e,t){return(e=RRe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RRe(n){var e=ERe(n,"string");return typeof e=="symbol"?e:e+""}function ERe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const Vf=["afterCellMetaReset","afterChange","afterContextMenuDefaultOptions","beforeContextMenuSetItems","afterDropdownMenuDefaultOptions","beforeDropdownMenuSetItems","afterContextMenuHide","beforeContextMenuShow","afterContextMenuShow","afterCopyLimit","beforeCreateCol","afterColumnSequenceChange","afterCreateCol","beforeCreateRow","afterCreateRow","afterDeselect","afterDestroy","afterDocumentKeyDown","afterDrawSelection","beforeRemoveCellClassNames","afterGetCellMeta","afterGetColHeader","afterGetRowHeader","afterInit","afterLoadData","afterUpdateData","afterMomentumScroll","afterOnCellCornerMouseDown","afterOnCellCornerDblClick","afterOnCellMouseDown","afterOnCellMouseUp","afterOnCellContextMenu","afterOnCellMouseOver","afterOnCellMouseOut","afterRemoveCol","afterRemoveRow","beforeRenderer","afterRenderer","afterRowSequenceChange","beforeViewportScrollVertically","beforeViewportScrollHorizontally","beforeViewportScroll","afterScrollHorizontally","afterScrollVertically","afterScroll","afterSelection","afterSelectionByProp","afterSelectionEnd","afterSelectionEndByProp","afterSelectionFocusSet","beforeSelectColumns","afterSelectColumns","beforeSelectRows","afterSelectRows","afterSetCellMeta","afterRemoveCellMeta","afterSetDataAtCell","afterSetDataAtRowProp","afterSetSourceDataAtCell","afterUpdateSettings","afterValidate","beforeLanguageChange","afterLanguageChange","beforeAutofill","afterAutofill","beforeCellAlignment","beforeChange","beforeChangeRender","beforeDrawBorders","beforeGetCellMeta","beforeRemoveCellMeta","beforeInit","beforeInitWalkontable","beforeLoadData","beforeUpdateData","beforeKeyDown","beforeOnCellMouseDown","beforeOnCellMouseUp","beforeOnCellContextMenu","beforeOnCellMouseOver","beforeOnCellMouseOut","beforeRemoveCol","beforeRemoveRow","beforeViewRender","afterViewRender","beforeRender","afterRender","beforeRowWrap","beforeColumnWrap","beforeSetCellMeta","beforeSelectionFocusSet","beforeSetRangeStartOnly","beforeSetRangeStart","beforeSetRangeEnd","beforeSelectionHighlightSet","beforeTouchScroll","beforeValidate","beforeValueRender","construct","init","modifyColHeader","modifyColWidth","modifyFiltersMultiSelectValue","modifyFocusedElement","modifyRowHeader","modifyRowHeight","modifyRowHeightByOverlayName","modifyData","modifySourceData","modifyRowData","modifyGetCellCoords","modifyFocusOnTabNavigation","beforeHighlightingRowHeader","beforeHighlightingColumnHeader","persistentStateLoad","persistentStateReset","persistentStateSave","beforeColumnSort","afterColumnSort","modifyAutofillRange","modifyCopyableRange","beforeCut","afterCut","beforeCopy","afterCopy","beforePaste","afterPaste","beforeColumnFreeze","afterColumnFreeze","beforeColumnMove","afterColumnMove","beforeColumnUnfreeze","afterColumnUnfreeze","beforeRowMove","afterRowMove","beforeColumnResize","afterColumnResize","beforeRowResize","afterRowResize","afterGetColumnHeaderRenderers","afterGetRowHeaderRenderers","beforeStretchingColumnWidth","beforeFilter","afterFilter","afterFormulasValuesUpdate","afterNamedExpressionAdded","afterNamedExpressionRemoved","afterSheetAdded","afterSheetRenamed","afterSheetRemoved","modifyColumnHeaderHeight","modifyColumnHeaderValue","beforeUndo","beforeUndoStackChange","afterUndo","afterUndoStackChange","beforeRedo","beforeRedoStackChange","afterRedo","afterRedoStackChange","modifyRowHeaderWidth","modifyTransformFocus","modifyTransformStart","modifyTransformEnd","afterModifyTransformFocus","afterModifyTransformStart","afterModifyTransformEnd","afterViewportRowCalculatorOverride","afterViewportColumnCalculatorOverride","afterPluginsInitialized","beforeHideRows","afterHideRows","beforeUnhideRows","afterUnhideRows","beforeHideColumns","afterHideColumns","beforeUnhideColumns","afterUnhideColumns","beforeTrimRow","afterTrimRow","beforeUntrimRow","afterUntrimRow","beforeDropdownMenuShow","afterDropdownMenuShow","afterDropdownMenuHide","beforeAddChild","afterAddChild","beforeDetachChild","afterDetachChild","beforeBeginEditing","afterBeginEditing","beforeMergeCells","afterMergeCells","beforeUnmergeCells","afterUnmergeCells","afterListen","afterUnlisten","afterRefreshDimensions","beforeRefreshDimensions","beforeColumnCollapse","afterColumnCollapse","beforeColumnExpand","afterColumnExpand","modifyAutoColumnSizeSeed"],xRe=Kt`The plugin hook "[hookName]" was removed in Handsontable [removedInVersion].\x20
  Please consult release notes https://github.com/handsontable/handsontable/releases/tag/[removedInVersion] to\x20
  learn about the migration path.`,lT=new Map([["modifyRow","8.0.0"],["modifyCol","8.0.0"],["unmodifyRow","8.0.0"],["unmodifyCol","8.0.0"],["skipLengthCache","8.0.0"],["hiddenColumn","8.0.0"],["hiddenRow","8.0.0"]]),cT=new Map([[]]),w0=new WeakMap;class Ie{static getSingleton(){return MRe()}constructor(){_Re(this,"globalBucket",void 0),this.globalBucket=this.createEmptyBucket()}createEmptyBucket(){const e=Object.create(null);return j(Vf,t=>{e[t]=[],this.initOrderMap(e,t)}),e}getBucket(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e?(e.pluginHookBucket||(e.pluginHookBucket=this.createEmptyBucket()),e.pluginHookBucket):this.globalBucket}add(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;if(Array.isArray(t))j(t,s=>this.add(e,s,i));else{lT.has(e)&&Yt(mD(xRe,{hookName:e,removedInVersion:lT.get(e)})),cT.has(e)&&Yt(cT.get(e));const s=this.getBucket(i);if(typeof s[e]>"u"&&(this.register(e),s[e]=[],this.initOrderMap(s,e)),t.skip=!1,s[e].indexOf(t)===-1){let o=!1;t.initialHook&&j(s[e],(a,l)=>{if(a.initialHook)return s[e][l]=t,o=!0,!1}),o||s[e].push(t)}this.setCallbackOrderIndex(s,e,t,r),this.orderBucketByOrderIndex(s,e)}return this}once(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;Array.isArray(t)?j(t,s=>this.once(e,s,i)):(t.runOnce=!0,this.add(e,t,i,r))}remove(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const r=this.getBucket(i);return typeof r[e]<"u"&&r[e].indexOf(t)>=0?(t.skip=!0,!0):!1}has(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const i=this.getBucket(t);return!!(i[e]!==void 0&&i[e].length)}run(e,t,i,r,s,o,a,l){{const c=this.globalBucket[t],u=c?c.length:0;let h=0;if(u)for(;h<u;){if(!c[h]||c[h].skip){h+=1;continue}const d=U_(c[h],e,i,r,s,o,a,l);d!==void 0&&(i=d),c[h]&&c[h].runOnce&&this.remove(t,c[h]),h+=1}}{const c=this.getBucket(e)[t],u=c?c.length:0;let h=0;if(u)for(;h<u;){if(!c[h]||c[h].skip){h+=1;continue}const d=U_(c[h],e,i,r,s,o,a,l);d!==void 0&&(i=d),c[h]&&c[h].runOnce&&this.remove(t,c[h],e),h+=1}}return i}destroy(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;ct(this.getBucket(e),(t,i,r)=>r[i].length=0)}register(e){this.isRegistered(e)||Vf.push(e)}deregister(e){this.isRegistered(e)&&Vf.splice(Vf.indexOf(e),1)}isDeprecated(e){return cT.has(e)||lT.has(e)}isRegistered(e){return Vf.indexOf(e)>=0}getRegistered(){return Vf}setCallbackOrderIndex(e,t,i,r){const s=Number.isInteger(r)?r:0,o=this.getCallbackOrderMap(e,t);o.set(s,[...o.get(s)||[],i])}orderBucketByOrderIndex(e,t){const i=this.getCallbackOrderMap(e,t);i===void 0||i.size===0||i.size===1&&i.has(0)||(e[t]=[...i].sort((r,s)=>r[0]-s[0]).flatMap(r=>{let[,s]=r;return s}))}initOrderMap(e,t){w0.has(e)||w0.set(e,[]),w0.get(e)[t]=new Map}getCallbackOrderMap(e,t){return w0.get(e)[t]}}const TRe=new Ie;function MRe(){return TRe}const uT=new Map;function ua(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"common";uT.has(n)||uT.set(n,new Map);const e=uT.get(n);function t(a,l){e.set(a,l)}function i(a){return e.get(a)}function r(a){return e.has(a)}function s(){return[...e.keys()]}function o(){return[...e.values()]}return{register:t,getItem:i,hasItem:r,getNames:s,getValues:o}}const aI=new WeakMap,{register:ARe,getItem:P9,hasItem:I9,getNames:PRe,getValues:G4e}=ua("editors");function IRe(n){const e={},t=n;this.getConstructor=function(){return n},this.getInstance=function(i){return i.guid in e||(e[i.guid]=new t(i)),e[i.guid]},Ie.getSingleton().add("afterDestroy",function(){e[this.guid]=null})}function O9(n,e){let t;if(typeof n=="function")aI.get(n)||Gr(null,n),t=aI.get(n);else if(typeof n=="string")t=P9(n);else throw Error('Only strings and functions can be passed as "editor" parameter');if(!t)throw Error(`No editor registered under name "${n}"`);return t.getInstance(e)}function G_(n){if(typeof n=="function")return n;if(!I9(n))throw Error(`No registered editor found under "${n}" name`);return P9(n).getConstructor()}function Gr(n,e){n&&typeof n!="string"&&(e=n,n=e.EDITOR_TYPE);const t=new IRe(e);typeof n=="string"&&ARe(n,t),aI.set(e,t)}function ORe(n,e,t){return(e=kRe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kRe(n){var e=DRe(n,"string");return typeof e=="symbol"?e:e+""}function DRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let _S=0;class co{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;ORe(this,"context",void 0),this.context=e||this,this.context.eventListeners||(this.context.eventListeners=[])}addEventListener(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;function s(o){i.call(this,NRe(o))}return this.context.eventListeners.push({element:e,event:t,callback:i,callbackProxy:s,options:r,eventManager:this}),e.addEventListener(t,s,r),_S+=1,()=>{this.removeEventListener(e,t,i)}}removeEventListener(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=this.context.eventListeners.length,o;for(;s;)if(s-=1,o=this.context.eventListeners[s],o.event===t&&o.element===e){if(i&&i!==o.callback||r&&o.eventManager!==this)continue;this.context.eventListeners.splice(s,1),o.element.removeEventListener(o.event,o.callbackProxy,o.options),_S-=1}}clearEvents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.context)return;let t=this.context.eventListeners.length;for(;t;){t-=1;const i=this.context.eventListeners[t];e&&i.eventManager!==this||(this.context.eventListeners.splice(t,1),i.element.removeEventListener(i.event,i.callbackProxy,i.options),_S-=1)}}clear(){this.clearEvents()}destroy(){this.clearEvents(),this.context=null}destroyWithOwnEventsOnly(){this.clearEvents(!0),this.context=null}fireEvent(e,t){let i=e.document,r=e;i||(i=e.ownerDocument?e.ownerDocument:e,r=i.defaultView);const s={bubbles:!0,cancelable:t!=="mousemove",view:r,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0};let o;i.createEvent?(o=i.createEvent("MouseEvents"),o.initMouseEvent(t,s.bubbles,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,i.body.parentNode)):o=i.createEventObject(),e.dispatchEvent?e.dispatchEvent(o):e.fireEvent(`on${t}`,o)}}function NRe(n){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=function(){e.apply(this),mo(this)},n}function LRe(){return _S}function HRe(n,e){$Re(n,e),e.add(n)}function $Re(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function yh(n,e,t){return(e=FRe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FRe(n){var e=BRe(n,"string");return typeof e=="symbol"?e:e+""}function BRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function YV(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var hT=new WeakSet;class lI{constructor(e,t,i){HRe(this,hT),yh(this,"hot",void 0),yh(this,"tableMeta",void 0),yh(this,"selection",void 0),yh(this,"eventManager",void 0),yh(this,"destroyed",!1),yh(this,"activeEditor",void 0),yh(this,"cellProperties",void 0),this.hot=e,this.tableMeta=t,this.selection=i,this.eventManager=new co(e),this.hot.addHook("afterDocumentKeyDown",r=>YV(hT,this,VRe).call(this,r)),this.eventManager.addEventListener(this.hot.rootDocument.documentElement,"compositionstart",r=>{!this.destroyed&&this.hot.isListening()&&this.openEditor("",r)}),this.hot.view._wt.update("onCellDblClick",(r,s,o)=>YV(hT,this,WRe).call(this,r,s,o))}getActiveEditor(){return this.activeEditor}prepareEditor(){var e;if(this.activeEditor&&this.activeEditor.isWaiting()){this.closeEditor(!1,!1,c=>{c&&this.prepareEditor()});return}const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;if(!t||t.isHeader())return;const{row:i,col:r}=t,s=this.hot.runHooks("modifyGetCellCoords",i,r);let o=i,a=r;if(Array.isArray(s)&&([o,a]=s),this.cellProperties=this.hot.getCellMeta(o,a),!this.isCellEditable()){this.clearActiveEditor();return}const l=this.hot.getCell(i,r,!0);if(l){const c=this.hot.getCellEditor(this.cellProperties),u=this.hot.colToProp(a),h=this.hot.getSourceDataAtCell(this.hot.toPhysicalRow(o),a);this.activeEditor=O9(c,this.hot),this.activeEditor.prepare(i,r,u,l,h,this.cellProperties)}}isEditorOpened(){return this.activeEditor&&this.activeEditor.isOpened()}openEditor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!this.isCellEditable()){this.clearActiveEditor();return}const r=this.hot.getSelectedRangeLast();let s=this.hot.runHooks("beforeBeginEditing",r.highlight.row,r.highlight.col,e,t,i);if(t instanceof MouseEvent&&typeof s!="boolean"&&(s=this.hot.selection.getLayerLevel()===0&&r.isSingle()),s===!1){this.clearActiveEditor();return}this.activeEditor||(this.hot.scrollToFocusedCell(),this.prepareEditor()),this.activeEditor&&(i&&this.activeEditor.enableFullEditMode(),this.activeEditor.beginEditing(e,t))}closeEditor(e,t,i){this.activeEditor?this.activeEditor.finishEditing(e,t,i):i&&i(!1)}closeEditorAndSaveChanges(e){this.closeEditor(!1,e)}closeEditorAndRestoreOriginalValue(e){this.closeEditor(!0,e)}clearActiveEditor(){this.activeEditor=void 0}isCellEditable(){const e=this.hot.getSelectedRangeLast();if(!e)return!1;const t=this.hot.getCellEditor(this.cellProperties),{row:i,col:r}=e.highlight,{rowIndexMapper:s,columnIndexMapper:o}=this.hot,a=s.isHidden(this.hot.toPhysicalRow(i))||o.isHidden(this.hot.toPhysicalColumn(r));return!(this.cellProperties.readOnly||!t||a)}moveSelectionAfterEnter(e){const t={...typeof this.tableMeta.enterMoves=="function"?this.tableMeta.enterMoves(e):this.tableMeta.enterMoves};e.shiftKey&&(t.row=-t.row,t.col=-t.col),this.hot.selection.isMultiple()?this.selection.transformFocus(t.row,t.col):this.selection.transformStart(t.row,t.col,!0)}destroy(){this.destroyed=!0,this.eventManager.destroy()}}function VRe(n){const e=this.hot.getSelectedRangeLast();if(!this.hot.isListening()||!e||e.highlight.isHeader()||vu(n))return;const{keyCode:t}=n,i=(n.ctrlKey||n.metaKey)&&!n.altKey;(!this.activeEditor||this.activeEditor&&!this.activeEditor.isWaiting())&&!kD(t)&&!R9(t)&&!i&&!this.isEditorOpened()&&this.openEditor("",n)}function WRe(n,e){e.isCell()&&this.openEditor(null,n,!0)}const KV=new WeakMap;lI.getInstance=function(n,e,t){let i=KV.get(n);return i||(i=new lI(n,e,t),KV.set(n,i)),i};function jRe(n,e){k9(n,e),e.add(n)}function xm(n,e,t){k9(n,e),e.set(n,t)}function k9(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function An(n,e){return n.get(rc(n,e))}function Tm(n,e,t){return n.set(rc(n,e),t),t}function rc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const op=Object.freeze({CELL:"cell",MIXED:"mixed"});var ki=new WeakMap,y0=new WeakMap,C0=new WeakMap,S0=new WeakMap,_0=new WeakMap,cu=new WeakSet;class zRe{constructor(e){var t=this;jRe(this,cu),xm(this,ki,void 0),xm(this,y0,void 0),xm(this,C0,1),xm(this,S0,null),xm(this,_0,new Map);const i=e.getSettings();Tm(ki,this,e),Tm(y0,this,i.imeFastEdit?op.MIXED:op.CELL),An(ki,this).addHook("afterUpdateSettings",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return rc(cu,t,GRe).call(t,...s)}),An(ki,this).addHook("afterSelection",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return rc(cu,t,qV).call(t,...s)}),An(ki,this).addHook("afterSelectionFocusSet",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return rc(cu,t,qV).call(t,...s)}),An(ki,this).addHook("afterSelectionEnd",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return rc(cu,t,URe).call(t,...s)})}getFocusMode(){return An(y0,this)}setFocusMode(e){Object.values(op).includes(e)?Tm(y0,this,e):Yt(`"${e}" is not a valid focus mode.`)}getRefocusDelay(){return An(C0,this)}setRefocusDelay(e){Tm(C0,this,e)}setRefocusElementGetter(e){Tm(S0,this,e)}getRefocusElement(){if(typeof An(S0,this)=="function")return An(S0,this).call(this);var e;return(e=An(ki,this).getActiveEditor())===null||e===void 0?void 0:e.TEXTAREA}focusOnHighlightedCell(e){const t=i=>{var r,s;const o=(r=An(ki,this).getSelectedRangeLast())===null||r===void 0?void 0:r.highlight;if(!o)return;let a=An(ki,this).runHooks("modifyFocusedElement",o.row,o.col,i);a instanceof HTMLElement||(a=i),a&&!((s=An(ki,this).getActiveEditor())!==null&&s!==void 0&&s.isOpened())&&a.focus({preventScroll:!0})};e?t(e):rc(cu,this,LD).call(this,i=>t(i))}refocusToEditorTextarea(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:An(C0,this);const i=this.getRefocusElement();An(ki,this).getSettings().imeFastEdit&&!((e=An(ki,this).getActiveEditor())!==null&&e!==void 0&&e.isOpened())&&i&&(An(_0,this).has(t)||An(_0,this).set(t,j1(()=>{i.select()},t)),An(_0,this).get(t)())}}function LD(n){var e;const t=(e=An(ki,this).getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;if(!t||!An(ki,this).selection.isCellVisible(t)){n(null);return}const i=An(ki,this).getCell(t.row,t.col,!0);i===null?An(ki,this).addHookOnce("afterScroll",()=>{n(An(ki,this).getCell(t.row,t.col,!0))}):n(i)}function qV(){rc(cu,this,LD).call(this,n=>{const{activeElement:e}=An(ki,this).rootDocument;e&&W1(e)&&e.blur(),this.focusOnHighlightedCell(n)})}function URe(){rc(cu,this,LD).call(this,n=>{this.getFocusMode()===op.MIXED&&n.nodeName==="TD"&&this.refocusToEditorTextarea()})}function GRe(n){typeof n.imeFastEdit=="boolean"&&this.setFocusMode(n.imeFastEdit?op.MIXED:op.CELL)}var YRe=ml,KRe=wf,qRe=oh,XRe=qRe("match"),ZRe=function(n){var e;return YRe(n)&&((e=n[XRe])!==void 0?!!e:KRe(n)==="RegExp")},QRe=Hc,JRe=function(){var n=QRe(this),e="";return n.hasIndices&&(e+="d"),n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.unicodeSets&&(e+="v"),n.sticky&&(e+="y"),e},e1e=aa,t1e=vl,n1e=y1,i1e=JRe,XV=RegExp.prototype,r1e=function(n){var e=n.flags;return e===void 0&&!("flags"in XV)&&!t1e(n,"flags")&&n1e(XV,n)?e1e(i1e,n):e},HD=vi,s1e=Zw,o1e=Math.floor,dT=HD("".charAt),a1e=HD("".replace),fT=HD("".slice),l1e=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c1e=/\$([$&'`]|\d{1,2})/g,u1e=function(n,e,t,i,r,s){var o=t+n.length,a=i.length,l=c1e;return r!==void 0&&(r=s1e(r),l=l1e),a1e(s,l,function(c,u){var h;switch(dT(u,0)){case"$":return"$";case"&":return n;case"`":return fT(e,0,t);case"'":return fT(e,o);case"<":h=r[fT(u,1,-1)];break;default:var d=+u;if(d===0)return c;if(d>a){var f=o1e(d/10);return f===0?c:f<=a?i[f-1]===void 0?dT(u,1):i[f-1]+dT(u,1):c}h=i[d-1]}return h===void 0?"":h})},h1e=Yi,d1e=aa,$D=vi,ZV=qw,f1e=Gi,g1e=b1,p1e=ZRe,Mm=E1,m1e=_1,v1e=r1e,b1e=u1e,w1e=oh,y1e=w1e("replace"),C1e=TypeError,gT=$D("".indexOf);$D("".replace);var QV=$D("".slice),S1e=Math.max;h1e({target:"String",proto:!0},{replaceAll:function(e,t){var i=ZV(this),r,s,o,a,l,c,u,h,d,f,g=0,p="";if(!g1e(e)){if(r=p1e(e),r&&(s=Mm(ZV(v1e(e))),!~gT(s,"g")))throw new C1e("`.replaceAll` does not allow non-global regexes");if(o=m1e(e,y1e),o)return d1e(o,e,i,t)}for(a=Mm(i),l=Mm(e),c=f1e(t),c||(t=Mm(t)),u=l.length,h=S1e(1,u),d=gT(a,l);d!==-1;)f=c?Mm(t(l,d,a)):b1e(l,a,d,[],void 0,t),p+=QV(a,g,d)+f,g=d+u,d=d+h>a.length?-1:gT(a,l,d+h);return g<a.length&&(p+=QV(a,g)),p}});const D9={"&nbsp;":" ","&amp;":"&","&lt;":"<","&gt;":">"},_1e=new RegExp(Object.keys(D9).map(n=>`(${n})`).join("|"),"gi");function R1e(n){return(n&&n.nodeName||"")==="TABLE"}function cI(n){const e=n.hasColHeaders(),t=n.hasRowHeaders(),i=[e?-1:0,t?-1:0,n.countRows()-1,n.countCols()-1],r=n.getData(...i),s=r.length,o=s>0?r[0].length:0,a=["<table>","</table>"],l=e?["<thead>","</thead>"]:[],c=["<tbody>","</tbody>"],u=t?1:0,h=e?1:0;for(let d=0;d<s;d+=1){const f=e&&d===0,g=[];for(let m=0;m<o;m+=1){const b=!f&&t&&m===0;let y="";if(f)y=`<th>${n.getColHeader(m-u)}</th>`;else if(b)y=`<th>${n.getRowHeader(d-h)}</th>`;else{const w=r[d][m],{hidden:R,rowspan:E,colspan:_}=n.getCellMeta(d-h,m-u);if(!R){const T=[];if(E&&T.push(`rowspan="${E}"`),_&&T.push(`colspan="${_}"`),zn(w))y=`<td ${T.join(" ")}></td>`;else{const I=w.toString().replace("<","&lt;").replace(">","&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,`<br>\r
`).replace(/\x20/gi,"&nbsp;").replace(/\t/gi,"&#9;");y=`<td ${T.join(" ")}>${I}</td>`}}}g.push(y)}const p=["<tr>",...g,"</tr>"].join("");f?l.splice(1,0,p):c.splice(-1,0,p)}return a.splice(1,0,l.join(""),c.join("")),a.join("")}function uI(n){const e=n.length,t=["<table>"];for(let i=0;i<e;i+=1){const r=n[i],s=r.length,o=[];i===0&&t.push("<tbody>");for(let a=0;a<s;a+=1){const l=r[a],c=zn(l)?"":l.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,`<br>\r
`).replace(/\x20{2,}/gi,u=>`<span style="mso-spacerun: yes">${"&nbsp;".repeat(u.length-1)} </span>`).replace(/\t/gi,"&#9;");o.push(`<td>${c}</td>`)}t.push("<tr>",...o,"</tr>"),i+1===e&&t.push("</tbody>")}return t.push("</table>"),t.join("")}function N9(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;const t={},i=e.createDocumentFragment(),r=e.createElement("div");i.appendChild(r);let s=n;if(typeof s=="string"){const w=s.replace(/<td\b[^>]*?>([\s\S]*?)<\/\s*td>/g,R=>{const E=R.match(/<td\b[^>]*?>/g)[0],_=/<p.*?>/g,T=R.substring(E.length,R.lastIndexOf("<")).trim().replaceAll(/\n\s+/g," ").replaceAll(_,`
`).replace(`
`,"").replaceAll(/<\/(.*)>\s+$/mg,"</$1>").replace(/(<(?!br)([^>]+)>)/gi,"").replaceAll(/^&nbsp;$/mg,"");return`${E}${T}</td>`});r.insertAdjacentHTML("afterbegin",`${w}`),s=r.querySelector("table")}if(!s||!R1e(s))return;const o=r.querySelector('meta[name$="enerator"]'),a=s.querySelector("tbody th")!==null,l=s.querySelector("tr"),c=l?Array.from(l.cells).reduce((w,R)=>w+R.colSpan,0)-(a?1:0):0,u=s.tFoot&&Array.from(s.tFoot.rows)||[],h=[];let d=!1,f=0,g=0;if(s.tHead){const w=Array.from(s.tHead.rows).filter(R=>{const E=R.querySelector("td")!==null;return E&&h.push(R),!E});f=w.length,d=f>0,f>1?t.nestedHeaders=Array.from(w).reduce((R,E)=>{const _=Array.from(E.cells).reduce((T,I,x)=>{if(a&&x===0)return T;const{colSpan:P,innerHTML:D}=I,B=P>1?{label:D,colspan:P}:D;return T.push(B),T},[]);return R.push(_),R},[]):d&&(t.colHeaders=Array.from(w[0].children).reduce((R,E,_)=>(a&&_===0||R.push(E.innerHTML),R),[]))}h.length&&(t.fixedRowsTop=h.length),u.length&&(t.fixedRowsBottom=u.length);const p=[...h,...Array.from(s.tBodies).reduce((w,R)=>(w.push(...Array.from(R.rows)),w),[]),...u];g=p.length;const m=new Array(g);for(let w=0;w<g;w++)m[w]=new Array(c);const b=[],y=[];for(let w=0;w<g;w++){const R=p[w],E=Array.from(R.cells),_=E.length;for(let T=0;T<_;T++){const I=E[T],{nodeName:x,innerHTML:P,rowSpan:D,colSpan:B}=I,V=m[w].findIndex(z=>z===void 0);if(x==="TD"){if(D>1||B>1){for(let F=w;F<w+D;F++)if(F<g)for(let G=V;G<V+B;G++)m[F][G]=null;const L=I.getAttribute("style");L&&L.includes("mso-ignore:colspan")||b.push({col:V,row:w,rowspan:D,colspan:B})}let z="";o&&/excel/gi.test(o.content)?z=P.replace(/[\r\n][\x20]{0,2}/g," ").replace(/<br(\s*|\/)>[\r\n]?[\x20]{0,3}/gim,`\r
`):z=P.replace(/<br(\s*|\/)>[\r\n]?/gim,`\r
`),m[w][V]=z.replace(_1e,L=>D9[L])}else y.push(P)}}return b.length&&(t.mergeCells=b),y.length&&(t.rowHeaders=y),m.length&&(t.data=m),t}const E1e=Object.freeze(Object.defineProperty({__proto__:null,_dataToHTML:uI,htmlToGridSettings:N9,instanceToHTML:cI},Symbol.toStringTag,{value:"Module"}));function rr(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const t=typeof n;if(t==="number")return!isNaN(n)&&isFinite(n);if(t==="string"){if(n.length===0)return!1;if(n.length===1)return/\d/.test(n);const i=Array.from(new Set([".",...e])).map(r=>`\\${r}`).join("|");return new RegExp(`^[+-]?(((${i})?\\d+((${i})\\d+)?(e[+-]?\\d+)?)|(0x[a-f\\d]+))$`,"i").test(n.trim())}else if(t==="object")return!!n&&typeof n.valueOf()=="number"&&!(n instanceof Date);return!1}function L9(n){return rr(n,[","])}function He(n,e,t){let i=-1;for(typeof e=="function"?(t=e,e=n):i=n-1;++i<=e&&t(i)!==!1;);}function hI(n,e,t){let i=n+1;for(typeof e=="function"&&(t=e,e=0);--i>=e&&t(i)!==!1;);}function FD(n,e){return e=parseInt(e.toString().replace("%",""),10),e=isNaN(e)?0:e,parseInt(n*e/100,10)}function Gt(n,e,t){return Math.min(n,e)===n?e:Math.max(n,t)===n?t:n}const x1e=Object.freeze(Object.defineProperty({__proto__:null,clamp:Gt,isNumeric:rr,isNumericLike:L9,rangeEach:He,rangeEachReverse:hI,valueAccordingPercent:FD},Symbol.toStringTag,{value:"Module"})),dI="asc",T1e="desc",JV=new Map([[dI,[-1,1]],[T1e,[1,-1]]]),M1e=n=>`The priority '${n}' is already declared in a map.`,A1e=n=>`The priority '${n}' is not a number.`;function P1e(){let{errorPriorityExists:n,errorPriorityNaN:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=new Map;n=cn(n)?n:M1e,e=cn(e)?e:A1e;function i(s,o){if(!rr(s))throw new Error(e(s));if(t.has(s))throw new Error(n(s));t.set(s,o)}function r(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dI;const[o,a]=JV.get(s)||JV.get(dI);return[...t].sort((l,c)=>l[0]<c[0]?o:a).map(l=>l[1])}return{addItem:i,getItems:r}}const I1e=n=>`The id '${n}' is already declared in a map.`;function K1(){let{errorIdExists:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=new Map;n=cn(n)?n:I1e;function t(c,u){if(l(c))throw new Error(n(c));e.set(c,u)}function i(c){return e.delete(c)}function r(){e.clear()}function s(c){const[u]=a().find(h=>{let[d,f]=h;return c===f?d:!1})||[null];return u}function o(c){return e.get(c)}function a(){return[...e]}function l(c){return e.has(c)}return{addItem:t,clear:r,getId:s,getItem:o,getItems:a,hasItem:l,removeItem:i}}const O1e=n=>`'${n}' value is already declared in a unique set.`;function k1e(){let{errorItemExists:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=new Set;n=cn(n)?n:O1e;function t(s){if(e.has(s))throw new Error(n(s));e.add(s)}function i(){return[...e]}function r(){e.clear()}return{addItem:t,clear:r,getItems:i}}const BD=n=>`There is already registered "${n}" plugin.`,D1e=n=>`There is already registered plugin on priority "${n}".`,N1e=n=>`The priority "${n}" is not a number.`,H9=P1e({errorPriorityExists:D1e,errorPriorityNaN:N1e}),$9=k1e({errorItemExists:BD}),fI=K1({errorIdExists:BD});function VD(){return[...H9.getItems(),...$9.getItems()]}function dy(n){const e=fr(n);return fI.getItem(e)}function L1e(n){return!!dy(n)}function At(n,e,t){[n,e,t]=$1e(n,e,t),dy(n)===void 0&&H1e(n,e,t)}function H1e(n,e,t){const i=fr(n);if(fI.hasItem(i))throw new Error(BD(i));t===void 0?$9.addItem(i):H9.addItem(t,i),fI.addItem(i,e)}function $1e(n,e,t){return typeof n=="function"&&(e=n,n=e.PLUGIN_KEY,t=e.PLUGIN_PRIORITY),[n,e,t]}const{register:F1e,getItem:B1e,hasItem:F9,getNames:V1e,getValues:Y4e}=ua("renderers");function Y_(n){if(typeof n=="function")return n;if(!F9(n))throw Error(`No registered renderer found under "${n}" name`);return B1e(n)}function ss(n,e){typeof n!="string"&&(e=n,n=e.RENDERER_TYPE),F1e(n,e)}const{register:W1e,getItem:j1e,hasItem:B9,getNames:z1e,getValues:K4e}=ua("validators");function WD(n){if(typeof n=="function")return n;if(!B9(n))throw Error(`No registered validator found under "${n}" name`);return j1e(n)}function vd(n,e){typeof n!="string"&&(e=n,n=e.VALIDATOR_TYPE),W1e(n,e)}var U1e=Yi,G1e=Zw,Y1e=ey,K1e=Jw,q1e=DD;U1e({target:"Array",proto:!0},{at:function(e){var t=G1e(this),i=Y1e(t),r=K1e(e),s=r>=0?r:i+r;return s<0||s>=i?void 0:t[s]}});q1e("at");var X1e=Yi,Z1e=vi,Q1e=qw,J1e=Jw,eEe=E1,tEe=es,nEe=Z1e("".charAt),iEe=tEe(function(){return"".at(-2)!=="\uD842"});X1e({target:"String",proto:!0,forced:iEe},{at:function(e){var t=eEe(Q1e(this)),i=t.length,r=J1e(e),s=r>=0?r:i+r;return s<0||s>=i?void 0:nEe(t,s)}});function Am(n,e,t){return(e=rEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rEe(n){var e=sEe(n,"string");return typeof e=="symbol"?e:e+""}function sEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class oEe{constructor(){Am(this,"count",0),Am(this,"startColumn",null),Am(this,"endColumn",null),Am(this,"startPosition",null),Am(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedWidth:i,zeroBasedScrollOffset:r,viewportWidth:s,columnWidth:o}=t,a=r>0?s+1:s;i>=r&&i+o<=r+a&&((this.startColumn===null||this.startColumn===void 0)&&(this.startColumn=e),this.endColumn=e)}finalize(e){var t;const{scrollOffset:i,viewportWidth:r,inlineStartOffset:s,zeroBasedScrollOffset:o,totalColumns:a,needReverse:l,startPositions:c,columnWidth:u}=e;if(this.endColumn===a-1&&l)for(this.startColumn=this.endColumn;this.startColumn>0;){const g=c[this.endColumn]+u-c[this.startColumn-1];if(g<=r&&(this.startColumn-=1),g>=r)break}this.startPosition=(t=c[this.startColumn])!==null&&t!==void 0?t:null;const h=o>0?r+1:r,d=i+r-h,f=this.startColumn===null?0:e.getColumnWidth(this.startColumn);d<-1*s||i>c.at(-1)||-1*i-r>-1*f?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,a<this.endColumn&&(this.endColumn=a-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}function Pm(n,e,t){return(e=aEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aEe(n){var e=lEe(n,"string");return typeof e=="symbol"?e:e+""}function lEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class cEe{constructor(){Pm(this,"count",0),Pm(this,"startRow",null),Pm(this,"endRow",null),Pm(this,"startPosition",null),Pm(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedHeight:i,zeroBasedScrollOffset:r,innerViewportHeight:s,rowHeight:o}=t;i>=r&&i+o<=s&&(this.startRow===null&&(this.startRow=e),this.endRow=e)}finalize(e){var t;const{scrollOffset:i,viewportHeight:r,horizontalScrollbarHeight:s,totalRows:o,needReverse:a,startPositions:l,rowHeight:c}=e;if(this.endRow===o-1&&a)for(this.startRow=this.endRow;this.startRow>0;){const d=l[this.endRow]+c-l[this.startRow-1];if(d<=r-s&&(this.startRow-=1),d>=r-s)break}this.startPosition=(t=l[this.startRow])!==null&&t!==void 0?t:null;const u=i+r-s,h=this.startRow===null?0:e.getRowHeight(this.startRow);u<h||i>l.at(-1)?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,o<this.endRow&&(this.endRow=o-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function Im(n,e,t){return(e=uEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uEe(n){var e=hEe(n,"string");return typeof e=="symbol"?e:e+""}function hEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class V9{constructor(){Im(this,"count",0),Im(this,"startColumn",null),Im(this,"endColumn",null),Im(this,"startPosition",null),Im(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedWidth:i,zeroBasedScrollOffset:r,viewportWidth:s}=t;i<=r&&(this.startColumn=e);const o=r>0?s+1:s;i>=r&&i<=r+o&&(this.startColumn===null||this.startColumn===void 0)&&(this.startColumn=e),this.endColumn=e}finalize(e){var t;const{scrollOffset:i,viewportWidth:r,inlineStartOffset:s,zeroBasedScrollOffset:o,totalColumns:a,needReverse:l,startPositions:c,columnWidth:u}=e;if(this.endColumn===a-1&&l)for(this.startColumn=this.endColumn;this.startColumn>0;){const f=c[this.endColumn]+u-c[this.startColumn-1];if(this.startColumn-=1,f>r)break}this.startPosition=(t=c[this.startColumn])!==null&&t!==void 0?t:null;const h=o>0?r+1:r;i+r-h<-1*s||i>c.at(-1)+u||-1*i-r>0?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,a<this.endColumn&&(this.endColumn=a-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}function Om(n,e,t){return(e=dEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dEe(n){var e=fEe(n,"string");return typeof e=="symbol"?e:e+""}function fEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class W9{constructor(){Om(this,"count",0),Om(this,"startRow",null),Om(this,"endRow",null),Om(this,"startPosition",null),Om(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedHeight:i,zeroBasedScrollOffset:r,innerViewportHeight:s}=t;i<=r&&(this.startRow=e),i>=r&&i<=s&&this.startRow===null&&(this.startRow=e),this.endRow=e}finalize(e){var t;const{scrollOffset:i,viewportHeight:r,horizontalScrollbarHeight:s,totalRows:o,needReverse:a,startPositions:l,rowHeight:c}=e;if(this.endRow===o-1&&a)for(this.startRow=this.endRow;this.startRow>0;){const h=l[this.endRow]+c-l[this.startRow-1];if(this.startRow-=1,h>=r-s)break}this.startPosition=(t=l[this.startRow])!==null&&t!==void 0?t:null,i+r-s<0||i>l.at(-1)+c?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,o<this.endRow&&(this.endRow=o-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function km(n,e,t){return(e=gEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gEe(n){var e=pEe(n,"string");return typeof e=="symbol"?e:e+""}function pEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class mEe{constructor(){km(this,"count",0),km(this,"startColumn",0),km(this,"endColumn",0),km(this,"startPosition",0),km(this,"isVisibleInTrimmingContainer",!0)}initialize(e){let{totalColumns:t}=e;this.count=t,this.endColumn=this.count-1}process(){}finalize(){}}function Dm(n,e,t){return(e=vEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vEe(n){var e=bEe(n,"string");return typeof e=="symbol"?e:e+""}function bEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class wEe{constructor(){Dm(this,"count",0),Dm(this,"startRow",0),Dm(this,"endRow",0),Dm(this,"startPosition",0),Dm(this,"isVisibleInTrimmingContainer",!0)}initialize(e){let{totalRows:t}=e;this.count=t,this.endRow=this.count-1}process(){}finalize(){}}class yEe extends V9{finalize(e){var t;super.finalize(e);const{overrideFn:i,totalColumns:r,startPositions:s}=e;this.startColumn!==null&&typeof i=="function"&&i(this),this.startColumn<0&&(this.startColumn=0),this.startPosition=(t=s[this.startColumn])!==null&&t!==void 0?t:null,r<this.endColumn&&(this.endColumn=r-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}class CEe extends W9{finalize(e){var t;super.finalize(e);const{overrideFn:i,totalRows:r,startPositions:s}=e;this.startRow!==null&&typeof i=="function"&&i(this),this.startRow<0&&(this.startRow=0),this.startPosition=(t=s[this.startRow])!==null&&t!==void 0?t:null,r<this.endRow&&(this.endRow=r-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function eW(n,e,t){return(e=SEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SEe(n){var e=_Ee(n,"string");return typeof e=="symbol"?e:e+""}function _Ee(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class j9{constructor(e){eW(this,"calculationTypes",[]),eW(this,"calculationResults",new Map),this.calculationTypes=e}_initialize(e){this.calculationTypes.forEach(t=>{let[i,r]=t;this.calculationResults.set(i,r),r.initialize(e)})}_process(e,t){this.calculationTypes.forEach(i=>{let[,r]=i;return r.process(e,t)})}_finalize(e){this.calculationTypes.forEach(t=>{let[,i]=t;return i.finalize(e)})}getResultsFor(e){return this.calculationResults.get(e)}}function Ro(n,e,t){return(e=REe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function REe(n){var e=EEe(n,"string");return typeof e=="symbol"?e:e+""}function EEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const q1=50;class xEe extends j9{constructor(e){let{calculationTypes:t,viewportWidth:i,scrollOffset:r,totalColumns:s,columnWidthFn:o,overrideFn:a,inlineStartOffset:l}=e;super(t),Ro(this,"viewportWidth",0),Ro(this,"scrollOffset",0),Ro(this,"zeroBasedScrollOffset",0),Ro(this,"totalColumns",0),Ro(this,"columnWidthFn",null),Ro(this,"columnWidth",0),Ro(this,"overrideFn",null),Ro(this,"inlineStartOffset",0),Ro(this,"totalCalculatedWidth",0),Ro(this,"startPositions",[]),Ro(this,"needReverse",!0),this.viewportWidth=i,this.scrollOffset=r,this.zeroBasedScrollOffset=Math.max(r,0),this.totalColumns=s,this.columnWidthFn=o,this.overrideFn=a,this.inlineStartOffset=l,this.calculate()}calculate(){this._initialize(this);for(let e=0;e<this.totalColumns;e++)if(this.columnWidth=this.getColumnWidth(e),this._process(e,this),this.startPositions.push(this.totalCalculatedWidth),this.totalCalculatedWidth+=this.columnWidth,this.totalCalculatedWidth>=this.zeroBasedScrollOffset+this.viewportWidth){this.needReverse=!1;break}this._finalize(this)}getColumnWidth(e){const t=this.columnWidthFn(e);return isNaN(t)?q1:t}}function Ds(n,e,t){return(e=TEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function TEe(n){var e=MEe(n,"string");return typeof e=="symbol"?e:e+""}function MEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const z9=23;class AEe extends j9{constructor(e){let{calculationTypes:t,viewportHeight:i,scrollOffset:r,totalRows:s,rowHeightFn:o,overrideFn:a,horizontalScrollbarHeight:l}=e;super(t),Ds(this,"viewportHeight",0),Ds(this,"scrollOffset",0),Ds(this,"zeroBasedScrollOffset",0),Ds(this,"totalRows",0),Ds(this,"rowHeightFn",null),Ds(this,"rowHeight",0),Ds(this,"overrideFn",null),Ds(this,"horizontalScrollbarHeight",0),Ds(this,"innerViewportHeight",0),Ds(this,"totalCalculatedHeight",0),Ds(this,"startPositions",[]),Ds(this,"needReverse",!0),this.viewportHeight=i,this.scrollOffset=r,this.zeroBasedScrollOffset=Math.max(r,0),this.totalRows=s,this.rowHeightFn=o,this.overrideFn=a,this.horizontalScrollbarHeight=l??0,this.innerViewportHeight=this.zeroBasedScrollOffset+this.viewportHeight-this.horizontalScrollbarHeight,this.calculate()}calculate(){this._initialize(this);for(let e=0;e<this.totalRows;e++)if(this.rowHeight=this.getRowHeight(e),this._process(e,this),this.startPositions.push(this.totalCalculatedHeight),this.totalCalculatedHeight+=this.rowHeight,this.totalCalculatedHeight>=this.innerViewportHeight){this.needReverse=!1;break}this._finalize(this)}getRowHeight(e){const t=this.rowHeightFn(e);return isNaN(t)?z9:t}}function PEe(n,e,t){IEe(n,e),e.set(n,t)}function IEe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function tW(n,e,t){return(e=OEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OEe(n){var e=kEe(n,"string");return typeof e=="symbol"?e:e+""}function kEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Wf(n,e){return n.get(U9(n,e))}function nW(n,e,t){return n.set(U9(n,e),t),t}function U9(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ml=new WeakMap;class sf{constructor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;tW(this,"row",null),tW(this,"col",null),PEe(this,Ml,!1),nW(Ml,this,i),typeof e<"u"&&typeof t<"u"&&(this.row=e,this.col=t)}isValid(e){const{countRows:t,countCols:i,countRowHeaders:r,countColHeaders:s}={countRows:0,countCols:0,countRowHeaders:0,countColHeaders:0,...e};return!(!Number.isInteger(this.row)||!Number.isInteger(this.col)||this.row<-s||this.col<-r||this.row>=t||this.col>=i)}isEqual(e){return e===this?!0:this.row===e.row&&this.col===e.col}isHeader(){return!this.isCell()}isCell(){return this.row>=0&&this.col>=0}isRtl(){return Wf(Ml,this)}isSouthEastOf(e){return this.row>=e.row&&(Wf(Ml,this)?this.col<=e.col:this.col>=e.col)}isNorthWestOf(e){return this.row<=e.row&&(Wf(Ml,this)?this.col>=e.col:this.col<=e.col)}isSouthWestOf(e){return this.row>=e.row&&(Wf(Ml,this)?this.col>=e.col:this.col<=e.col)}isNorthEastOf(e){return this.row<=e.row&&(Wf(Ml,this)?this.col<=e.col:this.col>=e.col)}normalize(){return this.row=this.row===null?this.row:Math.max(this.row,0),this.col=this.col===null?this.col:Math.max(this.col,0),this}assign(e){return Number.isInteger(e==null?void 0:e.row)&&(this.row=e.row),Number.isInteger(e==null?void 0:e.col)&&(this.col=e.col),e instanceof sf&&nW(Ml,this,e.isRtl()),this}clone(){return new sf(this.row,this.col,Wf(Ml,this))}toObject(){return{row:this.row,col:this.col}}}function DEe(n,e,t){NEe(n,e),e.set(n,t)}function NEe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function pT(n,e,t){return(e=LEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LEe(n){var e=HEe(n,"string");return typeof e=="symbol"?e:e+""}function HEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ns(n,e){return n.get(G9(n,e))}function $Ee(n,e,t){return n.set(G9(n,e),t),t}function G9(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var $r=new WeakMap;class fy{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;pT(this,"highlight",null),pT(this,"from",null),pT(this,"to",null),DEe(this,$r,!1),this.highlight=e.clone(),this.from=t.clone(),this.to=i.clone(),$Ee($r,this,r)}setHighlight(e){return this.highlight=e.clone(),this}setFrom(e){return this.from=e.clone(),this}setTo(e){return this.to=e.clone(),this}isValid(e){return this.from.isValid(e)&&this.to.isValid(e)}isSingle(){return this.isSingleCell()||this.isSingleHeader()}isSingleCell(){return this.from.row>=0&&this.from.row===this.to.row&&this.from.col>=0&&this.from.col===this.to.col}isSingleHeader(){return(this.from.row<0||this.from.col<0)&&this.from.row===this.to.row&&this.from.col===this.to.col}isHeader(){return this.from.isHeader()&&this.to.isHeader()?!0:this.from.col<0&&this.to.col<0||this.from.row<0&&this.to.row<0}containsHeaders(){return this.from.isHeader()||this.to.isHeader()}getOuterHeight(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1}getOuterWidth(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1}getHeight(){if(this.from.row<0&&this.to.row<0)return 0;const e=Math.max(this.from.row,0),t=Math.max(this.to.row,0);return Math.max(e,t)-Math.min(e,t)+1}getWidth(){if(this.from.col<0&&this.to.col<0)return 0;const e=Math.max(this.from.col,0),t=Math.max(this.to.col,0);return Math.max(e,t)-Math.min(e,t)+1}getCellsCount(){return this.getWidth()*this.getHeight()}includes(e){const{row:t,col:i}=e,r=this.getOuterTopStartCorner(),s=this.getOuterBottomEndCorner();return r.row<=t&&s.row>=t&&r.col<=i&&s.col>=i}includesRange(e){return this.includes(e.getOuterTopStartCorner())&&this.includes(e.getOuterBottomEndCorner())}isEqual(e){return Math.min(this.from.row,this.to.row)===Math.min(e.from.row,e.to.row)&&Math.max(this.from.row,this.to.row)===Math.max(e.from.row,e.to.row)&&Math.min(this.from.col,this.to.col)===Math.min(e.from.col,e.to.col)&&Math.max(this.from.col,this.to.col)===Math.max(e.from.col,e.to.col)}overlaps(e){return e.isSouthEastOf(this.getOuterTopLeftCorner())&&e.isNorthWestOf(this.getOuterBottomRightCorner())}isSouthEastOf(e){return this.getOuterTopLeftCorner().isSouthEastOf(e)||this.getOuterBottomRightCorner().isSouthEastOf(e)}isNorthWestOf(e){return this.getOuterTopLeftCorner().isNorthWestOf(e)||this.getOuterBottomRightCorner().isNorthWestOf(e)}isOverlappingHorizontally(e){return this.getOuterTopEndCorner().col>=e.getOuterTopStartCorner().col&&this.getOuterTopEndCorner().col<=e.getOuterTopEndCorner().col||this.getOuterTopStartCorner().col<=e.getOuterTopEndCorner().col&&this.getOuterTopStartCorner().col>=e.getOuterTopStartCorner().col}isOverlappingVertically(e){return this.getOuterBottomStartCorner().row>=e.getOuterTopRightCorner().row&&this.getOuterBottomStartCorner().row<=e.getOuterBottomStartCorner().row||this.getOuterTopEndCorner().row<=e.getOuterBottomStartCorner().row&&this.getOuterTopEndCorner().row>=e.getOuterTopRightCorner().row}expand(e){const t=this.getOuterTopStartCorner(),i=this.getOuterBottomEndCorner();return e.row<t.row||e.col<t.col||e.row>i.row||e.col>i.col?(this.from=this._createCellCoords(Math.min(t.row,e.row),Math.min(t.col,e.col)),this.to=this._createCellCoords(Math.max(i.row,e.row),Math.max(i.col,e.col)),!0):!1}expandByRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(this.includesRange(e)||!this.overlaps(e))return!1;const i=this.getOuterTopStartCorner(),r=this.getOuterBottomEndCorner(),s=this.getDirection(),o=e.getOuterTopStartCorner(),a=e.getOuterBottomEndCorner(),l=Math.min(i.row,o.row),c=Math.min(i.col,o.col),u=Math.max(r.row,a.row),h=Math.max(r.col,a.col),d=this._createCellCoords(l,c),f=this._createCellCoords(u,h);return this.from=d,this.to=f,this.setDirection(s),t&&(this.highlight.row===this.getOuterBottomRightCorner().row&&this.getVerticalDirection()==="N-S"&&this.flipDirectionVertically(),this.highlight.col===this.getOuterTopRightCorner().col&&this.getHorizontalDirection()==="W-E"&&this.flipDirectionHorizontally()),!0}getDirection(){if(this.from.isNorthWestOf(this.to))return"NW-SE";if(this.from.isNorthEastOf(this.to))return"NE-SW";if(this.from.isSouthEastOf(this.to))return"SE-NW";if(this.from.isSouthWestOf(this.to))return"SW-NE"}setDirection(e){switch(e){case"NW-SE":[this.from,this.to]=[this.getOuterTopLeftCorner(),this.getOuterBottomRightCorner()];break;case"NE-SW":[this.from,this.to]=[this.getOuterTopRightCorner(),this.getOuterBottomLeftCorner()];break;case"SE-NW":[this.from,this.to]=[this.getOuterBottomRightCorner(),this.getOuterTopLeftCorner()];break;case"SW-NE":[this.from,this.to]=[this.getOuterBottomLeftCorner(),this.getOuterTopRightCorner()];break}}getVerticalDirection(){return["NE-SW","NW-SE"].indexOf(this.getDirection())>-1?"N-S":"S-N"}getHorizontalDirection(){return["NW-SE","SW-NE"].indexOf(this.getDirection())>-1?"W-E":"E-W"}flipDirectionVertically(){switch(this.getDirection()){case"NW-SE":this.setDirection("SW-NE");break;case"NE-SW":this.setDirection("SE-NW");break;case"SE-NW":this.setDirection("NE-SW");break;case"SW-NE":this.setDirection("NW-SE");break}}flipDirectionHorizontally(){switch(this.getDirection()){case"NW-SE":this.setDirection("NE-SW");break;case"NE-SW":this.setDirection("NW-SE");break;case"SE-NW":this.setDirection("SW-NE");break;case"SW-NE":this.setDirection("SE-NW");break}}getTopStartCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}getTopLeftCorner(){return Ns($r,this)?this.getTopEndCorner():this.getTopStartCorner()}getBottomEndCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}getBottomRightCorner(){return Ns($r,this)?this.getBottomStartCorner():this.getBottomEndCorner()}getTopEndCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}getTopRightCorner(){return Ns($r,this)?this.getTopStartCorner():this.getTopEndCorner()}getBottomStartCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}getBottomLeftCorner(){return Ns($r,this)?this.getBottomEndCorner():this.getBottomStartCorner()}getOuterTopStartCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}getOuterTopLeftCorner(){return Ns($r,this)?this.getOuterTopEndCorner():this.getOuterTopStartCorner()}getOuterBottomEndCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}getOuterBottomRightCorner(){return Ns($r,this)?this.getOuterBottomStartCorner():this.getOuterBottomEndCorner()}getOuterTopEndCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}getOuterTopRightCorner(){return Ns($r,this)?this.getOuterTopStartCorner():this.getOuterTopEndCorner()}getOuterBottomStartCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}getOuterBottomLeftCorner(){return Ns($r,this)?this.getOuterBottomEndCorner():this.getOuterBottomStartCorner()}isCorner(e){return e.isEqual(this.getOuterTopLeftCorner())||e.isEqual(this.getOuterTopRightCorner())||e.isEqual(this.getOuterBottomLeftCorner())||e.isEqual(this.getOuterBottomRightCorner())}getOppositeCorner(e){if(!(e instanceof sf))return!1;if(e.isEqual(this.getOuterBottomEndCorner()))return this.getOuterTopStartCorner();if(e.isEqual(this.getOuterTopStartCorner()))return this.getOuterBottomEndCorner();if(e.isEqual(this.getOuterTopEndCorner()))return this.getOuterBottomStartCorner();if(e.isEqual(this.getOuterBottomStartCorner()))return this.getOuterTopEndCorner()}getBordersSharedWith(e){if(!this.includesRange(e))return[];const t={top:Math.min(this.from.row,this.to.row),bottom:Math.max(this.from.row,this.to.row),left:Math.min(this.from.col,this.to.col),right:Math.max(this.from.col,this.to.col)},i={top:Math.min(e.from.row,e.to.row),bottom:Math.max(e.from.row,e.to.row),left:Math.min(e.from.col,e.to.col),right:Math.max(e.from.col,e.to.col)},r=[];return t.top===i.top&&r.push("top"),t.right===i.right&&r.push(Ns($r,this)?"left":"right"),t.bottom===i.bottom&&r.push("bottom"),t.left===i.left&&r.push(Ns($r,this)?"right":"left"),r}getInner(){const e=this.getOuterTopStartCorner(),t=this.getOuterBottomEndCorner(),i=[];for(let r=e.row;r<=t.row;r++)for(let s=e.col;s<=t.col;s++)!(this.from.row===r&&this.from.col===s)&&!(this.to.row===r&&this.to.col===s)&&i.push(this._createCellCoords(r,s));return i}getAll(){const e=this.getOuterTopStartCorner(),t=this.getOuterBottomEndCorner(),i=[];for(let r=e.row;r<=t.row;r++)for(let s=e.col;s<=t.col;s++)e.row===r&&e.col===s?i.push(e):t.row===r&&t.col===s?i.push(t):i.push(this._createCellCoords(r,s));return i}forAll(e){const t=this.getOuterTopStartCorner(),i=this.getOuterBottomEndCorner();for(let r=t.row;r<=i.row;r++)for(let s=t.col;s<=i.col;s++)if(e(r,s)===!1)return}clone(){return new fy(this.highlight,this.from,this.to,Ns($r,this))}toObject(){return{from:this.from.toObject(),to:this.to.toObject()}}_createCellCoords(e,t){return new sf(e,t,Ns($r,this))}}function da(n,e,t){FEe(n,e),e.set(n,t)}function FEe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $e(n,e){return n.get(Y9(n,e))}function Uc(n,e,t){return n.set(Y9(n,e),t),t}function Y9(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ls=new WeakMap,mT=new WeakMap,Pi=new WeakMap,jf=new WeakMap,R0=new WeakMap,Eo=new WeakMap,vT=new WeakMap,Nm=new WeakMap,Ch=new WeakMap,fa=new WeakMap;let K9=class{constructor(e,t,i,r,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;da(this,Ls,void 0),da(this,mT,void 0),da(this,Pi,void 0),da(this,jf,void 0),da(this,R0,void 0),da(this,Eo,void 0),da(this,vT,void 0),da(this,Nm,void 0),da(this,Ch,[null,null]),da(this,fa,[null,null]),Uc(Ls,this,i),Uc(mT,this,t),Uc(Pi,this,s),Uc(jf,this,o),Uc(R0,this,a),Uc(Eo,this,r),Uc(vT,this,e),this.registerEvents()}registerEvents(){$e(Eo,this).addEventListener($e(Pi,this).holder,"contextmenu",i=>this.onContextMenu(i)),$e(Eo,this).addEventListener($e(Pi,this).TABLE,"mouseover",i=>this.onMouseOver(i)),$e(Eo,this).addEventListener($e(Pi,this).TABLE,"mouseout",i=>this.onMouseOut(i));const e=()=>{$e(Eo,this).addEventListener($e(Pi,this).holder,"touchstart",i=>this.onTouchStart(i)),$e(Eo,this).addEventListener($e(Pi,this).holder,"touchend",i=>this.onTouchEnd(i)),this.momentumScrolling||(this.momentumScrolling={}),$e(Eo,this).addEventListener($e(Pi,this).holder,"scroll",()=>{clearTimeout(this.momentumScrolling._timeout),this.momentumScrolling.ongoing||$e(Ls,this).getSetting("onBeforeTouchScroll"),this.momentumScrolling.ongoing=!0,this.momentumScrolling._timeout=setTimeout(()=>{this.touchApplied||(this.momentumScrolling.ongoing=!1,$e(Ls,this).getSetting("onAfterMomentumScroll"))},200)})},t=()=>{$e(Eo,this).addEventListener($e(Pi,this).holder,"mouseup",i=>this.onMouseUp(i)),$e(Eo,this).addEventListener($e(Pi,this).holder,"mousedown",i=>this.onMouseDown(i))};fc()?e():(MD()&&e(),t())}selectedCellWasTouched(e){const i=this.parentCell(e).coords;if($e(Nm,this)&&i){const[r,s]=[i.row,$e(Nm,this).from.row],[o,a]=[i.col,$e(Nm,this).from.col];return r===s&&o===a}return!1}parentCell(e){const t={},i=$e(Pi,this).TABLE,r=Wv(e,["TD","TH"],i);return r?(t.coords=$e(Pi,this).getCoords(r),t.TD=r):Ue(e,"wtBorder")&&Ue(e,"current")?(t.coords=$e(jf,this).getFocusSelection().cellRange.highlight,t.TD=$e(Pi,this).getCell(t.coords)):Ue(e,"wtBorder")&&Ue(e,"area")&&$e(jf,this).getAreaSelection().cellRange&&(t.coords=$e(jf,this).getAreaSelection().cellRange.to,t.TD=$e(Pi,this).getCell(t.coords)),t}onMouseDown(e){const t=$e(mT,this).rootDocument.activeElement,i=TD(qG,e.target),r=e.target;if(!["TD","TH"].includes(t.nodeName)&&(r===t||i(0)===t||i(1)===t))return;const s=this.parentCell(r);Ue(r,"corner")?$e(Ls,this).getSetting("onCellCornerMouseDown",e,r):s.TD&&$e(Ls,this).has("onCellMouseDown")&&this.callListener("onCellMouseDown",e,s.coords,s.TD),(e.button===0||this.touchApplied)&&s.TD&&($e(fa,this)[0]=s.TD,clearTimeout($e(Ch,this)[0]),$e(Ch,this)[0]=setTimeout(()=>{$e(fa,this)[0]=null},1e3))}onContextMenu(e){if($e(Ls,this).has("onCellContextMenu")){const t=this.parentCell(e.target);t.TD&&this.callListener("onCellContextMenu",e,t.coords,t.TD)}}onMouseOver(e){if(!$e(Ls,this).has("onCellMouseOver"))return;const t=$e(Pi,this).TABLE,i=Wv(e.target,["TD","TH"],t),r=$e(R0,this)||this;i&&i!==r.lastMouseOver&&Nu(i,t)&&(r.lastMouseOver=i,this.callListener("onCellMouseOver",e,$e(Pi,this).getCoords(i),i))}onMouseOut(e){if(!$e(Ls,this).has("onCellMouseOut"))return;const t=$e(Pi,this).TABLE,i=Wv(e.target,["TD","TH"],t),r=Wv(e.relatedTarget,["TD","TH"],t),s=$e(R0,this)||this;i&&i!==r&&Nu(i,t)&&(this.callListener("onCellMouseOut",e,$e(Pi,this).getCoords(i),i),r===null&&(s.lastMouseOver=null))}onMouseUp(e){const t=this.parentCell(e.target);t.TD&&$e(Ls,this).has("onCellMouseUp")&&this.callListener("onCellMouseUp",e,t.coords,t.TD),!(e.button!==0&&!this.touchApplied)&&(t.TD===$e(fa,this)[0]&&t.TD===$e(fa,this)[1]?(Ue(e.target,"corner")?this.callListener("onCellCornerDblClick",e,t.coords,t.TD):this.callListener("onCellDblClick",e,t.coords,t.TD),$e(fa,this)[0]=null,$e(fa,this)[1]=null):t.TD===$e(fa,this)[0]&&($e(fa,this)[1]=t.TD,clearTimeout($e(Ch,this)[1]),$e(Ch,this)[1]=setTimeout(()=>{$e(fa,this)[1]=null},500)))}onTouchStart(e){Uc(Nm,this,$e(jf,this).getFocusSelection().cellRange),this.touchApplied=!0,this.onMouseDown(e)}onTouchEnd(e){var t;const i=e.target,r=(t=this.parentCell(i))===null||t===void 0?void 0:t.coords,s=ke(r)&&r.row>=0&&r.col>=0;if(e.cancelable&&s&&$e(Ls,this).getSetting("isDataViewInstance")){const a=["A","BUTTON","INPUT"];ID()&&(y9()||C9())&&this.selectedCellWasTouched(i)&&!a.includes(i.tagName)?e.preventDefault():this.selectedCellWasTouched(i)||e.preventDefault()}this.onMouseUp(e),this.touchApplied=!1}callListener(e,t,i,r){const s=$e(Ls,this).getSettingPure(e);s&&s(t,i,r,$e(vT,this).call(this))}destroy(){clearTimeout($e(Ch,this)[0]),clearTimeout($e(Ch,this)[1]),$e(Eo,this).destroy()}};function bT(n,e,t){return(e=BEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BEe(n){var e=VEe(n,"string");return typeof e=="symbol"?e:e+""}function VEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class WEe{constructor(e,t,i){bT(this,"offset",void 0),bT(this,"total",void 0),bT(this,"countTH",void 0),this.offset=e,this.total=t,this.countTH=i}offsetted(e){return e+this.offset}unOffsetted(e){return e-this.offset}renderedToSource(e){return this.offsetted(e)}sourceToRendered(e){return this.unOffsetted(e)}offsettedTH(e){return e-this.countTH}unOffsettedTH(e){return e+this.countTH}visibleRowHeadedColumnToSourceColumn(e){return this.renderedToSource(this.offsettedTH(e))}sourceColumnToVisibleRowHeadedColumn(e){return this.unOffsettedTH(this.sourceToRendered(e))}}function wT(n,e,t){return(e=jEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jEe(n){var e=zEe(n,"string");return typeof e=="symbol"?e:e+""}function zEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class UEe{constructor(e,t,i){wT(this,"offset",void 0),wT(this,"total",void 0),wT(this,"countTH",void 0),this.offset=e,this.total=t,this.countTH=i}offsetted(e){return e+this.offset}unOffsetted(e){return e-this.offset}renderedToSource(e){return this.offsetted(e)}sourceToRendered(e){return this.unOffsetted(e)}offsettedTH(e){return e-this.countTH}unOffsettedTH(e){return e+this.countTH}visibleColHeadedRowToSourceRow(e){return this.renderedToSource(this.offsettedTH(e))}sourceRowToVisibleColHeadedRow(e){return this.unOffsettedTH(this.sourceToRendered(e))}}const GEe=0,K_=1,q_=2;function E0(n,e,t){return(e=YEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YEe(n){var e=KEe(n,"string");return typeof e=="symbol"?e:e+""}function KEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class iW{constructor(){E0(this,"currentSize",0),E0(this,"nextSize",0),E0(this,"currentOffset",0),E0(this,"nextOffset",0)}setSize(e){this.currentSize=this.nextSize,this.nextSize=e}setOffset(e){this.currentOffset=this.nextOffset,this.nextOffset=e}}function yT(n,e,t){return(e=qEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qEe(n){var e=XEe(n,"string");return typeof e=="symbol"?e:e+""}function XEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class ZEe{constructor(){yT(this,"size",new iW),yT(this,"workingSpace",GEe),yT(this,"sharedSize",null)}setSize(e){this.size.setSize(e)}setOffset(e){this.size.setOffset(e)}getViewSize(){return this.size}isShared(){return this.sharedSize instanceof iW}isPlaceOn(e){return this.workingSpace===e}append(e){this.workingSpace=K_,e.workingSpace=q_,this.sharedSize=e.getViewSize()}prepend(e){this.workingSpace=q_,e.workingSpace=K_,this.sharedSize=e.getViewSize()}}function zf(n,e,t){return(e=QEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QEe(n){var e=JEe(n,"string");return typeof e=="symbol"?e:e+""}function JEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class q9{constructor(e,t,i){zf(this,"rootNode",void 0),zf(this,"nodesPool",void 0),zf(this,"sizeSet",new ZEe),zf(this,"childNodeType",void 0),zf(this,"visualIndex",0),zf(this,"collectedNodes",[]),this.rootNode=e,this.nodesPool=t,this.childNodeType=i.toUpperCase()}setSize(e){return this.sizeSet.setSize(e),this}setOffset(e){return this.sizeSet.setOffset(e),this}isSharedViewSet(){return this.sizeSet.isShared()}getNode(e){return e<this.collectedNodes.length?this.collectedNodes[e]:null}getCurrentNode(){const e=this.collectedNodes.length;return e>0?this.collectedNodes[e-1]:null}getRenderedChildCount(){const{rootNode:e,sizeSet:t}=this;let i=0;if(this.isSharedViewSet()){let r=e.firstElementChild;for(;r;){if(r.tagName===this.childNodeType)i+=1;else if(t.isPlaceOn(K_))break;r=r.nextElementSibling}}else i=e.childElementCount;return i}start(){this.collectedNodes.length=0,this.visualIndex=0;const{rootNode:e,sizeSet:t}=this,i=this.isSharedViewSet(),{nextSize:r}=t.getViewSize();let s=this.getRenderedChildCount();for(;s<r;){const a=this.nodesPool();!i||i&&t.isPlaceOn(q_)?e.appendChild(a):e.insertBefore(a,e.firstChild),s+=1}const o=i&&t.isPlaceOn(K_);for(;s>r;)e.removeChild(o?e.firstChild:e.lastChild),s-=1}render(){const{rootNode:e,sizeSet:t}=this;let i=this.visualIndex;this.isSharedViewSet()&&t.isPlaceOn(q_)&&(i+=t.sharedSize.nextSize);let r=e.childNodes[i];if(r.tagName!==this.childNodeType){const s=this.nodesPool();e.replaceChild(s,r),r=s}this.collectedNodes.push(r),this.visualIndex+=1}end(){}}class X9 extends q9{prependView(e){return this.sizeSet.prepend(e.sizeSet),e.sizeSet.append(this.sizeSet),this}appendView(e){return this.sizeSet.append(e.sizeSet),e.sizeSet.prepend(this.sizeSet),this}}function exe(n,e,t){return(e=txe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function txe(n){var e=nxe(n,"string");return typeof e=="symbol"?e:e+""}function nxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class ixe{constructor(e){exe(this,"nodeType",void 0),this.nodeType=e.toUpperCase()}setRootDocument(e){this.rootDocument=e}obtain(){return this.rootDocument.createElement(this.nodeType)}}function Lm(n,e,t){return(e=rxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rxe(n){var e=sxe(n,"string");return typeof e=="symbol"?e:e+""}function sxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class gy{constructor(e,t){Lm(this,"nodesPool",null),Lm(this,"nodeType",void 0),Lm(this,"rootNode",void 0),Lm(this,"table",null),Lm(this,"renderedNodes",0),this.nodesPool=typeof e=="string"?new ixe(e):null,this.nodeType=e,this.rootNode=t}setTable(e){this.nodesPool&&this.nodesPool.setRootDocument(e.rootDocument),this.table=e}adjust(){}render(){}}function rW(n,e,t){return(e=oxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oxe(n){var e=axe(n,"string");return typeof e=="symbol"?e:e+""}function axe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class lxe extends gy{constructor(){super("TH"),rW(this,"orderViews",new WeakMap),rW(this,"sourceRowIndex",0)}obtainOrderView(e){let t;return this.orderViews.has(e)?t=this.orderViews.get(e):(t=new X9(e,i=>this.nodesPool.obtain(this.sourceRowIndex,i),this.nodeType),this.orderViews.set(e,t)),t}render(){const{rowsToRender:e,rowHeaderFunctions:t,rowHeadersCount:i,rows:r,cells:s}=this.table;for(let o=0;o<e;o++){const a=this.table.renderedRowToSource(o),l=r.getRenderedNode(o);this.sourceRowIndex=a;const c=this.obtainOrderView(l),u=s.obtainOrderView(l);c.appendView(u).setSize(i).setOffset(this.table.renderedColumnToSource(0)).start();for(let h=0;h<i;h++){c.render();const d=c.getCurrentNode();d.className="",d.removeAttribute("style"),Tf(d,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.isAriaEnabled()&&ze(d,[QSe(),a_e(),vD(h+1),Xp(-1)]),t[h](a,d,h)}c.end()}}}class cxe extends gy{constructor(e){super(null,e)}adjust(){const{columnHeadersCount:e,rowHeadersCount:t}=this.table;let i=this.rootNode.firstChild;if(e){const{columnsToRender:r}=this.table,s=r+t;for(let a=0,l=e;a<l;a++){for(i=this.rootNode.childNodes[a],i||(i=this.table.rootDocument.createElement("tr"),this.rootNode.appendChild(i)),this.renderedNodes=i.childNodes.length;this.renderedNodes<s;)i.appendChild(this.table.rootDocument.createElement("th")),this.renderedNodes+=1;for(;this.renderedNodes>s;)i.removeChild(i.lastChild),this.renderedNodes-=1}const o=this.rootNode.childNodes.length;if(o>e)for(let a=e;a<o;a++)this.rootNode.removeChild(this.rootNode.lastChild)}else i&&ia(i)}render(){const{columnHeadersCount:e}=this.table;this.table.isAriaEnabled()&&ze(this.rootNode,[jG()]);for(let t=0;t<e;t+=1){const{columnHeaderFunctions:i,columnsToRender:r,rowHeadersCount:s}=this.table,o=this.rootNode.childNodes[t];this.table.isAriaEnabled()&&ze(o,[eI(),YG(t+1)]);for(let a=-1*s;a<r;a+=1){const l=this.table.renderedColumnToSource(a),c=o.childNodes[a+s];c.className="",c.removeAttribute("style"),Tf(c,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.isAriaEnabled()&&ze(c,[vD(a+1+this.table.rowHeadersCount),Xp(-1),JSe(),...a>=0?[o_e()]:[eI()]]),i[t](l,c,t)}}}}let sW=!1;class uxe extends gy{constructor(e){super(null,e)}adjust(){const{columnsToRender:e,rowHeadersCount:t}=this.table,i=e+t;for(;this.renderedNodes<i;)this.rootNode.appendChild(this.table.rootDocument.createElement("col")),this.renderedNodes+=1;for(;this.renderedNodes>i;)this.rootNode.removeChild(this.rootNode.lastChild),this.renderedNodes-=1}render(){this.adjust();const{columnsToRender:e,rowHeadersCount:t}=this.table;!sW&&e>1e3&&(sW=!0,Yt(Kt`Performance tip: Handsontable rendered more than 1000 visible columns.\x20
        Consider limiting the number of rendered columns by specifying the table width and/or\x20
        turning off the "renderAllColumns" option.`));for(let r=0;r<t;r++){const s=this.table.renderedColumnToSource(r),o=this.table.columnUtils.getHeaderWidth(s);this.rootNode.childNodes[r].style.width=`${o}px`}for(let r=0;r<e;r++){const s=this.table.renderedColumnToSource(r),o=this.table.columnUtils.getStretchedColumnWidth(s);this.rootNode.childNodes[r+t].style.width=`${o}px`}const i=this.rootNode.firstChild;i&&ue(i,"rowHeader")}}function hxe(n,e,t){return(e=dxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dxe(n){var e=fxe(n,"string");return typeof e=="symbol"?e:e+""}function fxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const x0={rowEven:"ht__row_even",rowOdd:"ht__row_odd"};let oW=!1;class gxe extends gy{constructor(e){super("TR",e),hxe(this,"orderView",void 0),this.orderView=new q9(e,t=>this.nodesPool.obtain(t),this.nodeType)}getRenderedNode(e){return this.orderView.getNode(e)}render(){const{rowsToRender:e}=this.table;!oW&&e>1e3&&(oW=!0,Yt(Kt`Performance tip: Handsontable rendered more than 1000 visible rows.\x20
        Consider limiting the number of rendered rows by specifying the table height and/or\x20
        turning off the "renderAllRows" option.`)),this.table.isAriaEnabled()&&ze(this.rootNode,[jG()]),this.orderView.setSize(e).setOffset(this.table.renderedRowToSource(0)).start();for(let r=0;r<e;r++){this.orderView.render();const s=this.orderView.getCurrentNode(),o=this.table.renderedRowToSource(r);if(this.table.isAriaEnabled()){var t,i;ze(s,[eI(),YG(o+((t=(i=this.table.rowUtils)===null||i===void 0||(i=i.dataAccessObject)===null||i===void 0?void 0:i.columnHeaders.length)!==null&&t!==void 0?t:0)+1)])}Ze(s,[x0.rowEven,x0.rowOdd]),(o+1)%2===0?ue(s,x0.rowEven):ue(s,x0.rowOdd)}this.orderView.end()}}function aW(n,e,t){return(e=pxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pxe(n){var e=mxe(n,"string");return typeof e=="symbol"?e:e+""}function mxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class vxe extends gy{constructor(){super("TD"),aW(this,"orderViews",new WeakMap),aW(this,"sourceRowIndex",0)}obtainOrderView(e){let t;return this.orderViews.has(e)?t=this.orderViews.get(e):(t=new X9(e,i=>this.nodesPool.obtain(this.sourceRowIndex,i),this.nodeType),this.orderViews.set(e,t)),t}render(){const{rowsToRender:e,columnsToRender:t,rows:i,rowHeaders:r}=this.table;for(let a=0;a<e;a++){const l=this.table.renderedRowToSource(a),c=i.getRenderedNode(a);this.sourceRowIndex=l;const u=this.obtainOrderView(c),h=r.obtainOrderView(c);u.prependView(h).setSize(t).setOffset(this.table.renderedColumnToSource(0)).start();for(let d=0;d<t;d++){u.render();const f=u.getCurrentNode(),g=this.table.renderedColumnToSource(d);if(Ue(f,"hide")||(f.className=""),f.removeAttribute("style"),f.removeAttribute("dir"),Tf(f,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.cellRenderer(l,g,f),this.table.isAriaEnabled()){var s,o;ze(f,[...f.hasAttribute("role")?[]:[ZSe()],Xp(-1),vD(g+((s=(o=this.table.rowUtils)===null||o===void 0||(o=o.dataAccessObject)===null||o===void 0?void 0:o.rowHeaders.length)!==null&&s!==void 0?s:0)+1)])}}u.end()}}}function yi(n,e,t){return(e=bxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bxe(n){var e=wxe(n,"string");return typeof e=="symbol"?e:e+""}function wxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class yxe{constructor(e){let{cellRenderer:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};yi(this,"rootNode",void 0),yi(this,"rootDocument",void 0),yi(this,"rowHeaders",null),yi(this,"columnHeaders",null),yi(this,"colGroup",null),yi(this,"rows",null),yi(this,"cells",null),yi(this,"rowFilter",null),yi(this,"columnFilter",null),yi(this,"rowUtils",null),yi(this,"columnUtils",null),yi(this,"rowsToRender",0),yi(this,"columnsToRender",0),yi(this,"rowHeaderFunctions",[]),yi(this,"rowHeadersCount",0),yi(this,"columnHeaderFunctions",[]),yi(this,"columnHeadersCount",0),yi(this,"cellRenderer",void 0),yi(this,"activeOverlayName",void 0),this.rootNode=e,this.rootDocument=this.rootNode.ownerDocument,this.cellRenderer=t}setActiveOverlayName(e){this.activeOverlayName=e}setAxisUtils(e,t){this.rowUtils=e,this.columnUtils=t}setViewportSize(e,t){this.rowsToRender=e,this.columnsToRender=t}setFilters(e,t){this.rowFilter=e,this.columnFilter=t}setHeaderContentRenderers(e,t){this.rowHeaderFunctions=e,this.rowHeadersCount=e.length,this.columnHeaderFunctions=t,this.columnHeadersCount=t.length}setRenderers(){let{rowHeaders:e,columnHeaders:t,colGroup:i,rows:r,cells:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.setTable(this),t.setTable(this),i.setTable(this),r.setTable(this),s.setTable(this),this.rowHeaders=e,this.columnHeaders=t,this.colGroup=i,this.rows=r,this.cells=s}renderedRowToSource(e){return this.rowFilter.renderedToSource(e)}renderedColumnToSource(e){return this.columnFilter.renderedToSource(e)}isAriaEnabled(){return this.rowUtils.wtSettings.getSetting("ariaTags")}render(){this.colGroup.adjust(),this.columnHeaders.adjust(),this.rows.adjust(),this.rowHeaders.adjust(),this.columnHeaders.render(),this.rows.render(),this.rowHeaders.render(),this.cells.render(),this.columnUtils.calculateWidths(),this.colGroup.render();const{rowsToRender:e,rows:t}=this;for(let i=0;i<e;i++){const r=t.getRenderedNode(i);if(r.firstChild){const s=this.renderedRowToSource(i),o=this.rowUtils.getHeightByOverlayName(s,this.activeOverlayName);o?r.firstChild.style.height=`${o-1}px`:r.firstChild.style.height=""}}}}class Cxe{constructor(){let{TABLE:e,THEAD:t,COLGROUP:i,TBODY:r,rowUtils:s,columnUtils:o,cellRenderer:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.renderer=new yxe(e,{cellRenderer:a}),this.renderer.setRenderers({rowHeaders:new lxe,columnHeaders:new cxe(t),colGroup:new uxe(i),rows:new gxe(r),cells:new vxe}),this.renderer.setAxisUtils(s,o)}setActiveOverlayName(e){return this.renderer.setActiveOverlayName(e),this}setFilters(e,t){return this.renderer.setFilters(e,t),this}setViewportSize(e,t){return this.renderer.setViewportSize(e,t),this}setHeaderContentRenderers(e,t){return this.renderer.setHeaderContentRenderers(e,t),this}adjust(){this.renderer.adjust()}render(){this.renderer.render()}}function Hm(n,e,t){Sxe(n,e),e.set(n,t)}function Sxe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function T0(n,e,t){return(e=_xe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _xe(n){var e=Rxe(n,"string");return typeof e=="symbol"?e:e+""}function Rxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Zi(n,e){return n.get(Z9(n,e))}function $m(n,e,t){return n.set(Z9(n,e),t),t}function Z9(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var M0=new WeakMap,Uf=new WeakMap,Fm=new WeakMap,A0=new WeakMap,Sh=new WeakMap;class Exe{constructor(e){let{totalColumns:t,stretchMode:i,stretchingColumnWidthFn:r,columnWidthFn:s}=e;T0(this,"stretchAllRatio",0),T0(this,"stretchLastWidth",0),T0(this,"stretchAllColumnsWidth",[]),Hm(this,M0,0),T0(this,"needVerifyLastColumnWidth",!0),Hm(this,Uf,()=>0),Hm(this,Fm,o=>o),Hm(this,A0,o=>o),Hm(this,Sh,()=>"none"),$m(Uf,this,t),$m(Sh,this,i),$m(Fm,this,r??Zi(Fm,this)),$m(A0,this,s??Zi(A0,this))}refreshStretching(e){if(Zi(Sh,this).call(this)==="none")return;this.stretchAllRatio=0,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0,this.stretchLastWidth=0,$m(M0,this,e);let t=0;for(let r=0;r<Zi(Uf,this).call(this);r++){const s=this._getColumnWidth(r),o=Zi(Fm,this).call(this,void 0,r);typeof o=="number"?e-=o:t+=s}const i=e-t;if(Zi(Sh,this).call(this)==="all"&&i>0)this.stretchAllRatio=e/t,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0;else if(Zi(Sh,this).call(this)==="last"&&e!==1/0){const r=this._getColumnWidth(Zi(Uf,this).call(this)-1),s=i+r;this.stretchLastWidth=s>=0?s:r}}getStretchedColumnWidth(e,t){let i=null;return Zi(Sh,this).call(this)==="all"&&this.stretchAllRatio!==0?i=this._getStretchedAllColumnWidth(e,t):Zi(Sh,this).call(this)==="last"&&this.stretchLastWidth!==0&&(i=this._getStretchedLastColumnWidth(e)),i}_getStretchedAllColumnWidth(e,t){let i=0;if(!this.stretchAllColumnsWidth[e]){const r=Math.round(t*this.stretchAllRatio),s=Zi(Fm,this).call(this,r,e);s===void 0?this.stretchAllColumnsWidth[e]=r:this.stretchAllColumnsWidth[e]=isNaN(s)?this._getColumnWidth(e):s}if(this.stretchAllColumnsWidth.length===Zi(Uf,this).call(this)&&this.needVerifyLastColumnWidth){this.needVerifyLastColumnWidth=!1;for(let r=0;r<this.stretchAllColumnsWidth.length;r++)i+=this.stretchAllColumnsWidth[r];i!==Zi(M0,this)&&(this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length-1]+=Zi(M0,this)-i)}return this.stretchAllColumnsWidth[e]}_getStretchedLastColumnWidth(e){return e===Zi(Uf,this).call(this)-1?this.stretchLastWidth:null}_getColumnWidth(e){let t=Zi(A0,this).call(this,e);return isNaN(t)&&(t=q1),t}}function P0(n,e,t){return(e=xxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xxe(n){var e=Txe(n,"string");return typeof e=="symbol"?e:e+""}function Txe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Mxe{constructor(e,t){P0(this,"dataAccessObject",void 0),P0(this,"wtSettings",void 0),P0(this,"headerWidths",new Map),P0(this,"stretching",void 0),this.dataAccessObject=e,this.wtSettings=t,this.stretching=new Exe({totalColumns:()=>this.wtSettings.getSetting("totalColumns"),stretchMode:()=>this.wtSettings.getSetting("stretchH"),stretchingColumnWidthFn:(i,r)=>this.wtSettings.getSetting("onBeforeStretchingColumnWidth",i,r),columnWidthFn:i=>this.dataAccessObject.wtTable.getColumnWidth(i)})}getWidth(e){return this.wtSettings.getSetting("columnWidth",e)||this.wtSettings.getSetting("defaultColumnWidth")}getStretchedColumnWidth(e){let t=this.getWidth(e);const i=this.stretching.getStretchedColumnWidth(e,t);return i&&(t=i),t}getHeaderHeight(e){let t=this.wtSettings.getSetting("defaultRowHeight");const i=this.dataAccessObject.wtViewport.oversizedColumnHeaders[e];return i!==void 0&&(t=t?Math.max(t,i):i),t}getHeaderWidth(e){return this.headerWidths.get(this.dataAccessObject.wtTable.columnFilter.sourceToRendered(e))}refreshStretching(){const{wtTable:e,wtViewport:t,cloneSource:i}=this.dataAccessObject,r=i?i.wtTable.holder:e.holder,s=r.offsetHeight<r.scrollHeight?Ai():0;this.stretching.refreshStretching(t.getViewportWidth()-s)}calculateWidths(){const{wtSettings:e}=this;let t=e.getSetting("rowHeaderWidth");if(this.refreshStretching(),t=e.getSetting("onModifyRowHeaderWidth",t),t!=null){const i=e.getSetting("rowHeaders").length,r=e.getSetting("defaultColumnWidth");for(let s=0;s<i;s++){let o=Array.isArray(t)?t[s]:t;o=o??r,this.headerWidths.set(s,o)}}}}function lW(n,e,t){return(e=Axe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Axe(n){var e=Pxe(n,"string");return typeof e=="symbol"?e:e+""}function Pxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Ixe{constructor(e,t){lW(this,"dataAccessObject",void 0),lW(this,"wtSettings",void 0),this.dataAccessObject=e,this.wtSettings=t}getHeight(e){let t=this.wtSettings.getSetting("rowHeight",e);const i=this.dataAccessObject.wtViewport.oversizedRows[e];return i!==void 0&&(t=t===void 0?i:Math.max(t,i)),t}getHeightByOverlayName(e,t){let i=this.wtSettings.getSetting("rowHeightByOverlayName",e,t);const r=this.dataAccessObject.wtViewport.oversizedRows[e];return r!==void 0&&(i=i===void 0?r:Math.max(i,r)),i}}function ga(n,e,t){return(e=Oxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Oxe(n){var e=kxe(n,"string");return typeof e=="symbol"?e:e+""}function kxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let Jp=class{constructor(e,t,i,r,s){ga(this,"wtSettings",null),ga(this,"domBindings",void 0),ga(this,"TBODY",null),ga(this,"THEAD",null),ga(this,"COLGROUP",null),ga(this,"hasTableHeight",!0),ga(this,"hasTableWidth",!0),ga(this,"isTableVisible",!1),ga(this,"tableOffset",0),ga(this,"holderOffset",0),this.domBindings=i,this.isMaster=s==="master",this.name=s,this.dataAccessObject=e,this.facadeGetter=t,this.wtSettings=r,this.instance=this.dataAccessObject.wot,this.wot=this.dataAccessObject.wot,this.TABLE=i.rootTable,wD(this.TABLE),this.spreader=this.createSpreader(this.TABLE),this.hider=this.createHider(this.spreader),this.holder=this.createHolder(this.hider),this.wtRootElement=this.holder.parentNode,this.isMaster&&this.alignOverlaysWithTrimmingContainer(),this.fixTableDomTree(),this.rowFilter=null,this.columnFilter=null,this.correctHeaderWidth=!1;const o=this.wtSettings.getSettingPure("rowHeaderWidth");this.wtSettings.update("rowHeaderWidth",()=>this._modifyRowHeaderWidth(o)),this.rowUtils=new Ixe(this.dataAccessObject,this.wtSettings),this.columnUtils=new Mxe(this.dataAccessObject,this.wtSettings),this.tableRenderer=new Cxe({TABLE:this.TABLE,THEAD:this.THEAD,COLGROUP:this.COLGROUP,TBODY:this.TBODY,rowUtils:this.rowUtils,columnUtils:this.columnUtils,cellRenderer:this.wtSettings.getSettingPure("cellRenderer")})}is(e){return this.name===e}fixTableDomTree(){const e=this.domBindings.rootDocument;this.TBODY=this.TABLE.querySelector("tbody"),this.TBODY||(this.TBODY=e.createElement("tbody"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.querySelector("thead"),this.THEAD||(this.THEAD=e.createElement("thead"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.querySelector("colgroup"),this.COLGROUP||(this.COLGROUP=e.createElement("colgroup"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD))}createSpreader(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Ue(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.className="wtSpreader",t&&t.insertBefore(i,e),i.appendChild(e)),i.style.position="relative",this.wtSettings.getSetting("ariaTags")&&ze(i,[Ka()]),i}createHider(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Ue(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.className="wtHider",t&&t.insertBefore(i,e),i.appendChild(e)),this.wtSettings.getSetting("ariaTags")&&ze(i,[Ka()]),i}createHolder(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Ue(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.style.position="relative",i.className="wtHolder",t&&t.insertBefore(i,e),this.isMaster&&(i.parentNode.className+="ht_master handsontable",i.parentNode.setAttribute("dir",this.wtSettings.getSettingPure("rtlMode")?"rtl":"ltr"),this.wtSettings.getSetting("ariaTags")&&ze(i.parentNode,[Ka()])),i.appendChild(e)),this.wtSettings.getSetting("ariaTags")&&ze(i,[Ka()]),i}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{wtSettings:t}=this,{wtOverlays:i,wtViewport:r}=this.dataAccessObject,s=t.getSetting("totalRows"),o=t.getSetting("totalColumns"),a=t.getSetting("rowHeaders"),l=a.length,c=t.getSetting("columnHeaders"),u=c.length;let h=e;if(this.isMaster&&(i.beforeDraw(),this.holderOffset=xi(this.holder),h=r.createCalculators(h),l&&!t.getSetting("fixedColumnsStart"))){const f=i.inlineStartOverlay.getScrollPosition(),g=this.correctHeaderWidth;this.correctHeaderWidth=f!==0,g!==this.correctHeaderWidth&&(h=!1)}if(h)this.isMaster&&i.refresh(!0);else{this.isMaster?this.tableOffset=xi(this.TABLE):this.tableOffset=this.dataAccessObject.parentTableOffset;const f=s>0?this.getFirstRenderedRow():0,g=o>0?this.getFirstRenderedColumn():0;this.rowFilter=new UEe(f,s,u),this.columnFilter=new WEe(g,o,l);let p=!0;if(this.isMaster){this.alignOverlaysWithTrimmingContainer();const m={};this.wtSettings.getSetting("beforeDraw",!0,m),p=m.skipRender!==!0}if(p){this.tableRenderer.setHeaderContentRenderers(a,c),(this.is(za)||this.is(Hu))&&this.tableRenderer.setHeaderContentRenderers(a,[]),this.resetOversizedRows(),this.tableRenderer.setActiveOverlayName(this.name).setViewportSize(this.getRenderedRowsCount(),this.getRenderedColumnsCount()).setFilters(this.rowFilter,this.columnFilter).render();let m;if(this.isMaster&&(m=this.dataAccessObject.workspaceWidth,r.containerWidth=null,this.markOversizedColumnHeaders()),this.adjustColumnHeaderHeights(),(this.isMaster||this.is(za))&&this.markOversizedRows(),this.isMaster){this.wtSettings.getSetting("externalRowCalculator")||r.createVisibleCalculators(),i.refresh(!1),i.applyToDOM();const b=fn(this.hider),y=fn(this.TABLE);b!==0&&y!==b&&(this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),m!==r.getWorkspaceWidth()&&(r.containerWidth=null,this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),this.wtSettings.getSetting("onDraw",!0)}else this.is(za)&&this.dataAccessObject.cloneSource.wtOverlays.adjustElementsSize()}}let d=!1;return this.isMaster&&(d=i.topOverlay.resetFixedPosition(),i.bottomOverlay.clone&&(d=i.bottomOverlay.resetFixedPosition()||d),d=i.inlineStartOverlay.resetFixedPosition()||d,i.topInlineStartCornerOverlay&&i.topInlineStartCornerOverlay.resetFixedPosition(),i.bottomInlineStartCornerOverlay&&i.bottomInlineStartCornerOverlay.clone&&i.bottomInlineStartCornerOverlay.resetFixedPosition()),d?(i.refreshAll(),i.adjustElementsSize()):this.dataAccessObject.selectionManager.setActiveOverlay(this.facadeGetter()).render(h),this.isMaster&&i.afterDraw(),this.dataAccessObject.drawn=!0,this}markIfOversizedColumnHeader(e){const t=this.columnFilter.renderedToSource(e);let i=this.wtSettings.getSetting("columnHeaders").length;const r=this.wtSettings.getSetting("defaultRowHeight");let s,o,a;const l=this.wtSettings.getSetting("columnHeaderHeight")||[];for(;i;)i-=1,s=this.getColumnHeaderHeight(i),o=this.getColumnHeader(t,i),o&&(a=Cd(o),(!s&&r<a||s<a)&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=a),Array.isArray(l)?l[i]!==null&&l[i]!==void 0&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l[i]):isNaN(l)||(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l),this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]<(l[i]||l)&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l[i]||l))}adjustColumnHeaderHeights(){const{wtSettings:e}=this,t=this.THEAD.childNodes,i=this.dataAccessObject.wtViewport.oversizedColumnHeaders,r=e.getSetting("columnHeaders");for(let s=0,o=r.length;s<o;s++)if(i[s]){if(!t[s]||t[s].childNodes.length===0)return;t[s].childNodes[0].style.height=`${i[s]}px`}}resetOversizedRows(){const{wtSettings:e}=this,{wtViewport:t}=this.dataAccessObject;if(!(!this.isMaster&&!this.is(za))&&!e.getSetting("externalRowCalculator")){const i=this.getRenderedRowsCount();for(let r=0;r<i;r++){const s=this.rowFilter.renderedToSource(r);t.oversizedRows&&t.oversizedRows[s]&&(t.oversizedRows[s]=void 0)}}}getCell(e){let t=e.row,i=e.col;const r=this.wtSettings.getSetting("onModifyGetCellCoords",t,i);if(r&&Array.isArray(r)&&([t,i]=r),this.isRowBeforeRenderedRows(t))return-1;if(this.isRowAfterRenderedRows(t))return-2;if(this.isColumnBeforeRenderedColumns(i))return-3;if(this.isColumnAfterRenderedColumns(i))return-4;const s=this.getRow(t);if(!s&&t>=0)throw new Error("TR was expected to be rendered but is not");const o=s.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(i)];if(!o&&i>=0)throw new Error("TD or TH was expected to be rendered but is not");return o}getRow(e){let t=null,i=null;if(e<0){var r;t=(r=this.rowFilter)===null||r===void 0?void 0:r.sourceRowToVisibleColHeadedRow(e),i=this.THEAD}else{var s;t=(s=this.rowFilter)===null||s===void 0?void 0:s.sourceToRendered(e),i=this.TBODY}return t!==void 0&&i!==void 0?i.childNodes.length<t+1?!1:i.childNodes[t]:!1}getColumnHeader(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=this.THEAD.childNodes[t];return i==null?void 0:i.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e)]}getColumnHeaders(e){const t=[],i=this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e);return this.THEAD.childNodes.forEach(r=>{const s=r.childNodes[i];s&&t.push(s)}),t}getRowHeader(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=this.wtSettings.getSetting("rowHeaders").length;if(t>=i)return;const r=this.rowFilter.sourceToRendered(e),s=r<0?this.rowFilter.sourceRowToVisibleColHeadedRow(e):r,a=(r<0?this.THEAD:this.TBODY).childNodes[s];return a==null?void 0:a.childNodes[t]}getRowHeaders(e){const t=[],i=this.wtSettings.getSetting("rowHeaders").length;for(let r=0;r<i;r++){const s=this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)],o=s==null?void 0:s.childNodes[r];o&&t.push(o)}return t}getCoords(e){let t=e;if(t.nodeName!=="TD"&&t.nodeName!=="TH"&&(t=Gu(t,["TD","TH"])),t===null)return null;const i=t.parentNode,r=i.parentNode;let s=QG(i),o=t.cellIndex;return ou(lf,t,this.wtRootElement)||ou(of,t,this.wtRootElement)?r.nodeName==="THEAD"&&(s-=r.childNodes.length):ou(Hu,t,this.wtRootElement)||ou(za,t,this.wtRootElement)?s=this.wtSettings.getSetting("totalRows")-r.childNodes.length+s:r===this.THEAD?s=this.rowFilter.visibleColHeadedRowToSourceRow(s):s=this.rowFilter.renderedToSource(s),ou(lf,t,this.wtRootElement)||ou(af,t,this.wtRootElement)||ou(Hu,t,this.wtRootElement)?o=this.columnFilter.offsettedTH(o):o=this.columnFilter.visibleRowHeadedColumnToSourceColumn(o),this.wot.createCellCoords(s,o)}markOversizedRows(){if(this.wtSettings.getSetting("externalRowCalculator"))return;let e=this.TBODY.childNodes.length;const t=e*this.wtSettings.getSetting("defaultRowHeight"),i=Cd(this.TBODY)-1;let r,s,o,a,l;if(!(t===i&&!this.wtSettings.getSetting("fixedRowsBottom")))for(;e;)e-=1,o=this.rowFilter.renderedToSource(e),r=this.getRowHeight(o),a=this.getTrForRow(o),l=a.querySelector("th"),l?s=Cd(l):s=Cd(a)-1,(!r&&this.wtSettings.getSetting("defaultRowHeight")<s||r<s)&&(s+=1,this.dataAccessObject.wtViewport.oversizedRows[o]=s)}getTrForRow(e){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)]}isColumnHeaderRendered(e){if(e>=0)return!1;const i=this.wtSettings.getSetting("rowHeaders").length;return Math.abs(e)<=i}isRowHeaderRendered(e){if(e>=0)return!1;const i=this.wtSettings.getSetting("columnHeaders").length;return Math.abs(e)<=i}isRowBeforeRenderedRows(e){const t=this.getFirstRenderedRow();return e<0&&t<=0?!this.isRowHeaderRendered(e):e<t}isRowAfterRenderedRows(e){return e>this.getLastRenderedRow()}isColumnBeforeRenderedColumns(e){const t=this.getFirstRenderedColumn();return e<0&&t<=0?!this.isColumnHeaderRendered(e):e<t}isColumnAfterRenderedColumns(e){return this.columnFilter&&e>this.getLastRenderedColumn()}isColumnAfterViewport(e){return this.columnFilter&&e>this.getLastVisibleColumn()}isRowAfterViewport(e){return this.rowFilter&&e>this.getLastVisibleRow()}isColumnBeforeViewport(e){return this.columnFilter&&this.columnFilter.sourceToRendered(e)<0&&e>=0}isLastRowFullyVisible(){return this.getLastVisibleRow()===this.getLastRenderedRow()}isLastColumnFullyVisible(){return this.getLastVisibleColumn()===this.getLastRenderedColumn()}allRowsInViewport(){return this.wtSettings.getSetting("totalRows")===this.getVisibleRowsCount()}allColumnsInViewport(){return this.wtSettings.getSetting("totalColumns")===this.getVisibleColumnsCount()}getRowHeight(e){return this.rowUtils.getHeight(e)}getColumnHeaderHeight(e){return this.columnUtils.getHeaderHeight(e)}getColumnWidth(e){return this.columnUtils.getWidth(e)}getStretchedColumnWidth(e){return this.columnUtils.getStretchedColumnWidth(e)}hasDefinedSize(){return this.hasTableHeight&&this.hasTableWidth}getWidth(){return fn(this.TABLE)}getHeight(){return ni(this.TABLE)}getTotalWidth(){const e=fn(this.hider);return e!==0?e:this.getWidth()}getTotalHeight(){const e=ni(this.hider);return e!==0?e:this.getHeight()}isVisible(){return nf(this.TABLE)}_modifyRowHeaderWidth(e){let t=cn(e)?e():null;return Array.isArray(t)?(t=[...t],t[t.length-1]=this._correctRowHeaderWidth(t[t.length-1])):t=this._correctRowHeaderWidth(t),t}_correctRowHeaderWidth(e){let t=e;return typeof e!="number"&&(t=this.wtSettings.getSetting("defaultColumnWidth")),this.correctHeaderWidth&&(t+=1),t}};const Dxe="stickyRowsBottom",jD={getFirstRenderedRow(){const n=this.wtSettings.getSetting("totalRows"),e=this.wtSettings.getSetting("fixedRowsBottom"),t=n-e;return n===0||e===0?-1:t<0?0:t},getFirstVisibleRow(){return this.getFirstRenderedRow()},getFirstPartiallyVisibleRow(){return this.getFirstRenderedRow()},getLastRenderedRow(){return this.wtSettings.getSetting("totalRows")-1},getLastVisibleRow(){return this.getLastRenderedRow()},getLastPartiallyVisibleRow(){return this.getLastRenderedRow()},getRenderedRowsCount(){const n=this.wtSettings.getSetting("totalRows");return Math.min(this.wtSettings.getSetting("fixedRowsBottom"),n)},getVisibleRowsCount(){return this.getRenderedRowsCount()},getColumnHeadersCount(){return 0}};Sl(jD,"MIXIN_NAME",Dxe,{writable:!1,enumerable:!1});const Nxe="stickyColumnsStart",X1={getFirstRenderedColumn(){return this.wtSettings.getSetting("totalColumns")===0?-1:0},getFirstVisibleColumn(){return this.getFirstRenderedColumn()},getFirstPartiallyVisibleColumn(){return this.getFirstRenderedColumn()},getLastRenderedColumn(){return this.getRenderedColumnsCount()-1},getLastVisibleColumn(){return this.getLastRenderedColumn()},getLastPartiallyVisibleColumn(){return this.getLastRenderedColumn()},getRenderedColumnsCount(){const n=this.wtSettings.getSetting("totalColumns");return Math.min(this.wtSettings.getSetting("fixedColumnsStart"),n)},getVisibleColumnsCount(){return this.getRenderedColumnsCount()},getRowHeadersCount(){return this.dataAccessObject.rowHeaders.length}};Sl(X1,"MIXIN_NAME",Nxe,{writable:!1,enumerable:!1});class zD extends Jp{constructor(e,t,i,r){super(e,t,i,r,Hu)}}Xt(zD,jD);Xt(zD,X1);const of="top",za="bottom",af="inline_start",lf="top_inline_start_corner",Hu="bottom_inline_start_corner",Q9=[of,za,af,lf,Hu],Lxe=new Map([[of,`ht_clone_${of}`],[za,`ht_clone_${za}`],[af,`ht_clone_${af} ht_clone_left`],[lf,`ht_clone_${lf} ht_clone_top_left_corner`],[Hu,`ht_clone_${Hu} ht_clone_bottom_left_corner`]]);function Hxe(n,e){$xe(n,e),e.add(n)}function $xe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fxe(n,e,t){return(e=Bxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Bxe(n){var e=Vxe(n,"string");return typeof e=="symbol"?e:e+""}function Vxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function I0(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Bm=new WeakSet;class Wxe{constructor(e){Hxe(this,Bm),Fxe(this,"dataAccessObject",void 0),this.dataAccessObject=e}scrollViewport(e,t,i,r,s){const o=this.scrollViewportHorizontally(e.col,i,s),a=this.scrollViewportVertically(e.row,t,r);return o||a}scrollViewportHorizontally(e,t,i){const{drawn:r,totalColumns:s}=this.dataAccessObject;if(!r||!Number.isInteger(e)||e<0||e>s)return!1;const o=t===void 0&&i===void 0,{fixedColumnsStart:a,inlineStartOverlay:l}=this.dataAccessObject;if(o&&e<a||(e=this.dataAccessObject.wtSettings.getSetting("onBeforeViewportScrollHorizontally",e),!Number.isInteger(e)||e<0||e>s))return!1;const c=this.getFirstVisibleColumn(),u=this.getLastVisibleColumn();let h=!1;return(o&&(e<c||e>u)||!o)&&(h=l.scrollTo(e,o?e>=this.getLastPartiallyVisibleColumn():t)),h}scrollViewportVertically(e,t,i){const{drawn:r,totalRows:s}=this.dataAccessObject;if(!r||!Number.isInteger(e)||e<0||e>s)return!1;const o=t===void 0&&i===void 0,{fixedRowsBottom:a,fixedRowsTop:l,topOverlay:c}=this.dataAccessObject;if(o&&(e<l||e>s-a-1)||(e=this.dataAccessObject.wtSettings.getSetting("onBeforeViewportScrollVertically",e),!Number.isInteger(e)||e<0||e>s))return!1;const u=this.getFirstVisibleRow(),h=this.getLastVisibleRow();let d=!1;return(o&&(e<u||e>h)||!o)&&(d=c.scrollTo(e,o?e>=this.getLastPartiallyVisibleRow():i)),d}getFirstVisibleRow(){return this.dataAccessObject.wtTable.getFirstVisibleRow()}getLastVisibleRow(){return I0(Bm,this,uW).call(this,this.dataAccessObject.wtTable.getLastVisibleRow())}getFirstPartiallyVisibleRow(){return this.dataAccessObject.wtTable.getFirstPartiallyVisibleRow()}getLastPartiallyVisibleRow(){return I0(Bm,this,uW).call(this,this.dataAccessObject.wtTable.getLastPartiallyVisibleRow())}getFirstVisibleColumn(){return this.dataAccessObject.wtTable.getFirstVisibleColumn()}getLastVisibleColumn(){return I0(Bm,this,cW).call(this,this.dataAccessObject.wtTable.getLastVisibleColumn())}getFirstPartiallyVisibleColumn(){return this.dataAccessObject.wtTable.getFirstPartiallyVisibleColumn()}getLastPartiallyVisibleColumn(){return I0(Bm,this,cW).call(this,this.dataAccessObject.wtTable.getLastPartiallyVisibleColumn())}}function cW(n){const{wtSettings:e,inlineStartOverlay:t,wtTable:i,wtViewport:r,totalColumns:s,rootWindow:o}=this.dataAccessObject;if(t.mainTableScrollableElement===o){const a=e.getSetting("rtlMode");let l=null;if(a){const u=i.TABLE.getBoundingClientRect(),d=this.dataAccessObject.rootWindow.document.documentElement.offsetWidth;l=Math.abs(u.right-d)}else l=xi(i.wtRootElement).left;const c=Math.abs(CD(o,o));if(l>c){const u=SD(o);let h=r.getRowHeaderWidth();for(let d=1;d<=s;d++)if(h+=t.sumCellSizes(d-1,d),l+h-c>=u){n=d-2;break}}}return n}function uW(n){const{topOverlay:e,wtTable:t,wtViewport:i,totalRows:r,rootWindow:s}=this.dataAccessObject;if(e.mainTableScrollableElement===s){const o=xi(t.wtRootElement),a=B1(s,s);if(o.top>a){const l=Cd(s);let c=i.getColumnHeaderHeight();for(let u=1;u<=r;u++)if(c+=e.sumCellSizes(u-1,u),o.top+c-a>=l){n=u-2;break}}}return n}function xo(n,e,t){return(e=jxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jxe(n){var e=zxe(n,"string");return typeof e=="symbol"?e:e+""}function zxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class UD{get eventManager(){return new co(this)}constructor(e,t){xo(this,"wtTable",void 0),xo(this,"wtScroll",void 0),xo(this,"wtViewport",void 0),xo(this,"wtOverlays",void 0),xo(this,"selectionManager",void 0),xo(this,"wtEvent",void 0),xo(this,"guid",`wt_${gD()}`),xo(this,"drawInterrupted",!1),xo(this,"drawn",!1),xo(this,"domBindings",void 0),xo(this,"wtSettings",void 0),this.domBindings={rootTable:e,rootDocument:e.ownerDocument,rootWindow:e.ownerDocument.defaultView},this.wtSettings=t,this.wtScroll=new Wxe(this.createScrollDao())}findOriginalHeaders(){const e=[];if(this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(let t=0,i=this.wtTable.THEAD.childNodes[0].childNodes.length;t<i;t++)e.push(this.wtTable.THEAD.childNodes[0].childNodes[t].innerHTML);this.wtSettings.getSetting("columnHeaders").length||this.wtSettings.update("columnHeaders",[function(t,i){Yu(i,e[t])}])}}createCellCoords(e,t){return new sf(e,t,this.wtSettings.getSetting("rtlMode"))}createCellRange(e,t,i){return new fy(e,t,i,this.wtSettings.getSetting("rtlMode"))}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.drawInterrupted=!1,this.wtTable.isVisible()?this.wtTable.draw(e):this.drawInterrupted=!0,this}getCell(e){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1))return this.wtTable.getCell(e);const i=this.wtSettings.getSetting("totalRows"),r=this.wtSettings.getSetting("fixedRowsTop"),s=this.wtSettings.getSetting("fixedRowsBottom"),o=this.wtSettings.getSetting("fixedColumnsStart");if(e.row<r&&e.col<o)return this.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.getCell(e);if(e.row<r)return this.wtOverlays.topOverlay.clone.wtTable.getCell(e);if(e.col<o&&e.row>=i-s){if(this.wtOverlays.bottomInlineStartCornerOverlay&&this.wtOverlays.bottomInlineStartCornerOverlay.clone)return this.wtOverlays.bottomInlineStartCornerOverlay.clone.wtTable.getCell(e)}else{if(e.col<o)return this.wtOverlays.inlineStartOverlay.clone.wtTable.getCell(e);if(e.row<i&&e.row>=i-s&&this.wtOverlays.bottomOverlay&&this.wtOverlays.bottomOverlay.clone)return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(e)}return this.wtTable.getCell(e)}scrollViewport(e,t,i,r,s){return e.col<0||e.row<0?!1:this.wtScroll.scrollViewport(e,t,i,r,s)}scrollViewportHorizontally(e,t,i){return e<0?!1:this.wtScroll.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return e<0?!1:this.wtScroll.scrollViewportVertically(e,t,i)}getViewport(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]}destroy(){this.wtOverlays.destroy(),this.wtEvent.destroy()}createScrollDao(){const e=this;return{get drawn(){return e.drawn},get topOverlay(){return e.wtOverlays.topOverlay},get inlineStartOverlay(){return e.wtOverlays.inlineStartOverlay},get wtTable(){return e.wtTable},get wtViewport(){return e.wtViewport},get wtSettings(){return e.wtSettings},get rootWindow(){return e.domBindings.rootWindow},get totalRows(){return e.wtSettings.getSetting("totalRows")},get totalColumns(){return e.wtSettings.getSetting("totalColumns")},get fixedRowsTop(){return e.wtSettings.getSetting("fixedRowsTop")},get fixedRowsBottom(){return e.wtSettings.getSetting("fixedRowsBottom")},get fixedColumnsStart(){return e.wtSettings.getSetting("fixedColumnsStart")}}}getTableDao(){const e=this;return{get wot(){return e},get parentTableOffset(){return e.cloneSource.wtTable.tableOffset},get cloneSource(){return e.cloneSource},get workspaceWidth(){return e.wtViewport.getWorkspaceWidth()},get wtViewport(){return e.wtViewport},get wtOverlays(){return e.wtOverlays},get selectionManager(){return e.selectionManager},get drawn(){return e.drawn},set drawn(t){e.drawn=t},get wtTable(){return e.wtTable},get startColumnRendered(){return e.wtViewport.columnsRenderCalculator.startColumn},get startColumnVisible(){return e.wtViewport.columnsVisibleCalculator.startColumn},get startColumnPartiallyVisible(){return e.wtViewport.columnsPartiallyVisibleCalculator.startColumn},get endColumnRendered(){return e.wtViewport.columnsRenderCalculator.endColumn},get endColumnVisible(){return e.wtViewport.columnsVisibleCalculator.endColumn},get endColumnPartiallyVisible(){return e.wtViewport.columnsPartiallyVisibleCalculator.endColumn},get countColumnsRendered(){return e.wtViewport.columnsRenderCalculator.count},get countColumnsVisible(){return e.wtViewport.columnsVisibleCalculator.count},get startRowRendered(){return e.wtViewport.rowsRenderCalculator.startRow},get startRowVisible(){return e.wtViewport.rowsVisibleCalculator.startRow},get startRowPartiallyVisible(){return e.wtViewport.rowsPartiallyVisibleCalculator.startRow},get endRowRendered(){return e.wtViewport.rowsRenderCalculator.endRow},get endRowVisible(){return e.wtViewport.rowsVisibleCalculator.endRow},get endRowPartiallyVisible(){return e.wtViewport.rowsPartiallyVisibleCalculator.endRow},get countRowsRendered(){return e.wtViewport.rowsRenderCalculator.count},get countRowsVisible(){return e.wtViewport.rowsVisibleCalculator.count},get columnHeaders(){return e.wtSettings.getSetting("columnHeaders")},get rowHeaders(){return e.wtSettings.getSetting("rowHeaders")}}}}function hW(n,e,t){return(e=Uxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Uxe(n){var e=Gxe(n,"string");return typeof e=="symbol"?e:e+""}function Gxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Yxe extends UD{constructor(e,t,i){super(e,t),hW(this,"cloneSource",void 0),hW(this,"cloneOverlay",void 0);const r=this.wtSettings.getSetting("facade",this);this.cloneSource=i.source,this.cloneOverlay=i.overlay,this.wtTable=this.cloneOverlay.createTable(this.getTableDao(),r,this.domBindings,this.wtSettings),this.wtViewport=i.viewport,this.selectionManager=i.selectionManager,this.wtEvent=new K9(r,this.domBindings,this.wtSettings,this.eventManager,this.wtTable,this.selectionManager,i.event),this.findOriginalHeaders()}}function Kxe(n,e,t){return(e=qxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qxe(n){var e=Xxe(n,"string");return typeof e=="symbol"?e:e+""}function Xxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class py{constructor(e,t,i,r,s){Kxe(this,"wtSettings",null),Sl(this,"wot",e,{writable:!1}),this.domBindings=s,this.facadeGetter=t,this.wtSettings=r;const{TABLE:o,hider:a,spreader:l,holder:c,wtRootElement:u}=this.wot.wtTable;this.instance=this.wot,this.type=i,this.mainTableScrollableElement=null,this.TABLE=o,this.hider=a,this.spreader=l,this.holder=c,this.wtRootElement=u,this.trimmingContainer=rf(this.hider.parentNode.parentNode),this.needFullRender=this.shouldBeRendered(),this.clone=this.makeClone()}hasRenderingStateChanged(){return this.needFullRender!==this.shouldBeRendered()}updateStateOfRendering(e){e==="before"&&this.shouldBeRendered()?this.needFullRender=!0:e==="after"&&!this.shouldBeRendered()&&(this.needFullRender=!1)}shouldBeRendered(){return!0}updateTrimmingContainer(){this.trimmingContainer=rf(this.hider.parentNode.parentNode)}updateMainScrollableElement(){const{wtTable:e}=this.wot,{rootWindow:t}=this.domBindings;t.getComputedStyle(e.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden"?this.mainTableScrollableElement=this.wot.wtTable.holder:this.mainTableScrollableElement=mw(e.TABLE)}getRelativeCellPosition(e,t,i){if(this.clone.wtTable.holder.contains(e)===!1){Yt(`The provided element is not a child of the ${this.type} overlay`);return}const r=this.mainTableScrollableElement===this.domBindings.rootWindow,s=i<this.wtSettings.getSetting("fixedColumnsStart"),o=t<this.wtSettings.getSetting("fixedRowsTop"),a=t>=this.wtSettings.getSetting("totalRows")-this.wtSettings.getSetting("fixedRowsBottom"),l=this.clone.wtTable.spreader,c={start:this.getRelativeStartPosition(l),top:l.offsetTop},u={start:this.getRelativeStartPosition(e),top:e.offsetTop};let h=null;return r?h=this.getRelativeCellPositionWithinWindow(o,s,u,c):h=this.getRelativeCellPositionWithinHolder(o,a,s,u,c),h}getRelativeStartPosition(e){return this.isRtl()?e.offsetParent.offsetWidth-e.offsetLeft-e.offsetWidth:e.offsetLeft}getRelativeCellPositionWithinWindow(e,t,i,r){const s=this.wot.wtTable.wtRootElement.getBoundingClientRect();let o=0,a=0;if(!t)o=r.start;else{let l=s.left;this.isRtl()&&(l=this.domBindings.rootWindow.innerWidth-(s.left+s.width+Ai())),o=l<=0?-1*l:0}return e?a=this.clone.wtTable.TABLE.getBoundingClientRect().top-s.top:a=r.top,{start:i.start+o,top:i.top+a}}getRelativeCellPositionWithinHolder(e,t,i,r,s){const o={horizontal:this.wot.wtOverlays.inlineStartOverlay.getScrollPosition(),vertical:this.wot.wtOverlays.topOverlay.getScrollPosition()};let a=0,l=0;if(i||(a=o.horizontal-s.start),t){const c=this.wot.wtTable.wtRootElement.getBoundingClientRect();l=this.clone.wtTable.TABLE.getBoundingClientRect().top*-1+c.top}else e||(l=o.vertical-s.top);return{start:r.start-a,top:r.top-l}}makeClone(){if(Q9.indexOf(this.type)===-1)throw new Error(`Clone type "${this.type}" is not supported.`);const{wtTable:e,wtSettings:t}=this.wot,{rootDocument:i,rootWindow:r}=this.domBindings,s=i.createElement("div"),o=i.createElement("table"),a=e.wtRootElement.parentNode;s.className=`${Lxe.get(this.type)} handsontable`,s.setAttribute("dir",this.isRtl()?"rtl":"ltr"),s.style.position="absolute",s.style.top=0,s.style.overflow="visible",this.isRtl()?s.style.right=0:s.style.left=0,t.getSetting("ariaTags")&&ze(s,[Ka()]),o.className=e.TABLE.className,e.TABLE.getAttribute("role")&&o.setAttribute("role",e.TABLE.getAttribute("role")),s.appendChild(o),a.appendChild(s);const c=this.wtSettings.getSetting("preventOverflow");return c===!0||c==="horizontal"&&this.type===of||c==="vertical"&&this.type===af?this.mainTableScrollableElement=r:r.getComputedStyle(a).getPropertyValue("overflow")==="hidden"?this.mainTableScrollableElement=e.holder:this.mainTableScrollableElement=mw(e.TABLE),new Yxe(o,this.wtSettings,{source:this.wot,overlay:this,viewport:this.wot.wtViewport,event:this.wot.wtEvent,selectionManager:this.wot.selectionManager})}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.needFullRender&&this.clone.draw(e)}reset(){const e=this.clone.wtTable.holder,t=this.clone.wtTable.hider,i=e.style,r=t.style,s=e.parentNode.style;[i,r,s].forEach(o=>{o.width="",o.height=""})}isRtl(){return this.wtSettings.getSetting("rtlMode")}destroy(){this.clone.eventManager.destroy()}}class Zxe extends py{constructor(e,t,i,r,s,o){super(e,t,Hu,i,r),this.bottomOverlay=s,this.inlineStartOverlay=o}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new zD(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderBottomOverlay")&&this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){const{wot:e}=this;if(this.updateTrimmingContainer(),!e.wtTable.holder.parentNode)return!1;const t=this.clone.wtTable.holder.parentNode;if(t.style.top="",this.trimmingContainer===this.domBindings.rootWindow){const s=this.inlineStartOverlay.getOverlayOffset(),o=this.bottomOverlay.getOverlayOffset();t.style[this.isRtl()?"right":"left"]=`${s}px`,t.style.bottom=`${o}px`}else cy(t),this.repositionOverlay();let i=ni(this.clone.wtTable.TABLE);const r=fn(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(i=0),t.style.height=`${i}px`,t.style.width=`${r}px`,!1}repositionOverlay(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i}=this.domBindings,r=this.clone.wtTable.holder.parentNode;let s=0;t.hasVerticalScroll()||(s+=t.getWorkspaceHeight()-e.getTotalHeight()),t.hasVerticalScroll()&&t.hasHorizontalScroll()&&(s+=Ai(i)),r.style.bottom=`${s}px`}}const Qxe="calculatedColumns",Z1={getFirstRenderedColumn(){const n=this.dataAccessObject.startColumnRendered;return n===null?-1:n},getFirstVisibleColumn(){const n=this.dataAccessObject.startColumnVisible;return n===null?-1:n},getFirstPartiallyVisibleColumn(){const n=this.dataAccessObject.startColumnPartiallyVisible;return n===null?-1:n},getLastRenderedColumn(){const n=this.dataAccessObject.endColumnRendered;return n===null?-1:n},getLastVisibleColumn(){const n=this.dataAccessObject.endColumnVisible;return n===null?-1:n},getLastPartiallyVisibleColumn(){const n=this.dataAccessObject.endColumnPartiallyVisible;return n===null?-1:n},getRenderedColumnsCount(){return this.dataAccessObject.countColumnsRendered},getVisibleColumnsCount(){return this.dataAccessObject.countColumnsVisible},getRowHeadersCount(){return this.dataAccessObject.rowHeaders.length}};Sl(Z1,"MIXIN_NAME",Qxe,{writable:!1,enumerable:!1});class GD extends Jp{constructor(e,t,i,r){super(e,t,i,r,za)}}Xt(GD,jD);Xt(GD,Z1);function Jxe(n,e,t){return(e=eTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eTe(n){var e=tTe(n,"string");return typeof e=="symbol"?e:e+""}function tTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class nTe extends py{constructor(e,t,i,r){super(e,t,za,i,r),Jxe(this,"cachedFixedRowsBottom",-1),this.cachedFixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom")}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new GD(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderBottomOverlay")}resetFixedPosition(){if(!this.needFullRender||!this.shouldBeRendered()||!this.wot.wtTable.holder.parentNode)return!1;const{rootWindow:e}=this.domBindings,t=this.clone.wtTable.holder.parentNode;t.style.top="";let i=0;const r=this.wtSettings.getSetting("preventOverflow");this.trimmingContainer===e&&(!r||r!=="vertical")?(i=this.getOverlayOffset(),t.style.bottom=`${i}px`):(i=this.getScrollPosition(),this.repositionOverlay());const s=this.adjustHeaderBordersPosition(i);return this.adjustElementsSize(),s}repositionOverlay(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i}=this.domBindings,r=this.clone.wtTable.holder.parentNode;let s=0;t.hasVerticalScroll()||(s+=t.getWorkspaceHeight()-e.getTotalHeight()),t.hasVerticalScroll()&&t.hasHorizontalScroll()&&(s+=Ai(i)),r.style.bottom=`${s}px`}setScrollPosition(e){const{rootWindow:t}=this.domBindings;let i=!1;return this.mainTableScrollableElement===t?(t.scrollTo(F1(t),e),i=!0):this.mainTableScrollableElement.scrollTop!==e&&(this.mainTableScrollableElement.scrollTop=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollHorizontally")}sumCellSizes(e,t){const{wtTable:i,wtSettings:r}=this.wot,s=r.getSetting("defaultRowHeight");let o=e,a=0;for(;o<t;){const l=i.getRowHeight(o);a+=l===void 0?s:l,o+=1}return a}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i,rootWindow:r}=this.domBindings,s=Ai(i),a=this.clone.wtTable.holder.parentNode.style,l=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==r||l==="horizontal"){let u=t.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(u-=s),u=Math.min(u,e.wtRootElement.scrollWidth),a.width=`${u}px`}else a.width="";this.clone.wtTable.holder.style.width=a.width;let c=ni(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(c=0),a.height=`${c}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable;this.clone.wtTable.hider.style.width=this.hider.style.width,e.style.width=e.parentNode.style.width,e.style.height=e.parentNode.style.height}applyToDOM(){const e=this.wtSettings.getSetting("totalRows");if(typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number")this.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style.top="0";else throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){const e=this.isRtl()?"right":"left",{spreader:t}=this.clone.wtTable;typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number"?t.style[e]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`:t.style[e]=""}scrollTo(e,t){let i=this.getTableParentOffset();const s=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder;let o=0;t&&s.offsetHeight!==s.clientHeight&&(o=Ai(this.domBindings.rootDocument)),t?(i+=this.sumCellSizes(0,e+1),i-=this.wot.wtViewport.getViewportHeight(),i+=1):i+=this.sumCellSizes(this.wtSettings.getSetting("fixedRowsBottom"),e),i+=o,this.setScrollPosition(i)}getTableParentOffset(){return this.mainTableScrollableElement===this.domBindings.rootWindow?this.wot.wtTable.holderOffset.top:0}getScrollPosition(){return B1(this.mainTableScrollableElement,this.domBindings.rootWindow)}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="vertical")){const r=this.wot.wtTable.getTotalHeight(),s=this.clone.wtTable.getTotalHeight(),o=r-s,a=this.domBindings.rootDocument.documentElement.clientHeight;i=Math.max(this.getTableParentOffset()-this.getScrollPosition()-a+r,0),i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){const t=this.wtSettings.getSetting("fixedRowsBottom"),i=this.cachedFixedRowsBottom!==t,r=this.wtSettings.getSetting("columnHeaders");let s=!1;if((i||t===0)&&r.length>0){const o=this.wot.wtTable.holder.parentNode,a=Ue(o,"innerBorderBottom");this.cachedFixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom"),e||this.wtSettings.getSetting("totalRows")===0?(ue(o,"innerBorderBottom"),s=!a):(Ze(o,"innerBorderBottom"),s=a)}return s}}const iTe="calculatedRows",YD={getFirstRenderedRow(){const n=this.dataAccessObject.startRowRendered;return n===null?-1:n},getFirstVisibleRow(){const n=this.dataAccessObject.startRowVisible;return n===null?-1:n},getFirstPartiallyVisibleRow(){const n=this.dataAccessObject.startRowPartiallyVisible;return n===null?-1:n},getLastRenderedRow(){const n=this.dataAccessObject.endRowRendered;return n===null?-1:n},getLastVisibleRow(){const n=this.dataAccessObject.endRowVisible;return n===null?-1:n},getLastPartiallyVisibleRow(){const n=this.dataAccessObject.endRowPartiallyVisible;return n===null?-1:n},getRenderedRowsCount(){return this.dataAccessObject.countRowsRendered},getVisibleRowsCount(){return this.dataAccessObject.countRowsVisible},getColumnHeadersCount(){return this.dataAccessObject.columnHeaders.length}};Sl(YD,"MIXIN_NAME",iTe,{writable:!1,enumerable:!1});class KD extends Jp{constructor(e,t,i,r){super(e,t,i,r,af)}}Xt(KD,YD);Xt(KD,X1);const rTe="localHooks",Ki={_localHooks:Object.create(null),addLocalHook(n,e){return this._localHooks[n]||(this._localHooks[n]=[]),this._localHooks[n].push(e),this},runLocalHooks(n,e,t,i,r,s,o){if(this._localHooks[n]){const a=this._localHooks[n].length;for(let l=0;l<a;l++)U_(this._localHooks[n][l],this,e,t,i,r,s,o)}},clearLocalHooks(){return this._localHooks={},this}};Sl(Ki,"MIXIN_NAME",rTe,{writable:!1,enumerable:!1});let J9=class{constructor(e,t){this.settings=e,this.cellRange=t||null}isEmpty(){return this.cellRange===null}add(e){return this.isEmpty()?this.cellRange=this.settings.createCellRange(e):this.cellRange.expand(e),this}replace(e,t){if(!this.isEmpty()){if(this.cellRange.from.isEqual(e))return this.cellRange.from=t,!0;if(this.cellRange.to.isEqual(e))return this.cellRange.to=t,!0}return!1}clear(){return this.cellRange=null,this}getCorners(){const e=this.cellRange.getOuterTopStartCorner(),t=this.cellRange.getOuterBottomEndCorner();return[e.row,e.col,t.row,t.col]}destroy(){this.runLocalHooks("destroy")}};Xt(J9,Ki);const eY="active-header",qD="header",XD="area",ZD="focus",sTe="fill",oTe="row",aTe="column",lTe="custom-selection",QD=Object.freeze({width:"6px",height:"6px",borderWidth:"1px",borderStyle:"solid",borderColor:"#FFF"});var cTe=DD;cTe("flat");function uTe(n,e){tY(n,e),e.add(n)}function dW(n,e,t){tY(n,e),e.set(n,t)}function tY(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ii(n,e){return n.get(Eb(n,e))}function fW(n,e,t){return n.set(Eb(n,e),t),t}function Eb(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var To=new WeakMap,jr=new WeakMap,O0=new WeakSet;class hTe{constructor(){uTe(this,O0),dW(this,To,void 0),dW(this,jr,void 0)}setActiveOverlay(e){return fW(jr,this,e),this}setActiveSelection(e){return fW(To,this,e),this}scan(){const e=ii(To,this).settings.selectionType,t=new Set;return e==="active-header"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i))):e==="area"?this.scanCellsRange(i=>t.add(i)):e==="focus"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i)),this.scanCellsRange(i=>t.add(i))):e==="fill"?this.scanCellsRange(i=>t.add(i)):e==="header"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i))):e==="row"?(this.scanRowsInHeadersRange(i=>t.add(i)),this.scanRowsInCellsRange(i=>t.add(i))):e==="column"&&(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanColumnsInCellsRange(i=>t.add(i))),t}scanColumnsInHeadersRange(e){const[t,i,r,s]=ii(To,this).getCorners(),{wtTable:o}=ii(jr,this),a=o.getRenderedColumnsCount(),l=o.getColumnHeadersCount();let c=0;for(let u=-o.getRowHeadersCount();u<a;u++){const h=o.columnFilter.renderedToSource(u);if(!(h<i||h>s)){for(let d=-l;d<0;d++){if(d<t||d>r)continue;const f=d+l;let g=o.getColumnHeader(h,f);const p=ii(jr,this).getSetting("onBeforeHighlightingColumnHeader",h,f,{selectionType:ii(To,this).settings.selectionType,columnCursor:c,selectionWidth:s-i+1});p!==null&&(p!==h&&(g=o.getColumnHeader(p,f)),e(g))}c+=1}}}scanRowsInHeadersRange(e){const[t,i,r,s]=ii(To,this).getCorners(),{wtTable:o}=ii(jr,this),a=o.getRenderedRowsCount(),l=o.getRowHeadersCount();let c=0;for(let u=-o.getColumnHeadersCount();u<a;u++){const h=o.rowFilter.renderedToSource(u);if(!(h<t||h>r)){for(let d=-l;d<0;d++){if(d<i||d>s)continue;const f=d+l;let g=o.getRowHeader(h,f);const p=ii(jr,this).getSetting("onBeforeHighlightingRowHeader",h,f,{selectionType:ii(To,this).settings.selectionType,rowCursor:c,selectionHeight:r-t+1});p!==null&&(p!==h&&(g=o.getRowHeader(p,f)),e(g))}c+=1}}}scanCellsRange(e){const[t,i,r,s]=ii(To,this).getCorners(),{wtTable:o}=ii(jr,this);Eb(O0,this,CT).call(this,(a,l)=>{if(a>=t&&a<=r&&l>=i&&l<=s){const c=o.getCell(ii(jr,this).createCellCoords(a,l)),u=ii(jr,this).getSetting("onAfterDrawSelection",a,l,ii(To,this).settings.layerLevel);typeof u=="string"&&ue(c,u),e(c)}})}scanRowsInCellsRange(e){const[t,,i]=ii(To,this).getCorners(),{wtTable:r}=ii(jr,this);Eb(O0,this,CT).call(this,(s,o)=>{if(s>=t&&s<=i){const a=r.getCell(ii(jr,this).createCellCoords(s,o));e(a)}})}scanColumnsInCellsRange(e){const[,t,,i]=ii(To,this).getCorners(),{wtTable:r}=ii(jr,this);Eb(O0,this,CT).call(this,(s,o)=>{if(o>=t&&o<=i){const a=r.getCell(ii(jr,this).createCellCoords(s,o));e(a)}})}}function CT(n){const{wtTable:e}=ii(jr,this),t=e.getRenderedRowsCount(),i=e.getRenderedColumnsCount();for(let r=0;r<t;r+=1){const s=e.rowFilter.renderedToSource(r);for(let o=0;o<i;o+=1)n(s,e.columnFilter.renderedToSource(o))}}class gW{constructor(e,t){t&&(this.eventManager=e.eventManager,this.instance=e,this.wot=e,this.settings=t,this.mouseDown=!1,this.main=null,this.top=null,this.bottom=null,this.start=null,this.end=null,this.topStyle=null,this.bottomStyle=null,this.startStyle=null,this.endStyle=null,this.cornerDefaultStyle=QD,this.cornerCenterPointOffset=-(parseInt(this.cornerDefaultStyle.width,10)/2),this.corner=null,this.cornerStyle=null,this.createBorders(t),this.registerListeners())}registerListeners(){const e=this.wot.rootDocument.body;this.eventManager.addEventListener(e,"mousedown",()=>this.onMouseDown()),this.eventManager.addEventListener(e,"mouseup",()=>this.onMouseUp());for(let t=0,i=this.main.childNodes.length;t<i;t++){const r=this.main.childNodes[t];this.eventManager.addEventListener(r,"mouseenter",s=>this.onMouseEnter(s,this.main.childNodes[t]))}}onMouseDown(){this.mouseDown=!0}onMouseUp(){this.mouseDown=!1}onMouseEnter(e,t){if(!this.mouseDown||!this.wot.getSetting("hideBorderOnMouseDownOver"))return;e.preventDefault(),mo(e);const i=this,r=this.wot.rootDocument.body,s=t.getBoundingClientRect();t.style.display="none";function o(l){if(l.clientY<Math.floor(s.top)||l.clientY>Math.ceil(s.top+s.height)||l.clientX<Math.floor(s.left)||l.clientX>Math.ceil(s.left+s.width))return!0}function a(l){o(l)&&(i.eventManager.removeEventListener(r,"mousemove",a),t.style.display="block")}this.eventManager.addEventListener(r,"mousemove",a)}createBorders(e){const{rootDocument:t}=this.wot;this.main=t.createElement("div");const i=["top","start","bottom","end","corner"];let r=this.main.style;r.position="absolute",r.top=0,r.left=0;for(let a=0;a<5;a++){const l=i[a],c=t.createElement("div");c.className=`wtBorder ${this.settings.className||""}`,this.settings[l]&&this.settings[l].hide&&(c.className+=" hidden"),r=c.style,r.backgroundColor=this.settings[l]&&this.settings[l].color?this.settings[l].color:e.border.color,r.height=this.settings[l]&&this.settings[l].width?`${this.settings[l].width}px`:`${e.border.width}px`,r.width=this.settings[l]&&this.settings[l].width?`${this.settings[l].width}px`:`${e.border.width}px`,this.main.appendChild(c)}this.top=this.main.childNodes[0],this.start=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.end=this.main.childNodes[3],this.topStyle=this.top.style,this.startStyle=this.start.style,this.bottomStyle=this.bottom.style,this.endStyle=this.end.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),fc()&&this.instance.getSetting("isDataViewInstance")&&this.createMultipleSelectorHandles(),this.disappear();const{wtTable:s}=this.wot;let o=s.bordersHolder;o||(o=t.createElement("div"),o.className="htBorders",s.bordersHolder=o,s.spreader.appendChild(o)),o.appendChild(this.main)}createMultipleSelectorHandles(){const{rootDocument:e}=this.wot;this.selectionHandles={top:e.createElement("DIV"),topHitArea:e.createElement("DIV"),bottom:e.createElement("DIV"),bottomHitArea:e.createElement("DIV")};const t=10,i=40;this.selectionHandles.top.className="topSelectionHandle topLeftSelectionHandle",this.selectionHandles.topHitArea.className="topSelectionHandle-HitArea topLeftSelectionHandle-HitArea",this.selectionHandles.bottom.className="bottomSelectionHandle bottomRightSelectionHandle",this.selectionHandles.bottomHitArea.className="bottomSelectionHandle-HitArea bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={top:this.selectionHandles.top.style,topHitArea:this.selectionHandles.topHitArea.style,bottom:this.selectionHandles.bottom.style,bottomHitArea:this.selectionHandles.bottomHitArea.style};const r={position:"absolute",height:`${i}px`,width:`${i}px`,"border-radius":`${parseInt(i/1.5,10)}px`};ct(r,(o,a)=>{this.selectionHandles.styles.bottomHitArea[a]=o,this.selectionHandles.styles.topHitArea[a]=o});const s={position:"absolute",height:`${t}px`,width:`${t}px`,"border-radius":`${parseInt(t/1.5,10)}px`,background:"#F5F5FF",border:"1px solid #4285c8"};ct(s,(o,a)=>{this.selectionHandles.styles.bottom[a]=o,this.selectionHandles.styles.top[a]=o}),this.main.appendChild(this.selectionHandles.top),this.main.appendChild(this.selectionHandles.bottom),this.main.appendChild(this.selectionHandles.topHitArea),this.main.appendChild(this.selectionHandles.bottomHitArea)}isPartRange(e,t){const i=this.wot.selectionManager.getAreaSelection();return!!(i.cellRange&&(e!==i.cellRange.to.row||t!==i.cellRange.to.col))}updateMultipleSelectionHandlesPosition(e,t,i,r,s,o){const l=this.wot.wtSettings.getSetting("rtlMode")?"right":"left",{top:c,topHitArea:u,bottom:h,bottomHitArea:d}=this.selectionHandles.styles,f=parseInt(c.borderWidth,10),g=parseInt(c.width,10),p=parseInt(u.width,10),m=this.wot.wtTable.getWidth(),b=this.wot.wtTable.getHeight();c.top=`${parseInt(i-g-1,10)}px`,c[l]=`${parseInt(r-g-1,10)}px`,u.top=`${parseInt(i-p/4*3,10)}px`,u[l]=`${parseInt(r-p/4*3,10)}px`;const y=Math.min(parseInt(r+s,10),m-g-f*2),w=Math.min(parseInt(r+s-p/4,10),m-p-f*2);h[l]=`${y}px`,d[l]=`${w}px`;const R=Math.min(parseInt(i+o,10),b-g-f*2),E=Math.min(parseInt(i+o-p/4,10),b-p-f*2);h.top=`${R}px`,d.top=`${E}px`,this.settings.border.cornerVisible&&this.settings.border.cornerVisible()?(c.display="block",u.display="block",this.isPartRange(e,t)?(h.display="none",d.display="none"):(h.display="block",d.display="block")):(c.display="none",h.display="none",u.display="none",d.display="none"),e===this.wot.wtSettings.getSetting("fixedRowsTop")||t===this.wot.wtSettings.getSetting("fixedColumnsStart")?(c.zIndex="9999",u.zIndex="9999"):(c.zIndex="",u.zIndex="")}appear(e){if(this.disabled)return;const{wtTable:t,rootDocument:i,rootWindow:r}=this.wot;let s,o,a,l,c,u;const h=t.getRenderedRowsCount();for(let G=0;G<h;G+=1){const U=t.rowFilter.renderedToSource(G);if(U>=e[0]&&U<=e[2]){s=U,c=e[0];break}}for(let G=h-1;G>=0;G-=1){const U=t.rowFilter.renderedToSource(G);if(U>=e[0]&&U<=e[2]){o=U;break}}const d=t.getRenderedColumnsCount();for(let G=0;G<d;G+=1){const U=t.columnFilter.renderedToSource(G);if(U>=e[1]&&U<=e[3]){a=U,u=e[1];break}}for(let G=d-1;G>=0;G-=1){const U=t.columnFilter.renderedToSource(G);if(U>=e[1]&&U<=e[3]){l=U;break}}if(s===void 0||a===void 0){this.disappear();return}let f=t.getCell(this.wot.createCellCoords(s,a));const g=s!==o||a!==l,p=g?t.getCell(this.wot.createCellCoords(o,l)):f,m=xi(f),b=g?xi(p):m,y=xi(t.TABLE),w=fn(t.TABLE),R=m.top,E=m.left,_=this.wot.wtSettings.getSetting("rtlMode");let T=0,I=0;if(_){const G=fn(f),U=r.innerWidth-y.left-w;I=E+G-b.left,T=r.innerWidth-E-G-U-1}else I=b.left+fn(p)-E,T=E-y.left-1;if(this.isEntireColumnSelected(s,o)){const G=this.getDimensionsFromHeader("columns",a,l,c,y);let U=null;G&&([U,T,I]=G),U&&(f=U)}let x=R-y.top-1,P=b.top+ni(p)-R;if(this.isEntireRowSelected(a,l)){const G=this.getDimensionsFromHeader("rows",s,o,u,y);let U=null;G&&([U,x,P]=G),U&&(f=U)}const D=cl(f,r);parseInt(D.borderTopWidth,10)>0&&(x+=1,P=P>0?P-1:0),parseInt(D[_?"borderRightWidth":"borderLeftWidth"],10)>0&&(T+=1,I=I>0?I-1:0);const B=_?"right":"left";this.topStyle.top=`${x}px`,this.topStyle[B]=`${T}px`,this.topStyle.width=`${I}px`,this.topStyle.display="block",this.startStyle.top=`${x}px`,this.startStyle[B]=`${T}px`,this.startStyle.height=`${P}px`,this.startStyle.display="block";const V=Math.floor(this.settings.border.width/2);this.bottomStyle.top=`${x+P-V}px`,this.bottomStyle[B]=`${T}px`,this.bottomStyle.width=`${I}px`,this.bottomStyle.display="block",this.endStyle.top=`${x}px`,this.endStyle[B]=`${T+I-V}px`,this.endStyle.height=`${P+1}px`,this.endStyle.display="block";let z=this.settings.border.cornerVisible;z=typeof z=="function"?z(this.settings.layerLevel):z;const L=this.wot.getSetting("onModifyGetCellCoords",o,l);let[k,F]=[o,l];if(L&&Array.isArray(L)&&([,,k,F]=L),fc()||!z||this.isPartRange(k,F))this.cornerStyle.display="none";else{this.cornerStyle.top=`${x+P+this.cornerCenterPointOffset-1}px`,this.cornerStyle[B]=`${T+I+this.cornerCenterPointOffset-1}px`,this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="none";let G=rf(t.TABLE);const U=G===r;U&&(G=i.documentElement);const se=parseInt(this.cornerDefaultStyle.width,10)/2,v=parseInt(this.cornerDefaultStyle.height,10)/2;if(l===this.wot.getSetting("totalColumns")-1){const C=U?p.getBoundingClientRect().left:p.offsetLeft;let S=!1,A=0;_?(A=C-parseInt(this.cornerDefaultStyle.width,10)/2,S=A<0):(A=C+fn(p)+parseInt(this.cornerDefaultStyle.width,10)/2,S=A>=SD(G)),S&&(this.cornerStyle[B]=`${Math.floor(T+I+this.cornerCenterPointOffset-se)}px`,this.cornerStyle[_?"borderLeftWidth":"borderRightWidth"]=0)}o===this.wot.getSetting("totalRows")-1&&(U?p.getBoundingClientRect().top:p.offsetTop)+ni(p)+parseInt(this.cornerDefaultStyle.height,10)/2>=Cd(G)&&(this.cornerStyle.top=`${Math.floor(x+P+this.cornerCenterPointOffset-v)}px`,this.cornerStyle.borderBottomWidth=0),this.cornerStyle.display="block"}fc()&&this.instance.getSetting("isDataViewInstance")&&this.updateMultipleSelectionHandlesPosition(o,l,x,T,I,P)}isEntireColumnSelected(e,t){return e===this.wot.wtTable.getFirstRenderedRow()&&t===this.wot.wtTable.getLastRenderedRow()}isEntireRowSelected(e,t){return e===this.wot.wtTable.getFirstRenderedColumn()&&t===this.wot.wtTable.getLastRenderedColumn()}getDimensionsFromHeader(e,t,i,r,s){const{wtTable:o}=this.wot,a=o.wtRootElement.parentNode;let l=null,c=null,u=null,h=null,d=null,f=null,g=null,p=null;switch(e){case"rows":l=function(){return o.getRowHeader(...arguments)},c=function(){return ni(...arguments)},u="ht__selection--rows",f="top";break;case"columns":l=function(){return o.getColumnHeader(...arguments)},c=function(){return fn(...arguments)},u="ht__selection--columns",f="left";break}if(a.classList.contains(u)){const m=this.wot.getSetting("columnHeaders").length;if(g=l(t,m-r),p=l(i,m-r),!g||!p)return!1;const b=xi(g),y=xi(p);return g&&p&&(h=b[f]-s[f]-1,d=y[f]+c(p)-b[f]),[g,h,d]}return!1}changeBorderStyle(e,t){const i=this[e].style,r=t[e];!r||r.hide?ue(this[e],"hidden"):(Ue(this[e],"hidden")&&Ze(this[e],"hidden"),i.backgroundColor=r.color,(e==="top"||e==="bottom")&&(i.height=`${r.width}px`),(e==="start"||e==="end")&&(i.width=`${r.width}px`))}changeBorderToDefaultStyle(e){const t={width:1,color:"#000"},i=this[e].style;i.backgroundColor=t.color,i.width=`${t.width}px`,i.height=`${t.width}px`}toggleHiddenClass(e,t){this.changeBorderToDefaultStyle(e),t?ue(this[e],"hidden"):Ze(this[e],"hidden")}disappear(){this.topStyle.display="none",this.bottomStyle.display="none",this.startStyle.display="none",this.endStyle.display="none",this.cornerStyle.display="none",fc()&&this.instance.getSetting("isDataViewInstance")&&(this.selectionHandles.styles.top.display="none",this.selectionHandles.styles.topHitArea.display="none",this.selectionHandles.styles.bottom.display="none",this.selectionHandles.styles.bottomHitArea.display="none")}destroy(){this.eventManager.destroyWithOwnEventsOnly(),this.main.parentNode.removeChild(this.main)}}function dTe(n,e){nY(n,e),e.add(n)}function Gf(n,e,t){nY(n,e),e.set(n,t)}function nY(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gt(n,e){return n.get(JD(n,e))}function pW(n,e,t){return n.set(JD(n,e),t),t}function JD(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var tr=new WeakMap,Yr=new WeakMap,ST=new WeakMap,jv=new WeakMap,_T=new WeakMap,_h=new WeakMap,mW=new WeakSet;class fTe{constructor(e){dTe(this,mW),Gf(this,tr,void 0),Gf(this,Yr,void 0),Gf(this,ST,new hTe),Gf(this,jv,new WeakMap),Gf(this,_T,new WeakSet),Gf(this,_h,new Map),pW(Yr,this,e)}setActiveOverlay(e){return pW(tr,this,e),gt(ST,this).setActiveOverlay(gt(tr,this)),gt(jv,this).has(gt(tr,this))||gt(jv,this).set(gt(tr,this),new Set),this}getFocusSelection(){return gt(Yr,this)!==null?gt(Yr,this).getFocus():null}getAreaSelection(){return gt(Yr,this)!==null?gt(Yr,this).createLayeredArea():null}getBorderInstance(e){if(!e.settings.border)return null;if(gt(_h,this).has(e)){const i=gt(_h,this).get(e);if(i.has(gt(tr,this)))return i.get(gt(tr,this));const r=new gW(gt(tr,this),e.settings);return i.set(gt(tr,this),r),r}const t=new gW(gt(tr,this),e.settings);return gt(_h,this).set(e,new Map([[gt(tr,this),t]])),t}getBorderInstances(e){var t,i;return Array.from((t=(i=gt(_h,this).get(e))===null||i===void 0?void 0:i.values())!==null&&t!==void 0?t:[])}destroyBorders(e){gt(_h,this).get(e).forEach(t=>t.destroy()),gt(_h,this).delete(e)}render(e){if(gt(Yr,this)===null)return;e&&JD(mW,this,gTe).call(this);const t=Array.from(gt(Yr,this)),i=new Map,r=new Map;for(let s=0;s<t.length;s++){const o=t[s],{className:a,headerAttributes:l,createLayers:c,selectionType:u}=o.settings;gt(_T,this).has(o)||(gt(_T,this).add(o),o.addLocalHook("destroy",()=>this.destroyBorders(o)));const h=this.getBorderInstance(o);if(o.isEmpty()){h==null||h.disappear();continue}a&&gt(ST,this).setActiveSelection(o).scan().forEach(g=>{if(i.has(g)){const p=i.get(g);p.has(a)&&c===!0?p.set(a,p.get(a)+1):p.set(a,1)}else i.set(g,new Map([[a,1]]));l&&(r.has(g)||r.set(g,[]),g.nodeName==="TH"&&r.get(g).push(...l))});const d=o.getCorners();gt(tr,this).getSetting("onBeforeDrawBorders",d,u),h==null||h.appear(d)}i.forEach((s,o)=>{var a;const l=Array.from(s).map(c=>{let[u,h]=c;return h===1?u:[u,...Array.from({length:h-1},(d,f)=>`${u}-${f+1}`)]}).flat();l.forEach(c=>gt(jv,this).get(gt(tr,this)).add(c)),ue(o,l),o.nodeName==="TD"&&Array.isArray((a=gt(Yr,this).options)===null||a===void 0?void 0:a.cellAttributes)&&ze(o,gt(Yr,this).options.cellAttributes)}),Array.from(r.keys()).forEach(s=>{ze(s,[...r.get(s)])})}}function gTe(){const n=gt(jv,this).get(gt(tr,this)),e=gt(tr,this).wtSettings.getSetting("onBeforeRemoveCellClassNames");if(Array.isArray(e))for(let t=0;t<e.length;t++)n.add(e[t]);n.forEach(t=>{var i,r;const s=gt(tr,this).wtTable.TABLE.querySelectorAll(`.${t}`);let o=[];Array.isArray((i=gt(Yr,this).options)===null||i===void 0?void 0:i.cellAttributes)&&(o=gt(Yr,this).options.cellAttributes.map(a=>a[0])),Array.isArray((r=gt(Yr,this).options)===null||r===void 0?void 0:r.headerAttributes)&&(o=[...o,...gt(Yr,this).options.headerAttributes.map(a=>a[0])]);for(let a=0,l=s.length;a<l;a++)Ze(s[a],t),Tf(s[a],o)}),n.clear()}class pTe extends py{constructor(e,t,i,r){super(e,t,af,i,r)}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new KD(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){const{wtTable:e}=this.wot;if(!this.needFullRender||!this.shouldBeRendered()||!e.holder.parentNode)return!1;const{rootWindow:t}=this.domBindings,i=this.clone.wtTable.holder.parentNode,r=this.wtSettings.getSetting("preventOverflow");let s=0;this.trimmingContainer===t&&(!r||r!=="horizontal")?(s=this.getOverlayOffset()*(this.isRtl()?-1:1),V1(i,`${s}px`,"0px")):(s=this.getScrollPosition(),cy(i));const o=this.adjustHeaderBordersPosition(s);return this.adjustElementsSize(),o}setScrollPosition(e){const{rootWindow:t}=this.domBindings;let i=!1;return this.isRtl()&&(e=-e),this.mainTableScrollableElement===t&&t.scrollX!==e?(t.scrollTo(e,yD(t)),i=!0):this.mainTableScrollableElement.scrollLeft!==e&&(this.mainTableScrollableElement.scrollLeft=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollVertically")}sumCellSizes(e,t){const i=this.wtSettings.getSetting("defaultColumnWidth");let r=e,s=0;for(;r<t;)s+=this.wot.wtTable.getStretchedColumnWidth(r)||i,r+=1;return s}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e}=this.wot,{rootDocument:t,rootWindow:i}=this.domBindings,r=Ai(t),o=this.clone.wtTable.holder.parentNode.style,a=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==i||a==="vertical"){let c=this.wot.wtViewport.getWorkspaceHeight();this.wot.wtOverlays.hasScrollbarBottom&&(c-=r),c=Math.min(c,e.wtRootElement.scrollHeight),o.height=`${c}px`}else o.height="";this.clone.wtTable.holder.style.height=o.height;const l=fn(this.clone.wtTable.TABLE);o.width=`${l}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable,t=this.wot.selectionManager.getFocusSelection()?parseInt(QD.width,10)/2:0;this.clone.wtTable.hider.style.height=this.hider.style.height,e.style.height=e.parentNode.style.height,e.style.width=`${parseInt(e.parentNode.style.width,10)+t}px`}applyToDOM(){const e=this.wtSettings.getSetting("totalColumns"),t=this.isRtl()?"right":"left";if(typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number")this.spreader.style[t]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style[t]="0";else throw new Error("Incorrect value of the columnsRenderCalculator");this.isRtl()?this.spreader.style.left="":this.spreader.style.right="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number"?this.clone.wtTable.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`:this.clone.wtTable.spreader.style.top=""}scrollTo(e,t){const{wtSettings:i}=this,r=i.getSetting("rowHeaders"),s=i.getSetting("fixedColumnsStart"),a=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder,l=s===0&&r.length>0&&!Ue(a.parentNode,"innerBorderInlineStart")?1:0;let c=this.getTableParentOffset(),u=0;if(t){const h=this.wot.wtTable.getColumnWidth(e),d=this.wot.wtViewport.getViewportWidth();h>d&&(t=!1)}return t&&a.offsetWidth!==a.clientWidth&&(u=Ai(this.domBindings.rootDocument)),t?(c+=this.sumCellSizes(0,e+1),c-=this.wot.wtViewport.getViewportWidth(),c+=l):c+=this.sumCellSizes(this.wtSettings.getSetting("fixedColumnsStart"),e),c+=u,i9(this.mainTableScrollableElement)===c-l&&l>0&&this.wot.wtOverlays.expandHiderHorizontallyBy(l),this.setScrollPosition(c)}getTableParentOffset(){const e=this.wtSettings.getSetting("preventOverflow");let t=0;return!e&&this.trimmingContainer===this.domBindings.rootWindow&&(t=this.wot.wtTable.holderOffset.left),t}getScrollPosition(){return Math.abs(CD(this.mainTableScrollableElement,this.domBindings.rootWindow))}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="horizontal")){this.isRtl()?i=Math.abs(Math.min(this.getTableParentOffset()-this.getScrollPosition(),0)):i=Math.max(this.getScrollPosition()-this.getTableParentOffset(),0);const r=this.wot.wtTable.getTotalWidth(),s=this.clone.wtTable.getTotalWidth(),o=r-s;i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){const{wtSettings:t}=this,i=this.wot.wtTable.holder.parentNode,r=t.getSetting("rowHeaders"),s=t.getSetting("fixedColumnsStart"),o=t.getSetting("totalRows"),a=t.getSetting("preventOverflow")==="vertical";o?Ze(i,"emptyRows"):ue(i,"emptyRows");let l=!1;if(!a){if(s&&!r.length)ue(i,"innerBorderLeft innerBorderInlineStart");else if(!s&&r.length){const c=Ue(i,"innerBorderInlineStart");e?(ue(i,"innerBorderLeft innerBorderInlineStart"),l=!c):(Ze(i,"innerBorderLeft innerBorderInlineStart"),l=c)}}return l}}const mTe="stickyRowsTop",eN={getFirstRenderedRow(){return this.wtSettings.getSetting("totalRows")===0?-1:0},getFirstVisibleRow(){return this.getFirstRenderedRow()},getFirstPartiallyVisibleRow(){return this.getFirstRenderedRow()},getLastRenderedRow(){return this.getRenderedRowsCount()-1},getLastVisibleRow(){return this.getLastRenderedRow()},getLastPartiallyVisibleRow(){return this.getLastRenderedRow()},getRenderedRowsCount(){const n=this.wtSettings.getSetting("totalRows");return Math.min(this.wtSettings.getSetting("fixedRowsTop"),n)},getVisibleRowsCount(){return this.getRenderedRowsCount()},getColumnHeadersCount(){return this.dataAccessObject.columnHeaders.length}};Sl(eN,"MIXIN_NAME",mTe,{writable:!1,enumerable:!1});class tN extends Jp{constructor(e,t,i,r){super(e,t,i,r,lf)}}Xt(tN,eN);Xt(tN,X1);function vW(n,e,t){return(e=vTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vTe(n){var e=bTe(n,"string");return typeof e=="symbol"?e:e+""}function bTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class wTe extends py{constructor(e,t,i,r,s,o){super(e,t,lf,i,r),vW(this,"topOverlay",void 0),vW(this,"inlineStartOverlay",void 0),this.topOverlay=s,this.inlineStartOverlay=o}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new tN(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderTopOverlay")&&this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){if(this.updateTrimmingContainer(),!this.wot.wtTable.holder.parentNode)return!1;const e=this.clone.wtTable.holder.parentNode;if(this.trimmingContainer===this.domBindings.rootWindow){const r=this.inlineStartOverlay.getOverlayOffset()*(this.isRtl()?-1:1),s=this.topOverlay.getOverlayOffset();V1(e,`${r}px`,`${s}px`)}else cy(e);let t=ni(this.clone.wtTable.TABLE);const i=fn(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(t=0),e.style.height=`${t}px`,e.style.width=`${i}px`,!1}}class nN extends Jp{constructor(e,t,i,r){super(e,t,i,r,of)}}Xt(nN,eN);Xt(nN,Z1);function yTe(n,e,t){return(e=CTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function CTe(n){var e=STe(n,"string");return typeof e=="symbol"?e:e+""}function STe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class _Te extends py{constructor(e,t,i,r){super(e,t,of,i,r),yTe(this,"cachedFixedRowsTop",-1),this.cachedFixedRowsTop=this.wtSettings.getSetting("fixedRowsTop")}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new nN(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderTopOverlay")}resetFixedPosition(){if(!this.needFullRender||!this.shouldBeRendered()||!this.wot.wtTable.holder.parentNode)return!1;const e=this.clone.wtTable.holder.parentNode,{rootWindow:t}=this.domBindings,i=this.wtSettings.getSetting("preventOverflow");let r=0,s=!1;if(this.trimmingContainer===t&&(!i||i!=="vertical")){const{wtTable:a}=this.wot,l=a.hider.getBoundingClientRect(),c=Math.ceil(l.bottom),u=e.offsetHeight;s=c===u,r=this.getOverlayOffset(),V1(e,"0px",`${r}px`)}else r=this.getScrollPosition(),cy(e);const o=this.adjustHeaderBordersPosition(r,s);return this.adjustElementsSize(),o}setScrollPosition(e){const t=this.domBindings.rootWindow;let i=!1;return this.mainTableScrollableElement===t&&t.scrollY!==e?(t.scrollTo(F1(t),e),i=!0):this.mainTableScrollableElement.scrollTop!==e&&(this.mainTableScrollableElement.scrollTop=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollHorizontally")}sumCellSizes(e,t){const i=this.wtSettings.getSetting("defaultRowHeight");let r=e,s=0;for(;r<t;){const o=this.wot.wtTable.getRowHeight(r);s+=o===void 0?i:o,r+=1}return s}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e}=this.wot,{rootDocument:t,rootWindow:i}=this.domBindings,r=Ai(t),o=this.clone.wtTable.holder.parentNode.style,a=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==i||a==="horizontal"){let c=this.wot.wtViewport.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(c-=r),c=Math.min(c,e.wtRootElement.scrollWidth),o.width=`${c}px`}else o.width="";this.clone.wtTable.holder.style.width=o.width;let l=ni(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(l=0),o.height=`${l}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable,t=this.wot.selectionManager.getFocusSelection()?parseInt(QD.height,10)/2:0;this.clone.wtTable.hider.style.width=this.hider.style.width,e.style.width=e.parentNode.style.width,e.style.height=`${parseInt(e.parentNode.style.height,10)+t}px`}applyToDOM(){const e=this.wtSettings.getSetting("totalRows");if(typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number")this.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style.top="0";else throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){const e=this.isRtl()?"right":"left",{spreader:t}=this.clone.wtTable;typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number"?t.style[e]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`:t.style[e]=""}scrollTo(e,t){const{wot:i,wtSettings:r}=this,o=(i.cloneSource?i.cloneSource:i).wtTable.holder,a=r.getSetting("columnHeaders"),c=r.getSetting("fixedRowsTop")===0&&a.length>0&&!Ue(o.parentNode,"innerBorderTop")?1:0;let u=this.getTableParentOffset(),h=0;if(t){const d=this.wot.wtTable.getRowHeight(e),f=this.wot.wtViewport.getViewportHeight();d>f&&(t=!1)}if(t&&o.offsetHeight!==o.clientHeight&&(h=Ai(this.domBindings.rootDocument)),t){const d=r.getSetting("fixedRowsBottom"),f=r.getSetting("totalRows");u+=this.sumCellSizes(0,e+1),u-=i.wtViewport.getViewportHeight()-this.sumCellSizes(f-d,f),u+=1,u+=c}else u+=this.sumCellSizes(r.getSetting("fixedRowsTop"),e);return u+=h,n9(this.mainTableScrollableElement)===u-c&&c>0&&this.wot.wtOverlays.expandHiderVerticallyBy(c),this.setScrollPosition(u)}getTableParentOffset(){return this.mainTableScrollableElement===this.domBindings.rootWindow?this.wot.wtTable.holderOffset.top:0}getScrollPosition(){return B1(this.mainTableScrollableElement,this.domBindings.rootWindow)}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="vertical")){const r=this.wot.wtTable.getTotalHeight(),s=this.clone.wtTable.getTotalHeight(),o=r-s;i=Math.max(this.getScrollPosition()-this.getTableParentOffset(),0),i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{wtSettings:i}=this,r=this.wot.wtTable.holder.parentNode,s=i.getSetting("totalColumns"),o=i.getSetting("preventOverflow")==="horizontal";s?Ze(r,"emptyColumns"):ue(r,"emptyColumns");let a=!1;if(!t&&!o){const l=i.getSetting("fixedRowsTop"),c=this.cachedFixedRowsTop!==l,u=i.getSetting("columnHeaders");if((c||l===0)&&u.length>0){const h=Ue(r,"innerBorderTop");this.cachedFixedRowsTop=i.getSetting("fixedRowsTop"),e||i.getSetting("totalRows")===0?(ue(r,"innerBorderTop"),a=!h):(Ze(r,"innerBorderTop"),a=h)}}return a}}function k0(n,e,t){RTe(n,e),e.set(n,t)}function RTe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Al(n,e,t){return(e=ETe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ETe(n){var e=xTe(n,"string");return typeof e=="symbol"?e:e+""}function xTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Rh(n,e,t){return n.set(iY(n,e),t),t}function Pl(n,e){return n.get(iY(n,e))}function iY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Yf=new WeakMap,D0=new WeakMap,Kf=new WeakMap,N0=new WeakMap;class TTe{constructor(e,t,i,r,s,o){Al(this,"wot",null),k0(this,Yf,[]),Al(this,"topOverlay",null),Al(this,"bottomOverlay",null),Al(this,"inlineStartOverlay",null),Al(this,"topInlineStartCornerOverlay",null),Al(this,"bottomInlineStartCornerOverlay",null),Al(this,"browserLineHeight",void 0),Al(this,"wtSettings",null),k0(this,D0,!1),k0(this,Kf,0),k0(this,N0,null),Al(this,"resizeObserver",new ResizeObserver(u=>{G1(()=>{!Array.isArray(u)||!u.length||(Rh(Kf,this,Pl(Kf,this)+1),Pl(Kf,this)===100&&(Yt("The ResizeObserver callback was fired too many times in direct succession.\nThis may be due to an infinite loop caused by setting a dynamic height/width (for example, with the `dvh` units) to a Handsontable container's parent. \nThe observer will be disconnected."),this.resizeObserver.disconnect()),Pl(N0,this)!==null&&clearTimeout(Pl(N0,this)),Rh(N0,this,setTimeout(()=>{Rh(Kf,this,0)},100)),this.wtSettings.getSetting("onContainerElementResize"))})})),this.wot=e,this.wtSettings=r,this.domBindings=i,this.facadeGetter=t,this.wtTable=o;const{rootDocument:a,rootWindow:l}=this.domBindings;this.instance=this.wot,this.eventManager=s,this.scrollbarSize=Ai(a);const c=l.getComputedStyle(o.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden";this.scrollableElement=c?o.holder:mw(o.TABLE),this.initOverlays(),this.hasScrollbarBottom=!1,this.hasScrollbarRight=!1,this.destroyed=!1,this.keyPressed=!1,this.spreaderLastSize={width:null,height:null},this.verticalScrolling=!1,this.horizontalScrolling=!1,this.initBrowserLineHeight(),this.registerListeners(),this.lastScrollX=l.scrollX,this.lastScrollY=l.scrollY}getOverlays(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=[...Pl(Yf,this)];return e&&t.push(this.wtTable),t}initBrowserLineHeight(){const{rootWindow:e,rootDocument:t}=this.domBindings,i=e.getComputedStyle(t.body),r=parseInt(i.lineHeight,10),s=parseInt(i.fontSize,10)*1.2;this.browserLineHeight=r||s}initOverlays(){const e=[this.wot,this.facadeGetter,this.wtSettings,this.domBindings];this.topOverlay=new _Te(...e),this.bottomOverlay=new nTe(...e),this.inlineStartOverlay=new pTe(...e),this.topInlineStartCornerOverlay=new wTe(...e,this.topOverlay,this.inlineStartOverlay),this.bottomInlineStartCornerOverlay=new Zxe(...e,this.bottomOverlay,this.inlineStartOverlay),Rh(Yf,this,[this.topOverlay,this.bottomOverlay,this.inlineStartOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay])}beforeDraw(){Rh(D0,this,Pl(Yf,this).reduce((e,t)=>t.hasRenderingStateChanged()||e,!1)),Pl(Yf,this).forEach(e=>e.updateStateOfRendering("before"))}afterDraw(){this.syncScrollWithMaster(),Pl(Yf,this).forEach(e=>{const t=e.hasRenderingStateChanged();e.updateStateOfRendering("after"),t&&!e.needFullRender&&e.reset()})}refreshAll(){if(this.wot.drawn){if(!this.wtTable.holder.parentNode){this.destroy();return}this.wot.draw(!0),this.verticalScrolling&&this.inlineStartOverlay.onScroll(),this.horizontalScrolling&&this.topOverlay.onScroll(),this.verticalScrolling=!1,this.horizontalScrolling=!1}}registerListeners(){const{rootDocument:e,rootWindow:t}=this.domBindings,{mainTableScrollableElement:i}=this.topOverlay,{mainTableScrollableElement:r}=this.inlineStartOverlay;this.eventManager.addEventListener(e.documentElement,"keydown",h=>this.onKeyDown(h)),this.eventManager.addEventListener(e.documentElement,"keyup",()=>this.onKeyUp()),this.eventManager.addEventListener(e,"visibilitychange",()=>this.onKeyUp()),this.eventManager.addEventListener(i,"scroll",h=>this.onTableScroll(h),{passive:!0}),i!==r&&this.eventManager.addEventListener(r,"scroll",h=>this.onTableScroll(h),{passive:!0});const s=t.devicePixelRatio&&t.devicePixelRatio>1,o=this.scrollableElement===t,a=this.wtSettings.getSetting("preventWheel"),l={passive:o};(a||s||!AD())&&this.eventManager.addEventListener(this.wtTable.wtRootElement,"wheel",h=>this.onCloneWheel(h,a),l),[this.topOverlay,this.bottomOverlay,this.inlineStartOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay].forEach(h=>{if(h&&h.needFullRender){const{holder:d}=h.clone.wtTable;this.eventManager.addEventListener(d,"wheel",f=>this.onCloneWheel(f,a),l)}});let u;this.eventManager.addEventListener(t,"resize",()=>{clearTimeout(u),u=setTimeout(()=>{this.wtSettings.getSetting("onWindowResize"),Rh(Kf,this,0)},200)}),o||this.resizeObserver.observe(this.wtTable.wtRootElement.parentElement)}deregisterListeners(){this.eventManager.clearEvents(!0)}onTableScroll(e){const t=this.domBindings.rootWindow,i=this.inlineStartOverlay.mainTableScrollableElement,r=this.topOverlay.mainTableScrollableElement,s=e.target;this.keyPressed&&(r!==t&&s!==t&&!e.target.contains(r)||i!==t&&s!==t&&!e.target.contains(i))||this.syncScrollPositions(e)}onCloneWheel(e,t){const{rootWindow:i}=this.domBindings,r=this.inlineStartOverlay.mainTableScrollableElement,s=this.topOverlay.mainTableScrollableElement,o=e.target,a=s!==i&&o!==i&&!o.contains(s),l=r!==i&&o!==i&&!o.contains(r);if(this.keyPressed&&(a||l)||this.scrollableElement===i)return;const c=this.translateMouseWheelToScroll(e);(t||this.scrollableElement!==i&&c)&&e.preventDefault()}onKeyDown(e){this.keyPressed=Qp(e.keyCode,"ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT")}onKeyUp(){this.keyPressed=!1}translateMouseWheelToScroll(e){let t=isNaN(e.deltaY)?-1*e.wheelDeltaY:e.deltaY,i=isNaN(e.deltaX)?-1*e.wheelDeltaX:e.deltaX;e.deltaMode===1&&(i+=i*this.browserLineHeight,t+=t*this.browserLineHeight);const r=this.scrollVertically(t),s=this.scrollHorizontally(i);return r||s}scrollVertically(e){const t=this.scrollableElement.scrollTop;return this.scrollableElement.scrollTop+=e,t!==this.scrollableElement.scrollTop}scrollHorizontally(e){const t=this.scrollableElement.scrollLeft;return this.scrollableElement.scrollLeft+=e,t!==this.scrollableElement.scrollLeft}syncScrollPositions(){if(this.destroyed)return;const{rootWindow:e}=this.domBindings,t=this.topOverlay.clone.wtTable.holder,i=this.inlineStartOverlay.clone.wtTable.holder,[r,s]=[this.scrollableElement.scrollLeft,this.scrollableElement.scrollTop];if(this.horizontalScrolling=t.scrollLeft!==r||this.lastScrollX!==e.scrollX,this.verticalScrolling=i.scrollTop!==s||this.lastScrollY!==e.scrollY,this.lastScrollX=e.scrollX,this.lastScrollY=e.scrollY,this.horizontalScrolling){t.scrollLeft=r;const o=this.bottomOverlay.needFullRender?this.bottomOverlay.clone.wtTable.holder:null;o&&(o.scrollLeft=r)}this.verticalScrolling&&(i.scrollTop=s),this.refreshAll()}syncScrollWithMaster(){if(!Pl(D0,this))return;const e=this.topOverlay.mainTableScrollableElement,{scrollLeft:t,scrollTop:i}=e;this.topOverlay.needFullRender&&(this.topOverlay.clone.wtTable.holder.scrollLeft=t),this.bottomOverlay.needFullRender&&(this.bottomOverlay.clone.wtTable.holder.scrollLeft=t),this.inlineStartOverlay.needFullRender&&(this.inlineStartOverlay.clone.wtTable.holder.scrollTop=i),Rh(D0,this,!1)}updateMainScrollableElements(){this.deregisterListeners(),this.inlineStartOverlay.updateMainScrollableElement(),this.topOverlay.updateMainScrollableElement(),this.bottomOverlay.needFullRender&&this.bottomOverlay.updateMainScrollableElement();const{wtTable:e}=this,{rootWindow:t}=this.domBindings;t.getComputedStyle(e.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden"?this.scrollableElement=e.holder:this.scrollableElement=mw(e.TABLE),this.registerListeners()}destroy(){this.resizeObserver.disconnect(),this.eventManager.destroy(),this.topOverlay.destroy(),this.bottomOverlay.clone&&this.bottomOverlay.destroy(),this.inlineStartOverlay.destroy(),this.topInlineStartCornerOverlay&&this.topInlineStartCornerOverlay.destroy(),this.bottomInlineStartCornerOverlay&&this.bottomInlineStartCornerOverlay.clone&&this.bottomInlineStartCornerOverlay.destroy(),this.destroyed=!0}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.updateLastSpreaderSize()&&this.adjustElementsSize(),this.bottomOverlay.clone&&this.bottomOverlay.refresh(e),this.inlineStartOverlay.refresh(e),this.topOverlay.refresh(e),this.topInlineStartCornerOverlay&&this.topInlineStartCornerOverlay.refresh(e),this.bottomInlineStartCornerOverlay&&this.bottomInlineStartCornerOverlay.clone&&this.bottomInlineStartCornerOverlay.refresh(e)}updateLastSpreaderSize(){const e=this.wtTable.spreader,t=e.clientWidth,i=e.clientHeight,r=t!==this.spreaderLastSize.width||i!==this.spreaderLastSize.height;return r&&(this.spreaderLastSize.width=t,this.spreaderLastSize.height=i),r}adjustElementsSize(){const{wtViewport:e}=this.wot,{wtTable:t}=this,{rootWindow:i}=this.domBindings,r=this.scrollableElement===i,s=this.wtSettings.getSetting("totalColumns"),o=this.wtSettings.getSetting("totalRows"),a=e.getRowHeaderWidth(),c=e.getColumnHeaderHeight()+this.topOverlay.sumCellSizes(0,o)+1,u=a+this.inlineStartOverlay.sumCellSizes(0,s),d=t.hider.style,f=()=>r?!1:this.scrollableElement.scrollTop>Math.max(0,c-t.holder.clientHeight),g=()=>r?!1:this.scrollableElement.scrollLeft>Math.max(0,u-t.holder.clientWidth),p=f()?1:0,m=g()?1:0;if(d.width=`${u+m}px`,d.height=`${c+p}px`,this.scrollbarSize>0){const{scrollHeight:b,scrollWidth:y}=t.wtRootElement,{scrollHeight:w,scrollWidth:R}=t.holder;this.hasScrollbarRight=b<w,this.hasScrollbarBottom=y<R,this.hasScrollbarRight&&t.hider.scrollWidth+this.scrollbarSize>y?this.hasScrollbarBottom=!0:this.hasScrollbarBottom&&t.hider.scrollHeight+this.scrollbarSize>b&&(this.hasScrollbarRight=!0)}this.topOverlay.adjustElementsSize(),this.inlineStartOverlay.adjustElementsSize(),this.bottomOverlay.adjustElementsSize()}expandHiderVerticallyBy(e){const{wtTable:t}=this;t.hider.style.height=`${parseInt(t.hider.style.height,10)+e}px`}expandHiderHorizontallyBy(e){const{wtTable:t}=this;t.hider.style.width=`${parseInt(t.hider.style.width,10)+e}px`}applyToDOM(){this.wtTable.isVisible()&&(this.topOverlay.applyToDOM(),this.bottomOverlay.clone&&this.bottomOverlay.applyToDOM(),this.inlineStartOverlay.applyToDOM())}getParentOverlay(e){if(!e)return null;const t=[this.topOverlay,this.inlineStartOverlay,this.bottomOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay];let i=null;return j(t,r=>{r&&r.clone&&r.clone.wtTable.TABLE.contains(e)&&(i=r.clone)}),i}syncOverlayTableClassNames(){const e=this.wtTable.TABLE,t=[this.topOverlay,this.inlineStartOverlay,this.bottomOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay];j(t,i=>{i&&(i.clone.wtTable.TABLE.className=e.className)})}}function bW(n,e,t){return(e=MTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function MTe(n){var e=ATe(n,"string");return typeof e=="symbol"?e:e+""}function ATe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class PTe{constructor(e){bW(this,"settings",{}),bW(this,"defaults",Object.freeze(this.getDefaults())),ct(this.defaults,(t,i)=>{if(e[i]!==void 0)this.settings[i]=e[i];else{if(t===void 0)throw new Error(`A required setting "${i}" was not provided`);this.settings[i]=t}})}getDefaults(){return{facade:void 0,table:void 0,isDataViewInstance:!0,externalRowCalculator:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,preventOverflow(){return!1},preventWheel:!1,data:void 0,freezeOverlays:!1,fixedColumnsStart:0,fixedRowsTop:0,fixedRowsBottom:0,shouldRenderInlineStartOverlay:()=>this.getSetting("fixedColumnsStart")>0||this.getSetting("rowHeaders").length>0,shouldRenderTopOverlay:()=>this.getSetting("fixedRowsTop")>0||this.getSetting("columnHeaders").length>0,shouldRenderBottomOverlay:()=>this.getSetting("fixedRowsBottom")>0,minSpareRows:0,rowHeaders(){return[]},columnHeaders(){return[]},totalRows:void 0,totalColumns:void 0,cellRenderer:(e,t,i)=>{const r=this.getSetting("data",e,t);Yu(i,r??"")},columnWidth(){},rowHeight(){},rowHeightByOverlayName(){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellContextMenu:null,onCellMouseOver:null,onCellMouseOut:null,onCellMouseUp:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeRemoveCellClassNames:null,onAfterDrawSelection:null,onBeforeDrawBorders:null,onBeforeViewportScrollHorizontally:e=>e,onBeforeViewportScrollVertically:e=>e,onScrollHorizontally:null,onScrollVertically:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,onBeforeStretchingColumnWidth:e=>e,onModifyRowHeaderWidth:null,onModifyGetCellCoords:null,onBeforeHighlightingRowHeader:e=>e,onBeforeHighlightingColumnHeader:e=>e,onWindowResize:null,onContainerElementResize:null,renderAllColumns:!1,renderAllRows:!1,groups:!1,rowHeaderWidth:null,columnHeaderHeight:null,headerClassName:null,rtlMode:!1,ariaTags:!0}}update(e,t){return t===void 0?ct(e,(i,r)=>{this.settings[r]=i}):this.settings[e]=t,this}getSetting(e,t,i,r,s){return typeof this.settings[e]=="function"?this.settings[e](t,i,r,s):t!==void 0&&Array.isArray(this.settings[e])?this.settings[e][t]:this.settings[e]}getSettingPure(e){return this.settings[e]}has(e){return!!this.settings[e]}}class iN extends Jp{constructor(e,t,i,r){super(e,t,i,r,"master")}alignOverlaysWithTrimmingContainer(){const e=rf(this.wtRootElement),{rootWindow:t}=this.domBindings;if(e===t)this.wtSettings.getSetting("preventOverflow")||(this.holder.style.overflow="visible",this.wtRootElement.style.overflow="visible");else{const i=e.parentElement,r=Rp(e,"height",t),s=Rp(e,"overflow",t),o=this.holder.style,{scrollWidth:a,scrollHeight:l}=e;let c=e.offsetWidth,u=e.offsetHeight;if(i&&["auto","hidden","scroll"].includes(s)){const d=e.cloneNode(!1);d.style.overflow="auto",d.style.position="absolute",e.nextElementSibling?i.insertBefore(d,e.nextElementSibling):i.appendChild(d);const f=parseInt(cl(d,t).height,10);i.removeChild(d),f===0&&(u=0)}u=Math.min(u,l),o.height=r==="auto"?"auto":`${u}px`,c=Math.min(c,a),o.width=`${c}px`,o.overflow="",this.hasTableHeight=o.height==="auto"?!0:u>0,this.hasTableWidth=c>0}this.isTableVisible=nf(this.TABLE)}markOversizedColumnHeaders(){const{wtSettings:e}=this,{wtViewport:t}=this.dataAccessObject,i="master",s=e.getSetting("columnHeaders").length;if(s&&!t.hasOversizedColumnHeadersMarked[i]){const a=e.getSetting("rowHeaders").length,l=this.getRenderedColumnsCount();for(let c=0;c<s;c++)for(let u=-1*a;u<l;u++)this.markIfOversizedColumnHeader(u);t.hasOversizedColumnHeadersMarked[i]=!0}}}Xt(iN,YD);Xt(iN,Z1);class ITe{constructor(e,t,i,r,s){this.dataAccessObject=e,this.wot=e.wot,this.instance=this.wot,this.domBindings=t,this.wtSettings=i,this.wtTable=s,this.oversizedRows=[],this.oversizedColumnHeaders=[],this.hasOversizedColumnHeadersMarked={},this.clientHeight=0,this.containerWidth=NaN,this.rowHeaderWidth=NaN,this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,this.rowsCalculatorTypes=new Map([["rendered",()=>this.wtSettings.getSetting("renderAllRows")?new wEe:new CEe],["fullyVisible",()=>new cEe],["partiallyVisible",()=>new W9]]),this.columnsCalculatorTypes=new Map([["rendered",()=>this.wtSettings.getSetting("renderAllColumns")?new mEe:new yEe],["fullyVisible",()=>new oEe],["partiallyVisible",()=>new V9]]),this.eventManager=r,this.eventManager.addEventListener(this.domBindings.rootWindow,"resize",()=>{this.clientHeight=this.getWorkspaceHeight()})}getWorkspaceHeight(){const e=this.domBindings.rootDocument,t=this.dataAccessObject.topOverlayTrimmingContainer;let i=0;return t===this.domBindings.rootWindow?i=e.documentElement.clientHeight:i=ni(t)>0&&t.clientHeight>0?t.clientHeight:1/0,i}getWorkspaceWidth(){const{wtSettings:e}=this,{rootDocument:t,rootWindow:i}=this.domBindings,r=this.dataAccessObject.inlineStartOverlayTrimmingContainer,s=t.documentElement.offsetWidth,o=e.getSetting("totalColumns"),a=e.getSetting("preventOverflow"),l=e.getSetting("rtlMode"),c=this.wtTable.TABLE.getBoundingClientRect(),u=l?c.right-s:c.left,h=s-u;let d,f;if(a)return fn(this.wtTable.wtRootElement);if(e.getSetting("freezeOverlays")?d=Math.min(h,s):d=Math.min(this.getContainerFillWidth(),h,s),r===i&&o>0&&this.sumColumnWidths(0,o-1)>d)return t.documentElement.clientWidth;if(r!==i&&(f=Rp(this.dataAccessObject.inlineStartOverlayTrimmingContainer,"overflow",i),f==="scroll"||f==="hidden"||f==="auto"))return Math.max(d,r.clientWidth);const g=e.getSetting("stretchH");return g==="none"||!g?Math.max(d,fn(this.wtTable.TABLE)):d}hasVerticalScroll(){return this.wtTable.hider.offsetHeight>this.getWorkspaceHeight()}hasHorizontalScroll(){return this.wtTable.hider.offsetWidth>this.getWorkspaceWidth()}sumColumnWidths(e,t){let i=0,r=e;for(;r<t;)i+=this.wtTable.getColumnWidth(r),r+=1;return i}getContainerFillWidth(){if(this.containerWidth)return this.containerWidth;const e=this.wtTable.holder,t=this.domBindings.rootDocument.createElement("div");t.style.width="100%",t.style.height="1px",e.appendChild(t);const i=t.offsetWidth;return this.containerWidth=i,e.removeChild(t),i}getWorkspaceOffset(){return xi(this.wtTable.TABLE)}getColumnHeaderHeight(){return this.wtSettings.getSetting("columnHeaders").length?isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=ni(this.wtTable.THEAD)):this.columnHeaderHeight=0,this.columnHeaderHeight}getViewportHeight(){let e=this.getWorkspaceHeight();if(e===1/0)return e;const t=this.getColumnHeaderHeight();return t>0&&(e-=t),e}getRowHeaderWidth(){const e=this.wtSettings.getSetting("rowHeaderWidth"),t=this.wtSettings.getSetting("rowHeaders");if(e){this.rowHeaderWidth=0;for(let i=0,r=t.length;i<r;i++)this.rowHeaderWidth+=e[i]||e}if(isNaN(this.rowHeaderWidth))if(t.length){let i=this.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(let r=0,s=t.length;r<s;r++)i?(this.rowHeaderWidth+=fn(i),i=i.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0;return this.rowHeaderWidth=this.wtSettings.getSetting("onModifyRowHeaderWidth",this.rowHeaderWidth)||this.rowHeaderWidth,this.rowHeaderWidth}getViewportWidth(){const e=this.getWorkspaceWidth();if(e===1/0)return e;const t=this.getRowHeaderWidth();return t>0?e-t:e}createRowsCalculator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["rendered","fullyVisible","partiallyVisible"];const{wtSettings:t,wtTable:i}=this;let r=this.getViewportHeight(),s,o;this.rowHeaderWidth=NaN;let a=this.dataAccessObject.topScrollPosition-this.dataAccessObject.topParentOffset;const l=t.getSetting("fixedRowsTop"),c=t.getSetting("fixedRowsBottom"),u=t.getSetting("totalRows");return l&&a>=0&&(o=this.dataAccessObject.topOverlay.sumCellSizes(0,l),a+=o,r-=o),c&&this.dataAccessObject.bottomOverlay.clone&&(o=this.dataAccessObject.bottomOverlay.sumCellSizes(u-c,u),r-=o),i.holder.clientHeight===i.holder.offsetHeight?s=0:s=Ai(this.domBindings.rootDocument),new AEe({calculationTypes:e.map(h=>[h,this.rowsCalculatorTypes.get(h)()]),viewportHeight:r,scrollOffset:a,totalRows:t.getSetting("totalRows"),rowHeightFn:h=>i.getRowHeight(h),overrideFn:t.getSettingPure("viewportRowCalculatorOverride"),horizontalScrollbarHeight:s})}createColumnsCalculator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["rendered","fullyVisible","partiallyVisible"];const{wtSettings:t,wtTable:i}=this;let r=this.getViewportWidth(),s=Math.abs(this.dataAccessObject.inlineStartScrollPosition)-this.dataAccessObject.inlineStartParentOffset;this.columnHeaderHeight=NaN;const o=t.getSetting("fixedColumnsStart");if(o&&s>=0){const a=this.dataAccessObject.inlineStartOverlay.sumCellSizes(0,o);s+=a,r-=a}return i.holder.clientWidth!==i.holder.offsetWidth&&(r-=Ai(this.domBindings.rootDocument)),new xEe({calculationTypes:e.map(a=>[a,this.columnsCalculatorTypes.get(a)()]),viewportWidth:r,scrollOffset:s,totalColumns:t.getSetting("totalColumns"),columnWidthFn:a=>i.getColumnWidth(a),overrideFn:t.getSettingPure("viewportColumnCalculatorOverride"),inlineStartOffset:this.dataAccessObject.inlineStartParentOffset})}createCalculators(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{wtSettings:t}=this,i=this.createRowsCalculator(),r=this.createColumnsCalculator();if(e&&!t.getSetting("renderAllRows")){const s=i.getResultsFor("fullyVisible");e=this.areAllProposedVisibleRowsAlreadyRendered(s)}if(e&&!t.getSetting("renderAllColumns")){const s=r.getResultsFor("fullyVisible");e=this.areAllProposedVisibleColumnsAlreadyRendered(s)}return e||(this.rowsRenderCalculator=i.getResultsFor("rendered"),this.columnsRenderCalculator=r.getResultsFor("rendered")),this.rowsVisibleCalculator=i.getResultsFor("fullyVisible"),this.columnsVisibleCalculator=r.getResultsFor("fullyVisible"),this.rowsPartiallyVisibleCalculator=i.getResultsFor("partiallyVisible"),this.columnsPartiallyVisibleCalculator=r.getResultsFor("partiallyVisible"),e}createVisibleCalculators(){const e=this.createRowsCalculator(["fullyVisible","partiallyVisible"]),t=this.createColumnsCalculator(["fullyVisible","partiallyVisible"]);this.rowsVisibleCalculator=e.getResultsFor("fullyVisible"),this.columnsVisibleCalculator=t.getResultsFor("fullyVisible"),this.rowsPartiallyVisibleCalculator=e.getResultsFor("partiallyVisible"),this.columnsPartiallyVisibleCalculator=t.getResultsFor("partiallyVisible")}areAllProposedVisibleRowsAlreadyRendered(e){if(!this.rowsVisibleCalculator)return!1;let{startRow:t,endRow:i}=e;if(t===null&&i===null){if(!e.isVisibleInTrimmingContainer)return!0;t=this.rowsPartiallyVisibleCalculator.startRow,i=this.rowsPartiallyVisibleCalculator.endRow}const{startRow:r,endRow:s}=this.rowsRenderCalculator;return t<r||t===r&&t>0?!1:!(i>s||i===s&&i<this.wtSettings.getSetting("totalRows")-1)}areAllProposedVisibleColumnsAlreadyRendered(e){if(!this.columnsVisibleCalculator)return!1;let{startColumn:t,endColumn:i}=e;if(t===null&&i===null){if(!e.isVisibleInTrimmingContainer)return!0;t=this.columnsPartiallyVisibleCalculator.startColumn,i=this.columnsPartiallyVisibleCalculator.endColumn}const{startColumn:r,endColumn:s}=this.columnsRenderCalculator;return t<r||t===r&&t>0?!1:!(i>s||i===s&&i<this.wtSettings.getSetting("totalColumns")-1)}resetHasOversizedColumnHeadersMarked(){ct(this.hasOversizedColumnHeadersMarked,(e,t,i)=>{i[t]=void 0})}}class OTe extends UD{constructor(e,t){super(e,new PTe(t));const i=this.wtSettings.getSetting("facade",this);this.wtTable=new iN(this.getTableDao(),i,this.domBindings,this.wtSettings),this.wtViewport=new ITe(this.getViewportDao(),this.domBindings,this.wtSettings,this.eventManager,this.wtTable),this.selectionManager=new fTe(this.wtSettings.getSetting("selections")),this.wtEvent=new K9(i,this.domBindings,this.wtSettings,this.eventManager,this.wtTable,this.selectionManager),this.wtOverlays=new TTe(this,i,this.domBindings,this.wtSettings,this.eventManager,this.wtTable),this.exportSettingsAsClassNames(),this.findOriginalHeaders()}exportSettingsAsClassNames(){const e={rowHeaders:"htRowHeaders",columnHeaders:"htColumnHeaders"},t=[],i=[];ct(e,(r,s)=>{this.wtSettings.getSetting(s).length&&i.push(r),t.push(r)}),Ze(this.wtTable.wtRootElement.parentNode,t),ue(this.wtTable.wtRootElement.parentNode,i)}getOverlayByName(e){var t;if(!Q9.includes(e))return null;const i=e.replace(/_([a-z])/g,r=>r[1].toUpperCase());return(t=this.wtOverlays[`${i}Overlay`])!==null&&t!==void 0?t:null}getViewportDao(){const e=this;return{get wot(){return e},get topOverlayTrimmingContainer(){return e.wtOverlays.topOverlay.trimmingContainer},get inlineStartOverlayTrimmingContainer(){return e.wtOverlays.inlineStartOverlay.trimmingContainer},get topScrollPosition(){return e.wtOverlays.topOverlay.getScrollPosition()},get topParentOffset(){return e.wtOverlays.topOverlay.getTableParentOffset()},get inlineStartScrollPosition(){return e.wtOverlays.inlineStartOverlay.getScrollPosition()},get inlineStartParentOffset(){return e.wtOverlays.inlineStartOverlay.getTableParentOffset()},get topOverlay(){return e.wtOverlays.topOverlay},get inlineStartOverlay(){return e.wtOverlays.inlineStartOverlay},get bottomOverlay(){return e.wtOverlays.bottomOverlay}}}}class rN{constructor(e){e instanceof UD?this._wot=e:this._initFromSettings(e)}_initFromSettings(e){e.facade=t=>{const i=new rN(t);return()=>i},this._wot=new OTe(e.table,e)}get guid(){return this._wot.guid}get rootDocument(){return this._wot.domBindings.rootDocument}get rootWindow(){return this._wot.domBindings.rootWindow}get wtSettings(){return this._wot.wtSettings}get cloneSource(){return this._wot.cloneSource}get cloneOverlay(){return this._wot.cloneOverlay}get selectionManager(){return this._wot.selectionManager}get wtViewport(){return this._wot.wtViewport}get wtOverlays(){return this._wot.wtOverlays}get wtTable(){return this._wot.wtTable}get wtEvent(){return this._wot.wtEvent}get wtScroll(){return this._wot.wtScroll}get drawn(){return this._wot.drawn}set drawn(e){this._wot.drawn=e}get drawInterrupted(){return this._wot.drawInterrupted}set drawInterrupted(e){this._wot.drawInterrupted=e}get lastMouseOver(){return this._wot.lastMouseOver}set lastMouseOver(e){this._wot.lastMouseOver=e}get momentumScrolling(){return this._wot.momentumScrolling}set momentumScrolling(e){this._wot.momentumScrolling=e}get touchApplied(){return this._wot.touchApplied}set touchApplied(e){this._wot.touchApplied=e}get domBindings(){return this._wot.domBindings}get eventListeners(){return this._wot.eventListeners}set eventListeners(e){this._wot.eventListeners=e}get eventManager(){return this._wot.eventManager}createCellCoords(e,t){return this._wot.createCellCoords(e,t)}createCellRange(e,t,i){return this._wot.createCellRange(e,t,i)}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._wot.draw(e),this}getCell(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._wot.getCell(e,t)}scrollViewport(e,t,i,r,s){return this._wot.scrollViewport(e,t,i,r,s)}scrollViewportHorizontally(e,t,i){return this._wot.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return this._wot.scrollViewportVertically(e,t,i)}getViewport(){return this._wot.getViewport()}getOverlayName(){return this._wot.cloneOverlay?this._wot.cloneOverlay.type:"master"}getOverlayByName(e){return this._wot.getOverlayByName(e)}exportSettingsAsClassNames(){return this._wot.exportSettingsAsClassNames()}update(e,t){return this._wot.wtSettings.update(e,t),this}getSetting(e,t,i,r,s){return this._wot.wtSettings.getSetting(e,t,i,r,s)}hasSetting(e){return this._wot.wtSettings.hasSetting(e)}destroy(){this._wot.destroy()}}function wW(n){let{isShiftKey:e,isLeftClick:t,isRightClick:i,coords:r,selection:s,controller:o,cellCoordsFactory:a}=n;const l=s.isSelected()?s.getSelectedRange().current():null,c=s.isSelectedByCorner(),u=s.isSelectedByRowHeader();if(s.markSource("mouse"),e&&l)r.row>=0&&r.col>=0&&!o.cell?s.setRangeEnd(r):(c||u)&&r.row>=0&&r.col>=0&&!o.cell?s.setRangeEnd(a(r.row,r.col)):c&&r.row<0&&!o.column?s.setRangeEnd(a(l.to.row,r.col)):u&&r.col<0&&!o.row?s.setRangeEnd(a(r.row,l.to.col)):(!c&&!u&&r.col<0||c&&r.col<0)&&!o.row?s.selectRows(Math.max(l.from.row,0),r.row,r.col):(!c&&!u&&r.row<0||u&&r.row<0)&&!o.column&&s.selectColumns(Math.max(l.from.col,0),r.col,r.row);else{const h=!s.inInSelection(r),d=t||i&&h;r.row<0&&r.col>=0&&!o.column?d&&s.selectColumns(r.col,r.col,r.row):r.col<0&&r.row>=0&&!o.row?d&&s.selectRows(r.row,r.row,r.col):r.col>=0&&r.row>=0&&!o.cell?d&&s.setRangeStart(r):r.col<0&&r.row<0&&s.selectAll(!0,!0,{disableHeadersHighlight:!0,focusPosition:{row:0,col:0}})}s.markEndSource()}function kTe(n){let{isLeftClick:e,coords:t,selection:i,controller:r,cellCoordsFactory:s}=n;if(!e)return;const o=i.isSelectedByRowHeader(),a=i.isSelectedByColumnHeader(),l=i.tableProps.countCols(),c=i.tableProps.countRows();i.markSource("mouse"),a&&!r.column?i.setRangeEnd(s(c-1,t.col)):o&&!r.row?i.setRangeEnd(s(t.row,l-1)):r.cell||i.setRangeEnd(t),i.markEndSource()}const DTe=new Map([["mousedown",wW],["mouseover",kTe],["touchstart",wW]]);function yW(n,e){let{coords:t,selection:i,controller:r,cellCoordsFactory:s}=e;DTe.get(n.type)({coords:t,selection:i,controller:r,cellCoordsFactory:s,isShiftKey:n.shiftKey,isLeftClick:Y1(n)||n.type==="touchstart",isRightClick:Ku(n)})}const rY=new WeakMap,sN=Symbol("rootInstance");function NTe(n){rY.set(n,!0)}function LTe(n){return n===sN}function RS(n){return rY.has(n)}function HTe(n,e){sY(n,e),e.add(n)}function Eh(n,e,t){sY(n,e),e.set(n,t)}function sY(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Gc(n,e,t){return(e=$Te(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $Te(n){var e=FTe(n,"string");return typeof e=="symbol"?e:e+""}function FTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ii(n,e){return n.get(ww(n,e))}function Hs(n,e,t){return n.set(ww(n,e),t),t}function ww(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var RT=new WeakMap,L0=new WeakMap,H0=new WeakMap,Il=new WeakMap,Mo=new WeakMap,ET=new WeakMap,xT=new WeakMap,ES=new WeakSet;class BTe{constructor(e){HTe(this,ES),Gc(this,"hot",void 0),Gc(this,"eventManager",void 0),Gc(this,"settings",void 0),Gc(this,"THEAD",void 0),Gc(this,"TBODY",void 0),Gc(this,"_wt",void 0),Gc(this,"activeWt",void 0),Eh(this,RT,0),Eh(this,L0,0),Gc(this,"postponedAdjustElementsSize",!1),Eh(this,H0,!1),Eh(this,Il,void 0),Eh(this,Mo,void 0),Eh(this,ET,0),Eh(this,xT,0),this.hot=e,this.eventManager=new co(this.hot),this.settings=this.hot.getSettings(),this.createElements(),this.registerEvents(),this.initializeWalkontable()}render(){this.hot.isRenderSuspended()||(this.hot.runHooks("beforeRender",this.hot.forceFullRender),this.postponedAdjustElementsSize&&(this.postponedAdjustElementsSize=!1,this.adjustElementsSize(!0)),this._wt.draw(!this.hot.forceFullRender),this.hot.runHooks("afterRender",this.hot.forceFullRender),this.hot.forceFullRender=!1,this.hot.renderCall=!1)}adjustElementsSize(){this.hot.isRenderSuspended()?this.postponedAdjustElementsSize=!0:this._wt.wtOverlays.adjustElementsSize()}getCellAtCoords(e,t){const i=this._wt.getCell(e,t);return i<0?null:i}scrollViewport(e,t,i,r,s){return this._wt.scrollViewport(e,t,i,r,s)}scrollViewportHorizontally(e,t,i){return this._wt.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return this._wt.scrollViewportVertically(e,t,i)}createElements(){const{rootElement:e,rootDocument:t}=this.hot,i=e.getAttribute("style");i&&e.setAttribute("data-originalstyle",i),ue(e,"handsontable"),Hs(Mo,this,t.createElement("TABLE")),ue(Ii(Mo,this),"htCore"),this.hot.getSettings().tableClassName&&ue(Ii(Mo,this),this.hot.getSettings().tableClassName),this.settings.ariaTags&&(ze(Ii(Mo,this),[Ka()]),ze(e,[XSe(),GG(-1),$1(this.hot.countCols()),u_e()])),this.THEAD=t.createElement("THEAD"),Ii(Mo,this).appendChild(this.THEAD),this.TBODY=t.createElement("TBODY"),Ii(Mo,this).appendChild(this.TBODY),this.hot.table=Ii(Mo,this),this.hot.container.insertBefore(Ii(Mo,this),this.hot.container.firstChild)}registerEvents(){const{rootElement:e,rootDocument:t,selection:i,rootWindow:r}=this.hot,s=t.documentElement;this.eventManager.addEventListener(e,"mousedown",a=>{Hs(H0,this,!0),this.isTextSelectionAllowed(a.target)||(tI(r),a.preventDefault(),r.focus())}),this.eventManager.addEventListener(e,"mouseup",()=>{Hs(H0,this,!1)}),this.eventManager.addEventListener(e,"mousemove",a=>{Ii(H0,this)&&!this.isTextSelectionAllowed(a.target)&&(this.settings.fragmentSelection&&tI(r),a.preventDefault())}),this.eventManager.addEventListener(s,"keyup",a=>{i.isInProgress()&&!a.shiftKey&&i.finish()}),this.eventManager.addEventListener(s,"mouseup",a=>{i.isInProgress()&&Y1(a)&&i.finish(),Hs(Il,this,!1);const l=W1(t.activeElement);Rb(t.activeElement)&&!l||(l||!i.isSelected()&&!i.isSelectedByAnyHeader()&&!e.contains(a.target)&&!Ku(a))&&this.hot.unlisten()}),this.eventManager.addEventListener(s,"contextmenu",a=>{i.isInProgress()&&Ku(a)&&(i.finish(),Hs(Il,this,!1))}),this.eventManager.addEventListener(s,"touchend",()=>{i.isInProgress()&&i.finish(),Hs(Il,this,!1)}),this.eventManager.addEventListener(s,"mousedown",a=>{const l=a.target,c=a.x||a.clientX,u=a.y||a.clientY;let h=a.target;if(Ii(Il,this)||!e||!this.hot.view)return;const{holder:d}=this._wt.wtTable;if(h===d){const g=Ai(t);if(t.elementFromPoint(c+g,u)!==d||t.elementFromPoint(c,u+g)!==d)return}else for(;h!==s;){if(h===null){if(a.isTargetWebComponent)break;return}if(h===e)return;h=h.parentNode}(typeof this.settings.outsideClickDeselects=="function"?this.settings.outsideClickDeselects(l):this.settings.outsideClickDeselects)?this.hot.deselectCell():this.hot.destroyEditor(!1,!1)});let o=tf(r);for(;o!==null;)this.eventManager.addEventListener(o.document.documentElement,"click",()=>{this.hot.unlisten()}),o=tf(o);this.eventManager.addEventListener(Ii(Mo,this),"selectstart",a=>{this.settings.fragmentSelection||Rb(a.target)||a.preventDefault()})}translateFromRenderableToVisualCoords(e){let{row:t,col:i}=e;return this.hot._createCellCoords(...this.translateFromRenderableToVisualIndex(t,i))}translateFromRenderableToVisualIndex(e,t){let i=e>=0?this.hot.rowIndexMapper.getVisualFromRenderableIndex(e):e,r=t>=0?this.hot.columnIndexMapper.getVisualFromRenderableIndex(t):t;return i===null&&(i=e),r===null&&(r=t),[i,r]}countRenderableIndexes(e,t){const i=Math.min(e.getNotTrimmedIndexesLength(),t),r=e.getNearestNotHiddenIndex(i-1,-1);return r===null?0:e.getRenderableFromVisualIndex(r)+1}countRenderableColumns(){return this.countRenderableIndexes(this.hot.columnIndexMapper,this.settings.maxCols)}countRenderableRows(){return this.countRenderableIndexes(this.hot.rowIndexMapper,this.settings.maxRows)}countNotHiddenRowIndexes(e,t){return this.countNotHiddenIndexes(e,t,this.hot.rowIndexMapper,this.countRenderableRows())}countNotHiddenColumnIndexes(e,t){return this.countNotHiddenIndexes(e,t,this.hot.columnIndexMapper,this.countRenderableColumns())}countNotHiddenIndexes(e,t,i,r){if(isNaN(e)||e<0)return 0;const s=i.getNearestNotHiddenIndex(e,t),o=i.getRenderableFromVisualIndex(s);if(!Number.isInteger(o))return 0;let a=0;return t<0?a=o+1:t>0&&(a=r-o),a}countNotHiddenFixedColumnsStart(){const e=this.hot.countCols(),t=Math.min(parseInt(this.settings.fixedColumnsStart,10),e)-1;return this.countNotHiddenColumnIndexes(t,-1)}countNotHiddenFixedRowsTop(){const e=this.hot.countRows(),t=Math.min(parseInt(this.settings.fixedRowsTop,10),e)-1;return this.countNotHiddenRowIndexes(t,-1)}countNotHiddenFixedRowsBottom(){const e=this.hot.countRows(),t=Math.max(e-parseInt(this.settings.fixedRowsBottom,10),0);return this.countNotHiddenRowIndexes(t,1)}countRenderableColumnsInRange(e,t){let i=0;for(let r=e;r<=t;r++)this.hot.columnIndexMapper.getRenderableFromVisualIndex(r)!==null&&(i+=1);return i}countRenderableRowsInRange(e,t){let i=0;for(let r=e;r<=t;r++)this.hot.rowIndexMapper.getRenderableFromVisualIndex(r)!==null&&(i+=1);return i}isMainTableNotFullyCoveredByOverlays(){const e=this.countNotHiddenFixedRowsTop()+this.countNotHiddenFixedRowsBottom(),t=this.countNotHiddenFixedColumnsStart();return this.hot.countRenderedRows()>e&&this.hot.countRenderedCols()>t}initializeWalkontable(){const e={ariaTags:this.settings.ariaTags,rtlMode:this.hot.isRtl(),externalRowCalculator:this.hot.getPlugin("autoRowSize")&&this.hot.getPlugin("autoRowSize").isEnabled(),table:Ii(Mo,this),isDataViewInstance:()=>RS(this.hot),preventOverflow:()=>this.settings.preventOverflow,preventWheel:()=>this.settings.preventWheel,stretchH:()=>this.settings.stretchH,data:(s,o)=>this.hot.getDataAtCell(...this.translateFromRenderableToVisualIndex(s,o)),totalRows:()=>this.countRenderableRows(),totalColumns:()=>this.countRenderableColumns(),fixedColumnsStart:()=>this.countNotHiddenFixedColumnsStart(),fixedRowsTop:()=>this.countNotHiddenFixedRowsTop(),fixedRowsBottom:()=>this.countNotHiddenFixedRowsBottom(),shouldRenderInlineStartOverlay:()=>this.settings.fixedColumnsStart>0||e.rowHeaders().length>0,shouldRenderTopOverlay:()=>this.settings.fixedRowsTop>0||e.columnHeaders().length>0,shouldRenderBottomOverlay:()=>this.settings.fixedRowsBottom>0,minSpareRows:()=>this.settings.minSpareRows,renderAllRows:this.settings.renderAllRows,renderAllColumns:this.settings.renderAllColumns,rowHeaders:()=>{const s=[];return this.hot.hasRowHeaders()&&s.push((o,a)=>{const l=o>=0?this.hot.rowIndexMapper.getVisualFromRenderableIndex(o):o;this.appendRowHeader(l,a)}),this.hot.runHooks("afterGetRowHeaderRenderers",s),Hs(L0,this,s.length),this.hot.getSettings().ariaTags&&ww(ES,this,oY).call(this)===this.hot.countCols()&&ww(ES,this,VTe).call(this,Ii(L0,this)),s},columnHeaders:()=>{const s=[];return this.hot.hasColHeaders()&&s.push((o,a)=>{const l=o>=0?this.hot.columnIndexMapper.getVisualFromRenderableIndex(o):o;this.appendColHeader(l,a)}),this.hot.runHooks("afterGetColumnHeaderRenderers",s),Hs(RT,this,s.length),s},columnWidth:s=>{const o=this.hot.columnIndexMapper.getVisualFromRenderableIndex(s);return this.hot.getColWidth(o===null?s:o)},rowHeight:s=>{const o=this.hot.rowIndexMapper.getVisualFromRenderableIndex(s);return this.hot.getRowHeight(o===null?s:o)},rowHeightByOverlayName:(s,o)=>{const a=this.hot.rowIndexMapper.getVisualFromRenderableIndex(s),l=a===null?s:a;return this.hot.runHooks("modifyRowHeightByOverlayName",this.hot.getRowHeight(l),l,o)},cellRenderer:(s,o,a)=>{const[l,c]=this.translateFromRenderableToVisualIndex(s,o),u=this.hot.runHooks("modifyGetCellCoords",l,c);let h=l,d=c;Array.isArray(u)&&([h,d]=u);const f=this.hot.getCellMeta(h,d),g=this.hot.colToProp(d);let p=this.hot.getDataAtRowProp(h,g);this.hot.hasHook("beforeValueRender")&&(p=this.hot.runHooks("beforeValueRender",p,f)),this.hot.runHooks("beforeRenderer",a,l,c,g,p,f),this.hot.getCellRenderer(f)(this.hot,a,l,c,g,p,f),this.hot.runHooks("afterRenderer",a,l,c,g,p,f)},selections:this.hot.selection.highlight,hideBorderOnMouseDownOver:()=>this.settings.fragmentSelection,onWindowResize:()=>{this.hot&&!this.hot.isDestroyed&&this.hot.refreshDimensions()},onContainerElementResize:()=>{this.hot&&!this.hot.isDestroyed&&nf(this.hot.rootElement)&&this.hot.refreshDimensions()},onCellMouseDown:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o),u={row:!1,column:!1,cell:!1};this.hot.listen(),this.activeWt=l,Hs(Il,this,!0),this.hot.runHooks("beforeOnCellMouseDown",s,c,a,u),!vu(s)&&(yW(s,{coords:c,selection:this.hot.selection,controller:u,cellCoordsFactory:(h,d)=>this.hot._createCellCoords(h,d)}),this.hot.runHooks("afterOnCellMouseDown",s,c,a),this.activeWt=this._wt)},onCellContextMenu:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,Hs(Il,this,!1),this.hot.selection.isInProgress()&&this.hot.selection.finish(),this.hot.runHooks("beforeOnCellContextMenu",s,c,a),!vu(s)&&(this.hot.runHooks("afterOnCellContextMenu",s,c,a),this.activeWt=this._wt)},onCellMouseOut:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,this.hot.runHooks("beforeOnCellMouseOut",s,c,a),!vu(s)&&(this.hot.runHooks("afterOnCellMouseOut",s,c,a),this.activeWt=this._wt)},onCellMouseOver:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o),u={row:!1,column:!1,cell:!1};this.activeWt=l,this.hot.runHooks("beforeOnCellMouseOver",s,c,a,u),!vu(s)&&(Ii(Il,this)&&yW(s,{coords:c,selection:this.hot.selection,controller:u,cellCoordsFactory:(h,d)=>this.hot._createCellCoords(h,d)}),this.hot.runHooks("afterOnCellMouseOver",s,c,a),this.activeWt=this._wt)},onCellMouseUp:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,this.hot.runHooks("beforeOnCellMouseUp",s,c,a),!(vu(s)||this.hot.isDestroyed)&&(this.hot.runHooks("afterOnCellMouseUp",s,c,a),this.activeWt=this._wt)},onCellCornerMouseDown:s=>{s.preventDefault(),this.hot.runHooks("afterOnCellCornerMouseDown",s)},onCellCornerDblClick:s=>{s.preventDefault(),this.hot.runHooks("afterOnCellCornerDblClick",s)},beforeDraw:(s,o)=>this.beforeRender(s,o),onDraw:s=>this.afterRender(s),onBeforeViewportScrollVertically:s=>{const o=this.hot.rowIndexMapper,a=s<0;let l=s;return!a&&(l=o.getVisualFromRenderableIndex(s),l===null)?s:(l=this.hot.runHooks("beforeViewportScrollVertically",l),this.hot.runHooks("beforeViewportScroll"),a?l:o.getRenderableFromVisualIndex(l))},onBeforeViewportScrollHorizontally:s=>{const o=this.hot.columnIndexMapper,a=s<0;let l=s;return!a&&(l=o.getVisualFromRenderableIndex(s),l===null)?s:(l=this.hot.runHooks("beforeViewportScrollHorizontally",l),this.hot.runHooks("beforeViewportScroll"),a?l:o.getRenderableFromVisualIndex(l))},onScrollVertically:()=>{this.hot.runHooks("afterScrollVertically"),this.hot.runHooks("afterScroll")},onScrollHorizontally:()=>{this.hot.runHooks("afterScrollHorizontally"),this.hot.runHooks("afterScroll")},onBeforeRemoveCellClassNames:()=>this.hot.runHooks("beforeRemoveCellClassNames"),onBeforeHighlightingRowHeader:(s,o,a)=>{const l=this.hot.rowIndexMapper,c=s<0;let u=s;c||(u=l.getVisualFromRenderableIndex(s));const h=this.hot.runHooks("beforeHighlightingRowHeader",u,o,a);return c?h:l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(h,1))},onBeforeHighlightingColumnHeader:(s,o,a)=>{const l=this.hot.columnIndexMapper,c=s<0;let u=s;c||(u=l.getVisualFromRenderableIndex(s));const h=this.hot.runHooks("beforeHighlightingColumnHeader",u,o,a);return c?h:l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(h,1))},onAfterDrawSelection:(s,o,a)=>{let l;const[c,u]=this.translateFromRenderableToVisualIndex(s,o),h=this.hot.selection.getSelectedRange();if(h.size()>0){const f=h.peekByIndex(a??0);l=[f.from.row,f.from.col,f.to.row,f.to.col]}return this.hot.runHooks("afterDrawSelection",c,u,l,a)},onBeforeDrawBorders:(s,o)=>{const[a,l,c,u]=s,h=[this.hot.rowIndexMapper.getVisualFromRenderableIndex(a),this.hot.columnIndexMapper.getVisualFromRenderableIndex(l),this.hot.rowIndexMapper.getVisualFromRenderableIndex(c),this.hot.columnIndexMapper.getVisualFromRenderableIndex(u)];return this.hot.runHooks("beforeDrawBorders",h,o)},onBeforeTouchScroll:()=>this.hot.runHooks("beforeTouchScroll"),onAfterMomentumScroll:()=>this.hot.runHooks("afterMomentumScroll"),onBeforeStretchingColumnWidth:(s,o)=>{const a=this.hot.columnIndexMapper.getVisualFromRenderableIndex(o);return this.hot.runHooks("beforeStretchingColumnWidth",s,a)},onModifyRowHeaderWidth:s=>this.hot.runHooks("modifyRowHeaderWidth",s),onModifyGetCellCoords:(s,o,a)=>{const l=this.hot.rowIndexMapper,c=this.hot.columnIndexMapper,u=o>=0?c.getVisualFromRenderableIndex(o):o,h=s>=0?l.getVisualFromRenderableIndex(s):s,d=this.hot.runHooks("modifyGetCellCoords",h,u,a);if(Array.isArray(d)){const[f,g,p,m]=d;return[f>=0?l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(f,1)):f,g>=0?c.getRenderableFromVisualIndex(c.getNearestNotHiddenIndex(g,1)):g,p>=0?l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(p,-1)):p,m>=0?c.getRenderableFromVisualIndex(c.getNearestNotHiddenIndex(m,-1)):m]}},viewportRowCalculatorOverride:s=>{let o=this.settings.viewportRowRenderingOffset;if(o==="auto"&&this.settings.fixedRowsTop&&(o=10),o>0||o==="auto"){const a=this.countRenderableRows(),l=s.startRow,c=s.endRow;if(typeof o=="number")s.startRow=Math.max(l-o,0),s.endRow=Math.min(c+o,a-1);else if(o==="auto"){const u=Math.ceil(c/a*12);s.startRow=Math.max(l-u,0),s.endRow=Math.min(c+u,a-1)}}this.hot.runHooks("afterViewportRowCalculatorOverride",s)},viewportColumnCalculatorOverride:s=>{let o=this.settings.viewportColumnRenderingOffset;if(o==="auto"&&this.settings.fixedColumnsStart&&(o=10),o>0||o==="auto"){const a=this.countRenderableColumns(),l=s.startColumn,c=s.endColumn;if(typeof o=="number"&&(s.startColumn=Math.max(l-o,0),s.endColumn=Math.min(c+o,a-1)),o==="auto"){const u=Math.ceil(c/a*6);s.startColumn=Math.max(l-u,0),s.endColumn=Math.min(c+u,a-1)}}this.hot.runHooks("afterViewportColumnCalculatorOverride",s)},rowHeaderWidth:()=>this.settings.rowHeaderWidth,columnHeaderHeight:()=>{const s=this.hot.runHooks("modifyColumnHeaderHeight");return this.settings.columnHeaderHeight||s}};this.hot.runHooks("beforeInitWalkontable",e),this._wt=new rN(e),this.activeWt=this._wt;const t=this._wt.wtTable.spreader,{width:i,height:r}=this.hot.rootElement.getBoundingClientRect();this.setLastSize(i,r),this.eventManager.addEventListener(t,"mousedown",s=>{s.target===t&&s.which===3&&s.stopPropagation()}),this.eventManager.addEventListener(t,"contextmenu",s=>{s.target===t&&s.which===3&&s.stopPropagation()}),this.eventManager.addEventListener(this.hot.rootDocument.documentElement,"click",()=>{this.settings.observeDOMVisibility&&this._wt.drawInterrupted&&(this.hot.forceFullRender=!0,this.render())})}isTextSelectionAllowed(e){if(Rb(e))return!0;const t=Nu(e,this._wt.wtTable.spreader);return!!(this.settings.fragmentSelection===!0&&t||this.settings.fragmentSelection==="cell"&&this.isSelectedOnlyCell()&&t||!this.settings.fragmentSelection&&this.isCellEdited()&&this.isSelectedOnlyCell())}isMouseDown(){return Ii(Il,this)}isSelectedOnlyCell(){var e,t;return(e=(t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingleCell())!==null&&e!==void 0?e:!1}isCellEdited(){const e=this.hot.getActiveEditor();return e&&e.isOpened()}beforeRender(e,t){e&&this.hot.runHooks("beforeViewRender",this.hot.forceFullRender,t)}afterRender(e){e&&this.hot.runHooks("afterViewRender",this.hot.forceFullRender)}appendRowHeader(e,t){if(t.firstChild){const i=t.firstChild;if(!Ue(i,"relative")){ia(t),this.appendRowHeader(e,t);return}this.updateCellHeader(i.querySelector(".rowHeader"),e,this.hot.getRowHeader)}else{const{rootDocument:i,getRowHeader:r}=this.hot,s=i.createElement("div"),o=i.createElement("span");s.className="relative",o.className="rowHeader",this.updateCellHeader(o,e,r),s.appendChild(o),t.appendChild(s)}this.hot.runHooks("afterGetRowHeader",e,t)}appendColHeader(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hot.getColHeader,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const s=()=>{const o=e>=0?this.hot.getColumnMeta(e).headerClassName:null;return o?o.split(" "):[]};if(t.firstChild){const o=t.firstChild;Ue(o,"relative")?(this.updateCellHeader(o.querySelector(".colHeader"),e,i,r),o.className="",ue(o,["relative",...s()])):(ia(t),this.appendColHeader(e,t,i,r))}else{const{rootDocument:o}=this.hot,a=o.createElement("div"),l=o.createElement("span"),c=s();a.classList.add("relative",...c),l.className="colHeader",this.settings.ariaTags&&(ze(a,...Ka()),ze(l,...Ka())),this.updateCellHeader(l,e,i,r),a.appendChild(l),t.appendChild(a)}this.hot.runHooks("afterGetColHeader",e,t,r)}updateCellHeader(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=t;const o=this._wt.wtOverlays.getParentOverlay(e)||this._wt;e.parentNode&&(Ue(e,"colHeader")?s=o.wtTable.columnFilter.sourceToRendered(t):Ue(e,"rowHeader")&&(s=o.wtTable.rowFilter.sourceToRendered(t))),s>-1?Mf(e,i(t,r)):(Yu(e,""),ue(e,"cornerHeader"))}maximumVisibleElementWidth(e){const i=this._wt.wtViewport.getWorkspaceWidth()-e;return i>0?i:0}maximumVisibleElementHeight(e){const i=this._wt.wtViewport.getWorkspaceHeight()-e;return i>0?i:0}setLastSize(e,t){Hs(ET,this,e),Hs(xT,this,t)}getLastSize(){return{width:Ii(ET,this),height:Ii(xT,this)}}getFirstRenderedVisibleRow(){return this._wt.wtViewport.rowsRenderCalculator?this.hot.rowIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getFirstRenderedRow(),1):null}getLastRenderedVisibleRow(){return this._wt.wtViewport.rowsRenderCalculator?this.hot.rowIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getLastRenderedRow(),-1):null}getFirstRenderedVisibleColumn(){return this._wt.wtViewport.columnsRenderCalculator?this.hot.columnIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getFirstRenderedColumn(),1):null}getLastRenderedVisibleColumn(){return this._wt.wtViewport.columnsRenderCalculator?this.hot.columnIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getLastRenderedColumn(),-1):null}getFirstFullyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstVisibleRow())}getLastFullyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastVisibleRow())}getFirstFullyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstVisibleColumn())}getLastFullyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastVisibleColumn())}getFirstPartiallyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstPartiallyVisibleRow())}getLastPartiallyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastPartiallyVisibleRow())}getFirstPartiallyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstPartiallyVisibleColumn())}getLastPartiallyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastPartiallyVisibleColumn())}getColumnHeadersCount(){return Ii(RT,this)}getRowHeadersCount(){return Ii(L0,this)}getViewportWidth(){return this._wt.wtViewport.getViewportWidth()}getWorkspaceWidth(){return this._wt.wtViewport.getWorkspaceWidth()}getViewportHeight(){return this._wt.wtViewport.getViewportHeight()}getWorkspaceHeight(){return this._wt.wtViewport.getWorkspaceHeight()}getElementOverlayName(e){var t;return((t=this._wt.wtOverlays.getParentOverlay(e))!==null&&t!==void 0?t:this._wt).wtTable.name}getOverlayByName(e){return this._wt.getOverlayByName(e)}isVisible(){return this._wt.wtTable.isVisible()}destroy(){this._wt.destroy(),this.eventManager.destroy()}}function oY(){return parseInt(this.hot.rootElement.getAttribute($1()[0]),10)}function VTe(n){const e=ww(ES,this,oY).call(this)+n;ze(this.hot.rootElement,...$1(e))}const aY="ABCDEFGHIJKLMNOPQRSTUVWXYZ",gI=aY.length;function Q1(n){let e=n+1,t="",i;for(;e>0;)i=(e-1)%gI,t=String.fromCharCode(65+i)+t,e=parseInt((e-i)/gI,10);return t}function WTe(n){let e=0;if(n)for(let t=0,i=n.length-1;t<n.length;t+=1,i-=1)e+=gI**i*(aY.indexOf(n[t])+1);return e-=1,e}function jTe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;const t=[];let i,r;for(i=0;i<n;i++){const s=[];for(r=0;r<e;r++)s.push(Q1(r)+(i+1));t.push(s)}return t}function zTe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;const t=[];let i,r;for(i=0;i<n;i++){const s={};for(r=0;r<e;r++)s[`prop${r}`]=Q1(r)+(i+1);t.push(s)}return t}function UTe(n,e){const t=[];let i;for(let r=0;r<n;r++){i=[];for(let s=0;s<e;s++)i.push("");t.push(i)}return t}function oN(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=n;const i=[];return(!Array.isArray(n)||!Array.isArray(n[0]))&&(t=[n]),t.forEach((r,s)=>{Array.isArray(r)?r.forEach((o,a)=>{i.push([s+e,a,o])}):Object.keys(r).forEach(o=>{i.push([s+e,o,r[o]])})}),i}function aN(n){let e=0;return Array.isArray(n)&&(n[0]&&Array.isArray(n[0])?e=n[0].length:n[0]&&lt(n[0])&&(e=U1(n[0]))),e}function lY(n){return!!(Array.isArray(n)&&n.length&&n.every(e=>Array.isArray(e)))}function cY(n){return!!(Array.isArray(n)&&n.length&&n.every(e=>typeof e=="object"&&!Array.isArray(e)&&e!==null))}const GTe=Object.freeze(Object.defineProperty({__proto__:null,countFirstRowKeys:aN,createEmptySpreadsheetData:UTe,createSpreadsheetData:jTe,createSpreadsheetObjectData:zTe,dataRowToChangesArray:oN,isArrayOfArrays:lY,isArrayOfObjects:cY,spreadsheetColumnIndex:WTe,spreadsheetColumnLabel:Q1},Symbol.toStringTag,{value:"Module"}));function Vm(n,e,t){return(e=YTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YTe(n){var e=KTe(n,"string");return typeof e=="symbol"?e:e+""}function KTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class qTe{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];Vm(this,"hot",void 0),Vm(this,"data",void 0),Vm(this,"dataType","array"),Vm(this,"colToProp",()=>{}),Vm(this,"propToCol",()=>{}),this.hot=e,this.data=t}modifyRowData(e){let t;return this.hot.hasHook("modifyRowData")&&(t=this.hot.runHooks("modifyRowData",e)),t!==void 0&&!Number.isInteger(t)?t:this.data[e]}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return!this.data||this.data.length===0?this.data:this.getByRange(null,null,e)}setData(e){this.data=e}getAtColumn(e){const t=[];return j(this.data,(i,r)=>{const s=this.getAtCell(r,e);t.push(s)}),t}getAtRow(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const s=t===void 0&&i===void 0,{dataDotNotation:o}=this.hot.getSettings();let a=null,l=null;if(a=this.modifyRowData(e),Array.isArray(a))l=[],s?a.forEach((c,u)=>{l[u]=this.getAtPhysicalCell(e,u,a)}):He(t,i,c=>{l[c-t]=this.getAtPhysicalCell(e,c,a)});else if(lt(a)||cn(a))if(r?l=[]:l={},!s||r){const u=this.countFirstRowKeys()-1;He(0,u,h=>{const d=this.colToProp(h);if(h>=(t||0)&&h<=(i||u)&&!Number.isInteger(d)){const f=this.getAtPhysicalCell(e,d,a);r?l.push(f):o?yS(l,d,f):l[d]=f}})}else ct(a,(c,u)=>{const h=this.getAtPhysicalCell(e,u,a);o?yS(l,u,h):l[u]=h});return l}setAtCell(e,t,i){if(!(e>=this.countRows()||t>=this.countFirstRowKeys())){if(this.hot.hasHook("modifySourceData")){const r=to(i);this.hot.runHooks("modifySourceData",e,t,r,"set"),r.isTouched()&&(i=r.value)}Number.isInteger(t)?this.data[e][t]=i:yS(this.data[e],t,i)}}getAtPhysicalCell(e,t,i){let r=null;if(i)if(typeof t=="string"){const{dataDotNotation:s}=this.hot.getSettings();r=s?p9(i,t):i[t]}else typeof t=="function"?r=t(i):r=i[t];if(this.hot.hasHook("modifySourceData")){const s=to(r);this.hot.runHooks("modifySourceData",e,t,s,"get"),s.isTouched()&&(r=s.value)}return r}getAtCell(e,t){const i=this.modifyRowData(e);return this.getAtPhysicalCell(e,this.colToProp(t),i)}getByRange(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=!1,s=null,o=null,a=null,l=null;e===null||t===null?(r=!0,s=0,a=this.countRows()-1):(s=Math.min(e.row,t.row),o=Math.min(e.col,t.col),a=Math.max(e.row,t.row),l=Math.max(e.col,t.col));const c=[];return He(s,a,u=>{c.push(r?this.getAtRow(u,void 0,void 0,i):this.getAtRow(u,o,l,i))}),c}countRows(){if(this.hot.hasHook("modifySourceLength")){const e=this.hot.runHooks("modifySourceLength");if(Number.isInteger(e))return e}return this.data.length}countFirstRowKeys(){return aN(this.data)}destroy(){this.data=null,this.hot=null}}function CW(n,e,t){return(e=XTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XTe(n){var e=ZTe(n,"string");return typeof e=="symbol"?e:e+""}function ZTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Af{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;CW(this,"indexedValues",[]),CW(this,"initValueOrFn",void 0),this.initValueOrFn=e}getValues(){return this.indexedValues}getValueAtIndex(e){const t=this.indexedValues;if(e<t.length)return t[e]}setValues(e){this.indexedValues=e.slice(),this.runLocalHooks("change")}setValueAtIndex(e,t){return e<this.indexedValues.length?(this.indexedValues[e]=t,this.runLocalHooks("change"),!0):!1}clear(){this.setDefaultValues()}getLength(){return this.getValues().length}setDefaultValues(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.indexedValues.length;this.indexedValues.length=0,cn(this.initValueOrFn)?He(e-1,t=>this.indexedValues.push(this.initValueOrFn(t))):He(e-1,()=>this.indexedValues.push(this.initValueOrFn)),this.runLocalHooks("change")}init(e){return this.setDefaultValues(e),this.runLocalHooks("init"),this}insert(){this.runLocalHooks("change")}remove(){this.runLocalHooks("change")}destroy(){this.clearLocalHooks(),this.indexedValues=null,this.initValueOrFn=null}}Xt(Af,Ki);function lN(n,e,t,i){const r=t.length?t[0]:void 0;return[...n.slice(0,r),...t.map((s,o)=>cn(i)?i(s,o):i),...r===void 0?[]:n.slice(r)]}function cN(n,e){return Tc(n,(t,i)=>e.includes(i)===!1)}class lh extends Af{insert(e,t){this.indexedValues=lN(this.indexedValues,e,t,this.initValueOrFn),super.insert(e,t)}remove(e){this.indexedValues=cN(this.indexedValues,e),super.remove(e)}}class J1 extends lh{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;super(e)}getHiddenIndexes(){return ci(this.getValues(),(e,t,i)=>(t&&e.push(i),e),[])}}function uN(n,e,t){return[...n.slice(0,e),...t,...n.slice(e)]}function yw(n,e){return Tc(n,t=>e.includes(t)===!1)}function hN(n,e){return vt(n,t=>t-e.filter(i=>i<t).length)}function dN(n,e){const t=e[0],i=e.length;return vt(n,r=>r>=t?r+i:r)}function QTe(n,e,t){return(e=JTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JTe(n){var e=eMe(n,"string");return typeof e=="symbol"?e:e+""}function eMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class eE extends Af{constructor(){super(...arguments),QTe(this,"orderOfIndexes",[])}getValues(){return this.orderOfIndexes.map(e=>this.indexedValues[e])}setValues(e){this.orderOfIndexes=[...Array(e.length).keys()],super.setValues(e)}setValueAtIndex(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.orderOfIndexes.length;return e<this.indexedValues.length?(this.indexedValues[e]=t,this.orderOfIndexes.includes(e)===!1&&this.orderOfIndexes.splice(i,0,e),this.runLocalHooks("change"),!0):!1}clearValue(e){this.orderOfIndexes=yw(this.orderOfIndexes,[e]),cn(this.initValueOrFn)?super.setValueAtIndex(e,this.initValueOrFn(e)):super.setValueAtIndex(e,this.initValueOrFn)}getLength(){return this.orderOfIndexes.length}setDefaultValues(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.indexedValues.length;this.orderOfIndexes.length=0,super.setDefaultValues(e)}insert(e,t){this.indexedValues=lN(this.indexedValues,e,t,this.initValueOrFn),this.orderOfIndexes=dN(this.orderOfIndexes,t),super.insert(e,t)}remove(e){this.indexedValues=cN(this.indexedValues,e),this.orderOfIndexes=yw(this.orderOfIndexes,e),this.orderOfIndexes=hN(this.orderOfIndexes,e),super.remove(e)}getEntries(){return this.orderOfIndexes.map(e=>[e,this.getValueAtIndex(e)])}}class my extends lh{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;super(e)}getTrimmedIndexes(){return ci(this.getValues(),(e,t,i)=>(t&&e.push(i),e),[])}}const SW=new Map([["indexesSequence",{getListWithInsertedItems:uN,getListWithRemovedItems:yw}],["physicallyIndexed",{getListWithInsertedItems:lN,getListWithRemovedItems:cN}]]),uY=n=>{if(SW.has(n)===!1)throw new Error(`Alter strategy with ID '${n}' does not exist.`);return SW.get(n)};class hY extends Af{constructor(){super(e=>e)}insert(e,t){const i=dN(this.indexedValues,t);this.indexedValues=uN(i,e,t),super.insert(e,t)}remove(e){const t=yw(this.indexedValues,e);this.indexedValues=hN(t,e),super.remove(e)}}const _W=new Map([["hiding",J1],["index",Af],["linkedPhysicalIndexToValue",eE],["physicalIndexToValue",lh],["trimming",my]]);function tMe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!_W.has(n))throw new Error(`The provided map type ("${n}") does not exist.`);return new(_W.get(n))(e)}function nMe(n,e,t){return(e=iMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iMe(n){var e=rMe(n,"string");return typeof e=="symbol"?e:e+""}function rMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let pI=0;class fN{constructor(){nMe(this,"collection",new Map)}register(e,t){this.collection.has(e)===!1&&(this.collection.set(e,t),t.addLocalHook("change",()=>this.runLocalHooks("change",t)),pI+=1)}unregister(e){const t=this.collection.get(e);ke(t)&&(t.destroy(),this.collection.delete(e),this.runLocalHooks("change",t),pI-=1)}unregisterAll(){this.collection.forEach((e,t)=>this.unregister(t)),this.collection.clear()}get(e){return dn(e)?Array.from(this.collection.values()):this.collection.get(e)}getLength(){return this.collection.size}removeFromEvery(e){this.collection.forEach(t=>{t.remove(e)})}insertToEvery(e,t){this.collection.forEach(i=>{i.insert(e,t)})}initEvery(e){this.collection.forEach(t=>{t.init(e)})}}Xt(fN,Ki);function sMe(){return pI}function TT(n,e,t){return(e=oMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oMe(n){var e=aMe(n,"string");return typeof e=="symbol"?e:e+""}function aMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class RW extends fN{constructor(e,t){super(),TT(this,"mergedValuesCache",[]),TT(this,"aggregationFunction",void 0),TT(this,"fallbackValue",void 0),this.aggregationFunction=e,this.fallbackValue=t}getMergedValues(){if((arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0)return this.mergedValuesCache;if(this.getLength()===0)return[];const t=vt(this.get(),s=>s.getValues()),i=[],r=ke(t[0])&&t[0].length||0;for(let s=0;s<r;s+=1){const o=[];for(let a=0;a<this.getLength();a+=1)o.push(t[a][s]);i.push(o)}return vt(i,this.aggregationFunction)}getMergedValueAtIndex(e,t){const i=this.getMergedValues(t)[e];return ke(i)?i:this.fallbackValue}updateCache(){this.mergedValuesCache=this.getMergedValues(!1)}}function lMe(n,e,t){cMe(n,e),e.set(n,t)}function cMe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function uMe(n,e,t){return n.set(dY(n,e),t),t}function hMe(n,e){return n.get(dY(n,e))}function dY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var MT=new WeakMap;class fY{constructor(){lMe(this,MT,[])}subscribe(e){return this.addLocalHook("change",e),this._write(hMe(MT,this)),this}unsubscribe(){return this.runLocalHooks("unsubscribe"),this.clearLocalHooks(),this}_write(e){return e.length>0&&this.runLocalHooks("change",e),this}_writeInitialChanges(e){uMe(MT,this,e)}}Xt(fY,Ki);function EW(n,e){const t=[];let i=0,r=0;for(;i<n.length&&r<e.length;i++,r++)n[i]!==e[r]&&t.push({op:"replace",index:r,oldValue:n[i],newValue:e[r]});for(;i<e.length;i++)t.push({op:"insert",index:i,oldValue:void 0,newValue:e[i]});for(;r<n.length;r++)t.push({op:"remove",index:r,oldValue:n[r],newValue:void 0});return t}function Wm(n,e,t){dMe(n,e),e.set(n,t)}function dMe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $s(n,e){return n.get(gY(n,e))}function $0(n,e,t){return n.set(gY(n,e),t),t}function gY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var F0=new WeakMap,jm=new WeakMap,B0=new WeakMap,V0=new WeakMap,W0=new WeakMap;class fMe{constructor(){let{initialIndexValue:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wm(this,F0,new Set),Wm(this,jm,[]),Wm(this,B0,[]),Wm(this,V0,!1),Wm(this,W0,!1),$0(W0,this,e??!1)}createObserver(){const e=new fY;return $s(F0,this).add(e),e.addLocalHook("unsubscribe",()=>{$s(F0,this).delete(e)}),e._writeInitialChanges(EW($s(jm,this),$s(B0,this))),e}emit(e){let t=$s(B0,this);(!$s(V0,this)||$s(jm,this).length!==e.length)&&(e.length===0?e=new Array(t.length).fill($s(W0,this)):$0(jm,this,new Array(e.length).fill($s(W0,this))),$s(V0,this)||($0(V0,this,!0),t=$s(jm,this)));const i=EW(t,e);$s(F0,this).forEach(r=>r._write(i)),$0(B0,this,e)}}function vr(n,e,t){return(e=gMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gMe(n){var e=pMe(n,"string");return typeof e=="symbol"?e:e+""}function pMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class mI{constructor(){vr(this,"indexesSequence",new hY),vr(this,"trimmingMapsCollection",new RW(e=>e.some(t=>t===!0),!1)),vr(this,"hidingMapsCollection",new RW(e=>e.some(t=>t===!0),!1)),vr(this,"variousMapsCollection",new fN),vr(this,"hidingChangesObservable",new fMe({initialIndexValue:!1})),vr(this,"notTrimmedIndexesCache",[]),vr(this,"notHiddenIndexesCache",[]),vr(this,"isBatched",!1),vr(this,"indexesSequenceChanged",!1),vr(this,"indexesChangeSource",void 0),vr(this,"trimmedIndexesChanged",!1),vr(this,"hiddenIndexesChanged",!1),vr(this,"renderablePhysicalIndexesCache",[]),vr(this,"fromPhysicalToVisualIndexesCache",new Map),vr(this,"fromVisualToRenderableIndexesCache",new Map),this.indexesSequence.addLocalHook("change",()=>{this.indexesSequenceChanged=!0,this.updateCache(),this.runLocalHooks("indexesSequenceChange",this.indexesChangeSource),this.runLocalHooks("change",this.indexesSequence,null)}),this.trimmingMapsCollection.addLocalHook("change",e=>{this.trimmedIndexesChanged=!0,this.updateCache(),this.runLocalHooks("change",e,this.trimmingMapsCollection)}),this.hidingMapsCollection.addLocalHook("change",e=>{this.hiddenIndexesChanged=!0,this.updateCache(),this.runLocalHooks("change",e,this.hidingMapsCollection)}),this.variousMapsCollection.addLocalHook("change",e=>{this.runLocalHooks("change",e,this.variousMapsCollection)})}suspendOperations(){this.isBatched=!0}resumeOperations(){this.isBatched=!1,this.updateCache()}createChangesObserver(e){if(e!=="hiding")throw new Error(`Unsupported index map type "${e}".`);return this.hidingChangesObservable.createObserver()}createAndRegisterIndexMap(e,t,i){return this.registerMap(e,tMe(t,i))}registerMap(e,t){if(this.trimmingMapsCollection.get(e)||this.hidingMapsCollection.get(e)||this.variousMapsCollection.get(e))throw Error(`Map with name "${e}" has been already registered.`);t instanceof my?this.trimmingMapsCollection.register(e,t):t instanceof J1?this.hidingMapsCollection.register(e,t):this.variousMapsCollection.register(e,t);const i=this.getNumberOfIndexes();return i>0&&t.init(i),t}unregisterMap(e){this.trimmingMapsCollection.unregister(e),this.hidingMapsCollection.unregister(e),this.variousMapsCollection.unregister(e)}unregisterAll(){this.trimmingMapsCollection.unregisterAll(),this.hidingMapsCollection.unregisterAll(),this.variousMapsCollection.unregisterAll()}getPhysicalFromVisualIndex(e){const t=this.notTrimmedIndexesCache[e];return ke(t)?t:null}getPhysicalFromRenderableIndex(e){const t=this.renderablePhysicalIndexesCache[e];return ke(t)?t:null}getVisualFromPhysicalIndex(e){const t=this.fromPhysicalToVisualIndexesCache.get(e);return ke(t)?t:null}getVisualFromRenderableIndex(e){return this.getVisualFromPhysicalIndex(this.getPhysicalFromRenderableIndex(e))}getRenderableFromVisualIndex(e){const t=this.fromVisualToRenderableIndexesCache.get(e);return ke(t)?t:null}getNearestNotHiddenIndex(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.getPhysicalFromVisualIndex(e)===null)return null;if(this.fromVisualToRenderableIndexesCache.has(e))return e;const s=Array.from(this.fromVisualToRenderableIndexesCache.keys());let o=-1;return t>0?o=s.findIndex(a=>a>e):o=s.reverse().findIndex(a=>a<e),o===-1?i?this.getNearestNotHiddenIndex(e,-t,!1):null:s[o]}initToLength(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getNumberOfIndexes();this.notTrimmedIndexesCache=[...new Array(e).keys()],this.notHiddenIndexesCache=[...new Array(e).keys()],this.suspendOperations(),this.indexesChangeSource="init",this.indexesSequence.init(e),this.indexesChangeSource=void 0,this.trimmingMapsCollection.initEvery(e),this.resumeOperations(),this.suspendOperations(),this.hidingMapsCollection.initEvery(e),this.variousMapsCollection.initEvery(e),this.resumeOperations(),this.runLocalHooks("init")}fitToLength(e){const t=this.getNumberOfIndexes();if(e<t){const i=[...Array(this.getNumberOfIndexes()-e).keys()].map(r=>r+e);this.removeIndexes(i)}else this.insertIndexes(t,e-t)}getIndexesSequence(){return this.indexesSequence.getValues()}setIndexesSequence(e){this.indexesChangeSource===void 0&&(this.indexesChangeSource="update"),this.indexesSequence.setValues(e),this.indexesChangeSource==="update"&&(this.indexesChangeSource=void 0)}getNotTrimmedIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.notTrimmedIndexesCache:this.getIndexesSequence().filter(i=>this.isTrimmed(i)===!1)}getNotTrimmedIndexesLength(){return this.getNotTrimmedIndexes().length}getNotHiddenIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.notHiddenIndexesCache:this.getIndexesSequence().filter(i=>this.isHidden(i)===!1)}getNotHiddenIndexesLength(){return this.getNotHiddenIndexes().length}getRenderableIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.renderablePhysicalIndexesCache:this.getNotTrimmedIndexes().filter(i=>this.isHidden(i)===!1)}getRenderableIndexesLength(){return this.getRenderableIndexes().length}getNumberOfIndexes(){return this.getIndexesSequence().length}moveIndexes(e,t){typeof e=="number"&&(e=[e]);const i=vt(e,c=>this.getPhysicalFromVisualIndex(c)),r=this.getNotTrimmedIndexesLength(),s=e.length,o=yw(this.getIndexesSequence(),i),a=o.filter(c=>this.isTrimmed(c)===!1);let l=o.indexOf(a[a.length-1])+1;if(t+s<r){const c=a[t];l=o.indexOf(c)}this.indexesChangeSource="move",this.setIndexesSequence(uN(o,l,i)),this.indexesChangeSource=void 0}isTrimmed(e){return this.trimmingMapsCollection.getMergedValueAtIndex(e)}isHidden(e){return this.hidingMapsCollection.getMergedValueAtIndex(e)}insertIndexes(e,t){const i=this.getNotTrimmedIndexes()[e],r=ke(i)?i:this.getNumberOfIndexes(),s=this.getIndexesSequence().includes(i)?this.getIndexesSequence().indexOf(i):this.getNumberOfIndexes(),o=vt(new Array(t).fill(r),(a,l)=>a+l);this.suspendOperations(),this.indexesChangeSource="insert",this.indexesSequence.insert(s,o),this.indexesChangeSource=void 0,this.trimmingMapsCollection.insertToEvery(s,o),this.hidingMapsCollection.insertToEvery(s,o),this.variousMapsCollection.insertToEvery(s,o),this.resumeOperations()}removeIndexes(e){this.suspendOperations(),this.indexesChangeSource="remove",this.indexesSequence.remove(e),this.indexesChangeSource=void 0,this.trimmingMapsCollection.removeFromEvery(e),this.hidingMapsCollection.removeFromEvery(e),this.variousMapsCollection.removeFromEvery(e),this.resumeOperations()}updateCache(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=this.indexesSequenceChanged||this.trimmedIndexesChanged||this.hiddenIndexesChanged;(e===!0||this.isBatched===!1&&t===!0)&&(this.trimmingMapsCollection.updateCache(),this.hidingMapsCollection.updateCache(),this.notTrimmedIndexesCache=this.getNotTrimmedIndexes(!1),this.notHiddenIndexesCache=this.getNotHiddenIndexes(!1),this.renderablePhysicalIndexesCache=this.getRenderableIndexes(!1),this.cacheFromPhysicalToVisualIndexes(),this.cacheFromVisualToRenderableIndexes(),this.hiddenIndexesChanged&&this.hidingChangesObservable.emit(this.hidingMapsCollection.getMergedValues()),this.runLocalHooks("cacheUpdated",{indexesSequenceChanged:this.indexesSequenceChanged,trimmedIndexesChanged:this.trimmedIndexesChanged,hiddenIndexesChanged:this.hiddenIndexesChanged}),this.indexesSequenceChanged=!1,this.trimmedIndexesChanged=!1,this.hiddenIndexesChanged=!1)}cacheFromPhysicalToVisualIndexes(){const e=this.getNotTrimmedIndexesLength();this.fromPhysicalToVisualIndexesCache.clear();for(let t=0;t<e;t+=1){const i=this.getPhysicalFromVisualIndex(t);this.fromPhysicalToVisualIndexesCache.set(i,t)}}cacheFromVisualToRenderableIndexes(){const e=this.getRenderableIndexesLength();this.fromVisualToRenderableIndexesCache.clear();for(let t=0;t<e;t+=1){const i=this.getPhysicalFromRenderableIndex(t),r=this.getVisualFromPhysicalIndex(i);this.fromVisualToRenderableIndexesCache.set(r,t)}}}Xt(mI,Ki);function mMe(n,e){return ct(e,(t,i)=>{dn(n[i])&&(n[i]=t)}),n}function pY(n){const t=/^([a-zA-Z]{2})-([a-zA-Z]{2})$/.exec(n);return t?`${t[1].toLowerCase()}-${t[2].toUpperCase()}`:n}function mY(n){ke(n)&&ND(Kt`Language with code "${n}" was not found. You should register particular language\x20
    before using it. Read more about this issue at: https://docs.handsontable.com/i18n/missing-language-code.`)}function vMe(n,e){return Array.isArray(n)&&Number.isInteger(e)?n[e]:n}const{register:bMe,getValues:wMe}=ua("phraseFormatters");function yMe(n,e){bMe(n,e)}function CMe(){return wMe()}yMe("pluralize",vMe);const vY="ContextMenu:items",rt=vY,gN=`${rt}.noItems`,pN=`${rt}.insertRowAbove`,mN=`${rt}.insertRowBelow`,vN=`${rt}.insertColumnOnTheLeft`,bN=`${rt}.insertColumnOnTheRight`,wN=`${rt}.removeRow`,yN=`${rt}.removeColumn`,CN=`${rt}.undo`,SN=`${rt}.redo`,X_=`${rt}.readOnly`,_N=`${rt}.clearColumn`,RN=`${rt}.copy`,EN=`${rt}.copyWithHeaders`,xN=`${rt}.copyWithGroupHeaders`,TN=`${rt}.copyHeadersOnly`,MN=`${rt}.cut`,AN=`${rt}.freezeColumn`,PN=`${rt}.unfreezeColumn`,IN=`${rt}.mergeCells`,ON=`${rt}.unmergeCells`,kN=`${rt}.addComment`,DN=`${rt}.editComment`,NN=`${rt}.removeComment`,LN=`${rt}.readOnlyComment`,HN=`${rt}.align`,Z_=`${rt}.align.left`,Q_=`${rt}.align.center`,J_=`${rt}.align.right`,eR=`${rt}.align.justify`,tR=`${rt}.align.top`,nR=`${rt}.align.middle`,iR=`${rt}.align.bottom`,$N=`${rt}.borders`,FN=`${rt}.borders.top`,BN=`${rt}.borders.right`,VN=`${rt}.borders.bottom`,WN=`${rt}.borders.left`,jN=`${rt}.borders.remove`,zN=`${rt}.nestedHeaders.insertChildRow`,UN=`${rt}.nestedHeaders.detachFromParent`,GN=`${rt}.hideColumn`,YN=`${rt}.showColumn`,KN=`${rt}.hideRow`,qN=`${rt}.showRow`,Nr="Filters:",Gn=`${Nr}conditions`,tE=`${Gn}.none`,XN=`${Gn}.isEmpty`,ZN=`${Gn}.isNotEmpty`,QN=`${Gn}.isEqualTo`,JN=`${Gn}.isNotEqualTo`,eL=`${Gn}.beginsWith`,tL=`${Gn}.endsWith`,nL=`${Gn}.contains`,iL=`${Gn}.doesNotContain`,SMe=`${Gn}.byValue`,rL=`${Gn}.greaterThan`,sL=`${Gn}.greaterThanOrEqualTo`,oL=`${Gn}.lessThan`,aL=`${Gn}.lessThanOrEqualTo`,lL=`${Gn}.isBetween`,cL=`${Gn}.isNotBetween`,uL=`${Gn}.after`,hL=`${Gn}.before`,dL=`${Gn}.today`,fL=`${Gn}.tomorrow`,gL=`${Gn}.yesterday`,pL=`${Nr}labels.filterByCondition`,mL=`${Nr}labels.filterByValue`,vL=`${Nr}labels.conjunction`,nE=`${Nr}labels.disjunction`,rR=`${Nr}values.blankCells`,bL=`${Nr}buttons.selectAll`,wL=`${Nr}buttons.clear`,yL=`${Nr}buttons.ok`,CL=`${Nr}buttons.cancel`,SL=`${Nr}buttons.placeholder.search`,_L=`${Nr}buttons.placeholder.value`,RL=`${Nr}buttons.placeholder.secondValue`,EL="CheckboxRenderer:",xL=`${EL}checked`,TL=`${EL}unchecked`,_Me=Object.freeze(Object.defineProperty({__proto__:null,CHECKBOX_CHECKED:xL,CHECKBOX_RENDERER_NAMESPACE:EL,CHECKBOX_UNCHECKED:TL,CONTEXTMENU_ITEMS_ADD_COMMENT:kN,CONTEXTMENU_ITEMS_ALIGNMENT:HN,CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM:iR,CONTEXTMENU_ITEMS_ALIGNMENT_CENTER:Q_,CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY:eR,CONTEXTMENU_ITEMS_ALIGNMENT_LEFT:Z_,CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE:nR,CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT:J_,CONTEXTMENU_ITEMS_ALIGNMENT_TOP:tR,CONTEXTMENU_ITEMS_BORDERS:$N,CONTEXTMENU_ITEMS_BORDERS_BOTTOM:VN,CONTEXTMENU_ITEMS_BORDERS_LEFT:WN,CONTEXTMENU_ITEMS_BORDERS_RIGHT:BN,CONTEXTMENU_ITEMS_BORDERS_TOP:FN,CONTEXTMENU_ITEMS_CLEAR_COLUMN:_N,CONTEXTMENU_ITEMS_COPY:RN,CONTEXTMENU_ITEMS_COPY_COLUMN_HEADERS_ONLY:TN,CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_GROUP_HEADERS:xN,CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_HEADERS:EN,CONTEXTMENU_ITEMS_CUT:MN,CONTEXTMENU_ITEMS_EDIT_COMMENT:DN,CONTEXTMENU_ITEMS_FREEZE_COLUMN:AN,CONTEXTMENU_ITEMS_HIDE_COLUMN:GN,CONTEXTMENU_ITEMS_HIDE_ROW:KN,CONTEXTMENU_ITEMS_INSERT_LEFT:vN,CONTEXTMENU_ITEMS_INSERT_RIGHT:bN,CONTEXTMENU_ITEMS_MERGE_CELLS:IN,CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD:UN,CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD:zN,CONTEXTMENU_ITEMS_NO_ITEMS:gN,CONTEXTMENU_ITEMS_READ_ONLY:X_,CONTEXTMENU_ITEMS_READ_ONLY_COMMENT:LN,CONTEXTMENU_ITEMS_REDO:SN,CONTEXTMENU_ITEMS_REMOVE_BORDERS:jN,CONTEXTMENU_ITEMS_REMOVE_COLUMN:yN,CONTEXTMENU_ITEMS_REMOVE_COMMENT:NN,CONTEXTMENU_ITEMS_REMOVE_ROW:wN,CONTEXTMENU_ITEMS_ROW_ABOVE:pN,CONTEXTMENU_ITEMS_ROW_BELOW:mN,CONTEXTMENU_ITEMS_SHOW_COLUMN:YN,CONTEXTMENU_ITEMS_SHOW_ROW:qN,CONTEXTMENU_ITEMS_UNDO:CN,CONTEXTMENU_ITEMS_UNFREEZE_COLUMN:PN,CONTEXTMENU_ITEMS_UNMERGE_CELLS:ON,CONTEXT_MENU_ITEMS_NAMESPACE:vY,FILTERS_BUTTONS_CANCEL:CL,FILTERS_BUTTONS_CLEAR:wL,FILTERS_BUTTONS_OK:yL,FILTERS_BUTTONS_PLACEHOLDER_SEARCH:SL,FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE:RL,FILTERS_BUTTONS_PLACEHOLDER_VALUE:_L,FILTERS_BUTTONS_SELECT_ALL:bL,FILTERS_CONDITIONS_AFTER:uL,FILTERS_CONDITIONS_BEFORE:hL,FILTERS_CONDITIONS_BEGINS_WITH:eL,FILTERS_CONDITIONS_BETWEEN:lL,FILTERS_CONDITIONS_BY_VALUE:SMe,FILTERS_CONDITIONS_CONTAINS:nL,FILTERS_CONDITIONS_EMPTY:XN,FILTERS_CONDITIONS_ENDS_WITH:tL,FILTERS_CONDITIONS_EQUAL:QN,FILTERS_CONDITIONS_GREATER_THAN:rL,FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL:sL,FILTERS_CONDITIONS_LESS_THAN:oL,FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL:aL,FILTERS_CONDITIONS_NAMESPACE:Gn,FILTERS_CONDITIONS_NONE:tE,FILTERS_CONDITIONS_NOT_BETWEEN:cL,FILTERS_CONDITIONS_NOT_CONTAIN:iL,FILTERS_CONDITIONS_NOT_EMPTY:ZN,FILTERS_CONDITIONS_NOT_EQUAL:JN,FILTERS_CONDITIONS_TODAY:dL,FILTERS_CONDITIONS_TOMORROW:fL,FILTERS_CONDITIONS_YESTERDAY:gL,FILTERS_DIVS_FILTER_BY_CONDITION:pL,FILTERS_DIVS_FILTER_BY_VALUE:mL,FILTERS_LABELS_CONJUNCTION:vL,FILTERS_LABELS_DISJUNCTION:nE,FILTERS_NAMESPACE:Nr,FILTERS_VALUES_BLANK_CELLS:rR},Symbol.toStringTag,{value:"Module"}));/**
 * @preserve
 * Authors: Handsoncode
 * Last updated: Nov 15, 2017
 *
 * Description: Definition file for English - United States language-country.
 */const bY={languageCode:"en-US",[gN]:"No available options",[pN]:"Insert row above",[mN]:"Insert row below",[vN]:"Insert column left",[bN]:"Insert column right",[wN]:["Remove row","Remove rows"],[yN]:["Remove column","Remove columns"],[CN]:"Undo",[SN]:"Redo",[X_]:"Read only",[_N]:"Clear column",[HN]:"Alignment",[Z_]:"Left",[Q_]:"Center",[J_]:"Right",[eR]:"Justify",[tR]:"Top",[nR]:"Middle",[iR]:"Bottom",[AN]:"Freeze column",[PN]:"Unfreeze column",[$N]:"Borders",[FN]:"Top",[BN]:"Right",[VN]:"Bottom",[WN]:"Left",[jN]:"Remove border(s)",[kN]:"Add comment",[DN]:"Edit comment",[NN]:"Delete comment",[LN]:"Read-only comment",[IN]:"Merge cells",[ON]:"Unmerge cells",[RN]:"Copy",[EN]:["Copy with header","Copy with headers"],[xN]:["Copy with group header","Copy with group headers"],[TN]:["Copy header only","Copy headers only"],[MN]:"Cut",[zN]:"Insert child row",[UN]:"Detach from parent",[GN]:["Hide column","Hide columns"],[YN]:["Show column","Show columns"],[KN]:["Hide row","Hide rows"],[qN]:["Show row","Show rows"],[tE]:"None",[XN]:"Is empty",[ZN]:"Is not empty",[QN]:"Is equal to",[JN]:"Is not equal to",[eL]:"Begins with",[tL]:"Ends with",[nL]:"Contains",[iL]:"Does not contain",[rL]:"Greater than",[sL]:"Greater than or equal to",[oL]:"Less than",[aL]:"Less than or equal to",[lL]:"Is between",[cL]:"Is not between",[uL]:"After",[hL]:"Before",[dL]:"Today",[fL]:"Tomorrow",[gL]:"Yesterday",[rR]:"Blank cells",[pL]:"Filter by condition",[mL]:"Filter by value",[vL]:"And",[nE]:"Or",[bL]:"Select all",[wL]:"Clear",[yL]:"OK",[CL]:"Cancel",[SL]:"Search",[_L]:"Value",[RL]:"Second value",[xL]:"Checked",[TL]:"Unchecked"},RMe=_Me,vI=bY.languageCode,{register:EMe,getItem:wY,hasItem:xMe,getValues:TMe}=ua("languagesDictionaries");yY(bY);function yY(n,e){let t=n,i=e;return lt(n)&&(i=n,t=i.languageCode),MMe(t,i),EMe(t,gr(i)),gr(i)}function MMe(n,e){n!==vI&&mMe(e,wY(vI))}function CY(n){return ML(n)?gr(wY(n)):null}function ML(n){return xMe(n)}function AMe(){return TMe()}function SY(n,e,t){const i=CY(n);if(i===null)return null;const r=i[e];if(dn(r))return null;const s=PMe(r,t);return Array.isArray(s)?s[0]:s}function PMe(n,e){let t=n;return j(CMe(),i=>{t=i(n,e)}),t}function IMe(n){let e=pY(n);return ML(e)||(e=vI,mY(n)),e}function OMe(n,e,t){return(e=kMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kMe(n){var e=DMe(n,"string");return typeof e=="symbol"?e:e+""}function DMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Vc extends J9{constructor(e,t){super(e,null),OMe(this,"visualCellRange",null),this.visualCellRange=t||null,this.commit()}add(e){return this.visualCellRange===null?this.visualCellRange=this.settings.createCellRange(e):this.visualCellRange.expand(e),this}clear(){return this.visualCellRange=null,super.clear()}trimToVisibleCellsRangeOnly(e){let{from:t,to:i}=e,r=this.getNearestNotHiddenCoords(t,1),s=this.getNearestNotHiddenCoords(i,-1);return r===null||s===null?null:((r.row>s.row||r.col>s.col)&&(r=t,s=i),this.settings.createCellRange(r,r,s))}getNearestNotHiddenCoords(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t;const r=this.getNearestNotHiddenIndex(this.settings.rowIndexMapper,e.row,t);if(r===null)return null;const s=this.getNearestNotHiddenIndex(this.settings.columnIndexMapper,e.col,i);return s===null?null:this.settings.createCellCoords(r,s)}getNearestNotHiddenIndex(e,t,i){return t<0?t:e.getNearestNotHiddenIndex(t,i)}commit(){if(this.visualCellRange===null)return this;const e=this.trimToVisibleCellsRangeOnly(this.visualCellRange);return e===null?this.cellRange=null:this.cellRange=this.createRenderableCellRange(e.from,e.to),this}syncWith(e){const t=e.from.clone().normalize(),i=e.getVerticalDirection()==="N-S"?1:-1,r=e.getHorizontalDirection()==="W-E"?1:-1,s=this.settings.visualToRenderableCoords(this.visualCellRange.highlight);let o=null;if((s===null||s.col===null||s.row===null)&&(o=this.getNearestNotHiddenCoords(t,i,r)),o!==null&&e.overlaps(o)){const a=e.highlight.clone();if(a.row>=0&&(a.row=o.row),a.col>=0&&(a.col=o.col),this.cellRange===null){const l=this.settings.visualToRenderableCoords(a);this.cellRange=this.settings.createCellRange(l)}e.setHighlight(a)}return this.settings.selectionType==="focus"&&s!==null&&o===null&&e.setHighlight(this.visualCellRange.highlight),this}getCorners(){const{from:e,to:t}=this.cellRange;return[Math.min(e.row,t.row),Math.min(e.col,t.col),Math.max(e.row,t.row),Math.max(e.col,t.col)]}getVisualCorners(){const e=this.settings.renderableToVisualCoords(this.cellRange.getTopStartCorner()),t=this.settings.renderableToVisualCoords(this.cellRange.getBottomEndCorner());return[e.row,e.col,t.row,t.col]}createRenderableCellRange(e,t){const i=this.settings.visualToRenderableCoords(e),r=this.settings.visualToRenderableCoords(t);return i.row===null||i.col===null||r.row===null||r.col===null?null:this.settings.createCellRange(i,i,r)}}function AT(n){let{activeHeaderClassName:e,...t}=n;return new Vc({className:e,...t,selectionType:eY})}function NMe(n){let{areaCornerVisible:e,...t}=n;return new Vc({className:"area",createLayers:!0,border:{width:1,color:"#4b89ff",cornerVisible:e},...t,selectionType:XD})}function LMe(n){let{...e}=n;return new Vc({className:"highlight",...e,selectionType:XD})}function HMe(n){let{columnClassName:e,...t}=n;return new Vc({className:e,...t,selectionType:aTe})}function $Me(n){let{cellCornerVisible:e,...t}=n;return new Vc({className:"current",headerAttributes:[bD()],border:{width:2,color:"#4b89ff",cornerVisible:e},...t,selectionType:ZD})}function FMe(n){let{border:e,visualCellRange:t,...i}=n;return new Vc({...e,...i,selectionType:lTe},t)}function BMe(n){let{...e}=n;return new Vc({className:"fill",border:{width:1,color:"#ff0000"},...e,selectionType:sTe})}function xW(n){let{headerClassName:e,...t}=n;return new Vc({className:e,...t,selectionType:qD})}function VMe(n){let{rowClassName:e,...t}=n;return new Vc({className:e,...t,selectionType:oTe})}function WMe(n,e){jMe(n,e),e.add(n)}function jMe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fr(n,e,t){return(e=zMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zMe(n){var e=UMe(n,"string");return typeof e=="symbol"?e:e+""}function UMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ol(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var pa=new WeakSet;class GMe{constructor(e){WMe(this,pa),Fr(this,"options",void 0),Fr(this,"layerLevel",0),Fr(this,"focus",void 0),Fr(this,"fill",void 0),Fr(this,"layeredAreas",new Map),Fr(this,"areas",new Map),Fr(this,"rowHeaders",new Map),Fr(this,"columnHeaders",new Map),Fr(this,"activeRowHeaders",new Map),Fr(this,"activeColumnHeaders",new Map),Fr(this,"activeCornerHeaders",new Map),Fr(this,"rowHighlights",new Map),Fr(this,"columnHighlights",new Map),Fr(this,"customSelections",[]),this.options=e,this.focus=$Me(e),this.fill=BMe(e)}isEnabledFor(e,t){let i=e;e===ZD&&(i="current");let r=this.options.disabledCellSelection(t.row,t.col);return typeof r=="string"&&(r=[r]),r===!1||Array.isArray(r)&&!r.includes(i)}useLayerLevel(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.layerLevel=e,this}getFocus(){return this.focus}getFill(){return this.fill}createLayeredArea(){return Ol(pa,this,kl).call(this,this.layeredAreas,NMe)}getLayeredAreas(){return[...this.layeredAreas.values()]}createArea(){return Ol(pa,this,kl).call(this,this.areas,LMe)}getAreas(){return[...this.areas.values()]}createRowHeader(){return Ol(pa,this,kl).call(this,this.rowHeaders,xW)}getRowHeaders(){return[...this.rowHeaders.values()]}createColumnHeader(){return Ol(pa,this,kl).call(this,this.columnHeaders,xW)}getColumnHeaders(){return[...this.columnHeaders.values()]}createActiveRowHeader(){return Ol(pa,this,kl).call(this,this.activeRowHeaders,AT)}getActiveRowHeaders(){return[...this.activeRowHeaders.values()]}createActiveColumnHeader(){return Ol(pa,this,kl).call(this,this.activeColumnHeaders,AT)}getActiveColumnHeaders(){return[...this.activeColumnHeaders.values()]}createActiveCornerHeader(){return Ol(pa,this,kl).call(this,this.activeCornerHeaders,AT)}getActiveCornerHeaders(){return[...this.activeCornerHeaders.values()]}createRowHighlight(){return Ol(pa,this,kl).call(this,this.rowHighlights,VMe)}getRowHighlights(){return[...this.rowHighlights.values()]}createColumnHighlight(){return Ol(pa,this,kl).call(this,this.columnHighlights,HMe)}getColumnHighlights(){return[...this.columnHighlights.values()]}getCustomSelections(){return[...this.customSelections.values()]}addCustomSelection(e){this.customSelections.push(FMe({...this.options,...e}))}clear(){this.focus.clear(),this.fill.clear(),j(this.areas.values(),e=>void e.clear()),j(this.layeredAreas.values(),e=>void e.clear()),j(this.rowHeaders.values(),e=>void e.clear()),j(this.columnHeaders.values(),e=>void e.clear()),j(this.activeRowHeaders.values(),e=>void e.clear()),j(this.activeColumnHeaders.values(),e=>void e.clear()),j(this.activeCornerHeaders.values(),e=>void e.clear()),j(this.rowHighlights.values(),e=>void e.clear()),j(this.columnHighlights.values(),e=>void e.clear())}[Symbol.iterator](){return[this.focus,this.fill,...this.areas.values(),...this.layeredAreas.values(),...this.rowHeaders.values(),...this.columnHeaders.values(),...this.activeRowHeaders.values(),...this.activeColumnHeaders.values(),...this.activeCornerHeaders.values(),...this.rowHighlights.values(),...this.columnHighlights.values(),...this.customSelections][Symbol.iterator]()}}function kl(n,e){const t=this.layerLevel;if(n.has(t))return n.get(t);const i=e({layerLevel:t,...this.options});return n.set(t,i),i}function TW(n,e,t){return(e=YMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YMe(n){var e=KMe(n,"string");return typeof e=="symbol"?e:e+""}function KMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class qMe{constructor(e){TW(this,"ranges",[]),TW(this,"createCellRange",void 0),this.createCellRange=e}isEmpty(){return this.size()===0}set(e){return this.clear(),this.ranges.push(this.createCellRange(e)),this}add(e){return this.ranges.push(this.createCellRange(e)),this}pop(){return this.ranges.pop(),this}current(){return this.peekByIndex(this.size()-1)}previous(){return this.peekByIndex(this.size()-2)}includes(e){return this.ranges.some(t=>t.includes(e))}clear(){return this.ranges.length=0,this}size(){return this.ranges.length}peekByIndex(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t;return e>=0&&e<this.size()&&(t=this.ranges[e]),t}[Symbol.iterator](){return this.ranges[Symbol.iterator]()}}function XMe(n,e){_Y(n,e),e.add(n)}function PT(n,e,t){_Y(n,e),e.set(n,t)}function _Y(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pt(n,e){return n.get(hi(n,e))}function j0(n,e,t){return n.set(hi(n,e),t),t}function hi(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var z0=new WeakMap,vn=new WeakMap,Zo=new WeakMap,Si=new WeakSet;class bI{constructor(e,t){XMe(this,Si),PT(this,z0,void 0),PT(this,vn,void 0),PT(this,Zo,{x:0,y:0}),j0(z0,this,e),j0(vn,this,t)}transformStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=Pt(vn,this).createCellCoords(e,t);let s=Pt(z0,this).current().highlight;const o=Pt(vn,this).visualToRenderableCoords(s);let a=0,l=0;if(this.runLocalHooks("beforeTransformStart",r),o.row!==null&&o.col!==null){const{width:c,height:u}=hi(Si,this,RY).call(this),{row:h,col:d}=hi(Si,this,AW).call(this,s),f=Pt(vn,this).fixedRowsBottom(),g=Pt(vn,this).minSpareRows(),p=Pt(vn,this).minSpareCols(),m=Pt(vn,this).autoWrapRow(),b=Pt(vn,this).autoWrapCol(),y=Pt(vn,this).createCellCoords(h+r.row,d+r.col);if(y.row>=u){const E=to(i&&g>0&&f===0),_=y.col+1,T=Pt(vn,this).createCellCoords(y.row-u,_>=c?_-c:_);this.runLocalHooks("beforeColumnWrap",E,hi(Si,this,qf).call(this,T),_>=c),E.value?this.runLocalHooks("insertRowRequire",Pt(vn,this).countRenderableRows()):b&&y.assign(T)}else if(y.row<0){const E=to(b),_=y.col-1,T=Pt(vn,this).createCellCoords(u+y.row,_<0?c+_:_);this.runLocalHooks("beforeColumnWrap",E,hi(Si,this,qf).call(this,T),_<0),b&&y.assign(T)}if(y.col>=c){const E=to(i&&p>0),_=y.row+1,T=Pt(vn,this).createCellCoords(_>=u?_-u:_,y.col-c);this.runLocalHooks("beforeRowWrap",E,hi(Si,this,qf).call(this,T),_>=u),E.value?this.runLocalHooks("insertColRequire",Pt(vn,this).countRenderableColumns()):m&&y.assign(T)}else if(y.col<0){const E=to(m),_=y.row-1,T=Pt(vn,this).createCellCoords(_<0?u+_:_,c+y.col);this.runLocalHooks("beforeRowWrap",E,hi(Si,this,qf).call(this,T),_<0),m&&y.assign(T)}const{rowDir:w,colDir:R}=hi(Si,this,MW).call(this,y);a=w,l=R,s=hi(Si,this,qf).call(this,y)}return this.runLocalHooks("afterTransformStart",s,a,l),s}transformEnd(e,t){const i=Pt(vn,this).createCellCoords(e,t),r=Pt(z0,this).current(),s=Pt(vn,this).visualToRenderableCoords(r.highlight),o=hi(Si,this,IT).call(this,r.to.row,r.from.row),a=hi(Si,this,OT).call(this,r.to.col,r.from.col),l=r.to.clone();let c=0,u=0;if(this.runLocalHooks("beforeTransformEnd",i),s.row!==null&&s.col!==null&&o!==null&&a!==null){const{row:h,col:d}=hi(Si,this,AW).call(this,r.highlight),f=Pt(vn,this).createCellCoords(o+i.row,a+i.col),g=r.getTopStartCorner(),p=r.getTopEndCorner(),m=r.getBottomEndCorner();if(i.col<0&&a>=d&&f.col<d){const R=f.col-d;f.col=hi(Si,this,OT).call(this,g.col,p.col)+R}else if(i.col>0&&a<=d&&f.col>d){const R=hi(Si,this,OT).call(this,p.col,g.col),E=Math.max(f.col-R,1);f.col=R+E}if(i.row<0&&o>=h&&f.row<h){const R=f.row-h;f.row=hi(Si,this,IT).call(this,g.row,m.row)+R}else if(i.row>0&&o<=h&&f.row>h){const R=hi(Si,this,IT).call(this,m.row,g.row),E=Math.max(f.row-R,1);f.row=R+E}const{rowDir:b,colDir:y}=hi(Si,this,MW).call(this,f);c=b,u=y;const w=hi(Si,this,qf).call(this,f);i.row===0&&i.col!==0?l.col=w.col:i.row!==0&&i.col===0?l.row=w.row:(l.row=w.row,l.col=w.col)}return this.runLocalHooks("afterTransformEnd",l,c,u),l}setOffsetSize(e){let{x:t,y:i}=e;j0(Zo,this,{x:t,y:i})}resetOffsetSize(){j0(Zo,this,{x:0,y:0})}}function MW(n){const{width:e,height:t}=hi(Si,this,RY).call(this);let i=0,r=0;return n.row<0?(i=-1,n.row=0):n.row>0&&n.row>=t&&(i=1,n.row=t-1),n.col<0?(r=-1,n.col=0):n.col>0&&n.col>=e&&(r=1,n.col=e-1),{rowDir:i,colDir:r}}function RY(){return{width:Pt(Zo,this).x+Pt(vn,this).countRenderableColumns(),height:Pt(Zo,this).y+Pt(vn,this).countRenderableRows()}}function IT(n,e){const t=Pt(vn,this).findFirstNonHiddenRenderableRow(n,e);return t===null?null:Pt(Zo,this).y+t}function OT(n,e){const t=Pt(vn,this).findFirstNonHiddenRenderableColumn(n,e);return t===null?null:Pt(Zo,this).x+t}function AW(n){const{row:e,col:t}=Pt(vn,this).visualToRenderableCoords(n);if(e===null||t===null)throw new Error("Renderable coords are not visible.");return Pt(vn,this).createCellCoords(Pt(Zo,this).y+e,Pt(Zo,this).x+t)}function qf(n){const e=n.clone();return e.col=n.col-Pt(Zo,this).x,e.row=n.row-Pt(Zo,this).y,Pt(vn,this).renderableToVisualCoords(e)}Xt(bI,Ki);const iE=0,rE=1,EY=2,AL=3,ZMe=[AL,EY],QMe=[["number"],["number","string"],["number","undefined"],["number","string","undefined"]],kT=Symbol("root"),PW=Symbol("child");function xp(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kT;if(e!==kT&&e!==PW)throw new Error("The second argument is used internally only and cannot be overwritten.");const t=Array.isArray(n),i=e===kT;let r=iE;if(t){const s=n[0];n.length===0?r=rE:i&&s instanceof fy?r=AL:i&&Array.isArray(s)?r=xp(s,PW):n.length>=2&&n.length<=4&&!n.some((a,l)=>!QMe[l].includes(typeof a))&&(r=EY)}return r}function Cw(n){let{createCellCoords:e,createCellRange:t,keepDirection:i=!1,propToCol:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ZMe.includes(n))throw new Error("Unsupported selection ranges schema type was provided.");return function(s){const o=n===AL;let a=o?s.from.row:s[0],l=o?s.from.col:s[1],c=o?s.to.row:s[2],u=o?s.to.col:s[3];if(typeof r=="function"&&(typeof l=="string"&&(l=r(l)),typeof u=="string"&&(u=r(u))),dn(c)&&(c=a),dn(u)&&(u=l),!i){const f=a,g=l,p=c,m=u;a=Math.min(f,p),l=Math.min(g,m),c=Math.max(f,p),u=Math.max(g,m)}const h=e(a,l),d=e(c,u);return t(h,h,d)}}function JMe(n){const e=xp(n.getSelected());if(e===iE||e===rE)return[];const t=Cw(e,{createCellCoords:n._createCellCoords.bind(n),createCellRange:n._createCellRange.bind(n)}),i=new Set;j(n.getSelected(),o=>{const{from:a,to:l}=t(o),c=Math.max(a.col,0),u=l.col-c+1;j(Array.from(new Array(u),(h,d)=>c+d),h=>{i.has(h)||i.add(h)})});const r=Array.from(i).sort((o,a)=>o-a);return ci(r,(o,a,l,c)=>(l!==0&&a===c[l-1]+1?o[o.length-1][1]+=1:o.push([a,1]),o),[])}function eAe(n){const e=xp(n.getSelected());if(e===iE||e===rE)return[];const t=Cw(e,{createCellCoords:n._createCellCoords.bind(n),createCellRange:n._createCellRange.bind(n)}),i=new Set;j(n.getSelected(),o=>{const{from:a,to:l}=t(o),c=Math.max(a.row,0),u=l.row-c+1;j(Array.from(new Array(u),(h,d)=>c+d),h=>{i.has(h)||i.add(h)})});const r=Array.from(i).sort((o,a)=>o-a);return ci(r,(o,a,l,c)=>(l!==0&&a===c[l-1]+1?o[o.length-1][1]+=1:o.push([a,1]),o),[])}function Xf(n,e,t){tAe(n,e),e.set(n,t)}function tAe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xh(n,e,t){return(e=nAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nAe(n){var e=iAe(n,"string");return typeof e=="symbol"?e:e+""}function iAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Cn(n,e){return n.get(xY(n,e))}function ma(n,e,t){return n.set(xY(n,e),t),t}function xY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Qi=new WeakMap,Th=new WeakMap,U0=new WeakMap,zm=new WeakMap,G0=new WeakMap,Um=new WeakMap;class TY{constructor(e,t){var i=this;xh(this,"settings",void 0),xh(this,"tableProps",void 0),xh(this,"inProgress",!1),xh(this,"selectedRange",new qMe((r,s,o)=>this.tableProps.createCellRange(r,s,o))),xh(this,"highlight",void 0),Xf(this,Qi,void 0),Xf(this,Th,void 0),xh(this,"selectedByRowHeader",new Set),xh(this,"selectedByColumnHeader",new Set),Xf(this,U0,!1),Xf(this,zm,!1),Xf(this,G0,"unknown"),Xf(this,Um,-1),this.settings=e,this.tableProps=t,this.highlight=new GMe({headerClassName:e.currentHeaderClassName,activeHeaderClassName:e.activeHeaderClassName,rowClassName:e.currentRowClassName,columnClassName:e.currentColClassName,cellAttributes:[bD()],rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,disabledCellSelection:(r,s)=>this.tableProps.isDisabledCellSelection(r,s),cellCornerVisible:function(){return i.isCellCornerVisible(...arguments)},areaCornerVisible:function(){return i.isAreaCornerVisible(...arguments)},visualToRenderableCoords:r=>this.tableProps.visualToRenderableCoords(r),renderableToVisualCoords:r=>this.tableProps.renderableToVisualCoords(r),createCellCoords:(r,s)=>this.tableProps.createCellCoords(r,s),createCellRange:(r,s,o)=>this.tableProps.createCellRange(r,s,o)}),ma(Qi,this,new bI(this.selectedRange,{rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,countRenderableRows:()=>this.tableProps.countRenderableRows(),countRenderableColumns:()=>this.tableProps.countRenderableColumns(),visualToRenderableCoords:r=>this.tableProps.visualToRenderableCoords(r),renderableToVisualCoords:r=>this.tableProps.renderableToVisualCoords(r),findFirstNonHiddenRenderableRow:function(){return i.tableProps.findFirstNonHiddenRenderableRow(...arguments)},findFirstNonHiddenRenderableColumn:function(){return i.tableProps.findFirstNonHiddenRenderableColumn(...arguments)},createCellCoords:(r,s)=>this.tableProps.createCellCoords(r,s),fixedRowsBottom:()=>e.fixedRowsBottom,minSpareRows:()=>e.minSpareRows,minSpareCols:()=>e.minSpareCols,autoWrapRow:()=>e.autoWrapRow,autoWrapCol:()=>e.autoWrapCol})),ma(Th,this,new bI(this.selectedRange,{rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,countRenderableRows:()=>{const r=this.selectedRange.current();return this.tableProps.countRenderableRowsInRange(0,r.getOuterBottomEndCorner().row)},countRenderableColumns:()=>{const r=this.selectedRange.current();return this.tableProps.countRenderableColumnsInRange(0,r.getOuterBottomEndCorner().col)},visualToRenderableCoords:r=>this.tableProps.visualToRenderableCoords(r),renderableToVisualCoords:r=>this.tableProps.renderableToVisualCoords(r),findFirstNonHiddenRenderableRow:function(){return i.tableProps.findFirstNonHiddenRenderableRow(...arguments)},findFirstNonHiddenRenderableColumn:function(){return i.tableProps.findFirstNonHiddenRenderableColumn(...arguments)},createCellCoords:(r,s)=>this.tableProps.createCellCoords(r,s),fixedRowsBottom:()=>0,minSpareRows:()=>0,minSpareCols:()=>0,autoWrapRow:()=>!0,autoWrapCol:()=>!0})),Cn(Qi,this).addLocalHook("beforeTransformStart",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformStart",...s)}),Cn(Qi,this).addLocalHook("afterTransformStart",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("afterModifyTransformStart",...s)}),Cn(Qi,this).addLocalHook("beforeTransformEnd",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformEnd",...s)}),Cn(Qi,this).addLocalHook("afterTransformEnd",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("afterModifyTransformEnd",...s)}),Cn(Qi,this).addLocalHook("insertRowRequire",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("insertRowRequire",...s)}),Cn(Qi,this).addLocalHook("insertColRequire",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("insertColRequire",...s)}),Cn(Qi,this).addLocalHook("beforeRowWrap",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeRowWrap",...s)}),Cn(Qi,this).addLocalHook("beforeColumnWrap",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeColumnWrap",...s)}),Cn(Th,this).addLocalHook("beforeTransformStart",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformFocus",...s)}),Cn(Th,this).addLocalHook("afterTransformStart",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("afterModifyTransformFocus",...s)})}getSelectedRange(){return this.selectedRange}markSource(e){ma(G0,this,e)}markEndSource(){ma(G0,this,"unknown")}getSelectionSource(){return Cn(G0,this)}setExpectedLayers(e){ma(Um,this,e)}begin(){this.inProgress=!0}finish(){this.runLocalHooks("afterSelectionFinished",Array.from(this.selectedRange)),this.inProgress=!1,ma(Um,this,-1)}isInProgress(){return this.inProgress}setRangeStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e;const s=this.settings.selectionMode==="multiple",o=dn(t)?this.tableProps.getShortcutManager().isCtrlPressed():t,a=e.clone();ma(U0,this,!1),this.runLocalHooks(`beforeSetRangeStart${i?"Only":""}`,a),(!s||s&&!o&&dn(t))&&this.selectedRange.clear(),this.selectedRange.add(a).current().setHighlight(r.clone()),this.getLayerLevel()===0&&(this.selectedByRowHeader.clear(),this.selectedByColumnHeader.clear()),i||this.setRangeEnd(e)}setRangeStartOnly(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e;this.setRangeStart(e,t,!0,i)}setRangeEnd(e){if(this.selectedRange.isEmpty())return;const t=e.clone(),i=this.tableProps.countRows(),r=this.tableProps.countCols(),s=this.selectedRange.current().clone().setTo(e).isSingleHeader();if((i>0||r>0)&&(i===0&&t.col<0&&!s||r===0&&t.row<0&&!s))return;this.runLocalHooks("beforeSetRangeEnd",t),this.begin();const o=this.selectedRange.current();if(this.settings.navigableHeaders||o.highlight.normalize(),this.settings.selectionMode==="single")o.setFrom(o.highlight),o.setTo(o.highlight);else{const l=o.getHorizontalDirection(),c=o.getVerticalDirection(),u=this.isMultiple();o.setTo(t),u&&(l!==o.getHorizontalDirection()||o.getWidth()===1&&!o.includes(o.highlight))&&o.from.assign({col:o.highlight.col}),u&&(c!==o.getVerticalDirection()||o.getHeight()===1&&!o.includes(o.highlight))&&o.from.assign({row:o.highlight.row})}i>0&&r>0&&(!this.settings.navigableHeaders||this.settings.navigableHeaders&&!o.isSingleHeader())&&o.to.normalize(),this.runLocalHooks("beforeHighlightSet"),this.setRangeFocus(this.selectedRange.current().highlight),this.applyAndCommit();const a=Cn(Um,this)===-1||this.selectedRange.size()===Cn(Um,this);this.runLocalHooks("afterSetRangeEnd",e,a)}applyAndCommit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectedRange.current(),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLayerLevel();const i=this.tableProps.countRows(),r=this.tableProps.countCols();t<this.highlight.layerLevel&&(j(this.highlight.getAreas(),g=>void g.clear()),j(this.highlight.getLayeredAreas(),g=>void g.clear()),j(this.highlight.getRowHeaders(),g=>void g.clear()),j(this.highlight.getColumnHeaders(),g=>void g.clear()),j(this.highlight.getActiveRowHeaders(),g=>void g.clear()),j(this.highlight.getActiveColumnHeaders(),g=>void g.clear()),j(this.highlight.getActiveCornerHeaders(),g=>void g.clear()),j(this.highlight.getRowHighlights(),g=>void g.clear()),j(this.highlight.getColumnHighlights(),g=>void g.clear())),this.highlight.useLayerLevel(t);const s=this.highlight.createArea(),o=this.highlight.createLayeredArea(),a=this.highlight.createRowHeader(),l=this.highlight.createColumnHeader(),c=this.highlight.createActiveRowHeader(),u=this.highlight.createActiveColumnHeader(),h=this.highlight.createActiveCornerHeader(),d=this.highlight.createRowHighlight(),f=this.highlight.createColumnHighlight();if(s.clear(),o.clear(),a.clear(),l.clear(),c.clear(),u.clear(),h.clear(),d.clear(),f.clear(),this.highlight.isEnabledFor(XD,e.highlight)&&(this.isMultiple()||t>=1)&&(s.add(e.from).add(e.to).commit(),o.add(e.from).add(e.to).commit(),t===1)){const g=this.selectedRange.previous();this.highlight.useLayerLevel(t-1),this.highlight.createArea().add(g.from).commit().syncWith(g),this.highlight.createLayeredArea().add(g.from).commit().syncWith(g),this.highlight.useLayerLevel(t)}if(this.highlight.isEnabledFor(qD,e.highlight)){if(!e.isSingleHeader()){const m=this.tableProps.createCellCoords(Math.max(e.from.row,0),-1),b=this.tableProps.createCellCoords(e.to.row,-1),y=this.tableProps.createCellCoords(-1,Math.max(e.from.col,0)),w=this.tableProps.createCellCoords(-1,e.to.col);this.settings.selectionMode==="single"?(a.add(m).commit(),l.add(y).commit(),d.add(m).commit(),f.add(y).commit()):(a.add(m).add(b).commit(),l.add(y).add(w).commit(),d.add(m).add(b).commit(),f.add(y).add(w).commit())}const g=!Cn(zm,this)&&this.isEntireRowSelected()&&(r>0&&r===e.getWidth()||r===0&&this.isSelectedByRowHeader()),p=!Cn(zm,this)&&this.isEntireColumnSelected()&&(i>0&&i===e.getHeight()||i===0&&this.isSelectedByColumnHeader());g&&c.add(this.tableProps.createCellCoords(Math.max(e.from.row,0),Math.min(-this.tableProps.countRowHeaders(),-1))).add(this.tableProps.createCellCoords(Math.max(e.to.row,0),-1)).commit(),p&&u.add(this.tableProps.createCellCoords(Math.min(-this.tableProps.countColHeaders(),-1),Math.max(e.from.col,0))).add(this.tableProps.createCellCoords(-1,Math.max(e.to.col,0))).commit(),g&&p&&h.add(this.tableProps.createCellCoords(-this.tableProps.countColHeaders(),-this.tableProps.countRowHeaders())).add(this.tableProps.createCellCoords(-1,-1)).commit()}}setRangeFocus(e){if(this.selectedRange.isEmpty())return;const t=this.selectedRange.current();this.inProgress||this.runLocalHooks("beforeSetFocus",e);const i=this.highlight.getFocus();i.clear(),t.setHighlight(e),this.inProgress||this.runLocalHooks("beforeHighlightSet"),this.highlight.isEnabledFor(ZD,t.highlight)&&i.add(t.highlight).commit().syncWith(t),this.inProgress||(ma(U0,this,!0),this.runLocalHooks("afterSetFocus",t.highlight))}transformStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.settings.navigableHeaders?Cn(Qi,this).setOffsetSize({x:this.tableProps.countRowHeaders(),y:this.tableProps.countColHeaders()}):Cn(Qi,this).resetOffsetSize(),this.setRangeStart(Cn(Qi,this).transformStart(e,t,i))}transformEnd(e,t){this.settings.navigableHeaders?Cn(Qi,this).setOffsetSize({x:this.tableProps.countRowHeaders(),y:this.tableProps.countColHeaders()}):Cn(Qi,this).resetOffsetSize(),this.setRangeEnd(Cn(Qi,this).transformEnd(e,t))}transformFocus(e,t){const i=this.selectedRange.current(),{row:r,col:s}=i.getOuterTopStartCorner(),o=this.tableProps.countRenderableColumnsInRange(0,s-1),a=this.tableProps.countRenderableRowsInRange(0,r-1);i.highlight.isHeader()?Cn(Th,this).setOffsetSize({x:s<0?Math.abs(s):-o,y:r<0?Math.abs(r):-a}):Cn(Th,this).setOffsetSize({x:s<0?0:-o,y:r<0?0:-a});const l=Cn(Th,this).transformStart(e,t);this.setRangeFocus(l.normalize())}shiftRows(e,t){if(!this.isSelected())return;const i=this.selectedRange.current();if(this.isSelectedByCorner())this.selectAll(!0,!0,{disableHeadersHighlight:!0});else if(this.isSelectedByColumnHeader()||i.getOuterTopStartCorner().row>=e){const{from:r,to:s,highlight:o}=i,a=this.tableProps.countRows(),l=this.isSelectedByRowHeader(),c=this.isSelectedByColumnHeader(),u=c?-1:0,h=c?0:t;this.getSelectedRange().pop();const d=this.tableProps.createCellCoords(Gt(r.row+h,u,a-1),r.col),f=this.tableProps.createCellCoords(Gt(s.row+t,u,a-1),s.col);this.markSource("shift"),o.row>=e?this.setRangeStartOnly(d,!0,this.tableProps.createCellCoords(Gt(o.row+t,0,a-1),o.col)):this.setRangeStartOnly(d,!0),l&&this.selectedByRowHeader.add(this.getLayerLevel()),c&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(f),this.markEndSource()}}shiftColumns(e,t){if(!this.isSelected())return;const i=this.selectedRange.current();if(this.isSelectedByCorner())this.selectAll(!0,!0,{disableHeadersHighlight:!0});else if(this.isSelectedByRowHeader()||i.getOuterTopStartCorner().col>=e){const{from:r,to:s,highlight:o}=i,a=this.tableProps.countCols(),l=this.isSelectedByRowHeader(),c=this.isSelectedByColumnHeader(),u=l?-1:0,h=l?0:t;this.getSelectedRange().pop();const d=this.tableProps.createCellCoords(r.row,Gt(r.col+h,u,a-1)),f=this.tableProps.createCellCoords(s.row,Gt(s.col+t,u,a-1));this.markSource("shift"),o.col>=e?this.setRangeStartOnly(d,!0,this.tableProps.createCellCoords(o.row,Gt(o.col+t,0,a-1))):this.setRangeStartOnly(d,!0),l&&this.selectedByRowHeader.add(this.getLayerLevel()),c&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(f),this.markEndSource()}}getLayerLevel(){return this.selectedRange.size()-1}isSelected(){return!this.selectedRange.isEmpty()}isMultiple(){if(!this.isSelected())return!1;const e=to(!this.selectedRange.current().isSingle());return this.runLocalHooks("afterIsMultipleSelection",e),e.value}isFocusSelectionChanged(){return this.isSelected()&&Cn(U0,this)}isSelectedByRowHeader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner(e)&&(e===-1?this.selectedByRowHeader.size>0:this.selectedByRowHeader.has(e))}isEntireRowSelected(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();const t=r=>{const{col:s}=r.getOuterTopStartCorner(),o=this.tableProps.countRowHeaders(),a=this.tableProps.countCols();return(o>0&&s<0||o===0)&&r.getWidth()===a};if(e===-1)return Array.from(this.selectedRange).some(r=>t(r));const i=this.selectedRange.peekByIndex(e);return i?t(i):!1}isSelectedByColumnHeader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner()&&(e===-1?this.selectedByColumnHeader.size>0:this.selectedByColumnHeader.has(e))}isEntireColumnSelected(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();const t=r=>{const{row:s}=r.getOuterTopStartCorner(),o=this.tableProps.countColHeaders(),a=this.tableProps.countRows();return(o>0&&s<0||o===0)&&r.getHeight()===a};if(e===-1)return Array.from(this.selectedRange).some(r=>t(r));const i=this.selectedRange.peekByIndex(e);return i?t(i):!1}isSelectedByAnyHeader(){return this.isSelectedByRowHeader(-1)||this.isSelectedByColumnHeader(-1)||this.isSelectedByCorner()}isSelectedByCorner(){return this.selectedByColumnHeader.has(this.getLayerLevel())&&this.selectedByRowHeader.has(this.getLayerLevel())}inInSelection(e){return this.selectedRange.includes(e)}isCellCornerVisible(){return this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&!this.isMultiple()}isCellVisible(e){const t=this.tableProps.visualToRenderableCoords(e);return t.row!==null&&t.col!==null}isAreaCornerVisible(e){return Number.isInteger(e)&&e!==this.getLayerLevel()?!1:this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&this.isMultiple()}clear(){this.selectedRange.clear(),this.highlight.clear()}deselect(){this.isSelected()&&(this.inProgress=!1,this.clear(),this.runLocalHooks("afterDeselect"))}selectAll(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{focusPosition:!1,disableHeadersHighlight:!1};const s=this.tableProps.countRows(),o=this.tableProps.countCols(),a=this.tableProps.countRowHeaders(),l=this.tableProps.countColHeaders(),c=i?-l:0,u=t?-a:0;if(c===0&&u===0&&(s===0||o===0))return;let h=(e=this.getSelectedRange().current())===null||e===void 0?void 0:e.highlight;const{focusPosition:d,disableHeadersHighlight:f}=r;ma(zm,this,f),d&&Number.isInteger(d==null?void 0:d.row)&&Number.isInteger(d==null?void 0:d.col)&&(h=this.tableProps.createCellCoords(Gt(d.row,c,s-1),Gt(d.col,u,o-1)));const g=this.tableProps.createCellCoords(c,u),p=this.tableProps.createCellCoords(s-1,o-1);this.clear(),this.setRangeStartOnly(g,void 0,h),u<0&&this.selectedByRowHeader.add(this.getLayerLevel()),c<0&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(p),this.finish(),ma(zm,this,!1)}selectCells(e){var t=this;const i=xp(e);if(i===rE)return!1;if(i===iE)throw new Error(Kt`Unsupported format of the selection ranges was passed. To select cells pass\x20
        the coordinates as an array of arrays ([[rowStart, columnStart/columnPropStart, rowEnd,\x20
        columnEnd/columnPropEnd]]) or as an array of CellRange objects.`);const r=Cw(i,{createCellCoords:function(){return t.tableProps.createCellCoords(...arguments)},createCellRange:function(){return t.tableProps.createCellRange(...arguments)},propToCol:l=>this.tableProps.propToCol(l),keepDirection:!0}),s=this.settings.navigableHeaders,o={countRows:this.tableProps.countRows(),countCols:this.tableProps.countCols(),countRowHeaders:s?this.tableProps.countRowHeaders():0,countColHeaders:s?this.tableProps.countColHeaders():0},a=!e.some(l=>{const c=r(l),u=c.isValid(o);return!(u&&!c.containsHeaders()||u&&c.containsHeaders()&&c.isSingleHeader())});return a&&(this.clear(),this.setExpectedLayers(e.length),j(e,l=>{const{from:c,to:u}=r(l);this.setRangeStartOnly(c.clone(),!1),this.setRangeEnd(u.clone())}),this.finish()),a}selectColumns(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=typeof e=="string"?this.tableProps.propToCol(e):e,s=typeof t=="string"?this.tableProps.propToCol(t):t,o=this.tableProps.countRows(),a=this.tableProps.countCols(),l=this.tableProps.countColHeaders(),c=l===0?0:-l,u=this.tableProps.createCellCoords(c,r),h=this.tableProps.createCellCoords(o-1,s),d=this.tableProps.createCellRange(u,u,h).isValid({countRows:o,countCols:a,countRowHeaders:0,countColHeaders:l});if(d){let f=0,g=0;Number.isInteger(i==null?void 0:i.row)&&Number.isInteger(i==null?void 0:i.col)?(f=Gt(i.row,c,o-1),g=Gt(i.col,Math.min(r,s),Math.max(r,s))):(f=Gt(i,c,o-1),g=r);const p=this.tableProps.createCellCoords(f,g),m=l===0?0:Gt(p.row,c,-1),b=o-1,y=this.tableProps.createCellCoords(m,r),w=this.tableProps.createCellCoords(b,s);this.runLocalHooks("beforeSelectColumns",y,w,p),y.row=m,w.row=b,this.setRangeStartOnly(y,void 0,p),this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(w),this.runLocalHooks("afterSelectColumns",y,w,p),this.finish()}return d}selectRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=this.tableProps.countRows(),s=this.tableProps.countCols(),o=this.tableProps.countRowHeaders(),a=o===0?0:-o,l=this.tableProps.createCellCoords(e,a),c=this.tableProps.createCellCoords(t,s-1),u=this.tableProps.createCellRange(l,l,c).isValid({countRows:r,countCols:s,countRowHeaders:o,countColHeaders:0});if(u){let h=0,d=0;Number.isInteger(i==null?void 0:i.row)&&Number.isInteger(i==null?void 0:i.col)?(h=Gt(i.row,Math.min(e,t),Math.max(e,t)),d=Gt(i.col,a,s-1)):(h=e,d=Gt(i,a,s-1));const f=this.tableProps.createCellCoords(h,d),g=o===0?0:Gt(f.col,a,-1),p=s-1,m=this.tableProps.createCellCoords(e,g),b=this.tableProps.createCellCoords(t,p);this.runLocalHooks("beforeSelectRows",m,b,f),m.col=g,b.col=p,this.setRangeStartOnly(m,void 0,f),this.selectedByRowHeader.add(this.getLayerLevel()),this.setRangeEnd(b),this.runLocalHooks("afterSelectRows",m,b,f),this.finish()}return u}refresh(){if(!this.isSelected())return;const e=this.tableProps.countRows(),t=this.tableProps.countCols();if(e===0||t===0){this.deselect();return}const i=this.selectedRange.peekByIndex(this.selectedRange.size()-1),{from:r,to:s,highlight:o}=i;this.clear(),o.assign({row:Gt(o.row,-1/0,e-1),col:Gt(o.col,-1/0,t-1)}),r.assign({row:Gt(r.row,-1/0,e-1),col:Gt(r.col,-1/0,t-1)}),s.assign({row:Gt(s.row,0,e-1),col:Gt(s.col,0,t-1)}),this.selectedRange.ranges.push(i),this.highlight.getFocus().add(o).commit().syncWith(i),this.applyAndCommit(i)}commit(){if(this.highlight.getCustomSelections().forEach(r=>{r.commit()}),!this.isSelected())return;const t=this.highlight.getFocus(),i=this.getLayerLevel();t.commit().syncWith(this.selectedRange.current());for(let r=0;r<this.selectedRange.size();r+=1){this.highlight.useLayerLevel(r);const s=this.highlight.createArea(),o=this.highlight.createLayeredArea(),a=this.highlight.createRowHeader(),l=this.highlight.createColumnHeader(),c=this.highlight.createActiveRowHeader(),u=this.highlight.createActiveColumnHeader(),h=this.highlight.createActiveCornerHeader(),d=this.highlight.createRowHighlight(),f=this.highlight.createColumnHighlight();s.commit(),o.commit(),a.commit(),l.commit(),c.commit(),u.commit(),h.commit(),d.commit(),f.commit()}this.highlight.useLayerLevel(i)}}Xt(TY,Ki);const IW=/^(\r\n|\n\r|\r|\n)/,rAe=/^[^\t\r\n]+/,OW=/^\t/;function sAe(n){const e=[[""]];if(n.length===0)return e;let t=0,i=0,r;for(;n.length>0&&r!==n.length;)if(r=n.length,n.match(OW))n=n.replace(OW,""),t+=1,e[i][t]="";else if(n.match(IW))n=n.replace(IW,""),t=0,i+=1,e[i]=[""];else{let s="";if(n.startsWith('"')){let o=0,a=!0;for(;a;){const l=n.slice(0,1);l==='"'&&(o+=1),s+=l,n=n.slice(1),(n.length===0||n.match(/^[\t\r\n]/)&&o%2===0)&&(a=!1)}s=s.replace(/^"/,"").replace(/"$/,"").replace(/["]*/g,l=>new Array(Math.floor(l.length/2)).fill('"').join(""))}else{const o=n.match(rAe);s=o?o[0]:"",n=n.slice(s.length)}e[i][t]=s}return e}function xb(n){let e,t,i,r,s="",o;for(e=0,t=n.length;e<t;e+=1){for(r=n[e].length,i=0;i<r;i+=1)i>0&&(s+="	"),o=n[e][i],typeof o=="string"?o.indexOf(`
`)>-1?s+=`"${o.replace(/"/g,'""')}"`:s+=o:o==null?s+="":s+=o;e!==t-1&&(s+=`
`)}return s}function Mh(n,e,t){return(e=oAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oAe(n){var e=aAe(n,"string");return typeof e=="symbol"?e:e+""}function aAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Yg{static get DESTINATION_RENDERER(){return 1}static get DESTINATION_CLIPBOARD_GENERATOR(){return 2}constructor(e,t,i){Mh(this,"hot",void 0),Mh(this,"metaManager",void 0),Mh(this,"tableMeta",void 0),Mh(this,"dataSource",void 0),Mh(this,"duckSchema",void 0),Mh(this,"colToPropCache",void 0),Mh(this,"propToColCache",void 0),this.hot=e,this.metaManager=i,this.tableMeta=i.getTableMeta(),this.dataSource=t,this.duckSchema=this.createDuckSchema(),this.createMap()}createMap(){const e=this.getSchema();if(typeof e>"u")throw new Error("trying to create `columns` definition but you didn't provide `schema` nor `data`");const t=this.tableMeta.columns;let i;if(this.colToPropCache=[],this.propToColCache=new Map,t){let r=0,s=0,o=!1;if(typeof t=="function"){const a=U1(e);r=a>0?a:this.countFirstRowKeys(),o=!0}else{const a=this.tableMeta.maxCols;r=Math.min(a,t.length)}for(i=0;i<r;i++){const a=o?t(i):t[i];if(lt(a)){if(typeof a.data<"u"){const l=o?s:i;this.colToPropCache[l]=a.data,this.propToColCache.set(a.data,l)}s+=1}}}else this.recursiveDuckColumns(e)}countFirstRowKeys(){return aN(this.dataSource)}recursiveDuckColumns(e,t,i){let r=t,s=i,o;return typeof r>"u"&&(r=0,s=""),typeof e=="object"&&!Array.isArray(e)&&ct(e,(a,l)=>{a===null?(o=s+l,this.colToPropCache.push(o),this.propToColCache.set(o,r),r+=1):r=this.recursiveDuckColumns(a,r,`${l}.`)}),r}colToProp(e){if(Number.isInteger(e)===!1)return e;const t=this.hot.toPhysicalColumn(e);return t===null?e:this.colToPropCache&&ke(this.colToPropCache[t])?this.colToPropCache[t]:t}propToCol(e){const t=this.propToColCache.get(e);if(ke(t))return this.hot.toVisualColumn(t);const i=this.hot.toVisualColumn(e);return i===null?e:i}getSchema(){const e=this.tableMeta.dataSchema;return e?typeof e=="function"?e():e:this.duckSchema}createDuckSchema(){return this.dataSource&&this.dataSource[0]?Ep(this.dataSource[0]):{}}refreshDuckSchema(){this.duckSchema=this.createDuckSchema()}createRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,{source:i,mode:r="above"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.hot.countSourceRows();let o=s,a=0,l=e;if((typeof l!="number"||l>=s)&&(l=s),l<this.hot.countRows()&&(o=this.hot.toPhysicalRow(l)),this.hot.runHooks("beforeCreateRow",l,t,i)===!1||o===null)return{delta:0};const u=this.tableMeta.maxRows,h=this.getSchema().length,d=[];for(;a<t&&s+a<u;){let g=null;this.hot.dataType==="array"?this.tableMeta.dataSchema?g=gr(this.getSchema()):(g=[],He(h-1,()=>g.push(null))):this.hot.dataType==="function"?g=this.tableMeta.dataSchema(l+a):(g={},hy(g,this.getSchema())),d.push(g),a+=1}this.hot.rowIndexMapper.insertIndexes(l,a),r==="below"&&(o=Math.min(o+1,s)),this.spliceData(o,0,d);const f=this.hot.toVisualRow(o);return this.hot.countSourceRows()===d.length&&this.hot.columnIndexMapper.initToLength(this.hot.getInitialColumnCount()),a>0&&(e==null?this.metaManager.createRow(null,a):i!=="auto"&&this.metaManager.createRow(o,t)),this.hot.runHooks("afterCreateRow",f,a,i),this.hot.forceFullRender=!0,{delta:a,startPhysicalIndex:o}}createCol(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,{source:i,mode:r="start"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!this.hot.isColumnModificationAllowed())throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");const s=this.dataSource,o=this.tableMeta.maxCols,a=this.hot.countSourceCols();let l=e;if((typeof l!="number"||l>=a)&&(l=a),this.hot.runHooks("beforeCreateCol",l,t,i)===!1)return{delta:0};let u=a;l<this.hot.countCols()&&(u=this.hot.toPhysicalColumn(l));const h=this.hot.countSourceRows();let d=this.hot.countCols(),f=0,g=u;r==="end"&&(g=Math.min(g+1,a));const p=g;for(;f<t&&d<o;){if(typeof l!="number"||l>=d)if(h>0)for(let b=0;b<h;b+=1)typeof s[b]>"u"&&(s[b]=[]),s[b].push(null);else s.push([null]);else for(let b=0;b<h;b++)s[b].splice(g,0,null);f+=1,g+=1,d+=1}this.hot.columnIndexMapper.insertIndexes(l,f),f>0&&(e==null?this.metaManager.createColumn(null,f):i!=="auto"&&this.metaManager.createColumn(p,t));const m=this.hot.toVisualColumn(p);return this.hot.runHooks("afterCreateCol",m,f,i),this.hot.forceFullRender=!0,this.refreshDuckSchema(),{delta:f,startPhysicalIndex:p}}removeRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,r=Number.isInteger(e)?e:-t;const s=this.visualRowsToPhysical(r,t),o=this.hot.countSourceRows();if(r=(o+r)%o,this.hot.runHooks("beforeRemoveRow",r,s.length,s,i)===!1)return!1;const l=s.length;if(this.filterData(r,l,s),r<this.hot.countRows()){this.hot.rowIndexMapper.removeIndexes(s);const u=ke(this.tableMeta.columns)||ke(this.tableMeta.dataSchema);this.hot.rowIndexMapper.getNotTrimmedIndexesLength()===0&&u===!1&&this.hot.columnIndexMapper.setIndexesSequence([])}return s.slice(0).sort((u,h)=>h-u).forEach(u=>{this.metaManager.removeRow(u,1)}),this.hot.runHooks("afterRemoveRow",r,l,s,i),this.hot.forceFullRender=!0,!0}removeCol(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0;if(this.hot.dataType==="object"||this.tableMeta.columns)throw new Error("cannot remove column with object data source or columns option specified");let r=typeof e!="number"?-t:e;r=(this.hot.countCols()+r)%this.hot.countCols();const s=this.visualColumnsToPhysical(r,t),o=s.slice(0).sort((h,d)=>d-h);if(this.hot.runHooks("beforeRemoveCol",r,t,s,i)===!1)return!1;let l=!0;const c=o.length,u=this.dataSource;for(let h=0;h<c;h++)l&&s[0]!==s[h]-h&&(l=!1);if(l)for(let h=0,d=this.hot.countSourceRows();h<d;h++)u[h].splice(s[0],t),h===0&&this.metaManager.removeColumn(s[0],t);else for(let h=0,d=this.hot.countSourceRows();h<d;h++)for(let f=0;f<c;f++)u[h].splice(o[f],1),h===0&&this.metaManager.removeColumn(o[f],1);return r<this.hot.countCols()&&(this.hot.columnIndexMapper.removeIndexes(s),this.hot.columnIndexMapper.getNotTrimmedIndexesLength()===0&&this.hot.rowIndexMapper.setIndexesSequence([])),this.hot.runHooks("afterRemoveCol",r,t,s,i),this.hot.forceFullRender=!0,this.refreshDuckSchema(),!0}spliceCol(e,t,i){const r=this.hot.getDataAtCol(e),s=r.slice(t,t+i),o=r.slice(t+i);for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];qP(l,o);let u=0;for(;u<i;)l.push(null),u+=1;return $G(l),this.hot.populateFromArray(t,e,l,null,null,"spliceCol"),s}spliceRow(e,t,i){const r=this.hot.getSourceDataAtRow(e),s=r.slice(t,t+i),o=r.slice(t+i);for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];qP(l,o);let u=0;for(;u<i;)l.push(null),u+=1;return this.hot.populateFromArray(e,t,[l],null,null,"spliceRow"),s}spliceData(e,t,i){if(this.hot.runHooks("beforeDataSplice",e,t,i)!==!1){const s=[...this.dataSource.slice(0,e),...i,...this.dataSource.slice(e)];this.dataSource.length=0,s.forEach(o=>this.dataSource.push(o))}}filterData(e,t,i){let r=this.hot.runHooks("filterData",e,t,i);Array.isArray(r)===!1&&(r=this.dataSource.filter((s,o)=>i.indexOf(o)===-1)),this.dataSource.length=0,Array.prototype.push.apply(this.dataSource,r)}get(e,t){const i=this.hot.toPhysicalRow(e);let r=this.dataSource[i];const s=this.hot.runHooks("modifyRowData",i);r=isNaN(s)?s:r;const{dataDotNotation:o}=this.hot.getSettings();let a=null;if(r&&r.hasOwnProperty&&kn(r,t))a=r[t];else if(o&&typeof t=="string"&&t.indexOf(".")>-1){let l=r;if(!l)return null;const c=t.split(".");for(let u=0,h=c.length;u<h;u++)if(l=l[c[u]],typeof l>"u")return null;a=l}else typeof t=="function"&&(a=t(this.dataSource.slice(i,i+1)[0]));if(this.hot.hasHook("modifyData")){const l=to(a);this.hot.runHooks("modifyData",i,this.propToCol(t),l,"get"),l.isTouched()&&(a=l.value)}return a}getCopyable(e,t){return this.hot.getCellMeta(e,this.propToCol(t)).copyable?this.get(e,t):""}set(e,t,i){const r=this.hot.toPhysicalRow(e);let s=i,o=this.dataSource[r];const a=this.hot.runHooks("modifyRowData",r);if(o=isNaN(a)?a:o,this.hot.hasHook("modifyData")){const c=to(s);this.hot.runHooks("modifyData",r,this.propToCol(t),c,"set"),c.isTouched()&&(s=c.value)}const{dataDotNotation:l}=this.hot.getSettings();if(o&&o.hasOwnProperty&&kn(o,t))o[t]=s;else if(l&&typeof t=="string"&&t.indexOf(".")>-1){let c=o,u=0,h;const d=t.split(".");for(u=0,h=d.length-1;u<h;u++)typeof c[d[u]]>"u"&&(c[d[u]]={}),c=c[d[u]];c[d[u]]=s}else typeof t=="function"?t(this.dataSource.slice(r,r+1)[0],s):o[t]=s}visualRowsToPhysical(e,t){const i=this.hot.countSourceRows(),r=[];let s=(i+e)%i,o=t,a;for(;s<i&&o;)a=this.hot.toPhysicalRow(s),r.push(a),o-=1,s+=1;return r}visualColumnsToPhysical(e,t){const i=this.hot.countCols(),r=[];let s=(i+e)%i,o=t;for(;s<i&&o;){const a=this.hot.toPhysicalColumn(s);r.push(a),o-=1,s+=1}return r}clear(){for(let e=0;e<this.hot.countSourceRows();e++)for(let t=0;t<this.hot.countCols();t++)this.set(e,this.colToProp(t),"")}getLength(){const e=this.tableMeta.maxRows;let t;e<0||e===0?t=0:t=e||1/0;const i=this.hot.rowIndexMapper.getNotTrimmedIndexesLength();return Math.min(i,t)}getAll(){const e={row:0,col:0},t={row:Math.max(this.hot.countRows()-1,0),col:Math.max(this.hot.countCols()-1,0)};return e.row-t.row===0&&!this.hot.countSourceRows()?[]:this.getRange(e,t,Yg.DESTINATION_RENDERER)}countCachedColumns(){return this.colToPropCache.length}getRange(e,t,i){const r=[];let s,o,a;const l=this.tableMeta.maxRows,c=this.tableMeta.maxCols;if(l===0||c===0)return[];const u=i===Yg.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get,h=Math.min(Math.max(l-1,0),Math.max(e.row,t.row)),d=Math.min(Math.max(c-1,0),Math.max(e.col,t.col));for(s=Math.min(e.row,t.row);s<=h;s++){a=[];const f=s>=0?this.hot.toPhysicalRow(s):s;for(o=Math.min(e.col,t.col);o<=d&&f!==null;o++)a.push(u.call(this,s,this.colToProp(o)));f!==null&&r.push(a)}return r}getText(e,t){return xb(this.getRange(e,t,Yg.DESTINATION_RENDERER))}getCopyableText(e,t){return xb(this.getRange(e,t,Yg.DESTINATION_CLIPBOARD_GENERATOR))}destroy(){this.hot=null,this.metaManager=null,this.dataSource=null,this.duckSchema=null,this.colToPropCache.length=0,this.propToColCache.clear(),this.propToColCache=void 0}}const{register:lAe,getItem:cAe,hasItem:MY,getNames:uAe,getValues:Q4e}=ua("cellTypes");function PL(n){if(!MY(n))throw Error(`You declared cell type "${n}" as a string that is not mapped to a known object.
                 Cell type must be an object or a string mapped to an object registered by
                 "Handsontable.cellTypes.registerCellType" method`);return cAe(n)}function Ws(n,e){typeof n!="string"&&(e=n,n=e.CELL_TYPE);const{editor:t,renderer:i,validator:r}=e;t&&Gr(n,t),i&&ss(n,i),r&&vd(n,r),lAe(n,e)}function hAe(n,e){var t;return n==="CELL_TYPE"?!1:((t=e._automaticallyAssignedMetaProps)===null||t===void 0?void 0:t.has(n))||!kn(e,n)}function sE(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n;const i=typeof e.type=="string"?PL(e.type):e.type;if(n._automaticallyAssignedMetaProps&&ct(e,(s,o)=>void n._automaticallyAssignedMetaProps.delete(o)),!lt(i))return;t===n&&!n._automaticallyAssignedMetaProps&&(n._automaticallyAssignedMetaProps=new Set);const r={};ct(i,(s,o)=>{if(hAe(o,t)){var a;r[o]=s,(a=n._automaticallyAssignedMetaProps)===null||a===void 0||a.add(o)}}),li(n,r)}function dAe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];function t(){}ca(t,n);for(let i=0;i<e.length;i++)t.prototype[e[i]]=void 0;return t}function xS(n){return Number.isInteger(n)&&n>=0}function TS(n,e){if(!n())throw new Error(`Assertion failed: ${e}`)}function Y0(n){return n==null}const AY=()=>({_automaticallyAssignedMetaProps:void 0,activeHeaderClassName:"ht__active_highlight",allowEmpty:!0,allowHtml:!1,allowInsertColumn:!0,allowInsertRow:!0,allowInvalid:!0,allowRemoveColumn:!0,allowRemoveRow:!0,ariaTags:!0,autoColumnSize:void 0,autoRowSize:void 0,autoWrapCol:!1,autoWrapRow:!1,bindRowsWithHeaders:void 0,cell:[],cells:void 0,checkedTemplate:void 0,className:void 0,colHeaders:null,collapsibleColumns:void 0,columnHeaderHeight:void 0,columns:void 0,columnSorting:void 0,columnSummary:void 0,colWidths:void 0,commentedCellClassName:"htCommentCell",comments:!1,contextMenu:void 0,copyable:!0,copyPaste:!0,correctFormat:!1,currentColClassName:void 0,currentHeaderClassName:"ht__highlight",currentRowClassName:void 0,customBorders:!1,data:void 0,dataDotNotation:!0,dataSchema:void 0,dateFormat:"DD/MM/YYYY",timeFormat:"h:mm:ss a",datePickerConfig:void 0,defaultDate:void 0,disableVisualSelection:!1,dragToScroll:!0,dropdownMenu:void 0,editor:void 0,enterBeginsEditing:!0,enterMoves:{col:0,row:1},fillHandle:{autoInsertRow:!1},filter:!0,filteringCaseSensitive:!1,filters:void 0,fixedColumnsLeft:0,fixedColumnsStart:0,fixedRowsBottom:0,fixedRowsTop:0,formulas:void 0,fragmentSelection:!1,headerClassName:void 0,height:void 0,hiddenColumns:void 0,hiddenRows:void 0,invalidCellClassName:"htInvalid",imeFastEdit:!1,isEmptyCol(n){let e,t,i;for(e=0,t=this.countRows();e<t;e++)if(i=this.getDataAtCell(e,n),zn(i)===!1)return!1;return!0},isEmptyRow(n){let e,t,i,r;for(e=0,t=this.countCols();e<t;e++)if(i=this.getDataAtCell(n,e),zn(i)===!1)return typeof i=="object"?(r=this.getCellMeta(n,e),z1(this.getSchema()[r.prop],i)):!1;return!0},label:void 0,language:"en-US",layoutDirection:"inherit",licenseKey:void 0,locale:"en-US",manualColumnFreeze:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,maxCols:1/0,maxRows:1/0,mergeCells:!1,minCols:0,minRows:0,minSpareCols:0,minSpareRows:0,multiColumnSorting:void 0,navigableHeaders:!1,tabNavigation:!0,nestedHeaders:void 0,nestedRows:void 0,noWordWrapClassName:"htNoWrap",numericFormat:void 0,observeDOMVisibility:!0,outsideClickDeselects:!0,persistentState:void 0,placeholder:void 0,placeholderCellClassName:"htPlaceholder",preventOverflow:!1,preventWheel:!1,readOnly:!1,readOnlyCellClassName:"htDimmed",renderAllRows:!1,renderAllColumns:!1,renderer:void 0,rowHeaders:void 0,rowHeaderWidth:void 0,rowHeights:void 0,search:!1,selectionMode:"multiple",selectOptions:void 0,skipColumnOnPaste:!1,skipRowOnPaste:!1,sortByRelevance:!0,source:void 0,startCols:5,startRows:5,stretchH:"none",strict:void 0,tableClassName:void 0,tabMoves:{row:0,col:1},title:void 0,trimDropdown:!0,trimRows:void 0,trimWhitespace:!0,type:"text",uncheckedTemplate:void 0,undo:void 0,validator:void 0,viewportColumnRenderingOffset:"auto",viewportRowRenderingOffset:"auto",visibleRows:10,width:void 0,wordWrap:!0});function kW(n,e,t){return(e=fAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fAe(n){var e=gAe(n,"string");return typeof e=="symbol"?e:e+""}function gAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pAe(){return class{}}class mAe{constructor(e){kW(this,"metaCtor",pAe()),kW(this,"meta",void 0),this.meta=this.metaCtor.prototype,li(this.meta,AY()),this.meta.instance=e}getMetaConstructor(){return this.metaCtor}getMeta(){return this.meta}updateMeta(e){var t;li(this.meta,e),sE(this.meta,{...e,type:(t=e.type)!==null&&t!==void 0?t:this.meta.type},e)}}function vAe(n,e,t){return(e=bAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bAe(n){var e=wAe(n,"string");return typeof e=="symbol"?e:e+""}function wAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class yAe{constructor(e){vAe(this,"meta",void 0);const t=e.getMetaConstructor();this.meta=new t}getMeta(){return this.meta}updateMeta(e){li(this.meta,e),sE(this.meta,e,e)}}function K0(n,e,t){return(e=CAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function CAe(n){var e=SAe(n,"string");return typeof e=="symbol"?e:e+""}function SAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class sR{constructor(e){K0(this,"valueFactory",void 0),K0(this,"data",[]),K0(this,"index",[]),K0(this,"holes",new Set),this.valueFactory=e}obtain(e){TS(()=>xS(e),"Expecting an unsigned number.");const t=this._getStorageIndexByKey(e);let i;if(t>=0)i=this.data[t],i===void 0&&(i=this.valueFactory(e),this.data[t]=i);else if(i=this.valueFactory(e),this.holes.size>0){const r=this.holes.values().next().value;this.holes.delete(r),this.data[r]=i,this.index[e]=r}else this.data.push(i),this.index[e]=this.data.length-1;return i}insert(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;TS(()=>xS(e)||Y0(e),"Expecting an unsigned number or null/undefined argument.");const i=[],r=this.data.length;for(let o=0;o<t;o++)i.push(r+o),this.data.push(void 0);const s=Y0(e)?this.index.length:e;this.index=[...this.index.slice(0,s),...i,...this.index.slice(s)]}remove(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;TS(()=>xS(e)||Y0(e),"Expecting an unsigned number or null/undefined argument.");const i=this.index.splice(Y0(e)?this.index.length-t:e,t);for(let r=0;r<i.length;r++){const s=i[r];typeof s=="number"&&this.holes.add(s)}}size(){return this.data.length-this.holes.size}values(){return Tc(this.data,(e,t)=>!this.holes.has(t))[Symbol.iterator]()}entries(){const e=[];for(let i=0;i<this.data.length;i++){const r=this._getKeyByStorageIndex(i);r!==-1&&e.push([r,this.data[i]])}let t=0;return{next:()=>{if(t<e.length){const i=e[t];return t+=1,{value:i,done:!1}}return{done:!0}}}}clear(){this.data=[],this.index=[],this.holes.clear()}_getStorageIndexByKey(e){return this.index.length>e?this.index[e]:-1}_getKeyByStorageIndex(e){return this.index.indexOf(e)}[Symbol.iterator](){return this.entries()}}function DW(n,e,t){return(e=_Ae(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _Ae(n){var e=RAe(n,"string");return typeof e=="symbol"?e:e+""}function RAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const EAe=["data","width"];class xAe{constructor(e){DW(this,"globalMeta",void 0),DW(this,"metas",new sR(()=>this._createMeta())),this.globalMeta=e,this.metas=new sR(()=>this._createMeta())}updateMeta(e,t){const i=this.getMeta(e);li(i,t),sE(i,t)}createColumn(e,t){this.metas.insert(e,t)}removeColumn(e,t){this.metas.remove(e,t)}getMeta(e){return this.metas.obtain(e)}getMetaConstructor(e){return this.metas.obtain(e).constructor}clearCache(){this.metas.clear()}_createMeta(){return dAe(this.globalMeta.getMetaConstructor(),EAe).prototype}}function NW(n,e,t){return(e=TAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function TAe(n){var e=MAe(n,"string");return typeof e=="symbol"?e:e+""}function MAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class AAe{constructor(e){NW(this,"columnMeta",void 0),NW(this,"metas",new sR(()=>this._createRow())),this.columnMeta=e}updateMeta(e,t,i){const r=this.getMeta(e,t);li(r,i),sE(r,i)}createRow(e,t){this.metas.insert(e,t)}createColumn(e,t){for(let i=0;i<this.metas.size();i++)this.metas.obtain(i).insert(e,t)}removeRow(e,t){this.metas.remove(e,t)}removeColumn(e,t){for(let i=0;i<this.metas.size();i++)this.metas.obtain(i).remove(e,t)}getMeta(e,t,i){const r=this.metas.obtain(e).obtain(t);return i===void 0?r:r[i]}setMeta(e,t,i,r){var s;const o=this.metas.obtain(e).obtain(t);(s=o._automaticallyAssignedMetaProps)===null||s===void 0||s.delete(i),o[i]=r}removeMeta(e,t,i){const r=this.metas.obtain(e).obtain(t);delete r[i]}getMetas(){const e=[],t=Array.from(this.metas.values());for(let i=0;i<t.length;i++)ke(t[i])&&e.push(...t[i].values());return e}getMetasAtRow(e){TS(()=>xS(e),"Expecting an unsigned number.");const t=new Map(this.metas);return t.has(e)?Array.from(t.get(e).values()):[]}clearCache(){this.metas.clear()}_createRow(){return new sR(e=>this._createMeta(e))}_createMeta(e){const t=this.columnMeta.getMetaConstructor(e);return new t}}class PY{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];this.hot=e,this.globalMeta=new mAe(e),this.tableMeta=new yAe(this.globalMeta),this.columnMeta=new xAe(this.globalMeta),this.cellMeta=new AAe(this.columnMeta),i.forEach(r=>new r(this)),this.globalMeta.updateMeta(t)}getGlobalMeta(){return this.globalMeta.getMeta()}updateGlobalMeta(e){this.globalMeta.updateMeta(e)}getTableMeta(){return this.tableMeta.getMeta()}updateTableMeta(e){this.tableMeta.updateMeta(e)}getColumnMeta(e){return this.columnMeta.getMeta(e)}updateColumnMeta(e,t){this.columnMeta.updateMeta(e,t)}getCellMeta(e,t,i){let{visualRow:r,visualColumn:s}=i;const o=this.cellMeta.getMeta(e,t);return o.visualRow=r,o.visualCol=s,o.row=e,o.col=t,this.runLocalHooks("afterGetCellMeta",o),o}getCellMetaKeyValue(e,t,i){if(typeof i!="string")throw new Error("The passed cell meta object key is not a string");return this.cellMeta.getMeta(e,t,i)}setCellMeta(e,t,i,r){this.cellMeta.setMeta(e,t,i,r)}updateCellMeta(e,t,i){this.cellMeta.updateMeta(e,t,i)}removeCellMeta(e,t,i){this.cellMeta.removeMeta(e,t,i)}getCellsMeta(){return this.cellMeta.getMetas()}getCellsMetaAtRow(e){return this.cellMeta.getMetasAtRow(e)}createRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.createRow(e,t)}removeRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.removeRow(e,t)}createColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.createColumn(e,t),this.columnMeta.createColumn(e,t)}removeColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.removeColumn(e,t),this.columnMeta.removeColumn(e,t)}clearCellsCache(){this.cellMeta.clearCache()}clearCache(){this.cellMeta.clearCache(),this.columnMeta.clearCache()}}Xt(PY,Ki);function LW(n,e,t,i){const{hotInstance:r,dataMap:s,dataSource:o,internalSource:a,source:l,metaManager:c,firstRun:u}=i,h=fr(a),d=r.getSettings();Array.isArray(d.dataSchema)?r.dataType="array":cn(d.dataSchema)?r.dataType="function":r.dataType="object",s&&s.destroy(),n=r.runHooks(`before${h}`,n,u,l);const f=new Yg(r,n,c);if(e(f),typeof n=="object"&&n!==null)n.push&&n.splice||(n=[n]);else if(n===null){const g=f.getSchema();n=[];let p,m=0,b=0;for(m=0,b=d.startRows;m<b;m++)if((r.dataType==="object"||r.dataType==="function")&&d.dataSchema)p=gr(g),n.push(p);else if(r.dataType==="array")p=gr(g[0]),n.push(p);else{p=[];for(let y=0,w=d.startCols;y<w;y++)p.push(null);n.push(p)}}else throw new Error(`${a} only accepts array of objects or array of arrays (${typeof n} given)`);Array.isArray(n[0])&&(r.dataType="array"),d.data=n,f.dataSource=n,o.data=n,o.dataType=r.dataType,o.colToProp=f.colToProp.bind(f),o.propToCol=f.propToCol.bind(f),o.countCachedColumns=f.countCachedColumns.bind(f),t(f),r.runHooks(`after${h}`,n,u,l),u||(r.runHooks("afterChange",null,a),r.render()),r.getSettings().ariaTags&&ze(r.rootElement,[GG(-1),$1(r.countCols()+(r.view?r.countRowHeaders():0))])}function HW(n,e,t){return(e=PAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PAe(n){var e=IAe(n,"string");return typeof e=="symbol"?e:e+""}function IAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class OAe{constructor(e){HW(this,"metaManager",void 0),HW(this,"metaSyncMemo",new Map),this.metaManager=e,e.addLocalHook("afterGetCellMeta",t=>this.extendCellMeta(t)),Ie.getSingleton().add("beforeRender",t=>{t&&this.metaSyncMemo.clear()},this.metaManager.hot)}extendCellMeta(e){var t;const{row:i,col:r}=e;if((t=this.metaSyncMemo.get(i))!==null&&t!==void 0&&t.has(r))return;const{visualRow:s,visualCol:o}=e,a=this.metaManager.hot,l=a.colToProp(o);e.prop=l,a.runHooks("beforeGetCellMeta",s,o,e);const c=kn(e,"type")?e.type:null;let u=cn(e.cells)?e.cells(i,r,l):null;if(c)if(u){var h;u.type=(h=u.type)!==null&&h!==void 0?h:c}else u={type:c};u&&this.metaManager.updateCellMeta(i,r,u),a.runHooks("afterGetCellMeta",s,o,e),this.metaSyncMemo.has(i)||this.metaSyncMemo.set(i,new Set),this.metaSyncMemo.get(i).add(r)}}function kAe(n,e,t){DAe(n,e),e.set(n,t)}function DAe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function DT(n,e,t){return(e=NAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NAe(n){var e=LAe(n,"string");return typeof e=="symbol"?e:e+""}function LAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function HAe(n,e){return n.get($Ae(n,e))}function $Ae(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var $W=new WeakMap;class FAe{constructor(e){DT(this,"metaManager",void 0),DT(this,"usageTracker",new Set),DT(this,"propDescriptors",new Map([["ariaTags",{initOnly:!0}],["fixedColumnsLeft",{target:"fixedColumnsStart",onChange(t){if(this.metaManager.hot.isRtl()&&t==="fixedColumnsLeft")throw new Error("The `fixedColumnsLeft` is not supported for RTL. Please use option `fixedColumnsStart`.");if(this.usageTracker.has("fixedColumnsLeft")&&this.usageTracker.has("fixedColumnsStart"))throw new Error("The `fixedColumnsLeft` and `fixedColumnsStart` should not be used together. Please use only the option `fixedColumnsStart`.")}}],["layoutDirection",{initOnly:!0}],["renderAllColumns",{initOnly:!0}],["renderAllRows",{initOnly:!0}]])),kAe(this,$W,(t,i,r)=>{if(!r)throw new Error(`The \`${t}\` option can not be updated after the Handsontable is initialized.`)}),this.metaManager=e,this.extendMetaProps()}extendMetaProps(){this.propDescriptors.forEach((e,t)=>{const{initOnly:i,target:r,onChange:s}=e,o=typeof r=="string",a=o?r:t,l=`_${a}`;this.metaManager.globalMeta.meta[l]=this.metaManager.globalMeta.meta[a],s?(this.installPropWatcher(t,l,s),o&&this.installPropWatcher(r,l,s)):i&&(this.installPropWatcher(t,l,HAe($W,this)),this.metaManager.globalMeta.meta._initOnlySettings||(this.metaManager.globalMeta.meta._initOnlySettings=[]),this.metaManager.globalMeta.meta._initOnlySettings.push(t))})}installPropWatcher(e,t,i){const r=this;Object.defineProperty(this.metaManager.globalMeta.meta,e,{get(){return this[t]},set(s){const o=!r.usageTracker.has(e);r.usageTracker.add(e),i.call(r,e,s,o),this[t]=s},enumerable:!0,configurable:!0})}}const IY="gridDefault",ch="editorManager.handlingEditor",BAe={name:"editorCloseAndSave",callback(n){n._getEditorManager().closeEditorAndSaveChanges()}},VAe="hooksRefRegisterer",OY={_hooksStorage:Object.create(null),addHook(n,e){return this._hooksStorage[n]||(this._hooksStorage[n]=[]),this.hot.addHook(n,e),this._hooksStorage[n].push(e),this},removeHooksByKey(n){j(this._hooksStorage[n]||[],e=>{this.hot.removeHook(n,e)})},clearHooks(){ct(this._hooksStorage,(n,e)=>this.removeHooksByKey(e)),this._hooksStorage={}}};Sl(OY,"MIXIN_NAME",VAe,{writable:!1,enumerable:!1});function Ao(n,e,t){return(e=WAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WAe(n){var e=jAe(n,"string");return typeof e=="symbol"?e:e+""}function jAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const zAe="base",qn=Object.freeze({VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"});class em{static get EDITOR_TYPE(){return zAe}constructor(e){Ao(this,"hot",void 0),Ao(this,"state",qn.VIRGIN),Ao(this,"_opened",!1),Ao(this,"_fullEditMode",!1),Ao(this,"_closeCallback",null),Ao(this,"TD",null),Ao(this,"row",null),Ao(this,"col",null),Ao(this,"prop",null),Ao(this,"originalValue",null),Ao(this,"cellProperties",null),this.hot=e,this.init()}_fireCallbacks(e){this._closeCallback&&(this._closeCallback(e),this._closeCallback=null)}init(){}getValue(){throw Error("Editor getValue() method unimplemented")}setValue(){throw Error("Editor setValue() method unimplemented")}open(){throw Error("Editor open() method unimplemented")}close(){throw Error("Editor close() method unimplemented")}prepare(e,t,i,r,s,o){this.TD=r,this.row=e,this.col=t,this.prop=i,this.originalValue=s,this.cellProperties=o,this.state=this.isOpened()?this.state:qn.VIRGIN}extend(){return class extends this.constructor{}}saveValue(e,t){let i,r,s,o;if(t){const l=this.hot.getSelectedLast();i=Math.max(Math.min(l[0],l[2]),0),r=Math.max(Math.min(l[1],l[3]),0),s=Math.max(l[0],l[2]),o=Math.max(l[1],l[3])}else[i,r,s,o]=[this.row,this.col,null,null];const a=this.hot.runHooks("modifyGetCellCoords",i,r);Array.isArray(a)&&([i,r]=a),this.hot.populateFromArray(i,r,e,s,o,"edit")}beginEditing(e,t){if(this.state!==qn.VIRGIN)return;const i=this.hot,r=i.rowIndexMapper.getRenderableFromVisualIndex(this.row),s=i.columnIndexMapper.getRenderableFromVisualIndex(this.col);if(i.view.scrollViewport(i._createCellCoords(r,s)),this.state=qn.EDITING,this.isInFullEditMode()){const o=typeof e=="string"?e:jn(this.originalValue);this.setValue(o)}this.open(t),this._opened=!0,this.focus(),i.view.render(),i.runHooks("afterBeginEditing",this.row,this.col)}finishEditing(e,t,i){let r;if(i){const s=this._closeCallback;this._closeCallback=o=>{s&&s(o),i(o),this.hot.view.render()}}if(!this.isWaiting()){if(this.state===qn.VIRGIN){this.hot._registerTimeout(()=>{this._fireCallbacks(!0)});return}if(this.state===qn.EDITING){if(e){this.cancelChanges(),this.hot.view.render();return}const s=this.getValue();this.cellProperties.trimWhitespace?r=[[typeof s=="string"?String.prototype.trim.call(s||""):s]]:r=[[s]],this.state=qn.WAITING,this.saveValue(r,t),this.hot.getCellValidator(this.cellProperties)?this.hot.addHookOnce("postAfterValidate",o=>{this.state=qn.FINISHED,this.discardEditor(o)}):(this.state=qn.FINISHED,this.discardEditor(!0))}}}cancelChanges(){this.state=qn.FINISHED,this.discardEditor()}discardEditor(e){this.state===qn.FINISHED&&(e===!1&&this.cellProperties.allowInvalid!==!0?(this.hot.selectCell(this.row,this.col),this.focus(),this.state=qn.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this._fullEditMode=!1,this.state=qn.VIRGIN,this._fireCallbacks(!0),this.hot.getShortcutManager().setActiveContextName("grid")))}enableFullEditMode(){this._fullEditMode=!0}isInFullEditMode(){return this._fullEditMode}isOpened(){return this._opened}isWaiting(){return this.state===qn.WAITING}getEditedCellRect(){var e;const t=this.getEditedCell();if(!t)return;const{wtOverlays:i,wtViewport:r}=this.hot.view._wt,s=this.hot.rootWindow,o=xi(t),a=fn(t),l=xi(this.hot.rootElement),c=fn(this.hot.rootElement),u=i.topOverlay.holder,h=i.inlineStartOverlay.holder,d=u!==s?u.scrollTop:0,f=h!==s?h.scrollLeft:0,g=s.innerWidth-l.left-c,{wtTable:p}=(e=i.getParentOverlay(t))!==null&&e!==void 0?e:this.hot.view._wt,m=p.name,b=["master","inline_start"].includes(m)?d:0,y=["master","top","bottom"].includes(m)?f:0,w=o.top===l.top?0:1;let R=o.top-l.top-w-b,E=0;this.hot.isRtl()?E=s.innerWidth-o.left-a-g-1+y:E=o.left-l.left-1-y,["top","top_inline_start_corner"].includes(m)&&(R+=i.topOverlay.getOverlayOffset()),["inline_start","top_inline_start_corner"].includes(m)&&(E+=Math.abs(i.inlineStartOverlay.getOverlayOffset()));const _=this.hot.hasColHeaders(),T=this.hot.rowIndexMapper.getRenderableFromVisualIndex(this.row),I=this.hot.columnIndexMapper.getRenderableFromVisualIndex(this.col),P=this.hot.rowIndexMapper.getRenderableIndexesLength()-this.hot.view._wt.getSetting("fixedRowsBottom");(_&&T<=0||T===P)&&(R+=1),I<=0&&(E+=1);const D=r.rowsRenderCalculator.startPosition,B=r.columnsRenderCalculator.startPosition,V=Math.abs(i.inlineStartOverlay.getScrollPosition()),z=i.topOverlay.getScrollPosition(),L=Ai(this.hot.rootDocument);let k=t.offsetTop;if(["inline_start","master"].includes(m)&&(k+=D-z),["bottom","bottom_inline_start_corner"].includes(m)){const{wtViewport:q,wtTable:Q}=i.bottomOverlay.clone;k+=q.getWorkspaceHeight()-Q.getHeight()-L}let F=t.offsetLeft;this.hot.isRtl()?(F>=0?F=p.getWidth()-t.offsetLeft:F=Math.abs(F),F+=B-V-a):["top","master","bottom"].includes(m)&&(F+=B-V);const G=cl(this.TD,this.hot.rootWindow),U=this.hot.isRtl()?"borderRightWidth":"borderLeftWidth",se=parseInt(G[U],10)>0?0:1,v=parseInt(G.borderTopWidth,10)>0?0:1,C=fn(t)+se,S=ni(t)+v,A=s9(u)?L:0,H=o9(h)?L:0,M=this.hot.view.maximumVisibleElementWidth(F)-A+se,$=Math.max(this.hot.view.maximumVisibleElementHeight(k)-H+v,23);return{top:R,start:E,height:S,maxHeight:$,width:C,maxWidth:M}}getEditedCellsLayerClass(){switch(this.checkEditorSection()){case"inline-start":return"ht_clone_left ht_clone_inline_start";case"bottom":return"ht_clone_bottom";case"bottom-inline-start-corner":return"ht_clone_bottom_left_corner ht_clone_bottom_inline_start_corner";case"top":return"ht_clone_top";case"top-inline-start-corner":return"ht_clone_top_left_corner ht_clone_top_inline_start_corner";default:return"ht_clone_master"}}getEditedCell(){return this.hot.getCell(this.row,this.col,!0)}checkEditorSection(){const e=this.hot.countRows();let t="";return this.row<this.hot.getSettings().fixedRowsTop?this.col<this.hot.getSettings().fixedColumnsStart?t="top-inline-start-corner":t="top":this.hot.getSettings().fixedRowsBottom&&this.row>=e-this.hot.getSettings().fixedRowsBottom?this.col<this.hot.getSettings().fixedColumnsStart?t="bottom-inline-start-corner":t="bottom":this.col<this.hot.getSettings().fixedColumnsStart&&(t="inline-start"),t}}Xt(em,OY);const UAe={name:"editorCloseAndSaveByArrowKeys",callback(n,e,t){const i=n._getEditorManager(),r=i.getActiveEditor();r.isInFullEditMode()&&r.state===qn.EDITING||(i.closeEditorAndSaveChanges(),n.getSelected()&&(t.includes("arrowdown")?n.selection.transformStart(1,0):t.includes("arrowup")?n.selection.transformStart(-1,0):t.includes("arrowleft")?n.selection.transformStart(0,-1*n.getDirectionFactor()):t.includes("arrowright")&&n.selection.transformStart(0,n.getDirectionFactor())),e.preventDefault())}},GAe={name:"editorCloseAndSaveByEnter",callback(n,e){const t=n._getEditorManager();t.closeEditorAndSaveChanges(e.ctrlKey||e.metaKey),t.moveSelectionAfterEnter(e)}},YAe={name:"editorCloseWithoutSaving",callback(n){const e=n._getEditorManager();e.closeEditorAndRestoreOriginalValue(n.getShortcutManager().isCtrlPressed()),e.activeEditor.focus()}},KAe={name:"editorFastOpen",callback(n,e){const{highlight:t}=n.getSelectedRangeLast();t.isHeader()||n._getEditorManager().openEditor(null,e,!0)}},qAe={name:"editorOpen",callback(n,e,t){const i=n._getEditorManager(),r=n.getSelectedRangeLast(),{highlight:s}=r;if(n.selection.isMultiple()&&!r.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0){const o=n.getSettings(),a=typeof o.enterMoves=="function"?o.enterMoves(e):o.enterMoves;t.includes("shift")?n.selection.transformFocus(-a.row,-a.col):n.selection.transformFocus(a.row,a.col);return}s.isHeader()||(n.getSettings().enterBeginsEditing?i.cellProperties.readOnly?i.moveSelectionAfterEnter(e):i.openEditor(null,e,!0):i.moveSelectionAfterEnter(e),mo(e))}};function XAe(){return[BAe,UAe,GAe,YAe,KAe,qAe]}const ZAe={name:"extendCellsSelectionDown",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByColumnHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByRowHeader())&&n.selection.transformEnd(1,0)}},QAe={name:"extendCellsSelectionDownByViewportHeight",callback(n){const{to:e}=n.getSelectedRangeLast(),t=Math.min(e.row+n.countVisibleRows(),n.countRows()-1),i=n.rowIndexMapper.getNearestNotHiddenIndex(t,-1);if(i!==null){const r=n._createCellCoords(i,e.col),s=e.row-n.view.getFirstFullyVisibleRow(),o=Math.min(r.row-s,n.countRows()-1);n.selection.setRangeEnd(r),n.scrollViewportTo({row:o,verticalSnap:"top",horizontalSnap:"start"})}}},JAe={name:"extendCellsSelectionLeft",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByColumnHeader())&&n.selection.transformEnd(0,-1*n.getDirectionFactor())}},ePe={name:"extendCellsSelectionRight",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByColumnHeader())&&n.selection.transformEnd(0,n.getDirectionFactor())}},tPe={name:"extendCellsSelectionToColumns",callback(n){const{highlight:e,from:t,to:i}=n.getSelectedRangeLast();n.selection.isSelectedByRowHeader()?n.selection.selectAll(!0,!0):n.selectColumns(t.col,i.col,e)}},nPe={name:"extendCellsSelectionToMostBottom",callback(n){const{selection:e,rowIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByRowHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(n.countRows()-1,-1),l=r.clone();l.row=i.row,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByRowHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(a,s.col))}}},iPe={name:"extendCellsSelectionToMostInlineEnd",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast();if(!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&i.isCell()){const o=t.getNearestNotHiddenIndex(n.countCols()-1,-1),a=r.clone();a.col=i.col,e.setRangeStart(a,void 0,!1,i.clone()),e.setRangeEnd(n._createCellCoords(s.row,o))}}},rPe={name:"extendCellsSelectionToMostInlineStart",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast();if(!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&i.isCell()){const o=parseInt(n.getSettings().fixedColumnsStart,10),a=t.getNearestNotHiddenIndex(o,1),l=r.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),e.setRangeEnd(n._createCellCoords(s.row,a))}}},sPe={name:"extendCellsSelectionToMostLeft",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByColumnHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(...n.isRtl()?[n.countCols()-1,-1]:[0,1]),l=r.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByColumnHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(s.row,a))}}},oPe={name:"extendCellsSelectionToMostRight",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByColumnHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(...n.isRtl()?[0,1]:[n.countCols()-1,-1]),l=r.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByColumnHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(s.row,a))}}},aPe={name:"extendCellsSelectionToMostTop",callback(n){const{selection:e,rowIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByRowHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(0,1),l=r.clone();l.row=i.row,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByRowHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(a,s.col))}}},lPe={name:"extendCellsSelectionToRows",callback(n){const{highlight:e,from:t,to:i}=n.getSelectedRangeLast();n.selection.isSelectedByColumnHeader()?n.selection.selectAll(!0,!0):n.selectRows(t.row,i.row,e)}},cPe={name:"extendCellsSelectionUp",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByColumnHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByRowHeader())&&n.selection.transformEnd(-1,0)}},uPe={name:"extendCellsSelectionUpByViewportHeight",callback(n){const{to:e}=n.getSelectedRangeLast(),t=Math.max(e.row-n.countVisibleRows(),0),i=n.rowIndexMapper.getNearestNotHiddenIndex(t,1);if(i!==null){const r=n._createCellCoords(i,e.col),s=e.row-n.view.getFirstFullyVisibleRow(),o=Math.max(r.row-s,0);n.selection.setRangeEnd(r),n.scrollViewportTo({row:o,verticalSnap:"top",horizontalSnap:"start"})}}};function hPe(){return[ZAe,QAe,JAe,ePe,tPe,nPe,iPe,rPe,sPe,oPe,aPe,lPe,cPe,uPe]}const dPe={name:"moveCellSelectionDown",callback(n){let{selection:e}=n;e.transformStart(1,0)}},fPe={name:"moveCellSelectionDownByViewportHeight",callback(n){const{navigableHeaders:e}=n.getSettings(),t=e?n.countColHeaders():0,{row:i}=n.getSelectedRangeLast().highlight;let r=n.countVisibleRows()+t;i===n.countRows()-1?r=1:i+r>n.countRows()&&(r=n.countRows()-i-1),n.selection.transformStart(r,0),n.getSelectedRangeLast().highlight.row<0&&n.scrollViewportTo({row:0})}},gPe={name:"moveCellSelectionInlineEnd",callback(n,e){const t=n.getSettings(),i=n.getSelectedRangeLast(),r=typeof t.tabMoves=="function"?t.tabMoves(e):t.tabMoves;n.selection.isMultiple()&&!i.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0?n.selection.transformFocus(-r.row,-r.col):n.selection.transformStart(-r.row,-r.col)}},pPe={name:"moveCellSelectionInlineStart",callback(n,e){const t=n.getSettings(),i=n.getSelectedRangeLast(),r=typeof t.tabMoves=="function"?t.tabMoves(e):t.tabMoves;n.selection.isMultiple()&&!i.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0?n.selection.transformFocus(r.row,r.col):n.selection.transformStart(r.row,r.col)}},mPe={name:"moveCellSelectionLeft",callback(n){n.selection.transformStart(0,-1*n.getDirectionFactor())}},vPe={name:"moveCellSelectionRight",callback(n){n.selection.transformStart(0,n.getDirectionFactor())}},bPe={name:"moveCellSelectionToMostBottom",callback(n){const{col:e}=n.getSelectedRangeLast().highlight;let t=n.rowIndexMapper.getNearestNotHiddenIndex(n.countRows()-1,-1);t===null&&(t=-1),n.selection.setRangeStart(n._createCellCoords(t,e))}},wPe={name:"moveCellSelectionToMostBottomInlineEnd",callback(n){const{selection:e,rowIndexMapper:t,columnIndexMapper:i}=n,r=parseInt(n.getSettings().fixedRowsBottom,10),s=t.getNearestNotHiddenIndex(n.countRows()-r-1,-1),o=i.getNearestNotHiddenIndex(n.countCols()-1,-1);e.setRangeStart(n._createCellCoords(s,o))}},yPe={name:"moveCellSelectionToMostInlineEnd",callback(n){const{selection:e,columnIndexMapper:t}=n;e.setRangeStart(n._createCellCoords(n.getSelectedRangeLast().highlight.row,t.getNearestNotHiddenIndex(n.countCols()-1,-1)))}},CPe={name:"moveCellSelectionToMostInlineStart",callback(n){const{selection:e,columnIndexMapper:t}=n,i=parseInt(n.getSettings().fixedColumnsStart,10),r=n.getSelectedRangeLast().highlight.row,s=t.getNearestNotHiddenIndex(i,1);e.setRangeStart(n._createCellCoords(r,s))}},SPe={name:"moveCellSelectionToMostLeft",callback(n){const{selection:e,columnIndexMapper:t}=n,i=n.getSelectedRangeLast().highlight.row;let r=t.getNearestNotHiddenIndex(...n.isRtl()?[n.countCols()-1,-1]:[0,1]);r===null&&(r=n.isRtl()?-1:-n.countRowHeaders()),e.setRangeStart(n._createCellCoords(i,r))}},_Pe={name:"moveCellSelectionToMostRight",callback(n){const{selection:e,columnIndexMapper:t}=n,{row:i}=n.getSelectedRangeLast().highlight;let r=t.getNearestNotHiddenIndex(...n.isRtl()?[0,1]:[n.countCols()-1,-1]);r===null&&(r=n.isRtl()?-n.countRowHeaders():-1),e.setRangeStart(n._createCellCoords(i,r))}},RPe={name:"moveCellSelectionToMostTop",callback(n){const{col:e}=n.getSelectedRangeLast().highlight;let t=n.rowIndexMapper.getNearestNotHiddenIndex(0,1);t===null&&(t=-n.countColHeaders()),n.selection.setRangeStart(n._createCellCoords(t,e))}},EPe={name:"moveCellSelectionToMostTopInlineStart",callback(n){const{selection:e,rowIndexMapper:t,columnIndexMapper:i}=n,r=parseInt(n.getSettings().fixedRowsTop,10),s=parseInt(n.getSettings().fixedColumnsStart,10),o=t.getNearestNotHiddenIndex(r,1),a=i.getNearestNotHiddenIndex(s,1);e.setRangeStart(n._createCellCoords(o,a))}},xPe={name:"moveCellSelectionUp",callback(n){let{selection:e}=n;e.transformStart(-1,0)}},TPe={name:"moveCellSelectionUpByViewportHight",callback(n){const{navigableHeaders:e}=n.getSettings(),t=e?n.countColHeaders():0,{row:i}=n.getSelectedRangeLast().highlight;let r=-(n.countVisibleRows()+t);i===-t?r=-1:i+r<t&&(r=-(i+t)),n.selection.transformStart(r,0),n.getSelectedRangeLast().highlight.row<0&&n.scrollViewportTo({row:0})}};function MPe(){return[dPe,fPe,gPe,pPe,mPe,vPe,bPe,wPe,yPe,CPe,SPe,_Pe,RPe,EPe,xPe,TPe]}const APe={name:"emptySelectedCells",callback(n){n.emptySelectedCells(),n._getEditorManager().prepareEditor()}},PPe={name:"scrollToFocusedCell",callback(n){const{highlight:e}=n.getSelectedRangeLast(),t=n.view.getFirstFullyVisibleRow()-1,i=n.view.getFirstFullyVisibleColumn()-1,r=n.view.getLastFullyVisibleRow()+1,s=n.view.getLastFullyVisibleColumn()+1,o=n._createCellCoords(t,i),a=n._createCellCoords(r,s);if(!n._createCellRange(o,o,a).includes(e)&&(e.row>=0||e.col>=0)){const c={};if(e.col>=0){const u=Math.floor(n.countVisibleCols()/2);c.col=Math.max(e.col-u,0)}if(e.row>=0){const u=Math.floor(n.countVisibleRows()/2);c.row=Math.max(e.row-u,0)}n.scrollViewportTo({...c,verticalSnap:"top",horizontalSnap:"start"})}}},IPe={name:"selectAllCells",callback(n){n.selection.selectAll(!0,!0,{disableHeadersHighlight:!0})}},OPe={name:"selectAllCellsAndHeaders",callback(n){n.selection.selectAll(!0,!0,{disableHeadersHighlight:!1})}},kPe={name:"populateSelectedCellsData",callback(n){const e=n.getSelectedRange(),{row:t,col:i}=e[e.length-1].highlight.normalize(),r=n.getDataAtCell(t,i),s=new Map;for(let o=0;o<e.length;o++)e[o].forAll((a,l)=>{if(a>=0&&l>=0&&(a!==t||l!==i)){const{readOnly:c}=n.getCellMeta(a,l);c||s.set(`${a}x${l}`,[a,l,r])}});n.setDataAtCell(Array.from(s.values()))}},DPe=[...XAe(),...hPe(),...MPe(),APe,PPe,IPe,OPe,kPe];function kY(n){const e={};return DPe.forEach(t=>{let{name:i,callback:r}=t;e[i]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return r(n,...o)}}),e}function NPe(n){const e=n.getShortcutManager().addContext("editor"),t=kY(n),i={group:ch};e.addShortcuts([{keys:[["Enter"],["Enter","Shift"]],callback:(r,s)=>t.editorCloseAndSaveByEnter(r,s)},{keys:[["Enter","Control/Meta"],["Enter","Control/Meta","Shift"]],captureCtrl:!0,callback:(r,s)=>t.editorCloseAndSaveByEnter(r,s)},{keys:[["Tab"],["Tab","Shift"],["PageDown"],["PageUp"]],forwardToContext:n.getShortcutManager().getContext("grid"),callback:(r,s)=>t.editorCloseAndSave(r,s)},{keys:[["ArrowDown"],["ArrowUp"],["ArrowLeft"],["ArrowRight"]],preventDefault:!1,callback:(r,s)=>t.editorCloseAndSaveByArrowKeys(r,s)},{keys:[["Escape"],["Escape","Control/Meta"]],callback:()=>t.editorCloseWithoutSaving()}],i)}function LPe(n){const e=n.getShortcutManager().addContext("grid"),t=kY(n),i={runOnlyIf:()=>{const{navigableHeaders:r}=n.getSettings();return ke(n.getSelected())&&(r||!r&&n.countRenderedRows()>0&&n.countRenderedCols()>0)},group:IY};e.addShortcuts([{keys:[["F2"]],callback:r=>t.editorFastOpen(r)},{keys:[["Enter"],["Enter","Shift"]],callback:(r,s)=>t.editorOpen(r,s)},{keys:[["Backspace"],["Delete"]],callback:()=>t.emptySelectedCells()}],{group:ch,runOnlyIf:()=>ke(n.getSelected())}),e.addShortcuts([{keys:[["Control/Meta","A"]],callback:()=>t.selectAllCells(),runOnlyIf:()=>{var r;return!((r=n.getSelectedRangeLast())!==null&&r!==void 0&&r.highlight.isHeader())}},{keys:[["Control/Meta","A"]],callback:()=>{},runOnlyIf:()=>{var r;return(r=n.getSelectedRangeLast())===null||r===void 0?void 0:r.highlight.isHeader()},preventDefault:!0},{keys:[["Control/Meta","Shift","Space"]],callback:()=>t.selectAllCellsAndHeaders()},{keys:[["Control/Meta","Enter"]],callback:()=>t.populateSelectedCellsData(),runOnlyIf:()=>{var r,s;return!((r=n.getSelectedRangeLast())!==null&&r!==void 0&&r.highlight.isHeader())&&((s=n.getSelectedRangeLast())===null||s===void 0?void 0:s.getCellsCount())>1}},{keys:[["Control","Space"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToColumns()},{keys:[["Shift","Space"]],stopPropagation:!0,callback:()=>t.extendCellsSelectionToRows()},{keys:[["ArrowUp"]],callback:()=>t.moveCellSelectionUp()},{keys:[["ArrowUp","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostTop()},{keys:[["ArrowUp","Shift"]],callback:()=>t.extendCellsSelectionUp()},{keys:[["ArrowUp","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostTop(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByColumnHeader())},{keys:[["ArrowDown"]],callback:()=>t.moveCellSelectionDown()},{keys:[["ArrowDown","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostBottom()},{keys:[["ArrowDown","Shift"]],callback:()=>t.extendCellsSelectionDown()},{keys:[["ArrowDown","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostBottom(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByColumnHeader())},{keys:[["ArrowLeft"]],callback:()=>t.moveCellSelectionLeft()},{keys:[["ArrowLeft","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostLeft()},{keys:[["ArrowLeft","Shift"]],callback:()=>t.extendCellsSelectionLeft()},{keys:[["ArrowLeft","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostLeft(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByRowHeader())},{keys:[["ArrowRight"]],callback:()=>t.moveCellSelectionRight()},{keys:[["ArrowRight","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostRight()},{keys:[["ArrowRight","Shift"]],callback:()=>t.extendCellsSelectionRight()},{keys:[["ArrowRight","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostRight(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByRowHeader())},{keys:[["Home"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostInlineStart(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["Home","Shift"]],callback:()=>t.extendCellsSelectionToMostInlineStart()},{keys:[["Home","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostTopInlineStart(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["End"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostInlineEnd(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["End","Shift"]],callback:()=>t.extendCellsSelectionToMostInlineEnd()},{keys:[["End","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostBottomInlineEnd(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["PageUp"]],callback:()=>t.moveCellSelectionUpByViewportHight()},{keys:[["PageUp","Shift"]],callback:()=>t.extendCellsSelectionUpByViewportHeight()},{keys:[["PageDown"]],callback:()=>t.moveCellSelectionDownByViewportHeight()},{keys:[["PageDown","Shift"]],callback:()=>t.extendCellsSelectionDownByViewportHeight()},{keys:[["Tab"]],preventDefault:!1,callback:r=>t.moveCellSelectionInlineStart(r)},{keys:[["Shift","Tab"]],preventDefault:!1,callback:r=>t.moveCellSelectionInlineEnd(r)},{keys:[["Control/Meta","Backspace"]],callback:()=>t.scrollToFocusedCell()}],i)}function HPe(n){[LPe,NPe].forEach(e=>e(n))}function $Pe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=n.rootElement,i=FW(n),r=FW(n);return i.addEventListener("focus",()=>e==null?void 0:e.onFocusFromTop()),r.addEventListener("focus",()=>e==null?void 0:e.onFocusFromBottom()),t.firstChild.before(i),t.lastChild.after(r),{activate(){n._registerTimeout(()=>{i.tabIndex=0,r.tabIndex=0},10)},deactivate(){n._registerTimeout(()=>{i.tabIndex=-1,r.tabIndex=-1},10)}}}function FW(n){const t=n.rootDocument.createElement("input");return t.type="text",t.classList.add("htFocusCatcher"),n.getSettings().ariaTags&&ze(t,[Ka(),xf()]),t}function FPe(n){const e=BPe(n);let t;const{activate:i,deactivate:r}=$Pe(n,{onFocusFromTop(){var h;const d=(h=e(t))!==null&&h!==void 0?h:wI(n);d&&(n.runHooks("modifyFocusOnTabNavigation","from_above",d),n.selectCell(d.row,d.col)),n.listen()},onFocusFromBottom(){var h;const d=(h=e(t))!==null&&h!==void 0?h:yI(n);d&&(n.runHooks("modifyFocusOnTabNavigation","from_below",d),n.selectCell(d.row,d.col)),n.listen()}}),s={wrapped:!1,flipped:!1};let o=!0,a=!1,l=!1;n.addHook("afterListen",()=>r()),n.addHook("afterUnlisten",()=>i()),n.addHook("afterSelection",(h,d,f,g,p)=>{if(a&&(s.wrapped&&s.flipped||l)&&(l=!1,p.value=!0),o){var m;t=(m=n.getSelectedRangeLast())===null||m===void 0?void 0:m.highlight}}),n.addHook("beforeRowWrap",(h,d,f)=>{s.wrapped=!0,s.flipped=f});function c(){s.wrapped=!1,s.flipped=!1,n.deselectCell(),n.unlisten()}const u={keys:[["Tab"],["Shift","Tab"]],preventDefault:!1,stopPropagation:!1,relativeToGroup:IY,group:"focusCatcher"};n.getShortcutManager().getContext("grid").addShortcuts([{...u,callback:()=>{const{tabNavigation:h}=n.getSettings();a=!0,n.getSelectedRangeLast()&&!h&&(o=!1),h||(l=!0)},position:"before"},{...u,callback:h=>{const{tabNavigation:d,autoWrapRow:f}=n.getSettings();if(a=!1,o=!0,!d||!n.selection.isSelected()||f&&s.wrapped&&s.flipped||!f&&s.wrapped)return f&&s.wrapped&&s.flipped&&(t=h.shiftKey?wI(n):yI(n)),c(),!1;h.preventDefault()},position:"after"}])}function wI(n){const{rowIndexMapper:e,columnIndexMapper:t}=n,{navigableHeaders:i}=n.getSettings();let r=i&&n.countColHeaders()>0?-n.countColHeaders():0,s=i&&n.countRowHeaders()>0?-n.countRowHeaders():0;return r===0&&(r=e.getVisualFromRenderableIndex(r)),s===0&&(s=t.getVisualFromRenderableIndex(s)),r===null||s===null?null:n._createCellCoords(r,s)}function yI(n){var e,t;const{rowIndexMapper:i,columnIndexMapper:r}=n,{navigableHeaders:s}=n.getSettings();let o=i.getRenderableIndexesLength()-1,a=r.getRenderableIndexesLength()-1;if(o<0){if(!s||n.countColHeaders()===0)return null;o=-1}if(a<0){if(!s||n.countColHeaders()===0)return null;a=-1}return n._createCellCoords((e=i.getVisualFromRenderableIndex(o))!==null&&e!==void 0?e:o,(t=r.getVisualFromRenderableIndex(a))!==null&&t!==void 0?t:a)}function BPe(n){return e=>{if(!e)return null;const t=wI(n),i=yI(n);return e.col<t.col&&(e.col=t.col),e.col>i.col&&(e.col=i.col),e.row<t.row&&(e.row=t.row),e.row>i.row&&(e.row=i.row),e}}function VPe(n){return e=>{let{col:t}=e;n.scrollViewportTo({col:t})}}function WPe(){return()=>{}}function jPe(n){return e=>{n.scrollViewportTo(e.toObject())}}function zPe(n){return e=>{n.scrollViewportTo(e.toObject())}}function UPe(n){return e=>{n.scrollViewportTo(e.toObject())}}function GPe(n){return e=>{let{row:t}=e;n.scrollViewportTo({row:t})}}function YPe(n){return e=>{const t=n.selection.getSelectionSource(),{row:i,col:r}=e;if(i<0&&r>=0)n.scrollViewportTo({col:r});else if(r<0&&i>=0)n.scrollViewportTo({row:i});else{if(t==="mouse"&&(r===n.view.getLastPartiallyVisibleColumn()||i===n.view.getLastPartiallyVisibleRow()))return;n.scrollViewportTo({row:i,col:r})}}}function KPe(n){const{selection:e}=n;let t=!1,i=!1;return{resume(){i=!1},suspend(){i=!0},skipNextScrollCycle(){t=!0},scrollTo(r){var s;if(t||i){t=!1;return}let o;e.isFocusSelectionChanged()?o=jPe(n):e.isSelectedByCorner()?o=WPe():e.isSelectedByRowHeader()?o=GPe(n):e.isSelectedByColumnHeader()?o=VPe(n):e.getSelectedRange().size()===1&&e.isMultiple()?o=zPe(n):e.getSelectedRange().size()===1&&!e.isMultiple()?o=YPe(n):e.getSelectedRange().size()>1&&(o=UPe(n)),(s=o)===null||s===void 0||s(r)}}}const BW=new Map([[" ","space"],["spacebar","space"],["scroll","scrolllock"],["del","delete"],["esc","escape"],["medianexttrack","mediatracknext"],["mediaprevioustrack","mediatrackprevious"],["volumeup","audiovolumeup"],["volumedown","audiovolumedown"],["volumemute","audiovolumemute"],["multiply","*"],["add","+"],["divide","/"],["subtract","-"],["left","arrowleft"],["right","arrowright"],["up","arrowup"],["down","arrowdown"]]),q0=n=>n.map(e=>{const t=e.toLowerCase();return BW.has(t)?BW.get(t):t}).sort().join("+"),qPe=n=>n.split("+"),VW=new Map([[96,"numpad0"],[97,"numpad1"],[98,"numpad2"],[99,"numpad3"],[100,"numpad4"],[101,"numpad5"],[102,"numpad6"],[103,"numpad7"],[104,"numpad8"],[105,"numpad9"],[106,"multiply"],[107,"add"],[108,"decimal"],[109,"subtract"],[110,"decimal"],[111,"divide"],[112,"f1"],[113,"f2"],[114,"f3"],[115,"f4"],[116,"f5"],[117,"f6"],[118,"f7"],[119,"f8"],[120,"f9"],[121,"f10"],[122,"f11"],[123,"f12"],[186,"semicolon"],[187,"equal"],[188,"comma"],[189,"minus"],[190,"period"],[191,"slash"],[192,"backquote"],[219,"bracketleft"],[220,"backslash"],[221,"bracketright"],[222,"quote"]]),NT=n=>{let{which:e,key:t}=n;if(VW.has(e))return VW.get(e);const i=String.fromCharCode(e).toLowerCase();return/^[a-z0-9]$/.test(i)?i:t.toLowerCase()},DY=Symbol("shortcut-context");function NY(n){return lt(n)&&n.__kindOf===DY}const XPe=n=>{const e=K1({errorIdExists:l=>`The "${l}" shortcut is already registered in the "${n}" context.`}),t=function(){let{keys:l,callback:c,group:u,runOnlyIf:h=()=>!0,captureCtrl:d=!1,preventDefault:f=!0,stopPropagation:g=!1,relativeToGroup:p,position:m,forwardToContext:b}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(dn(u))throw new Error("You need to define the shortcut's group.");if(cn(c)===!1)throw new Error("The shortcut's callback needs to be a function.");if(Array.isArray(l)===!1)throw new Error(Kt`Pass the shortcut\'s keys as an array of arrays,\x20
      using the KeyboardEvent.key properties:\x20
      https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values.`);const y={callback:c,group:u,runOnlyIf:h,captureCtrl:d,preventDefault:f,stopPropagation:g};ke(p)&&(y.relativeToGroup=p,y.position=m),NY(b)&&(y.forwardToContext=b),l.forEach(w=>{const R=q0(w);if(e.hasItem(R)){const _=e.getItem(R);let T=_.findIndex(I=>I.group===p);T!==-1?m==="before"?T-=1:T+=1:T=_.length,_.splice(T,0,y)}else e.addItem(R,[y])})},i=function(l){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l.forEach(u=>{ct(c,(h,d)=>{Object.prototype.hasOwnProperty.call(u,d)===!1&&(u[d]=c[d])}),t(u)})},r=l=>{const c=q0(l);e.removeItem(c)};return{__kindOf:DY,addShortcut:t,addShortcuts:i,getShortcuts:l=>{const c=q0(l),u=e.getItem(c);return ke(u)?u.slice():[]},hasShortcut:l=>{const c=q0(l);return e.hasItem(c)},removeShortcutsByKeys:r,removeShortcutsByGroup:l=>{e.getItems().forEach(u=>{let[h,d]=u;const f=d.filter(g=>g.group!==l);f.length===0?r(qPe(h)):(d.length=0,d.push(...f))})}}};function ZPe(){const n=new Set;return{press(e){n.add(e)},release(e){n.delete(e)},releaseAll(){n.clear()},isPressed(e){return n.has(e)}}}const QPe=["meta","alt","shift","control"],Gm=ZPe(),Ym=[];let X0=0;function JPe(n,e,t,i,r){const s=f=>QPe.includes(f),o=function(f){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const p=[];return f.altKey&&p.push("alt"),g&&(f.ctrlKey||f.metaKey)?p.push("control/meta"):(f.ctrlKey&&p.push("control"),f.metaKey&&p.push("meta")),f.shiftKey&&p.push("shift"),p},a=f=>{if(e(f)===!1)return;const g=t(f);if(f.keyCode===229||g===!1||vu(f))return;const p=NT(f);let m=[];s(p)||(m=o(f));const b=[p].concat(m);!r(f,b)&&(bw()&&m.includes("meta")||!bw()&&m.includes("control"))&&r(f,[p].concat(o(f,!0))),i(f)},l=f=>{if(f.key){const g=NT(f);s(g)&&Gm.press(g)}},c=f=>{if(f.key){const g=NT(f);s(g)&&Gm.release(g)}},u=()=>{Gm.releaseAll()};return{mount:()=>{let f=n;for(X0+=1;f;)X0===1&&(f.document.documentElement.addEventListener("keydown",l),Ym.push({event:"keydown",listener:l}),f.document.documentElement.addEventListener("keyup",c),Ym.push({event:"keyup",listener:c})),f.document.documentElement.addEventListener("keydown",a),f.document.documentElement.addEventListener("blur",u),f=tf(f)},unmount:()=>{let f=n;for(X0-=1;f;){if(X0===0){for(let g=0;g<Ym.length;g++){const{event:p,listener:m}=Ym[g];f.document.documentElement.removeEventListener(p,m)}Ym.length=0}f.document.documentElement.removeEventListener("keydown",a),f.document.documentElement.removeEventListener("blur",u),f=tf(f)}},isPressed:f=>Gm.isPressed(f),releasePressedKeys:()=>Gm.releaseAll()}}const eIe=n=>{let{ownerWindow:e,handleEvent:t,beforeKeyDown:i,afterKeyDown:r}=n;const s=K1({errorIdExists:g=>`The "${g}" context name is already registered.`});let o="grid";const a=g=>{const p=XPe(g);return s.addItem(g,p),p},l=()=>o,c=g=>s.getItem(g),u=g=>{if(!s.hasItem(g))throw new Error(Kt`You've tried to activate the "${g}" shortcut context\x20
        that does not exist. Before activation, register the context using the "addContext" method.`);o=g};let h=!1;const d=function(g,p){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l();const b=NY(m)?m:c(m);let y=!1;if(!b.hasShortcut(p))return y;const w=b.getShortcuts(p);for(let R=0;R<w.length;R++){const{callback:E,runOnlyIf:_,preventDefault:T,stopPropagation:I,captureCtrl:x,forwardToContext:P}=w[R];if(_(g)===!0){if(h=x,y=E(g,p)===!1,h=!1,T&&g.preventDefault(),I&&(mo(g),g.stopPropagation()),y)break;P&&d(g,p,P)}}return y},f=JPe(e,t,i,r,d);return f.mount(),{addContext:a,getActiveContextName:l,getContext:c,setActiveContextName:u,isCtrlPressed:()=>!h&&(f.isPressed("control")||f.isPressed("meta")),releasePressedKeys:()=>f.releasePressedKeys(),destroy:()=>f.unmount()}};let LT=null;const HT=new Map;function LY(n,e){var t,i=this;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this;const o=new co(s);let a,l,c,u,h,d,f=!0;LTe(r)&&NTe(this),this.rootElement=n,this.rootDocument=n.ownerDocument,this.rootWindow=this.rootDocument.defaultView,this.isDestroyed=!1,this.renderSuspendedCounter=0,this.executionSuspendedCounter=0;const g=(t=e==null?void 0:e.layoutDirection)!==null&&t!==void 0?t:"inherit",p=["rtl","ltr"].includes(g)?g:this.rootWindow.getComputedStyle(this.rootElement).direction;this.rootElement.setAttribute("dir",p),this.isRtl=function(){return p==="rtl"},this.isLtr=function(){return!s.isRtl()},this.getDirectionFactor=function(){return s.isLtr()?1:-1},e.language=IMe(e.language);const m=new PY(s,e,[OAe,FAe]),b=m.getTableMeta(),y=m.getGlobalMeta(),w=K1();this.container=this.rootDocument.createElement("div"),this.renderCall=!1,n.insertBefore(this.container,n.firstChild),RS(this)&&WG(e.licenseKey,n),this.guid=`ht_${gD()}`,HT.set(this.guid,this),this.columnIndexMapper=new mI,this.rowIndexMapper=new mI,this.columnIndexMapper.addLocalHook("indexesSequenceChange",v=>{s.runHooks("afterColumnSequenceChange",v)}),this.rowIndexMapper.addLocalHook("indexesSequenceChange",v=>{s.runHooks("afterRowSequenceChange",v)}),l=new qTe(s),(!this.rootElement.id||this.rootElement.id.substring(0,3)==="ht_")&&(this.rootElement.id=this.guid);const R=v=>{const{row:C,col:S}=v;return s._createCellCoords(C>=0?s.rowIndexMapper.getRenderableFromVisualIndex(C):C,S>=0?s.columnIndexMapper.getRenderableFromVisualIndex(S):S)},E=v=>{const{row:C,col:S}=v;return s._createCellCoords(C>=0?s.rowIndexMapper.getVisualFromRenderableIndex(C):C,S>=0?s.columnIndexMapper.getVisualFromRenderableIndex(S):S)},_=(v,C)=>{const S=C>v?1:-1,A=Math.min(v,C),H=Math.max(v,C),M=s.rowIndexMapper.getNearestNotHiddenIndex(v,S);return M===null||S===1&&M>H||S===-1&&M<A?null:M>=0?s.rowIndexMapper.getRenderableFromVisualIndex(M):M},T=(v,C)=>{const S=C>v?1:-1,A=Math.min(v,C),H=Math.max(v,C),M=s.columnIndexMapper.getNearestNotHiddenIndex(v,S);return M===null||S===1&&M>H||S===-1&&M<A?null:M>=0?s.columnIndexMapper.getRenderableFromVisualIndex(M):M};let I=new TY(b,{rowIndexMapper:s.rowIndexMapper,columnIndexMapper:s.columnIndexMapper,countCols:()=>s.countCols(),countRows:()=>s.countRows(),propToCol:v=>a.propToCol(v),isEditorOpened:()=>s.getActiveEditor()?s.getActiveEditor().isOpened():!1,countRenderableColumns:()=>this.view.countRenderableColumns(),countRenderableRows:()=>this.view.countRenderableRows(),countRowHeaders:()=>this.countRowHeaders(),countColHeaders:()=>this.countColHeaders(),countRenderableRowsInRange:function(){return i.view.countRenderableRowsInRange(...arguments)},countRenderableColumnsInRange:function(){return i.view.countRenderableColumnsInRange(...arguments)},getShortcutManager:()=>s.getShortcutManager(),createCellCoords:(v,C)=>s._createCellCoords(v,C),createCellRange:(v,C,S)=>s._createCellRange(v,C,S),visualToRenderableCoords:R,renderableToVisualCoords:E,findFirstNonHiddenRenderableRow:_,findFirstNonHiddenRenderableColumn:T,isDisabledCellSelection:(v,C)=>v<0||C<0?s.getSettings().disableVisualSelection:s.getCellMeta(v,C).disableVisualSelection});this.selection=I;const x=v=>{let{hiddenIndexesChanged:C}=v;C&&this.selection.commit()};this.columnIndexMapper.addLocalHook("cacheUpdated",x),this.rowIndexMapper.addLocalHook("cacheUpdated",x),this.selection.addLocalHook("afterSetRangeEnd",(v,C)=>{const S=to(!1),A=this.selection.getSelectedRange(),{from:H,to:M}=A.current(),$=A.size()-1;this.runHooks("afterSelection",H.row,H.col,M.row,M.col,S,$),this.runHooks("afterSelectionByProp",H.row,s.colToProp(H.col),M.row,s.colToProp(M.col),S,$),C&&(!S.isTouched()||S.isTouched()&&!S.value)&&d.scrollTo(v);const q=I.isSelectedByRowHeader(),Q=I.isSelectedByColumnHeader();q&&Q?ue(this.rootElement,["ht__selection--rows","ht__selection--columns"]):q?(Ze(this.rootElement,"ht__selection--columns"),ue(this.rootElement,"ht__selection--rows")):Q?(Ze(this.rootElement,"ht__selection--rows"),ue(this.rootElement,"ht__selection--columns")):Ze(this.rootElement,["ht__selection--rows","ht__selection--columns"]),I.getSelectionSource()!=="shift"&&u.closeEditor(null),s.view.render(),u.prepareEditor()}),this.selection.addLocalHook("beforeSetFocus",v=>{this.runHooks("beforeSelectionFocusSet",v.row,v.col)}),this.selection.addLocalHook("afterSetFocus",v=>{const C=to(!1);this.runHooks("afterSelectionFocusSet",v.row,v.col,C),(!C.isTouched()||C.isTouched()&&!C.value)&&d.scrollTo(v),u.closeEditor(),s.view.render(),u.prepareEditor()}),this.selection.addLocalHook("afterSelectionFinished",v=>{const C=v.length-1,{from:S,to:A}=v[C];this.runHooks("afterSelectionEnd",S.row,S.col,A.row,A.col,C),this.runHooks("afterSelectionEndByProp",S.row,s.colToProp(S.col),A.row,s.colToProp(A.col),C)}),this.selection.addLocalHook("afterIsMultipleSelection",v=>{const C=this.runHooks("afterIsMultipleSelection",v.value);v.value&&(v.value=C)}),this.selection.addLocalHook("afterDeselect",()=>{u.closeEditor(),s.view.render(),Ze(this.rootElement,["ht__selection--rows","ht__selection--columns"]),this.runHooks("afterDeselect")}),this.selection.addLocalHook("beforeHighlightSet",()=>this.runHooks("beforeSelectionHighlightSet")).addLocalHook("beforeSetRangeStart",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("beforeSetRangeStart",...C)}).addLocalHook("beforeSetRangeStartOnly",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("beforeSetRangeStartOnly",...C)}).addLocalHook("beforeSetRangeEnd",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("beforeSetRangeEnd",...C)}).addLocalHook("beforeSelectColumns",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("beforeSelectColumns",...C)}).addLocalHook("afterSelectColumns",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("afterSelectColumns",...C)}).addLocalHook("beforeSelectRows",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("beforeSelectRows",...C)}).addLocalHook("afterSelectRows",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("afterSelectRows",...C)}).addLocalHook("beforeModifyTransformStart",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("modifyTransformStart",...C)}).addLocalHook("afterModifyTransformStart",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("afterModifyTransformStart",...C)}).addLocalHook("beforeModifyTransformFocus",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("modifyTransformFocus",...C)}).addLocalHook("afterModifyTransformFocus",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("afterModifyTransformFocus",...C)}).addLocalHook("beforeModifyTransformEnd",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("modifyTransformEnd",...C)}).addLocalHook("afterModifyTransformEnd",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("afterModifyTransformEnd",...C)}).addLocalHook("beforeRowWrap",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("beforeRowWrap",...C)}).addLocalHook("beforeColumnWrap",function(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];return i.runHooks("beforeColumnWrap",...C)}).addLocalHook("insertRowRequire",v=>this.alter("insert_row_above",v,1,"auto")).addLocalHook("insertColRequire",v=>this.alter("insert_col_start",v,1,"auto")),c={alter(v,C){var S,A;let H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,M=arguments.length>3?arguments[3]:void 0,$=arguments.length>4?arguments[4]:void 0;const q=Q=>{if(Q.length===0)return[];const ce=[...Q];return ce.sort((Me,Ce)=>{let[J]=Me,[oe]=Ce;return J===oe?0:J>oe?1:-1}),ci(ce,(Me,Ce)=>{let[J,oe]=Ce;const ae=Me[Me.length-1],[Fe,ve]=ae,Se=Fe+ve;if(J<=Se){const O=Math.max(oe-(Se-J),0);ae[1]+=O}else Me.push([J,oe]);return Me},[ce[0]])};switch(v){case"insert_row_below":case"insert_row_above":const Q=s.countSourceRows();if(b.maxRows===Q)return;const ce=v==="insert_row_below"?"below":"above";C=(S=C)!==null&&S!==void 0?S:ce==="below"?Q:0;const{delta:le,startPhysicalIndex:Me}=a.createRow(C,H,{source:M,mode:ce});I.shiftRows(s.toVisualRow(Me),le);break;case"insert_col_start":case"insert_col_end":const Ce=v==="insert_col_end"?"end":"start";C=(A=C)!==null&&A!==void 0?A:Ce==="end"?s.countSourceCols():0;const{delta:J,startPhysicalIndex:oe}=a.createCol(C,H,{source:M,mode:Ce});if(J){if(Array.isArray(b.colHeaders)){const ve=[s.toVisualColumn(oe),0];ve.length+=J,Array.prototype.splice.apply(b.colHeaders,ve)}I.shiftColumns(s.toVisualColumn(oe),J)}break;case"remove_row":const ae=ve=>{let Se=0;j(ve,O=>{let[N,W]=O;const ee=zn(N)?s.countRows()-1:Math.max(N-Se,0);if(Number.isInteger(N)&&(N=Math.max(N-Se,0)),!a.removeRow(N,W,M))return;if(I.isSelected()){const{row:te}=s.getSelectedRangeLast().highlight;te>=N&&te<=N+W-1&&u.closeEditor(!0)}const ie=s.countRows();ie===0?I.deselect():M==="ContextMenu.removeRow"?I.refresh():I.shiftRows(N,-W);const Z=b.fixedRowsTop;Z>=ee+1&&(b.fixedRowsTop-=Math.min(W,Z-ee));const K=b.fixedRowsBottom;K&&ee>=ie-K&&(b.fixedRowsBottom-=Math.min(W,K)),Se+=W})};Array.isArray(C)?ae(q(C)):ae([[C,H]]);break;case"remove_col":const Fe=ve=>{let Se=0;j(ve,O=>{let[N,W]=O;const ee=zn(N)?s.countCols()-1:Math.max(N-Se,0);let Y=s.toPhysicalColumn(ee);if(Number.isInteger(N)&&(N=Math.max(N-Se,0)),!a.removeCol(N,W,M))return;if(I.isSelected()){const{col:te}=s.getSelectedRangeLast().highlight;te>=N&&te<=N+W-1&&u.closeEditor(!0)}s.countCols()===0?I.deselect():M==="ContextMenu.removeColumn"?I.refresh():I.shiftColumns(N,-W);const K=b.fixedColumnsStart;K>=ee+1&&(b.fixedColumnsStart-=Math.min(W,K-ee)),Array.isArray(b.colHeaders)&&(typeof Y>"u"&&(Y=-1),b.colHeaders.splice(Y,W)),Se+=W})};Array.isArray(C)?Fe(q(C)):Fe([[C,H]]);break;default:throw new Error(`There is no such action "${v}"`)}s.view.render(),$||c.adjustRowsAndCols()},adjustRowsAndCols(){const v=b.minRows,C=b.minSpareRows,S=b.minCols,A=b.minSpareCols;if(v){const H=s.countRows();H<v&&a.createRow(H,v-H,{source:"auto"})}if(C){const H=s.countEmptyRows(!0);if(H<C){const M=C-H,$=Math.min(M,b.maxRows-s.countSourceRows());a.createRow(s.countRows(),$,{source:"auto"})}}{let H;(S||A)&&(H=s.countEmptyCols(!0));let M=s.countCols();if(S&&!b.columns&&M<S){const $=S-M;H+=$,a.createCol(M,$,{source:"auto"})}if(A&&!b.columns&&s.dataType==="array"&&H<A){M=s.countCols();const $=A-H,q=Math.min($,b.maxCols-M);a.createCol(M,q,{source:"auto"})}}s.view&&s.view.adjustElementsSize()},populateFromArray(v,C,S,A,H){let M,$,q,Q;const ce=[],le={},Me=[],Ce=v.row,J=v.col;if($=C.length,$===0)return!1;let oe=0,ae=0;switch(lt(S)&&(oe=S.col-J+1,ae=S.row-Ce+1),H){case"shift_down":const Fe=Cb(C),ve=Fe.length,Se=Math.max(ve,oe),O=s.getData().slice(Ce),N=Cb(O).slice(J,J+Se);for(q=0;q<Se;q+=1)if(q<ve){for(M=0,$=Fe[q].length;M<ae-$;M+=1)Fe[q].push(Fe[q][M%$]);q<N.length?Me.push(Fe[q].concat(N[q])):Me.push(Fe[q].concat(new Array(O.length).fill(null)))}else Me.push(Fe[q%ve].concat(N[q]));s.populateFromArray(Ce,J,Cb(Me));break;case"shift_right":const W=C.length,ee=Math.max(W,ae),Y=s.getData().slice(Ce).map(Ae=>Ae.slice(J));for(M=0;M<ee;M+=1)if(M<W){for(q=0,Q=C[M].length;q<oe-Q;q+=1)C[M].push(C[M][q%Q]);if(M<Y.length)for(let Ae=0;Ae<Y[M].length;Ae+=1)C[M].push(Y[M][Ae]);else C[M].push(...new Array(Y[0].length).fill(null))}else C.push(C[M%$].slice(0,ee).concat(Y[M]));s.populateFromArray(Ce,J,C);break;case"overwrite":default:le.row=v.row,le.col=v.col;let ie=0,Z=0,K=!0,te;const ne=function(Be){let ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const _t=C[Be%C.length];return ot!==null?_t[ot%_t.length]:_t},re=C.length,be=S?S.row-v.row+1:0;for(S?$=be:$=Math.max(re,be),M=0;M<$&&!(S&&le.row>S.row&&be>re||!b.allowInsertRow&&le.row>s.countRows()-1||le.row>=b.maxRows);M++){const Ae=M-ie,Be=ne(Ae).length,ot=S?S.col-v.col+1:0;if(S?Q=ot:Q=Math.max(Be,ot),le.col=v.col,te=s.getCellMeta(le.row,le.col),(A==="CopyPaste.paste"||A==="Autofill.fill")&&te.skipRowOnPaste){ie+=1,le.row+=1,$+=1;continue}for(Z=0,q=0;q<Q&&!(S&&le.col>S.col&&ot>Be||!b.allowInsertColumn&&le.col>s.countCols()-1||le.col>=b.maxCols);q++){if(te=s.getCellMeta(le.row,le.col),(A==="CopyPaste.paste"||A==="Autofill.fill")&&te.skipColumnOnPaste){Z+=1,le.col+=1,Q+=1;continue}if(te.readOnly&&A!=="UndoRedo.undo"){le.col+=1;continue}const _t=q-Z;let dt=ne(Ae,_t),Ke=s.getDataAtCell(le.row,le.col);if(dt!==null&&typeof dt=="object")if(Array.isArray(dt)&&Ke===null&&(Ke=[]),Ke===null||typeof Ke!="object")K=!1;else{const Tt=Ep(Array.isArray(Ke)?Ke:Ke[0]||Ke),Ln=Ep(Array.isArray(dt)?dt:dt[0]||dt);z1(Tt,Ln)||Array.isArray(Tt)&&Array.isArray(Ln)?dt=gr(dt):K=!1}else Ke!==null&&typeof Ke=="object"&&(K=!1);K&&ce.push([le.row,le.col,dt]),K=!0,le.col+=1}le.row+=1}s.setDataAtCell(ce,null,null,A||"populateFromArray");break}}};function P(v){const C=pY(v);ML(C)?(s.runHooks("beforeLanguageChange",C),y.language=C,s.runHooks("afterLanguageChange",C)):mY(v)}function D(v,C){const S=v==="className"?s.rootElement:s.table;if(f)ue(S,C);else{let A=[],H=[];y[v]&&(A=Array.isArray(y[v])?y[v]:ZP(y[v])),C&&(H=Array.isArray(C)?C:ZP(C));const M=XP(A,H),$=XP(H,A);M.length&&Ze(S,M),$.length&&ue(S,$)}y[v]=C}this.init=function(){l.setData(b.data),s.runHooks("beforeInit"),(fc()||OD())&&ue(s.rootElement,"mobile"),this.updateSettings(b,!0),this.view=new BTe(this),u=lI.getInstance(s,b,I),d=KPe(s),h=new zRe(s),RS(this)&&FPe(s),s.runHooks("init"),this.forceFullRender=!0,this.view.render(),f&&s.rootElement.offsetParent===null&&a9(s.rootElement,()=>{s.view._wt.wtOverlays.updateLastSpreaderSize(),s.render(),s.view.adjustElementsSize()}),typeof f=="object"&&(s.runHooks("afterChange",f[0],f[1]),f=!1),s.runHooks("afterInit")};function B(){let v=!1;return{validatorsInQueue:0,valid:!0,addValidatorToQueue(){this.validatorsInQueue+=1,v=!1},removeValidatorFormQueue(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty(){},checkIfQueueIsEmpty(){this.validatorsInQueue===0&&v===!1&&(v=!0,this.onQueueEmpty(this.valid))}}}function V(v){const C=v.replace(",",".");return isNaN(parseFloat(C))===!1?parseFloat(C):v}function z(v,C,S){if(!v.length){S();return}const A=s.getActiveEditor(),H=new B;let M=!0;H.onQueueEmpty=()=>{A&&M&&A.cancelChanges(),S()};for(let $=v.length-1;$>=0;$--){const[q,Q,,ce]=v[$],le=a.propToCol(Q);let Me;Number.isInteger(le)?Me=s.getCellMeta(q,le):Me={...Object.getPrototypeOf(b),...b},Me.type==="numeric"&&typeof ce=="string"&&L9(ce)&&(v[$][3]=V(ce)),s.getCellValidator(Me)&&(H.addValidatorToQueue(),s.validateCell(v[$][3],Me,function(Ce,J){return function(oe){if(typeof oe!="boolean")throw new Error("Validation error: result is not boolean");oe===!1&&J.allowInvalid===!1&&(M=!1,v.splice(Ce,1),J.valid=!0),H.removeValidatorFormQueue()}}($,Me),C))}H.checkIfQueueIsEmpty()}function L(v,C){for(let A=v.length-1;A>=0;A--){let H=!1;if(v[A]===null){v.splice(A,1);continue}if(!((v[A][2]===null||v[A][2]===void 0)&&(v[A][3]===null||v[A][3]===void 0))){if(b.allowInsertRow)for(;v[A][0]>s.countRows()-1;){const{delta:M}=a.createRow(void 0,void 0,{source:C});if(M===0){H=!0;break}}if(s.dataType==="array"&&(!b.columns||b.columns.length===0)&&b.allowInsertColumn)for(;a.propToCol(v[A][1])>s.countCols()-1;){const{delta:M}=a.createCol(void 0,void 0,{source:C});if(M===0){H=!0;break}}H||a.set(v[A][0],v[A][1],v[A][3])}}const S=v.length>0;if(s.forceFullRender=!0,S){c.adjustRowsAndCols(),s.runHooks("beforeChangeRender",v,C),u.closeEditor(),s.view.render(),u.prepareEditor(),s.view.adjustElementsSize(),s.runHooks("afterChange",v,C||"edit");const A=s.getActiveEditor();A&&ke(A.refreshValue)&&A.refreshValue()}else s.view.render()}this._createCellCoords=function(v,C){return s.view._wt.createCellCoords(v,C)},this._createCellRange=function(v,C,S){return s.view._wt.createCellRange(v,C,S)},this.validateCell=function(v,C,S,A){let H=s.getCellValidator(C);function M($){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)||C.hidden===!0){S($);return}const Q=C.visualCol,ce=C.visualRow,le=s.getCell(ce,Q,!0);if(le&&le.nodeName!=="TH"){const Me=s.rowIndexMapper.getRenderableFromVisualIndex(ce),Ce=s.columnIndexMapper.getRenderableFromVisualIndex(Q);s.view._wt.getSetting("cellRenderer",Me,Ce,le)}S($)}VG(H)&&(H=function($){return function(q,Q){Q($.test(q))}}(H)),cn(H)?(v=s.runHooks("beforeValidate",v,C.visualRow,C.prop,A),s._registerImmediate(()=>{H.call(C,v,$=>{s&&($=s.runHooks("afterValidate",$,v,C.visualRow,C.prop,A),C.valid=$,M($),s.runHooks("postAfterValidate",$,v,C.visualRow,C.prop,A))})})):s._registerImmediate(()=>{C.valid=!0,M(C.valid,!1)})};function k(v,C,S){return Array.isArray(v)?v:[[v,C,S]]}function F(v,C){const S=s.getActiveEditor(),A=s.runHooks("beforeChange",v,C||"edit"),H=v.filter(M=>M!==null);return A===!1||H.length===0?(S&&S.cancelChanges(),[]):H}this.setDataAtCell=function(v,C,S,A){const H=k(v,C,S),M=[];let $=A,q,Q,ce;for(q=0,Q=H.length;q<Q;q++){if(typeof H[q]!="object")throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if(typeof H[q][1]!="number")throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");H[q][1]>=this.countCols()?ce=H[q][1]:ce=a.colToProp(H[q][1]),M.push([H[q][0],ce,l.getAtCell(this.toPhysicalRow(H[q][0]),H[q][1]),H[q][2]])}!$&&typeof v=="object"&&($=C);const le=F(M,A);s.runHooks("afterSetDataAtCell",le,$),z(le,$,()=>{L(le,$)})},this.setDataAtRowProp=function(v,C,S,A){const H=k(v,C,S),M=[];let $=A,q,Q;for(q=0,Q=H.length;q<Q;q++)M.push([H[q][0],H[q][1],l.getAtCell(this.toPhysicalRow(H[q][0]),H[q][1]),H[q][2]]);!$&&typeof v=="object"&&($=C);const ce=F(M,A);s.runHooks("afterSetDataAtRowProp",ce,$),z(ce,$,()=>{L(ce,$)})},this.listen=function(){s&&!s.isListening()&&(HT.forEach(v=>{s!==v&&v.unlisten()}),LT=s.guid,s.runHooks("afterListen"))},this.unlisten=function(){this.isListening()&&(LT=null,s.runHooks("afterUnlisten"))},this.isListening=function(){return LT===s.guid},this.destroyEditor=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;u.closeEditor(v),s.view.render(),C&&I.isSelected()&&u.prepareEditor()},this.populateFromArray=function(v,C,S,A,H,M,$){if(!(typeof S=="object"&&typeof S[0]=="object"))throw new Error("populateFromArray parameter `input` must be an array of arrays");const q=typeof A=="number"?s._createCellCoords(A,H):null;return c.populateFromArray(s._createCellCoords(v,C),S,q,M,$)},this.spliceCol=function(v,C,S){for(var A=arguments.length,H=new Array(A>3?A-3:0),M=3;M<A;M++)H[M-3]=arguments[M];return a.spliceCol(v,C,S,...H)},this.spliceRow=function(v,C,S){for(var A=arguments.length,H=new Array(A>3?A-3:0),M=3;M<A;M++)H[M-3]=arguments[M];return a.spliceRow(v,C,S,...H)},this.getSelected=function(){if(I.isSelected())return vt(I.getSelectedRange(),v=>{let{from:C,to:S}=v;return[C.row,C.col,S.row,S.col]})},this.getSelectedLast=function(){const v=this.getSelected();let C;return v&&v.length>0&&(C=v[v.length-1]),C},this.getSelectedRange=function(){if(I.isSelected())return Array.from(I.getSelectedRange())},this.getSelectedRangeLast=function(){const v=this.getSelectedRange();let C;return v&&v.length>0&&(C=v[v.length-1]),C},this.emptySelectedCells=function(v){if(!I.isSelected()||this.countRows()===0||this.countCols()===0)return;const C=[];j(I.getSelectedRange(),S=>{if(S.isSingleHeader())return;const A=S.getTopStartCorner(),H=S.getBottomEndCorner();He(A.row,H.row,M=>{He(A.col,H.col,$=>{this.getCellMeta(M,$).readOnly||C.push([M,$,null])})})}),C.length>0&&this.setDataAtCell(C,v)},this.isRenderSuspended=function(){return this.renderSuspendedCounter>0},this.suspendRender=function(){this.renderSuspendedCounter+=1},this.resumeRender=function(){const v=this.renderSuspendedCounter-1;this.renderSuspendedCounter=Math.max(v,0),!this.isRenderSuspended()&&v===this.renderSuspendedCounter&&(this.renderCall?this.render():s.view.render())},this.render=function(){this.view&&(this.renderCall=!0,this.forceFullRender=!0,this.isRenderSuspended()||s.view.render())},this.batchRender=function(v){this.suspendRender();const C=v();return this.resumeRender(),C},this.isExecutionSuspended=function(){return this.executionSuspendedCounter>0},this.suspendExecution=function(){this.executionSuspendedCounter+=1,this.columnIndexMapper.suspendOperations(),this.rowIndexMapper.suspendOperations()},this.resumeExecution=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const C=this.executionSuspendedCounter-1;this.executionSuspendedCounter=Math.max(C,0),(!this.isExecutionSuspended()&&C===this.executionSuspendedCounter||v)&&(this.columnIndexMapper.resumeOperations(),this.rowIndexMapper.resumeOperations())},this.batchExecution=function(v){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.suspendExecution();const S=v();return this.resumeExecution(C),S},this.batch=function(v){this.suspendRender(),this.suspendExecution();const C=v();return this.resumeExecution(),this.resumeRender(),C},this.refreshDimensions=function(){if(!s.view)return;const{width:v,height:C}=s.view.getLastSize(),{width:S,height:A}=s.rootElement.getBoundingClientRect(),H=S!==v||A!==C;s.runHooks("beforeRefreshDimensions",{width:v,height:C},{width:S,height:A},H)!==!1&&((H||s.view._wt.wtOverlays.scrollableElement===s.rootWindow)&&(s.view.setLastSize(S,A),s.render()),s.runHooks("afterRefreshDimensions",{width:v,height:C},{width:S,height:A},H))},this.updateData=function(v,C){LW(v,S=>{a=S},S=>{a=S,s.columnIndexMapper.fitToLength(this.getInitialColumnCount()),s.rowIndexMapper.fitToLength(this.countSourceRows()),c.adjustRowsAndCols(),I.refresh()},{hotInstance:s,dataMap:a,dataSource:l,internalSource:"updateData",source:C,metaManager:m,firstRun:f})},this.loadData=function(v,C){LW(v,S=>{a=S},()=>{m.clearCellsCache(),s.initIndexMappers(),c.adjustRowsAndCols(),I.refresh(),f&&(f=[null,"loadData"])},{hotInstance:s,dataMap:a,dataSource:l,internalSource:"loadData",source:C,metaManager:m,firstRun:f})},this.getInitialColumnCount=function(){const v=b.columns;let C=0;if(Array.isArray(v))C=v.length;else if(cn(v))if(s.dataType==="array"){const S=this.countSourceCols();for(let A=0;A<S;A+=1)v(A)&&(C+=1)}else(s.dataType==="object"||s.dataType==="function")&&(C=a.colToPropCache.length);else if(ke(b.dataSchema)){const S=a.getSchema();C=Array.isArray(S)?S.length:U1(S)}else C=this.countSourceCols();return C},this.initIndexMappers=function(){this.columnIndexMapper.initToLength(this.getInitialColumnCount()),this.rowIndexMapper.initToLength(this.countSourceRows())},this.getData=function(v,C,S,A){return dn(v)?a.getAll():a.getRange(s._createCellCoords(v,C),s._createCellCoords(S,A),a.DESTINATION_RENDERER)},this.getCopyableText=function(v,C,S,A){return a.getCopyableText(s._createCellCoords(v,C),s._createCellCoords(S,A))},this.getCopyableData=function(v,C){return a.getCopyable(v,a.colToProp(C))},this.getSchema=function(){return a.getSchema()},this.updateSettings=function(v){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const S=(f?s.loadData:s.updateData).bind(this);let A=!1,H,M;if(ke(v.rows))throw new Error('The "rows" setting is no longer supported. Do you mean startRows, minRows or maxRows?');if(ke(v.cols))throw new Error('The "cols" setting is no longer supported. Do you mean startCols, minCols or maxCols?');if(ke(v.ganttChart))throw new Error('Since 8.0.0 the "ganttChart" setting is no longer supported.');for(H in v)H==="data"||(H==="language"?P(v.language):H==="className"?D("className",v.className):H==="tableClassName"&&s.table?(D("tableClassName",v.tableClassName),s.view._wt.wtOverlays.syncOverlayTableClassNames()):Ie.getSingleton().isRegistered(H)||Ie.getSingleton().isDeprecated(H)?(cn(v[H])||Array.isArray(v[H]))&&(v[H].initialHook=!0,s.addHook(H,v[H])):!C&&kn(v,H)&&(y[H]=v[H]));v.data===void 0&&b.data===void 0?S(null,"updateSettings"):v.data!==void 0?S(v.data,"updateSettings"):v.columns!==void 0&&(a.createMap(),s.initIndexMappers());const $=s.countCols(),q=b.columns;if(q&&cn(q)&&(A=!0),(v.cell!==void 0||v.cells!==void 0||v.columns!==void 0)&&m.clearCache(),$>0)for(H=0,M=0;H<$;H++){if(q){const le=A?q(H):q[M];le&&m.updateColumnMeta(M,le)}M+=1}ke(v.cell)&&ct(v.cell,le=>{s.setCellMetaObject(le.row,le.col,le)}),s.runHooks("afterCellMetaReset");let Q=s.rootElement.style.height;Q!==""&&(Q=parseInt(s.rootElement.style.height,10));let ce=v.height;if(cn(ce)&&(ce=ce()),C&&s.rootElement.getAttribute("style")&&s.rootElement.setAttribute("data-initialstyle",s.rootElement.getAttribute("style")),ce===null){const le=s.rootElement.getAttribute("data-initialstyle");le&&(le.indexOf("height")>-1||le.indexOf("overflow")>-1)?s.rootElement.setAttribute("style",le):(s.rootElement.style.height="",s.rootElement.style.overflow="")}else ce!==void 0&&(s.rootElement.style.height=isNaN(ce)?`${ce}`:`${ce}px`,s.rootElement.style.overflow="hidden");if(typeof v.width<"u"){let le=v.width;cn(le)&&(le=le()),s.rootElement.style.width=isNaN(le)?`${le}`:`${le}px`}C||(s.view&&(s.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked(),s.view._wt.exportSettingsAsClassNames()),s.runHooks("afterUpdateSettings",v)),c.adjustRowsAndCols(),s.view&&!f&&(s.forceFullRender=!0,s.view.render(),s.view._wt.wtOverlays.adjustElementsSize()),!C&&s.view&&(Q===""||ce===""||ce===void 0)&&Q!==ce&&s.view._wt.wtOverlays.updateMainScrollableElements()},this.getValue=function(){const v=s.getSelectedLast();if(b.getValue){if(cn(b.getValue))return b.getValue.call(s);if(v)return s.getData()[v[0][0]][b.getValue]}else if(v)return s.getDataAtCell(v[0],v[1])},this.getSettings=function(){return b},this.clear=function(){this.selectAll(),this.emptySelectedCells()},this.alter=function(v,C,S,A,H){c.alter(v,C,S,A,H)},this.getCell=function(v,C){let S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,A=C,H=v;if(C>=0){if(this.columnIndexMapper.isHidden(this.toPhysicalColumn(C)))return null;A=this.columnIndexMapper.getRenderableFromVisualIndex(C)}if(v>=0){if(this.rowIndexMapper.isHidden(this.toPhysicalRow(v)))return null;H=this.rowIndexMapper.getRenderableFromVisualIndex(v)}return H===null||A===null||H===void 0||A===void 0?null:s.view.getCellAtCoords(s._createCellCoords(H,A),S)},this.getCoords=function(v){const C=this.view._wt.wtTable.getCoords(v);if(C===null)return null;const{row:S,col:A}=C;let H=S,M=A;return S>=0&&(H=this.rowIndexMapper.getVisualFromRenderableIndex(S)),A>=0&&(M=this.columnIndexMapper.getVisualFromRenderableIndex(A)),s._createCellCoords(H,M)},this.colToProp=function(v){return a.colToProp(v)},this.propToCol=function(v){return a.propToCol(v)},this.toVisualRow=v=>this.rowIndexMapper.getVisualFromPhysicalIndex(v),this.toVisualColumn=v=>this.columnIndexMapper.getVisualFromPhysicalIndex(v),this.toPhysicalRow=v=>this.rowIndexMapper.getPhysicalFromVisualIndex(v),this.toPhysicalColumn=v=>this.columnIndexMapper.getPhysicalFromVisualIndex(v),this.getDataAtCell=function(v,C){return a.get(v,a.colToProp(C))},this.getDataAtRowProp=function(v,C){return a.get(v,C)},this.getDataAtCol=function(v){const C=[],S=a.getRange(s._createCellCoords(0,v),s._createCellCoords(b.data.length-1,v),a.DESTINATION_RENDERER);for(let A=0;A<S.length;A+=1)for(let H=0;H<S[A].length;H+=1)C.push(S[A][H]);return C},this.getDataAtProp=function(v){const C=[],S=a.getRange(s._createCellCoords(0,a.propToCol(v)),s._createCellCoords(b.data.length-1,a.propToCol(v)),a.DESTINATION_RENDERER);for(let A=0;A<S.length;A+=1)for(let H=0;H<S[A].length;H+=1)C.push(S[A][H]);return C},this.getSourceData=function(v,C,S,A){let H;return v===void 0?H=l.getData():H=l.getByRange(s._createCellCoords(v,C),s._createCellCoords(S,A)),H},this.getSourceDataArray=function(v,C,S,A){let H;return v===void 0?H=l.getData(!0):H=l.getByRange(s._createCellCoords(v,C),s._createCellCoords(S,A),!0),H},this.getSourceDataAtCol=function(v){return l.getAtColumn(v)},this.setSourceDataAtCell=function(v,C,S,A){const H=k(v,C,S),M=this.hasHook("afterSetSourceDataAtCell"),$=[];M&&j(H,Q=>{let[ce,le,Me]=Q;$.push([ce,le,l.getAtCell(ce,le),Me])}),j(H,Q=>{let[ce,le,Me]=Q;l.setAtCell(ce,le,Me)}),M&&this.runHooks("afterSetSourceDataAtCell",$,A),this.render();const q=s.getActiveEditor();q&&ke(q.refreshValue)&&q.refreshValue()},this.getSourceDataAtRow=function(v){return l.getAtRow(v)},this.getSourceDataAtCell=function(v,C){return l.getAtCell(v,C)},this.getDataAtRow=function(v){return a.getRange(s._createCellCoords(v,0),s._createCellCoords(v,this.countCols()-1),a.DESTINATION_RENDERER)[0]||[]},this.getDataType=function(v,C,S,A){const H=v===void 0?[0,0,this.countRows(),this.countCols()]:[v,C,S,A],[M,$]=H;let[,,q,Q]=H,ce=null,le=null;q===void 0&&(q=M),Q===void 0&&(Q=$);let Me="mixed";return He(Math.max(Math.min(M,q),0),Math.max(M,q),Ce=>{let J=!0;return He(Math.max(Math.min($,Q),0),Math.max($,Q),oe=>(le=this.getCellMeta(Ce,oe).type,ce?J=ce===le:ce=le,J)),Me=J?le:"mixed",J}),Me},this.removeCellMeta=function(v,C,S){const[A,H]=[this.toPhysicalRow(v),this.toPhysicalColumn(C)];let M=m.getCellMetaKeyValue(A,H,S);s.runHooks("beforeRemoveCellMeta",v,C,S,M)!==!1&&(m.removeCellMeta(A,H,S),s.runHooks("afterRemoveCellMeta",v,C,S,M)),M=null},this.spliceCellsMeta=function(v){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;for(var S=arguments.length,A=new Array(S>2?S-2:0),H=2;H<S;H++)A[H-2]=arguments[H];if(A.length>0&&!Array.isArray(A[0]))throw new Error("The 3rd argument (cellMetaRows) has to be passed as an array of cell meta objects array.");C>0&&m.removeRow(this.toPhysicalRow(v),C),A.length>0&&j(A.reverse(),M=>{m.createRow(this.toPhysicalRow(v)),j(M,($,q)=>this.setCellMetaObject(v,q,$))}),s.render()},this.setCellMetaObject=function(v,C,S){typeof S=="object"&&ct(S,(A,H)=>{this.setCellMeta(v,C,H,A)})},this.setCellMeta=function(v,C,S,A){if(s.runHooks("beforeSetCellMeta",v,C,S,A)===!1)return;let M=v,$=C;v<this.countRows()&&(M=this.toPhysicalRow(v)),C<this.countCols()&&($=this.toPhysicalColumn(C)),m.setCellMeta(M,$,S,A),s.runHooks("afterSetCellMeta",v,C,S,A)},this.getCellsMeta=function(){return m.getCellsMeta()},this.getCellMeta=function(v,C){let S=this.toPhysicalRow(v),A=this.toPhysicalColumn(C);return S===null&&(S=v),A===null&&(A=C),m.getCellMeta(S,A,{visualRow:v,visualColumn:C})},this.getColumnMeta=function(v){return m.getColumnMeta(this.toPhysicalColumn(v))},this.getCellMetaAtRow=function(v){return m.getCellsMetaAtRow(v)},this.isColumnModificationAllowed=function(){return!(s.dataType==="object"||b.columns)},this.getCellRenderer=function(v,C){const S=typeof v=="number"?s.getCellMeta(v,C).renderer:v.renderer;return typeof S=="string"?Y_(S):dn(S)?Y_("text"):S},this.getCellEditor=function(v,C){const S=typeof v=="number"?s.getCellMeta(v,C).editor:v.editor;return typeof S=="string"?G_(S):dn(S)?G_("text"):S},this.getCellValidator=function(v,C){const S=typeof v=="number"?s.getCellMeta(v,C).validator:v.validator;return typeof S=="string"?WD(S):S},this.validateCells=function(v){this._validateCells(v)},this.validateRows=function(v,C){if(!Array.isArray(v))throw new Error("validateRows parameter `rows` must be an array");this._validateCells(C,v)},this.validateColumns=function(v,C){if(!Array.isArray(v))throw new Error("validateColumns parameter `columns` must be an array");this._validateCells(C,void 0,v)},this._validateCells=function(v,C,S){const A=new B;v&&(A.onQueueEmpty=v);let H=s.countRows()-1;for(;H>=0;){if(C!==void 0&&C.indexOf(H)===-1){H-=1;continue}let M=s.countCols()-1;for(;M>=0;){if(S!==void 0&&S.indexOf(M)===-1){M-=1;continue}A.addValidatorToQueue(),s.validateCell(s.getDataAtCell(H,M),s.getCellMeta(H,M),$=>{if(typeof $!="boolean")throw new Error("Validation error: result is not boolean");$===!1&&(A.valid=!1),A.removeValidatorFormQueue()},"validateCells"),M-=1}H-=1}A.checkIfQueueIsEmpty()},this.getRowHeader=function(v){let C=b.rowHeaders,S=v;return S!==void 0&&(S=s.runHooks("modifyRowHeader",S)),S===void 0?(C=[],He(s.countRows()-1,A=>{C.push(s.getRowHeader(A))})):Array.isArray(C)&&C[S]!==void 0?C=C[S]:cn(C)?C=C(S):C&&typeof C!="string"&&typeof C!="number"&&(C=S+1),C},this.hasRowHeaders=function(){return!!b.rowHeaders},this.hasColHeaders=function(){if(b.colHeaders!==void 0&&b.colHeaders!==null)return!!b.colHeaders;for(let v=0,C=s.countCols();v<C;v++)if(s.getColHeader(v))return!0;return!1},this.getColHeader=function(v){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;const S=s.runHooks("modifyColHeader",v);if(S===void 0){const q=[],Q=s.countCols();for(let ce=0;ce<Q;ce++)q.push(s.getColHeader(ce));return q}let A=b.colHeaders;const H=function(q){const Q=[],ce=s.countCols();let le=0;for(;le<ce;le++)cn(b.columns)&&b.columns(le)&&Q.push(le);return Q[q]},M=s.toPhysicalColumn(S),$=H(M);return b.colHeaders===!1?A=null:b.columns&&cn(b.columns)&&b.columns($)&&b.columns($).title?A=b.columns($).title:b.columns&&b.columns[M]&&b.columns[M].title?A=b.columns[M].title:Array.isArray(b.colHeaders)&&b.colHeaders[M]!==void 0?A=b.colHeaders[M]:cn(b.colHeaders)?A=b.colHeaders(M):b.colHeaders&&typeof b.colHeaders!="string"&&typeof b.colHeaders!="number"&&(A=Q1(S)),A=s.runHooks("modifyColumnHeaderValue",A,v,C),A},this._getColWidthFromSettings=function(v){let C;if(v>=0&&(C=s.getCellMeta(0,v).width),(C===void 0||C===b.width)&&(C=b.colWidths),C!=null){switch(typeof C){case"object":C=C[v];break;case"function":C=C(v);break}typeof C=="string"&&(C=parseInt(C,10))}return C},this.getColWidth=function(v){let C=s._getColWidthFromSettings(v);return C=s.runHooks("modifyColWidth",C,v),C===void 0&&(C=q1),C},this._getRowHeightFromSettings=function(v){let C=b.rowHeights;if(C!=null){switch(typeof C){case"object":C=C[v];break;case"function":C=C(v);break}typeof C=="string"&&(C=parseInt(C,10))}return C},this.getRowHeight=function(v){let C=s._getRowHeightFromSettings(v);return C=s.runHooks("modifyRowHeight",C,v),C},this.countSourceRows=function(){return l.countRows()},this.countSourceCols=function(){return l.countFirstRowKeys()},this.countRows=function(){return a.getLength()},this.countCols=function(){const v=b.maxCols,C=this.columnIndexMapper.getNotTrimmedIndexesLength();return Math.min(v,C)},this.countRenderedRows=function(){return s.view._wt.drawn?s.view._wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return s.view._wt.drawn?s.view._wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return s.view._wt.drawn?s.view._wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return s.view._wt.drawn?s.view._wt.wtTable.getVisibleColumnsCount():-1},this.countRowHeaders=function(){return this.view.getRowHeadersCount()},this.countColHeaders=function(){return this.view.getColumnHeadersCount()},this.countEmptyRows=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,C=0;return hI(s.countRows()-1,S=>{if(s.isEmptyRow(S))C+=1;else if(v===!0)return!1}),C},this.countEmptyCols=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,C=0;return hI(s.countCols()-1,S=>{if(s.isEmptyCol(S))C+=1;else if(v===!0)return!1}),C},this.isEmptyRow=function(v){return b.isEmptyRow.call(s,v)},this.isEmptyCol=function(v){return b.isEmptyCol.call(s,v)},this.selectCell=function(v,C,S,A){let H=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,M=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;return dn(v)||dn(C)?!1:this.selectCells([[v,C,S,A]],H,M)},this.selectCells=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[[]],C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;C===!1&&d.suspend();const A=I.selectCells(v);return A&&S&&s.listen(),d.resume(),A},this.selectColumns=function(v){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v,S=arguments.length>2?arguments[2]:void 0;return I.selectColumns(v,C,S)},this.selectRows=function(v){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v,S=arguments.length>2?arguments[2]:void 0;return I.selectRows(v,C,S)},this.deselectCell=function(){I.deselect()},this.selectAll=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v,S=arguments.length>2?arguments[2]:void 0;d.skipNextScrollCycle(),I.selectAll(v,C,S)};const G=(v,C)=>v.getNearestNotHiddenIndex(C,1,!0);this.scrollViewportTo=function(v){var C;if(typeof v=="number"){var S;v={row:arguments[0],col:arguments[1],verticalSnap:arguments[2]?"bottom":"top",horizontalSnap:arguments[3]?"end":"start",considerHiddenIndexes:(S=arguments[4])!==null&&S!==void 0?S:!0}}const{row:A,col:H,verticalSnap:M,horizontalSnap:$,considerHiddenIndexes:q}=(C=v)!==null&&C!==void 0?C:{};let Q,ce,le,Me;M!==void 0&&(Q=M==="top",ce=!Q),$!==void 0&&(le=$==="start",Me=!le);let Ce=A,J=H;if(q===void 0||q){const Fe=Number.isInteger(A)&&A>=0,ve=Number.isInteger(H)&&H>=0,Se=Fe?G(this.rowIndexMapper,A):void 0,O=ve?G(this.columnIndexMapper,H):void 0;if(Se===null||O===null)return!1;Ce=Fe?s.rowIndexMapper.getRenderableFromVisualIndex(Se):A,J=ve?s.columnIndexMapper.getRenderableFromVisualIndex(O):H}const oe=Number.isInteger(Ce),ae=Number.isInteger(J);return oe&&Ce>=0&&ae&&J>=0?s.view.scrollViewport(s._createCellCoords(Ce,J),Q,Me,ce,le):oe&&Ce>=0&&(ae&&J<0||!ae)?s.view.scrollViewportVertically(Ce,Q,ce):ae&&J>=0&&(oe&&Ce<0||!oe)?s.view.scrollViewportHorizontally(J,Me,le):!1},this.scrollToFocusedCell=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};if(!this.selection.isSelected())return;this.addHookOnce("afterScroll",v);const{highlight:C}=this.getSelectedRangeLast();this.scrollViewportTo(C.toObject())?this.view.render():(this.removeHook("afterScroll",v),this._registerImmediate(()=>v()))},this.destroy=function(){if(s._clearTimeouts(),s._clearImmediates(),s.view&&s.view.destroy(),l&&l.destroy(),l=null,this.getShortcutManager().destroy(),m.clearCache(),HT.delete(this.guid),RS(s)){const v=this.rootDocument.querySelector(".hot-display-license-info");v&&v.parentNode.removeChild(v)}ia(s.rootElement),o.destroy(),u&&u.destroy(),s.batchExecution(()=>{s.rowIndexMapper.unregisterAll(),s.columnIndexMapper.unregisterAll(),w.getItems().forEach(v=>{let[,C]=v;C.destroy()}),w.clear(),s.runHooks("afterDestroy")},!0),Ie.getSingleton().destroy(s),ct(s,(v,C,S)=>{cn(v)?S[C]=U(C):C!=="guid"&&(S[C]=null)}),s.isDestroyed=!0,a&&a.destroy(),a=null,c=null,I=null,u=null,s=null};function U(v){return()=>{throw new Error(`The "${v}" method cannot be called because this Handsontable instance has been destroyed`)}}this.getActiveEditor=function(){return u.getActiveEditor()},this.getFirstRenderedVisibleRow=function(){return s.view.getFirstRenderedVisibleRow()},this.getLastRenderedVisibleRow=function(){return s.view.getLastRenderedVisibleRow()},this.getFirstRenderedVisibleColumn=function(){return s.view.getFirstRenderedVisibleColumn()},this.getLastRenderedVisibleColumn=function(){return s.view.getLastRenderedVisibleColumn()},this.getFirstFullyVisibleRow=function(){return s.view.getFirstFullyVisibleRow()},this.getLastFullyVisibleRow=function(){return s.view.getLastFullyVisibleRow()},this.getFirstFullyVisibleColumn=function(){return s.view.getFirstFullyVisibleColumn()},this.getLastFullyVisibleColumn=function(){return s.view.getLastFullyVisibleColumn()},this.getFirstPartiallyVisibleRow=function(){return s.view.getFirstPartiallyVisibleRow()},this.getLastPartiallyVisibleRow=function(){return s.view.getLastPartiallyVisibleRow()},this.getFirstPartiallyVisibleColumn=function(){return s.view.getFirstPartiallyVisibleColumn()},this.getLastPartiallyVisibleColumn=function(){return s.view.getLastPartiallyVisibleColumn()},this.getPlugin=function(v){const C=fr(v);return C==="UndoRedo"?this.undoRedo:w.getItem(C)},this.getPluginName=function(v){return v===this.undoRedo?this.undoRedo.constructor.PLUGIN_KEY:w.getId(v)},this.getInstance=function(){return s},this.addHook=function(v,C,S){Ie.getSingleton().add(v,C,s,S)},this.hasHook=function(v){return Ie.getSingleton().has(v,s)||Ie.getSingleton().has(v)},this.addHookOnce=function(v,C,S){Ie.getSingleton().once(v,C,s,S)},this.removeHook=function(v,C){Ie.getSingleton().remove(v,C,s)},this.runHooks=function(v,C,S,A,H,M,$){return Ie.getSingleton().run(s,v,C,S,A,H,M,$)},this.getTranslatedPhrase=function(v,C){return SY(b.language,v,C)},this.toHTML=()=>cI(this),this.toTableElement=()=>{const v=this.rootDocument.createElement("div");return v.insertAdjacentHTML("afterbegin",cI(this)),v.firstElementChild},this.timeouts=[],this._registerTimeout=function(v){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=v;typeof S=="function"&&(S=setTimeout(S,C)),this.timeouts.push(S)},this._clearTimeouts=function(){j(this.timeouts,v=>{clearTimeout(v)})},this.immediates=[],this._registerImmediate=function(v){this.immediates.push(setImmediate(v))},this._clearImmediates=function(){j(this.immediates,v=>{clearImmediate(v)})},this._getEditorManager=function(){return u},this.isRtl=function(){return s.rootWindow.getComputedStyle(s.rootElement).direction==="rtl"},this.isLtr=function(){return!s.isRtl()},this.getDirectionFactor=function(){return s.isLtr()?1:-1};const se=eIe({handleEvent(){return s.isListening()},beforeKeyDown:v=>this.runHooks("beforeKeyDown",v),afterKeyDown:v=>{this.isDestroyed||s.runHooks("afterDocumentKeyDown",v)},ownerWindow:this.rootWindow});this.addHook("beforeOnCellMouseDown",v=>{v.ctrlKey===!1&&v.metaKey===!1&&se.releasePressedKeys()}),this.getShortcutManager=function(){return se},this.getFocusManager=function(){return h},VD().forEach(v=>{const C=dy(v);w.addItem(v,new C(this))}),HPe(s),se.setActiveContextName("grid"),Ie.getSingleton().run(s,"construct")}function WW(n,e,t){n.addEventListener(e,t,!1)}function jW(n,e,t){n.removeEventListener(e,t,!1)}function zW(n){return n.ownerDocument.defaultView.getComputedStyle(n)}function tIe(n){const e={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},t=n.body,i=n.createTextNode(""),r=n.createElement("span");let s;function o(){i.textContent=s.value,r.style.position="absolute",r.style.fontSize=zW(s).fontSize,r.style.fontFamily=zW(s).fontFamily,r.style.whiteSpace="pre",t.appendChild(r);const u=r.clientWidth+2;t.removeChild(r);const h=s.style;h.height=`${e.minHeight}px`,e.minWidth>u?h.width=`${e.minWidth}px`:u>e.maxWidth?h.width=`${e.maxWidth}px`:h.width=`${u}px`;const d=s.scrollHeight?s.scrollHeight-1:0;e.minHeight>d?h.height=`${e.minHeight}px`:e.maxHeight<d?(h.height=`${e.maxHeight}px`,h.overflowY="visible"):h.height=`${d}px`}function a(){n.defaultView.setTimeout(o,0)}function l(u){if(u&&u.minHeight)if(u.minHeight==="inherit")e.minHeight=s.clientHeight;else{const h=parseInt(u.minHeight,10);isNaN(h)||(e.minHeight=h)}if(u&&u.maxHeight)if(u.maxHeight==="inherit")e.maxHeight=s.clientHeight;else{const h=parseInt(u.maxHeight,10);isNaN(h)||(e.maxHeight=h)}if(u&&u.minWidth)if(u.minWidth==="inherit")e.minWidth=s.clientWidth;else{const h=parseInt(u.minWidth,10);isNaN(h)||(e.minWidth=h)}if(u&&u.maxWidth)if(u.maxWidth==="inherit")e.maxWidth=s.clientWidth;else{const h=parseInt(u.maxWidth,10);isNaN(h)||(e.maxWidth=h)}r.firstChild||(r.className="autoResize",r.style.display="inline-block",r.appendChild(i))}function c(u,h){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;s=u,l(h),s.nodeName==="TEXTAREA"&&(s.style.resize="none",s.style.height=`${e.minHeight}px`,s.style.minWidth=`${e.minWidth}px`,s.style.maxWidth=`${e.maxWidth}px`,s.style.overflowY="hidden"),d&&(WW(s,"input",o),WW(s,"keydown",a)),o()}return{init:c,resize:o,unObserve(){jW(s,"input",o),jW(s,"keydown",a)}}}function UW(n,e){const t=_D(e),i=e.value.split(`
`);let r=t,s=0;for(let o=0;o<i.length;o++){const a=i[o];o!==0&&(s+=i[o-1].length+1);const l=s+a.length;if(n==="home"?r=s:n==="end"&&(r=l),t<=l)break}ly(e,r)}function Ah(n,e,t){return(e=nIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nIe(n){var e=iIe(n,"string");return typeof e=="symbol"?e:e+""}function iIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const rIe="ht_editor_visible",Z0="ht_editor_hidden",GW="textEditor",sIe="text";class Pf extends em{static get EDITOR_TYPE(){return sIe}constructor(e){super(e),Ah(this,"eventManager",new co(this)),Ah(this,"autoResize",tIe(this.hot.rootDocument)),Ah(this,"TEXTAREA",void 0),Ah(this,"textareaStyle",void 0),Ah(this,"TEXTAREA_PARENT",void 0),Ah(this,"textareaParentStyle",void 0),Ah(this,"layerClass",void 0),this.eventManager=new co(this),this.createElements(),this.bindEvents(),this.hot.addHookOnce("afterDestroy",()=>this.destroy())}getValue(){return this.TEXTAREA.value}setValue(e){this.TEXTAREA.value=e}open(){this.refreshDimensions(),this.showEditableElement(),this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}close(){this.autoResize.unObserve(),XG(this.hot.rootDocument.activeElement,this.hot.rootElement)&&this.hot.listen(),this.hideEditableElement(),this.unregisterShortcuts()}prepare(e,t,i,r,s,o){const a=this.state;if(super.prepare(e,t,i,r,s,o),!o.readOnly){this.refreshDimensions(!0);const{allowInvalid:l}=o;l&&!this.isOpened()&&(this.TEXTAREA.value=""),a!==qn.FINISHED&&!this.isOpened()&&this.hideEditableElement()}}beginEditing(e,t){this.state===qn.VIRGIN&&(this.TEXTAREA.value="",super.beginEditing(e,t))}focus(){this.TEXTAREA.select(),ly(this.TEXTAREA,this.TEXTAREA.value.length)}createElements(){const{rootDocument:e}=this.hot;this.TEXTAREA=e.createElement("TEXTAREA"),ze(this.TEXTAREA,[["data-hot-input",""],Xp(-1)]),ue(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.textareaStyle.overflowY="visible",this.TEXTAREA_PARENT=e.createElement("DIV"),ue(this.TEXTAREA_PARENT,"handsontableInputHolder"),Ue(this.TEXTAREA_PARENT,this.layerClass)&&Ze(this.TEXTAREA_PARENT,this.layerClass),ue(this.TEXTAREA_PARENT,Z0),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.hot.rootElement.appendChild(this.TEXTAREA_PARENT)}hideEditableElement(){S9()&&(this.textareaStyle.textIndent="-99999px"),this.textareaStyle.overflowY="visible",this.textareaParentStyle.opacity="0",this.textareaParentStyle.height="1px",Ze(this.TEXTAREA_PARENT,this.layerClass),ue(this.TEXTAREA_PARENT,Z0)}showEditableElement(){this.textareaParentStyle.height="",this.textareaParentStyle.overflow="",this.textareaParentStyle.position="",this.textareaParentStyle[this.hot.isRtl()?"left":"right"]="auto",this.textareaParentStyle.opacity="1",this.textareaStyle.textIndent="";const e=this.TEXTAREA_PARENT.childNodes;let t=!1;He(e.length-1,i=>{const r=e[i];if(Ue(r,"handsontableEditor"))return t=!0,!1}),Ue(this.TEXTAREA_PARENT,Z0)&&Ze(this.TEXTAREA_PARENT,Z0),t?(this.layerClass=rIe,ue(this.TEXTAREA_PARENT,this.layerClass)):(this.layerClass=this.getEditedCellsLayerClass(),ue(this.TEXTAREA_PARENT,this.layerClass))}refreshValue(){const e=this.hot.toPhysicalRow(this.row),t=this.hot.getSourceDataAtCell(e,this.col);this.originalValue=t,this.setValue(t),this.refreshDimensions()}refreshDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.state!==qn.EDITING&&!e)return;if(this.TD=this.getEditedCell(),!this.TD){e||this.close();return}const{top:t,start:i,width:r,maxWidth:s,height:o,maxHeight:a}=this.getEditedCellRect();this.textareaParentStyle.top=`${t}px`,this.textareaParentStyle[this.hot.isRtl()?"right":"left"]=`${i}px`,this.showEditableElement();const l=cl(this.TD,this.hot.rootWindow);this.TEXTAREA.style.fontSize=l.fontSize,this.TEXTAREA.style.fontFamily=l.fontFamily,this.TEXTAREA.style.backgroundColor=this.TD.style.backgroundColor;const c=cl(this.TEXTAREA),u=parseInt(c.paddingLeft,10)+parseInt(c.paddingRight,10),h=parseInt(c.paddingTop,10)+parseInt(c.paddingBottom,10),d=r-u,f=o-h,g=s-u,p=a-h;this.autoResize.init(this.TEXTAREA,{minWidth:Math.min(d,g),minHeight:Math.min(f,p),maxWidth:g,maxHeight:p},!0)}bindEvents(){ID()&&this.eventManager.addEventListener(this.TEXTAREA,"focusout",()=>this.finishEditing(!1)),this.addHook("afterScrollHorizontally",()=>this.refreshDimensions()),this.addHook("afterScrollVertically",()=>this.refreshDimensions()),this.addHook("afterColumnResize",()=>{this.refreshDimensions(),this.state===qn.EDITING&&this.focus()}),this.addHook("afterRowResize",()=>{this.refreshDimensions(),this.state===qn.EDITING&&this.focus()})}allowKeyEventPropagation(){}destroy(){this.eventManager.destroy(),this.clearHooks()}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor"),i={runOnlyIf:()=>ke(this.hot.getSelected()),group:GW},r=()=>{this.hot.rootDocument.execCommand("insertText",!1,`
`)};t.addShortcuts([{keys:[["Control","Enter"]],callback:()=>(r(),!1),runOnlyIf:s=>!this.hot.selection.isMultiple()&&!s.altKey},{keys:[["Meta","Enter"]],callback:()=>(r(),!1),runOnlyIf:()=>!this.hot.selection.isMultiple()},{keys:[["Alt","Enter"]],callback:()=>(r(),!1)},{keys:[["Home"]],callback:(s,o)=>{let[a]=o;UW(a,this.TEXTAREA)}},{keys:[["End"]],callback:(s,o)=>{let[a]=o;UW(a,this.TEXTAREA)}}],i)}unregisterShortcuts(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(GW)}}const oIe="base";function vy(n,e,t,i,r,s,o){const a=o.ariaTags,l=[],c=[],u=[],h=[];o.className&&ue(e,o.className),o.readOnly?(l.push(o.readOnlyCellClassName),a&&h.push(IV())):a&&u.push(IV()[0]),o.valid===!1&&o.invalidCellClassName?(l.push(o.invalidCellClassName),a&&h.push(OV())):(c.push(o.invalidCellClassName),a&&u.push(OV()[0])),o.wordWrap===!1&&o.noWordWrapClassName&&l.push(o.noWordWrapClassName),!s&&o.placeholder&&l.push(o.placeholderCellClassName),Ze(e,c),ue(e,l),Tf(e,u),ze(e,h)}vy.RENDERER_TYPE=oIe;const aIe="text";function Wc(n,e,t,i,r,s,o){vy.apply(this,[n,e,t,i,r,s,o]);let a=s;if(!a&&o.placeholder&&(a=o.placeholder),a=jn(a),o.trimWhitespace&&(a=a.trim()),o.rendererTemplate){ia(e);const l=n.rootDocument.createElement("TEMPLATE");l.setAttribute("bind","{{}}"),l.innerHTML=o.rendererTemplate,HTMLTemplateElement.decorate(l),l.model=n.getSourceDataAtRow(t),e.appendChild(l)}else Yu(e,a)}Wc.RENDERER_TYPE=aIe;const lIe="text",HY={CELL_TYPE:lIe,editor:Pf,renderer:Wc};Ws(HY);Qe.editors={BaseEditor:em};function Qe(n,e){const t=new LY(n,e||{},sN);return t.init(),t}Qe.Core=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new LY(n,e,sN)};Qe.DefaultSettings=AY();Qe.hooks=Ie.getSingleton();Qe.CellCoords=sf;Qe.CellRange=fy;Qe.packageName="handsontable";Qe.buildDate="17/10/2024 09:16:16";Qe.version="14.6.1";Qe.languages={dictionaryKeys:RMe,getLanguageDictionary:CY,getLanguagesDictionaries:AMe,registerLanguageDictionary:yY,getTranslatedPhrase:SY};const YW="handsontableEditor",cIe="handsontable";class IL extends Pf{static get EDITOR_TYPE(){return cIe}open(){super.open(),this.htEditor&&this.htEditor.destroy(),this.htContainer.style.display==="none"&&(this.htContainer.style.display=""),this.htEditor=new this.hot.constructor(this.htContainer,this.htOptions),this.htEditor.init(),this.htEditor.rootElement.style.display="",this.cellProperties.strict?this.htEditor.selectCell(0,0):this.htEditor.deselectCell(),ly(this.TEXTAREA,0,this.TEXTAREA.value.length),this.refreshDimensions()}close(){this.htEditor&&(this.htEditor.rootElement.style.display="none"),this.removeHooksByKey("beforeKeyDown"),super.close()}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o);const a=this,l={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,autoWrapCol:!1,autoWrapRow:!1,ariaTags:!1,afterOnCellMouseDown(c,u){const h=this.getSourceData(u.row,u.col);h!==void 0&&a.setValue(h),a.hot.destroyEditor()},preventWheel:!0,layoutDirection:this.hot.isRtl()?"rtl":"ltr"};this.cellProperties.handsontable&&li(l,o.handsontable),this.htOptions=l}beginEditing(e,t){const i=this.hot.getSettings().onBeginEditing;i&&i()===!1||super.beginEditing(e,t)}createElements(){super.createElements();const e=this.hot.rootDocument.createElement("DIV");e.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(e),this.htContainer=e,this.assignHooks()}finishEditing(e,t,i){if(this.htEditor&&this.htEditor.isListening()&&this.hot.listen(),this.htEditor&&this.htEditor.getSelectedLast()){const r=this.htEditor.getValue();r!==void 0&&this.setValue(r)}super.finishEditing(e,t,i)}assignHooks(){this.hot.addHook("afterDestroy",()=>{this.htEditor&&this.htEditor.destroy()})}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor");super.registerShortcuts();const i={group:YW,relativeToGroup:ch,position:"before"},r=(s,o)=>{const a=this.htEditor;if(s!==void 0&&(s<0||a.flipped&&s>a.countRows()-1?a.deselectCell():a.selectCell(s,0),a.getData().length))return o.preventDefault(),mo(o),this.hot.listen(),this.TEXTAREA.focus(),!1};t.addShortcuts([{keys:[["ArrowUp"]],callback:s=>{const o=this.htEditor;let a,l;return!o.getSelectedLast()&&o.flipped?a=o.countRows()-1:o.getSelectedLast()&&(o.flipped?(l=o.getSelectedLast()[0],a=Math.max(0,l-1)):(l=o.getSelectedLast()[0],a=l-1)),r(a,s)},preventDefault:!1},{keys:[["ArrowDown"]],callback:s=>{const o=this.htEditor;let a,l;if(!o.getSelectedLast()&&!o.flipped)a=0;else if(o.getSelectedLast()){if(o.flipped)a=o.getSelectedLast()[0]+1;else if(!o.flipped){const c=o.countRows()-1;l=o.getSelectedLast()[0],a=Math.min(c,l+1)}}return r(a,s)},preventDefault:!1}],i)}unregisterShortcuts(){super.unregisterShortcuts(),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(YW)}}function uIe(n,e,t){hIe(n,e),e.set(n,t)}function hIe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Q0(n,e,t){return(e=dIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dIe(n){var e=fIe(n,"string");return typeof e=="symbol"?e:e+""}function fIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KW(n,e){return n.get(gIe(n,e))}function gIe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const pIe="autocomplete";var $T=new WeakMap;class OL extends IL{constructor(){super(...arguments),Q0(this,"query",null),Q0(this,"strippedChoices",[]),Q0(this,"rawChoices",[]),uIe(this,$T,this.hot.guid.slice(0,9)),Q0(this,"sortByRelevance",function(e,t,i){const r=[],s=[],o=e.length;let a=t.length,l,c,u,h;if(o===0){for(u=0;u<a;u++)s.push(u);return s}for(u=0;u<a;u++){if(c=JP(jn(t[u])),i)h=c.indexOf(e);else{const d=this.cellProperties.locale;h=c.toLocaleLowerCase(d).indexOf(e.toLocaleLowerCase(d))}h!==-1&&(l=c.length-h-o,r.push({baseIndex:u,index:h,charsLeft:l,value:c}))}for(r.sort((d,f)=>{if(f.index===-1)return-1;if(d.index===-1)return 1;if(d.index<f.index)return-1;if(f.index<d.index)return 1;if(d.index===f.index){if(d.charsLeft<f.charsLeft)return-1;if(d.charsLeft>f.charsLeft)return 1}return 0}),u=0,a=r.length;u<a;u++)s.push(r[u].baseIndex);return s})}static get EDITOR_TYPE(){return pIe}getValue(){const e=this.rawChoices.find(t=>this.stripValueIfNeeded(t)===this.TEXTAREA.value);return ke(e)?e:this.TEXTAREA.value}createElements(){super.createElements(),ue(this.htContainer,"autocompleteEditor"),ue(this.htContainer,this.hot.rootWindow.navigator.platform.indexOf("Mac")===-1?"":"htMacScroll"),this.hot.getSettings().ariaTags&&ze(this.TEXTAREA,[l_e(),i_e(),UG("listbox"),d_e()])}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o),this.hot.getSettings().ariaTags&&ze(this.TEXTAREA,[no("false"),f_e(`${KW($T,this)}-listbox-${e}-${t}`)])}open(){super.open();const e=this.cellProperties.trimDropdown===void 0?!0:this.cellProperties.trimDropdown,t=this.hot.getSettings().ariaTags,i=Array.isArray(this.cellProperties.source)?this.cellProperties.source:null,r=i==null?void 0:i.length,{row:s,col:o}=this;this.showEditableElement(),this.focus();let a=Ai();a===0&&bw()&&(a+=15),this.addHook("beforeKeyDown",l=>this.onBeforeKeyDown(l)),this.htEditor.updateSettings({colWidths:e?[fn(this.TEXTAREA)-2]:void 0,width:e?fn(this.TEXTAREA)+a:void 0,autoColumnSize:!0,renderer:(l,c,u,h,d,f,g)=>{Wc(l,c,u,h,d,f,g);const{filteringCaseSensitive:p,allowHtml:m,locale:b}=this.cellProperties,y=this.query;let w=jn(f),R,E;w&&!m&&(R=p===!0?w.indexOf(y):w.toLocaleLowerCase(b).indexOf(y.toLocaleLowerCase(b)),R!==-1&&(E=w.substr(R,y.length),w=w.replace(E,`<strong>${E}</strong>`))),t&&ze(c,[r_e(),...i?[v_e(r)]:[],...i?[b_e(i.indexOf(f)+1)]:[],["id",`${this.htEditor.rootElement.id}_${u}-${h}`]]),c.innerHTML=w},afterSelectionEnd:(l,c)=>{if(t){const u=this.htEditor.getCell(l,c,!0);ze(u,[bD()]),ze(this.TEXTAREA,...g_e(u.id))}}}),t&&(ze(this.htEditor.view._wt.wtOverlays.wtTable.TABLE,...Ka()),ze(this.htEditor.rootElement,[zG(),p_e("polite"),m_e("text"),["id",`${KW($T,this)}-listbox-${s}-${o}`]]),ze(this.TEXTAREA,...no("true"))),this.hot._registerTimeout(()=>{this.queryChoices(this.TEXTAREA.value)})}close(){this.removeHooksByKey("beforeKeyDown"),super.close(),this.hot.getSettings().ariaTags&&ze(this.TEXTAREA,[no("false")])}discardEditor(e){super.discardEditor(e),this.hot.view.render()}queryChoices(e){const t=this.cellProperties.source;this.query=e,typeof t=="function"?t.call(this.cellProperties,e,i=>{this.rawChoices=i,this.updateChoicesList(this.stripValuesIfNeeded(i))}):Array.isArray(t)?(this.rawChoices=t,this.updateChoicesList(this.stripValuesIfNeeded(t))):this.updateChoicesList([])}updateChoicesList(e){const t=_D(this.TEXTAREA),i=r9(this.TEXTAREA),r=this.cellProperties.sortByRelevance,s=this.cellProperties.filter;let o=null,a=null,l=e;r&&(o=this.sortByRelevance(this.stripValueIfNeeded(this.getValue()),l,this.cellProperties.filteringCaseSensitive));const c=Array.isArray(o)?o.length:0;if(s===!1)c&&(a=o[0]);else{const u=[];for(let h=0,d=l.length;h<d&&!(r&&c<=h);h++)c?u.push(l[o[h]]):u.push(l[h]);a=0,l=u}this.strippedChoices=l,l.length===0?this.htEditor.rootElement.style.display="none":this.htEditor.rootElement.style.display="",this.htEditor.loadData(Cb([l])),l.length>0&&(this.updateDropdownDimensions(),this.flipDropdownIfNeeded(),this.cellProperties.strict===!0&&this.highlightBestMatchingChoice(a)),this.hot.listen(),ly(this.TEXTAREA,t,t===i?void 0:i)}flipDropdownIfNeeded(){const e=rf(this.hot.view._wt.wtTable.TABLE),t=e===this.hot.rootWindow,i=this.cellProperties.preventOverflow;if(t||!t&&(i||i==="horizontal"))return!1;const r=xi(this.TEXTAREA),s=ni(this.TEXTAREA),o=this.getDropdownHeight(),a=e.scrollTop,l=ni(this.hot.view._wt.wtTable.THEAD),c=xi(e),u=r.top-c.top-l+a,h=e.scrollHeight-u-l-s,d=o>h&&u>h;return d?this.flipDropdown(o):this.unflipDropdown(),this.limitDropdownIfNeeded(d?u:h,o),d}limitDropdownIfNeeded(e,t){if(t>e){let i=0,r=0,s=0,o=null;do s=this.htEditor.getRowHeight(r)||this.htEditor.view._wt.getSetting("defaultRowHeight"),i+=s,r+=1;while(i<e);o=i-s,this.htEditor.flipped&&(this.htEditor.rootElement.style.top=`${parseInt(this.htEditor.rootElement.style.top,10)+t-o}px`),this.setDropdownHeight(i-s)}}flipDropdown(e){const t=this.htEditor.rootElement.style;t.position="absolute",t.top=`${-e}px`,this.htEditor.flipped=!0}unflipDropdown(){const e=this.htEditor.rootElement.style;e.position="absolute",e.top="",this.htEditor.flipped=void 0}updateDropdownDimensions(){const e=this.htEditor.getColWidth(0)+Ai(this.hot.rootDocument)+2,t=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:t?void 0:e}),this.htEditor.view._wt.wtTable.alignOverlaysWithTrimmingContainer()}setDropdownHeight(e){this.htEditor.updateSettings({height:e})}highlightBestMatchingChoice(e){typeof e=="number"?this.htEditor.selectCell(e,0,void 0,void 0,void 0,!1):this.htEditor.deselectCell()}getDropdownHeight(){const e=this.htEditor.getRowHeight(0)||23,t=this.cellProperties.visibleRows;return this.strippedChoices.length>=t?t*e:this.strippedChoices.length*e+8}stripValueIfNeeded(e){return this.stripValuesIfNeeded([e])[0]}stripValuesIfNeeded(e){const{allowHtml:t}=this.cellProperties,i=vt(e,s=>jn(s));return vt(i,s=>t?s:JP(s))}allowKeyEventPropagation(e){const t=this.htEditor.getSelectedRangeLast(),i={row:t?t.from.row:-1};let r=!1;return e===Le.ARROW_DOWN&&i.row>0&&i.row<this.htEditor.countRows()-1&&(r=!0),e===Le.ARROW_UP&&i.row>-1&&(r=!0),r}onBeforeKeyDown(e){if(_9(e.keyCode)||e.keyCode===Le.BACKSPACE||e.keyCode===Le.DELETE||e.keyCode===Le.INSERT){let t=10;if(e.keyCode===Le.C&&(e.ctrlKey||e.metaKey))return;this.isOpened()||(t+=10),this.htEditor&&this.hot._registerTimeout(()=>{this.queryChoices(this.TEXTAREA.value)},t)}}}const mIe="checkbox";class $Y extends em{static get EDITOR_TYPE(){return mIe}beginEditing(e,t){if(t&&t.type==="mouseup"&&t.target.nodeName==="TD"){const i=this.TD.querySelector('input[type="checkbox"]');Ue(i,"htBadValue")||i.click()}}finishEditing(){}init(){}open(){}close(){}getValue(){}setValue(){}focus(){}}/*!
 * Pikaday
 *
 * Copyright  2014 David Bushell | BSD & MIT license | https://github.com/Pikaday/Pikaday
 */const Tu=()=>window,Ys=()=>window.document,CI=(n,e)=>window.setTimeout(n,e),Pa=function(n,e,t,i){n.addEventListener(e,t,!!i)},Dl=function(n,e,t,i){n.removeEventListener(e,t,!!i)},vIe=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},rs=function(n,e){return(" "+n.className+" ").indexOf(" "+e+" ")!==-1},FT=function(n,e){rs(n,e)||(n.className=n.className===""?e:n.className+" "+e)},BT=function(n,e){n.className=vIe((" "+n.className+" ").replace(" "+e+" "," "))},kL=function(n){return/Array/.test(Object.prototype.toString.call(n))},us=function(n){return/Date/.test(Object.prototype.toString.call(n))&&!isNaN(n.getTime())},bIe=function(n){let e=n.getDay();return e===0||e===6},wIe=function(n){return n%4===0&&n%100!==0||n%400===0},qW=function(n,e){return[31,wIe(n)?29:28,31,30,31,30,31,31,30,31,30,31][e]},J0=function(n){us(n)&&n.setHours(0,0,0,0)},eC=function(n,e){return n.getTime()===e.getTime()},oR=function(n,e,t){let i,r;for(i in e)r=n[i]!==void 0,r&&typeof e[i]=="object"&&e[i]!==null&&e[i].nodeName===void 0?us(e[i])?t&&(n[i]=new Date(e[i].getTime())):kL(e[i])?t&&(n[i]=e[i].slice(0)):n[i]=oR({},e[i],t):(t||!r)&&(n[i]=e[i]);return n},XW=function(n,e,t){let i=Ys().createEvent("HTMLEvents");i.initEvent(e,!0,!1),i=oR(i,t),n.dispatchEvent(i)},ZW=function(n){return n.month<0&&(n.year-=Math.ceil(Math.abs(n.month)/12),n.month+=12),n.month>11&&(n.year+=Math.floor(Math.abs(n.month)/12),n.month-=12),n},va={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,firstWeekOfYearMinDays:4,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},QW=function(n,e,t){for(e+=n.firstDay;e>=7;)e-=7;return t?n.i18n.weekdaysShort[e]:n.i18n.weekdays[e]},yIe=function(n){let e=[],t="false";if(n.isEmpty)if(n.showDaysInNextAndPreviousMonths)e.push("is-outside-current-month"),n.enableSelectionDaysInNextAndPreviousMonths||e.push("is-selection-disabled");else return'<td class="is-empty"></td>';return n.isDisabled&&e.push("is-disabled"),n.isToday&&e.push("is-today"),n.isSelected&&(e.push("is-selected"),t="true"),n.hasEvent&&e.push("has-event"),n.isInRange&&e.push("is-inrange"),n.isStartRange&&e.push("is-startrange"),n.isEndRange&&e.push("is-endrange"),'<td data-day="'+n.day+'" class="'+e.join(" ")+'" aria-selected="'+t+'"><button class="pika-button pika-day" type="button" data-pika-year="'+n.year+'" data-pika-month="'+n.month+'" data-pika-day="'+n.day+'">'+n.day+"</button></td>"},CIe=function(n,e){n.setHours(0,0,0,0);let t=n.getDate(),i=n.getDay(),r=e,s=r-1,o=7,a=function(d){return(d+o-1)%o};n.setDate(t+s-a(i));let l=new Date(n.getFullYear(),0,r),c=24*60*60*1e3,u=(n.getTime()-l.getTime())/c;return 1+Math.round((u-s+a(l.getDay()))/o)},SIe=function(n,e,t,i,r){let s=new Date(i,t,e);return'<td class="pika-week">'+(n.hasMoment?n.moment(s).isoWeek():CIe(s,r))+"</td>"},_Ie=function(n,e,t,i){return'<tr class="pika-row'+(t?" pick-whole-week":"")+(i?" is-selected":"")+'">'+(e?n.reverse():n).join("")+"</tr>"},RIe=function(n){return"<tbody>"+n.join("")+"</tbody>"},EIe=function(n){let e,t=[];for(n.showWeekNumber&&t.push("<th></th>"),e=0;e<7;e++)t.push('<th scope="col"><abbr title="'+QW(n,e)+'">'+QW(n,e,!0)+"</abbr></th>");return"<thead><tr>"+(n.isRTL?t.reverse():t).join("")+"</tr></thead>"},xIe=function(n,e,t,i,r,s){let o,a,l,c=n._o,u=t===c.minYear,h=t===c.maxYear,d='<div id="'+s+'" class="pika-title" role="heading" aria-live="polite">',f,g,p=!0,m=!0;for(l=[],o=0;o<12;o++)l.push('<option value="'+(t===r?o-e:12+o-e)+'"'+(o===i?' selected="selected"':"")+(u&&o<c.minMonth||h&&o>c.maxMonth?' disabled="disabled"':"")+">"+c.i18n.months[o]+"</option>");for(f='<div class="pika-label">'+c.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+l.join("")+"</select></div>",kL(c.yearRange)?(o=c.yearRange[0],a=c.yearRange[1]+1):(o=t-c.yearRange,a=1+t+c.yearRange),l=[];o<a&&o<=c.maxYear;o++)o>=c.minYear&&l.push('<option value="'+o+'"'+(o===t?' selected="selected"':"")+">"+o+"</option>");return g='<div class="pika-label">'+t+c.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+l.join("")+"</select></div>",c.showMonthAfterYear?d+=g+f:d+=f+g,u&&(i===0||c.minMonth>=i)&&(p=!1),h&&(i===11||c.maxMonth<=i)&&(m=!1),e===0&&(d+='<button class="pika-prev'+(p?"":" is-disabled")+'" type="button">'+c.i18n.previousMonth+"</button>"),e===n._o.numberOfMonths-1&&(d+='<button class="pika-next'+(m?"":" is-disabled")+'" type="button">'+c.i18n.nextMonth+"</button>"),d+="</div>"},TIe=function(n,e,t){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+t+'">'+EIe(n)+RIe(e)+"</table>"};function SI(n){let e=this,t=e.config(n);e._onMouseDown=function(r){if(!e._v)return;r=r||Tu().event;let s=r.target||r.srcElement;if(s)if(rs(s,"is-disabled")||(rs(s,"pika-button")&&!rs(s,"is-empty")&&!rs(s.parentNode,"is-disabled")?(e.setDate(new Date(s.getAttribute("data-pika-year"),s.getAttribute("data-pika-month"),s.getAttribute("data-pika-day"))),t.bound&&CI(function(){e.hide(),t.blurFieldOnSelect&&t.field&&t.field.blur()},100)):rs(s,"pika-prev")?e.prevMonth():rs(s,"pika-next")&&e.nextMonth()),rs(s,"pika-select"))e._c=!0;else if(r.preventDefault)r.preventDefault();else return r.returnValue=!1,!1},e._onChange=function(r){r=r||Tu().event;let s=r.target||r.srcElement;s&&(rs(s,"pika-select-month")?e.gotoMonth(s.value):rs(s,"pika-select-year")&&e.gotoYear(s.value))},e._onKeyChange=function(r){if(r=r||Tu().event,e.isVisible())switch(r.keyCode){case 13:case 27:t.field&&t.field.blur();break;case 37:e.adjustDate("subtract",1);break;case 38:e.adjustDate("subtract",7);break;case 39:e.adjustDate("add",1);break;case 40:e.adjustDate("add",7);break;case 8:case 46:e.setDate(null);break}},e._parseFieldValue=function(){if(t.parse)return t.parse(t.field.value,t.format);if(this.hasMoment){let r=this.moment(t.field.value,t.format,t.formatStrict);return r&&r.isValid()?r.toDate():null}else return new Date(Date.parse(t.field.value))},e._onInputChange=function(r){let s;r.firedBy!==e&&(s=e._parseFieldValue(),us(s)&&e.setDate(s),e._v||e.show())},e._onInputFocus=function(){e.show()},e._onInputClick=function(){e.show()},e._onInputBlur=function(){let r=Ys().activeElement;do if(rs(r,"pika-single"))return;while(r=r.parentNode);e._c||(e._b=CI(function(){e.hide()},50)),e._c=!1},e._onClick=function(r){r=r||Tu().event;let s=r.target||r.srcElement,o=s;if(s){!hasEventListeners&&rs(s,"pika-select")&&(s.onchange||(s.setAttribute("onchange","return;"),Pa(s,"change",e._onChange)));do if(rs(o,"pika-single")||o===t.trigger)return;while(o=o.parentNode);e._v&&s!==t.trigger&&o!==t.trigger&&e.hide()}},e.el=Ys().createElement("div"),e.el.className="pika-single"+(t.isRTL?" is-rtl":"")+(t.theme?" "+t.theme:""),Pa(e.el,"mousedown",e._onMouseDown,!0),Pa(e.el,"touchend",e._onMouseDown,!0),Pa(e.el,"change",e._onChange),t.keyboardInput&&Pa(Ys(),"keydown",e._onKeyChange),t.field&&(t.container?t.container.appendChild(e.el):t.bound?Ys().body.appendChild(e.el):t.field.parentNode.insertBefore(e.el,t.field.nextSibling),Pa(t.field,"change",e._onInputChange),t.defaultDate||(t.defaultDate=e._parseFieldValue(),t.setDefaultDate=!0));let i=t.defaultDate;us(i)?t.setDefaultDate?e.setDate(i,!0):e.gotoDate(i):e.gotoDate(new Date),t.bound?(this.hide(),e.el.className+=" is-bound",Pa(t.trigger,"click",e._onInputClick),Pa(t.trigger,"focus",e._onInputFocus),Pa(t.trigger,"blur",e._onInputBlur)):this.show()}SI.prototype={config:function(n){this._o||(this._o=oR({},va,!0));let e=oR(this._o,n,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.theme=typeof e.theme=="string"&&e.theme?e.theme:null,e.bound=!!(e.bound!==void 0?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field,e.disableWeekends=!!e.disableWeekends,e.disableDayFn=typeof e.disableDayFn=="function"?e.disableDayFn:null;let t=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=t>4?4:t,us(e.minDate)||(e.minDate=!1),us(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&this.setMinDate(e.minDate),e.maxDate&&this.setMaxDate(e.maxDate),kL(e.yearRange)){let i=new Date().getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||i,e.yearRange[1]=parseInt(e.yearRange[1],10)||i}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||va.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(n){return n=n||this._o.format,us(this._d)?this._o.toString?this._o.toString(this._d,n):this.hasMoment?this.moment(this._d).format(n):this._d.toDateString():""},getMoment:function(){return this.hasMoment?this.moment(this._d):null},setMoment:function(n,e){this.hasMoment&&this.moment.isMoment(n)&&this.setDate(n.toDate(),e)},useMoment:function(n){this.hasMoment=!0,this.moment=n},getDate:function(){return us(this._d)?new Date(this._d.getTime()):null},setDate:function(n,e){if(!n)return this._d=null,this._o.field&&(this._o.field.value="",XW(this._o.field,"change",{firedBy:this})),this.draw();if(typeof n=="string"&&(n=new Date(Date.parse(n))),!us(n))return;let t=this._o.minDate,i=this._o.maxDate;us(t)&&n<t?n=t:us(i)&&n>i&&(n=i),this._d=new Date(n.getTime()),J0(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),XW(this._o.field,"change",{firedBy:this})),!e&&typeof this._o.onSelect=="function"&&this._o.onSelect.call(this,this.getDate())},clear:function(){this.setDate(null)},gotoDate:function(n){let e=!0;if(us(n)){if(this.calendars){let t=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),r=n.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),e=r<t.getTime()||i.getTime()<r}e&&(this.calendars=[{month:n.getMonth(),year:n.getFullYear()}],this._o.mainCalendar==="right"&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(n,e){let t=this.getDate()||new Date,i=parseInt(e)*24*60*60*1e3,r;n==="add"?r=new Date(t.valueOf()+i):n==="subtract"&&(r=new Date(t.valueOf()-i)),this.setDate(r)},adjustCalendars:function(){this.calendars[0]=ZW(this.calendars[0]);for(let n=1;n<this._o.numberOfMonths;n++)this.calendars[n]=ZW({month:this.calendars[0].month+n,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(n){isNaN(n)||(this.calendars[0].month=parseInt(n,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(n){isNaN(n)||(this.calendars[0].year=parseInt(n,10),this.adjustCalendars())},setMinDate:function(n){n instanceof Date?(J0(n),this._o.minDate=n,this._o.minYear=n.getFullYear(),this._o.minMonth=n.getMonth()):(this._o.minDate=va.minDate,this._o.minYear=va.minYear,this._o.minMonth=va.minMonth,this._o.startRange=va.startRange),this.draw()},setMaxDate:function(n){n instanceof Date?(J0(n),this._o.maxDate=n,this._o.maxYear=n.getFullYear(),this._o.maxMonth=n.getMonth()):(this._o.maxDate=va.maxDate,this._o.maxYear=va.maxYear,this._o.maxMonth=va.maxMonth,this._o.endRange=va.endRange),this.draw()},setStartRange:function(n){this._o.startRange=n},setEndRange:function(n){this._o.endRange=n},draw:function(n){if(!this._v&&!n)return;let e=this._o,t=e.minYear,i=e.maxYear,r=e.minMonth,s=e.maxMonth,o="",a;this._y<=t&&(this._y=t,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=i&&(this._y=i,!isNaN(s)&&this._m>s&&(this._m=s));for(let l=0;l<e.numberOfMonths;l++)a="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),o+='<div class="pika-lendar">'+xIe(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year,a)+this.render(this.calendars[l].year,this.calendars[l].month,a)+"</div>";this.el.innerHTML=o,e.bound&&e.field.type!=="hidden"&&CI(function(){e.trigger.focus()},1),typeof this._o.onDraw=="function"&&this._o.onDraw(this),e.bound&&e.field.setAttribute("aria-label",e.ariaLabel)},adjustPosition:function(){let n,e,t,i,r,s,o,a,l,c,u;this._o.container||(this.el.style.position="absolute",n=this._o.trigger,e=this.el.offsetWidth,t=this.el.offsetHeight,i=Tu().innerWidth||Ys().documentElement.clientWidth,r=Tu().innerHeight||Ys().documentElement.clientHeight,s=Ys().body.scrollTop||Ys().documentElement.scrollTop,c=!0,u=!0,l=n.getBoundingClientRect(),o=l.left+Tu().pageXOffset,a=l.bottom+Tu().pageYOffset,(this._o.reposition&&o+e>i||this._o.position.indexOf("right")>-1&&o-e+n.offsetWidth>0)&&(o=o-e+n.offsetWidth,c=!1),(this._o.reposition&&a+t>r+s||this._o.position.indexOf("top")>-1&&a-t-n.offsetHeight>0)&&(a=a-t-n.offsetHeight,u=!1),o<0&&(o=0),a<0&&(a=0),this.el.style.left=o+"px",this.el.style.top=a+"px",FT(this.el,c?"left-aligned":"right-aligned"),FT(this.el,u?"bottom-aligned":"top-aligned"),BT(this.el,c?"right-aligned":"left-aligned"),BT(this.el,u?"top-aligned":"bottom-aligned"))},render:function(n,e,t){let i=this._o,r=new Date,s=qW(n,e),o=new Date(n,e,1).getDay(),a=[],l=[];J0(r),i.firstDay>0&&(o-=i.firstDay,o<0&&(o+=7));let c=e===0?11:e-1,u=e===11?0:e+1,h=e===0?n-1:n,d=e===11?n+1:n,f=qW(h,c),g=s+o,p=g;for(;p>7;)p-=7;g+=7-p;let m=!1;for(let b=0,y=0;b<g;b++){let w=new Date(n,e,1+(b-o)),R=us(this._d)?eC(w,this._d):!1,E=eC(w,r),_=i.events.indexOf(w.toDateString())!==-1,T=b<o||b>=s+o,I=1+(b-o),x=e,P=n,D=i.startRange&&eC(i.startRange,w),B=i.endRange&&eC(i.endRange,w),V=i.startRange&&i.endRange&&i.startRange<w&&w<i.endRange,z=i.minDate&&w<i.minDate||i.maxDate&&w>i.maxDate||i.disableWeekends&&bIe(w)||i.disableDayFn&&i.disableDayFn(w);T&&(b<o?(I=f+I,x=c,P=h):(I=I-s,x=u,P=d));let L={day:I,month:x,year:P,hasEvent:_,isSelected:R,isToday:E,isDisabled:z,isEmpty:T,isStartRange:D,isEndRange:B,isInRange:V,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:i.enableSelectionDaysInNextAndPreviousMonths};i.pickWholeWeek&&R&&(m=!0),l.push(yIe(L)),++y===7&&(i.showWeekNumber&&l.unshift(SIe(this,b-o,e,n,i.firstWeekOfYearMinDays)),a.push(_Ie(l,i.isRTL,i.pickWholeWeek,m)),l=[],y=0,m=!1)}return TIe(i,a,t)},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),BT(this.el,"is-hidden"),this._o.bound&&(Pa(Ys(),"click",this._onClick),this.adjustPosition()),typeof this._o.onOpen=="function"&&this._o.onOpen.call(this))},hide:function(){let n=this._v;n!==!1&&(this._o.bound&&Dl(Ys(),"click",this._onClick),this._o.container||(this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto"),FT(this.el,"is-hidden"),this._v=!1,n!==void 0&&typeof this._o.onClose=="function"&&this._o.onClose.call(this))},destroy:function(){let n=this._o;this.hide(),Dl(this.el,"mousedown",this._onMouseDown,!0),Dl(this.el,"touchend",this._onMouseDown,!0),Dl(this.el,"change",this._onChange),n.keyboardInput&&Dl(Ys(),"keydown",this._onKeyChange),n.field&&(Dl(n.field,"change",this._onInputChange),n.bound&&(Dl(n.trigger,"click",this._onInputClick),Dl(n.trigger,"focus",this._onInputFocus),Dl(n.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}};function VT(n,e,t){return(e=MIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function MIe(n){var e=AIe(n,"string");return typeof e=="symbol"?e:e+""}function AIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const FY="date",JW="dateEditor";class BY extends Pf{constructor(){super(...arguments),VT(this,"defaultDateFormat","DD/MM/YYYY"),VT(this,"parentDestroyed",!1),VT(this,"$datePicker",null)}static get EDITOR_TYPE(){return FY}init(){if(typeof he!="function")throw new Error("You need to include moment.js to your project.");if(typeof SI!="function")throw new Error("You need to include Pikaday to your project.");super.init(),this.hot.addHook("afterDestroy",()=>{this.parentDestroyed=!0,this.destroyElements()})}createElements(){super.createElements(),this.datePicker=this.hot.rootDocument.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,this.datePicker.setAttribute("dir",this.hot.isRtl()?"rtl":"ltr"),ue(this.datePicker,"htDatepickerHolder"),this.hot.rootDocument.body.appendChild(this.datePicker),this.eventManager.addEventListener(this.datePicker,"mousedown",e=>{Ue(e.target,"pika-day")&&this.hideDatepicker(),e.stopPropagation()})}destroyElements(){const e=this.datePicker.parentNode;this.$datePicker&&this.$datePicker.destroy(),e&&e.removeChild(this.datePicker)}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o)}open(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;const i=this.hot.getShortcutManager().getContext("editor");this.showDatepicker(e),super.open(),i.addShortcuts([{keys:[["ArrowLeft"]],callback:()=>{this.$datePicker.adjustDate("subtract",1)}},{keys:[["ArrowRight"]],callback:()=>{this.$datePicker.adjustDate("add",1)}},{keys:[["ArrowUp"]],callback:()=>{this.$datePicker.adjustDate("subtract",7)}},{keys:[["ArrowDown"]],callback:()=>{this.$datePicker.adjustDate("add",7)}}],{group:JW})}close(){var e;this._opened=!1,(e=this.$datePicker)!==null&&e!==void 0&&e.destroy&&this.$datePicker.destroy(),this.hot._registerTimeout(()=>{const r=this.hot._getEditorManager();r.closeEditor(),this.hot.view.render(),r.prepareEditor()}),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(JW),super.close()}finishEditing(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.finishEditing(e,t)}showDatepicker(e){const t=this.cellProperties.dateFormat||this.defaultDateFormat,i=this.hot.view.isMouseDown(),r=e?kD(e.keyCode):!1;let s;this.datePicker.style.display="block",this.$datePicker=new SI(this.getDatePickerConfig()),typeof this.$datePicker.useMoment=="function"&&this.$datePicker.useMoment(he),this.$datePicker._onInputFocus=function(){},this.originalValue?(s=this.originalValue,he(s,t,!0).isValid()&&this.$datePicker.setMoment(he(s,t),!0),this.getValue()!==this.originalValue&&this.setValue(this.originalValue),!r&&!i&&this.setValue("")):this.cellProperties.defaultDate?(s=this.cellProperties.defaultDate,he(s,t,!0).isValid()&&this.$datePicker.setMoment(he(s,t),!0),!r&&!i&&this.setValue("")):this.$datePicker.gotoToday()}hideDatepicker(){this.datePickerStyle.display="none",this.$datePicker.hide()}getDatePickerConfig(){const e=this.TEXTAREA,t={};this.cellProperties&&this.cellProperties.datePickerConfig&&hy(t,this.cellProperties.datePickerConfig);const i=t.onSelect,r=t.onClose;return t.field=e,t.trigger=e,t.container=this.datePicker,t.bound=!1,t.keyboardInput=!1,t.format=t.format||this.defaultDateFormat,t.reposition=t.reposition||!1,t.isRTL=!1,t.onSelect=s=>{let o=s;isNaN(o.getTime())||(o=he(o).format(this.cellProperties.dateFormat||this.defaultDateFormat)),this.setValue(o),i&&i()},t.onClose=()=>{this.parentDestroyed||this.finishEditing(!1),r&&r()},t}refreshDimensions(e){var t;if(super.refreshDimensions(e),this.state!==qn.EDITING)return;if(this.TD=this.getEditedCell(),!this.TD){this.hideDatepicker();return}const{rowIndexMapper:i,columnIndexMapper:r}=this.hot,{wtOverlays:s}=this.hot.view._wt,{wtTable:o}=(t=s.getParentOverlay(this.TD))!==null&&t!==void 0?t:this.hot.view._wt,a=i.getVisualFromRenderableIndex(o.getFirstPartiallyVisibleRow()),l=i.getVisualFromRenderableIndex(o.getLastPartiallyVisibleRow()),c=r.getVisualFromRenderableIndex(o.getFirstPartiallyVisibleColumn()),u=r.getVisualFromRenderableIndex(o.getLastPartiallyVisibleColumn());if(this.row>=a&&this.row<=l&&this.col>=c&&this.col<=u){const h=this.TD.getBoundingClientRect();this.datePickerStyle.top=`${this.hot.rootWindow.pageYOffset+h.top+ni(this.TD)}px`;let d=this.hot.rootWindow.pageXOffset;this.hot.isRtl()?d+=h.right-fn(this.datePicker):d+=h.left,this.datePickerStyle.left=`${d}px`}else this.hideDatepicker()}}const PIe="dropdown";class DL extends OL{static get EDITOR_TYPE(){return PIe}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o),this.cellProperties.filter=!1,this.cellProperties.strict=!0}}Ie.getSingleton().add("beforeValidate",function(n,e,t){const i=this.propToCol(t);if(Number.isInteger(i)){const r=this.getCellMeta(e,i);r.editor===DL&&r.strict===void 0&&(r.filter=!1,r.strict=!0)}});const IIe="numeric";class VY extends Pf{static get EDITOR_TYPE(){return IIe}}const OIe="password";class WY extends Pf{static get EDITOR_TYPE(){return OIe}createElements(){super.createElements(),this.TEXTAREA=this.hot.rootDocument.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.setAttribute("data-hot-input",""),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,ia(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}}const WT="ht_editor_visible",e3="selectEditor",kIe="select";class jY extends em{static get EDITOR_TYPE(){return kIe}init(){this.select=this.hot.rootDocument.createElement("select"),this.select.setAttribute("data-hot-input","true"),this.select.style.display="none",ue(this.select,"htSelectEditor"),this.hot.rootElement.appendChild(this.select),this.registerHooks()}getValue(){return this.select.value}setValue(e){this.select.value=e}open(){this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}close(){this._opened=!1,this.select.style.display="none",Ue(this.select,WT)&&Ze(this.select,WT),this.unregisterShortcuts(),this.clearHooks()}focus(){this.select.focus()}registerHooks(){this.addHook("afterScrollHorizontally",()=>this.refreshDimensions()),this.addHook("afterScrollVertically",()=>this.refreshDimensions()),this.addHook("afterColumnResize",()=>this.refreshDimensions()),this.addHook("afterRowResize",()=>this.refreshDimensions())}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o);const a=this.cellProperties.selectOptions;let l;typeof a=="function"?l=this.prepareOptions(a(this.row,this.col,this.prop)):l=this.prepareOptions(a),ia(this.select),ct(l,(c,u)=>{const h=this.hot.rootDocument.createElement("OPTION");h.value=u,Mf(h,c),this.select.appendChild(h)})}prepareOptions(e){let t={};if(Array.isArray(e))for(let i=0,r=e.length;i<r;i++)t[e[i]]=e[i];else typeof e=="object"&&(t=e);return t}refreshValue(){const e=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=e,this.setValue(e),this.refreshDimensions()}refreshDimensions(){if(this.state!==qn.EDITING)return;if(this.TD=this.getEditedCell(),!this.TD){this.close();return}const{top:e,start:t,width:i,height:r}=this.getEditedCellRect(),s=this.select.style;s.height=`${r}px`,s.width=`${i}px`,s.top=`${e}px`,s[this.hot.isRtl()?"right":"left"]=`${t}px`,s.margin="0px",ue(this.select,WT)}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor"),i={group:e3};this.isInFullEditMode()&&t.addShortcuts([{keys:[["ArrowUp"]],callback:()=>{const r=this.select.selectedIndex-1;r>=0&&(this.select[r].selected=!0)}},{keys:[["ArrowDown"]],callback:()=>{const r=this.select.selectedIndex+1;r<=this.select.length-1&&(this.select[r].selected=!0)}}],i)}unregisterShortcuts(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(e3)}}const DIe="time";class zY extends Pf{static get EDITOR_TYPE(){return DIe}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o),this.TEXTAREA.dir="ltr"}}function NIe(){Gr(em),Gr(OL),Gr($Y),Gr(BY),Gr(DL),Gr(IL),Gr(VY),Gr(WY),Gr(jY),Gr(Pf),Gr(zY)}const LIe="html";function NL(n,e,t,i,r,s,o){vy.apply(this,[n,e,t,i,r,s,o]),Mf(e,s??"",!1)}NL.RENDERER_TYPE=LIe;const HIe="autocomplete";function tm(n,e,t,i,r,s,o){const{rootDocument:a}=n,l=o.allowHtml?NL:Wc,c=a.createElement("DIV"),u=n.getSettings().ariaTags;if(c.className="htAutocompleteArrow",u&&c.setAttribute(...xf()),c.appendChild(a.createTextNode("")),l.apply(this,[n,e,t,i,r,s,o]),e.firstChild||e.appendChild(a.createTextNode("")),e.insertBefore(c,e.firstChild),ue(e,"htAutocomplete"),!n.acArrowListener){const h=new co(n);n.acArrowListener=function(d){Ue(d.target,"htAutocompleteArrow")&&n.view._wt.getSetting("onCellDblClick",null,n._createCellCoords(t,i),e)},h.addEventListener(n.rootElement,"mousedown",n.acArrowListener),n.addHookOnce("afterDestroy",()=>{h.destroy()})}}tm.RENDERER_TYPE=HIe;const $Ie="dropdown";function LL(n,e,t,i,r,s,o){tm.apply(this,[n,e,t,i,r,s,o])}LL.RENDERER_TYPE=$Ie;const t3=new WeakMap,n3=new WeakMap,FIe="htBadValue",Tp="data-row",Mp="data-col",BIe="checkboxRenderer",UY="checkbox";Ie.getSingleton().add("modifyAutoColumnSizeSeed",function(n,e,t){const{label:i,type:r,row:s,column:o,prop:a}=e;if(r===UY){if(i){const{value:l,property:c}=i;let u=t;if(l)u=typeof l=="function"?l(s,o,a,t):l;else if(c){const h=this.getDataAtRowProp(s,c);u=h!==null?h:t}n=u}return n}});function HL(n,e,t,i,r,s,o){const{rootDocument:a}=n,l=n.getSettings().ariaTags;vy.apply(this,[n,e,t,i,r,s,o]),VIe(n);let c=WIe(a);const u=o.label;let h=!1;if(typeof o.checkedTemplate>"u"&&(o.checkedTemplate=!0),typeof o.uncheckedTemplate>"u"&&(o.uncheckedTemplate=!1),ia(e),s===o.checkedTemplate||jn(s).toLocaleLowerCase(o.locale)===jn(o.checkedTemplate).toLocaleLowerCase(o.locale)?c.checked=!0:s===o.uncheckedTemplate||jn(s).toLocaleLowerCase(o.locale)===jn(o.uncheckedTemplate).toLocaleLowerCase(o.locale)?c.checked=!1:zn(s)?ue(c,"noValue"):(c.style.display="none",ue(c,FIe),h=!0),ze(c,[[Tp,t],[Mp,i]]),l&&ze(c,[z_(c.checked?n.getTranslatedPhrase(xL):n.getTranslatedPhrase(TL)),KG(c.checked),s_e()]),!h&&u){let p="";if(u.value)p=typeof u.value=="function"?u.value.call(this,t,i,r,s):u.value;else if(u.property){const b=n.getDataAtRowProp(t,u.property);p=b!==null?b:""}const m=jIe(a,p,u.separated!==!0);u.position==="before"?u.separated?(e.appendChild(m),e.appendChild(c)):(m.appendChild(c),c=m):(!u.position||u.position==="after")&&(u.separated?(e.appendChild(c),e.appendChild(m)):(m.insertBefore(c,m.firstChild),c=m))}(!u||u&&!u.separated)&&e.appendChild(c),h&&e.appendChild(a.createTextNode("#bad-value#")),t3.has(n)||(t3.set(n,!0),d());function d(){const m=n.getShortcutManager().getContext("grid"),b={group:BIe,relativeToGroup:ch,position:"before"};m.addShortcuts([{keys:[["space"]],callback:()=>(f(),!g()),runOnlyIf:()=>{var y;return(y=n.getSelectedRangeLast())===null||y===void 0?void 0:y.highlight.isCell()}},{keys:[["enter"]],callback:()=>(f(),!g()),runOnlyIf:()=>{const y=n.getSelectedRangeLast();return n.getSettings().enterBeginsEditing&&(y==null?void 0:y.isSingle())&&y.highlight.isCell()}},{keys:[["delete"],["backspace"]],callback:()=>(f(!0),!g()),runOnlyIf:()=>{var y;return(y=n.getSelectedRangeLast())===null||y===void 0?void 0:y.highlight.isCell()}}],b)}function f(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const m=n.getSelectedRange(),b=[],y=new Map;let w=[],R=0;if(m){for(let E=0;E<m.length;E++){const{row:_,col:T}=m[E].getTopStartCorner(),{row:I,col:x}=m[E].getBottomEndCorner();for(let P=_;P<=I;P+=1)for(let D=T;D<=x;D+=1){const B=n.getCellMeta(P,D),V={checkedTemplate:B.checkedTemplate,uncheckedTemplate:B.uncheckedTemplate};if(B.type!=="checkbox"){p===!0&&!B.readOnly&&(y.has(b.length)?y.set(b.length,[...y.get(b.length),[P,D,null]]):y.set(b.length,[[P,D,null]]));continue}if(B.readOnly===!0)continue;typeof B.checkedTemplate>"u"&&(B.checkedTemplate=!0),typeof B.uncheckedTemplate>"u"&&(B.uncheckedTemplate=!1);const z=n.getDataAtCell(P,D);p===!1?[B.checkedTemplate,B.checkedTemplate.toString()].includes(z)?w.push([P,D,B.uncheckedTemplate,V]):[B.uncheckedTemplate,B.uncheckedTemplate.toString(),null,void 0].includes(z)&&w.push([P,D,B.checkedTemplate,V]):w.push([P,D,B.uncheckedTemplate,V]),R+=1}b.push(R),R=0}w.every(E=>{let[,,_]=E;return _===w[0][2]})?w=w.map(E=>{let[_,T,I]=E;return[_,T,I]}):w=w.map(E=>{let[_,T,,I]=E;return[_,T,I.checkedTemplate]}),w.length>0&&b.forEach((E,_)=>{let T=w.splice(0,E);y.size&&y.has(_)&&(T=[...T,...y.get(_)]),n.setDataAtCell(T)})}}function g(){const p=n.getSelectedRange();if(p){for(let m=0;m<p.length;m++){const b=p[m].getTopStartCorner(),y=p[m].getBottomEndCorner();for(let w=b.row;w<=y.row;w++)for(let R=b.col;R<=y.col;R++){const E=n.getCellMeta(w,R),_=n.getCell(w,R);if(_==null)return!0;if(_.querySelectorAll("input[type=checkbox]").length>0&&!E.readOnly)return!0}}return!1}}}HL.RENDERER_TYPE=UY;function VIe(n){let e=n3.get(n);if(!e){const{rootElement:t}=n;e=new co(n),e.addEventListener(t,"click",i=>UIe(i,n)),e.addEventListener(t,"mouseup",i=>zIe(i,n)),e.addEventListener(t,"change",i=>GIe(i,n)),n3.set(n,e)}return e}function WIe(n){const e=n.createElement("input");return e.className="htCheckboxRendererInput",e.type="checkbox",e.setAttribute("tabindex","-1"),e.cloneNode(!1)}function jIe(n,e,t){const i=n.createElement("label");return i.className=`htCheckboxRendererLabel ${t?"fullWidth":""}`,i.appendChild(n.createTextNode(e)),i.cloneNode(!0)}function zIe(n,e){const{target:t}=n;$L(t)&&(!t.hasAttribute(Tp)||!t.hasAttribute(Mp)||setTimeout(e.listen,10))}function UIe(n,e){const{target:t}=n;if(!$L(t)||!t.hasAttribute(Tp)||!t.hasAttribute(Mp))return;const i=parseInt(t.getAttribute(Tp),10),r=parseInt(t.getAttribute(Mp),10);e.getCellMeta(i,r).readOnly&&n.preventDefault()}function GIe(n,e){const{target:t}=n;if(!$L(t)||!t.hasAttribute(Tp)||!t.hasAttribute(Mp))return;const i=parseInt(t.getAttribute(Tp),10),r=parseInt(t.getAttribute(Mp),10),s=e.getCellMeta(i,r);if(!s.readOnly){let o=null;n.target.checked?o=s.uncheckedTemplate===void 0?!0:s.checkedTemplate:o=s.uncheckedTemplate===void 0?!1:s.uncheckedTemplate,e.setDataAtCell(i,r,o)}}function $L(n){return n.tagName==="INPUT"&&n.getAttribute("type")==="checkbox"}const YIe="handsontable";function FL(n,e,t,i,r,s,o){tm.apply(this,[n,e,t,i,r,s,o])}FL.RENDERER_TYPE=YIe;function tC(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var GY={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(i,r,s){function o(c,u){if(!r[c]){if(!i[c]){var h=typeof tC=="function"&&tC;if(!u&&h)return h(c,!0);if(a)return a(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var f=r[c]={exports:{}};i[c][0].call(f.exports,function(g){return o(i[c][1][g]||g)},f,f.exports,t,i,r,s)}return r[c].exports}for(var a=typeof tC=="function"&&tC,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,i,r){(function(s){var o,a=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,l=Math.ceil,c=Math.floor,u="[BigNumber Error] ",h=u+"Number primitive has more than 15 significant digits: ",d=1e14,f=14,g=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,b=1e9;function y(x){var P=0|x;return 0<x||x===P?P:P-1}function w(x){for(var P,D,B=1,V=x.length,z=x[0]+"";B<V;){for(P=x[B++]+"",D=f-P.length;D--;P="0"+P);z+=P}for(V=z.length;z.charCodeAt(--V)===48;);return z.slice(0,V+1||1)}function R(x,P){var D,B,V=x.c,z=P.c,L=x.s,k=P.s,F=x.e,G=P.e;if(!L||!k)return null;if(D=V&&!V[0],B=z&&!z[0],D||B)return D?B?0:-k:L;if(L!=k)return L;if(D=L<0,B=F==G,!V||!z)return B?0:!V^D?1:-1;if(!B)return G<F^D?1:-1;for(k=(F=V.length)<(G=z.length)?F:G,L=0;L<k;L++)if(V[L]!=z[L])return V[L]>z[L]^D?1:-1;return F==G?0:G<F^D?1:-1}function E(x,P,D,B){if(x<P||D<x||x!==(x<0?l(x):c(x)))throw Error(u+(B||"Argument")+(typeof x=="number"?x<P||D<x?" out of range: ":" not an integer: ":" not a primitive number: ")+String(x))}function _(x){var P=x.c.length-1;return y(x.e/f)==P&&x.c[P]%2!=0}function T(x,P){return(1<x.length?x.charAt(0)+"."+x.slice(1):x)+(P<0?"e":"e+")+P}function I(x,P,D){var B,V;if(P<0){for(V=D+".";++P;V+=D);x=V+x}else if(++P>(B=x.length)){for(V=D,P-=B;--P;V+=D);x+=V}else P<B&&(x=x.slice(0,P)+"."+x.slice(P));return x}(o=function x(P){var D,B,V,z,L,k,F,G,U,se,v=J.prototype={constructor:J,toString:null,valueOf:null},C=new J(1),S=20,A=4,H=-7,M=21,$=-1e7,q=1e7,Q=!1,ce=1,le=0,Me={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Ce="0123456789abcdefghijklmnopqrstuvwxyz";function J(O,N){var W,ee,Y,ie,Z,K,te,ne,re=this;if(!(re instanceof J))return new J(O,N);if(N==null){if(O instanceof J)return re.s=O.s,re.e=O.e,void(re.c=(O=O.c)?O.slice():O);if((K=typeof O=="number")&&0*O==0){if(re.s=1/O<0?(O=-O,-1):1,O===~~O){for(ie=0,Z=O;10<=Z;Z/=10,ie++);return re.e=ie,void(re.c=[O])}ne=String(O)}else{if(ne=String(O),!a.test(ne))return V(re,ne,K);re.s=ne.charCodeAt(0)==45?(ne=ne.slice(1),-1):1}-1<(ie=ne.indexOf("."))&&(ne=ne.replace(".","")),0<(Z=ne.search(/e/i))?(ie<0&&(ie=Z),ie+=+ne.slice(Z+1),ne=ne.substring(0,Z)):ie<0&&(ie=ne.length)}else{if(E(N,2,Ce.length,"Base"),ne=String(O),N==10)return ve(re=new J(O instanceof J?O:ne),S+re.e+1,A);if(K=typeof O=="number"){if(0*O!=0)return V(re,ne,K,N);if(re.s=1/O<0?(ne=ne.slice(1),-1):1,J.DEBUG&&15<ne.replace(/^0\.0*|\./,"").length)throw Error(h+O);K=!1}else re.s=ne.charCodeAt(0)===45?(ne=ne.slice(1),-1):1;for(W=Ce.slice(0,N),ie=Z=0,te=ne.length;Z<te;Z++)if(W.indexOf(ee=ne.charAt(Z))<0){if(ee=="."){if(ie<Z){ie=te;continue}}else if(!Y&&(ne==ne.toUpperCase()&&(ne=ne.toLowerCase())||ne==ne.toLowerCase()&&(ne=ne.toUpperCase()))){Y=!0,Z=-1,ie=0;continue}return V(re,String(O),K,N)}-1<(ie=(ne=B(ne,N,10,re.s)).indexOf("."))?ne=ne.replace(".",""):ie=ne.length}for(Z=0;ne.charCodeAt(Z)===48;Z++);for(te=ne.length;ne.charCodeAt(--te)===48;);if(ne=ne.slice(Z,++te)){if(te-=Z,K&&J.DEBUG&&15<te&&(g<O||O!==c(O)))throw Error(h+re.s*O);if(q<(ie=ie-Z-1))re.c=re.e=null;else if(ie<$)re.c=[re.e=0];else{if(re.e=ie,re.c=[],Z=(ie+1)%f,ie<0&&(Z+=f),Z<te){for(Z&&re.c.push(+ne.slice(0,Z)),te-=f;Z<te;)re.c.push(+ne.slice(Z,Z+=f));ne=ne.slice(Z),Z=f-ne.length}else Z-=te;for(;Z--;ne+="0");re.c.push(+ne)}}else re.c=[re.e=0]}function oe(O,N,W,ee){var Y,ie,Z,K,te;if(W==null?W=A:E(W,0,8),!O.c)return O.toString();if(Y=O.c[0],Z=O.e,N==null)te=w(O.c),te=ee==1||ee==2&&(Z<=H||M<=Z)?T(te,Z):I(te,Z,"0");else if(ie=(O=ve(new J(O),N,W)).e,K=(te=w(O.c)).length,ee==1||ee==2&&(N<=ie||ie<=H)){for(;K<N;te+="0",K++);te=T(te,ie)}else if(N-=Z,te=I(te,ie,"0"),K<ie+1){if(0<--N)for(te+=".";N--;te+="0");}else if(0<(N+=ie-K))for(ie+1==K&&(te+=".");N--;te+="0");return O.s<0&&Y?"-"+te:te}function ae(O,N){for(var W,ee=1,Y=new J(O[0]);ee<O.length;ee++){if(!(W=new J(O[ee])).s){Y=W;break}N.call(Y,W)&&(Y=W)}return Y}function Fe(O,N,W){for(var ee=1,Y=N.length;!N[--Y];N.pop());for(Y=N[0];10<=Y;Y/=10,ee++);return(W=ee+W*f-1)>q?O.c=O.e=null:O.c=W<$?[O.e=0]:(O.e=W,N),O}function ve(O,N,W,ee){var Y,ie,Z,K,te,ne,re,be=O.c,Ae=p;if(be){e:{for(Y=1,K=be[0];10<=K;K/=10,Y++);if((ie=N-Y)<0)ie+=f,Z=N,re=(te=be[ne=0])/Ae[Y-Z-1]%10|0;else if((ne=l((ie+1)/f))>=be.length){if(!ee)break e;for(;be.length<=ne;be.push(0));te=re=0,Z=(ie%=f)-f+(Y=1)}else{for(te=K=be[ne],Y=1;10<=K;K/=10,Y++);re=(Z=(ie%=f)-f+Y)<0?0:te/Ae[Y-Z-1]%10|0}if(ee=ee||N<0||be[ne+1]!=null||(Z<0?te:te%Ae[Y-Z-1]),ee=W<4?(re||ee)&&(W==0||W==(O.s<0?3:2)):5<re||re==5&&(W==4||ee||W==6&&(0<ie?0<Z?te/Ae[Y-Z]:0:be[ne-1])%10&1||W==(O.s<0?8:7)),N<1||!be[0])return be.length=0,ee?(N-=O.e+1,be[0]=Ae[(f-N%f)%f],O.e=-N||0):be[0]=O.e=0,O;if(ie==0?(be.length=ne,K=1,ne--):(be.length=ne+1,K=Ae[f-ie],be[ne]=0<Z?c(te/Ae[Y-Z]%Ae[Z])*K:0),ee)for(;;){if(ne==0){for(ie=1,Z=be[0];10<=Z;Z/=10,ie++);for(Z=be[0]+=K,K=1;10<=Z;Z/=10,K++);ie!=K&&(O.e++,be[0]==d&&(be[0]=1));break}if(be[ne]+=K,be[ne]!=d)break;be[ne--]=0,K=1}for(ie=be.length;be[--ie]===0;be.pop());}O.e>q?O.c=O.e=null:O.e<$&&(O.c=[O.e=0])}return O}function Se(O){var N,W=O.e;return W===null?O.toString():(N=w(O.c),N=W<=H||M<=W?T(N,W):I(N,W,"0"),O.s<0?"-"+N:N)}return J.clone=x,J.ROUND_UP=0,J.ROUND_DOWN=1,J.ROUND_CEIL=2,J.ROUND_FLOOR=3,J.ROUND_HALF_UP=4,J.ROUND_HALF_DOWN=5,J.ROUND_HALF_EVEN=6,J.ROUND_HALF_CEIL=7,J.ROUND_HALF_FLOOR=8,J.EUCLID=9,J.config=J.set=function(O){var N,W;if(O!=null){if(typeof O!="object")throw Error(u+"Object expected: "+O);if(O.hasOwnProperty(N="DECIMAL_PLACES")&&(E(W=O[N],0,b,N),S=W),O.hasOwnProperty(N="ROUNDING_MODE")&&(E(W=O[N],0,8,N),A=W),O.hasOwnProperty(N="EXPONENTIAL_AT")&&((W=O[N])&&W.pop?(E(W[0],-b,0,N),E(W[1],0,b,N),H=W[0],M=W[1]):(E(W,-b,b,N),H=-(M=W<0?-W:W))),O.hasOwnProperty(N="RANGE"))if((W=O[N])&&W.pop)E(W[0],-b,-1,N),E(W[1],1,b,N),$=W[0],q=W[1];else{if(E(W,-b,b,N),!W)throw Error(u+N+" cannot be zero: "+W);$=-(q=W<0?-W:W)}if(O.hasOwnProperty(N="CRYPTO")){if((W=O[N])!==!!W)throw Error(u+N+" not true or false: "+W);if(W){if(typeof crypto>"u"||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Q=!W,Error(u+"crypto unavailable");Q=W}else Q=W}if(O.hasOwnProperty(N="MODULO_MODE")&&(E(W=O[N],0,9,N),ce=W),O.hasOwnProperty(N="POW_PRECISION")&&(E(W=O[N],0,b,N),le=W),O.hasOwnProperty(N="FORMAT")){if(typeof(W=O[N])!="object")throw Error(u+N+" not an object: "+W);Me=W}if(O.hasOwnProperty(N="ALPHABET")){if(typeof(W=O[N])!="string"||/^.$|[+-.\s]|(.).*\1/.test(W))throw Error(u+N+" invalid: "+W);Ce=W}}return{DECIMAL_PLACES:S,ROUNDING_MODE:A,EXPONENTIAL_AT:[H,M],RANGE:[$,q],CRYPTO:Q,MODULO_MODE:ce,POW_PRECISION:le,FORMAT:Me,ALPHABET:Ce}},J.isBigNumber=function(O){return O instanceof J||O&&O._isBigNumber===!0||!1},J.maximum=J.max=function(){return ae(arguments,v.lt)},J.minimum=J.min=function(){return ae(arguments,v.gt)},J.random=(z=9007199254740992,L=Math.random()*z&2097151?function(){return c(Math.random()*z)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(O){var N,W,ee,Y,ie,Z=0,K=[],te=new J(C);if(O==null?O=S:E(O,0,b),Y=l(O/f),Q)if(crypto.getRandomValues){for(N=crypto.getRandomValues(new Uint32Array(Y*=2));Z<Y;)9e15<=(ie=131072*N[Z]+(N[Z+1]>>>11))?(W=crypto.getRandomValues(new Uint32Array(2)),N[Z]=W[0],N[Z+1]=W[1]):(K.push(ie%1e14),Z+=2);Z=Y/2}else{if(!crypto.randomBytes)throw Q=!1,Error(u+"crypto unavailable");for(N=crypto.randomBytes(Y*=7);Z<Y;)9e15<=(ie=281474976710656*(31&N[Z])+1099511627776*N[Z+1]+4294967296*N[Z+2]+16777216*N[Z+3]+(N[Z+4]<<16)+(N[Z+5]<<8)+N[Z+6])?crypto.randomBytes(7).copy(N,Z):(K.push(ie%1e14),Z+=7);Z=Y/7}if(!Q)for(;Z<Y;)(ie=L())<9e15&&(K[Z++]=ie%1e14);for(Y=K[--Z],O%=f,Y&&O&&(ie=p[f-O],K[Z]=c(Y/ie)*ie);K[Z]===0;K.pop(),Z--);if(Z<0)K=[ee=0];else{for(ee=-1;K[0]===0;K.splice(0,1),ee-=f);for(Z=1,ie=K[0];10<=ie;ie/=10,Z++);Z<f&&(ee-=f-Z)}return te.e=ee,te.c=K,te}),J.sum=function(){for(var O=1,N=arguments,W=new J(N[0]);O<N.length;)W=W.plus(N[O++]);return W},B=function(){var O="0123456789";function N(W,ee,Y,ie){for(var Z,K,te=[0],ne=0,re=W.length;ne<re;){for(K=te.length;K--;te[K]*=ee);for(te[0]+=ie.indexOf(W.charAt(ne++)),Z=0;Z<te.length;Z++)te[Z]>Y-1&&(te[Z+1]==null&&(te[Z+1]=0),te[Z+1]+=te[Z]/Y|0,te[Z]%=Y)}return te.reverse()}return function(W,ee,Y,ie,Z){var K,te,ne,re,be,Ae,Be,ot,_t=W.indexOf("."),dt=S,Ke=A;for(0<=_t&&(re=le,le=0,W=W.replace(".",""),Ae=(ot=new J(ee)).pow(W.length-_t),le=re,ot.c=N(I(w(Ae.c),Ae.e,"0"),10,Y,O),ot.e=ot.c.length),ne=re=(Be=N(W,ee,Y,Z?(K=Ce,O):(K=O,Ce))).length;Be[--re]==0;Be.pop());if(!Be[0])return K.charAt(0);if(_t<0?--ne:(Ae.c=Be,Ae.e=ne,Ae.s=ie,Be=(Ae=D(Ae,ot,dt,Ke,Y)).c,be=Ae.r,ne=Ae.e),_t=Be[te=ne+dt+1],re=Y/2,be=be||te<0||Be[te+1]!=null,be=Ke<4?(_t!=null||be)&&(Ke==0||Ke==(Ae.s<0?3:2)):re<_t||_t==re&&(Ke==4||be||Ke==6&&1&Be[te-1]||Ke==(Ae.s<0?8:7)),te<1||!Be[0])W=be?I(K.charAt(1),-dt,K.charAt(0)):K.charAt(0);else{if(Be.length=te,be)for(--Y;++Be[--te]>Y;)Be[te]=0,te||(++ne,Be=[1].concat(Be));for(re=Be.length;!Be[--re];);for(_t=0,W="";_t<=re;W+=K.charAt(Be[_t++]));W=I(W,ne,K.charAt(0))}return W}}(),D=function(){function O(ee,Y,ie){var Z,K,te,ne,re=0,be=ee.length,Ae=Y%m,Be=Y/m|0;for(ee=ee.slice();be--;)re=((K=Ae*(te=ee[be]%m)+(Z=Be*te+(ne=ee[be]/m|0)*Ae)%m*m+re)/ie|0)+(Z/m|0)+Be*ne,ee[be]=K%ie;return re&&(ee=[re].concat(ee)),ee}function N(ee,Y,ie,Z){var K,te;if(ie!=Z)te=Z<ie?1:-1;else for(K=te=0;K<ie;K++)if(ee[K]!=Y[K]){te=ee[K]>Y[K]?1:-1;break}return te}function W(ee,Y,ie,Z){for(var K=0;ie--;)ee[ie]-=K,K=ee[ie]<Y[ie]?1:0,ee[ie]=K*Z+ee[ie]-Y[ie];for(;!ee[0]&&1<ee.length;ee.splice(0,1));}return function(ee,Y,ie,Z,K){var te,ne,re,be,Ae,Be,ot,_t,dt,Ke,Tt,Ln,If,wo,lm,Ms,Mn,bi=ee.s==Y.s?1:-1,Bi=ee.c,yn=Y.c;if(!(Bi&&Bi[0]&&yn&&yn[0]))return new J(ee.s&&Y.s&&(Bi?!yn||Bi[0]!=yn[0]:yn)?Bi&&Bi[0]==0||!yn?0*bi:bi/0:NaN);for(dt=(_t=new J(bi)).c=[],bi=ie+(ne=ee.e-Y.e)+1,K||(K=d,ne=y(ee.e/f)-y(Y.e/f),bi=bi/f|0),re=0;yn[re]==(Bi[re]||0);re++);if(yn[re]>(Bi[re]||0)&&ne--,bi<0)dt.push(1),be=!0;else{for(wo=Bi.length,Ms=yn.length,bi+=2,1<(Ae=c(K/(yn[re=0]+1)))&&(yn=O(yn,Ae,K),Bi=O(Bi,Ae,K),Ms=yn.length,wo=Bi.length),If=Ms,Tt=(Ke=Bi.slice(0,Ms)).length;Tt<Ms;Ke[Tt++]=0);Mn=yn.slice(),Mn=[0].concat(Mn),lm=yn[0],yn[1]>=K/2&&lm++;do{if(Ae=0,(te=N(yn,Ke,Ms,Tt))<0){if(Ln=Ke[0],Ms!=Tt&&(Ln=Ln*K+(Ke[1]||0)),1<(Ae=c(Ln/lm)))for(K<=Ae&&(Ae=K-1),ot=(Be=O(yn,Ae,K)).length,Tt=Ke.length;N(Be,Ke,ot,Tt)==1;)Ae--,W(Be,Ms<ot?Mn:yn,ot,K),ot=Be.length,te=1;else Ae==0&&(te=Ae=1),ot=(Be=yn.slice()).length;if(ot<Tt&&(Be=[0].concat(Be)),W(Ke,Be,Tt,K),Tt=Ke.length,te==-1)for(;N(yn,Ke,Ms,Tt)<1;)Ae++,W(Ke,Ms<Tt?Mn:yn,Tt,K),Tt=Ke.length}else te===0&&(Ae++,Ke=[0]);dt[re++]=Ae,Ke[0]?Ke[Tt++]=Bi[If]||0:(Ke=[Bi[If]],Tt=1)}while((If++<wo||Ke[0]!=null)&&bi--);be=Ke[0]!=null,dt[0]||dt.splice(0,1)}if(K==d){for(re=1,bi=dt[0];10<=bi;bi/=10,re++);ve(_t,ie+(_t.e=re+ne*f-1)+1,Z,be)}else _t.e=ne,_t.r=+be;return _t}}(),k=/^(-?)0([xbo])(?=\w[\w.]*$)/i,F=/^([^.]+)\.$/,G=/^\.([^.]+)$/,U=/^-?(Infinity|NaN)$/,se=/^\s*\+(?=[\w.])|^\s+|\s+$/g,V=function(O,N,W,ee){var Y,ie=W?N:N.replace(se,"");if(U.test(ie))O.s=isNaN(ie)?null:ie<0?-1:1,O.c=O.e=null;else{if(!W&&(ie=ie.replace(k,function(Z,K,te){return Y=(te=te.toLowerCase())=="x"?16:te=="b"?2:8,ee&&ee!=Y?Z:K}),ee&&(Y=ee,ie=ie.replace(F,"$1").replace(G,"0.$1")),N!=ie))return new J(ie,Y);if(J.DEBUG)throw Error(u+"Not a"+(ee?" base "+ee:"")+" number: "+N);O.c=O.e=O.s=null}},v.absoluteValue=v.abs=function(){var O=new J(this);return O.s<0&&(O.s=1),O},v.comparedTo=function(O,N){return R(this,new J(O,N))},v.decimalPlaces=v.dp=function(O,N){var W,ee,Y;if(O!=null)return E(O,0,b),N==null?N=A:E(N,0,8),ve(new J(this),O+this.e+1,N);if(!(W=this.c))return null;if(ee=((Y=W.length-1)-y(this.e/f))*f,Y=W[Y])for(;Y%10==0;Y/=10,ee--);return ee<0&&(ee=0),ee},v.dividedBy=v.div=function(O,N){return D(this,new J(O,N),S,A)},v.dividedToIntegerBy=v.idiv=function(O,N){return D(this,new J(O,N),0,1)},v.exponentiatedBy=v.pow=function(O,N){var W,ee,Y,ie,Z,K,te,ne,re=this;if((O=new J(O)).c&&!O.isInteger())throw Error(u+"Exponent not an integer: "+Se(O));if(N!=null&&(N=new J(N)),Z=14<O.e,!re.c||!re.c[0]||re.c[0]==1&&!re.e&&re.c.length==1||!O.c||!O.c[0])return ne=new J(Math.pow(+Se(re),Z?2-_(O):+Se(O))),N?ne.mod(N):ne;if(K=O.s<0,N){if(N.c?!N.c[0]:!N.s)return new J(NaN);(ee=!K&&re.isInteger()&&N.isInteger())&&(re=re.mod(N))}else{if(9<O.e&&(0<re.e||re.e<-1||(re.e==0?1<re.c[0]||Z&&24e7<=re.c[1]:re.c[0]<8e13||Z&&re.c[0]<=9999975e7)))return ie=re.s<0&&_(O)?-0:0,-1<re.e&&(ie=1/ie),new J(K?1/ie:ie);le&&(ie=l(le/f+2))}for(te=Z?(W=new J(.5),K&&(O.s=1),_(O)):(Y=Math.abs(+Se(O)))%2,ne=new J(C);;){if(te){if(!(ne=ne.times(re)).c)break;ie?ne.c.length>ie&&(ne.c.length=ie):ee&&(ne=ne.mod(N))}if(Y){if((Y=c(Y/2))===0)break;te=Y%2}else if(ve(O=O.times(W),O.e+1,1),14<O.e)te=_(O);else{if((Y=+Se(O))==0)break;te=Y%2}re=re.times(re),ie?re.c&&re.c.length>ie&&(re.c.length=ie):ee&&(re=re.mod(N))}return ee?ne:(K&&(ne=C.div(ne)),N?ne.mod(N):ie?ve(ne,le,A,void 0):ne)},v.integerValue=function(O){var N=new J(this);return O==null?O=A:E(O,0,8),ve(N,N.e+1,O)},v.isEqualTo=v.eq=function(O,N){return R(this,new J(O,N))===0},v.isFinite=function(){return!!this.c},v.isGreaterThan=v.gt=function(O,N){return 0<R(this,new J(O,N))},v.isGreaterThanOrEqualTo=v.gte=function(O,N){return(N=R(this,new J(O,N)))===1||N===0},v.isInteger=function(){return!!this.c&&y(this.e/f)>this.c.length-2},v.isLessThan=v.lt=function(O,N){return R(this,new J(O,N))<0},v.isLessThanOrEqualTo=v.lte=function(O,N){return(N=R(this,new J(O,N)))===-1||N===0},v.isNaN=function(){return!this.s},v.isNegative=function(){return this.s<0},v.isPositive=function(){return 0<this.s},v.isZero=function(){return!!this.c&&this.c[0]==0},v.minus=function(O,N){var W,ee,Y,ie,Z=this,K=Z.s;if(N=(O=new J(O,N)).s,!K||!N)return new J(NaN);if(K!=N)return O.s=-N,Z.plus(O);var te=Z.e/f,ne=O.e/f,re=Z.c,be=O.c;if(!te||!ne){if(!re||!be)return re?(O.s=-N,O):new J(be?Z:NaN);if(!re[0]||!be[0])return be[0]?(O.s=-N,O):new J(re[0]?Z:A==3?-0:0)}if(te=y(te),ne=y(ne),re=re.slice(),K=te-ne){for((Y=(ie=K<0)?(K=-K,re):(ne=te,be)).reverse(),N=K;N--;Y.push(0));Y.reverse()}else for(ee=(ie=(K=re.length)<(N=be.length))?K:N,K=N=0;N<ee;N++)if(re[N]!=be[N]){ie=re[N]<be[N];break}if(ie&&(Y=re,re=be,be=Y,O.s=-O.s),0<(N=(ee=be.length)-(W=re.length)))for(;N--;re[W++]=0);for(N=d-1;K<ee;){if(re[--ee]<be[ee]){for(W=ee;W&&!re[--W];re[W]=N);--re[W],re[ee]+=d}re[ee]-=be[ee]}for(;re[0]==0;re.splice(0,1),--ne);return re[0]?Fe(O,re,ne):(O.s=A==3?-1:1,O.c=[O.e=0],O)},v.modulo=v.mod=function(O,N){var W,ee,Y=this;return O=new J(O,N),!Y.c||!O.s||O.c&&!O.c[0]?new J(NaN):!O.c||Y.c&&!Y.c[0]?new J(Y):(ce==9?(ee=O.s,O.s=1,W=D(Y,O,0,3),O.s=ee,W.s*=ee):W=D(Y,O,0,ce),(O=Y.minus(W.times(O))).c[0]||ce!=1||(O.s=Y.s),O)},v.multipliedBy=v.times=function(O,N){var W,ee,Y,ie,Z,K,te,ne,re,be,Ae,Be,ot,_t,dt,Ke=this,Tt=Ke.c,Ln=(O=new J(O,N)).c;if(!(Tt&&Ln&&Tt[0]&&Ln[0]))return!Ke.s||!O.s||Tt&&!Tt[0]&&!Ln||Ln&&!Ln[0]&&!Tt?O.c=O.e=O.s=null:(O.s*=Ke.s,Tt&&Ln?(O.c=[0],O.e=0):O.c=O.e=null),O;for(ee=y(Ke.e/f)+y(O.e/f),O.s*=Ke.s,(te=Tt.length)<(be=Ln.length)&&(ot=Tt,Tt=Ln,Ln=ot,Y=te,te=be,be=Y),Y=te+be,ot=[];Y--;ot.push(0));for(_t=d,dt=m,Y=be;0<=--Y;){for(W=0,Ae=Ln[Y]%dt,Be=Ln[Y]/dt|0,ie=Y+(Z=te);Y<ie;)W=((ne=Ae*(ne=Tt[--Z]%dt)+(K=Be*ne+(re=Tt[Z]/dt|0)*Ae)%dt*dt+ot[ie]+W)/_t|0)+(K/dt|0)+Be*re,ot[ie--]=ne%_t;ot[ie]=W}return W?++ee:ot.splice(0,1),Fe(O,ot,ee)},v.negated=function(){var O=new J(this);return O.s=-O.s||null,O},v.plus=function(O,N){var W,ee=this,Y=ee.s;if(N=(O=new J(O,N)).s,!Y||!N)return new J(NaN);if(Y!=N)return O.s=-N,ee.minus(O);var ie=ee.e/f,Z=O.e/f,K=ee.c,te=O.c;if(!ie||!Z){if(!K||!te)return new J(Y/0);if(!K[0]||!te[0])return te[0]?O:new J(K[0]?ee:0*Y)}if(ie=y(ie),Z=y(Z),K=K.slice(),Y=ie-Z){for((W=0<Y?(Z=ie,te):(Y=-Y,K)).reverse();Y--;W.push(0));W.reverse()}for((Y=K.length)-(N=te.length)<0&&(W=te,te=K,K=W,N=Y),Y=0;N;)Y=(K[--N]=K[N]+te[N]+Y)/d|0,K[N]=d===K[N]?0:K[N]%d;return Y&&(K=[Y].concat(K),++Z),Fe(O,K,Z)},v.precision=v.sd=function(O,N){var W,ee,Y;if(O!=null&&O!==!!O)return E(O,1,b),N==null?N=A:E(N,0,8),ve(new J(this),O,N);if(!(W=this.c))return null;if(ee=(Y=W.length-1)*f+1,Y=W[Y]){for(;Y%10==0;Y/=10,ee--);for(Y=W[0];10<=Y;Y/=10,ee++);}return O&&this.e+1>ee&&(ee=this.e+1),ee},v.shiftedBy=function(O){return E(O,-g,g),this.times("1e"+O)},v.squareRoot=v.sqrt=function(){var O,N,W,ee,Y,ie=this,Z=ie.c,K=ie.s,te=ie.e,ne=S+4,re=new J("0.5");if(K!==1||!Z||!Z[0])return new J(!K||K<0&&(!Z||Z[0])?NaN:Z?ie:1/0);if((W=(K=Math.sqrt(+Se(ie)))==0||K==1/0?(((N=w(Z)).length+te)%2==0&&(N+="0"),K=Math.sqrt(+N),te=y((te+1)/2)-(te<0||te%2),new J(N=K==1/0?"1e"+te:(N=K.toExponential()).slice(0,N.indexOf("e")+1)+te)):new J(K+"")).c[0]){for((K=(te=W.e)+ne)<3&&(K=0);;)if(Y=W,W=re.times(Y.plus(D(ie,Y,ne,1))),w(Y.c).slice(0,K)===(N=w(W.c)).slice(0,K)){if(W.e<te&&--K,(N=N.slice(K-3,K+1))!="9999"&&(ee||N!="4999")){+N&&(+N.slice(1)||N.charAt(0)!="5")||(ve(W,W.e+S+2,1),O=!W.times(W).eq(ie));break}if(!ee&&(ve(Y,Y.e+S+2,0),Y.times(Y).eq(ie))){W=Y;break}ne+=4,K+=4,ee=1}}return ve(W,W.e+S+1,A,O)},v.toExponential=function(O,N){return O!=null&&(E(O,0,b),O++),oe(this,O,N,1)},v.toFixed=function(O,N){return O!=null&&(E(O,0,b),O=O+this.e+1),oe(this,O,N)},v.toFormat=function(O,N,W){var ee;if(W==null)O!=null&&N&&typeof N=="object"?(W=N,N=null):O&&typeof O=="object"?(W=O,O=N=null):W=Me;else if(typeof W!="object")throw Error(u+"Argument not an object: "+W);if(ee=this.toFixed(O,N),this.c){var Y,ie=ee.split("."),Z=+W.groupSize,K=+W.secondaryGroupSize,te=W.groupSeparator||"",ne=ie[0],re=ie[1],be=this.s<0,Ae=be?ne.slice(1):ne,Be=Ae.length;if(K&&(Y=Z,Z=K,Be-=K=Y),0<Z&&0<Be){for(Y=Be%Z||Z,ne=Ae.substr(0,Y);Y<Be;Y+=Z)ne+=te+Ae.substr(Y,Z);0<K&&(ne+=te+Ae.slice(Y)),be&&(ne="-"+ne)}ee=re?ne+(W.decimalSeparator||"")+((K=+W.fractionGroupSize)?re.replace(new RegExp("\\d{"+K+"}\\B","g"),"$&"+(W.fractionGroupSeparator||"")):re):ne}return(W.prefix||"")+ee+(W.suffix||"")},v.toFraction=function(O){var N,W,ee,Y,ie,Z,K,te,ne,re,be,Ae,Be=this,ot=Be.c;if(O!=null&&(!(K=new J(O)).isInteger()&&(K.c||K.s!==1)||K.lt(C)))throw Error(u+"Argument "+(K.isInteger()?"out of range: ":"not an integer: ")+Se(K));if(!ot)return new J(Be);for(N=new J(C),ne=W=new J(C),ee=te=new J(C),Ae=w(ot),ie=N.e=Ae.length-Be.e-1,N.c[0]=p[(Z=ie%f)<0?f+Z:Z],O=!O||0<K.comparedTo(N)?0<ie?N:ne:K,Z=q,q=1/0,K=new J(Ae),te.c[0]=0;re=D(K,N,0,1),(Y=W.plus(re.times(ee))).comparedTo(O)!=1;)W=ee,ee=Y,ne=te.plus(re.times(Y=ne)),te=Y,N=K.minus(re.times(Y=N)),K=Y;return Y=D(O.minus(W),ee,0,1),te=te.plus(Y.times(ne)),W=W.plus(Y.times(ee)),te.s=ne.s=Be.s,be=D(ne,ee,ie*=2,A).minus(Be).abs().comparedTo(D(te,W,ie,A).minus(Be).abs())<1?[ne,ee]:[te,W],q=Z,be},v.toNumber=function(){return+Se(this)},v.toPrecision=function(O,N){return O!=null&&E(O,1,b),oe(this,O,N,2)},v.toString=function(O){var N,W=this,ee=W.s,Y=W.e;return Y===null?ee?(N="Infinity",ee<0&&(N="-"+N)):N="NaN":(N=O==null?Y<=H||M<=Y?T(w(W.c),Y):I(w(W.c),Y,"0"):O===10?I(w((W=ve(new J(W),S+Y+1,A)).c),W.e,"0"):(E(O,2,Ce.length,"Base"),B(I(w(W.c),Y,"0"),10,O,ee,!0)),ee<0&&W.c[0]&&(N="-"+N)),N},v.valueOf=v.toJSON=function(){return Se(this)},v._isBigNumber=!0,typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(v[Symbol.toStringTag]="BigNumber",v[Symbol.for("nodejs.util.inspect.custom")]=v.valueOf),P!=null&&J.set(P),J}()).default=o.BigNumber=o,i!==void 0&&i.exports?i.exports=o:(s||(s=typeof self<"u"&&self?self:window),s.BigNumber=o)})(this)},{}],2:[function(t,i,r){i.exports={languageTag:"en-US",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},spaceSeparated:!1,ordinal:function(s){var o=s%10;return~~(s%100/10)==1?"th":o===1?"st":o===2?"nd":o===3?"rd":"th"},currency:{symbol:"$",position:"prefix",code:"USD"},currencyFormat:{thousandSeparated:!0,totalLength:4,spaceSeparated:!0},formats:{fourDigits:{totalLength:4,spaceSeparated:!0},fullWithTwoDecimals:{output:"currency",thousandSeparated:!0,mantissa:2},fullWithTwoDecimalsNoCurrency:{thousandSeparated:!0,mantissa:2},fullWithNoDecimals:{output:"currency",thousandSeparated:!0,mantissa:0}}}},{}],3:[function(t,i,r){function s(y,w){return function(R){if(Array.isArray(R))return R}(y)||function(R,E){var _=[],T=!0,I=!1,x=void 0;try{for(var P,D=R[Symbol.iterator]();!(T=(P=D.next()).done)&&(_.push(P.value),!E||_.length!==E);T=!0);}catch(B){I=!0,x=B}finally{try{T||D.return==null||D.return()}finally{if(I)throw x}}return _}(y,w)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=t("./globalState"),a=t("./validating"),l=t("./parsing"),c=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],u={general:{scale:1024,suffixes:c,marker:"bd"},binary:{scale:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],marker:"b"},decimal:{scale:1e3,suffixes:c,marker:"d"}},h={totalLength:0,characteristic:0,forceAverage:!1,average:!1,mantissa:-1,optionalMantissa:!0,thousandSeparated:!1,spaceSeparated:!1,negative:"sign",forceSign:!1};function d(y){var w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},R=2<arguments.length?arguments[2]:void 0;if(typeof w=="string"&&(w=l.parseFormat(w)),!a.validateFormat(w))return"ERROR: invalid format";var E=w.prefix||"",_=w.postfix||"",T=function(I,x,P){switch(x.output){case"currency":return x=b(x,o.currentCurrencyDefaultFormat()),function(Ce,J,oe){var ae=oe.currentCurrency(),Fe=Object.assign({},h,J),ve=void 0,Se="",O=!!Fe.totalLength||!!Fe.forceAverage||Fe.average,N=J.currencyPosition||ae.position,W=J.currencySymbol||ae.symbol;Fe.spaceSeparated&&(Se=" "),N==="infix"&&(ve=Se+W+Se);var ee=m({instance:Ce,providedFormat:J,state:oe,decimalSeparator:ve});return N==="prefix"&&(ee=Ce._value<0&&Fe.negative==="sign"?"-".concat(Se).concat(W).concat(ee.slice(1)):W+Se+ee),N&&N!=="postfix"||(ee=ee+(Se=O?"":Se)+W),ee}(I,x,o);case"percent":return x=b(x,o.currentPercentageDefaultFormat()),function(Ce,J,oe,ae){var Fe=J.prefixSymbol,ve=m({instance:ae(100*Ce._value),providedFormat:J,state:oe}),Se=Object.assign({},h,J);return Fe?"%".concat(Se.spaceSeparated?" ":"").concat(ve):"".concat(ve).concat(Se.spaceSeparated?" ":"","%")}(I,x,o,P);case"byte":return x=b(x,o.currentByteDefaultFormat()),C=I,A=o,H=P,M=(S=x).base||"binary",$=u[M],q=f(C._value,$.suffixes,$.scale),Q=q.value,ce=q.suffix,le=m({instance:H(Q),providedFormat:S,state:A,defaults:A.currentByteDefaultFormat()}),Me=A.currentAbbreviations(),"".concat(le).concat(Me.spaced?" ":"").concat(ce);case"time":return x=b(x,o.currentTimeDefaultFormat()),G=I,U=Math.floor(G._value/60/60),se=Math.floor((G._value-60*U*60)/60),v=Math.round(G._value-60*U*60-60*se),"".concat(U,":").concat(se<10?"0":"").concat(se,":").concat(v<10?"0":"").concat(v);case"ordinal":return x=b(x,o.currentOrdinalDefaultFormat()),D=I,B=x,z=(V=o).currentOrdinal(),L=Object.assign({},h,B),k=m({instance:D,providedFormat:B,state:V}),F=z(D._value),"".concat(k).concat(L.spaceSeparated?" ":"").concat(F);case"number":default:return m({instance:I,providedFormat:x,numbro:P})}var D,B,V,z,L,k,F,G,U,se,v,C,S,A,H,M,$,q,Q,ce,le,Me}(y,w,R);return T=(T=E+T)+_}function f(y,w,R){var E=w[0],_=Math.abs(y);if(R<=_){for(var T=1;T<w.length;++T){var I=Math.pow(R,T),x=Math.pow(R,T+1);if(I<=_&&_<x){E=w[T],y/=I;break}}E===w[0]&&(y/=Math.pow(R,w.length-1),E=w[w.length-1])}return{value:y,suffix:E}}function g(y){for(var w="",R=0;R<y;R++)w+="0";return w}function p(y,w){return y.toString().indexOf("e")!==-1?function(R,E){var _=R.toString(),T=s(_.split("e"),2),I=T[0],x=T[1],P=s(I.split("."),2),D=P[0],B=P[1],V=B===void 0?"":B;if(0<+x)_=D+V+g(x-V.length);else{var z=".";z=+D<0?"-0".concat(z):"0".concat(z);var L=(g(-x-1)+Math.abs(D)+V).substr(0,E);L.length<E&&(L+=g(E-L.length)),_=z+L}return 0<+x&&0<E&&(_+=".".concat(g(E))),_}(y,w):(Math.round(+"".concat(y,"e+").concat(w))/Math.pow(10,w)).toFixed(w)}function m(y){var w=y.instance,R=y.providedFormat,E=y.state,_=E===void 0?o:E,T=y.decimalSeparator,I=y.defaults,x=I===void 0?_.currentDefaults():I,P=w._value;if(P===0&&_.hasZeroFormat())return _.getZeroFormat();if(!isFinite(P))return P.toString();var D,B,V,z,L,k,F,G,U=Object.assign({},h,x,R),se=U.totalLength,v=se?0:U.characteristic,C=U.optionalCharacteristic,S=U.forceAverage,A=!!se||!!S||U.average,H=se?-1:A&&R.mantissa===void 0?0:U.mantissa,M=!se&&(R.optionalMantissa===void 0?H===-1:U.optionalMantissa),$=U.trimMantissa,q=U.thousandSeparated,Q=U.spaceSeparated,ce=U.negative,le=U.forceSign,Me=U.exponential,Ce="";if(A){var J=function(O){var N=O.value,W=O.forceAverage,ee=O.abbreviations,Y=O.spaceSeparated,ie=Y!==void 0&&Y,Z=O.totalLength,K=Z===void 0?0:Z,te="",ne=Math.abs(N),re=-1;if(ne>=Math.pow(10,12)&&!W||W==="trillion"?(te=ee.trillion,N/=Math.pow(10,12)):ne<Math.pow(10,12)&&ne>=Math.pow(10,9)&&!W||W==="billion"?(te=ee.billion,N/=Math.pow(10,9)):ne<Math.pow(10,9)&&ne>=Math.pow(10,6)&&!W||W==="million"?(te=ee.million,N/=Math.pow(10,6)):(ne<Math.pow(10,6)&&ne>=Math.pow(10,3)&&!W||W==="thousand")&&(te=ee.thousand,N/=Math.pow(10,3)),te&&(te=(ie?" ":"")+te),K){var be=N.toString().split(".")[0];re=Math.max(K-be.length,0)}return{value:N,abbreviation:te,mantissaPrecision:re}}({value:P,forceAverage:S,abbreviations:_.currentAbbreviations(),spaceSeparated:Q,totalLength:se});P=J.value,Ce+=J.abbreviation,se&&(H=J.mantissaPrecision)}if(Me){var oe=(B=(D={value:P,characteristicPrecision:v}).value,V=D.characteristicPrecision,z=V===void 0?0:V,L=s(B.toExponential().split("e"),2),k=L[0],F=L[1],G=+k,z&&1<z&&(G*=Math.pow(10,z-1),F=0<=(F=+F-(z-1))?"+".concat(F):F),{value:G,abbreviation:"e".concat(F)});P=oe.value,Ce=oe.abbreviation+Ce}var ae,Fe,ve,Se=function(O,N,W,ee,Y){if(ee===-1)return O;var ie=p(N,ee),Z=s(ie.toString().split("."),2),K=Z[0],te=Z[1],ne=te===void 0?"":te;if(ne.match(/^0+$/)&&(W||Y))return K;var re=ne.match(/0+$/);return Y&&re?"".concat(K,".").concat(ne.toString().slice(0,re.index)):ie.toString()}(P.toString(),P,M,H,$);return Se=function(O,N,W,ee,Y){var ie=ee.currentDelimiters(),Z=ie.thousands;Y=Y||ie.decimal;var K=ie.thousandsSize||3,te=O.toString(),ne=te.split(".")[0],re=te.split(".")[1];return W&&(N<0&&(ne=ne.slice(1)),function(be,Ae){for(var Be=[],ot=0,_t=be;0<_t;_t--)ot===Ae&&(Be.unshift(_t),ot=0),ot++;return Be}(ne.length,K).forEach(function(be,Ae){ne=ne.slice(0,be+Ae)+Z+ne.slice(be+Ae)}),N<0&&(ne="-".concat(ne))),te=re?ne+Y+re:ne}(Se=function(O,N,W,ee){var Y=O,ie=s(Y.toString().split("."),2),Z=ie[0],K=ie[1];if(Z.match(/^-?0$/)&&W)return K?"".concat(Z.replace("0",""),".").concat(K):Z.replace("0","");if(Z.length<ee)for(var te=ee-Z.length,ne=0;ne<te;ne++)Y="0".concat(Y);return Y.toString()}(Se,0,C,v),P,q,_,T),(A||Me)&&(Se=Se+Ce),(le||P<0)&&(ae=Se,ve=ce,Se=(Fe=P)===0?ae:+ae==0?ae.replace("-",""):0<Fe?"+".concat(ae):ve==="sign"?ae:"(".concat(ae.replace("-",""),")")),Se}function b(y,w){if(!y)return w;var R=Object.keys(y);return R.length===1&&R[0]==="output"?w:y}i.exports=function(y){return{format:function(){for(var w=arguments.length,R=new Array(w),E=0;E<w;E++)R[E]=arguments[E];return d.apply(void 0,R.concat([y]))},getByteUnit:function(){for(var w=arguments.length,R=new Array(w),E=0;E<w;E++)R[E]=arguments[E];return(function(_){var T=u.general;return f(_._value,T.suffixes,T.scale).suffix}).apply(void 0,R.concat([y]))},getBinaryByteUnit:function(){for(var w=arguments.length,R=new Array(w),E=0;E<w;E++)R[E]=arguments[E];return(function(_){var T=u.binary;return f(_._value,T.suffixes,T.scale).suffix}).apply(void 0,R.concat([y]))},getDecimalByteUnit:function(){for(var w=arguments.length,R=new Array(w),E=0;E<w;E++)R[E]=arguments[E];return(function(_){var T=u.decimal;return f(_._value,T.suffixes,T.scale).suffix}).apply(void 0,R.concat([y]))},formatOrDefault:b}}},{"./globalState":4,"./parsing":8,"./validating":10}],4:[function(t,i,r){var s=t("./en-US"),o=t("./validating"),a=t("./parsing"),l={},c=void 0,u={},h=null,d={};function f(p){c=p}function g(){return u[c]}l.languages=function(){return Object.assign({},u)},l.currentLanguage=function(){return c},l.currentCurrency=function(){return g().currency},l.currentAbbreviations=function(){return g().abbreviations},l.currentDelimiters=function(){return g().delimiters},l.currentOrdinal=function(){return g().ordinal},l.currentDefaults=function(){return Object.assign({},g().defaults,d)},l.currentOrdinalDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().ordinalFormat)},l.currentByteDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().byteFormat)},l.currentPercentageDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().percentageFormat)},l.currentCurrencyDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().currencyFormat)},l.currentTimeDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().timeFormat)},l.setDefaults=function(p){p=a.parseFormat(p),o.validateFormat(p)&&(d=p)},l.getZeroFormat=function(){return h},l.setZeroFormat=function(p){return h=typeof p=="string"?p:null},l.hasZeroFormat=function(){return h!==null},l.languageData=function(p){if(p){if(u[p])return u[p];throw new Error('Unknown tag "'.concat(p,'"'))}return g()},l.registerLanguage=function(p){var m=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(!o.validateLanguage(p))throw new Error("Invalid language data");u[p.languageTag]=p,m&&f(p.languageTag)},l.setLanguage=function(p){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:s.languageTag;if(!u[p]){var b=p.split("-")[0],y=Object.keys(u).find(function(w){return w.split("-")[0]===b});return u[y]?void f(y):void f(m)}f(p)},l.registerLanguage(s),c=s.languageTag,i.exports=l},{"./en-US":2,"./parsing":8,"./validating":10}],5:[function(t,i,r){i.exports=function(s){return{loadLanguagesInNode:function(o){return a=s,void o.forEach(function(l){var c=void 0;try{c=t("../languages/".concat(l))}catch{console.error('Unable to load "'.concat(l,'". No matching language file found.'))}c&&a.registerLanguage(c)});var a}}}},{}],6:[function(t,i,r){var s=t("bignumber.js");function o(a,l,c){var u=new s(a._value),h=l;return c.isNumbro(l)&&(h=l._value),h=new s(h),a._value=u.minus(h).toNumber(),a}i.exports=function(a){return{add:function(l,c){return h=c,d=a,f=new s((u=l)._value),g=h,d.isNumbro(h)&&(g=h._value),g=new s(g),u._value=f.plus(g).toNumber(),u;var u,h,d,f,g},subtract:function(l,c){return o(l,c,a)},multiply:function(l,c){return h=c,d=a,f=new s((u=l)._value),g=h,d.isNumbro(h)&&(g=h._value),g=new s(g),u._value=f.times(g).toNumber(),u;var u,h,d,f,g},divide:function(l,c){return h=c,d=a,f=new s((u=l)._value),g=h,d.isNumbro(h)&&(g=h._value),g=new s(g),u._value=f.dividedBy(g).toNumber(),u;var u,h,d,f,g},set:function(l,c){return u=l,d=h=c,a.isNumbro(h)&&(d=h._value),u._value=d,u;var u,h,d},difference:function(l,c){return u=c,o(d=(h=a)(l._value),u,h),Math.abs(d._value);var u,h,d}}}},{"bignumber.js":1}],7:[function(t,i,r){function s(m,b){for(var y=0;y<b.length;y++){var w=b[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(m,w.key,w)}}var o=t("./globalState"),a=t("./validating"),l=t("./loading")(p),c=t("./unformatting"),u=t("./formatting")(p),h=t("./manipulating")(p),d=t("./parsing"),f=function(){function m(w){(function(R,E){if(!(R instanceof E))throw new TypeError("Cannot call a class as a function")})(this,m),this._value=w}var b,y;return b=m,(y=[{key:"clone",value:function(){return p(this._value)}},{key:"format",value:function(){var w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return u.format(this,w)}},{key:"formatCurrency",value:function(w){return typeof w=="string"&&(w=d.parseFormat(w)),(w=u.formatOrDefault(w,o.currentCurrencyDefaultFormat())).output="currency",u.format(this,w)}},{key:"formatTime",value:function(){var w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return w.output="time",u.format(this,w)}},{key:"binaryByteUnits",value:function(){return u.getBinaryByteUnit(this)}},{key:"decimalByteUnits",value:function(){return u.getDecimalByteUnit(this)}},{key:"byteUnits",value:function(){return u.getByteUnit(this)}},{key:"difference",value:function(w){return h.difference(this,w)}},{key:"add",value:function(w){return h.add(this,w)}},{key:"subtract",value:function(w){return h.subtract(this,w)}},{key:"multiply",value:function(w){return h.multiply(this,w)}},{key:"divide",value:function(w){return h.divide(this,w)}},{key:"set",value:function(w){return h.set(this,g(w))}},{key:"value",value:function(){return this._value}},{key:"valueOf",value:function(){return this._value}}])&&s(b.prototype,y),m}();function g(m){var b=m;return p.isNumbro(m)?b=m._value:typeof m=="string"?b=p.unformat(m):isNaN(m)&&(b=NaN),b}function p(m){return new f(g(m))}p.version="2.1.2",p.isNumbro=function(m){return m instanceof f},p.language=o.currentLanguage,p.registerLanguage=o.registerLanguage,p.setLanguage=o.setLanguage,p.languages=o.languages,p.languageData=o.languageData,p.zeroFormat=o.setZeroFormat,p.defaultFormat=o.currentDefaults,p.setDefaults=o.setDefaults,p.defaultCurrencyFormat=o.currentCurrencyDefaultFormat,p.validate=a.validate,p.loadLanguagesInNode=l.loadLanguagesInNode,p.unformat=c.unformat,i.exports=p},{"./formatting":3,"./globalState":4,"./loading":5,"./manipulating":6,"./parsing":8,"./unformatting":9,"./validating":10}],8:[function(t,i,r){i.exports={parseFormat:function(s){var o,a,l,c,u,h,d,f,g,p,m,b,y,w,R,E,_,T,I,x,P=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return typeof s!="string"?s:(a=P,s=(l=(o=s).match(/^{([^}]*)}/))?(a.prefix=l[1],o.slice(l[0].length)):o,u=P,function(D,B){if(D.indexOf("$")===-1){if(D.indexOf("%")===-1)return D.indexOf("bd")!==-1?(B.output="byte",B.base="general"):D.indexOf("b")!==-1?(B.output="byte",B.base="binary"):D.indexOf("d")!==-1?(B.output="byte",B.base="decimal"):D.indexOf(":")===-1?D.indexOf("o")!==-1&&(B.output="ordinal"):B.output="time";B.output="percent"}else B.output="currency"}(s=(h=(c=s).match(/{([^}]*)}$/))?(u.postfix=h[1],c.slice(0,-h[0].length)):c,P),d=P,(f=s.match(/[1-9]+[0-9]*/))&&(d.totalLength=+f[0]),g=P,(p=s.split(".")[0].match(/0+/))&&(g.characteristic=p[0].length),function(D,B){if(D.indexOf(".")!==-1){var V=D.split(".")[0];B.optionalCharacteristic=V.indexOf("0")===-1}}(s,P),m=P,s.indexOf("a")!==-1&&(m.average=!0),y=P,(b=s).indexOf("K")!==-1?y.forceAverage="thousand":b.indexOf("M")!==-1?y.forceAverage="million":b.indexOf("B")!==-1?y.forceAverage="billion":b.indexOf("T")!==-1&&(y.forceAverage="trillion"),function(D,B){var V=D.split(".")[1];if(V){var z=V.match(/0+/);z&&(B.mantissa=z[0].length)}}(s,P),R=P,(w=s).match(/\[\.]/)?R.optionalMantissa=!0:w.match(/\./)&&(R.optionalMantissa=!1),E=P,s.indexOf(",")!==-1&&(E.thousandSeparated=!0),_=P,s.indexOf(" ")!==-1&&(_.spaceSeparated=!0),I=P,(T=s).match(/^\+?\([^)]*\)$/)&&(I.negative="parenthesis"),T.match(/^\+?-/)&&(I.negative="sign"),x=P,s.match(/^\+/)&&(x.forceSign=!0),P)}}},{}],9:[function(t,i,r){var s=[{key:"ZiB",factor:Math.pow(1024,7)},{key:"ZB",factor:Math.pow(1e3,7)},{key:"YiB",factor:Math.pow(1024,8)},{key:"YB",factor:Math.pow(1e3,8)},{key:"TiB",factor:Math.pow(1024,4)},{key:"TB",factor:Math.pow(1e3,4)},{key:"PiB",factor:Math.pow(1024,5)},{key:"PB",factor:Math.pow(1e3,5)},{key:"MiB",factor:Math.pow(1024,2)},{key:"MB",factor:Math.pow(1e3,2)},{key:"KiB",factor:Math.pow(1024,1)},{key:"KB",factor:Math.pow(1e3,1)},{key:"GiB",factor:Math.pow(1024,3)},{key:"GB",factor:Math.pow(1e3,3)},{key:"EiB",factor:Math.pow(1024,6)},{key:"EB",factor:Math.pow(1e3,6)},{key:"B",factor:1}];function o(l){return l.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",h=3<arguments.length?arguments[3]:void 0,d=4<arguments.length?arguments[4]:void 0,f=5<arguments.length?arguments[5]:void 0,g=6<arguments.length?arguments[6]:void 0;if(l!=="")return l===d?0:function p(m,b){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",w=3<arguments.length?arguments[3]:void 0,R=4<arguments.length?arguments[4]:void 0,E=5<arguments.length?arguments[5]:void 0,_=6<arguments.length?arguments[6]:void 0;if(!isNaN(+m))return+m;var T="",I=m.replace(/(^[^(]*)\((.*)\)([^)]*$)/,"$1$2$3");if(I!==m)return-1*p(I,b,y,w,R,E,_);for(var x=0;x<s.length;x++){var P=s[x];if((T=m.replace(P.key,""))!==m)return p(T,b,y,w,R,E,_)*P.factor}if((T=m.replace("%",""))!==m)return p(T,b,y,w,R,E,_)/100;var D=parseFloat(m);if(!isNaN(D)){var B=w(D);if(B&&B!=="."&&(T=m.replace(new RegExp("".concat(o(B),"$")),""))!==m)return p(T,b,y,w,R,E,_);var V={};Object.keys(E).forEach(function(se){V[E[se]]=se});for(var z=Object.keys(V).sort().reverse(),L=z.length,k=0;k<L;k++){var F=z[k],G=V[F];if((T=m.replace(F,""))!==m){var U=void 0;switch(G){case"thousand":U=Math.pow(10,3);break;case"million":U=Math.pow(10,6);break;case"billion":U=Math.pow(10,9);break;case"trillion":U=Math.pow(10,12)}return p(T,b,y,w,R,E,_)*U}}}}(function(p,m){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",y=p.replace(b,"");return y=(y=y.replace(new RegExp("([0-9])".concat(o(m.thousands),"([0-9])"),"g"),"$1$2")).replace(m.decimal,".")}(l,c,u),c,u,h,d,f,g)}i.exports={unformat:function(l,c){var u,h,d,f=t("./globalState"),g=f.currentDelimiters(),p=f.currentCurrency().symbol,m=f.currentOrdinal(),b=f.getZeroFormat(),y=f.currentAbbreviations(),w=void 0;if(typeof l=="string")w=function(R,E){if(!R.indexOf(":")||E.thousands===":")return!1;var _=R.split(":");if(_.length!==3)return!1;var T=+_[0],I=+_[1],x=+_[2];return!isNaN(T)&&!isNaN(I)&&!isNaN(x)}(l,g)?(u=l.split(":"),h=+u[0],d=+u[1],+u[2]+60*d+3600*h):a(l,g,p,m,b,y,c);else{if(typeof l!="number")return;w=l}if(w!==void 0)return w}}},{"./globalState":4}],10:[function(t,i,r){function s(g){return function(p){if(Array.isArray(p)){for(var m=0,b=new Array(p.length);m<p.length;m++)b[m]=p[m];return b}}(g)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(g)}var a=t("./unformatting"),l=/^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/,c={output:{type:"string",validValues:["currency","percent","byte","time","ordinal","number"]},base:{type:"string",validValues:["decimal","binary","general"],restriction:function(g,p){return p.output==="byte"},message:"`base` must be provided only when the output is `byte`",mandatory:function(g){return g.output==="byte"}},characteristic:{type:"number",restriction:function(g){return 0<=g},message:"value must be positive"},prefix:"string",postfix:"string",forceAverage:{type:"string",validValues:["trillion","billion","million","thousand"]},average:"boolean",currencyPosition:{type:"string",validValues:["prefix","infix","postfix"]},currencySymbol:"string",totalLength:{type:"number",restrictions:[{restriction:function(g){return 0<=g},message:"value must be positive"},{restriction:function(g,p){return!p.exponential},message:"`totalLength` is incompatible with `exponential`"}]},mantissa:{type:"number",restriction:function(g){return 0<=g},message:"value must be positive"},optionalMantissa:"boolean",trimMantissa:"boolean",optionalCharacteristic:"boolean",thousandSeparated:"boolean",spaceSeparated:"boolean",abbreviations:{type:"object",children:{thousand:"string",million:"string",billion:"string",trillion:"string"}},negative:{type:"string",validValues:["sign","parenthesis"]},forceSign:"boolean",exponential:{type:"boolean"},prefixSymbol:{type:"boolean",restriction:function(g,p){return p.output==="percent"},message:"`prefixSymbol` can be provided only when the output is `percent`"}},u={languageTag:{type:"string",mandatory:!0,restriction:function(g){return g.match(l)},message:"the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)"},delimiters:{type:"object",children:{thousands:"string",decimal:"string",thousandsSize:"number"},mandatory:!0},abbreviations:{type:"object",children:{thousand:{type:"string",mandatory:!0},million:{type:"string",mandatory:!0},billion:{type:"string",mandatory:!0},trillion:{type:"string",mandatory:!0}},mandatory:!0},spaceSeparated:"boolean",ordinal:{type:"function",mandatory:!0},currency:{type:"object",children:{symbol:"string",position:"string",code:"string"},mandatory:!0},defaults:"format",ordinalFormat:"format",byteFormat:"format",percentageFormat:"format",currencyFormat:"format",timeDefaults:"format",formats:{type:"object",children:{fourDigits:{type:"format",mandatory:!0},fullWithTwoDecimals:{type:"format",mandatory:!0},fullWithTwoDecimalsNoCurrency:{type:"format",mandatory:!0},fullWithNoDecimals:{type:"format",mandatory:!0}}}};function h(g){return!!a.unformat(g)}function d(g,p,m){var b=3<arguments.length&&arguments[3]!==void 0&&arguments[3],y=Object.keys(g).map(function(w){if(!p[w])return console.error("".concat(m," Invalid key: ").concat(w)),!1;var R=g[w],E=p[w];if(typeof E=="string"&&(E={type:E}),E.type==="format"){if(!d(R,c,"[Validate ".concat(w,"]"),!0))return!1}else if(o(R)!==E.type)return console.error("".concat(m," ").concat(w,' type mismatched: "').concat(E.type,'" expected, "').concat(o(R),'" provided')),!1;if(E.restrictions&&E.restrictions.length)for(var _=E.restrictions.length,T=0;T<_;T++){var I=E.restrictions[T],x=I.restriction,P=I.message;if(!x(R,g))return console.error("".concat(m," ").concat(w," invalid value: ").concat(P)),!1}return E.restriction&&!E.restriction(R,g)?(console.error("".concat(m," ").concat(w," invalid value: ").concat(E.message)),!1):E.validValues&&E.validValues.indexOf(R)===-1?(console.error("".concat(m," ").concat(w," invalid value: must be among ").concat(JSON.stringify(E.validValues),', "').concat(R,'" provided')),!1):!(E.children&&!d(R,E.children,"[Validate ".concat(w,"]")))});return b||y.push.apply(y,s(Object.keys(p).map(function(w){var R=p[w];if(typeof R=="string"&&(R={type:R}),R.mandatory){var E=R.mandatory;if(typeof E=="function"&&(E=E(g)),E&&g[w]===void 0)return console.error("".concat(m,' Missing mandatory key "').concat(w,'"')),!1}return!0}))),y.reduce(function(w,R){return w&&R},!0)}function f(g){return d(g,c,"[Validate format]")}i.exports={validate:function(g,p){var m=h(g),b=f(p);return m&&b},validateFormat:f,validateInput:h,validateLanguage:function(g){return d(g,u,"[Validate language]")}}},{"./unformatting":9}]},{},[7])(7)})})(GY);var KIe=GY.exports;const Ph=Up(KIe),qIe="numeric";function YY(n,e){if(rr(n)){const t=e.numericFormat,i=t&&t.culture||"-",r=t&&t.pattern;if(typeof i<"u"&&!Ph.languages()[i]){const s=i.replace("-",""),o=Ph.allLanguages?Ph.allLanguages[i]:Ph[s];o&&Ph.registerLanguage(o)}Ph.setLanguage(i),n=Ph(n).format(r||"0")}return n}function BL(n,e,t,i,r,s,o){let a=s;if(rr(a)){const l=o.className||"",c=l.length?l.split(" "):[];a=YY(a,o),c.indexOf("htLeft")<0&&c.indexOf("htCenter")<0&&c.indexOf("htRight")<0&&c.indexOf("htJustify")<0&&c.push("htRight"),c.indexOf("htNumeric")<0&&c.push("htNumeric"),o.className=c.join(" "),e.dir="ltr"}Wc(n,e,t,i,r,a,o)}BL.RENDERER_TYPE=qIe;const XIe="password";function VL(n,e,t,i,r,s,o){Wc.apply(this,[n,e,t,i,r,s,o]);const a=o.hashLength||e.innerHTML.length,l=o.hashSymbol||"*";let c="";He(a-1,()=>{c+=l}),Mf(e,c)}VL.RENDERER_TYPE=XIe;const ZIe="select";function WL(n,e,t,i,r,s,o){Wc.apply(this,[n,e,t,i,r,s,o])}WL.RENDERER_TYPE=ZIe;const QIe="time";function jL(n,e,t,i,r,s,o){Wc.apply(this,[n,e,t,i,r,s,o]),e.dir="ltr"}jL.RENDERER_TYPE=QIe;function JIe(){ss(tm),ss(vy),ss(HL),ss(LL),ss(FL),ss(NL),ss(BL),ss(VL),ss(WL),ss(Wc),ss(jL)}const eOe="autocomplete";function oE(n,e){let t=n;if(t==null&&(t=""),this.allowEmpty&&t===""){e(!0);return}this.strict&&this.source?typeof this.source=="function"?this.source(t,i3(t,e)):i3(t,e)(this.source):e(!0)}oE.VALIDATOR_TYPE=eOe;function i3(n,e){const t=n;return function(i){let r=!1;for(let s=0,o=i.length;s<o;s++)if(t===i[s]){r=!0;break}e(r)}}function KY(n){const e=new Date(n);return isNaN(new Date(`${n}T00:00`).getDate())?e:new Date(e.getTime()+e.getTimezoneOffset()*6e4)}const tOe=Object.freeze(Object.defineProperty({__proto__:null,getNormalizedDate:KY},Symbol.toStringTag,{value:"Module"})),nOe="date";function zL(n,e){const t=O9(FY,this.instance);let i=n,r=!0;i==null&&(i="");let s=he(i,this.dateFormat||t.defaultDateFormat,!0).isValid(),o=he(new Date(i)).isValid()||s;if(this.allowEmpty&&i===""&&(o=!0,s=!0),o||(r=!1),!o&&s&&(r=!0),o&&!s)if(this.correctFormat===!0){const a=iOe(i,this.dateFormat);this.instance.setDataAtCell(this.visualRow,this.visualCol,a,"dateValidator"),r=!0}else r=!1;e(r)}zL.VALIDATOR_TYPE=nOe;function iOe(n,e){const t=he(KY(n)),i=he(n,e),r=n.search(/[A-z]/g)>-1;let s;return t.isValid()&&t.format("x")===i.format("x")||!i.isValid()||r?s=t:s=i,s.format(e)}const rOe="dropdown";function UL(n,e){oE.apply(this,[n,e])}UL.VALIDATOR_TYPE=rOe;const sOe="numeric";function GL(n,e){let t=n;t==null&&(t=""),this.allowEmpty&&t===""?e(!0):e(t===""?!1:rr(n))}GL.VALIDATOR_TYPE=sOe;const oOe=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"],aOe="time";function YL(n,e){const t=this.timeFormat||"h:mm:ss a";let i=!0,r=n;r===null&&(r=""),r=/^\d{3,}$/.test(r)?parseInt(r,10):r;const s=/^\d{1,2}$/.test(r);s&&(r+=":00");const o=he(r,oOe,!0).isValid()?he(r):he(r,t);let a=o.isValid(),l=he(r,t,!0).isValid()&&!s;if(this.allowEmpty&&r===""&&(a=!0,l=!0),a||(i=!1),!a&&l&&(i=!0),a&&!l)if(this.correctFormat===!0){const c=o.format(t);this.instance.setDataAtCell(this.visualRow,this.visualCol,c,"timeValidator"),i=!0}else i=!1;e(i)}YL.VALIDATOR_TYPE=aOe;function lOe(){vd(oE),vd(UL),vd(zL),vd(GL),vd(YL)}const cOe="autocomplete",uOe={CELL_TYPE:cOe,editor:OL,renderer:tm,validator:oE},hOe="checkbox",dOe={CELL_TYPE:hOe,editor:$Y,renderer:HL},fOe="date";function qY(n,e,t,i,r,s,o){tm.apply(this,[n,e,t,i,r,s,o])}qY.RENDERER_TYPE=fOe;const gOe="date",pOe={CELL_TYPE:gOe,editor:BY,renderer:qY,validator:zL},mOe="dropdown",vOe={CELL_TYPE:mOe,editor:DL,renderer:LL,validator:UL},bOe="handsontable",wOe={CELL_TYPE:bOe,editor:IL,renderer:FL},yOe="numeric",COe={CELL_TYPE:yOe,editor:VY,renderer:BL,validator:GL,dataType:"number"},SOe="password",_Oe={CELL_TYPE:SOe,editor:WY,renderer:VL,copyable:!1},ROe="select",EOe={CELL_TYPE:ROe,editor:jY,renderer:WL},xOe="time",TOe={CELL_TYPE:xOe,editor:zY,renderer:jL,validator:YL};function MOe(){Ws(uOe),Ws(dOe),Ws(pOe),Ws(vOe),Ws(wOe),Ws(COe),Ws(_Oe),Ws(EOe),Ws(HY),Ws(TOe)}function AOe(n,e){XY(n,e),e.add(n)}function POe(n,e,t){XY(n,e),e.set(n,t)}function XY(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zf(n,e,t){return(e=IOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IOe(n){var e=OOe(n,"string");return typeof e=="symbol"?e:e+""}function OOe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Qf(n,e){return n.get(ZY(n,e))}function ZY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const r3=new Map([["plugin",L1e],["cell-type",MY],["editor",I9],["renderer",F9],["validator",B9]]),kOe="base",jT=[];let ba=null;var Ih=new WeakMap,s3=new WeakSet;class Lt{static get PLUGIN_KEY(){return kOe}static get SETTING_KEYS(){return[this.PLUGIN_KEY]}constructor(e){AOe(this,s3),Zf(this,"eventManager",new co(this)),Zf(this,"pluginName",null),Zf(this,"pluginsInitializedCallbacks",[]),Zf(this,"isPluginsReady",!1),Zf(this,"enabled",!1),Zf(this,"initialized",!1),POe(this,Ih,{}),Sl(this,"hot",e,{writable:!1}),ba=null,this.hot.addHook("afterPluginsInitialized",()=>this.onAfterPluginsInitialized()),this.hot.addHook("afterUpdateSettings",t=>this.onUpdateSettings(t)),this.hot.addHook("beforeInit",()=>this.init())}init(){this.pluginName=this.hot.getPluginName(this);const e=this.constructor.PLUGIN_DEPS,t=Array.isArray(e)?e:[];if(t.length>0){const r=[];if(t.forEach(s=>{const[o,a]=s.split(":");if(!r3.has(o))throw new Error(`Unknown plugin dependency type "${o}" was found.`);r3.get(o)(a)||r.push(` - ${a} (${o})`)}),r.length>0){const s=[`The ${this.pluginName} plugin requires the following modules:
`,`${r.join(`
`)}
`].join("");jT.push(s)}}if(ba||(ba=VD()),ba.indexOf("UndoRedo")>=0&&ba.splice(ba.indexOf("UndoRedo"),1),ba.indexOf(this.pluginName)>=0&&ba.splice(ba.indexOf(this.pluginName),1),this.hot.addHookOnce("afterPluginsInitialized",()=>{this.isEnabled&&this.isEnabled()&&this.enablePlugin()}),ba.length===0){if(jT.length>0){const r=[`${jT.join(`
`)}
`,"You have to import and register them manually."].join("");throw new Error(r)}this.hot.runHooks("afterPluginsInitialized")}this.initialized=!0}enablePlugin(){this.enabled=!0}disablePlugin(){var e;(e=this.eventManager)===null||e===void 0||e.clear(),this.clearHooks(),this.enabled=!1}addHook(e,t,i){Qf(Ih,this)[e]=Qf(Ih,this)[e]||[];const r=Qf(Ih,this)[e];this.hot.addHook(e,t,i),r.push(t),Qf(Ih,this)[e]=r}removeHooks(e){j(Qf(Ih,this)[e]||[],t=>{this.hot.removeHook(e,t)})}clearHooks(){const e=Qf(Ih,this);ct(e,(t,i)=>this.removeHooks(i)),e.length=0}callOnPluginsReady(e){this.isPluginsReady?e():this.pluginsInitializedCallbacks.push(e)}onAfterPluginsInitialized(){j(this.pluginsInitializedCallbacks,e=>e()),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0}onUpdateSettings(e){const t=ZY(s3,this,DOe).call(this,e);this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin(),this.enabled&&this.isEnabled()&&t&&this.updatePlugin(e))}updatePlugin(){}destroy(){var e;(e=this.eventManager)===null||e===void 0||e.destroy(),this.clearHooks(),ct(this,(t,i)=>{i!=="hot"&&(this[i]=null)}),delete this.t,delete this.hot}}function DOe(n){if(!n)return!1;const e=this.constructor.SETTING_KEYS;if(typeof e=="boolean")return e;for(let t=0;t<e.length;t++)if(n[e[t]]!==void 0)return!0;return!1}function Oh(n,e,t){return(e=NOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NOe(n){var e=LOe(n,"string");return typeof e=="symbol"?e:e+""}function LOe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let KL=class{constructor(e){Oh(this,"hot",null),Oh(this,"container",null),Oh(this,"injected",!1),Oh(this,"rows",[]),Oh(this,"columns",[]),Oh(this,"samples",null),Oh(this,"settings",{useHeaders:!0}),this.hot=e}addRow(e,t){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));const i={row:e};this.rows.push(i),this.samples=t,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol(e)),this.table.tr.appendChild(this.createRow(e)),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}addColumnHeadersRow(e){const t=this.hot.getColHeader(0);if(t!=null){const i={row:-1};this.rows.push(i),this.container=this.createContainer(this.hot.rootElement.className),this.samples=e,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}}addColumn(e,t){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));const i={col:e};this.columns.push(i),this.samples=t,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&this.hot.getColHeader(e)!==null&&this.hot.view.appendColHeader(e,this.table.th),this.table.tBody.appendChild(this.createCol(e)),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}getHeights(e){this.injected||this.injectTable(),j(this.rows,t=>{const{height:i}=t.table.getBoundingClientRect();e(t.row,Math.ceil(i)-1)})}getWidths(e){this.injected||this.injectTable(),j(this.columns,t=>{const{width:i}=t.table.getBoundingClientRect();e(t.col,Math.ceil(i))})}setSettings(e){this.settings=e}setSetting(e,t){this.settings||(this.settings={}),this.settings[e]=t}getSettings(){return this.settings}getSetting(e){return this.settings?this.settings[e]:null}createColGroupsCol(e){const t=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&t.appendChild(this.createColElement(-1,-1)),this.samples.forEach(i=>{j(i.strings,r=>{t.appendChild(this.createColElement(r.col,e))})}),t}createRow(e){const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),r=t.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(e,r),i.appendChild(r)),this.samples.forEach(s=>{j(s.strings,o=>{const a=o.col,l=this.hot.getCellMeta(e,a),c=this.hot.getCellRenderer(l),u=t.createElement("td");u.setAttribute("ghost-table",1),c(this.hot,u,e,a,this.hot.colToProp(a),o.value,l),i.appendChild(u)})}),i}appendColumnHeadersRow(){const{rootDocument:e}=this.hot,t=e.createDocumentFragment(),i=[];if(this.hot.hasRowHeaders()){const r=e.createElement("th");i.push([-1,r]),t.appendChild(r)}this.samples.forEach(r=>{j(r.strings,s=>{const o=s.col,a=e.createElement("th");i.push([o,a]),t.appendChild(a)})}),this.table.tHead.appendChild(t),j(i,r=>{const[s,o]=r;this.hot.view.appendColHeader(s,o)})}createCol(e){const{rootDocument:t}=this.hot,i=t.createDocumentFragment();return this.samples.forEach(r=>{j(r.strings,s=>{const o=s.row,a=this.hot.getCellMeta(o,e),l=this.hot.getCellRenderer(a),c=t.createElement("td"),u=t.createElement("tr");c.setAttribute("ghost-table",1),l(this.hot,c,o,e,this.hot.colToProp(e),s.value,a),u.appendChild(c),i.appendChild(u)})}),i}clean(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}injectTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.injected||((e||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}removeTable(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}createColElement(e,t){const i=this.hot.rootDocument.createElement("col");let r=0;t>=0&&e>=0&&(r=this.hot.getCellMeta(t,e).colspan);let s=this.hot.getColWidth(e);if(r>1)for(let o=e+1;o<e+r;o++)s+=this.hot.getColWidth(o);return i.style.width=`${s}px`,i}createTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),r=t.createElement("table"),s=t.createElement("thead"),o=t.createElement("tbody"),a=t.createElement("colgroup"),l=t.createElement("tr"),c=t.createElement("th");return this.isVertical()&&r.appendChild(a),this.isHorizontal()&&(l.appendChild(c),s.appendChild(l),r.style.tableLayout="auto",r.style.width="auto"),r.appendChild(s),this.isVertical()&&o.appendChild(l),r.appendChild(o),ue(r,e),i.appendChild(r),{fragment:i,table:r,tHead:s,tBody:o,colGroup:a,tr:l,th:c}}createContainer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),r=t.createElement("div"),s=`htGhostTable htAutoSize ${e.trim()}`;return ue(r,s),i.appendChild(r),{fragment:i,container:r}}isVertical(){return!!(this.rows.length&&!this.columns.length)}isHorizontal(){return!!(this.columns.length&&!this.rows.length)}};function nC(n,e,t){return(e=HOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HOe(n){var e=$Oe(n,"string");return typeof e=="symbol"?e:e+""}function $Oe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class aE{static get SAMPLE_COUNT(){return 3}constructor(e){nC(this,"samples",null),nC(this,"dataFactory",null),nC(this,"customSampleCount",null),nC(this,"allowDuplicates",!1),this.dataFactory=e}getSampleCount(){return this.customSampleCount?this.customSampleCount:aE.SAMPLE_COUNT}setSampleCount(e){this.customSampleCount=e}setAllowDuplicates(e){this.allowDuplicates=e}generateRowSamples(e,t){return this.generateSamples("row",t,e)}generateColumnSamples(e,t){return this.generateSamples("col",t,e)}generateSamples(e,t,i){const r=new Map,{from:s,to:o}=typeof i=="number"?{from:i,to:i}:i;return He(s,o,a=>{const l=this.generateSample(e,t,a);r.set(a,l)}),r}generateSample(e,t,i){if(e!=="row"&&e!=="col")throw new Error("Unsupported sample type");const r=new Map,s=e==="row"?"col":"row",o=[];return He(t.from,t.to,a=>{const l=e==="row"?this.dataFactory(i,a):this.dataFactory(a,i);if(l===!1)return;const{value:c,bundleSeed:u}=l,h=typeof u=="string"&&u.length>0;let d;h?d=u:lt(c)?d=`${Object.keys(c).length}`:Array.isArray(c)?d=`${c.length}`:d=`${jn(c).length}`,r.has(d)||r.set(d,{needed:this.getSampleCount(),strings:[]});const f=r.get(d);f.needed&&(!(o.indexOf(c)>-1)||this.allowDuplicates||h)&&(f.strings.push({value:c,[s]:a}),o.push(c),f.needed-=1)}),r}}function FOe(n,e){QY(n,e),e.add(n)}function o3(n,e,t){QY(n,e),e.set(n,t)}function QY(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Km(n,e,t){return(e=BOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BOe(n){var e=VOe(n,"string");return typeof e=="symbol"?e:e+""}function VOe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Sd(n,e){return n.get(Na(n,e))}function qL(n,e,t){return n.set(Na(n,e),t),t}function Na(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ie.getSingleton().register("modifyAutoColumnSizeSeed");const qm="autoColumnSize",WOe=10,jOe="autoColumnSize";var Ag=new WeakMap,Ap=new WeakMap,zl=new WeakSet;class Tb extends Lt{static get PLUGIN_KEY(){return qm}static get PLUGIN_PRIORITY(){return WOe}static get SETTING_KEYS(){return!0}static get CALCULATION_STEP(){return 50}static get SYNC_CALCULATION_LIMIT(){return 50}constructor(e){super(e),FOe(this,zl),Km(this,"ghostTable",new KL(this.hot)),Km(this,"samplesGenerator",new aE((t,i)=>{const r=this.hot.toPhysicalRow(t),s=this.hot.toPhysicalColumn(i);if(this.hot.rowIndexMapper.isHidden(r)||this.hot.columnIndexMapper.isHidden(s))return!1;const o=this.hot.getCellMeta(t,i);let a="";o.spanned||(a=this.hot.getDataAtCell(t,i));let l="";return this.hot.hasHook("modifyAutoColumnSizeSeed")&&(l=this.hot.runHooks("modifyAutoColumnSizeSeed",l,o,a)),{value:a,bundleSeed:l}})),Km(this,"inProgress",!1),Km(this,"measuredColumns",0),Km(this,"columnWidthsMap",new lh),o3(this,Ag,[]),o3(this,Ap,[]),this.hot.columnIndexMapper.registerMap(jOe,this.columnWidthsMap),this.addHook("beforeColumnResize",(t,i,r)=>Na(zl,this,a3).call(this,t,i,r))}isEnabled(){return this.hot.getSettings()[qm]!==!1&&!this.hot.getSettings().colWidths}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[qm];t&&t.useHeaders!==null&&t.useHeaders!==void 0&&this.ghostTable.setSetting("useHeaders",t.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Na(zl,e,GOe).call(e,...r)}),this.addHook("beforeChangeRender",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Na(zl,e,YOe).call(e,...r)}),this.addHook("afterFormulasValuesUpdate",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Na(zl,e,qOe).call(e,...r)}),this.addHook("beforeRender",()=>Na(zl,this,UOe).call(this)),this.addHook("modifyColWidth",(i,r)=>this.getColumnWidth(r,i)),this.addHook("init",()=>Na(zl,this,KOe).call(this)),super.enablePlugin()}updatePlugin(){qL(Ap,this,this.findColumnsWhereHeaderWasChanged()),super.updatePlugin()}disablePlugin(){super.disablePlugin(),this.addHook("beforeColumnResize",(e,t,i)=>Na(zl,this,a3).call(this,e,t,i))}calculateVisibleColumnsWidth(){if(!this.hot.countRows())return;const e=this.getFirstVisibleColumn(),t=this.getLastVisibleColumn();if(e===-1||t===-1)return;const i=this.hot.renderCall;this.calculateColumnsWidth({from:e,to:t},void 0,i)}calculateColumnsWidth(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countRows()-1},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=typeof e=="number"?{from:e,to:e}:e,s=typeof t=="number"?{from:t,to:t}:t;He(r.from,r.to,o=>{let a=this.hot.toPhysicalColumn(o);a===null&&(a=o),(i||this.columnWidthsMap.getValueAtIndex(a)===null&&!this.hot._getColWidthFromSettings(a))&&this.samplesGenerator.generateColumnSamples(o,s).forEach((c,u)=>this.ghostTable.addColumn(u,c))}),this.ghostTable.columns.length&&(this.hot.batchExecution(()=>{this.ghostTable.getWidths((o,a)=>{const l=this.hot.toPhysicalColumn(o);this.columnWidthsMap.setValueAtIndex(l,a)})},!0),this.measuredColumns=r.to+1,this.ghostTable.clean())}calculateAllColumnsWidth(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=0;const r=this.hot.countCols()-1;let s=null;this.inProgress=!0;const o=()=>{if(!this.hot){vw(s),this.inProgress=!1;return}this.calculateColumnsWidth({from:i,to:Math.min(i+Tb.CALCULATION_STEP,r)},e,t),i=i+Tb.CALCULATION_STEP+1,i<r?s=G1(o):(vw(s),this.inProgress=!1,this.hot.view.adjustElementsSize())},a=this.getSyncCalculationLimit();a>=0&&(this.calculateColumnsWidth({from:0,to:a},e,t),i=a+1),i<r?o():this.inProgress=!1}setSamplingOptions(){const e=this.hot.getSettings()[qm],t=e&&kn(e,"samplingRatio")?e.samplingRatio:void 0,i=e&&kn(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;t&&!isNaN(t)&&this.samplesGenerator.setSampleCount(parseInt(t,10)),i&&this.samplesGenerator.setAllowDuplicates(i)}recalculateAllColumnsWidth(){this.hot.view.isVisible()&&this.calculateAllColumnsWidth({from:0,to:this.hot.countRows()-1},!0)}getSyncCalculationLimit(){const e=this.hot.getSettings()[qm];let t=Tb.SYNC_CALCULATION_LIMIT;const i=this.hot.countCols()-1;return lt(e)&&(t=e.syncLimit,pD(t)?t=FD(i,t):t>>=0),Math.min(t,i)}getColumnWidth(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=t;return r===void 0&&(r=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e)),i&&typeof r=="number"&&(r=Math.max(r,q1))),r}getFirstVisibleColumn(){var e;return(e=this.hot.view.getFirstRenderedVisibleColumn())!==null&&e!==void 0?e:-1}getLastVisibleColumn(){var e;return(e=this.hot.view.getLastRenderedVisibleColumn())!==null&&e!==void 0?e:-1}findColumnsWhereHeaderWasChanged(){return this.hot.getColHeader().reduce((i,r,s)=>{const o=Sd(Ag,this).length;return(o-1<s||Sd(Ag,this)[s]!==r)&&i.push(this.hot.toVisualColumn(s)),o-1<s?Sd(Ag,this).push(r):Sd(Ag,this)[s]=r,i},[])}clearCache(e){Array.isArray(e)?this.hot.batchExecution(()=>{e.forEach(t=>{this.columnWidthsMap.setValueAtIndex(t,null)})},!0):this.columnWidthsMap.clear()}isNeedRecalculate(){return!!this.columnWidthsMap.getValues().slice(0,this.measuredColumns).filter(e=>e===null).length}destroy(){this.ghostTable.clean(),super.destroy()}}function zOe(n){const e={from:0,to:this.hot.countRows()-1};n.forEach(t=>{const i=this.hot.toPhysicalColumn(t);i!==null&&(this.hot._getColWidthFromSettings(i)||this.samplesGenerator.generateColumnSamples(t,e).forEach((s,o)=>this.ghostTable.addColumn(o,s)))}),this.ghostTable.columns.length&&(this.hot.batchExecution(()=>{this.ghostTable.getWidths((t,i)=>{const r=this.hot.toPhysicalColumn(t);this.columnWidthsMap.setValueAtIndex(r,i)})},!0),this.ghostTable.clean())}function UOe(){this.calculateVisibleColumnsWidth(),this.inProgress||(Na(zl,this,zOe).call(this,Sd(Ap,this)),qL(Ap,this,[]))}function GOe(n,e){e||this.recalculateAllColumnsWidth()}function YOe(n){const e=n.reduce((t,i)=>{let[,r]=i;const s=this.hot.propToCol(r);return Number.isInteger(s)&&t.indexOf(s)===-1&&t.push(s),t},[]);Sd(Ap,this).push(...e)}function a3(n,e,t){let i=n;return t&&(this.calculateColumnsWidth(e,void 0,!0),i=this.getColumnWidth(e,void 0,!1)),i}function KOe(){qL(Ag,this,this.hot.getColHeader()),this.recalculateAllColumnsWidth()}function qOe(n){const e=n.reduce((t,i)=>{var r;const s=(r=i.address)===null||r===void 0?void 0:r.col;if(Number.isInteger(s)){const o=this.hot.toVisualColumn(s);t.indexOf(o)===-1&&t.push(o)}return t},[]);Sd(Ap,this).push(...e)}const _d={horizontal:"horizontal",vertical:"vertical"};function XOe(n,e,t){let i,r,s;return e[0]===n[0]&&e[1]<n[1]?(s="left",i=t(e[0],e[1]),r=t(e[2],n[1]-1)):e[2]===n[2]&&e[0]===n[0]&&e[3]>n[3]?(s="right",i=t(e[0],n[3]+1),r=t(e[2],e[3])):e[0]<n[0]&&e[1]===n[1]?(s="up",i=t(e[0],e[1]),r=t(n[0]-1,e[3])):e[2]>n[2]&&e[1]===n[1]&&(s="down",i=t(n[2]+1,e[1]),r=t(e[2],e[3])),i&&i.normalize(),r&&r.normalize(),{directionOfDrag:s,startOfDragCoords:i,endOfDragCoords:r}}function ZOe(n){const e={};return n===!0?(e.directions=Object.keys(_d),e.autoInsertRow=!0):lt(n)?(ke(n.autoInsertRow)?n.direction===_d.horizontal?e.autoInsertRow=!1:e.autoInsertRow=n.autoInsertRow:e.autoInsertRow=!1,ke(n.direction)?e.directions=[n.direction]:e.directions=Object.keys(_d)):typeof n=="string"?(e.directions=[n],e.autoInsertRow=!0):(e.directions=[],e.autoInsertRow=!1),e}function QOe(n,e){JOe(n,e),e.add(n)}function JOe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Jf(n,e,t){return(e=eke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eke(n){var e=tke(n,"string");return typeof e=="symbol"?e:e+""}function tke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Xm(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ie.getSingleton().register("modifyAutofillRange");Ie.getSingleton().register("beforeAutofill");Ie.getSingleton().register("afterAutofill");const l3="autofill",nke=20,ike=["fillHandle"],rke="insert_row_below",ske=200;var eg=new WeakSet;class oke extends Lt{constructor(){super(...arguments),QOe(this,eg),Jf(this,"addingStarted",!1),Jf(this,"mouseDownOnCellCorner",!1),Jf(this,"mouseDragOutside",!1),Jf(this,"handleDraggedCells",0),Jf(this,"directions",[]),Jf(this,"autoInsertRow",!1)}static get PLUGIN_KEY(){return l3}static get PLUGIN_PRIORITY(){return nke}static get SETTING_KEYS(){return[l3,...ike]}isEnabled(){return this.hot.getSettings().fillHandle}enablePlugin(){this.enabled||(this.mapSettings(),this.registerEvents(),this.addHook("afterOnCellCornerMouseDown",e=>Xm(eg,this,lke).call(this,e)),this.addHook("afterOnCellCornerDblClick",e=>Xm(eg,this,ake).call(this,e)),this.addHook("beforeOnCellMouseOver",(e,t)=>Xm(eg,this,cke).call(this,t)),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.clearMappedSettings(),super.disablePlugin()}getSelectionData(){const e=this.hot.getSelectedRangeLast(),{row:t,col:i}=e.getTopStartCorner(),{row:r,col:s}=e.getBottomEndCorner(),o=this.hot.runHooks("modifyCopyableRange",[{startRow:t,startCol:i,endRow:r,endCol:s}]),a=[],l=[],c=[];return j(o,u=>{for(let h=u.startRow;h<=u.endRow;h+=1)a.indexOf(h)===-1&&a.push(h);for(let h=u.startCol;h<=u.endCol;h+=1)l.indexOf(h)===-1&&l.push(h)}),j(a,u=>{const h=[];j(l,d=>{h.push(this.hot.getCopyableData(u,d))}),c.push(h)}),c}fillIn(){if(this.hot.selection.highlight.getFill().isEmpty())return!1;const[e,t,i,r]=this.hot.selection.highlight.getFill().getVisualCorners(),s=this.hot.getSelectedRangeLast(),o=s.getTopStartCorner(),a=s.getBottomEndCorner();this.resetSelectionOfDraggedArea();const l=[o.row,o.col,a.row,a.col],c=this.hot.runHooks("modifyAutofillRange",[Math.min(o.row,e),Math.min(o.col,t),Math.max(a.row,i),Math.max(a.col,r)],l),{directionOfDrag:u,startOfDragCoords:h,endOfDragCoords:d}=XOe(l,c,(f,g)=>this.hot._createCellCoords(f,g));if(h&&h.row>-1&&h.col>-1){const f=this.getSelectionData(),g=s.clone(),p=this.hot._createCellRange(h,h,d),m=this.hot.runHooks("beforeAutofill",f,g,p,u);if(m===!1)return this.hot.selection.highlight.getFill().clear(),this.hot.render(),!1;let b=m;const y=m;if(["up","left"].indexOf(u)>-1&&!(y.length===1&&y[0].length===0))if(b=[],u==="up"){const w=d.row-h.row+1,R=w%y.length;for(let E=0;E<w;E++)b.push(y[(E+(y.length-R))%y.length])}else{const w=d.col-h.col+1,R=w%y[0].length;for(let E=0;E<y.length;E++){b.push([]);for(let _=0;_<w;_++)b[E].push(y[E][(_+(y[E].length-R))%y[E].length])}}this.hot.populateFromArray(h.row,h.col,b,d.row,d.col,`${this.pluginName}.fill`,null),this.setSelection(c),this.hot.runHooks("afterAutofill",b,g,p,u),this.hot.render()}else this.hot.view.render();return!0}reduceSelectionAreaIfNeeded(e){return e.row<0&&(e.row=0),e.col<0&&(e.col=0),e}getCoordsOfDragAndDropBorders(e){const t=this.hot.getSelectedRangeLast(),i=t.getBottomEndCorner();let r=e;if(this.directions.includes(_d.vertical)&&this.directions.includes(_d.horizontal)){const s=t.getTopStartCorner();(i.col<=e.col||s.col>=e.col)&&(r=this.hot._createCellCoords(i.row,e.col)),(i.row<e.row||s.row>e.row)&&(r=this.hot._createCellCoords(e.row,i.col))}else if(this.directions.includes(_d.vertical))r=this.hot._createCellCoords(e.row,i.col);else if(this.directions.includes(_d.horizontal))r=this.hot._createCellCoords(i.row,e.col);else return;return this.reduceSelectionAreaIfNeeded(r)}showBorder(e){const t=this.getCoordsOfDragAndDropBorders(e);t&&this.redrawBorders(t)}addRow(){this.hot._registerTimeout(()=>{this.hot.alter(rke,void 0,1,`${this.pluginName}.fill`),this.addingStarted=!1},ske)}addNewRowIfNeeded(){if(!this.hot.selection.highlight.getFill().isEmpty()&&this.addingStarted===!1&&this.autoInsertRow){const e=this.hot.getSelectedLast(),t=this.hot.selection.highlight.getFill().getVisualCorners(),i=this.hot.countRows();e[2]<i-1&&t[2]===i-1&&(this.addingStarted=!0,this.addRow())}}getIndexOfLastAdjacentFilledInRow(e){const t=this.hot.getData(),i=this.hot.countRows();let r;for(let s=e[2]+1;s<i;s++){for(let l=e[1];l<=e[3];l++){const c=t[s][l];if(!zn(c))return-1}const o=t[s][e[1]-1],a=t[s][e[3]+1];(!zn(o)||!zn(a))&&(r=s)}return r}addSelectionFromStartAreaToSpecificRowIndex(e,t){this.hot.selection.highlight.getFill().clear().add(this.hot._createCellCoords(e[0],e[1])).add(this.hot._createCellCoords(t,e[3])).commit()}setSelection(e){this.hot.selectCell(...vt(e,t=>Math.max(t,0)),!1,!1)}selectAdjacent(){const e=this.hot.getSelectedLast(),t=this.getIndexOfLastAdjacentFilledInRow(e);return t===-1||t===void 0?!1:(this.addSelectionFromStartAreaToSpecificRowIndex(e,t),!0)}resetSelectionOfDraggedArea(){this.handleDraggedCells=0,this.hot.selection.highlight.getFill().clear()}redrawBorders(e){this.hot.selection.highlight.getFill().clear().add(this.hot.getSelectedRangeLast().from).add(this.hot.getSelectedRangeLast().to).add(e).commit(),this.hot.view.render()}getIfMouseWasDraggedOutside(e){const{documentElement:t}=this.hot.rootDocument,i=xi(this.hot.table).top-(this.hot.rootWindow.pageYOffset||t.scrollTop)+ni(this.hot.table),r=xi(this.hot.table).left-(this.hot.rootWindow.pageXOffset||t.scrollLeft)+fn(this.hot.table);return e.clientY>i&&e.clientX<=r}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mouseup",()=>Xm(eg,this,uke).call(this)),this.eventManager.addEventListener(e,"mousemove",t=>Xm(eg,this,hke).call(this,t))}clearMappedSettings(){this.directions.length=0,this.autoInsertRow=!1}mapSettings(){const e=ZOe(this.hot.getSettings().fillHandle);this.directions=e.directions,this.autoInsertRow=e.autoInsertRow}destroy(){super.destroy()}}function ake(){this.selectAdjacent()&&this.fillIn()}function lke(){this.handleDraggedCells=1,this.mouseDownOnCellCorner=!0}function cke(n){this.mouseDownOnCellCorner&&!this.hot.view.isMouseDown()&&this.handleDraggedCells&&(this.handleDraggedCells+=1,this.showBorder(n),this.addNewRowIfNeeded())}function uke(){this.handleDraggedCells&&(this.handleDraggedCells>1&&this.fillIn(),this.handleDraggedCells=0,this.mouseDownOnCellCorner=!1)}function hke(n){const e=this.getIfMouseWasDraggedOutside(n);this.addingStarted===!1&&this.handleDraggedCells>0&&e?(this.mouseDragOutside=!0,this.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&this.autoInsertRow&&this.addRow()}function dke(n,e){JY(n,e),e.add(n)}function fke(n,e,t){JY(n,e),e.set(n,t)}function JY(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function tg(n,e,t){return(e=gke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gke(n){var e=pke(n,"string");return typeof e=="symbol"?e:e+""}function pke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function mke(n,e,t){return n.set(La(n,e),t),t}function XL(n,e){return n.get(La(n,e))}function La(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const iC="autoRowSize",vke=40,bke="autoRowSize";var Sw=new WeakMap,Ul=new WeakSet;class Mb extends Lt{static get PLUGIN_KEY(){return iC}static get PLUGIN_PRIORITY(){return vke}static get SETTING_KEYS(){return!0}static get CALCULATION_STEP(){return 50}static get SYNC_CALCULATION_LIMIT(){return 500}constructor(e){super(e),dke(this,Ul),tg(this,"headerHeight",null),tg(this,"ghostTable",new KL(this.hot)),tg(this,"samplesGenerator",new aE((t,i)=>{const r=this.hot.toPhysicalRow(t),s=this.hot.toPhysicalColumn(i);if(this.hot.rowIndexMapper.isHidden(r)||this.hot.columnIndexMapper.isHidden(s)||t>=0&&i>=0&&this.hot.getCellMeta(t,i).hidden)return!1;let o;return t>=0?o=this.hot.getDataAtCell(t,i):t===-1&&(o=this.hot.getColHeader(i)),{value:o}})),tg(this,"inProgress",!1),tg(this,"measuredRows",0),tg(this,"rowHeightsMap",new lh),fke(this,Sw,[]),this.hot.rowIndexMapper.registerMap(bke,this.rowHeightsMap),this.addHook("beforeRowResize",(t,i,r)=>La(Ul,this,c3).call(this,t,i,r))}isEnabled(){const e=this.hot.getSettings()[iC];return e===!0||lt(e)}enablePlugin(){var e=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return La(Ul,e,Cke).call(e,...i)}),this.addHook("beforeChangeRender",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return La(Ul,e,Ske).call(e,...i)}),this.addHook("beforeColumnResize",()=>this.recalculateAllRowsHeight()),this.addHook("afterFormulasValuesUpdate",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return La(Ul,e,Rke).call(e,...i)}),this.addHook("beforeRender",()=>La(Ul,this,yke).call(this)),this.addHook("modifyRowHeight",(t,i)=>this.getRowHeight(i,t)),this.addHook("init",()=>La(Ul,this,_ke).call(this)),this.addHook("modifyColumnHeaderHeight",()=>this.getColumnHeaderHeight()),super.enablePlugin())}disablePlugin(){this.headerHeight=null,super.disablePlugin(),this.addHook("beforeRowResize",(e,t,i)=>La(Ul,this,c3).call(this,e,t,i))}calculateVisibleRowsHeight(){if(!this.hot.countCols())return;const e=this.getFirstVisibleRow(),t=this.getLastVisibleRow();if(e===-1||t===-1)return;const i=this.hot.renderCall;this.calculateRowsHeight({from:e,to:t},void 0,i)}calculateRowsHeight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countCols()-1},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=typeof e=="number"?{from:e,to:e}:e,s=typeof t=="number"?{from:t,to:t}:t;if(this.hot.getColHeader(0)!==null){const o=this.samplesGenerator.generateRowSamples(-1,s);this.ghostTable.addColumnHeadersRow(o.get(-1))}He(r.from,r.to,o=>{let a=this.hot.toPhysicalRow(o);a===null&&(a=o),(i||this.rowHeightsMap.getValueAtIndex(a)===null)&&this.samplesGenerator.generateRowSamples(o,s).forEach((c,u)=>this.ghostTable.addRow(u,c))}),this.ghostTable.rows.length&&(this.hot.batchExecution(()=>{this.ghostTable.getHeights((o,a)=>{o<0?this.headerHeight=a:this.rowHeightsMap.setValueAtIndex(this.hot.toPhysicalRow(o),a)})},!0),this.measuredRows=r.to+1,this.ghostTable.clean())}calculateAllRowsHeight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=0;const r=this.hot.countRows()-1;let s=null;this.inProgress=!0;const o=()=>{if(!this.hot){vw(s),this.inProgress=!1;return}this.calculateRowsHeight({from:i,to:Math.min(i+Mb.CALCULATION_STEP,r)},e,t),i=i+Mb.CALCULATION_STEP+1,i<r?s=G1(o):(vw(s),this.inProgress=!1,this.hot.view.adjustElementsSize(),this.hot.view._wt.wtOverlays.inlineStartOverlay.needFullRender&&this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.draw())},a=this.getSyncCalculationLimit();a>=0&&(this.calculateRowsHeight({from:0,to:a},e,t),i=a+1),i<r?o():(this.inProgress=!1,this.hot.view.adjustElementsSize())}setSamplingOptions(){const e=this.hot.getSettings()[iC],t=e&&kn(e,"samplingRatio")?e.samplingRatio:void 0,i=e&&kn(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;t&&!isNaN(t)&&this.samplesGenerator.setSampleCount(parseInt(t,10)),i&&this.samplesGenerator.setAllowDuplicates(i)}recalculateAllRowsHeight(){this.hot.view.isVisible()&&this.calculateAllRowsHeight({from:0,to:this.hot.countCols()-1},!0)}getSyncCalculationLimit(){const e=this.hot.getSettings()[iC];let t=Mb.SYNC_CALCULATION_LIMIT;const i=this.hot.countRows()-1;return lt(e)&&(t=e.syncLimit,pD(t)?t=FD(i,t):t>>=0),Math.min(t,i)}getRowHeight(e,t){const i=e<0?this.headerHeight:this.rowHeightsMap.getValueAtIndex(this.hot.toPhysicalRow(e));let r=t;return i!==null&&i>(t||0)&&(r=i),r}getColumnHeaderHeight(){return this.headerHeight}getFirstVisibleRow(){var e;return(e=this.hot.view.getFirstRenderedVisibleRow())!==null&&e!==void 0?e:-1}getLastVisibleRow(){var e;return(e=this.hot.view.getLastRenderedVisibleRow())!==null&&e!==void 0?e:-1}clearCache(e){this.headerHeight=null,Array.isArray(e)?this.hot.batchExecution(()=>{e.forEach(t=>{this.rowHeightsMap.setValueAtIndex(t,null)})},!0):this.rowHeightsMap.clear()}clearCacheByRange(e){const{from:t,to:i}=typeof e=="number"?{from:e,to:e}:e;this.hot.batchExecution(()=>{He(Math.min(t,i),Math.max(t,i),r=>{this.rowHeightsMap.setValueAtIndex(r,null)})},!0)}isNeedRecalculate(){return!!this.rowHeightsMap.getValues().slice(0,this.measuredRows).filter(e=>e===null).length}destroy(){this.ghostTable.clean(),super.destroy()}}function wke(n){const e={from:0,to:this.hot.countCols()-1};n.forEach(t=>{this.samplesGenerator.generateRowSamples(t,e).forEach((r,s)=>this.ghostTable.addRow(s,r))}),this.ghostTable.rows.length&&(this.hot.batchExecution(()=>{this.ghostTable.getHeights((t,i)=>{const r=this.hot.toPhysicalRow(t);this.rowHeightsMap.setValueAtIndex(r,i)})},!0),this.ghostTable.clean())}function yke(){this.calculateVisibleRowsHeight(),this.inProgress||(La(Ul,this,wke).call(this,XL(Sw,this)),mke(Sw,this,[]))}function c3(n,e,t){let i=n;return t&&(this.calculateRowsHeight(e,void 0,!0),i=this.getRowHeight(e)),i}function Cke(n,e){e||this.recalculateAllRowsHeight()}function Ske(n){const e=n.reduce((t,i)=>{let[r]=i;return t.indexOf(r)===-1&&t.push(r),t},[]);XL(Sw,this).push(...e)}function _ke(){this.recalculateAllRowsHeight()}function Rke(n){const e=n.reduce((t,i)=>{var r;const s=(r=i.address)===null||r===void 0?void 0:r.row;if(Number.isInteger(s)){const o=this.hot.toVisualRow(s);t.indexOf(o)===-1&&t.push(o)}return t},[]);XL(Sw,this).push(...e)}const{getListWithInsertedItems:Eke,getListWithRemovedItems:xke}=uY("physicallyIndexed");class Tke extends Af{constructor(){super(e=>e)}insert(e,t){const i=dN(this.indexedValues,t);this.indexedValues=Eke(i,e,t,this.initValueOrFn),super.insert(e,t)}remove(e){const t=xke(this.indexedValues,e);this.indexedValues=hN(t,e),super.remove(e)}}const{getListWithInsertedItems:Mke,getListWithRemovedItems:Ake}=uY("physicallyIndexed");class Pke extends Af{constructor(){super(e=>e)}insert(e,t){this.indexedValues=Mke(this.indexedValues,e,t,(i,r)=>this.getNextValue(r)),super.insert(e,t)}remove(e){this.indexedValues=Ake(this.indexedValues,e),super.remove(e)}getNextValue(e){return Math.max(...this.getValues())+1+e}}function Ike(n,e){Oke(n,e),e.add(n)}function Oke(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kke(n,e,t){return(e=Dke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dke(n){var e=Nke(n,"string");return typeof e=="symbol"?e:e+""}function Nke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Lke(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const zT="bindRowsWithHeaders",Hke=210,$ke="loose",Fke=new Map([["loose",Tke],["strict",Pke]]);var u3=new WeakSet;class Bke extends Lt{constructor(){super(...arguments),Ike(this,u3),kke(this,"headerIndexes",null)}static get PLUGIN_KEY(){return zT}static get PLUGIN_PRIORITY(){return Hke}isEnabled(){return!!this.hot.getSettings()[zT]}enablePlugin(){if(this.enabled)return;let e=this.hot.getSettings()[zT];typeof e!="string"&&(e=$ke);const t=Fke.get(e);this.headerIndexes=this.hot.rowIndexMapper.registerMap("bindRowsWithHeaders",new t),this.addHook("modifyRowHeader",i=>Lke(u3,this,Vke).call(this,i)),super.enablePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("bindRowsWithHeaders"),super.disablePlugin()}destroy(){super.destroy()}}function Vke(n){return this.headerIndexes.getValueAtIndex(this.hot.toPhysicalRow(n))}function Wke(n,e){eK(n,e),e.add(n)}function jke(n,e,t){eK(n,e),e.set(n,t)}function eK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h3(n,e,t){return(e=zke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zke(n){var e=Uke(n,"string");return typeof e=="symbol"?e:e+""}function Uke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function d3(n,e){return n.get(Kg(n,e))}function UT(n,e,t){return n.set(Kg(n,e),t),t}function Kg(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const MS="collapsibleColumns",Gke=290,Yke=["nestedHeaders"],ap="collapsibleIndicator",f3=MS,g3=new Map([["collapse",{hideColumn:!0,beforeHook:"beforeColumnCollapse",afterHook:"afterColumnCollapse"}],["expand",{hideColumn:!1,beforeHook:"beforeColumnExpand",afterHook:"afterColumnExpand"}]]);var ng=new WeakMap,Zm=new WeakSet;class Kke extends Lt{constructor(){super(...arguments),Wke(this,Zm),h3(this,"nestedHeadersPlugin",null),h3(this,"headerStateManager",null),jke(this,ng,null)}static get PLUGIN_KEY(){return MS}static get PLUGIN_PRIORITY(){return Gke}static get PLUGIN_DEPS(){return["plugin:NestedHeaders"]}static get SETTING_KEYS(){return[MS,...Yke]}isEnabled(){return!!this.hot.getSettings()[MS]}enablePlugin(){var e=this;if(this.enabled)return;const{nestedHeaders:t}=this.hot.getSettings();t||Yt("You need to configure the Nested Headers plugin in order to use collapsible headers."),UT(ng,this,this.hot.columnIndexMapper.createAndRegisterIndexMap(this.pluginName,"hiding")),this.nestedHeadersPlugin=this.hot.getPlugin("nestedHeaders"),this.headerStateManager=this.nestedHeadersPlugin.getStateManager(),this.addHook("init",()=>Kg(Zm,this,Zke).call(this)),this.addHook("afterLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Kg(Zm,e,Qke).call(e,...r)}),this.addHook("afterGetColHeader",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Kg(Zm,e,qke).call(e,...r)}),this.addHook("beforeOnCellMouseDown",(i,r,s)=>Kg(Zm,this,Xke).call(this,i,r,s)),this.registerShortcuts(),super.enablePlugin(),this.updatePlugin()}updatePlugin(){if(this.hot.view){if(!this.nestedHeadersPlugin.detectedOverlappedHeaders){const{collapsibleColumns:e}=this.hot.getSettings();typeof e=="boolean"?this.headerStateManager.mapState(t=>({collapsible:t.origColspan>1})):Array.isArray(e)&&(this.headerStateManager.mapState(()=>({collapsible:!1})),this.headerStateManager.mergeStateWith(e))}super.updatePlugin()}}disablePlugin(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),UT(ng,this,null),this.nestedHeadersPlugin=null,this.unregisterShortcuts(),this.clearButtons(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{var e;const{row:t,col:i}=this.hot.getSelectedRangeLast().highlight,{collapsible:r,isCollapsed:s,columnIndex:o}=(e=this.headerStateManager.getHeaderTreeNodeData(t,i))!==null&&e!==void 0?e:{};if(r)return s?this.expandSection({row:t,col:o}):this.collapseSection({row:t,col:o}),!1},runOnlyIf:()=>{var e,t;return((e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.isSingle())&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.highlight.isHeader())},group:f3,relativeToGroup:ch,position:"before"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(f3)}clearButtons(){if(!this.hot.view)return;const e=this.hot.view._wt.getSetting("columnHeaders").length,t=this.hot.view._wt.wtTable.THEAD,i=this.hot.view._wt.wtOverlays.topOverlay.clone.wtTable.THEAD,r=this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay?this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null,s=function(o){o&&o.parentNode.removeChild(o)};He(0,e-1,o=>{const a=t.childNodes[o],l=i.childNodes[o],c=r?r.childNodes[o]:null;He(0,a.childNodes.length-1,u=>{let h=a.childNodes[u].querySelector(`.${ap}`);s(h),l&&l.childNodes[u]&&(h=l.childNodes[u].querySelector(`.${ap}`),s(h)),r&&c&&c.childNodes[u]&&(h=c.childNodes[u].querySelector(`.${ap}`),s(h))})})}expandSection(e){this.toggleCollapsibleSection([e],"expand")}collapseSection(e){this.toggleCollapsibleSection([e],"collapse")}toggleAllCollapsibleSections(e){const t=this.headerStateManager.mapNodes(i=>{const{collapsible:r,origColspan:s,headerLevel:o,columnIndex:a,isCollapsed:l}=i;if(r===!0&&s>1&&(l&&e==="expand"||!l&&e==="collapse"))return{row:this.headerStateManager.levelToRowCoords(o),col:a}});this.toggleCollapsibleSection(t,e)}collapseAll(){this.toggleAllCollapsibleSections("collapse")}expandAll(){this.toggleAllCollapsibleSections("expand")}toggleCollapsibleSection(e,t){if(!g3.has(t))throw new Error(`Unsupported action is passed (${t}).`);if(!Array.isArray(e))return;const i=Tc(e,f=>{let{row:g}=f;return g<0});let r=i.length>0;j(i,f=>{var g;let{row:p,col:m}=f;const{collapsible:b,isCollapsed:y}=(g=this.headerStateManager.getHeaderSettings(p,m))!==null&&g!==void 0?g:{};if(!b||y&&t==="collapse"||!y&&t==="expand")return r=!1,!1});const s=[],o=[];r&&j(i,f=>{let{row:g,col:p}=f;const{colspanCompensation:m,affectedColumns:b,rollbackModification:y}=this.headerStateManager.triggerNodeModification(t,g,p);m>0&&(o.push(...b),s.push(y))});const a=this.getCollapsedColumns();let l=[];t==="collapse"?l=fD([...a,...o]):t==="expand"&&(l=Tc(a,f=>!o.includes(f)));const c=g3.get(t);if(this.hot.runHooks(c.beforeHook,a,l,r)===!1){j(s,f=>{f()});return}this.hot.batchExecution(()=>{j(o,f=>{d3(ng,this).setValueAtIndex(this.hot.toPhysicalColumn(f),c.hideColumn)})},!0);const h=this.getCollapsedColumns().length!==a.length,d=this.hot.getSelectedRangeLast();if(t==="collapse"&&h&&d){const{row:f,col:g}=d.highlight;if((this.hot.rowIndexMapper.isHidden(f)||this.hot.columnIndexMapper.isHidden(g))&&o.includes(g)){const m=f>=0?this.hot.rowIndexMapper.getNearestNotHiddenIndex(f,1,!0):f,b=g>=0?this.hot.columnIndexMapper.getNearestNotHiddenIndex(g,1,!0):g;m!==null&&b!==null&&this.hot.selectCell(m,b)}}this.hot.runHooks(c.afterHook,a,l,r,h),this.hot.render(),this.hot.view.adjustElementsSize()}getCollapsedColumns(){return d3(ng,this).getHiddenIndexes()}destroy(){UT(ng,this,null),super.destroy()}}function qke(n,e,t){var i;const{collapsible:r,origColspan:s,isCollapsed:o}=(i=this.headerStateManager.getHeaderSettings(t,n))!==null&&i!==void 0?i:{},a=r&&s>1&&n>=this.hot.getSettings().fixedColumnsStart,l=this.hot.getSettings().ariaTags;let c=e.querySelector(`.${ap}`);if(Tf(e,[no("")[0]]),a)c||(c=this.hot.rootDocument.createElement("div"),ue(c,ap),e.querySelector("div:first-child").appendChild(c)),Ze(c,["collapsed","expanded"]),o?(ue(c,"collapsed"),Yu(c,"+"),l&&ze(e,...no(!1))):(ue(c,"expanded"),Yu(c,"-"),l&&ze(e,...no(!0))),l&&ze(c,...xf());else{var u;(u=c)===null||u===void 0||u.remove()}}function Xke(n,e){Ue(n.target,ap)&&(Ue(n.target,"expanded")?(this.eventManager.fireEvent(n.target,"mouseup"),this.toggleCollapsibleSection([e],"collapse")):Ue(n.target,"collapsed")&&(this.eventManager.fireEvent(n.target,"mouseup"),this.toggleCollapsibleSection([e],"expand")),mo(n))}function Zke(){this.updatePlugin()}function Qke(n,e){e||this.updatePlugin()}function kh(n,e,t){return(e=Jke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jke(n){var e=eDe(n,"string");return typeof e=="symbol"?e:e+""}function eDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const tDe=["sortEmptyCells","indicator","headerAction","compareFunctionFactory"],nDe=!1,iDe=!0,rDe=!0;class sDe{constructor(e,t){kh(this,"hot",void 0),kh(this,"sortingStates",new eE),kh(this,"sortEmptyCells",nDe),kh(this,"indicator",iDe),kh(this,"headerAction",rDe),kh(this,"compareFunctionFactory",void 0),kh(this,"mapName",void 0),this.hot=e,this.mapName=t,this.hot.columnIndexMapper.registerMap(t,this.sortingStates)}updateAllColumnsProperties(e){lt(e)&&ct(e,(t,i)=>{tDe.includes(i)&&(this[i]=t)})}getAllColumnsProperties(){const e={sortEmptyCells:this.sortEmptyCells,indicator:this.indicator,headerAction:this.headerAction};return typeof this.compareFunctionFactory=="function"&&(e.compareFunctionFactory=this.compareFunctionFactory),e}getSortOrderOfColumn(e){var t;return(t=this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(e)))===null||t===void 0?void 0:t.sortOrder}getIndexOfColumnInSortQueue(e){return e=this.hot.toPhysicalColumn(e),this.sortingStates.getEntries().findIndex(t=>{let[i]=t;return i===e})}getNumberOfSortedColumns(){return this.sortingStates.getLength()}isListOfSortedColumnsEmpty(){return this.getNumberOfSortedColumns()===0}isColumnSorted(e){return lt(this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(e)))}getSortStates(){return this.sortingStates===null?[]:this.sortingStates.getEntries().map(t=>{let[i,r]=t;return{column:this.hot.toVisualColumn(i),...r}})}getColumnSortState(e){const t=this.getSortOrderOfColumn(e);if(ke(t))return{column:e,sortOrder:t}}setSortStates(e){this.sortingStates.clear();for(let t=0;t<e.length;t+=1)this.sortingStates.setValueAtIndex(this.hot.toPhysicalColumn(e[t].column),{sortOrder:e[t].sortOrder})}destroy(){this.hot.columnIndexMapper.unregisterMap(this.mapName),this.sortingStates=null}}function tK(n,e,t){const i=e.locale;return function(r,s){const{sortEmptyCells:o}=t;return typeof r=="string"&&(r=r.toLocaleLowerCase(i)),typeof s=="string"&&(s=s.toLocaleLowerCase(i)),r===s?el:zn(r)?zn(s)?el:o&&n==="asc"?Vn:Wn:zn(s)?o&&n==="asc"?Wn:Vn:isNaN(r)&&!isNaN(s)?n==="asc"?Wn:Vn:!isNaN(r)&&isNaN(s)||(isNaN(r)||isNaN(s)||(r=parseFloat(r),s=parseFloat(s)),r<s)?n==="asc"?Vn:Wn:r>s?n==="asc"?Wn:Vn:el}}const nK="default";function oDe(n,e,t){return function(i,r){const s=parseFloat(i),o=parseFloat(r),{sortEmptyCells:a}=t;if(s===o||isNaN(s)&&isNaN(o))return el;if(a){if(zn(i))return n==="asc"?Vn:Wn;if(zn(r))return n==="asc"?Wn:Vn}return isNaN(s)?Wn:isNaN(o)?Vn:s<o?n==="asc"?Vn:Wn:s>o?n==="asc"?Wn:Vn:el}}const aDe="numeric";function lDe(n,e,t){const i=e.checkedTemplate,r=e.uncheckedTemplate,{sortEmptyCells:s}=t;return function(o,a){const l=zn(o),c=zn(a),u=l?r:o,h=c?r:a,d=u===r||u===i,f=h===r||h===i;if(s===!1){if(l&&c===!1)return Wn;if(l===!1&&c)return Vn}return d===!1&&f?n==="asc"?Vn:Wn:d&&f===!1?n==="asc"?Wn:Vn:d===!1&&f===!1?tK(n,e,t)(o,a):u===r&&h===i?n==="asc"?Vn:Wn:u===i&&h===r?n==="asc"?Wn:Vn:el}}const cDe="checkbox";function uDe(n,e,t){return lK(n,e.dateFormat,t)}const hDe="date";function dDe(n,e,t){return lK(n,e.timeFormat,t)}const fDe="time",{register:by,getItem:p3,hasItem:gDe}=ua("sorting.compareFunctionFactory"),{register:iK,getItem:pDe}=ua("sorting.mainSortComparator");function rK(n){return gDe(n)?p3(n):p3(nK)}by(cDe,lDe);by(hDe,uDe);by(nK,tK);by(aDe,oDe);by(fDe,dDe);const el=0,Vn=-1,Wn=1;function mDe(n,e){const t=pDe(e);for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];n.sort(t(...r))}const aR="asc",lR="desc",sK="colHeader";function vDe(n){if(lt(n)===!1)return!1;const{column:e,sortOrder:t}=n;return Number.isInteger(e)&&[aR,lR].includes(t)}function bDe(n){if(n.some(t=>vDe(t)===!1))return!1;const e=n.map(t=>{let{column:i}=t;return i});return new Set(e).size===e.length}function m3(n){if(n!==lR)return n===aR?lR:aR}function oK(n){return n.querySelector(`.${sK}`)}function aK(n,e){if(n<0||!e.parentNode)return!1;const t=e.parentNode.parentNode.childNodes;return Array.from(t).indexOf(e.parentNode)-t.length===-1}function ZL(n,e,t){return n===-1&&e>=0&&Ku(t)===!1}function lK(n,e,t){return function(i,r){const{sortEmptyCells:s}=t;if(i===r)return el;if(zn(i))return zn(r)?el:s&&n==="asc"?Vn:Wn;if(zn(r))return s&&n==="asc"?Wn:Vn;const o=he(i,e),a=he(r,e);return o.isValid()?a.isValid()?a.isAfter(o)?n==="asc"?Vn:Wn:a.isBefore(o)?n==="asc"?Wn:Vn:el:Vn:Wn}}const wDe="ascending",yDe="descending",cK="indicatorDisabled",uK="columnSorting",hK="sortAction",dK=new Map([[aR,wDe],[lR,yDe]]);function CDe(n,e,t,i){const r=[uK];if(i&&r.push(hK),t===!1)return r.push(cK),r;const s=n.getSortOrderOfColumn(e);return ke(s)&&r.push(dK.get(s)),r}function SDe(){return Array.from(dK.values()).concat(hK,cK,uK)}function _De(n,e){return function(t,i){const[,...r]=t,[,...s]=i;return function(a){const l=n[a],c=e[a],u=r[a],h=s[a],d=c.columnSorting;return(d.compareFunctionFactory?d.compareFunctionFactory:rK(c.type))(l,c,d)(u,h)}(0)}}function RDe(n,e){EDe(n,e),e.add(n)}function EDe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function rC(n,e,t){return(e=xDe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xDe(n){var e=TDe(n,"string");return typeof e=="symbol"?e:e+""}function TDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Pg(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const cR="columnSorting",MDe=50,uR="append",ADe="replace",v3=cR;iK(cR,_De);Ie.getSingleton().register("beforeColumnSort");Ie.getSingleton().register("afterColumnSort");var cd=new WeakSet;class fK extends Lt{constructor(){super(...arguments),RDe(this,cd),rC(this,"columnStatesManager",null),rC(this,"columnMetaCache",null),rC(this,"pluginKey",cR),rC(this,"indexesSequenceCache",null)}static get PLUGIN_KEY(){return cR}static get PLUGIN_PRIORITY(){return MDe}isEnabled(){return!!this.hot.getSettings()[this.pluginKey]}enablePlugin(){var e=this;this.enabled||(this.columnStatesManager=new sDe(this.hot,`${this.pluginKey}.sortingStates`),this.columnMetaCache=new lh(t=>{let i=this.hot.toVisualColumn(t);return i===null&&(i=t),this.getMergedPluginSettings(i)}),this.hot.columnIndexMapper.registerMap(`${this.pluginKey}.columnMeta`,this.columnMetaCache),this.addHook("afterGetColHeader",(t,i)=>Pg(cd,this,PDe).call(this,t,i)),this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Pg(cd,e,ODe).call(e,...i)}),this.addHook("afterOnCellMouseDown",(t,i)=>this.onAfterOnCellMouseDown(t,i)),this.addHook("afterInit",()=>Pg(cd,this,_I).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Pg(cd,e,IDe).call(e,...i)}),this.hot.view&&Pg(cd,this,_I).call(this),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){const e=(t,i)=>{const r=oK(i);aK(t,i)===!1||r===null||this.updateHeaderClasses(r)};this.hot.addHook("afterGetColHeader",e),this.hot.addHookOnce("afterViewRender",()=>{this.hot.removeHook("afterGetColHeader",e)}),this.hot.batchExecution(()=>{this.indexesSequenceCache!==null&&(this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues()),this.hot.rowIndexMapper.unregisterMap(this.pluginKey),this.indexesSequenceCache=null)},!0),this.hot.columnIndexMapper.unregisterMap(`${this.pluginKey}.columnMeta`),this.columnStatesManager.destroy(),this.columnMetaCache=null,this.columnStatesManager=null,this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();return this.sort(this.getColumnNextConfig(e.col)),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.row===-1&&i.col>=0},relativeToGroup:ch,position:"before",group:v3})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(v3)}sort(e){const t=this.getSortConfig(),i=this.getNormalizedSortConfigs(e),r=this.areValidSortConfigs(i);this.hot.runHooks("beforeColumnSort",t,i,r)!==!1&&(t.length===0&&this.indexesSequenceCache===null&&(this.indexesSequenceCache=this.hot.rowIndexMapper.registerMap(this.pluginKey,new hY),this.indexesSequenceCache.setValues(this.hot.rowIndexMapper.getIndexesSequence())),r&&(this.columnStatesManager.setSortStates(i),this.sortByPresetSortStates(i),this.saveAllSortSettings(i)),this.hot.runHooks("afterColumnSort",t,r?i:t,r),r&&(this.hot.render(),this.hot.forceFullRender=!1,this.hot.view.render()))}clearSort(){this.sort([])}isSorted(){return this.enabled&&!this.columnStatesManager.isListOfSortedColumnsEmpty()}getSortConfig(e){return ke(e)?this.columnStatesManager.getColumnSortState(e):this.columnStatesManager.getSortStates()}setSortConfig(e){const t=this.getNormalizedSortConfigs(e);this.areValidSortConfigs(t)&&this.columnStatesManager.setSortStates(t)}getNormalizedSortConfigs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)?e.slice(0,1):[e]}areValidSortConfigs(e){const t=this.hot.countCols();return bDe(e)&&e.every(i=>{let{column:r}=i;return r<=t&&r>=0})}saveAllSortSettings(e){const t=this.columnStatesManager.getAllColumnsProperties(),i=r=>{let{column:s,...o}=r;return{column:this.hot.toPhysicalColumn(s),...o}};t.initialConfig=vt(e,i),this.hot.runHooks("persistentStateSave","columnSorting",t)}getAllSavedSortSettings(){const e={};this.hot.runHooks("persistentStateLoad","columnSorting",e);const t=e.value,i=r=>{let{column:s,...o}=r;return{column:this.hot.toVisualColumn(s),...o}};return ke(t)&&Array.isArray(t.initialConfig)&&(t.initialConfig=vt(t.initialConfig,i)),t}getColumnNextConfig(e){const t=this.columnStatesManager.getSortOrderOfColumn(e);if(ke(t)){const r=m3(t);return ke(r)?{column:e,sortOrder:r}:void 0}const i=this.hot.countCols();if(Number.isInteger(e)&&e>=0&&e<i)return{column:e,sortOrder:m3()}}getNextSortConfig(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:uR;const i=this.columnStatesManager.getIndexOfColumnInSortQueue(e),r=i!==-1,s=this.getSortConfig(),o=this.getColumnNextConfig(e);if(r){if(dn(o))return[...s.slice(0,i),...s.slice(i+1)];if(t===uR)return[...s.slice(0,i),...s.slice(i+1),o];if(t===ADe)return[...s.slice(0,i),o,...s.slice(i+1)]}return ke(o)?s.concat(o):s}getPluginColumnConfig(e){if(lt(e)){const t=e[this.pluginKey];if(lt(t))return t}return{}}getMergedPluginSettings(e){const t=this.hot.getSettings()[this.pluginKey],i=this.columnStatesManager.getAllColumnsProperties(),r=this.hot.getCellMeta(0,e),s=Object.getPrototypeOf(r);return Array.isArray(s.columns)?Object.assign(i,t,this.getPluginColumnConfig(s.columns[e])):cn(s.columns)?Object.assign(i,t,this.getPluginColumnConfig(s.columns(e))):Object.assign(i,t)}getFirstCellSettings(e){const t=this.hot.getCellMeta(0,e),i=Object.create(t);return i[this.pluginKey]=this.columnMetaCache.getValueAtIndex(this.hot.toPhysicalColumn(e)),i}getNumberOfRowsToSort(e){const t=this.hot.getSettings();return t.maxRows<=e?t.maxRows:e-t.minSpareRows}sortByPresetSortStates(e){if(this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues()),e.length===0)return;const t=[],i=this.hot.countRows(),r=c=>vt(e,u=>this.hot.getDataAtCell(c,u.column));for(let c=0;c<this.getNumberOfRowsToSort(i);c+=1)t.push([this.hot.toPhysicalRow(c)].concat(r(c)));const s=vt(t,c=>c[0]);mDe(t,this.pluginKey,vt(e,c=>c.sortOrder),vt(e,c=>this.getFirstCellSettings(c.column)));for(let c=t.length;c<i;c+=1)t.push([c].concat(r(c)));const o=vt(t,c=>c[0]),a=new Map(vt(s,(c,u)=>[c,o[u]])),l=vt(this.hot.rowIndexMapper.getIndexesSequence(),c=>a.has(c)?a.get(c):c);this.hot.rowIndexMapper.setIndexesSequence(l)}sortBySettings(e){if(lt(e)){this.columnStatesManager.updateAllColumnsProperties(e);const t=e.initialConfig;(Array.isArray(t)||lt(t))&&this.sort(t)}else this.hot.render()}updateHeaderClasses(e){if(Ze(e,SDe()),this.enabled!==!1){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];ue(e,CDe(...i))}}onUpdateSettings(e){super.onUpdateSettings(),this.columnMetaCache!==null&&this.columnMetaCache.init(this.hot.columnIndexMapper.getNumberOfIndexes()),ke(e[this.pluginKey])&&this.sortBySettings(e[this.pluginKey])}wasClickableHeaderClicked(e,t){return this.getFirstCellSettings(t)[this.pluginKey].headerAction&&Ue(e.target,sK)}onAfterOnCellMouseDown(e,t){if(ZL(t.row,t.col,e)!==!1&&this.wasClickableHeaderClicked(e,t.col)){this.hot.getShortcutManager().isCtrlPressed()&&(this.hot.deselectCell(),this.hot.selectColumns(t.col));const i=this.hot.getActiveEditor(),r=this.getColumnNextConfig(t.col);i!=null&&i.isOpened()&&this.hot.getCellValidator(i.row,i.col)?this.hot.addHookOnce("postAfterValidate",()=>{this.sort(r)}):this.sort(r)}}destroy(){var e;(e=this.columnStatesManager)===null||e===void 0||e.destroy(),super.destroy()}}function _I(){const n=this.getAllSavedSortSettings();if(lt(n))this.sortBySettings(n);else{const e=this.hot.getSettings()[this.pluginKey];this.sortBySettings(e)}}function PDe(n,e){const t=oK(e);if(aK(n,e)===!1||t===null)return;const i=this.getFirstCellSettings(n)[this.pluginKey],r=i.indicator,s=i.headerAction;if(this.updateHeaderClasses(t,this.columnStatesManager,n,r,s),this.hot.getSettings().ariaTags){const o=this.columnStatesManager.getSortOrderOfColumn(n);ze(e,...h_e(o?`${o}ending`:"none"))}}function IDe(n){n===!0&&this.hot.view&&Pg(cd,this,_I).call(this)}function ODe(n,e,t,i){ZL(e.row,e.col,n)!==!1&&this.wasClickableHeaderClicked(n,e.col)&&this.hot.getShortcutManager().isCtrlPressed()&&(i.column=!0)}function Dh(n,e,t){return(e=kDe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kDe(n){var e=DDe(n,"string");return typeof e=="symbol"?e:e+""}function DDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class NDe{constructor(e,t){Dh(this,"plugin",void 0),Dh(this,"hot",void 0),Dh(this,"endpoints",[]),Dh(this,"settings",void 0),Dh(this,"settingsType","array"),Dh(this,"currentEndpoint",null),Dh(this,"cellsToSetCache",[]),this.plugin=e,this.hot=this.plugin.hot,this.settings=t}initEndpoints(){this.endpoints=this.parseSettings(),this.refreshAllEndpoints()}getEndpoint(e){return this.settingsType==="function"?this.fillMissingEndpointData(this.settings)[e]:this.endpoints[e]}getAllEndpoints(){return this.settingsType==="function"?this.fillMissingEndpointData(this.settings):this.endpoints}fillMissingEndpointData(e){return this.parseSettings(e.call(this))}parseSettings(e){const t=[];let i=e;if(!i&&typeof this.settings=="function"){this.settingsType="function";return}return i||(i=this.settings),j(i,r=>{const s={};this.assignSetting(r,s,"ranges",[[0,this.hot.countRows()-1]]),this.assignSetting(r,s,"reversedRowCoords",!1),this.assignSetting(r,s,"destinationRow",new Error(`
        You must provide a destination row for the Column Summary plugin in order to work properly!
      `)),this.assignSetting(r,s,"destinationColumn",new Error(`
        You must provide a destination column for the Column Summary plugin in order to work properly!
      `)),this.assignSetting(r,s,"sourceColumn",r.destinationColumn),this.assignSetting(r,s,"type","sum"),this.assignSetting(r,s,"forceNumeric",!1),this.assignSetting(r,s,"suppressDataTypeErrors",!0),this.assignSetting(r,s,"customFunction",null),this.assignSetting(r,s,"readOnly",!0),this.assignSetting(r,s,"roundFloat",!1),t.push(s)}),t}assignSetting(e,t,i,r){if(i==="ranges"&&e[i]===void 0){t[i]=r;return}else if(i==="ranges"&&e[i].length===0)return;if(e[i]===void 0){if(r instanceof Error)throw r;t[i]=r}else i==="destinationRow"&&t.reversedRowCoords?t[i]=this.hot.countRows()-e[i]-1:t[i]=e[i]}resetSetupBeforeStructureAlteration(e,t,i){if(this.settingsType!=="function")return;const r=e.indexOf("row")>-1?"row":"col",s=this.getAllEndpoints();j(s,o=>{r==="row"&&o.destinationRow>=t&&(e==="insert_row"?o.alterRowOffset=i:e==="remove_row"&&(o.alterRowOffset=-1*i)),r==="col"&&o.destinationColumn>=t&&(e==="insert_col"?o.alterColumnOffset=i:e==="remove_col"&&(o.alterColumnOffset=-1*i))}),this.resetAllEndpoints(s,!1)}resetSetupAfterStructureAlteration(e,t,i,r,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;if(this.settingsType==="function"){const d=()=>(this.hot.removeHook("beforeViewRender",d),this.refreshAllEndpoints());this.hot.addHookOnce("beforeViewRender",d);return}const a=e.indexOf("row")>-1?"row":"col",l=e.indexOf("remove")>-1?-1:1,c=this.getAllEndpoints(),u=e.indexOf("move_row")===0,h=t;j(c,d=>{a==="row"&&d.destinationRow>=h&&(d.alterRowOffset=l*i),a==="col"&&d.destinationColumn>=h&&(d.alterColumnOffset=l*i)}),this.resetAllEndpoints(c,!u),u?j(c,d=>{this.extendEndpointRanges(d,h,r[0],r.length),this.recreatePhysicalRanges(d),this.clearOffsetInformation(d)}):j(c,d=>{this.shiftEndpointCoordinates(d,h)}),o&&this.refreshAllEndpoints()}clearOffsetInformation(e){e.alterRowOffset=void 0,e.alterColumnOffset=void 0}extendEndpointRanges(e,t,i,r){j(e.ranges,s=>{s[1]&&(t>=s[0]&&t<=s[1]?i>s[1]?s[1]+=r:i<s[0]&&(s[0]-=r):i>=s[0]&&i<=s[1]&&(s[1]-=r,t<=s[0]&&(s[0]+=1,s[1]+=1)))})}recreatePhysicalRanges(e){const t=e.ranges,i=[],r=[];j(t,s=>{const o=[];if(s[1])for(let a=s[0];a<=s[1];a++)o.push(this.hot.toPhysicalRow(a));else o.push(this.hot.toPhysicalRow(s[0]));r.push(o)}),j(r,s=>{let o=[];j(s,(a,l)=>{l===0?o.push(a):s[l]!==s[l-1]+1&&(o.push(s[l-1]),i.push(o),o=[],o.push(a)),l===s.length-1&&(o.push(a),i.push(o))})}),e.ranges=i}shiftEndpointCoordinates(e,t){e.alterRowOffset&&e.alterRowOffset!==0?(e.destinationRow+=e.alterRowOffset||0,j(e.ranges,i=>{j(i,(r,s)=>{r>=t&&(i[s]+=e.alterRowOffset||0)})})):e.alterColumnOffset&&e.alterColumnOffset!==0&&(e.destinationColumn+=e.alterColumnOffset||0,e.sourceColumn+=e.alterColumnOffset||0)}resetAllEndpoints(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getAllEndpoints(),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e.some(r=>{const s=r.alterRowOffset||0,o=r.alterColumnOffset||0;return r.destinationRow+s>=this.hot.countRows()||r.destinationColumn+o>=this.hot.countCols()})||(this.cellsToSetCache=[],j(e,r=>{this.resetEndpointValue(r,t)}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[])}refreshAllEndpoints(){this.cellsToSetCache=[],j(this.getAllEndpoints(),e=>{this.currentEndpoint=e,this.plugin.calculate(e),this.setEndpointValue(e,"init")}),this.currentEndpoint=null,this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}refreshChangedEndpoints(e){const t=[];this.cellsToSetCache=[],j(e,(i,r,s)=>{`${i[2]||""}`!=`${i[3]}`&&j(this.getAllEndpoints(),(o,a)=>{this.hot.propToCol(s[r][1])===o.sourceColumn&&t.indexOf(a)===-1&&t.push(a)})}),j(t,i=>{this.refreshEndpoint(this.getEndpoint(i))}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}refreshCellMetas(){this.endpoints.forEach(e=>{const t=this.hot.toVisualRow(e.destinationRow);if(t!==null){const i=this.hot.getCellMeta(t,e.destinationColumn);i.readOnly=e.readOnly,i.className="columnSummaryResult"}})}refreshEndpoint(e){this.currentEndpoint=e,this.plugin.calculate(e),this.setEndpointValue(e),this.currentEndpoint=null}resetEndpointValue(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const i=e.alterRowOffset||0,r=e.alterColumnOffset||0;this.cellsToSetCache.push([this.hot.toVisualRow(e.destinationRow+(t?i:0)),this.hot.toVisualColumn(e.destinationColumn+(t?r:0)),""])}setEndpointValue(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=this.hot.toVisualRow(e.destinationRow);if(e.destinationRow>=this.hot.countRows()||e.destinationColumn>=this.hot.countCols()){this.throwOutOfBoundsWarning();return}const s=this.hot.toVisualRow(e.destinationRow);if(s!==null){const o=this.hot.getCellMeta(s,e.destinationColumn);(t==="init"||o.readOnly!==e.readOnly)&&(o.readOnly=e.readOnly,o.className="columnSummaryResult")}if((e.roundFloat===!0||Number.isInteger(e.roundFloat))&&!isNaN(e.result)){const o=e.roundFloat;let a=0;Number.isInteger(o)&&(a=Math.min(Math.max(0,o),100)),e.result=e.result.toFixed(a)}i?this.hot.setDataAtCell(r,e.destinationColumn,e.result,"ColumnSummary.set"):this.cellsToSetCache.push([r,e.destinationColumn,e.result]),e.alterRowOffset=void 0,e.alterColumnOffset=void 0}throwOutOfBoundsWarning(){Yt("One of the Column Summary plugins' destination points you provided is beyond the table boundaries!")}}function GT(n){return n==null||isNaN(n)}function LDe(n,e){HDe(n,e),e.add(n)}function HDe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $De(n,e,t){return(e=FDe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FDe(n){var e=BDe(n,"string");return typeof e=="symbol"?e:e+""}function BDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sC(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const YT="columnSummary",VDe=220;var Qm=new WeakSet;class WDe extends Lt{constructor(){super(...arguments),LDe(this,Qm),$De(this,"endpoints",null)}static get PLUGIN_KEY(){return YT}static get PLUGIN_PRIORITY(){return VDe}isEnabled(){return!!this.hot.getSettings()[YT]}enablePlugin(){var e=this;this.enabled||(this.settings=this.hot.getSettings()[YT],this.endpoints=new NDe(this,this.settings),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return sC(Qm,e,jDe).call(e,...i)}),this.addHook("afterChange",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return sC(Qm,e,UDe).call(e,...i)}),this.addHook("afterUpdateSettings",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return sC(Qm,e,zDe).call(e,...i)}),this.addHook("beforeCreateRow",(t,i,r)=>this.endpoints.resetSetupBeforeStructureAlteration("insert_row",t,i,null,r)),this.addHook("beforeCreateCol",(t,i,r)=>this.endpoints.resetSetupBeforeStructureAlteration("insert_col",t,i,null,r)),this.addHook("beforeRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.endpoints.resetSetupBeforeStructureAlteration("remove_row",...i)}),this.addHook("beforeRemoveCol",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.endpoints.resetSetupBeforeStructureAlteration("remove_col",...i)}),this.addHook("afterCreateRow",(t,i,r)=>this.endpoints.resetSetupAfterStructureAlteration("insert_row",t,i,null,r)),this.addHook("afterCreateCol",(t,i,r)=>this.endpoints.resetSetupAfterStructureAlteration("insert_col",t,i,null,r)),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.endpoints.resetSetupAfterStructureAlteration("remove_row",...i)}),this.addHook("afterRemoveCol",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.endpoints.resetSetupAfterStructureAlteration("remove_col",...i)}),this.addHook("afterRowMove",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return sC(Qm,e,GDe).call(e,...i)}),super.enablePlugin())}disablePlugin(){this.endpoints=null,this.settings=null,this.currentEndpoint=null,super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.endpoints.initEndpoints(),super.updatePlugin()}calculate(e){switch(e.type.toLowerCase()){case"sum":e.result=this.calculateSum(e);break;case"min":e.result=this.calculateMinMax(e,e.type);break;case"max":e.result=this.calculateMinMax(e,e.type);break;case"count":e.result=this.countEntries(e);break;case"average":e.result=this.calculateAverage(e);break;case"custom":e.result=e.customFunction.call(this,e);break}}calculateSum(e){let t=0;return ct(e.ranges,i=>{t+=this.getPartialSum(i,e.sourceColumn)}),t}getPartialSum(e,t){let i=0,r=e[1]||e[0],s=null,o=0;do{if(s=this.getCellValue(r,t),s=GT(s)?null:s,s!==null){const a=(`${s}`.split(".")[1]||[]).length||1;a>o&&(o=a)}i+=s||0,r-=1}while(r>=e[0]);return Math.round(i*10**o)/10**o}calculateMinMax(e,t){let i=null;return ct(e.ranges,r=>{const s=this.getPartialMinMax(r,e.sourceColumn,t);if(i===null&&s!==null&&(i=s),s!==null)switch(t){case"min":i=Math.min(i,s);break;case"max":i=Math.max(i,s);break}}),i===null?"Not enough data":i}getPartialMinMax(e,t,i){let r=null,s=e[1]||e[0],o;do{if(o=this.getCellValue(s,t),o=GT(o)?null:o,r===null)r=o;else if(o!==null)switch(i){case"min":r=Math.min(r,o);break;case"max":r=Math.max(r,o);break}s-=1}while(s>=e[0]);return r}countEmpty(e,t){let i,r=0,s=e[1]||e[0];do i=this.getCellValue(s,t),i=GT(i)?null:i,i===null&&(r+=1),s-=1;while(s>=e[0]);return r}countEntries(e){let t=0;const i=e.ranges;return ct(i,r=>{const s=r[1]===void 0?1:r[1]-r[0]+1,o=this.countEmpty(r,e.sourceColumn);t+=s,t-=o}),t}calculateAverage(e){const t=this.calculateSum(e),i=this.countEntries(e);return t/i}getCellValue(e,t){const i=this.hot.toVisualRow(e),r=this.hot.toVisualColumn(t);let s=this.hot.getSourceDataAtCell(e,t),o="";if(i!==null&&r!==null&&(o=this.hot.getCellMeta(i,r).className||""),o.indexOf("columnSummaryResult")>-1)return null;if(this.endpoints.currentEndpoint.forceNumeric&&(typeof s=="string"&&(s=s.replace(/,/,".")),s=parseFloat(s)),isNaN(s)&&!this.endpoints.currentEndpoint.suppressDataTypeErrors)throw new Error(Kt`ColumnSummary plugin: cell at (${e}, ${t}) is not in a\x20
          numeric format. Cannot do the calculation.`);return s}}function jDe(){this.endpoints.initEndpoints()}function zDe(n){n.columns!==void 0&&this.endpoints.refreshCellMetas()}function UDe(n,e){n&&e!=="ColumnSummary.reset"&&e!=="ColumnSummary.set"&&e!=="loadData"&&this.endpoints.refreshChangedEndpoints(n)}function GDe(n,e){this.endpoints.resetSetupBeforeStructureAlteration("move_row",n[0],n.length,n,this.pluginName),this.endpoints.resetSetupAfterStructureAlteration("move_row",e,n.length,n,this.pluginName)}function YDe(n,e){gK(n,e),e.add(n)}function KT(n,e,t){gK(n,e),e.set(n,t)}function gK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ig(n,e){return n.get(QL(n,e))}function RI(n,e,t){return n.set(QL(n,e),t),t}function QL(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var hR=new WeakMap,oC=new WeakMap,aC=new WeakMap,b3=new WeakSet;class pK{constructor(){YDe(this,b3),KT(this,hR,!0),KT(this,oC,null),KT(this,aC,new ResizeObserver(e=>QL(b3,this,KDe).call(this,e)))}setObservedElement(e){RI(oC,this,e)}unobserve(){Ig(aC,this).unobserve(Ig(oC,this))}observe(){RI(hR,this,!0),Ig(aC,this).observe(Ig(oC,this))}destroy(){Ig(aC,this).disconnect()}}function KDe(n){if(Ig(hR,this)||!Array.isArray(n)||!n.length){RI(hR,this,!1);return}n.forEach(e=>{let{borderBoxSize:t}=e;const{inlineSize:i,blockSize:r}=t[0];this.runLocalHooks("resize",i,r)})}Xt(pK,Ki);function Nh(n,e,t){qDe(n,e),e.set(n,t)}function qDe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function tn(n,e){return n.get(mK(n,e))}function Nl(n,e,t){return n.set(mK(n,e),t),t}function mK(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Lh=new WeakMap,qT=new WeakMap,Ll=new WeakMap,Hh=new WeakMap,Yc=new WeakMap,lC=new WeakMap,ig=new WeakMap;class Rd{static get CLASS_EDITOR_CONTAINER(){return"htCommentsContainer"}static get CLASS_EDITOR(){return"htComments"}static get CLASS_INPUT(){return"htCommentTextArea"}static get CLASS_CELL(){return"htCommentCell"}constructor(e,t){var i=this;Nh(this,Lh,void 0),Nh(this,qT,!1),Nh(this,Ll,null),Nh(this,Hh,void 0),Nh(this,Yc,void 0),Nh(this,lC,!0),Nh(this,ig,new pK),Nl(Lh,this,e),Nl(qT,this,t),Nl(Hh,this,this.createEditor()),Nl(Yc,this,tn(Hh,this).style),tn(ig,this).setObservedElement(this.getInputElement()),tn(ig,this).addLocalHook("resize",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("resize",...s)}),this.hide()}setPosition(e,t){tn(Yc,this).left=`${e}px`,tn(Yc,this).top=`${t}px`}setSize(e,t){if(e&&t){const i=this.getInputElement();i.style.width=`${e}px`,i.style.height=`${t}px`}}getSize(){return{width:fn(this.getInputElement()),height:ni(this.getInputElement())}}observeSize(){tn(ig,this).observe()}resetSize(){const e=this.getInputElement();e.style.width="",e.style.height=""}setReadOnlyState(e){const t=this.getInputElement();t.readOnly=e}show(){tn(Yc,this).display="block",Nl(lC,this,!1)}hide(){tn(ig,this).unobserve(),tn(lC,this)||(tn(Yc,this).display="none"),Nl(lC,this,!0)}isVisible(){return tn(Yc,this).display==="block"}setValue(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"")||"";this.getInputElement().value=t}getValue(){return this.getInputElement().value}isFocused(){return tn(Lh,this).activeElement===this.getInputElement()}focus(){this.getInputElement().focus()}createEditor(){const e=tn(Lh,this).createElement("div"),t=tn(Lh,this).createElement("textarea");return e.style.display="none",Nl(Ll,this,tn(Lh,this).createElement("div")),tn(Ll,this).setAttribute("dir",tn(qT,this)?"rtl":"ltr"),ue(tn(Ll,this),Rd.CLASS_EDITOR_CONTAINER),tn(Lh,this).body.appendChild(tn(Ll,this)),ue(e,Rd.CLASS_EDITOR),ue(t,Rd.CLASS_INPUT),t.setAttribute("data-hot-input",!0),e.appendChild(t),tn(Ll,this).appendChild(e),e}getInputElement(){return tn(Hh,this).querySelector(`.${Rd.CLASS_INPUT}`)}destroy(){const e=tn(Ll,this)?tn(Ll,this).parentNode:null;tn(Hh,this).parentNode.removeChild(tn(Hh,this)),Nl(Hh,this,null),Nl(Yc,this,null),tn(ig,this).destroy(),e&&e.removeChild(tn(Ll,this))}}Xt(Rd,Ki);function XT(n,e,t){return(e=XDe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XDe(n){var e=ZDe(n,"string");return typeof e=="symbol"?e:e+""}function ZDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const QDe=250,JDe=250;class vK{constructor(e){XT(this,"wasLastActionShow",!0),XT(this,"showDebounced",null),XT(this,"hidingTimer",null),this.updateDelay(e)}hide(){this.wasLastActionShow=!1,this.hidingTimer=setTimeout(()=>{this.wasLastActionShow===!1&&this.runLocalHooks("hide")},JDe)}show(e){this.wasLastActionShow=!0,this.showDebounced(e)}cancelHiding(){this.wasLastActionShow=!0,clearTimeout(this.hidingTimer),this.hidingTimer=null}updateDelay(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:QDe;this.showDebounced=j1(t=>{this.wasLastActionShow&&this.runLocalHooks("show",t.from.row,t.from.col)},e)}destroy(){this.clearLocalHooks()}}Xt(vK,Ki);function eNe(n,e){return n.indexOf(e)!==-1?n:`${n.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ","")} ${e}`}function tNe(n,e){return n.indexOf(e)!==-1?n:`${n.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ","")} ${e}`}function $h(n,e){const t={};return j(n,i=>{i.forAll((r,s)=>{r>=0&&s>=0&&(t[r]||(t[r]=[]),t[r][s]=e(r,s))})}),t}function au(n,e,t,i,r){j(n,s=>{s.forAll((o,a)=>{o>=0&&a>=0&&nNe(o,a,e,t,i,r)})})}function nNe(n,e,t,i,r,s){const o=r(n,e);let a=i;o.className&&(t==="vertical"?a=eNe(o.className,i):a=tNe(o.className,i)),s(n,e,"className",a)}function Xl(n){return`<span class="selected"></span>${n}`}function Ab(n,e){let t=!1;return Array.isArray(n)&&j(n,i=>(i.forAll((r,s)=>{if(r>=0&&s>=0&&e(r,s))return t=!0,!1}),t)),t}function lE(n,e){const t={top:0,left:0};if(e!==n.ownerDocument){const{frameElement:i}=e.defaultView,{top:r,left:s}=i.getBoundingClientRect();t.top=r,t.left=s}return t}function iNe(n){return function(e,t){const i=this.getCellMeta(e,t).className;return i&&i.indexOf(n)!==-1}}function Br(n,e){return Ab(n.getSelectedRange(),iNe(e).bind(n))}const ht="---------";function rNe(){return{name:ht}}const Us="alignment";function sNe(){return{key:Us,name(){return this.getTranslatedPhrase(HN)},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()?!0:!(this.getSelectedRange()&&!this.selection.isSelectedByCorner())},submenu:{items:[{key:`${Us}:left`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(Z_)},ariaChecked(){return Br(this,"htLeft")},name(){let n=this.getTranslatedPhrase(Z_);return Br(this,"htLeft")&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=$h(n,(r,s)=>this.getCellMeta(r,s).className),t="horizontal",i="htLeft";this.runHooks("beforeCellAlignment",e,n,t,i),au(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${Us}:center`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(Q_)},ariaChecked(){return Br(this,"htCenter")},name(){let n=this.getTranslatedPhrase(Q_);return Br(this,"htCenter")&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=$h(n,(r,s)=>this.getCellMeta(r,s).className),t="horizontal",i="htCenter";this.runHooks("beforeCellAlignment",e,n,t,i),au(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${Us}:right`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(J_)},ariaChecked(){return Br(this,"htRight")},name(){let n=this.getTranslatedPhrase(J_);return Br(this,"htRight")&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=$h(n,(r,s)=>this.getCellMeta(r,s).className),t="horizontal",i="htRight";this.runHooks("beforeCellAlignment",e,n,t,i),au(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${Us}:justify`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(eR)},ariaChecked(){return Br(this,"htJustify")},name(){let n=this.getTranslatedPhrase(eR);return Br(this,"htJustify")&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=$h(n,(r,s)=>this.getCellMeta(r,s).className),t="horizontal",i="htJustify";this.runHooks("beforeCellAlignment",e,n,t,i),au(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{name:ht},{key:`${Us}:top`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(tR)},ariaChecked(){return Br(this,"htTop")},name(){let n=this.getTranslatedPhrase(tR);return Br(this,"htTop")&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=$h(n,(r,s)=>this.getCellMeta(r,s).className),t="vertical",i="htTop";this.runHooks("beforeCellAlignment",e,n,t,i),au(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${Us}:middle`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(nR)},ariaChecked(){return Br(this,"htMiddle")},name(){let n=this.getTranslatedPhrase(nR);return Br(this,"htMiddle")&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=$h(n,(r,s)=>this.getCellMeta(r,s).className),t="vertical",i="htMiddle";this.runHooks("beforeCellAlignment",e,n,t,i),au(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${Us}:bottom`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(iR)},ariaChecked(){return Br(this,"htBottom")},name(){let n=this.getTranslatedPhrase(iR);return Br(this,"htBottom")&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=$h(n,(r,s)=>this.getCellMeta(r,s).className),t="vertical",i="htBottom";this.runHooks("beforeCellAlignment",e,n,t,i),au(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1}]}}}const cE="clear_column";function oNe(){return{key:cE,name(){return this.getTranslatedPhrase(_N)},callback(n,e){const t=e[0].start.col,i=e[0].end.col;this.countRows()&&this.populateFromArray(0,t,[[null]],Math.max(e[0].start.row,e[0].end.row),i,"ContextMenu.clearColumn")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:!this.selection.isSelectedByColumnHeader()}}}const wy="col_left";function aNe(){return{key:wy,name(){return this.getTranslatedPhrase(vN)},callback(){const n=this.getSelectedRangeLast().getTopLeftCorner(),e=this.isRtl()?"insert_col_end":"insert_col_start";this.alter(e,n.col,1,"ContextMenu.columnLeft")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:this.selection.isSelectedByCorner()?this.countCols()===0:this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols},hidden(){return!this.getSettings().allowInsertColumn}}}const yy="col_right";function lNe(){return{key:yy,name(){return this.getTranslatedPhrase(bN)},callback(){const n=this.getSelectedRangeLast().getTopRightCorner(),e=this.isRtl()?"insert_col_start":"insert_col_end";this.alter(e,n.col,1,"ContextMenu.columnRight")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:this.selection.isSelectedByCorner()?!1:this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols},hidden(){return!this.getSettings().allowInsertColumn}}}const Cy="make_read_only";function cNe(){return{key:Cy,checkable:!0,ariaChecked(){return Ab(this.getSelectedRange(),(e,t)=>this.getCellMeta(e,t).readOnly)},ariaLabel(){return this.getTranslatedPhrase(X_)},name(){let n=this.getTranslatedPhrase(X_);return Ab(this.getSelectedRange(),(t,i)=>this.getCellMeta(t,i).readOnly)&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=Ab(n,(t,i)=>this.getCellMeta(t,i).readOnly);j(n,t=>{t.forAll((i,r)=>{i>=0&&r>=0&&this.setCellMeta(i,r,"readOnly",!e)})}),this.render()},disabled(){const n=this.getSelectedRangeLast();return!!(!n||n.isSingleHeader()||this.selection.isSelectedByCorner()||this.countRows()===0||this.countCols()===0||!this.getSelectedRange()||this.getSelectedRange().length===0)}}}const uE="redo";function uNe(){return{key:uE,name(){return this.getTranslatedPhrase(SN)},callback(){this.redo()},hidden(){const n=this.getPlugin("undoRedo");return!n||!n.isEnabled()},disabled(){return!this.getPlugin("undoRedo").isRedoAvailable()}}}const Sy="remove_col";function hNe(){return{key:Sy,name(){const n=this.getSelected();let e=0;if(n)if(n.length>1)e=1;else{const[,t,,i]=n[0];t-i!==0&&(e=1)}return this.getTranslatedPhrase(yN,e)},callback(){this.alter("remove_col",JMe(this),null,"ContextMenu.removeColumn")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();if(!n||n.isSingleHeader()&&n.highlight.col<0)return!0;const e=this.countCols();return this.selection.isSelectedByCorner()?e===0:this.selection.isSelectedByRowHeader()||e===0},hidden(){return!this.getSettings().allowRemoveColumn}}}const hE="remove_row";function dNe(){return{key:hE,name(){const n=this.getSelected();let e=0;if(n)if(n.length>1)e=1;else{const[t,,i]=n[0];t-i!==0&&(e=1)}return this.getTranslatedPhrase(wN,e)},callback(){this.alter("remove_row",eAe(this),1,"ContextMenu.removeRow")},disabled(){const n=this.getSelectedRangeLast();if(!n||n.isSingleHeader()&&n.highlight.row<0)return!0;const e=this.countRows();return this.selection.isSelectedByCorner()?e===0:this.selection.isSelectedByColumnHeader()||e===0},hidden(){return!this.getSettings().allowRemoveRow}}}const dE="row_above";function fNe(){return{key:dE,name(){return this.getTranslatedPhrase(pN)},callback(){const n=this.getSelectedRangeLast().getTopLeftCorner();this.alter("insert_row_above",n.row,1,"ContextMenu.rowAbove")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.row<0?!0:this.selection.isSelectedByCorner()?this.countRows()===0:this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows},hidden(){return!this.getSettings().allowInsertRow}}}const fE="row_below";function gNe(){return{key:fE,name(){return this.getTranslatedPhrase(mN)},callback(){const n=this.getSelectedRangeLast().getBottomRightCorner();this.alter("insert_row_below",n.row,1,"ContextMenu.rowBelow")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.row<0?!0:this.selection.isSelectedByCorner()?!1:this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows},hidden(){return!this.getSettings().allowInsertRow}}}const _w="no_items";function pNe(){return{key:_w,name(){return this.getTranslatedPhrase(gN)},disabled:!0,isCommand:!1}}const gE="undo";function mNe(){return{key:gE,name(){return this.getTranslatedPhrase(CN)},callback(){this.undo()},hidden(){const n=this.getPlugin("undoRedo");return!n||!n.isEnabled()},disabled(){return!this.getPlugin("undoRedo").isUndoAvailable()}}}const vNe=[dE,fE,wy,yy,cE,hE,Sy,gE,uE,Cy,Us,ht,_w],bNe={[ht]:rNe,[_w]:pNe,[dE]:fNe,[fE]:gNe,[wy]:aNe,[yy]:lNe,[cE]:oNe,[hE]:dNe,[Sy]:hNe,[gE]:mNe,[uE]:uNe,[Cy]:cNe,[Us]:sNe};function bK(){const n={};return ct(bNe,(e,t)=>{n[t]=e()}),n}function wNe(n){return{key:"commentsAddEdit",name(){var e;const t=(e=this.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t!=null&&t.isCell()&&n.getCommentAtCell(t.row,t.col)?this.getTranslatedPhrase(DN):this.getTranslatedPhrase(kN)},callback(){const e=this.getSelectedRangeLast();n.setRange(e),n.show(),n.focusEditor()},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function yNe(n){return{key:"commentsRemove",name(){return this.getTranslatedPhrase(NN)},callback(){this.getSelectedRangeLast().forAll((t,i)=>{t>=0&&i>=0&&n.removeCommentAtCell(t,i,!1)}),this.render()},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function CNe(n){return{key:"commentsReadOnly",name(){const e=this.getTranslatedPhrase(LN);return Ab(this.getSelectedRange(),(i,r)=>n.getCommentMeta(i,r,AS))?Xl(e):e},callback(){this.getSelectedRangeLast().forAll((t,i)=>{if(t>=0&&i>=0){const r=!!n.getCommentMeta(t,i,AS);n.updateCommentMeta(t,i,{[AS]:!r})}})},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||!n.getCommentAtCell(e.highlight.row,e.highlight.col)||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function SNe(n,e){wK(n,e),e.add(n)}function rg(n,e,t){wK(n,e),e.set(n,t)}function wK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _Ne(n,e,t){return(e=RNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RNe(n){var e=ENe(n,"string");return typeof e=="symbol"?e:e+""}function ENe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Mu(n,e,t){return n.set(Lo(n,e),t),t}function pt(n,e){return n.get(Lo(n,e))}function Lo(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Pb="comments",xNe=60,Zl="comment",zv="value",yK="style",AS="readOnly",cC=Pb,EI=`plugin:${Pb}`;var rn=new WeakMap,Oa=new WeakMap,pE=new WeakMap,PS=new WeakMap,xI=new WeakMap,dR=new WeakMap,wa=new WeakSet;class TNe extends Lt{constructor(){super(...arguments),SNe(this,wa),_Ne(this,"range",{}),rg(this,rn,null),rg(this,Oa,null),rg(this,pE,!1),rg(this,PS,!1),rg(this,xI,null),rg(this,dR,"")}static get PLUGIN_KEY(){return Pb}static get PLUGIN_PRIORITY(){return xNe}isEnabled(){return!!this.hot.getSettings()[Pb]}enablePlugin(){var e=this;this.enabled||(pt(rn,this)||(Mu(rn,this,new Rd(this.hot.rootDocument,this.hot.isRtl())),pt(rn,this).addLocalHook("resize",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Lo(wa,e,DNe).call(e,...i)})),pt(Oa,this)||Mu(Oa,this,new vK(this.getDisplayDelaySetting())),this.addHook("afterContextMenuDefaultOptions",t=>this.addToContextMenu(t)),this.addHook("afterRenderer",(t,i,r,s,o,a)=>Lo(wa,this,INe).call(this,t,a)),this.addHook("afterScroll",()=>Lo(wa,this,LNe).call(this)),this.addHook("afterBeginEditing",()=>this.hide()),this.addHook("afterDocumentKeyDown",t=>Lo(wa,this,NNe).call(this,t)),pt(Oa,this).addLocalHook("hide",()=>this.hide()),pt(Oa,this).addLocalHook("show",(t,i)=>this.showAtCell(t,i)),this.registerShortcuts(),this.registerListeners(),super.enablePlugin())}updatePlugin(){pt(Oa,this).updateDelay(this.getDisplayDelaySetting()),super.updatePlugin()}disablePlugin(){this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){const e=this.hot.getShortcutManager(),t=e.getContext("grid"),i=e.addContext(EI);t.addShortcut({keys:[["Control","Alt","M"]],callback:()=>{const r=this.hot.getSelectedRangeLast();Mu(PS,this,!0),this.hot.scrollToFocusedCell(()=>{this.setRange(r),this.show(),this.focusEditor(),e.setActiveContextName(EI),this.hot._registerTimeout(()=>{Mu(PS,this,!1)})})},stopPropagation:!0,runOnlyIf:()=>{var r;return((r=this.hot.getSelectedRangeLast())===null||r===void 0?void 0:r.highlight.isCell())&&!pt(rn,this).isVisible()},group:cC}),i.addShortcut({keys:[["Escape"]],callback:()=>{pt(rn,this).setValue(pt(dR,this)),this.hide(),e.setActiveContextName("grid")},runOnlyIf:()=>pt(rn,this).isVisible()&&pt(rn,this).isFocused(),group:cC}),i.addShortcut({keys:[["Control/Meta","Enter"]],callback:()=>{this.hide(),e.setActiveContextName("grid")},runOnlyIf:()=>pt(rn,this).isVisible()&&pt(rn,this).isFocused(),group:cC})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(cC)}registerListeners(){const{rootDocument:e}=this.hot,t=this.getEditorInputElement();this.eventManager.addEventListener(e,"mouseover",i=>Lo(wa,this,ANe).call(this,i)),this.eventManager.addEventListener(e,"mousedown",i=>Lo(wa,this,MNe).call(this,i)),this.eventManager.addEventListener(e,"mouseup",()=>Lo(wa,this,PNe).call(this)),this.eventManager.addEventListener(t,"focus",()=>Lo(wa,this,kNe).call(this)),this.eventManager.addEventListener(t,"blur",()=>Lo(wa,this,ONe).call(this))}setRange(e){this.range=e}clearRange(){this.range={}}targetIsCellWithComment(e){const t=Gu(e.target,"TD","TBODY");return!!(t&&Ue(t,"htCommentCell")&&Gu(t,[this.hot.rootElement]))}targetIsCommentTextArea(e){return this.getEditorInputElement()===e.target}setComment(e){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');const t=pt(rn,this).getValue();let i="";e!=null?i=e:t!=null&&(i=t);const r=this.range.from.row,s=this.range.from.col;this.updateCommentMeta(r,s,{[zv]:i}),this.hot.render()}setCommentAtCell(e,t,i){this.setRange({from:this.hot._createCellCoords(e,t)}),this.setComment(i)}removeComment(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.setCellMeta(this.range.from.row,this.range.from.col,Zl),e&&this.hot.render(),this.hide()}removeCommentAtCell(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.setRange({from:this.hot._createCellCoords(e,t)}),this.removeComment(i)}getComment(){const e=this.range.from.row,t=this.range.from.col;return this.getCommentMeta(e,t,zv)}getCommentAtCell(e,t){return this.getCommentMeta(e,t,zv)}show(){var e;if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');const{from:{row:t,col:i}}=this.range;if(t<0||t>this.hot.countSourceRows()-1||i<0||i>this.hot.countSourceCols()-1)return!1;const r=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return pt(Oa,this).cancelHiding(),pt(rn,this).setValue((e=r[Zl]?r[Zl][zv]:null)!==null&&e!==void 0?e:""),pt(rn,this).show(),this.refreshEditor(!0),!0}showAtCell(e,t){return this.setRange({from:this.hot._createCellCoords(e,t)}),this.show()}hide(){pt(rn,this).hide()}refreshEditor(){var e,t;if(!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&(!this.range.from||!pt(rn,this).isVisible()))return;const{rowIndexMapper:r,columnIndexMapper:s}=this.hot,{row:o,col:a}=this.range.from;let l=r.getRenderableFromVisualIndex(o),c=s.getRenderableFromVisualIndex(a);const u=l===null;pt(rn,this).setPosition(0,0),l===null&&(l=r.getRenderableFromVisualIndex(r.getNearestNotHiddenIndex(o,-1))),c===null&&(c=s.getRenderableFromVisualIndex(s.getNearestNotHiddenIndex(a,-1)));const h=l===null,d=c===null;l=(e=l)!==null&&e!==void 0?e:0,c=(t=c)!==null&&t!==void 0?t:0;const{rootWindow:f,view:{_wt:g}}=this.hot,{wtTable:p}=g,m=g.getCell({row:l,col:c},!0),b=this.getCommentMeta(o,a,yK);b?pt(rn,this).setSize(b.width,b.height):pt(rn,this).resetSize();const y=d?0:p.getStretchedColumnWidth(c),w=u&&!h?ni(m):0,{left:R,top:E,width:_,height:T}=m.getBoundingClientRect(),{width:I,height:x}=pt(rn,this).getSize(),{innerWidth:P,innerHeight:D}=this.hot.rootWindow,B=this.hot.rootDocument.documentElement;let V=R+f.scrollX+y,z=E+f.scrollY+w;this.hot.isRtl()&&(V-=I+y),this.hot.isLtr()&&R+_+I>P?V=R+f.scrollX-I-1:this.hot.isRtl()&&V<-(B.scrollWidth-B.clientWidth)&&(V=R+f.scrollX+y+1),E+x>D&&(z-=x-T+1),pt(rn,this).setPosition(V,z),pt(rn,this).setReadOnlyState(this.getCommentMeta(o,a,AS)),pt(rn,this).observeSize()}focusEditor(){pt(rn,this).focus()}updateCommentMeta(e,t,i){const r=this.hot.getCellMeta(e,t)[Zl];let s;r?(s=gr(r),hy(s,i)):s=i,this.hot.setCellMeta(e,t,Zl,s)}getCommentMeta(e,t,i){const r=this.hot.getCellMeta(e,t);if(r[Zl])return r[Zl][i]}addToContextMenu(e){e.items.push({name:ht},wNe(this),yNe(this),CNe(this))}getDisplayDelaySetting(){const e=this.hot.getSettings()[Pb];if(lt(e))return e.displayDelay}getEditorInputElement(){return pt(rn,this).getInputElement()}destroy(){var e,t;(e=pt(rn,this))===null||e===void 0||e.destroy(),(t=pt(Oa,this))===null||t===void 0||t.destroy(),super.destroy()}}function MNe(n){if(!(!this.hot.view||!this.hot.view._wt)&&!pt(pE,this)&&!this.targetIsCommentTextArea(n)){const e=Gu(n.target,"TD","TBODY");let t=null;e&&(t=this.hot.getCoords(e)),(!e||this.range.from&&t&&(this.range.from.row!==t.row||this.range.from.col!==t.col))&&this.hide()}}function ANe(n){const{rootDocument:e}=this.hot;if(!(pt(pE,this)||pt(rn,this).isFocused()||Ue(n.target,"wtBorder")||pt(xI,this)===n.target||!pt(rn,this)))if(Mu(xI,this,e.elementFromPoint(n.clientX,n.clientY)),this.targetIsCellWithComment(n)){const t=this.hot._createCellRange(this.hot.getCoords(n.target));pt(Oa,this).show(t)}else Nu(n.target,e)&&!this.targetIsCommentTextArea(n)&&pt(Oa,this).hide()}function PNe(){Mu(pE,this,!1)}function INe(n,e){e[Zl]&&e[Zl][zv]&&ue(n,e.commentedCellClassName)}function ONe(){Mu(dR,this,""),this.hot.getShortcutManager().setActiveContextName("grid"),this.setComment()}function kNe(){Mu(dR,this,this.getComment()),this.hot.listen(),this.hot.getShortcutManager().setActiveContextName(EI)}function DNe(n,e){this.updateCommentMeta(this.range.from.row,this.range.from.col,{[yK]:{width:n,height:e}})}function NNe(n){pt(rn,this).isVisible()&&mo(n)}function LNe(){pt(PS,this)||this.hide()}var w3=S1,HNe=TypeError,$Ne=function(n,e){if(!delete n[e])throw new HNe("Cannot delete property "+w3(e)+" of "+w3(n))},FNe=Yi,BNe=Zw,VNe=ey,WNe=T7,jNe=$Ne,zNe=M7,UNe=[].unshift(0)!==1,GNe=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(n){return n instanceof TypeError}},YNe=UNe||!GNe();FNe({target:"Array",proto:!0,arity:1,forced:YNe},{unshift:function(e){var t=BNe(this),i=VNe(t),r=arguments.length;if(r){zNe(i+r);for(var s=i;s--;){var o=s+r;s in t?t[o]=t[s]:jNe(t,o)}for(var a=0;a<r;a++)t[a]=arguments[a]}return WNe(t,i+r)}});function ZT(n,e,t){return(e=KNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KNe(n){var e=qNe(n,"string");return typeof e=="symbol"?e:e+""}function qNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class CK{constructor(e){ZT(this,"hot",void 0),ZT(this,"commands",{}),ZT(this,"commonCallback",null),this.hot=e}registerCommand(e,t){this.commands[e]=t}setCommonCallback(e){this.commonCallback=e}execute(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];const s=e.split(":"),o=s[0],a=s.length===2?s[1]:null;let l=this.commands[o];if(!l)throw new Error(`Menu command '${o}' not exists.`);if(a&&l.submenu&&(l=XNe(a,l.submenu.items)),l.disabled===!0||typeof l.disabled=="function"&&l.disabled.call(this.hot)===!0||kn(l,"submenu"))return;const c=[];typeof l.callback=="function"&&c.push(l.callback),typeof this.commonCallback=="function"&&c.push(this.commonCallback),i.unshift(s.join(":")),j(c,u=>u.apply(this.hot,i))}}function XNe(n,e){let t;return j(e,i=>{const r=i.key?i.key.split(":"):null;if(Array.isArray(r)&&r[1]===n)return t=i,!1}),t}function QT(n,e,t){return(e=ZNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZNe(n){var e=QNe(n,"string");return typeof e=="symbol"?e:e+""}function QNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class SK{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;QT(this,"hot",void 0),QT(this,"predefinedItems",bK()),QT(this,"defaultOrderPattern",void 0),this.hot=e,this.defaultOrderPattern=t}setPredefinedItems(e){const t={};this.defaultOrderPattern.length=0,ct(e,(i,r)=>{let s="";i.name===ht?(t[ht]=i,s=ht):isNaN(parseInt(r,10))?(i.key=i.key===void 0?r:i.key,t[r]=i,s=i.key):(t[i.key]=i,s=i.key),this.defaultOrderPattern.push(s)}),this.predefinedItems=t}getItems(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return JNe(e,this.defaultOrderPattern,this.predefinedItems)}}function JNe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=[];let r=n;return r&&r.items?r=r.items:Array.isArray(r)||(r=e),lt(r)?ct(r,(s,o)=>{let a=t[typeof s=="string"?s:o];a||(a=s),lt(s)?li(a,s):typeof a=="string"&&(a={name:a}),a.key===void 0&&(a.key=o),i.push(a)}):j(r,(s,o)=>{let a=t[s];!a&&vNe.indexOf(s)>=0||(a||(a={name:s,key:`${o}`}),lt(s)&&li(a,s),a.key===void 0&&(a.key=o),i.push(a))}),i}function Kc(n,e,t){return(e=eLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eLe(n){var e=tLe(n,"string");return typeof e=="symbol"?e:e+""}function tLe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class nLe{constructor(e,t){Kc(this,"top",void 0),Kc(this,"topRelative",void 0),Kc(this,"left",void 0),Kc(this,"leftRelative",void 0),Kc(this,"scrollTop",void 0),Kc(this,"scrollLeft",void 0),Kc(this,"cellHeight",void 0),Kc(this,"cellWidth",void 0);const i=t.scrollY,r=t.scrollX;let s,o,a,l,c,u;this.rootWindow=t,this.type=this.getSourceType(e),this.type==="literal"?(s=parseInt(e.top,10),a=parseInt(e.left,10),c=e.height||0,u=e.width||0,o=s,l=a,s+=i,a+=r):this.type==="event"&&(s=parseInt(e.pageY,10),a=parseInt(e.pageX,10),c=e.target.clientHeight,u=e.target.clientWidth,o=s-i,l=a-r),this.top=s,this.topRelative=o,this.left=a,this.leftRelative=l,this.scrollTop=i,this.scrollLeft=r,this.cellHeight=c,this.cellWidth=u}getSourceType(e){let t="literal";return e instanceof Event&&(t="event"),t}fitsAbove(e){return this.topRelative>=e.offsetHeight}fitsBelow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.rootWindow.innerHeight;return this.topRelative+e.offsetHeight<=t}fitsOnRight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.rootWindow.innerWidth;return this.leftRelative+this.cellWidth+e.offsetWidth<=t}fitsOnLeft(e){return this.leftRelative>=e.offsetWidth}}function Jm(n,e,t){iLe(n,e),e.set(n,t)}function iLe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function yt(n,e){return n.get(_K(n,e))}function uC(n,e,t){return n.set(_K(n,e),t),t}function _K(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var br=new WeakMap,qc=new WeakMap,Vr=new WeakMap,JT=new WeakMap,sg=new WeakMap;class rLe{constructor(e){Jm(this,br,void 0),Jm(this,qc,void 0),Jm(this,Vr,void 0),Jm(this,JT,!1),Jm(this,sg,{above:0,below:0,left:0,right:0}),uC(JT,this,e)}setOffset(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return yt(sg,this)[e]=t,this}setElement(e){return uC(br,this,e),this}setParentElement(e){return uC(qc,this,e),this}updatePosition(e){uC(Vr,this,new nLe(e,yt(br,this).ownerDocument.defaultView)),yt(JT,this)?(yt(Vr,this).fitsBelow(yt(br,this))?this.setPositionBelowCursor():yt(Vr,this).fitsAbove(yt(br,this))?this.setPositionAboveCursor():this.setPositionBelowCursor(),this.updateHorizontalPosition()):(this.setPositionBelowCursor(),this.setPositionOnRightOfCursor())}updateHorizontalPosition(){yt(br,this).dir==="rtl"?yt(Vr,this).fitsOnLeft(yt(br,this))?this.setPositionOnLeftOfCursor():this.setPositionOnRightOfCursor():yt(Vr,this).fitsOnRight(yt(br,this))?this.setPositionOnRightOfCursor():this.setPositionOnLeftOfCursor()}setPositionAboveCursor(){let e=yt(sg,this).above+yt(Vr,this).top-yt(br,this).offsetHeight;yt(qc,this)&&(e=yt(Vr,this).top+yt(Vr,this).cellHeight-yt(br,this).offsetHeight+3),yt(br,this).style.top=`${e}px`}setPositionBelowCursor(){let e=yt(sg,this).below+yt(Vr,this).top+1;yt(qc,this)&&(e=yt(Vr,this).top-1),yt(br,this).style.top=`${e}px`}setPositionOnRightOfCursor(){let e=yt(Vr,this).left;if(yt(qc,this)){const t=Number.parseInt(getComputedStyle(yt(qc,this).querySelector(".htCore")).borderRightWidth,10);e+=yt(Vr,this).cellWidth+t}else e+=yt(sg,this).right;yt(br,this).style.left=`${e}px`}setPositionOnLeftOfCursor(){let e=yt(sg,this).left+yt(Vr,this).left-yt(br,this).offsetWidth;if(yt(qc,this)){const t=Number.parseInt(getComputedStyle(yt(qc,this).querySelector(".htCore")).borderLeftWidth,10);e-=t}yt(br,this).style.left=`${e}px`}}function RK(n){let{initialPage:e=-1,size:t=()=>0,onItemSelect:i=()=>{},onClear:r=()=>{}}=n;const s=new Set;let o=Gt(e,-1,g()-1);function a(m,b){const y=g()-1;return m<0&&(m=y),m>y&&(m=0),s.has(m)?-1:(s.add(m),i(m,!1)===!1&&(m=a(b===1?++m:--m,b)),m)}function l(m){m>-1&&m<g()&&i(m,!0)!==!1&&(o=m)}function c(){return o}function u(){g()>0&&(s.clear(),o=a(0,1))}function h(){g()>0&&(s.clear(),o=a(g()-1,-1))}function d(){g()>0&&(s.clear(),o=a(++o,1))}function f(){g()>0&&(s.clear(),o=a(--o,-1))}function g(){return Math.max(t(),0)}function p(){s.clear(),o=e,r()}return{setCurrentPage:l,getCurrentPage:c,toFirstItem:u,toLastItem:h,toNextItem:d,toPreviousItem:f,getSize:g,clear:p}}function sLe(n){return vt(n,e=>({start:e.getTopStartCorner(),end:e.getBottomEndCorner()}))}function TI(n){return kn(n,"submenu")}function MI(n){return new RegExp(ht,"i").test(n.name)}function IS(n,e){return n.disabled===!0||typeof n.disabled=="function"&&n.disabled.call(e)===!0}function y3(n){return kn(n,"disableSelection")}function oLe(n){return Ue(n,"htSeparator")}function aLe(n){return Ue(n,"htSubmenu")}function lLe(n){return Ue(n,"htDisabled")}function cLe(n){return Ue(n,"htSelectionDisabled")}function uLe(n,e){return!n.hidden||!(typeof n.hidden=="function"&&n.hidden.call(e))}function EK(n,e){const t=n.slice(0);for(let i=0;i<t.length&&t[i].name===e;)t.shift();return t}function hLe(n,e){let t=n.slice(0);return t.reverse(),t=EK(t,e),t.reverse(),t}function dLe(n){const e=[];return j(n,(t,i)=>{i>0?e[e.length-1].name!==t.name&&e.push(t):e.push(t)}),e}function fLe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ht,t=n.slice(0);return t=EK(t,e),t=hLe(t,e),t=dLe(t),t}function gLe(n){return n.checkable===!0}function pLe(n){return RK({size:()=>n.countRows(),onItemSelect(e,t){const i=n.getCell(e,0);if(!i||oLe(i)||lLe(i)||cLe(i))return!1;n.selectCell(e,0,...t?[e,0,!1,!1]:[])},onClear(){n.deselectCell()}})}function mLe(n){const{hot:e,hotMenu:t}=n;return[{keys:[["Control/Meta","A"]],forwardToContext:e.getShortcutManager().getContext("grid"),callback:()=>n.close(!0)},{keys:[["Tab"],["Shift","Tab"]],callback:(i,r)=>{const s=e.getSettings(),o=typeof s.tabMoves=="function"?s.tabMoves(i):s.tabMoves;r.includes("shift")?e.selection.transformStart(-o.row,-o.col):e.selection.transformStart(o.row,o.col),n.close(!0)}},{keys:[["Escape"]],callback:()=>n.close()},{keys:[["ArrowDown"]],callback:()=>n.getNavigator().toNextItem()},{keys:[["ArrowUp"]],callback:()=>n.getNavigator().toPreviousItem()},{keys:[["ArrowRight"]],callback:()=>{const i=t.getSelectedLast();if(i){const r=n.openSubMenu(i[0]);r&&r.getNavigator().toFirstItem()}}},{keys:[["ArrowLeft"]],callback:()=>{t.getSelectedLast()&&n.isSubMenu()&&(n.close(),n.isSubMenu()&&n.parentMenu.hotMenu.listen())}},{keys:[["Control/Meta","ArrowUp"],["Home"]],callback:()=>n.getNavigator().toFirstItem()},{keys:[["Control/Meta","ArrowDown"],["End"]],callback:()=>n.getNavigator().toLastItem()},{keys:[["Enter"],["Space"]],callback:i=>{const r=t.getSelectedLast();r&&(t.getSourceDataAtRow(r[0]).submenu?n.openSubMenu(r[0]).getNavigator().toFirstItem():(n.executeCommand(i),n.close(!0)))}},{keys:[["PageUp"]],callback:()=>{t.getSelectedLast()?t.selection.transformStart(-t.countVisibleRows(),0):n.getNavigator().toFirstItem()}},{keys:[["PageDown"]],callback:()=>{t.getSelectedLast()?t.selection.transformStart(t.countVisibleRows(),0):n.getNavigator().toLastItem()}}]}const xK="menu",C3=xK;function vLe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const t=[];i(mLe(n)),e.forEach(c=>{let{shortcuts:u,contextName:h}=c;r(u,h)});function i(c,u){a(u).addShortcuts(c,{group:xK})}function r(c,u){const h=a(u);c.forEach(d=>{let{keys:f}=d;f.forEach(g=>h.removeShortcutsByKeys(g))}),t.push({shortcuts:c,contextName:u}),i(c,u)}function s(){return[...t]}function o(c){return c?`${C3}:${c}`:C3}function a(c){var u;const h=n.hotMenu.getShortcutManager(),d=o(c);return(u=h.getContext(d))!==null&&u!==void 0?u:h.addContext(d)}function l(c){n.hotMenu.getShortcutManager().setActiveContextName(o(c))}return{addCustomShortcuts:r,getCustomShortcuts:s,getContext:a,listen:l}}function bLe(n){return(e,t,i,r,s,o)=>{const a=e.getSourceDataAtRow(i),l=n.rootDocument.createElement("div"),c=typeof o=="function"?o.call(n):o,u=typeof a.ariaLabel=="function"?a.ariaLabel.call(n):a.ariaLabel,h=typeof a.ariaChecked=="function"?a.ariaChecked.call(n):a.ariaChecked;if(ia(t),ue(l,"htItemWrapper"),n.getSettings().ariaTags){const d=!IS(a,n)&&!y3(a)&&!MI(a);ze(t,[...gLe(a)?[n_e(),z_(u),KG(h)]:[t_e(),z_(c)],...d?[Xp(-1)]:[],...IS(a,n)?[c_e()]:[],...TI(a)?[no(!1)]:[]])}t.className="",t.appendChild(l),MI(a)?ue(t,"htSeparator"):typeof a.renderer=="function"?(ue(t,"htCustomMenuRenderer"),t.appendChild(a.renderer(e,l,i,r,s,c))):Mf(l,c),IS(a,n)?ue(t,"htDisabled"):y3(a)?ue(t,"htSelectionDisabled"):TI(a)&&ue(t,"htSubmenu")}}function eM(n,e,t){wLe(n,e),e.set(n,t)}function wLe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ya(n,e,t){return(e=yLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yLe(n){var e=CLe(n,"string");return typeof e=="symbol"?e:e+""}function CLe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function tM(n,e,t){return n.set(TK(n,e),t),t}function Fh(n,e){return n.get(TK(n,e))}function TK(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const S3=215;var ev=new WeakMap,hC=new WeakMap,dC=new WeakMap;class nm{get tableBorderWidth(){return Fh(dC,this)===void 0&&this.hotMenu&&tM(dC,this,parseInt(cl(this.hotMenu.view._wt.wtTable.TABLE).borderWidth,10)),Fh(dC,this)}constructor(e,t){var i=this;ya(this,"hot",void 0),ya(this,"options",void 0),ya(this,"eventManager",new co(this)),ya(this,"container",void 0),ya(this,"positioner",void 0),ya(this,"hotMenu",null),ya(this,"hotSubMenus",{}),ya(this,"parentMenu",void 0),ya(this,"menuItems",null),ya(this,"origOutsideClickDeselects",null),eM(this,ev,void 0),eM(this,hC,void 0),eM(this,dC,void 0),this.hot=e,this.options=t||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1,minWidth:S3,container:this.hot.rootDocument.documentElement},this.container=this.createContainer(this.options.name),this.positioner=new rLe(this.options.keepInViewport),this.parentMenu=this.options.parent||null,this.registerEvents(),this.isSubMenu()&&this.addLocalHook("afterSelectionChange",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.parentMenu.runLocalHooks("afterSelectionChange",...s)})}registerEvents(){let e=this.hot.rootWindow;for(;e;)this.eventManager.addEventListener(e.document,"mousedown",t=>this.onDocumentMouseDown(t)),this.eventManager.addEventListener(e.document,"touchstart",t=>this.onDocumentMouseDown(t)),this.eventManager.addEventListener(e.document,"contextmenu",t=>this.onDocumentContextMenu(t)),e=tf(e)}setMenuItems(e){this.menuItems=e}getNavigator(){return Fh(ev,this)}getKeyboardShortcutsCtrl(){return Fh(hC,this)}getSelectedItem(){return this.hasSelectedItem()?this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]):null}hasSelectedItem(){return Array.isArray(this.hotMenu.getSelectedLast())}isSubMenu(){return this.parentMenu!==null}open(){this.runLocalHooks("beforeOpen"),this.container.removeAttribute("style"),this.container.style.display="block";const e=j1(a=>this.openSubMenu(a),300),t=this.options.minWidth||S3;let i=!1,r=Tc(this.menuItems,a=>(a.key===_w&&(i=!0),uLe(a,this.hot)));if(r.length<1&&!i)r.push(bK()[_w]);else if(r.length===0)return;r=fLe(r,ht);let s=!1;const o={data:r,colHeaders:!1,autoColumnSize:!0,autoWrapRow:!1,modifyColWidth(a){return ke(a)&&a<t?t:a},autoRowSize:!1,readOnly:!0,editor:!1,copyPaste:!1,hiddenRows:!0,maxCols:1,columns:[{data:"name",renderer:bLe(this.hot)}],renderAllRows:!0,fragmentSelection:!1,outsideClickDeselects:!1,disableVisualSelection:"area",layoutDirection:this.hot.isRtl()?"rtl":"ltr",ariaTags:!1,beforeOnCellMouseOver:(a,l)=>{Fh(ev,this).setCurrentPage(l.row)},afterOnCellMouseOver:(a,l)=>{this.isAllSubMenusClosed()?e(l.row):this.openSubMenu(l.row)},rowHeights:a=>r[a].name===ht?1:void 0,afterOnCellContextMenu:a=>{a.preventDefault(),nI()&&s&&this.hasSelectedItem()&&this.close(!0)},afterSelection:(a,l,c,u,h)=>{this.hotMenu.view.isMouseDown()&&(h.value=!0),this.runLocalHooks("afterSelectionChange",this.getSelectedItem())},beforeOnCellMouseUp:a=>{this.hasSelectedItem()&&(s=!this.isCommandPassive(this.getSelectedItem()),this.executeCommand(a))},afterOnCellMouseUp:a=>{(!nI()||!Ku(a))&&s&&this.hasSelectedItem()&&(fc()||OD()?this.hot._registerTimeout(()=>this.close(!0),325):this.close(!0))},afterUnlisten:()=>{!this.hasSelectedItem()&&this.isOpened()&&this.hotMenu.listen()}};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new this.hot.constructor(this.container,o),this.hotMenu.addHook("afterInit",()=>this.onAfterInit()),this.hotMenu.init(),tM(ev,this,pLe(this.hotMenu)),tM(hC,this,vLe(this)),Fh(hC,this).listen(),this.focus(),this.isSubMenu()&&this.addLocalHook("afterOpen",()=>this.parentMenu.runLocalHooks("afterSubmenuOpen",this)),this.runLocalHooks("afterOpen",this)}close(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isOpened()){if(e&&this.isSubMenu())this.parentMenu.close();else if(Fh(ev,this).clear(),this.closeAllSubMenus(),this.container.style.display="none",this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.isSubMenu()){if(this.hot.getSettings().ariaTags){const t=this.parentMenu.hotMenu.getSelectedLast();if(t){const i=this.parentMenu.hotMenu.getCell(t[0],0);ze(i,[no(!1)])}}this.parentMenu.hotMenu.listen()}}}openSubMenu(e){if(!this.hotMenu)return!1;const t=this.hotMenu.getCell(e,0);if(this.closeAllSubMenus(),!t||!aLe(t))return!1;const i=this.hotMenu.getSourceDataAtRow(e),r=new nm(this.hot,{parent:this,name:i.name,className:this.options.className,keepInViewport:!0,container:this.options.container});return r.setMenuItems(i.submenu.items),r.open(),r.setPosition(t.getBoundingClientRect()),this.hotSubMenus[i.key]=r,this.hot.getSettings().ariaTags&&ze(t,[no(!0)]),r}closeSubMenu(e){const t=this.hotMenu.getSourceDataAtRow(e),i=this.hotSubMenus[t.key];if(i){i.destroy(),delete this.hotSubMenus[t.key];const r=this.hotMenu.getCell(e,0);this.hot.getSettings().ariaTags&&ze(r,[no(!1)])}}closeAllSubMenus(){j(this.hotMenu.getData(),(e,t)=>this.closeSubMenu(t))}isAllSubMenusClosed(){return Object.keys(this.hotSubMenus).length===0}focus(){this.isOpened()&&(this.hotMenu.rootElement.focus({preventScroll:!0}),this.getKeyboardShortcutsCtrl().listen(),this.hotMenu.listen())}destroy(){const e=this.container.parentNode;this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy(),e&&e.removeChild(this.container)}isOpened(){return this.hotMenu!==null}executeCommand(e){if(!this.isOpened()||!this.hasSelectedItem())return;const t=this.getSelectedItem();if(this.runLocalHooks("select",t,e),this.isCommandPassive(t))return;const i=this.hot.getSelectedRange(),r=i?sLe(i):[];this.runLocalHooks("executeCommand",t.key,r,e),this.isSubMenu()&&this.parentMenu.runLocalHooks("executeCommand",t.key,r,e)}isCommandPassive(e){return e.isCommand===!1||MI(e)||IS(e,this.hot)||TI(e)}setOffset(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.positioner.setOffset(e,t)}setPosition(e){this.isSubMenu()&&this.positioner.setParentElement(this.parentMenu.container),this.positioner.setElement(this.container).updatePosition(e)}updateMenuDimensions(){const{wtTable:e}=this.hotMenu.view._wt,t=this.hotMenu.getSettings().data,i=e.hider.style,r=e.holder.style,s=parseInt(i.width,10),o=ci(t,(a,l,c)=>{const h=this.hotMenu.getCell(c,0)?ni(this.hotMenu.getCell(c,0)):0;return a+(l.name===ht?1:h)},0);r.width=`${s+3}px`,r.height=`${o+3}px`,i.height=r.height}createContainer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;const t=this.options.container.ownerDocument;let i=e,r;return i&&(cn(i)&&(i=i.call(this.hot),i===null||dn(i)?i="":i=i.toString()),i=i.replace(/[^A-z0-9]/g,"_"),i=`${this.options.className}Sub_${i}`,r=t.querySelector(`.${this.options.className}.${i}`)),r||(r=t.createElement("div"),ue(r,`htMenu ${this.options.className}`),i&&ue(r,i),this.options.container.appendChild(r)),r}onAfterInit(){this.updateMenuDimensions(),this.hot.getSettings().ariaTags&&ze(this.hotMenu.rootElement,[e_e(),Xp(-1)])}onDocumentMouseDown(e){this.isOpened()&&(this.options.standalone&&this.hotMenu&&!Nu(e.target,this.hotMenu.rootElement)?this.close(!0):(this.isAllSubMenusClosed()||this.isSubMenu())&&!Nu(e.target,".htMenu")&&this.close(!0))}onDocumentContextMenu(e){this.isOpened()&&Ue(e.target,"htCore")&&Nu(e.target,this.hotMenu.rootElement)&&e.preventDefault()}}Xt(nm,Ki);function SLe(n,e){_Le(n,e),e.add(n)}function _Le(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function nM(n,e,t){return(e=RLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RLe(n){var e=ELe(n,"string");return typeof e=="symbol"?e:e+""}function ELe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fC(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Uv="contextMenu",xLe=70,_3=Uv;Ie.getSingleton().register("afterContextMenuDefaultOptions");Ie.getSingleton().register("beforeContextMenuShow");Ie.getSingleton().register("afterContextMenuShow");Ie.getSingleton().register("afterContextMenuHide");Ie.getSingleton().register("afterContextMenuExecute");var tv=new WeakSet;class mE extends Lt{constructor(){super(...arguments),SLe(this,tv),nM(this,"commandExecutor",new CK(this.hot)),nM(this,"itemsFactory",null),nM(this,"menu",null)}static get PLUGIN_KEY(){return Uv}static get PLUGIN_PRIORITY(){return xLe}static get PLUGIN_DEPS(){return["plugin:AutoColumnSize"]}static get DEFAULT_ITEMS(){return[dE,fE,ht,wy,yy,ht,hE,Sy,ht,gE,uE,ht,Cy,ht,Us]}isEnabled(){return!!this.hot.getSettings()[Uv]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[Uv];typeof t.callback=="function"&&this.commandExecutor.setCommonCallback(t.callback),this.menu=new nm(this.hot,{className:"htContextMenu",keepInViewport:!0,container:t.uiContainer||this.hot.rootDocument.body}),this.menu.addLocalHook("beforeOpen",()=>fC(tv,this,MLe).call(this)),this.menu.addLocalHook("afterOpen",()=>fC(tv,this,ALe).call(this)),this.menu.addLocalHook("afterClose",()=>fC(tv,this,PLe).call(this)),this.menu.addLocalHook("executeCommand",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e.executeCommand.call(e,...r)}),this.addHook("afterOnCellContextMenu",i=>fC(tv,this,TLe).call(this,i)),this.registerShortcuts(),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.close(),this.menu&&(this.menu.destroy(),this.menu=null),this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control/Meta","Shift","Backslash"],["Shift","F10"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();this.hot.scrollToFocusedCell();const t=this.hot.getCell(e.row,e.col,!0).getBoundingClientRect(),i=lE(this.menu.container,this.hot.rootDocument);this.open({left:t.left+i.left,top:t.top+i.top-1+t.height},{left:t.width,above:-t.height}),this.menu.getNavigator().toFirstItem()},runOnlyIf:()=>{var e;const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t&&this.hot.selection.isCellVisible(t)&&!this.menu.isOpened()},group:_3})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(_3)}open(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{above:0,below:0,left:0,right:0};if((t=this.menu)!==null&&t!==void 0&&t.isOpened())return;this.prepareMenuItems(),this.menu.open(),this.menu.tableBorderWidth>0||(i.below+=1,i.right+=1,i.above-=1,i.left-=1),ct(i,(s,o)=>{this.menu.setOffset(o,s)}),this.menu.setPosition(e)}close(){var e;(e=this.menu)===null||e===void 0||e.close(),this.itemsFactory=null}executeCommand(e){this.itemsFactory===null&&this.prepareMenuItems();for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.commandExecutor.execute(e,...i)}prepareMenuItems(){this.itemsFactory=new SK(this.hot,mE.DEFAULT_ITEMS);const e=this.hot.getSettings()[Uv],t={items:this.itemsFactory.getItems(e)};this.hot.runHooks("afterContextMenuDefaultOptions",t),this.itemsFactory.setPredefinedItems(t.items);const i=this.itemsFactory.getItems(e);this.hot.runHooks("beforeContextMenuSetItems",i),this.menu.setMenuItems(i),j(i,r=>this.commandExecutor.registerCommand(r.key,r))}destroy(){this.close(),this.menu&&this.menu.destroy(),super.destroy()}}function TLe(n){const e=this.hot.getSettings(),t=e.rowHeaders,i=e.colHeaders;function r(a){return a.nodeName==="TD"||a.parentNode.nodeName==="TD"}const s=n.target;if(this.close(),Ue(s,"handsontableInput")||(n.preventDefault(),n.stopPropagation(),!(t||i)&&!r(s)&&!(Ue(s,"current")&&Ue(s,"wtBorder"))))return;const o=lE(this.menu.container,this.hot.rootDocument);this.open({top:n.clientY+o.top,left:n.clientX+o.left})}function MLe(){this.hot.runHooks("beforeContextMenuShow",this)}function ALe(){this.hot.runHooks("afterContextMenuShow",this)}function PLe(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)}mE.SEPARATOR={name:ht};function ILe(n){return{key:"copy",name(){return this.getTranslatedPhrase(RN)},callback(){n.copyCellsOnly()},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function OLe(n){return{key:"copy_column_headers_only",name(){const e=this.getSelectedRangeLast(),t=e?Gt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(TN,t)},callback(){n.copyColumnHeadersOnly()},disabled(){if(!this.hasColHeaders())return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function kLe(n){return{key:"copy_with_column_group_headers",name(){const e=this.getSelectedRangeLast(),t=e?Gt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(xN,t)},callback(){n.copyWithAllColumnHeaders()},disabled(){if(!this.hasColHeaders()||!this.getSettings().nestedHeaders)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function DLe(n){return{key:"copy_with_column_headers",name(){const e=this.getSelectedRangeLast(),t=e?Gt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(EN,t)},callback(){n.copyWithColumnHeaders()},disabled(){if(!this.hasColHeaders())return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function NLe(n){return{key:"cut",name(){return this.getTranslatedPhrase(MN)},callback(){n.cut()},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}class LLe{constructor(){this.data={}}setData(e,t){this.data[e]=t}getData(e){return this.data[e]||void 0}}class HLe{constructor(){this.clipboardData=new LLe}preventDefault(){}}function $Le(n,e){MK(n,e),e.add(n)}function og(n,e,t){MK(n,e),e.set(n,t)}function MK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Cr(n,e){return n.get(qg(n,e))}function ag(n,e,t){return n.set(qg(n,e),t),t}function qg(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Xc=new WeakMap,iM=new WeakMap,nv=new WeakMap,AI=new WeakMap,PI=new WeakMap,iv=new WeakMap,rv=new WeakSet;class FLe{constructor(e){let{countRows:t,countColumns:i,rowsLimit:r,columnsLimit:s,countColumnHeaders:o}=e;$Le(this,rv),og(this,Xc,void 0),og(this,iM,void 0),og(this,nv,void 0),og(this,AI,void 0),og(this,PI,void 0),og(this,iv,void 0),ag(iM,this,t),ag(nv,this,i),ag(AI,this,r),ag(PI,this,s),ag(iv,this,o)}setSelectedRange(e){ag(Xc,this,e)}getCellsRange(){if(Cr(iM,this).call(this)===0||Cr(nv,this).call(this)===0)return null;const{row:e,col:t}=Cr(Xc,this).getTopStartCorner(),{row:i,col:r}=Cr(Xc,this).getBottomEndCorner(),s=qg(rv,this,BLe).call(this,e,i),o=qg(rv,this,rM).call(this,t,r);return{isRangeTrimmed:i!==s||r!==o,startRow:e,startCol:t,endRow:s,endCol:o}}getMostBottomColumnHeadersRange(){if(Cr(nv,this).call(this)===0||Cr(iv,this).call(this)===0)return null;const{col:e}=Cr(Xc,this).getTopStartCorner(),{col:t}=Cr(Xc,this).getBottomEndCorner(),i=qg(rv,this,rM).call(this,e,t);return{isRangeTrimmed:t!==i,startRow:-1,startCol:e,endRow:-1,endCol:i}}getAllColumnHeadersRange(){if(Cr(nv,this).call(this)===0||Cr(iv,this).call(this)===0)return null;const{col:e}=Cr(Xc,this).getTopStartCorner(),{col:t}=Cr(Xc,this).getBottomEndCorner(),i=qg(rv,this,rM).call(this,e,t);return{isRangeTrimmed:t!==i,startRow:-Cr(iv,this).call(this),startCol:e,endRow:-1,endCol:i}}}function rM(n,e){return Math.min(e,Math.max(n+Cr(PI,this).call(this)-1,n))}function BLe(n,e){return Math.min(e,Math.max(n+Cr(AI,this).call(this)-1,n))}function AK(n){const e=[],t=[];return j(n,i=>{const r=Math.min(i.startRow,i.endRow),s=Math.max(i.startRow,i.endRow);He(r,s,l=>{e.indexOf(l)===-1&&e.push(l)});const o=Math.min(i.startCol,i.endCol),a=Math.max(i.startCol,i.endCol);He(o,a,l=>{t.indexOf(l)===-1&&t.push(l)})}),{rows:e,columns:t}}function VLe(n,e){PK(n,e),e.add(n)}function Zc(n,e,t){PK(n,e),e.set(n,t)}function PK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function sv(n,e,t){return(e=WLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WLe(n){var e=jLe(n,"string");return typeof e=="symbol"?e:e+""}function jLe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Kr(n,e){return n.get(qr(n,e))}function No(n,e,t){return n.set(qr(n,e),t),t}function qr(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ie.getSingleton().register("afterCopyLimit");Ie.getSingleton().register("modifyCopyableRange");Ie.getSingleton().register("beforeCut");Ie.getSingleton().register("afterCut");Ie.getSingleton().register("beforePaste");Ie.getSingleton().register("afterPaste");Ie.getSingleton().register("beforeCopy");Ie.getSingleton().register("afterCopy");const gC="copyPaste",zLe=80,ULe=["fragmentSelection"],R3=['<meta name="generator" content="Handsontable"/>','<style type="text/css">td{white-space:normal}br{mso-data-placement:same-cell}</style>'].join("");var II=new WeakMap,OI=new WeakMap,kI=new WeakMap,lg=new WeakMap,pC=new WeakMap,mC=new WeakMap,cg=new WeakMap,fR=new WeakMap,ls=new WeakSet;class GLe extends Lt{constructor(){super(...arguments),VLe(this,ls),sv(this,"columnsLimit",1/0),sv(this,"rowsLimit",1/0),sv(this,"pasteMode","overwrite"),sv(this,"uiContainer",this.hot.rootDocument.body),Zc(this,II,!1),Zc(this,OI,!1),Zc(this,kI,!1),Zc(this,lg,"cells-only"),Zc(this,pC,!1),Zc(this,mC,!1),Zc(this,cg,new FLe({countRows:()=>this.hot.countRows(),countColumns:()=>this.hot.countCols(),rowsLimit:()=>this.rowsLimit,columnsLimit:()=>this.columnsLimit,countColumnHeaders:()=>this.hot.view.getColumnHeadersCount()})),Zc(this,fR,!1),sv(this,"copyableRanges",[])}static get PLUGIN_KEY(){return gC}static get SETTING_KEYS(){return[gC,...ULe]}static get PLUGIN_PRIORITY(){return zLe}isEnabled(){return!!this.hot.getSettings()[gC]}enablePlugin(){var e=this;if(this.enabled)return;const{[gC]:t}=this.hot.getSettings();if(typeof t=="object"){var i,r;this.pasteMode=(i=t.pasteMode)!==null&&i!==void 0?i:this.pasteMode,this.rowsLimit=isNaN(t.rowsLimit)?this.rowsLimit:t.rowsLimit,this.columnsLimit=isNaN(t.columnsLimit)?this.columnsLimit:t.columnsLimit,No(II,this,!!t.copyColumnHeaders),No(OI,this,!!t.copyColumnGroupHeaders),No(kI,this,!!t.copyColumnHeadersOnly),this.uiContainer=(r=t.uiContainer)!==null&&r!==void 0?r:this.uiContainer}this.addHook("afterContextMenuDefaultOptions",s=>qr(ls,this,qLe).call(this,s)),this.addHook("afterSelection",function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return qr(ls,e,XLe).call(e,...o)}),this.addHook("afterSelectionEnd",()=>qr(ls,this,ZLe).call(this)),this.eventManager.addEventListener(this.hot.rootDocument,"copy",function(){return e.onCopy(...arguments)}),this.eventManager.addEventListener(this.hot.rootDocument,"cut",function(){return e.onCut(...arguments)}),this.eventManager.addEventListener(this.hot.rootDocument,"paste",function(){return e.onPaste(...arguments)}),PD()&&(this.eventManager.addEventListener(this.hot.rootDocument.body,"mouseenter",function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return qr(ls,e,QLe).call(e,...o)}),this.eventManager.addEventListener(this.hot.rootDocument.body,"mouseleave",function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return qr(ls,e,JLe).call(e,...o)}),this.addHook("afterSelection",()=>qr(ls,this,eHe).call(this))),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){super.disablePlugin()}copy(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"cells-only";No(lg,this,e),No(pC,this,!0),qr(ls,this,E3).call(this,"copy")}copyCellsOnly(){this.copy("cells-only")}copyColumnHeadersOnly(){this.copy("column-headers-only")}copyWithAllColumnHeaders(){this.copy("with-column-group-headers")}copyWithColumnHeaders(){this.copy("with-column-headers")}cut(){No(mC,this,!0),qr(ls,this,E3).call(this,"cut")}getRangedCopyableData(e){return xb(this.getRangedData(e))}getRangedData(e){const t=[],{rows:i,columns:r}=AK(e);return j(i,s=>{const o=[];j(r,a=>{s<0?o.push(this.hot.getColHeader(a,s)):o.push(this.hot.getCopyableData(s,a))}),t.push(o)}),t}paste(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;if(!e&&!t)return;const i=new HLe;e&&i.clipboardData.setData("text/plain",e),t&&i.clipboardData.setData("text/html",t),this.onPaste(i)}setCopyableText(){const e=this.hot.getSelectedRangeLast();if(!e)return;if(e.isSingleHeader()){this.copyableRanges=[];return}Kr(cg,this).setSelectedRange(e);const t=new Map([["headers",null],["cells",null]]);Kr(lg,this)==="column-headers-only"?t.set("headers",Kr(cg,this).getMostBottomColumnHeadersRange()):(Kr(lg,this)==="with-column-headers"?t.set("headers",Kr(cg,this).getMostBottomColumnHeadersRange()):Kr(lg,this)==="with-column-group-headers"&&t.set("headers",Kr(cg,this).getAllColumnHeadersRange()),t.set("cells",Kr(cg,this).getCellsRange())),this.copyableRanges=Array.from(t.values()).filter(r=>r!==null).map(r=>{let{startRow:s,startCol:o,endRow:a,endCol:l}=r;return{startRow:s,startCol:o,endRow:a,endCol:l}}),this.copyableRanges=this.hot.runHooks("modifyCopyableRange",this.copyableRanges);const i=t.get("cells");if(i!==null&&i.isRangeTrimmed){const{startRow:r,startCol:s,endRow:o,endCol:a}=i;this.hot.runHooks("afterCopyLimit",o-r+1,a-s+1,this.rowsLimit,this.columnsLimit)}}isEditorOpened(){var e;return(e=this.hot.getActiveEditor())===null||e===void 0?void 0:e.isOpened()}populateValues(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.hot.getSelectedRangeLast();if(!e.length)return;const i=e.length,r=e[0].length,s=[],{row:o,col:a}=t.getTopStartCorner(),{row:l,col:c}=t.getBottomEndCorner();let u=o,h=a,d=o,f=a;for(;s.length<i||u<=l;){const{skipRowOnPaste:g,visualRow:p}=this.hot.getCellMeta(u,a);if(u=p+1,g===!0)continue;d=p,h=a;const m=[],b=s.length%i;for(;m.length<r||h<=c;){const{skipColumnOnPaste:y,visualCol:w}=this.hot.getCellMeta(o,h);if(h=w+1,y===!0)continue;f=w;const R=m.length%r;m.push(e[b][R])}s.push(m)}return No(fR,this,!0),this.hot.populateFromArray(o,a,s,void 0,void 0,"CopyPaste.paste",this.pasteMode),[o,a,d,f]}onCopy(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),r=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()&&!Kr(pC,this)||this.isEditorOpened()||e.target instanceof HTMLElement&&(r&&e.target!==i||!r&&e.target!==this.hot.rootDocument.body))return;e.preventDefault(),this.setCopyableText(),No(pC,this,!1);const s=this.getRangedData(this.copyableRanges),o=qr(ls,this,YLe).call(this,this.copyableRanges);if(!!this.hot.runHooks("beforeCopy",s,this.copyableRanges,o)){const l=xb(s);if(e&&e.clipboardData){const c=uI(s,this.hot.rootDocument);e.clipboardData.setData("text/plain",l),e.clipboardData.setData("text/html",[R3,c].join(""))}else typeof ClipboardEvent>"u"&&this.hot.rootWindow.clipboardData.setData("Text",l);this.hot.runHooks("afterCopy",s,this.copyableRanges,o)}No(lg,this,"cells-only")}onCut(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),r=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()&&!Kr(mC,this)||this.isEditorOpened()||e.target instanceof HTMLElement&&(r&&e.target!==i||!r&&e.target!==this.hot.rootDocument.body))return;e.preventDefault(),this.setCopyableText(),No(mC,this,!1);const s=this.getRangedData(this.copyableRanges);if(!!this.hot.runHooks("beforeCut",s,this.copyableRanges)){const a=xb(s);if(e&&e.clipboardData){const l=uI(s,this.hot.rootDocument);e.clipboardData.setData("text/plain",a),e.clipboardData.setData("text/html",[R3,l].join(""))}else typeof ClipboardEvent>"u"&&this.hot.rootWindow.clipboardData.setData("Text",a);this.hot.emptySelectedCells("CopyPaste.cut"),this.hot.runHooks("afterCut",s,this.copyableRanges)}}onPaste(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),r=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()||this.isEditorOpened()||!this.hot.getSelected()||e.target instanceof HTMLElement&&(r&&e.target!==i||!r&&e.target!==this.hot.rootDocument.body))return;e.preventDefault();let s;if(e&&typeof e.clipboardData<"u"){const u=H1(e.clipboardData.getData("text/html"),{ADD_TAGS:["meta"],ADD_ATTR:["content"],FORCE_BODY:!0});u&&/(<table)|(<TABLE)/g.test(u)?s=N9(u,this.hot.rootDocument).data:s=e.clipboardData.getData("text/plain")}else typeof ClipboardEvent>"u"&&typeof this.hot.rootWindow.clipboardData<"u"&&(s=this.hot.rootWindow.clipboardData.getData("Text"));if(typeof s=="string"&&(s=sAe(s)),s===void 0||s&&s.length===0||this.hot.runHooks("beforePaste",s,this.copyableRanges)===!1)return;const[o,a,l,c]=this.populateValues(s);this.hot.selectCell(o,a,Math.min(this.hot.countRows()-1,l),Math.min(this.hot.countCols()-1,c)),this.hot.runHooks("afterPaste",s,this.copyableRanges)}destroy(){super.destroy()}}function E3(n){if(PD()){const e=this.hot.getSelectedRangeLast();if(e){const{row:t,col:i}=e.highlight,r=this.hot.getCell(t,i,!0);r&&l9(r,()=>{this.hot.rootDocument.execCommand(n)})}}else this.hot.rootDocument.execCommand(n)}function YLe(n){const{rows:e}=AK(n);let t=0;for(let i=0;i<e.length&&!(e[i]>=0);i++)t+=1;return{columnHeadersCount:t}}function KLe(){if(this.hot.isListening()){const n=this.hot.getSelectedRangeLast();if(n){const{row:e,col:t}=n.highlight,i=this.hot.getCell(e,t,!0);i&&ED(i)}}}function IK(){if(this.hot.isListening()){const n=this.hot.getSelectedRangeLast();if(n){const{row:e,col:t}=n.highlight,i=this.hot.getCell(e,t,!0);i!=null&&i.hasAttribute("contenteditable")&&xD(i)}}}function qLe(n){n.items.push({name:"---------"},ILe(this)),Kr(II,this)&&n.items.push(DLe(this)),Kr(OI,this)&&n.items.push(kLe(this)),Kr(kI,this)&&n.items.push(OLe(this)),n.items.push(NLe(this))}function XLe(n,e,t,i,r){Kr(fR,this)&&(r.value=!0),No(fR,this,!1)}function ZLe(){this.isEditorOpened()||this.hot.getSettings().fragmentSelection||this.setCopyableText()}function QLe(){qr(ls,this,IK).call(this)}function JLe(){qr(ls,this,KLe).call(this)}function eHe(){qr(ls,this,IK).call(this)}function OK(n,e){return`border_row${n}col${e}`}function Gv(){return{width:1,color:"#000"}}function gc(){return{hide:!0}}function tHe(){return{width:1,color:"#000",cornerVisible:!1}}function sM(n){if(ke(n.start)||ke(n.left)){var e;n.start=(e=n.start)!==null&&e!==void 0?e:n.left}if(ke(n.end)||ke(n.right)){var t;n.end=(t=n.end)!==null&&t!==void 0?t:n.right}return delete n.left,delete n.right,n}function ov(n){return ke(n.start)&&(n.left=n.start),ke(n.end)&&(n.right=n.end),n}function oM(n,e){return{id:OK(n,e),border:tHe(),row:n,col:e,top:gc(),bottom:gc(),start:gc(),end:gc()}}function nHe(n,e){return kn(e,"border")&&e.border&&(n.border=e.border),kn(e,"top")&&ke(e.top)&&(e.top?(lt(e.top)||(e.top=Gv()),n.top=e.top):(e.top=gc(),n.top=e.top)),kn(e,"bottom")&&ke(e.bottom)&&(e.bottom?(lt(e.bottom)||(e.bottom=Gv()),n.bottom=e.bottom):(e.bottom=gc(),n.bottom=e.bottom)),kn(e,"start")&&ke(e.start)&&(e.start?(lt(e.start)||(e.start=Gv()),n.start=e.start):(e.start=gc(),n.start=e.start)),kn(e,"end")&&ke(e.end)&&(e.end?(lt(e.end)||(e.end=Gv()),n.end=e.end):(e.end=gc(),n.end=e.end)),n}function Mc(n,e){let t=!1;return j(n.getSelectedRange(),i=>{i.forAll((r,s)=>{if(r<0||s<0)return;const o=n.getCellMeta(r,s).borders;if(o)if(e){if(!kn(o[e],"hide")||o[e].hide===!1)return t=!0,!1}else return t=!0,!1})}),t}function vE(n){return`<span class="selected"></span>${n}`}function iHe(n){return n.some(e=>ke(e.left)||ke(e.right))}function rHe(n){return n.some(e=>ke(e.start)||ke(e.end))}const sHe=new Map([["left","start"],["right","end"]]);function oHe(n){var e;return(e=sHe.get(n))!==null&&e!==void 0?e:n}function aHe(n){return{key:"borders:bottom",name(){let e=this.getTranslatedPhrase(VN);return Mc(this,"bottom")&&(e=vE(e)),e},callback(e,t){const i=Mc(this,"bottom");n.prepareBorder(t,"bottom",i)}}}function lHe(n){const e=n.hot.isRtl()?"end":"start";return{key:"borders:left",name(){let t=this.getTranslatedPhrase(WN);return Mc(this,e)&&(t=vE(t)),t},callback(t,i){const r=Mc(this,e);n.prepareBorder(i,e,r)}}}function cHe(n){return{key:"borders:no_borders",name(){return this.getTranslatedPhrase(jN)},callback(e,t){n.prepareBorder(t,"noBorders")},disabled(){return!Mc(this)}}}function uHe(n){const e=n.hot.isRtl()?"start":"end";return{key:"borders:right",name(){let t=this.getTranslatedPhrase(BN);return Mc(this,e)&&(t=vE(t)),t},callback(t,i){const r=Mc(this,e);n.prepareBorder(i,e,r)}}}function hHe(n){return{key:"borders:top",name(){let e=this.getTranslatedPhrase(FN);return Mc(this,"top")&&(e=vE(e)),e},callback(e,t){const i=Mc(this,"top");n.prepareBorder(t,"top",i)}}}function dHe(n,e){fHe(n,e),e.add(n)}function fHe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gHe(n,e,t){return(e=pHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pHe(n){var e=mHe(n,"string");return typeof e=="symbol"?e:e+""}function mHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function x3(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const OS="customBorders",vHe=90;var aM=new WeakSet;class bHe extends Lt{constructor(){super(...arguments),dHe(this,aM),gHe(this,"savedBorders",[])}static get PLUGIN_KEY(){return OS}static get PLUGIN_PRIORITY(){return vHe}isEnabled(){return!!this.hot.getSettings()[OS]}enablePlugin(){this.enabled||(this.addHook("afterContextMenuDefaultOptions",e=>x3(aM,this,wHe).call(this,e)),this.addHook("init",()=>x3(aM,this,yHe).call(this)),super.enablePlugin())}disablePlugin(){this.hideBorders(),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.changeBorderSettings(),super.updatePlugin()}setBorders(e,t){let i=["top","bottom","start","end"],r=null;t&&(this.checkSettingsCohesion([t]),i=Object.keys(t),r=sM(t));const s=xp(e),o=Cw(s,{createCellCoords:this.hot._createCellCoords.bind(this.hot),createCellRange:this.hot._createCellRange.bind(this.hot)});j(e,a=>{o(a).forAll((l,c)=>{j(i,u=>{this.prepareBorderFromCustomAdded(l,c,r,oHe(u))})})}),this.hot.view.render()}getBorders(e){if(!Array.isArray(e))return this.savedBorders;const t=xp(e),i=Cw(t,{createCellCoords:this.hot._createCellCoords.bind(this.hot),createCellRange:this.hot._createCellRange.bind(this.hot)}),r=[];return j(e,s=>{i(s).forAll((o,a)=>{j(this.savedBorders,l=>{l.row===o&&l.col===a&&r.push(ov(l))})})}),r}clearBorders(e){e?this.setBorders(e):(j(this.savedBorders,t=>{this.clearBordersFromSelectionSettings(t.id),this.clearNullCellRange(),this.hot.removeCellMeta(t.row,t.col,"borders")}),this.savedBorders.length=0)}insertBorderIntoSettings(e,t){this.checkSavedBorders(e)||this.savedBorders.push(e);const r=this.hot._createCellRange(this.hot._createCellCoords(e.row,e.col));this.checkCustomSelections(e,r,t)||this.hot.selection.highlight.addCustomSelection({border:e,visualCellRange:r})}prepareBorderFromCustomAdded(e,t,i,r){const s=this.hot.countRows(),o=this.hot.countCols();if(e>=s||t>=o)return;let a=oM(e,t);i&&(a=nHe(a,i),j(this.hot.selection.highlight.customSelections,l=>{if(a.id===l.settings.id)return Object.assign(l.settings,i),a.id=l.settings.id,a.top=l.settings.top,a.bottom=l.settings.bottom,a.start=l.settings.start,a.end=l.settings.end,!1})),this.hot.setCellMeta(e,t,"borders",ov(a)),this.insertBorderIntoSettings(a,r)}prepareBorderFromCustomAddedRange(e,t){const i=Math.min(e.to.row,this.hot.countRows()-1),r=Math.min(e.to.col,this.hot.countCols()-1);He(e.from.row,i,s=>{He(e.from.col,r,o=>{const a=oM(s,o);let l=0;s===e.from.row&&kn(t,"top")&&(l+=1,a.top=t.top),s===e.to.row&&kn(t,"bottom")&&(l+=1,a.bottom=t.bottom),o===e.from.col&&kn(t,"start")&&(l+=1,a.start=t.start),o===e.to.col&&kn(t,"end")&&(l+=1,a.end=t.end),l>0&&(this.hot.setCellMeta(s,o,"borders",ov(a)),this.insertBorderIntoSettings(a))})})}removeAllBorders(e,t){const i=OK(e,t);this.spliceBorder(i),this.clearBordersFromSelectionSettings(i),this.clearNullCellRange(),this.hot.removeCellMeta(e,t,"borders")}setBorder(e,t,i,r){let s=this.hot.getCellMeta(e,t).borders;!s||s.border===void 0?s=oM(e,t):s=sM(s),r?(s[i]=gc(),this.countHide(s)===4?this.removeAllBorders(e,t):(this.checkCustomSelectionsFromContextMenu(s,i,r)||this.insertBorderIntoSettings(s),this.hot.setCellMeta(e,t,"borders",ov(s)))):(s[i]=Gv(),this.checkCustomSelectionsFromContextMenu(s,i,r)||this.insertBorderIntoSettings(s),this.hot.setCellMeta(e,t,"borders",ov(s)))}prepareBorder(e,t,i){j(e,r=>{let{start:s,end:o}=r;if(s.row===o.row&&s.col===o.col)t==="noBorders"?this.removeAllBorders(s.row,s.col):this.setBorder(s.row,s.col,t,i);else switch(t){case"noBorders":He(s.col,o.col,a=>{He(s.row,o.row,l=>{this.removeAllBorders(l,a)})});break;case"top":He(s.col,o.col,a=>{this.setBorder(s.row,a,t,i)});break;case"bottom":He(s.col,o.col,a=>{this.setBorder(o.row,a,t,i)});break;case"start":He(s.row,o.row,a=>{this.setBorder(a,s.col,t,i)});break;case"end":He(s.row,o.row,a=>{this.setBorder(a,o.col,t,i)});break}})}createCustomBorders(e){j(e,t=>{const i=sM(t);t.range?this.prepareBorderFromCustomAddedRange(t.range,i):this.prepareBorderFromCustomAdded(t.row,t.col,i)})}countHide(e){const{top:t,bottom:i,start:r,end:s}=e;return ci([t,i,r,s],(a,l)=>{let c=a;return l&&l.hide&&(c+=1),c},0)}clearBordersFromSelectionSettings(e){const t=vt(this.hot.selection.highlight.customSelections,i=>i.settings.id).indexOf(e);t>-1&&this.hot.selection.highlight.customSelections[t].clear()}clearNullCellRange(){j(this.hot.selection.highlight.customSelections,(e,t)=>{if(e.cellRange===null)return this.hot.selection.highlight.customSelections[t].destroy(),this.hot.selection.highlight.customSelections.splice(t,1),!1})}hideBorders(){j(this.savedBorders,e=>{this.clearBordersFromSelectionSettings(e.id),this.clearNullCellRange()})}spliceBorder(e){const t=vt(this.savedBorders,i=>i.id).indexOf(e);t>-1&&this.savedBorders.splice(t,1)}checkSavedBorders(e){let t=!1;return this.countHide(e)===4?(this.spliceBorder(e.id),t=!0):j(this.savedBorders,(r,s)=>{if(e.id===r.id)return this.savedBorders[s]=e,t=!0,!1}),t}checkCustomSelectionsFromContextMenu(e,t,i){let r=!1;return j(this.hot.selection.highlight.customSelections,s=>{if(e.id===s.settings.id){const o=this.hot.view._wt.selectionManager.getBorderInstances(s);return j(o,a=>{a.toggleHiddenClass(t,i)}),r=!0,!1}}),r}checkCustomSelections(e,t,i){const r=this.countHide(e);let s=!1;return r===4?(this.removeAllBorders(e.row,e.col),s=!0):j(this.hot.selection.highlight.customSelections,o=>{if(e.id===o.settings.id){if(o.visualCellRange=t,o.commit(),i){const a=this.hot.view._wt.selectionManager.getBorderInstances(o);j(a,l=>{l.changeBorderStyle(i,e)})}return s=!0,!1}}),s}changeBorderSettings(){const e=this.hot.getSettings()[OS];if(Array.isArray(e)){const t=gr(e);this.checkSettingsCohesion(t),t.length||(this.savedBorders=t),this.createCustomBorders(t)}else e!==void 0&&this.createCustomBorders(this.savedBorders)}checkSettingsCohesion(e){const t=iHe(e),i=rHe(e);if(t&&i)throw new Error('The "left"/"right" and "start"/"end" options should not be used together. Please use only the option "start"/"end".');if(this.hot.isRtl()&&t)throw new Error('The "left"/"right" properties are not supported for RTL. Please use option "start"/"end".')}destroy(){super.destroy()}}function wHe(n){this.hot.getSettings()[OS]&&n.items.push({name:"---------"},{key:"borders",name(){return this.getTranslatedPhrase($N)},disabled(){const e=this.getSelectedRangeLast();return!e||e.isSingleHeader()?!0:this.selection.isSelectedByCorner()},submenu:{items:[hHe(this),uHe(this),aHe(this),lHe(this),cHe(this)]}})}function yHe(){this.changeBorderSettings()}function CHe(n,e){SHe(n,e),e.add(n)}function SHe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function lM(n,e,t){return(e=_He(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _He(n){var e=RHe(n,"string");return typeof e=="symbol"?e:e+""}function RHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function T3(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const M3="dragToScroll",EHe=100;var cM=new WeakSet;class xHe extends Lt{constructor(){super(...arguments),CHe(this,cM),lM(this,"boundaries",null),lM(this,"callback",null),lM(this,"listening",!1)}static get PLUGIN_KEY(){return M3}static get PLUGIN_PRIORITY(){return EHe}isEnabled(){return!!this.hot.getSettings()[M3]}enablePlugin(){this.enabled||(this.addHook("afterOnCellMouseDown",e=>T3(cM,this,A3).call(this,e)),this.addHook("afterOnCellCornerMouseDown",e=>T3(cM,this,A3).call(this,e)),this.registerEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.unregisterEvents(),super.disablePlugin()}setBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{left:0,right:this.hot.rootWindow.innerWidth,top:0,bottom:this.hot.rootWindow.innerHeight};this.boundaries=e}setCallback(e){this.callback=e}check(e,t){let i=0,r=0;t<this.boundaries.top?r=t-this.boundaries.top:t>this.boundaries.bottom&&(r=t-this.boundaries.bottom),e<this.boundaries.left?i=e-this.boundaries.left:e>this.boundaries.right&&(i=e-this.boundaries.right),this.callback(i,r)}listen(){this.listening=!0}unlisten(){this.listening=!1}isListening(){return this.listening}registerEvents(){const{rootWindow:e}=this.hot;let t=e;for(;t;)this.eventManager.addEventListener(t.document,"contextmenu",()=>this.unlisten()),this.eventManager.addEventListener(t.document,"mouseup",()=>this.unlisten()),this.eventManager.addEventListener(t.document,"mousemove",i=>this.onMouseMove(i)),t=tf(t)}unregisterEvents(){this.eventManager.clear()}onMouseMove(e){this.isListening()&&this.check(e.clientX,e.clientY)}destroy(){super.destroy()}}function A3(n){if(Ku(n))return;const e=this.hot.view._wt.wtOverlays.topOverlay.mainTableScrollableElement;this.setBoundaries(e!==this.hot.rootWindow?e.getBoundingClientRect():void 0),this.setCallback((t,i)=>{var r,s;const o=(r=e.scrollLeft)!==null&&r!==void 0?r:e.scrollX,a=(s=e.scrollTop)!==null&&s!==void 0?s:e.scrollY;e.scroll(o+Math.sign(t)*50,a+Math.sign(i)*20)}),this.listen()}function THe(n,e){kK(n,e),e.add(n)}function MHe(n,e,t){kK(n,e),e.set(n,t)}function kK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function uM(n,e,t){return(e=AHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function AHe(n){var e=PHe(n,"string");return typeof e=="symbol"?e:e+""}function PHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function IHe(n,e){return n.get(Gs(n,e))}function DK(n,e,t){return n.set(Gs(n,e),t),t}function Gs(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ie.getSingleton().register("afterDropdownMenuDefaultOptions");Ie.getSingleton().register("beforeDropdownMenuShow");Ie.getSingleton().register("afterDropdownMenuShow");Ie.getSingleton().register("afterDropdownMenuHide");Ie.getSingleton().register("afterDropdownMenuExecute");const kS="dropdownMenu",OHe=230,Rw="changeType",hM=kS;var bE=new WeakMap,Ho=new WeakSet;class wE extends Lt{static get PLUGIN_KEY(){return kS}static get PLUGIN_PRIORITY(){return OHe}static get PLUGIN_DEPS(){return["plugin:AutoColumnSize"]}static get DEFAULT_ITEMS(){return[wy,yy,ht,Sy,ht,cE,ht,Cy,ht,Us]}constructor(e){super(e),THe(this,Ho),uM(this,"commandExecutor",new CK(this.hot)),uM(this,"itemsFactory",null),uM(this,"menu",null),MHe(this,bE,!1),this.hot.addHook("afterGetColHeader",(t,i)=>Gs(Ho,this,DHe).call(this,t,i))}isEnabled(){return this.hot.getSettings()[kS]}enablePlugin(){var e=this;if(this.enabled)return;this.itemsFactory=new SK(this.hot,wE.DEFAULT_ITEMS),this.addHook("beforeOnCellMouseDown",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return Gs(Ho,e,BHe).call(e,...s)}),this.addHook("beforeViewportScrollHorizontally",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return Gs(Ho,e,FHe).call(e,...s)});const t=this.hot.getSettings()[kS],i={items:this.itemsFactory.getItems(t)};this.registerEvents(),typeof t.callback=="function"&&this.commandExecutor.setCommonCallback(t.callback),this.registerShortcuts(),super.enablePlugin(),this.callOnPluginsReady(()=>{this.hot.runHooks("afterDropdownMenuDefaultOptions",i),this.itemsFactory.setPredefinedItems(i.items);const r=this.itemsFactory.getItems(t);this.menu&&this.menu.destroy(),this.menu=new nm(this.hot,{className:"htDropdownMenu",keepInViewport:!0,container:t.uiContainer||this.hot.rootDocument.body}),this.hot.runHooks("beforeDropdownMenuSetItems",r),this.menu.setMenuItems(r),this.menu.addLocalHook("beforeOpen",()=>Gs(Ho,this,NHe).call(this)),this.menu.addLocalHook("afterOpen",()=>Gs(Ho,this,LHe).call(this)),this.menu.addLocalHook("afterSubmenuOpen",s=>Gs(Ho,this,HHe).call(this,s)),this.menu.addLocalHook("afterClose",()=>Gs(Ho,this,$He).call(this)),this.menu.addLocalHook("executeCommand",function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return e.executeCommand.call(e,...o)}),j(r,s=>this.commandExecutor.registerCommand(s.key,s))})}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.close(),this.menu&&this.menu.destroy(),this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){const e=this.hot.getShortcutManager().getContext("grid"),t=()=>{const{highlight:i}=this.hot.getSelectedRangeLast();if((i.isHeader()&&i.row===-1||i.isCell())&&i.col>=0){this.hot.selectColumns(i.col,i.col,-1);const{from:r}=this.hot.getSelectedRangeLast(),s=lE(this.menu.container,this.hot.rootDocument),o=this.hot.getCell(-1,r.col,!0).querySelector(`.${Rw}`),a=o.getBoundingClientRect();this.open({left:a.left+s.left,top:a.top+o.offsetHeight+s.top},{left:a.width,right:0,above:0,below:3}),this.menu.getNavigator().toFirstItem()}};e.addShortcuts([{keys:[["Shift","Alt","ArrowDown"],["Control/Meta","Enter"]],callback:t,runOnlyIf:()=>{var i;const r=(i=this.hot.getSelectedRangeLast())===null||i===void 0?void 0:i.highlight;return r&&this.hot.selection.isCellVisible(r)&&r.isHeader()&&!this.menu.isOpened()},captureCtrl:!0,group:hM},{keys:[["Shift","Alt","ArrowDown"]],callback:t,runOnlyIf:()=>{var i;const r=(i=this.hot.getSelectedRangeLast())===null||i===void 0?void 0:i.highlight;return r&&this.hot.selection.isCellVisible(r)&&r.isCell()&&!this.menu.isOpened()},group:hM}])}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(hM)}registerEvents(){this.eventManager.addEventListener(this.hot.rootElement,"click",e=>Gs(Ho,this,kHe).call(this,e))}open(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{above:0,below:0,left:0,right:0};(t=this.menu)!==null&&t!==void 0&&t.isOpened()||(this.menu.open(),ct(i,(r,s)=>{this.menu.setOffset(s,r)}),this.menu.setPosition(e))}close(){var e;(e=this.menu)===null||e===void 0||e.close()}executeCommand(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.commandExecutor.execute(e,...i)}setListening(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.menu.isOpened()&&(e?this.menu.hotMenu.listen():this.menu.hotMenu.unlisten())}destroy(){this.close(),this.menu&&this.menu.destroy(),super.destroy()}}function NK(n){n.getKeyboardShortcutsCtrl().addCustomShortcuts([{keys:[["Control/Meta","A"]],callback:()=>!1}])}function kHe(n){if(Ue(n.target,Rw)){const e=lE(this.menu.container,this.hot.rootDocument),t=n.target.getBoundingClientRect();n.stopPropagation(),DK(bE,this,!1),this.open({left:t.left+e.left,top:t.top+n.target.offsetHeight+e.top},{left:t.width,right:0,above:0,below:3})}}function DHe(n,e){const t=e.parentNode;if(!t)return;const i=t.parentNode.childNodes,r=Array.prototype.indexOf.call(i,t);if(n<0||r!==i.length-1)return;const s=e.querySelector(`.${Rw}`);if(this.enabled&&s)return;if(!this.enabled){s&&s.parentNode.removeChild(s);return}const o=this.hot.rootDocument.createElement("button");o.className=Rw,o.type="button",o.tabIndex=-1,this.hot.getSettings().ariaTags&&(ze(o,[xf(),z_(" ")]),ze(e,[UG("menu")])),o.onclick=function(){return!1},e.firstChild.insertBefore(o,e.firstChild.firstChild)}function NHe(){this.hot.runHooks("beforeDropdownMenuShow",this)}function LHe(){this.hot.runHooks("afterDropdownMenuShow",this),Gs(Ho,this,NK).call(this,this.menu)}function HHe(n){Gs(Ho,this,NK).call(this,n)}function $He(){this.hot.listen(),this.hot.runHooks("afterDropdownMenuHide",this)}function FHe(n){return IHe(bE,this)?null:n}function BHe(n){Ue(n.target,Rw)&&DK(bE,this,!0)}wE.SEPARATOR={name:ht};function P3(n,e,t){return(e=VHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VHe(n){var e=WHe(n,"string");return typeof e=="symbol"?e:e+""}function WHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class jHe{constructor(e){P3(this,"hot",void 0),P3(this,"options",{}),this.hot=e}setOptions(e){this.options=e}getData(){const{startRow:e,startCol:t,endRow:i,endCol:r}=this._getDataRange(),s=this.options,o=[];return He(e,i,a=>{const l=[];!s.exportHiddenRows&&this._isHiddenRow(a)||(He(t,r,c=>{!s.exportHiddenColumns&&this._isHiddenColumn(c)||l.push(this.hot.getDataAtCell(a,c))}),o.push(l))}),o}getRowHeaders(){const e=[];if(this.options.rowHeaders){const{startRow:t,endRow:i}=this._getDataRange(),r=this.hot.getRowHeader();He(t,i,s=>{!this.options.exportHiddenRows&&this._isHiddenRow(s)||e.push(r[s])})}return e}getColumnHeaders(){const e=[];if(this.options.columnHeaders){const{startCol:t,endCol:i}=this._getDataRange(),r=this.hot.getColHeader();He(t,i,s=>{!this.options.exportHiddenColumns&&this._isHiddenColumn(s)||e.push(r[s])})}return e}_getDataRange(){const e=this.hot.countCols()-1,t=this.hot.countRows()-1;let[i=0,r=0,s=t,o=e]=this.options.range;return i=Math.max(i,0),r=Math.max(r,0),s=Math.min(s,t),o=Math.min(o,e),{startRow:i,startCol:r,endRow:s,endCol:o}}_isHiddenRow(e){return this.hot.rowIndexMapper.isHidden(this.hot.toPhysicalRow(e))}_isHiddenColumn(e){return this.hot.columnIndexMapper.isHidden(this.hot.toPhysicalColumn(e))}}function I3(n,e,t){return(e=zHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zHe(n){var e=UHe(n,"string");return typeof e=="symbol"?e:e+""}function UHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class JL{static get DEFAULT_OPTIONS(){return{mimeType:"text/plain",fileExtension:"txt",filename:"Handsontable [YYYY]-[MM]-[DD]",encoding:"utf-8",bom:!1,columnHeaders:!1,rowHeaders:!1,exportHiddenColumns:!1,exportHiddenRows:!1,range:[]}}constructor(e,t){I3(this,"dataProvider",void 0),I3(this,"options",void 0),this.dataProvider=e,this.options=this._mergeOptions(t),this.dataProvider.setOptions(this.options)}_mergeOptions(e){let t=ra(this.constructor.DEFAULT_OPTIONS);const i=new Date;return t=li(ra(JL.DEFAULT_OPTIONS),t),t=li(t,e),t.filename=mD(t.filename,{YYYY:i.getFullYear(),MM:`${i.getMonth()+1}`.padStart(2,"0"),DD:`${i.getDate()}`.padStart(2,"0")}),t}}const GHe="\r",YHe='"',KHe=`
`;class qHe extends JL{static get DEFAULT_OPTIONS(){return{mimeType:"text/csv",fileExtension:"csv",bom:!0,columnDelimiter:",",rowDelimiter:`\r
`}}export(){const e=this.options,t=this.dataProvider.getData();let i=this.dataProvider.getColumnHeaders();const r=i.length>0,s=this.dataProvider.getRowHeaders(),o=s.length>0;let a=e.bom?"\uFEFF":"";return r&&(i=vt(i,l=>this._escapeCell(l,!0)),o&&(a+=e.columnDelimiter),a+=i.join(e.columnDelimiter),a+=e.rowDelimiter),j(t,(l,c)=>{c>0&&(a+=e.rowDelimiter),o&&(a+=this._escapeCell(s[c])+e.columnDelimiter),a+=l.map(u=>this._escapeCell(u)).join(e.columnDelimiter)}),a}_escapeCell(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=jn(e);return i!==""&&(t||i.indexOf(GHe)>=0||i.indexOf(YHe)>=0||i.indexOf(KHe)>=0||i.indexOf(this.options.columnDelimiter)>=0)&&(i=i.replace(new RegExp('"',"g"),'""'),i=`"${i}"`),i}}const XHe="csv",DI={[XHe]:qHe};function ZHe(n,e,t){return typeof DI[n]=="function"?new DI[n](e,t):null}const QHe="exportFile",JHe=240;class e$e extends Lt{static get PLUGIN_KEY(){return QHe}static get PLUGIN_PRIORITY(){return JHe}isEnabled(){return!0}exportAsString(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._createTypeFormatter(e,t).export()}exportAsBlob(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._createBlob(this._createTypeFormatter(e,t))}downloadFile(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{rootDocument:i,rootWindow:r}=this.hot,s=this._createTypeFormatter(e,t),o=this._createBlob(s),a=r.URL||r.webkitURL,l=i.createElement("a"),c=`${s.options.filename}.${s.options.fileExtension}`;if(l.download!==void 0){const u=a.createObjectURL(o);l.style.display="none",l.setAttribute("href",u),l.setAttribute("download",c),i.body.appendChild(l),l.dispatchEvent(new MouseEvent("click")),i.body.removeChild(l),setTimeout(()=>{a.revokeObjectURL(u)},100)}else navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob(o,c)}_createTypeFormatter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!DI[e])throw new Error(`Export format type "${e}" is not supported.`);return ZHe(e,new jHe(this.hot),t)}_createBlob(e){let t=null;return typeof Blob<"u"&&(t=new Blob([e.export()],{type:`${e.options.mimeType};charset=${e.options.encoding}`})),t}}function ug(n,e,t){return(e=t$e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function t$e(n){var e=n$e(n,"string");return typeof e=="symbol"?e:e+""}function n$e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class _y{constructor(e,t){let{id:i,stateless:r=!0}=t;ug(this,"hot",void 0),ug(this,"id",void 0),ug(this,"elements",[]),ug(this,"hidden",!1),ug(this,"stateId",""),ug(this,"state",void 0),this.hot=e,this.id=i,this.stateId=`Filters.component.${this.id}`,this.state=r?null:this.hot.columnIndexMapper.registerMap(this.stateId,new eE)}getElements(){return this.elements}reset(){j(this.elements,e=>e.reset())}hide(){this.hidden=!0}show(){this.hidden=!1}isHidden(){return this.hot===null||this.hidden}restoreState(e){this.state&&this.setState(this.state.getValueAtIndex(e))}setState(){throw new Error("The state setting logic is not implemented")}saveState(e){this.state&&this.state.setValueAtIndex(e,this.getState())}getState(){throw new Error("The state gathering logic is not implemented")}destroy(){this.hot.columnIndexMapper.unregisterMap(this.stateId),this.clearLocalHooks(),j(this.elements,e=>e.destroy()),this.state=null,this.elements=null,this.hot=null}}Xt(_y,Ki);const Ew={};function qu(n,e){if(!Ew[n])throw Error(`Filter condition "${n}" does not exist.`);const{condition:t,descriptor:i}=Ew[n];let r=e;return i.inputValuesDecorator&&(r=i.inputValuesDecorator(r)),function(s){return t.apply(s.meta.instance,[].concat([s],[r]))}}function Ed(n){if(!Ew[n])throw Error(`Filter condition "${n}" does not exist.`);return Ew[n].descriptor}function ui(n,e,t){t.key=n,Ew[n]={condition:e,descriptor:t}}const Di="none";function i$e(){return!0}ui(Di,i$e,{name:tE,inputsCount:0,showOperators:!1});const Ib="empty";function r$e(n){return zn(n.value)}ui(Ib,r$e,{name:XN,inputsCount:0,showOperators:!0});const DS="not_empty";function s$e(n,e){return!qu(Ib,e)(n)}ui(DS,s$e,{name:ZN,inputsCount:0,showOperators:!0});const Ob="eq";function o$e(n,e){let[t]=e;return jn(n.value).toLocaleLowerCase(n.meta.locale)===jn(t)}ui(Ob,o$e,{name:QN,inputsCount:1,showOperators:!0});const NS="neq";function a$e(n,e){return!qu(Ob,e)(n)}ui(NS,a$e,{name:JN,inputsCount:1,showOperators:!0});const LK="gt";function l$e(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value>i}ui(LK,l$e,{name:rL,inputsCount:1,showOperators:!0});const HK="gte";function c$e(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value>=i}ui(HK,c$e,{name:sL,inputsCount:1,showOperators:!0});const $K="lt";function u$e(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value<i}ui($K,u$e,{name:oL,inputsCount:1,showOperators:!0});const FK="lte";function h$e(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value<=i}ui(FK,h$e,{name:aL,inputsCount:1,showOperators:!0});const eH="date_after";function d$e(n,e){let[t]=e;const i=he(n.value,n.meta.dateFormat),r=he(t,n.meta.dateFormat);return!i.isValid()||!r.isValid()?!1:i.diff(r)>=0}ui(eH,d$e,{name:uL,inputsCount:1,showOperators:!0});const tH="date_before";function f$e(n,e){let[t]=e;const i=he(n.value,n.meta.dateFormat),r=he(t,n.meta.dateFormat);return!i.isValid()||!r.isValid()?!1:i.diff(r)<=0}ui(tH,f$e,{name:hL,inputsCount:1,showOperators:!0});const gR="between";function g$e(n,e){let[t,i]=e,r=t,s=i;if(n.meta.type==="numeric"){const o=parseFloat(r,10),a=parseFloat(s,10);r=Math.min(o,a),s=Math.max(o,a)}else if(n.meta.type==="date"){const o=qu(tH,[s]),a=qu(eH,[r]);return o(n)&&a(n)}return n.value>=r&&n.value<=s}ui(gR,g$e,{name:lL,inputsCount:2,showOperators:!0});const BK="not_between";function p$e(n,e){return!qu(gR,e)(n)}ui(BK,p$e,{name:cL,inputsCount:2,showOperators:!0});const VK="begins_with";function m$e(n,e){let[t]=e;return jn(n.value).toLocaleLowerCase(n.meta.locale).startsWith(jn(t))}ui(VK,m$e,{name:eL,inputsCount:1,showOperators:!0});const WK="ends_with";function v$e(n,e){let[t]=e;return jn(n.value).toLocaleLowerCase(n.meta.locale).endsWith(jn(t))}ui(WK,v$e,{name:tL,inputsCount:1,showOperators:!0});const nH="contains";function b$e(n,e){let[t]=e;return jn(n.value).toLocaleLowerCase(n.meta.locale).indexOf(jn(t))>=0}ui(nH,b$e,{name:nL,inputsCount:1,showOperators:!0});const jK="not_contains";function w$e(n,e){return!qu(nH,e)(n)}ui(jK,w$e,{name:iL,inputsCount:1,showOperators:!0});const zK="date_tomorrow";function y$e(n){const e=he(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(he().subtract(-1,"days").startOf("day"),"d"):!1}ui(zK,y$e,{name:fL,inputsCount:0});const UK="date_today";function C$e(n){const e=he(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(he().startOf("day"),"d"):!1}ui(UK,C$e,{name:dL,inputsCount:0});const GK="date_yesterday";function S$e(n){const e=he(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(he().subtract(1,"days").startOf("day"),"d"):!1}ui(GK,S$e,{name:gL,inputsCount:0});v9();function _$e(n,e){let t=n;return t===""&&(t=`(${e})`),t}const NI=new Set([1]).has(1),R$e=NI&&typeof Array.from=="function";function Ry(n){let e=n;return NI&&(e=new Set(e)),function(t){let i;return NI?i=e.has(t):i=!!~e.indexOf(t),i}}function YK(n){return n??""}function LI(n){let e=n;return R$e?e=Array.from(new Set(e)):e=fD(e),e=e.sort((t,i)=>typeof t=="number"&&typeof i=="number"?t-i:t===i?0:t>i?1:-1),e}function O3(n,e,t,i){const r=[],s=n===e;let o;return s||(o=Ry(e)),j(n,a=>{let l=!1;(s||o(a))&&(l=!0);const c={checked:l,value:a,visualValue:_$e(a,t)};i&&i(c),r.push(c)}),r}const xd="by_value";function E$e(n,e){let[t]=e;return t(n.value)}ui(xd,E$e,{name:"By value",inputsCount:0,inputValuesDecorator(n){let[e]=n;return[Ry(e)]},showOperators:!1});const xw={};function x$e(n){if(!xw[n])throw Error(`Operation with id "${n}" does not exist.`);const e=xw[n].func;return function(t,i){return e(t,i)}}function T$e(n){return xw[n].name}function iH(n,e,t){xw[n]={name:e,func:t}}const $u="conjunction",M$e=vL;function A$e(n,e){return n.every(t=>t.func(e))}iH($u,M$e,A$e);const pR="disjunction",P$e=nE;function I$e(n,e){return n.some(t=>t.func(e))}iH(pR,P$e,I$e);const rH="disjunctionWithExtraCondition",O$e=nE;function k$e(n,e){if(n.length<3)throw Error("Operation doesn't work on less then three conditions.");return n.slice(0,n.length-1).some(t=>t.func(e))&&n[n.length-1].func(e)}iH(rH,O$e,k$e);const D$e="numeric",KK="text",N$e="date",k3={[D$e]:[Di,ht,Ib,DS,ht,Ob,NS,ht,LK,HK,$K,FK,gR,BK],[KK]:[Di,ht,Ib,DS,ht,Ob,NS,ht,VK,WK,ht,nH,jK],[N$e]:[Di,ht,Ib,DS,ht,Ob,NS,ht,tH,eH,gR,ht,zK,UK,GK]};function L$e(n){const e=[];let t=n;return k3[t]||(t=KK),j(k3[t],i=>{let r;i===ht?r={name:ht}:r=ra(Ed(i)),e.push(r)}),e}function av(n,e,t){return(e=H$e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function H$e(n){var e=$$e(n,"string");return typeof e=="symbol"?e:e+""}function $$e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const dM="built",fM="building",D3=["click","input","keydown","keypress","keyup","focus","blur","change"];let Qo=class qK{static get DEFAULTS(){return ra({className:"",value:"",tagName:"div",children:[],wrapIt:!0})}constructor(e,t){av(this,"hot",void 0),av(this,"eventManager",new co(this)),av(this,"options",void 0),av(this,"_element",void 0),av(this,"buildState",void 0),this.hot=e,this.options=li(qK.DEFAULTS,t),this._element=this.hot.rootDocument.createElement(this.options.wrapIt?"div":this.options.tagName)}setValue(e){this.options.value=e,this.update()}getValue(){return this.options.value}get element(){return this.buildState===fM?this._element:this.buildState===dM?(this.update(),this._element):(this.buildState=fM,this.build(),this.buildState=dM,this._element)}isBuilt(){return this.buildState===dM}translateIfPossible(e){return typeof e=="string"&&e.startsWith(Nr)?this.hot.getTranslatedPhrase(e):e}build(){const e=(t,i)=>{this.eventManager.addEventListener(t,i,r=>this.runLocalHooks(i,r,this))};if(this.buildState||(this.buildState=fM),this._element.setAttribute("data-hot-input",!0),this.options.tabIndex!==void 0&&this._element.setAttribute("tabindex",this.options.tabIndex),this.options.role!==void 0&&this._element.setAttribute("role",this.options.role),this.options.className&&ue(this._element,this.options.className),this.options.children.length)j(this.options.children,t=>this._element.appendChild(t.element));else if(this.options.wrapIt){const t=this.hot.rootDocument.createElement(this.options.tagName);t.setAttribute("data-hot-input",!0),ct(this.options,(i,r)=>{t[r]!==void 0&&r!=="className"&&r!=="tagName"&&r!=="children"&&(t[r]=this.translateIfPossible(i))}),this._element.appendChild(t),j(D3,i=>e(t,i))}else j(D3,t=>e(this._element,t))}update(){}reset(){this.options.value="",this.update()}show(){this.element.style.display=""}hide(){this.element.style.display="none"}focus(){}destroy(){this.eventManager.destroy(),this.eventManager=null,this.hot=null,this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null}};Xt(Qo,Ki);function F$e(n,e){XK(n,e),e.add(n)}function B$e(n,e,t){XK(n,e),e.set(n,t)}function XK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vC(n,e){return n.get(sH(n,e))}function V$e(n,e,t){return n.set(sH(n,e),t),t}function sH(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var hg=new WeakMap,N3=new WeakSet;class Fu extends Qo{static get DEFAULTS(){return ra({placeholder:"",type:"text",tagName:"input",tabIndex:-1})}constructor(e,t){super(e,li(Fu.DEFAULTS,t)),F$e(this,N3),B$e(this,hg,void 0),this.registerHooks()}registerHooks(){this.addLocalHook("keyup",e=>sH(N3,this,W$e).call(this,e))}build(){super.build();const e=this.hot.rootDocument.createElement("div");V$e(hg,this,this._element.firstChild),ue(this._element,"htUIInput"),ue(e,"htUIInputIcon"),this._element.appendChild(e),this.update()}update(){this.isBuilt()&&(vC(hg,this).type=this.options.type,vC(hg,this).placeholder=this.translateIfPossible(this.options.placeholder),vC(hg,this).value=this.translateIfPossible(this.options.value))}focus(){this.isBuilt()&&vC(hg,this).focus()}}function W$e(n){this.options.value=n.target.value}function j$e(n,e){ZK(n,e),e.add(n)}function lv(n,e,t){ZK(n,e),e.set(n,t)}function ZK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dg(n,e,t){return n.set(kb(n,e),t),t}function Hn(n,e){return n.get(kb(n,e))}function kb(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ci=new WeakMap,bC=new WeakMap,wC=new WeakMap,gM=new WeakMap,yC=new WeakMap,CC=new WeakSet;class Tw extends Qo{static get DEFAULTS(){return ra({className:"htUISelect",wrapIt:!1,tabIndex:-1})}constructor(e,t){super(e,li(Tw.DEFAULTS,t)),j$e(this,CC),lv(this,Ci,null),lv(this,bC,[]),lv(this,wC,void 0),lv(this,gM,void 0),lv(this,yC,void 0),this.registerHooks()}getMenu(){return Hn(Ci,this)}registerHooks(){this.addLocalHook("click",()=>kb(CC,this,G$e).call(this))}setItems(e){dg(bC,this,this.translateNames(e)),Hn(Ci,this)&&Hn(Ci,this).setMenuItems(Hn(bC,this))}translateNames(e){return j(e,t=>{t.name=this.translateIfPossible(t.name)}),e}build(){super.build(),dg(Ci,this,new nm(this.hot,{className:"htSelectUI htFiltersConditionsMenu",keepInViewport:!1,standalone:!0,container:this.options.menuContainer})),Hn(Ci,this).setMenuItems(Hn(bC,this));const e=new Qo(this.hot,{className:"htUISelectCaption"}),t=new Qo(this.hot,{className:"htUISelectDropdown"});dg(wC,this,e),dg(gM,this,e.element),dg(yC,this,t),this.hot.getSettings().ariaTags&&(ze(t.element,[xf()]),ze(this._element,[zG()])),j([e,t],i=>this._element.appendChild(i.element)),Hn(Ci,this).addLocalHook("select",i=>kb(CC,this,z$e).call(this,i)),Hn(Ci,this).addLocalHook("afterClose",()=>kb(CC,this,U$e).call(this)),this.update()}update(){if(!this.isBuilt())return;let e;this.options.value?e=this.options.value.name:e=Hn(Ci,this).hot.getTranslatedPhrase(tE),Hn(gM,this).textContent=e,super.update()}openOptions(){const e=this.element.getBoundingClientRect();Hn(Ci,this)&&(Hn(Ci,this).open(),Hn(Ci,this).setPosition({left:this.hot.isLtr()?e.left-5:e.left-31,top:e.top-1,width:e.width,height:e.height}),Hn(Ci,this).getNavigator().toFirstItem(),Hn(Ci,this).getKeyboardShortcutsCtrl().addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],callback:t=>{this.closeOptions(),this.runLocalHooks("tabKeydown",t)}},{keys:[["Control/Meta","A"]],callback:()=>!1}]))}closeOptions(){Hn(Ci,this)&&Hn(Ci,this).close()}focus(){this.isBuilt()&&this.element.focus()}destroy(){Hn(Ci,this)&&(Hn(Ci,this).destroy(),dg(Ci,this,null)),Hn(wC,this)&&Hn(wC,this).destroy(),Hn(yC,this)&&Hn(yC,this).destroy(),super.destroy()}}function z$e(n){n.name!==ht&&(this.options.value=n,this.update(),this.runLocalHooks("select",this.options.value))}function U$e(){this.runLocalHooks("afterClose")}function G$e(){this.openOptions()}function Y$e(n,e){K$e(n,e),e.add(n)}function K$e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function L3(n,e,t){return(e=q$e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function q$e(n){var e=X$e(n,"string");return typeof e=="symbol"?e:e+""}function X$e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function H3(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var pM=new WeakSet;class HI extends _y{constructor(e,t){super(e,{id:t.id,stateless:!1}),Y$e(this,pM),L3(this,"name",""),L3(this,"addSeparator",!1),this.name=t.name,this.addSeparator=t.addSeparator,this.elements.push(new Tw(this.hot,{menuContainer:t.menuContainer})),this.elements.push(new Fu(this.hot,{placeholder:_L})),this.elements.push(new Fu(this.hot,{placeholder:RL})),this.registerHooks()}registerHooks(){this.getSelectElement().addLocalHook("select",e=>H3(pM,this,Z$e).call(this,e)).addLocalHook("afterClose",()=>this.runLocalHooks("afterClose")).addLocalHook("tabKeydown",e=>this.runLocalHooks("selectTabKeydown",e)),j(this.getInputElements(),e=>{e.addLocalHook("keydown",t=>H3(pM,this,Q$e).call(this,t))})}setState(e){if(this.reset(),!e)return;const t=ra(e.command);t.name.startsWith(Gn)&&(t.name=this.hot.getTranslatedPhrase(t.name)),this.getSelectElement().setValue(t),j(e.args,(i,r)=>{if(r>t.inputsCount-1)return!1;const s=this.getInputElement(r);s.setValue(i),s[t.inputsCount>r?"show":"hide"](),r||this.hot._registerTimeout(()=>s.focus(),10)})}getState(){const e=this.getSelectElement().getValue()||Ed(Di),t=[];return j(this.getInputElements(),(i,r)=>{e.inputsCount>r&&t.push(i.getValue())}),{command:e,args:t}}updateState(e,t){const i=Ed(e?e.name:Di);this.state.setValueAtIndex(t,{command:i,args:e?e.args:[]}),e||j(this.getInputElements(),r=>r.setValue(null))}getSelectElement(){return this.elements.filter(e=>e instanceof Tw)[0]}getInputElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.getInputElements()[e]}getInputElements(){return this.elements.filter(e=>e instanceof Fu)}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t,i,r,s,o)=>{ue(t.parentNode,"htFiltersMenuCondition"),this.addSeparator&&ue(t.parentNode,"border");const a=this.hot.rootDocument.createElement("div");return ue(a,"htFiltersMenuLabel"),a.textContent=o,t.appendChild(a),t.parentElement.hasAttribute("ghost-table")||j(this.elements,l=>t.appendChild(l.element)),t}}}reset(){const e=this.hot.getPlugin("filters").getSelectedColumn();let t=[Ed(Di)];if(e!==null){const{visualIndex:i}=e;t=L$e(this.hot.getDataType(0,i,this.hot.countRows(),i))}j(this.getInputElements(),i=>i.hide()),this.getSelectElement().setItems(t),super.reset(),this.getSelectElement().setValue(t[0])}}function Z$e(n){j(this.getInputElements(),(e,t)=>{e[n.inputsCount>t?"show":"hide"](),t===0&&this.hot._registerTimeout(()=>e.focus(),10)}),this.runLocalHooks("change",n)}function Q$e(n){Qp(n.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),mo(n))}function $3(n,e,t){J$e(n,e),e.set(n,t)}function J$e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cv(n,e){return n.get(QK(n,e))}function F3(n,e,t){return n.set(QK(n,e),t),t}function QK(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var fg=new WeakMap,mM=new WeakMap;class mR extends Qo{static get DEFAULTS(){return ra({type:"radio",tagName:"input",className:"htUIRadio",label:{}})}constructor(e,t){super(e,li(mR.DEFAULTS,t)),$3(this,fg,void 0),$3(this,mM,void 0)}build(){super.build();const e=this.hot.rootDocument.createElement("label");e.textContent=this.translateIfPossible(this.options.label.textContent),e.htmlFor=this.translateIfPossible(this.options.label.htmlFor),F3(mM,this,e),F3(fg,this,this._element.firstChild),cv(fg,this).checked=this.options.checked,this._element.appendChild(e),this.update()}update(){this.isBuilt()&&(cv(mM,this).textContent=this.translateIfPossible(this.options.label.textContent))}isChecked(){return this.isBuilt()?cv(fg,this).checked:!1}setChecked(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isBuilt()&&(cv(fg,this).checked=e)}focus(){this.isBuilt()&&cv(fg,this).focus()}}function e2e(n,e){t2e(n,e),e.add(n)}function t2e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function n2e(n,e,t){return(e=i2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function i2e(n){var e=r2e(n,"string");return typeof e=="symbol"?e:e+""}function r2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function s2e(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const B3=0;var V3=new WeakSet;class o2e extends _y{constructor(e,t){super(e,{id:t.id,stateless:!1}),e2e(this,V3),n2e(this,"name",""),this.name=t.name,this.buildOperatorsElement()}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t)=>(ue(t.parentNode,"htFiltersMenuOperators"),j(this.elements,i=>t.appendChild(i.element)),t)}}buildOperatorsElement(){const e=[$u,pR];j(e,t=>{const i=new mR(this.hot,{name:"operator",label:{htmlFor:t,textContent:T$e(t)},value:t,checked:t===e[B3],id:t});i.addLocalHook("change",r=>s2e(V3,this,a2e).call(this,r)),this.elements.push(i)})}setChecked(e){if(this.elements.length<e)throw Error(Kt`Radio button with index ${e} doesn't exist.`);j(this.elements,(t,i)=>{t.setChecked(i===e)})}getActiveOperationId(){const e=this.elements.find(t=>t instanceof mR&&t.isChecked());return e?e.getValue():$u}getState(){return this.getActiveOperationId()}setState(e){this.reset(),e&&this.getActiveOperationId()!==e&&j(this.elements,t=>{t.setChecked(t.getValue()===e)})}updateState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$u,t=arguments.length>1?arguments[1]:void 0,i=e;i===rH&&(i=pR),this.state.setValueAtIndex(t,i)}reset(){this.setChecked(B3)}}function a2e(n){this.setState(n.target.value)}function l2e(n,e,t){c2e(n,e),e.set(n,t)}function c2e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vM(n,e){return n.get(JK(n,e))}function u2e(n,e,t){return n.set(JK(n,e),t),t}function JK(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var uv=new WeakMap;class Mw extends Qo{static get DEFAULTS(){return ra({href:"#",tagName:"a",tabIndex:-1,role:"button"})}constructor(e,t){super(e,li(Mw.DEFAULTS,t)),l2e(this,uv,void 0)}build(){super.build(),u2e(uv,this,this._element.firstChild)}update(){this.isBuilt()&&(vM(uv,this).textContent=this.translateIfPossible(this.options.textContent))}focus(){this.isBuilt()&&vM(uv,this).focus()}activate(){vM(uv,this).click()}}function h2e(n,e){eq(n,e),e.add(n)}function gg(n,e,t){eq(n,e),e.set(n,t)}function eq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function st(n,e){return n.get(Xg(n,e))}function Po(n,e,t){return n.set(Xg(n,e),t),t}function Xg(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const W3="multipleSelect.itemBox";var $o=new WeakMap,ri=new WeakMap,bM=new WeakMap,Hl=new WeakMap,Qc=new WeakMap,Jc=new WeakMap,hv=new WeakSet;class Aw extends Qo{static get DEFAULTS(){return ra({className:"htUIMultipleSelect",value:[]})}constructor(e,t){super(e,li(Aw.DEFAULTS,t)),h2e(this,hv),gg(this,$o,[]),gg(this,ri,void 0),gg(this,bM,void 0),gg(this,Hl,void 0),gg(this,Qc,void 0),gg(this,Jc,void 0),Po(Hl,this,new Fu(this.hot,{placeholder:SL,className:"htUIMultipleSelectSearch"})),Po(Qc,this,new Mw(this.hot,{textContent:bL,className:"htUISelectAll"})),Po(Jc,this,new Mw(this.hot,{textContent:wL,className:"htUIClearAll"})),this.registerHooks()}getItemsBox(){return st(ri,this)}registerHooks(){st(Hl,this).addLocalHook("keydown",e=>Xg(hv,this,f2e).call(this,e)),st(Hl,this).addLocalHook("input",e=>Xg(hv,this,d2e).call(this,e)),st(Qc,this).addLocalHook("click",e=>Xg(hv,this,g2e).call(this,e)),st(Jc,this).addLocalHook("click",e=>Xg(hv,this,p2e).call(this,e))}setItems(e){var t;Po($o,this,e),(t=st(ri,this))===null||t===void 0||t.loadData(st($o,this))}setLocale(e){Po(bM,this,e)}getLocale(){return st(bM,this)}getItems(){return[...st($o,this)]}getValue(){return v2e(st($o,this))}getSearchInputElement(){return st(Hl,this)}getSelectAllElement(){return st(Qc,this)}getClearAllElement(){return st(Jc,this)}isSelectedAllValues(){return st($o,this).length===this.getValue().length}build(){super.build();const{rootDocument:e}=this.hot,t=e.createElement("div"),i=new Qo(this.hot,{className:"htUISelectionControls",children:[st(Qc,this),st(Jc,this)]});this._element.appendChild(st(Hl,this).element),this._element.appendChild(i.element),this._element.appendChild(t);const r=s=>{var o;if(!this._element)return;(o=st(ri,this))===null||o===void 0||o.destroy(),ue(s,"htUIMultipleSelectHot"),Po(ri,this,new this.hot.constructor(s,{data:st($o,this),columns:[{data:"checked",type:"checkbox",label:{property:"visualValue",position:"after"}}],beforeRenderer:(c,u,h,d,f,g)=>{c.title=g.instance.getDataAtRowProp(u,g.label.property)},afterListen:()=>{this.runLocalHooks("focus",this)},beforeOnCellMouseUp:()=>{st(ri,this).listen()},colWidths:()=>st(ri,this).container.scrollWidth-Ai(e),maxCols:1,autoWrapCol:!0,height:110,copyPaste:!1,disableVisualSelection:"area",fillHandle:!1,fragmentSelection:"cell",tabMoves:{row:1,col:0},layoutDirection:this.hot.isRtl()?"rtl":"ltr"})),st(ri,this).init();const l=st(ri,this).getShortcutManager().getContext("grid");l.removeShortcutsByKeys(["Tab"]),l.removeShortcutsByKeys(["Shift","Tab"]),l.addShortcut({keys:[["Escape"]],callback:c=>{this.runLocalHooks("keydown",c,this)},group:W3}),l.addShortcut({keys:[["Tab"],["Shift","Tab"]],callback:c=>{st(ri,this).deselectCell(),this.runLocalHooks("keydown",c,this),this.runLocalHooks("listTabKeydown",c,this)},group:W3})};r(t),this.hot._registerTimeout(()=>r(t),100)}focus(){this.isBuilt()&&st(ri,this).listen()}reset(){st(Hl,this).reset(),st(Qc,this).reset(),st(Jc,this).reset()}update(){this.isBuilt()&&(st(ri,this).loadData(m2e(st($o,this),this.options.value)),super.update())}destroy(){var e;(e=st(ri,this))===null||e===void 0||e.destroy(),st(Hl,this).destroy(),st(Jc,this).destroy(),st(Qc,this).destroy(),Po(Hl,this,null),Po(Jc,this,null),Po(Qc,this,null),Po(ri,this,null),Po($o,this,null),super.destroy()}}function d2e(n){const e=n.target.value.toLocaleLowerCase(this.getLocale());let t;e===""?t=[...st($o,this)]:t=st($o,this).filter(i=>`${i.value}`.toLocaleLowerCase(this.getLocale()).indexOf(e)>=0),st(ri,this).loadData(t)}function f2e(n){this.runLocalHooks("keydown",n,this),TD(Qp,n.keyCode)("ARROW_DOWN")&&(n.preventDefault(),mo(n),st(ri,this).listen(),st(ri,this).selectCell(0,0))}function g2e(n){const e=[];n.preventDefault(),st(ri,this).getSourceData().forEach((t,i)=>{t.checked=!0,e.push(oN(t,i)[0])}),st(ri,this).setSourceDataAtCell(e)}function p2e(n){const e=[];n.preventDefault(),st(ri,this).getSourceData().forEach((t,i)=>{t.checked=!1,e.push(oN(t,i)[0])}),st(ri,this).setSourceDataAtCell(e)}function m2e(n,e){const t=Ry(e);return n.map(i=>(i.checked=t(i.value),i))}function v2e(n){const e=[];return n.forEach(t=>{t.checked&&e.push(t.value)}),e}function b2e(n,e){w2e(n,e),e.add(n)}function w2e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function y2e(n,e,t){return(e=C2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function C2e(n){var e=S2e(n,"string");return typeof e=="symbol"?e:e+""}function S2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function SC(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var dv=new WeakSet;class _2e extends _y{constructor(e,t){super(e,{id:t.id,stateless:!1}),b2e(this,dv),y2e(this,"name",""),this.name=t.name,this.elements.push(new Aw(this.hot)),this.registerHooks()}registerHooks(){this.getMultipleSelectElement().addLocalHook("keydown",e=>SC(dv,this,R2e).call(this,e)).addLocalHook("listTabKeydown",e=>this.runLocalHooks("listTabKeydown",e)),this.hot.addHook("modifyFiltersMultiSelectValue",(e,t)=>SC(dv,this,E2e).call(this,e,t))}getElements(){const e=this.getMultipleSelectElement();return[e.getSearchInputElement(),e.getSelectAllElement(),e.getClearAllElement(),this.getMultipleSelectElement()]}setState(e){if(this.reset(),e&&e.command.key===xd){const t=this.getMultipleSelectElement();t.setItems(e.itemsSnapshot),t.setValue(e.args[0]),t.setLocale(e.locale)}}getState(){const e=this.getMultipleSelectElement(),t=e.getItems();return{command:{key:e.isSelectedAllValues()||!t.length?Di:xd},args:[e.getValue()],itemsSnapshot:t}}updateState(e){const t=(i,r,s,o,a)=>{const[l]=Tc(r,h=>h.name===xd),c={},u=this.hot.getTranslatedPhrase(rR);if(l){const h=o(i,a),d=vt(h,y=>y.value),f=new Map(h.map(y=>[y.value,this.hot.getCellMeta(y.meta.visualRow,y.meta.visualCol)])),g=LI(d);s&&(l.args[0]=s);const p=[],m=O3(g,l.args[0],u,y=>{y.checked&&p.push(y.value),SC(dv,this,j3).call(this,y,f)}),b=e.editedConditionStack.column;c.locale=this.hot.getCellMeta(0,b).locale,c.args=[p],c.command=Ed(xd),c.itemsSnapshot=m}else c.args=[],c.command=Ed(Di);this.state.setValueAtIndex(i,c)};t(e.editedConditionStack.column,e.editedConditionStack.conditions,e.conditionArgsChange,e.filteredRowsFactory),e.dependentConditionStacks.length&&t(e.dependentConditionStacks[0].column,e.dependentConditionStacks[0].conditions,e.conditionArgsChange,e.filteredRowsFactory,e.editedConditionStack)}getMultipleSelectElement(){return this.elements.filter(e=>e instanceof Aw)[0]}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t,i,r,s,o)=>{ue(t.parentNode,"htFiltersMenuValue");const a=this.hot.rootDocument.createElement("div");return ue(a,"htFiltersMenuLabel"),a.textContent=o,t.appendChild(a),t.parentElement.hasAttribute("ghost-table")||j(this.elements,l=>t.appendChild(l.element)),t}}}reset(){const e=this.hot.getTranslatedPhrase(rR),t=this._getColumnVisibleValues(),i=t.map(l=>l.value),r=new Map(t.map(l=>[l.value,l.meta])),s=LI(i),o=O3(s,s,e,l=>{SC(dv,this,j3).call(this,l,r)});this.getMultipleSelectElement().setItems(o),super.reset(),this.getMultipleSelectElement().setValue(s);const a=this.hot.getPlugin("filters").getSelectedColumn();a!==null&&this.getMultipleSelectElement().setLocale(this.hot.getCellMeta(0,a.visualIndex).locale)}_getColumnVisibleValues(){const e=this.hot.getPlugin("filters").getSelectedColumn();return e===null?[]:vt(this.hot.getDataAtCol(e.visualIndex),(t,i)=>({value:YK(t),meta:this.hot.getCellMeta(i,e.visualIndex)}))}}function R2e(n){Qp(n.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),mo(n))}function j3(n,e){this.hot.hasHook("modifyFiltersMultiSelectValue")&&(n.visualValue=this.hot.runHooks("modifyFiltersMultiSelectValue",n.visualValue,e.get(n.value)))}function E2e(n,e){switch(e.type){case"numeric":return YY(n,e);default:return n}}var tq;function x2e(n,e){T2e(n,e),e.add(n)}function T2e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function M2e(n,e,t){return(e=A2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function A2e(n){var e=P2e(n,"string");return typeof e=="symbol"?e:e+""}function P2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function I2e(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var z3=new WeakSet;class Pw extends _y{static get BUTTON_OK(){return"ok"}static get BUTTON_CANCEL(){return"cancel"}constructor(e,t){super(e,{id:t.id,stateless:!0}),x2e(this,z3),M2e(this,"name",""),this.name=t.name,this.elements.push(new Fu(this.hot,{type:"button",value:yL,className:"htUIButton htUIButtonOK",identifier:Pw.BUTTON_OK})),this.elements.push(new Fu(this.hot,{type:"button",value:CL,className:"htUIButton htUIButtonCancel",identifier:Pw.BUTTON_CANCEL})),this.registerHooks()}registerHooks(){j(this.elements,e=>{e.addLocalHook("click",(t,i)=>I2e(z3,this,O2e).call(this,t,i))})}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t)=>(ue(t.parentNode,"htFiltersMenuActionBar"),j(this.elements,i=>t.appendChild(i.element)),t)}}accept(){this.runLocalHooks("accept")}cancel(){this.runLocalHooks("cancel")}}tq=Pw;function O2e(n,e){e.options.identifier===tq.BUTTON_OK?this.accept():this.cancel()}function _C(n,e,t){return(e=k2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function k2e(n){var e=D2e(n,"string");return typeof e=="symbol"?e:e+""}function D2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const U3="ConditionCollection.filteringStates";class oH{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;_C(this,"hot",void 0),_C(this,"isMapRegistrable",void 0),_C(this,"filteringStates",new eE),_C(this,"previousConditionStack",null),this.hot=e,this.isMapRegistrable=t,this.isMapRegistrable===!0?this.hot.columnIndexMapper.registerMap(U3,this.filteringStates):this.filteringStates.init(this.hot.columnIndexMapper.getNumberOfIndexes())}isEmpty(){return this.getFilteredColumns().length===0}isMatch(e,t){var i;const r=this.filteringStates.getValueAtIndex(t),s=(i=r==null?void 0:r.conditions)!==null&&i!==void 0?i:[],o=r==null?void 0:r.operation;return this.isMatchInConditions(s,e,o)}isMatchInConditions(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$u;return e.length?x$e(i)(e,t):!0}addCondition(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$u,r=arguments.length>3?arguments[3]:void 0;const s=this.hot.getCellMeta(0,e).locale,o=vt(t.args,u=>typeof u=="string"?u.toLocaleLowerCase(s):u),a=t.name||t.command.key;this.previousConditionStack===null&&this.setPreviousConditionStack(this.exportAllConditions()),this.runLocalHooks("beforeAdd",e);const l=this.getOperation(e);if(l){if(l!==i)throw Error(Kt`The column of index ${e} has been already applied with a \`${l}\`\x20
        filter operation. Use \`removeConditions\` to clear the current conditions and then add new ones.\x20
        Mind that you cannot mix different types of operations (for instance, if you use \`conjunction\`,\x20
        use it consequently for a particular column).`)}else if(dn(xw[i]))throw new Error(Kt`Unexpected operation named \`${i}\`. Possible ones are\x20
        \`disjunction\` and \`conjunction\`.`);const c=this.getConditions(e);c.length===0?this.filteringStates.setValueAtIndex(e,{operation:i,conditions:[{name:a,args:o,func:qu(a,o)}]},r):c.push({name:a,args:o,func:qu(a,o)}),this.runLocalHooks("afterAdd",e)}getConditions(e){var t,i;return(t=(i=this.filteringStates.getValueAtIndex(e))===null||i===void 0?void 0:i.conditions)!==null&&t!==void 0?t:[]}getOperation(e){var t;return(t=this.filteringStates.getValueAtIndex(e))===null||t===void 0?void 0:t.operation}getFilteredColumns(){return this.filteringStates.getEntries().map(e=>{let[t]=e;return t})}getColumnStackPosition(e){return this.getFilteredColumns().indexOf(e)}exportAllConditions(){return ci(this.filteringStates.getEntries(),(e,t)=>{let[i,{operation:r,conditions:s}]=t;return e.push({column:i,operation:r,conditions:vt(s,o=>{let{name:a,args:l}=o;return{name:a,args:l}})}),e},[])}importAllConditions(e){this.clean(),j(e,t=>{j(t.conditions,i=>this.addCondition(t.column,i))})}removeConditions(e){this.setPreviousConditionStack(this.exportAllConditions()),this.runLocalHooks("beforeRemove",e),this.filteringStates.clearValue(e),this.runLocalHooks("afterRemove",e)}clean(){this.runLocalHooks("beforeClean"),this.filteringStates.clear(),this.runLocalHooks("afterClean")}hasConditions(e,t){const i=this.getConditions(e);return t?i.some(r=>r.name===t):i.length>0}setPreviousConditionStack(e){this.previousConditionStack=e}destroy(){this.isMapRegistrable&&this.hot.columnIndexMapper.unregisterMap(U3),this.filteringStates=null,this.clearLocalHooks()}}Xt(oH,Ki);function G3(n,e,t){return(e=N2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function N2e(n){var e=L2e(n,"string");return typeof e=="symbol"?e:e+""}function L2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class nq{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>[];G3(this,"conditionCollection",void 0),G3(this,"columnDataFactory",void 0),this.conditionCollection=e,this.columnDataFactory=t}filter(){let e=[];return j(this.conditionCollection.getFilteredColumns(),(t,i)=>{let r=this.columnDataFactory(t);i&&(r=this._getIntersectData(r,e)),e=this.filterByColumn(t,r)}),e}filterByColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=[];return j(t,r=>{r!==void 0&&this.conditionCollection.isMatch(r,e)&&i.push(r)}),i}_getIntersectData(e,t){const i=[];return j(t,r=>{const s=r.meta.visualRow;e[s]!==void 0&&(i[s]=e[s])}),i}}function H2e(n,e){$2e(n,e),e.add(n)}function $2e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Bh(n,e,t){return(e=F2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function F2e(n){var e=B2e(n,"string");return typeof e=="symbol"?e:e+""}function B2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function wM(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var RC=new WeakSet;class iq{constructor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:()=>[];H2e(this,RC),Bh(this,"hot",void 0),Bh(this,"conditionCollection",void 0),Bh(this,"columnDataFactory",void 0),Bh(this,"changes",[]),Bh(this,"grouping",!1),Bh(this,"latestEditedColumnPosition",-1),Bh(this,"latestOrderStack",[]),this.hot=e,this.conditionCollection=t,this.columnDataFactory=i,this.conditionCollection.addLocalHook("beforeRemove",r=>wM(RC,this,V2e).call(this,r)),this.conditionCollection.addLocalHook("afterRemove",r=>this.updateStatesAtColumn(r)),this.conditionCollection.addLocalHook("afterAdd",r=>this.updateStatesAtColumn(r)),this.conditionCollection.addLocalHook("beforeClean",()=>wM(RC,this,W2e).call(this)),this.conditionCollection.addLocalHook("afterClean",()=>wM(RC,this,j2e).call(this))}groupChanges(){this.grouping=!0}flush(){this.grouping=!1,j(this.changes,e=>{this.updateStatesAtColumn(e)}),this.changes.length=0}updateStatesAtColumn(e,t){var i=this;if(this.grouping){this.changes.indexOf(e)===-1&&this.changes.push(e);return}const r=this.conditionCollection.exportAllConditions();let s=this.conditionCollection.getColumnStackPosition(e);s===-1&&(s=this.latestEditedColumnPosition);const o=r.slice(0,s),a=r.slice(s);a.length&&a[0].column===e&&a.shift();const l=u9(function(u,h){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const f=new oH(i.hot,!1),g=[].concat(u,d);f.importAllConditions(g);const p=i.columnDataFactory(h);let m;f.isEmpty()?m=p:m=new nq(f,y=>i.columnDataFactory(y)).filter(),m=vt(m,y=>y.meta.visualRow);const b=Ry(m);return f.destroy(),Tc(p,y=>b(y.meta.visualRow))})(o),c=[].concat(this.conditionCollection.getConditions(e));this.runLocalHooks("update",{editedConditionStack:{column:e,conditions:c},dependentConditionStacks:a,filteredRowsFactory:l,conditionArgsChange:t})}destroy(){this.clearLocalHooks(),ct(this,(e,t)=>{this[t]=null})}}function V2e(n){this.latestEditedColumnPosition=this.conditionCollection.getColumnStackPosition(n)}function W2e(){this.latestOrderStack=this.conditionCollection.getFilteredColumns()}function j2e(){j(this.latestOrderStack,n=>{this.updateStatesAtColumn(n)})}Xt(iq,Ki);function z2e(n){return RK({initialPage:0,size:()=>n.length,onItemSelect:(t,i)=>{const r=n[t];if(r instanceof Aw)return i;if(r.element&&!nf(r.element))return!1;r.focus()}})}const fv="filters";function U2e(n,e){let t=-1;const i=z2e(e),r=l=>()=>{n.isOpened()&&n.getKeyboardShortcutsCtrl().listen(fv),i.setCurrentPage(e.indexOf(l))};e.forEach(l=>{l instanceof Qo&&(l.addLocalHook("click",r(l)),l.addLocalHook("focus",r(l)),l.addLocalHook("afterClose",r(l)))}),n.addLocalHook("afterSelectionChange",l=>{l.key.startsWith("filter_")||i.clear()});function s(l){const c=n.getKeyboardShortcutsCtrl(),u=l.getKeyboardShortcutsCtrl();i.clear(),u.addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],forwardToContext:c.getContext(fv),callback:()=>{l.isSubMenu()&&l.close(),c.listen(fv)}}]),!l.isSubMenu()&&c.addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],callback:h=>{const d=n.getNavigator();d.getCurrentPage()>-1&&(t=d.getCurrentPage()),d.clear(),h.shiftKey?i.toPreviousItem():i.toNextItem()}},{keys:[["Escape"]],callback:()=>{n.close()}},{keys:[["Enter"],["Space"]],preventDefault:!1,callback:h=>{const d=e[i.getCurrentPage()];d instanceof Tw&&(d.openOptions(),h.preventDefault()),d instanceof Mw&&(d.activate(),h.preventDefault()),d instanceof Qo||h.preventDefault()}}],fv)}n.addLocalHook("afterSubmenuOpen",s),n.addLocalHook("afterOpen",s);function o(){n.focus(),n.getKeyboardShortcutsCtrl().listen(fv)}function a(){return t}return{...i,listen:o,getLastMenuPage:a}}function G2e(n,e){rq(n,e),e.add(n)}function Y2e(n,e,t){rq(n,e),e.set(n,t)}function rq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gv(n,e,t){return(e=K2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function K2e(n){var e=q2e(n,"string");return typeof e=="symbol"?e:e+""}function q2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function X2e(n,e,t){return n.set(os(n,e),t),t}function pv(n,e){return n.get(os(n,e))}function os(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const $I="filters",Z2e=250,Y3=$I;var Vh=new WeakMap,Fs=new WeakSet;class Q2e extends Lt{static get PLUGIN_KEY(){return $I}static get PLUGIN_PRIORITY(){return Z2e}static get PLUGIN_DEPS(){return["plugin:DropdownMenu","plugin:HiddenRows","cell-type:checkbox"]}constructor(e){super(e),G2e(this,Fs),gv(this,"dropdownMenuPlugin",null),gv(this,"conditionCollection",null),gv(this,"conditionUpdateObserver",null),gv(this,"components",new Map([["filter_by_condition",null],["filter_operators",null],["filter_by_condition2",null],["filter_by_value",null],["filter_action_bar",null]])),gv(this,"filtersRowsMap",null),Y2e(this,Vh,void 0),this.hot.addHook("afterGetColHeader",(t,i)=>os(Fs,this,rFe).call(this,t,i))}isEnabled(){return!!this.hot.getSettings()[$I]}enablePlugin(){if(this.enabled)return;this.filtersRowsMap=this.hot.rowIndexMapper.registerMap(this.pluginName,new my),this.dropdownMenuPlugin=this.hot.getPlugin("dropdownMenu");const e=this.hot.getSettings().dropdownMenu,t=e&&e.uiContainer||this.hot.rootDocument.body,i=o=>(o.addLocalHook("accept",()=>os(Fs,this,K3).call(this,"accept")),o.addLocalHook("cancel",()=>os(Fs,this,K3).call(this,"cancel")),o.addLocalHook("change",a=>os(Fs,this,iFe).call(this,o,a)),o),r=()=>`${this.hot.getTranslatedPhrase(pL)}:`,s=()=>`${this.hot.getTranslatedPhrase(mL)}:`;if(!this.components.get("filter_by_condition")){const o=new HI(this.hot,{id:"filter_by_condition",name:r,addSeparator:!1,menuContainer:t});o.addLocalHook("afterClose",()=>os(Fs,this,q3).call(this)),this.components.set("filter_by_condition",i(o))}if(this.components.get("filter_operators")||this.components.set("filter_operators",new o2e(this.hot,{id:"filter_operators",name:"Operators"})),!this.components.get("filter_by_condition2")){const o=new HI(this.hot,{id:"filter_by_condition2",name:"",addSeparator:!0,menuContainer:t});o.addLocalHook("afterClose",()=>os(Fs,this,q3).call(this)),this.components.set("filter_by_condition2",i(o))}if(this.components.get("filter_by_value")||this.components.set("filter_by_value",i(new _2e(this.hot,{id:"filter_by_value",name:s}))),this.components.get("filter_action_bar")||this.components.set("filter_action_bar",i(new Pw(this.hot,{id:"filter_action_bar",name:"Action bar"}))),this.conditionCollection||(this.conditionCollection=new oH(this.hot)),this.conditionUpdateObserver||(this.conditionUpdateObserver=new iq(this.hot,this.conditionCollection,o=>this.getDataMapAtColumn(o)),this.conditionUpdateObserver.addLocalHook("update",o=>os(Fs,this,sFe).call(this,o))),this.components.forEach(o=>o.show()),this.addHook("afterDropdownMenuDefaultOptions",o=>os(Fs,this,nFe).call(this,o)),this.addHook("afterDropdownMenuShow",()=>os(Fs,this,eFe).call(this)),this.addHook("afterDropdownMenuHide",()=>os(Fs,this,tFe).call(this)),this.addHook("afterChange",o=>os(Fs,this,J2e).call(this,o)),this.hot.getSettings().dropdownMenu&&this.dropdownMenuPlugin&&(this.dropdownMenuPlugin.disablePlugin(),this.dropdownMenuPlugin.enablePlugin()),!pv(Vh,this)&&this.dropdownMenuPlugin.enabled){const o=this.dropdownMenuPlugin.menu,a=[{focus:()=>{const c=o.getNavigator(),u=pv(Vh,this).getLastMenuPage();o.focus(),u>0?c.setCurrentPage(u):c.toFirstItem()}},...Array.from(this.components).map(c=>{let[,u]=c;return u.getElements()}).flat()];X2e(Vh,this,U2e(o,a));const l=c=>{pv(Vh,this).listen(),c.preventDefault(),Qp(c.keyCode,"TAB")&&(c.shiftKey?pv(Vh,this).toPreviousItem():pv(Vh,this).toNextItem())};this.components.get("filter_by_value").addLocalHook("listTabKeydown",l),this.components.get("filter_by_condition").addLocalHook("selectTabKeydown",l)}this.registerShortcuts(),super.enablePlugin()}disablePlugin(){if(this.enabled){var e;(e=this.dropdownMenuPlugin)!==null&&e!==void 0&&e.enabled&&this.dropdownMenuPlugin.menu.clearLocalHooks(),this.components.forEach((t,i)=>{t.destroy(),this.components.set(i,null)}),this.conditionCollection.destroy(),this.conditionCollection=null,this.hot.rowIndexMapper.unregisterMap(this.pluginName)}this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Alt","A"]],stopPropagation:!0,callback:()=>{const e=this.hot.getSelected();this.clearConditions(),this.filter(),e&&this.hot.selectCells(e)},group:Y3})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(Y3)}addCondition(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:$u;const s=this.hot.toPhysicalColumn(e);this.conditionCollection.addCondition(s,{command:{key:t},args:i},r)}removeConditions(e){const t=this.hot.toPhysicalColumn(e);this.conditionCollection.removeConditions(t)}clearConditions(e){if(e===void 0)this.conditionCollection.clean();else{const t=this.hot.toPhysicalColumn(e);this.conditionCollection.removeConditions(t)}}filter(){const{navigableHeaders:e}=this.hot.getSettings(),t=this._createDataFilter(),i=!this.conditionCollection.isEmpty();let r=[];const s=this.conditionCollection.exportAllConditions();if(this.hot.runHooks("beforeFilter",s,this.conditionCollection.previousConditionStack)!==!1)if(i){const a=[];this.hot.batchExecution(()=>{this.filtersRowsMap.clear(),r=vt(t.filter(),c=>c.meta.visualRow);const l=Ry(r);He(this.hot.countSourceRows()-1,c=>{l(c)||a.push(c)}),j(a,c=>{this.filtersRowsMap.setValueAtIndex(c,!0)})},!0),!e&&!r.length&&this.hot.deselectCell()}else this.filtersRowsMap.clear();this.hot.runHooks("afterFilter",s),this.conditionCollection.setPreviousConditionStack(null),this.hot.view.adjustElementsSize(),this.hot.render(),this.hot.selection.isSelected()&&this.hot.selectCell(e?-1:0,this.hot.getSelectedRangeLast().highlight.col)}getSelectedColumn(){var e;const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t?{visualIndex:t.col,physicalIndex:this.hot.toPhysicalColumn(t.col)}:null}getDataMapAtColumn(e){const t=this.hot.toVisualColumn(e),i=[];return j(this.hot.getSourceDataAtCol(t),(r,s)=>{var o;const{row:a,col:l,visualCol:c,visualRow:u,type:h,instance:d,dateFormat:f,locale:g}=this.hot.getCellMeta(s,t),p=(o=this.hot.getDataAtCell(this.hot.toVisualRow(s),t))!==null&&o!==void 0?o:r;i.push({meta:{row:a,col:l,visualCol:c,visualRow:u,type:h,instance:d,dateFormat:f,locale:g},value:YK(p)})}),i}updateValueComponentCondition(e){const t=this.hot.getDataAtCol(e),i=LI(t);this.conditionUpdateObserver.updateStatesAtColumn(e,i)}restoreComponents(e){var t;const i=(t=this.getSelectedColumn())===null||t===void 0?void 0:t.physicalIndex;e.forEach(r=>{r.isHidden()||r.restoreState(i)}),this.updateDependentComponentsVisibility()}getOperationBasedOnArguments(e,t,i,r){let s=e;return s===pR&&t.command.key!==Di&&i.command.key!==Di&&r.command.key!==Di?s=rH:r.command.key!==Di&&(t.command.key===Di||i.command.key===Di)&&(s=$u),s}setListeningDropdownMenu(){this.dropdownMenuPlugin&&this.dropdownMenuPlugin.setListening()}updateDependentComponentsVisibility(){const e=this.components.get("filter_by_condition"),{command:t}=e.getState(),i=[this.components.get("filter_by_condition2"),this.components.get("filter_operators")];t.showOperators?this.showComponents(...i):this.hideComponents(...i)}_createDataFilter(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.conditionCollection;return new nq(e,t=>this.getDataMapAtColumn(t))}getIndexesOfComponents(){const e=[];if(!this.dropdownMenuPlugin)return e;const t=this.dropdownMenuPlugin.menu;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return j(r,o=>{j(t.menuItems,(a,l)=>{a.key===o.getMenuItemDescriptor().key&&e.push(l)})}),e}changeComponentsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.dropdownMenuPlugin)return;const i=this.dropdownMenuPlugin.menu.hotMenu,r=i.getPlugin("hiddenRows");for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];const l=this.getIndexesOfComponents(...o);e?r.showRows(l):r.hideRows(l),i.render()}hideComponents(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.changeComponentsVisibility(!1,...t)}showComponents(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.changeComponentsVisibility(!0,...t)}destroy(){this.enabled&&(this.components.forEach((e,t)=>{e!==null&&(e.destroy(),this.components.set(t,null))}),this.conditionCollection.destroy(),this.conditionUpdateObserver.destroy(),this.hot.rowIndexMapper.unregisterMap(this.pluginName)),super.destroy()}}function J2e(n){n&&j(n,e=>{const[,t]=e,i=this.hot.propToCol(t);this.conditionCollection.hasConditions(i)&&this.updateValueComponentCondition(i)})}function eFe(){const n=this.dropdownMenuPlugin.menu;this.restoreComponents(Array.from(this.components.values())),n.updateMenuDimensions()}function tFe(){this.components.get("filter_by_condition").getSelectElement().closeOptions(),this.components.get("filter_by_condition2").getSelectElement().closeOptions()}function nFe(n){n.items.push({name:ht}),this.components.forEach(e=>{n.items.push(e.getMenuItemDescriptor())})}function K3(n){var e;if(n==="accept"){const i=this.getSelectedColumn();if(i===null){var t;(t=this.dropdownMenuPlugin)===null||t===void 0||t.close();return}const{physicalIndex:r}=i,s=this.components.get("filter_by_condition").getState(),o=this.components.get("filter_by_condition2").getState(),a=this.components.get("filter_by_value").getState(),l=this.getOperationBasedOnArguments(this.components.get("filter_operators").getActiveOperationId(),s,o,a);this.conditionUpdateObserver.groupChanges();let c=this.conditionCollection.getColumnStackPosition(r);c===-1&&(c=void 0),this.conditionCollection.removeConditions(r),s.command.key!==Di&&(this.conditionCollection.addCondition(r,s,l,c),o.command.key!==Di&&this.conditionCollection.addCondition(r,o,l,c)),a.command.key!==Di&&this.conditionCollection.addCondition(r,a,l,c),this.conditionUpdateObserver.flush(),this.components.forEach(u=>u.saveState(r)),this.filtersRowsMap.clear(),this.filter()}(e=this.dropdownMenuPlugin)===null||e===void 0||e.close()}function iFe(n,e){this.updateDependentComponentsVisibility(),n.constructor===HI&&!e.inputsCount&&this.setListeningDropdownMenu()}function q3(){this.setListeningDropdownMenu()}function rFe(n,e){const t=this.hot.toPhysicalColumn(n);this.enabled&&this.conditionCollection.hasConditions(t)?ue(e,"htFiltersActive"):Ze(e,"htFiltersActive")}function sFe(n){var e;if(!((e=this.dropdownMenuPlugin)!==null&&e!==void 0&&e.enabled))return;const{editedConditionStack:{conditions:t,column:i}}=n,r=t.filter(o=>o.name===xd),s=t.filter(o=>o.name!==xd);if(r.length>=2||s.length>=3)Yt(Kt`The filter conditions have been applied properly, but couldnt be displayed visually.\x20
        The overall amount of conditions exceed the capability of the dropdown menu.\x20
        For more details see the documentation.`);else{const o=this.conditionCollection.getOperation(i);this.components.get("filter_by_condition").updateState(s[0],i),this.components.get("filter_by_condition2").updateState(s[1],i),this.components.get("filter_operators").updateState(o,i),this.components.get("filter_by_value").updateState(n)}}const sq="internal-use-in-handsontable",FI={licenseKey:sq,useArrayArithmetic:!0,useColumnIndex:!1,useStats:!1,evaluateNullToZero:!0,precisionEpsilon:1e-13,precisionRounding:14,smartRounding:!0,leapYear1900:!1,nullDate:{year:1899,month:12,day:30},nullYear:30,dateFormats:["DD/MM/YYYY","DD/MM/YY"],timeFormats:["hh:mm","hh:mm:ss.sss"],matchWholeCell:!0,useRegularExpressions:!1,useWildcards:!0,functionArgSeparator:",",thousandSeparator:"",decimalSeparator:".",language:"enGB"};function oq(n){var e;return{maxColumns:n.maxColumns,maxRows:n.maxRows,language:(e=n[sr])===null||e===void 0||(e=e.language)===null||e===void 0?void 0:e.langCode}}function aq(n){return Object.keys(n).reduce((e,t)=>(t!=="hyperformula"&&(e[t]=n[t]),e),{})}function oFe(n){var e;const t=n[sr],i=aq(t!=null&&(e=t.engine)!==null&&e!==void 0&&e.hyperformula?t.engine:{}),r=oq(n);return{...FI,...i,...r}}function aFe(n){var e;const t=n[sr],i=aq(t!=null&&(e=t.engine)!==null&&e!==void 0&&e.hyperformula?t.engine:{}),r=oq(n);return{...i,...r}}function lFe(n,e){return Object.keys(e).some(t=>e[t]!==void 0&&e[t]!==n[t])}function yE(){const n="engine_relationship",e=ua(sr);return e.hasItem(n)||e.register(n,new Map),e.getItem(n)}function aH(){const n="shared_engine_usage",e=ua(sr);return e.hasItem(n)||e.register(n,new Map),e.getItem(n)}function cFe(n){const e=n.getSettings(),t=e[sr],i=t==null?void 0:t.engine;if(t===!0||dn(i))return null;if(typeof i.hyperformula=="function"||typeof i=="function"){var r;return uFe((r=i.hyperformula)!==null&&r!==void 0?r:i,e,n)}else if(typeof i=="object"&&dn(i.hyperformula)){const s=yE(),o=aH().get(i);return s.has(i)||s.set(i,[]),s.get(i).push(n),o&&o.push(n.guid),i.getConfig().licenseKey||i.updateConfig({licenseKey:sq}),(i.getConfig().leapYear1900!==FI.leapYear1900||z1(i.getConfig().nullDate,FI.nullDate)===!1)&&Yt(Kt`If you use HyperFormula with Handsontable, keep the default \`leapYear1900\` and \`nullDate\` 
      settings. Otherwise, HyperFormula's dates may not sync correctly with Handsontable's dates.`),i}return null}function uFe(n,e,t){const i=e[sr],r=oFe(e),s=yE(),o=aH();hFe(n,i.functions),dFe(n,i.language);const a=n.buildEmpty(r);return s.set(a,[t]),o.set(a,[t.guid]),fFe(a,i.namedExpressions),a.on("sheetAdded",()=>{a.rebuildAndRecalculate()}),a.on("sheetRemoved",()=>{a.rebuildAndRecalculate()}),a}function X3(n){var e;const t=yE(),i=t.size===0?[]:Array.from((e=t.get(n))!==null&&e!==void 0?e:[]);return new Map(i.map(r=>[r.getPlugin("formulas").sheetId,r]))}function Z3(n,e){if(n){const t=yE(),i=t.get(n),r=aH(),s=r.get(n);i&&i.includes(e)&&(i.splice(i.indexOf(e),1),i.length===0&&t.delete(n)),s&&s.includes(e.guid)&&(s.splice(s.indexOf(e.guid),1),s.length===0&&(r.delete(n),n.destroy()))}}function hFe(n,e){e&&e.forEach(t=>{const{name:i,plugin:r,translations:s}=t;try{n.registerFunction(i,r,s)}catch(o){Yt(o.message)}})}function dFe(n,e){if(e){const{langCode:t}=e;try{n.registerLanguage(t,e)}catch(i){Yt(i.message)}}}function fFe(n,e){e&&(n.suspendEvaluation(),e.forEach(t=>{const{name:i,expression:r,scope:s,options:o}=t;try{n.addNamedExpression(i,r,s,o)}catch(a){Yt(a.message)}}),n.resumeEvaluation())}function gFe(n,e){return(dn(e)||!n.doesSheetExist(e))&&(e=n.addSheet(e)),e}const lq="DD/MM/YYYY";function cq(n){return typeof n=="string"&&n.charAt(0)==="'"&&n.charAt(1)==="="}function pFe(n){return cq(n)?n.substr(1):n}function mFe(n){return typeof n=="string"&&n.startsWith("=")}function lH(n,e){return typeof n=="string"&&e==="date"}function uq(n,e){return he(n,e,!0).isValid()}function hq(n,e){return he(n,e,!0).format(lq)}function vFe(n,e){return he(n,lq,!0).format(e)}function dq(n,e){const i=new Date(Date.UTC(0,0,n+-1));return he(i).format(e)}function bFe(n,e,t){const i=Array.from(Array(t).keys()).filter(s=>n.includes(s)===!1);if(e===0){var r;return(r=i[e])!==null&&r!==void 0?r:0}return i[e-1]+1}function wFe(n,e){const t=[];return n.forEach(i=>{const r={from:i,to:e};t.forEach(s=>{const o=s.from>s.to,a=s.to<=r.from;s.from>r.from&&a&&o&&(r.from+=1)}),r.from>=e&&(e+=1),t.push(r)}),t}function yFe(n){return n.forEach((e,t)=>{n.slice(t+1).forEach(r=>{const s=r.from<r.to;r.from>e.from&&s&&(r.from-=1)})}),n}function cH(n,e,t){const i=wFe(n,bFe(n,e,t));return yFe(i)}function Wh(n,e,t){CFe(n,e),e.set(n,t)}function CFe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Sn(n,e){return n.get(fq(n,e))}function eu(n,e,t){return n.set(fq(n,e),t),t}function fq(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var mv=new WeakMap,tu=new WeakMap,ts=new WeakMap,EC=new WeakMap,yM=new WeakMap,CM=new WeakMap,xC=new WeakMap;class Q3{constructor(e,t,i){Wh(this,mv,void 0),Wh(this,tu,void 0),Wh(this,ts,void 0),Wh(this,EC,[]),Wh(this,yM,[]),Wh(this,CM,void 0),Wh(this,xC,[]),eu(mv,this,e),eu(tu,this,t),eu(ts,this,i)}setRemovedHfIndexes(e){return eu(xC,this,e.map(t=>{const i=Sn(tu,this).getVisualFromPhysicalIndex(t);return this.getHfIndexFromVisualIndex(i)})),Sn(xC,this)}getRemovedHfIndexes(){return Sn(xC,this)}getHfIndexFromVisualIndex(e){const t=Sn(tu,this).getIndexesSequence(),i=Sn(tu,this).getNotTrimmedIndexes();return t.indexOf(i[e])}syncMoves(e){const i=`move${fr(Sn(mv,this))}s`;Sn(ts,this).getEngine().batch(()=>{e.forEach(r=>{const s=r.from!==r.to,o=r.from+1!==r.to;s&&o&&Sn(ts,this).getEngine()[i](Sn(ts,this).getSheetId(),r.from,1,r.to)})})}storeMovesInformation(e,t,i){i!==!1&&(eu(yM,this,e.map(r=>this.getHfIndexFromVisualIndex(r))),eu(CM,this,this.getHfIndexFromVisualIndex(t)))}calculateAndSyncMoves(e,t){if(Sn(ts,this).isPerformingUndoRedo()||e===!1||t===!1)return;const i=cH(Sn(yM,this),Sn(CM,this),Sn(tu,this).getNumberOfIndexes());Sn(ts,this).getSheetId()===null?Sn(ts,this).getPostponeAction(()=>this.syncMoves(i)):this.syncMoves(i)}getIndexesChangeSyncMethod(){const e=`set${fr(Sn(mv,this))}Order`;return t=>{if(Sn(ts,this).isPerformingUndoRedo())return;const i=Sn(tu,this).getIndexesSequence();if(t==="update"&&i.length>0){const r=Sn(EC,this).map(l=>i.indexOf(l)),s=Sn(ts,this).getEngine().getSheetDimensions(Sn(ts,this).getSheetId());let o;Sn(mv,this)==="row"?o=s.height:o=s.width;const a=r.length;for(let l=a;l<o;l+=1)r.push(l);Sn(ts,this).getEngine()[e](Sn(ts,this).getSheetId(),r)}eu(EC,this,i)}}init(){eu(EC,this,Sn(tu,this).getIndexesSequence())}}function jh(n,e,t){SFe(n,e),e.set(n,t)}function SFe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $l(n,e){return n.get(gq(n,e))}function zh(n,e,t){return n.set(gq(n,e),t),t}function gq(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var TC=new WeakMap,MC=new WeakMap,SM=new WeakMap,_M=new WeakMap,RM=new WeakMap,EM=new WeakMap,xM=new WeakMap;class _Fe{constructor(e,t,i){jh(this,TC,void 0),jh(this,MC,void 0),jh(this,SM,void 0),jh(this,_M,!1),jh(this,RM,!1),jh(this,EM,null),jh(this,xM,null),zh(TC,this,new Q3("row",e,this)),zh(MC,this,new Q3("column",t,this)),zh(SM,this,i)}getForAxis(e){return e==="row"?$l(TC,this):$l(MC,this)}setPerformUndo(e){zh(_M,this,e)}setPerformRedo(e){zh(RM,this,e)}isPerformingUndoRedo(){return $l(_M,this)||$l(RM,this)}getSheetId(){return $l(xM,this)}getEngine(){return $l(EM,this)}getPostponeAction(){return $l(SM,this)}setupSyncEndpoint(e,t){zh(EM,this,e),zh(xM,this,t),$l(TC,this).init(),$l(MC,this).init()}}function RFe(n,e){pq(n,e),e.add(n)}function pg(n,e,t){return(e=EFe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function EFe(n){var e=xFe(n,"string");return typeof e=="symbol"?e:e+""}function xFe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function TM(n,e,t){pq(n,e),e.set(n,t)}function pq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xu(n,e,t){return n.set(Qt(n,e),t),t}function lp(n,e){return n.get(Qt(n,e))}function Qt(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const sr="formulas",TFe=["maxRows","maxColumns","language"],MFe=260;Ie.getSingleton().register("afterNamedExpressionAdded");Ie.getSingleton().register("afterNamedExpressionRemoved");Ie.getSingleton().register("afterSheetAdded");Ie.getSingleton().register("afterSheetRemoved");Ie.getSingleton().register("afterSheetRenamed");Ie.getSingleton().register("afterFormulasValuesUpdate");const im=n=>n==="UndoRedo.undo"||n==="UndoRedo.redo"||n==="auto";var Ac=new WeakMap,uH=new WeakMap,vv=new WeakMap,nn=new WeakSet;class AFe extends Lt{constructor(){var e;super(...arguments),e=this,RFe(this,nn),TM(this,Ac,!1),TM(this,uH,!1),TM(this,vv,[["valuesUpdated",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Qt(nn,e,UFe).call(e,...i)}],["namedExpressionAdded",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Qt(nn,e,GFe).call(e,...i)}],["namedExpressionRemoved",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Qt(nn,e,YFe).call(e,...i)}],["sheetAdded",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Qt(nn,e,KFe).call(e,...i)}],["sheetRenamed",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Qt(nn,e,qFe).call(e,...i)}],["sheetRemoved",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Qt(nn,e,XFe).call(e,...i)}]]),pg(this,"staticRegister",ua("formulas")),pg(this,"engine",null),pg(this,"sheetName",null),pg(this,"indexSyncer",null),pg(this,"rowAxisSyncer",null),pg(this,"columnAxisSyncer",null)}static get PLUGIN_KEY(){return sr}static get PLUGIN_PRIORITY(){return MFe}static get SETTING_KEYS(){return[sr,...TFe]}get sheetId(){return this.sheetName===null?null:this.engine.getSheetId(this.sheetName)}isEnabled(){return!!this.hot.getSettings()[sr]}enablePlugin(){var e,t=this;if(!this.enabled){if(this.engine=(e=cFe(this.hot))!==null&&e!==void 0?e:this.engine,!this.engine){Yt("Missing the required `engine` key in the Formulas settings. Please fill it with either an engine class or an engine instance.");return}if(this.sheetName!==null&&!this.engine.doesSheetExist(this.sheetName)){const i=this.addSheet(this.sheetName,this.hot.getSourceDataArray());i!==!1&&(this.sheetName=i)}this.addHook("beforeLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,J3).call(t,...r)}),this.addHook("afterLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,ej).call(t,...r)}),this.addHook("beforeUpdateData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,J3).call(t,...r)}),this.addHook("afterUpdateData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,ej).call(t,...r)}),this.addHook("modifyData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,kFe).call(t,...r)}),this.addHook("modifySourceData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,DFe).call(t,...r)}),this.addHook("beforeValidate",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,PFe).call(t,...r)}),this.addHook("afterSetSourceDataAtCell",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,NFe).call(t,...r)}),this.addHook("afterSetDataAtCell",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,tj).call(t,...r)}),this.addHook("afterSetDataAtRowProp",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,tj).call(t,...r)}),this.addHook("beforeCreateRow",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,LFe).call(t,...r)}),this.addHook("beforeCreateCol",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,HFe).call(t,...r)}),this.addHook("afterCreateRow",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,BFe).call(t,...r)}),this.addHook("afterCreateCol",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,VFe).call(t,...r)}),this.addHook("beforeRemoveRow",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,$Fe).call(t,...r)}),this.addHook("beforeRemoveCol",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,FFe).call(t,...r)}),this.addHook("afterRemoveRow",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,WFe).call(t,...r)}),this.addHook("afterRemoveCol",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,jFe).call(t,...r)}),this.indexSyncer=new _Fe(this.hot.rowIndexMapper,this.hot.columnIndexMapper,i=>{this.hot.addHookOnce("init",()=>{i()})}),this.rowAxisSyncer=this.indexSyncer.getForAxis("row"),this.columnAxisSyncer=this.indexSyncer.getForAxis("column"),this.hot.addHook("afterRowSequenceChange",this.rowAxisSyncer.getIndexesChangeSyncMethod()),this.hot.addHook("afterColumnSequenceChange",this.columnAxisSyncer.getIndexesChangeSyncMethod()),this.hot.addHook("beforeRowMove",(i,r,s,o)=>{this.rowAxisSyncer.storeMovesInformation(i,r,o)}),this.hot.addHook("beforeColumnMove",(i,r,s,o)=>{this.columnAxisSyncer.storeMovesInformation(i,r,o)}),this.hot.addHook("afterRowMove",(i,r,s,o,a)=>{this.rowAxisSyncer.calculateAndSyncMoves(o,a)}),this.hot.addHook("afterColumnMove",(i,r,s,o,a)=>{this.columnAxisSyncer.calculateAndSyncMoves(o,a)}),this.hot.addHook("beforeColumnFreeze",(i,r)=>{this.columnAxisSyncer.storeMovesInformation([i],this.hot.getSettings().fixedColumnsStart,r)}),this.hot.addHook("afterColumnFreeze",(i,r)=>{this.columnAxisSyncer.calculateAndSyncMoves(r,r)}),this.hot.addHook("beforeColumnUnfreeze",(i,r)=>{this.columnAxisSyncer.storeMovesInformation([i],this.hot.getSettings().fixedColumnsStart-1,r)}),this.hot.addHook("afterColumnUnfreeze",(i,r)=>{this.columnAxisSyncer.calculateAndSyncMoves(r,r)}),this.addHook("afterCellMetaReset",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,OFe).call(t,...r)}),this.addHook("beforeUndo",()=>{this.indexSyncer.setPerformUndo(!0),this.engine.undo()}),this.addHook("beforeRedo",()=>{this.indexSyncer.setPerformRedo(!0),this.engine.redo()}),this.addHook("afterUndo",()=>{this.indexSyncer.setPerformUndo(!1)}),this.addHook("afterUndo",()=>{this.indexSyncer.setPerformRedo(!1)}),this.addHook("afterDetachChild",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,zFe).call(t,...r)}),this.addHook("beforeAutofill",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Qt(nn,t,IFe).call(t,...r)}),lp(vv,this).forEach(i=>{let[r,s]=i;return this.engine.on(r,s)}),super.enablePlugin()}}disablePlugin(){lp(vv,this).forEach(e=>{let[t,i]=e;return this.engine.off(t,i)}),Z3(this.engine,this.hot),this.engine=null,super.disablePlugin()}updatePlugin(e){const t=aFe(this.hot.getSettings());lFe(this.engine.getConfig(),t)&&this.engine.updateConfig(t);const i=this.hot.getSettings()[sr];if(ke(i)&&ke(i.sheetName)&&i.sheetName!==this.sheetName&&this.switchSheet(i.sheetName),!e.data&&this.sheetName===null){const r=this.hot.getSettings()[sr].sheetName;r&&this.engine.doesSheetExist(r)?this.switchSheet(this.sheetName):this.sheetName=this.addSheet(r??void 0,this.hot.getSourceDataArray())}super.updatePlugin(e)}destroy(){lp(vv,this).forEach(e=>{var t;let[i,r]=e;return(t=this.engine)===null||t===void 0?void 0:t.off(i,r)}),Xu(vv,this,null),Z3(this.engine,this.hot),this.engine=null,super.destroy()}addSheet(e,t){if(ke(t)&&!lY(t))return Yt("The provided data should be an array of arrays."),!1;if(e!=null&&this.engine.doesSheetExist(e))return Yt("Sheet with the provided name already exists."),!1;try{const i=this.engine.addSheet(e??void 0);return t&&this.engine.setSheetContent(this.engine.getSheetId(i),t),i}catch(i){return Yt(i.message),!1}}switchSheet(e){if(!this.engine.doesSheetExist(e)){ND(`The sheet named \`${e}\` does not exist, switch aborted.`);return}this.sheetName=e;const t=this.engine.getSheetSerialized(this.sheetId);t.length>0&&this.hot.loadData(t,`${fr(sr)}.switchSheet`)}getCellType(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.sheetId;const r=this.hot.toPhysicalRow(e),s=this.hot.toPhysicalColumn(t);return r!==null&&s!==null?this.engine.getCellType({sheet:i,row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t)}):"EMPTY"}isFormulaCellType(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.sheetId;return this.engine.doesCellHaveFormula({sheet:i,row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t)})}renderDependentSheets(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=new Set;e.forEach(r=>{var s;const o=r==null||(s=r.address)===null||s===void 0?void 0:s.sheet;o!==void 0&&(i.has(o)||i.add(o))}),X3(this.engine).forEach((r,s)=>{if((t||s!==this.sheetId)&&i.has(s)){var o;r.render(),(o=r.view)===null||o===void 0||o.adjustElementsSize()}})}validateDependentCells(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=s=>{var o;const{row:a,col:l,sheet:c}=(o=s==null?void 0:s.address)!==null&&o!==void 0?o:{};return ke(c)?`${c}:${a}x${l}`:""},r=new Set(t.map(s=>i(s)));e.forEach(s=>{var o,a;const{row:l,col:c}=(o=s.address)!==null&&o!==void 0?o:{};if(ke(l)===!1||ke(c)===!1||l>=this.hot.countRows()||c>=this.hot.countCols())return;const u=s==null||(a=s.address)===null||a===void 0?void 0:a.sheet,h=i(s);if(u!==void 0&&!r.has(h)){const d=X3(this.engine).get(u);if(!d)return;d.validateCell(d.getDataAtCell(l,c),d.getCellMeta(l,c),()=>{})}})}syncChangeWithEngine(e,t,i){const r={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(r)){Yt(`Not possible to set cell data at ${JSON.stringify(r)}`);return}const s=this.hot.getCellMeta(e,t);return lH(i,s.type)&&(uq(i,s.dateFormat)?i=hq(i,s.dateFormat):mFe(i)===!1&&(i=`'${i}`)),this.engine.setCellContents(r,i)}}function PFe(n,e,t){const i=this.hot.propToCol(t);if(this.isFormulaCellType(e,i)){const r={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(i),sheet:this.sheetId},s=this.hot.getCellMeta(e,i);let o=this.engine.getCellValue(r);return s.type==="date"&&rr(o)&&(o=dq(o,s.dateFormat)),typeof o=="object"&&o!==null?o.value:o}return n}function IFe(n,e,t){const{row:i,col:r}=e.getTopStartCorner(),{row:s,col:o}=e.getBottomEndCorner(),{row:a,col:l}=t.getTopStartCorner(),{row:c,col:u}=t.getBottomEndCorner(),h={start:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(i),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(r),sheet:this.sheetId},end:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(s),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(o),sheet:this.sheetId}},d={start:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(a),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(l),sheet:this.sheetId},end:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(c),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(u),sheet:this.sheetId}};if(this.engine.isItPossibleToSetCellContents(d)===!1)return!1;const f=this.engine.getFillRangeData(h,d),{row:g,col:p}=h.start,{row:m,col:b}=h.end,y=m-g+1,w=b-p+1;for(let R=0;R<f.length;R+=1)for(let E=0;E<f[R].length;E+=1){const _=f[R][E],T=g+R%y,I=p+E%w,x=this.hot.getCellMeta(T,I);lH(_,x.type)&&(_.startsWith("'")?f[R][E]=_.slice(1):this.isFormulaCellType(T,I,this.sheetId)===!1&&(f[R][E]=vFe(_,x.dateFormat)))}return f}function J3(n,e){(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"").includes(fr(sr))||Xu(uH,this,dn(this.hot.getSettings().data))}function OFe(){const n=this.hot.getSourceDataArray();let e=!1;n.forEach((t,i)=>{t.forEach((r,s)=>{const o=this.hot.getCellMeta(i,s),a=o.dateFormat;lH(r,o.type)&&(e=!0,uq(r,a)?n[i][s]=hq(r,a):this.isFormulaCellType(i,s)===!1&&(n[i][s]=`'${r}`))})}),e===!0&&(Xu(Ac,this,!0),this.engine.setSheetContent(this.sheetId,n),Xu(Ac,this,!1))}function ej(n,e){if(!(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"").includes(fr(sr)))if(this.sheetName=gFe(this.engine,this.hot.getSettings()[sr].sheetName),lp(uH,this))this.switchSheet(this.sheetName);else{const i=this.hot.getSourceDataArray();if(this.engine.isItPossibleToReplaceSheetContent(this.sheetId,i)){Xu(Ac,this,!0);const r=this.engine.setSheetContent(this.sheetId,i);this.indexSyncer.setupSyncEndpoint(this.engine,this.sheetId),this.renderDependentSheets(r),Xu(Ac,this,!1)}}}function kFe(n,e,t,i){if(i!=="get"||lp(Ac,this)||this.sheetName===null||!this.engine.doesSheetExist(this.sheetName))return;const r=this.hot.toVisualRow(n);if(r===null||e===null)return;if(!this.isFormulaCellType(r,e)&&this.getCellType(r,e)!=="ARRAY"){cq(t.value)&&(t.value=pFe(t.value));return}const o={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(e),sheet:this.sheetId};let a=this.engine.getCellValue(o),l=this.hot.getCellsMeta().find(u=>u.visualRow===r&&u.visualCol===e);l===void 0&&(l={}),l.type==="date"&&rr(a)&&(a=dq(a,l.dateFormat));const c=typeof a=="object"&&a!==null?a.value:a;t.value=c}function DFe(n,e,t,i){if(i!=="get"||lp(Ac,this)||this.sheetName===null||!this.engine.doesSheetExist(this.sheetName))return;const r=this.hot.toVisualRow(n),s=this.hot.propToCol(e);if(r===null||s===null||!this.isFormulaCellType(r,s)&&this.getCellType(r,s)!=="ARRAY")return;const a=this.engine.getSheetDimensions(this.engine.getSheetId(this.sheetName));if(a.width===0&&a.height===0)return;const l={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(s),sheet:this.sheetId};t.value=this.engine.getCellSerialized(l)}function tj(n,e){if(im(e))return;const t=[],i=[],r=this.engine.batch(()=>{n.forEach(s=>{let[o,a,,l]=s;const c=this.hot.propToCol(a),u=this.hot.toPhysicalRow(o),h=this.hot.toPhysicalColumn(c),d={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(o),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(c),sheet:this.sheetId};u!==null&&h!==null?this.syncChangeWithEngine(o,c,l):t.push([o,c,l]),i.push({address:d})})});t.length&&this.hot.addHookOnce("afterChange",()=>{const s=this.engine.batch(()=>{t.forEach(o=>{let[a,l,c]=o;this.syncChangeWithEngine(a,l,c)})});this.renderDependentSheets(s,!0)}),this.renderDependentSheets(r),this.validateDependentCells(r,i)}function NFe(n,e){if(im(e))return;const t=[],i=[];n.forEach(r=>{let[s,o,,a]=r;const l=this.hot.propToCol(o);if(!rr(l))return;const c={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(s),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(l),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(c)){Yt(`Not possible to set source cell data at ${JSON.stringify(c)}`);return}i.push({address:c}),t.push(...this.engine.setCellContents(c,a))}),this.renderDependentSheets(t),this.validateDependentCells(t,i)}function LFe(n,e){let t=this.rowAxisSyncer.getHfIndexFromVisualIndex(n);if(n>=this.hot.countRows()&&(t=n),this.sheetId===null||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddRows(this.sheetId,[t,e]))return!1}function HFe(n,e){let t=this.columnAxisSyncer.getHfIndexFromVisualIndex(n);if(n>=this.hot.countCols()&&(t=n),this.sheetId===null||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddColumns(this.sheetId,[t,e]))return!1}function $Fe(n,e,t){return this.rowAxisSyncer.setRemovedHfIndexes(t).every(s=>this.engine.isItPossibleToRemoveRows(this.sheetId,[s,1]))===!1?!1:void 0}function FFe(n,e,t){return this.columnAxisSyncer.setRemovedHfIndexes(t).every(s=>this.engine.isItPossibleToRemoveColumns(this.sheetId,[s,1]))===!1?!1:void 0}function BFe(n,e,t){if(im(t))return;const i=this.engine.addRows(this.sheetId,[this.rowAxisSyncer.getHfIndexFromVisualIndex(n),e]);this.renderDependentSheets(i)}function VFe(n,e,t){if(im(t))return;const i=this.engine.addColumns(this.sheetId,[this.columnAxisSyncer.getHfIndexFromVisualIndex(n),e]);this.renderDependentSheets(i)}function WFe(n,e,t,i){if(im(i))return;const r=this.rowAxisSyncer.getRemovedHfIndexes().sort((o,a)=>a-o),s=this.engine.batch(()=>{r.forEach(o=>{this.engine.removeRows(this.sheetId,[o,1])})});this.renderDependentSheets(s)}function jFe(n,e,t,i){if(im(i))return;const r=this.columnAxisSyncer.getRemovedHfIndexes().sort((o,a)=>a-o),s=this.engine.batch(()=>{r.forEach(o=>{this.engine.removeColumns(this.sheetId,[o,1])})});this.renderDependentSheets(s)}function zFe(n,e,t){var i;Xu(Ac,this,!0);const r=this.hot.getSourceDataArray(t,0,t+(((i=e.__children)===null||i===void 0?void 0:i.length)||0),this.hot.countSourceCols());Xu(Ac,this,!1),r.forEach((s,o)=>{s.forEach((a,l)=>{this.engine.setCellContents({col:l,row:t+o,sheet:this.sheetId},[[a]])})})}function UFe(n){this.hot.runHooks("afterFormulasValuesUpdate",n)}function GFe(n,e){this.hot.runHooks("afterNamedExpressionAdded",n,e)}function YFe(n,e){this.hot.runHooks("afterNamedExpressionRemoved",n,e)}function KFe(n){this.hot.runHooks("afterSheetAdded",n)}function qFe(n,e){this.sheetName=e,this.hot.runHooks("afterSheetRenamed",n,e)}function XFe(n,e){this.hot.runHooks("afterSheetRemoved",n,e)}function ZFe(n){return{key:"hidden_columns_hide",name(){const e=this.getSelectedLast();let t=0;if(Array.isArray(e)){const[,i,,r]=e;i-r!==0&&(t=1)}return this.getTranslatedPhrase(GN,t)},callback(){const{from:e,to:t}=this.getSelectedRangeLast(),i=Math.max(Math.min(e.col,t.col),0),r=Math.max(e.col,t.col),s=[];for(let l=i;l<=r;l+=1)s.push(l);n.hideColumns(s);const o=s[s.length-1],a=this.columnIndexMapper.getNearestNotHiddenIndex(o,1,!0);Number.isInteger(a)&&a>=0?this.selectColumns(a):this.deselectCell(),this.render(),this.view.adjustElementsSize()},disabled:!1,hidden(){return!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())}}}function QFe(n){const e=[];return{key:"hidden_columns_show",name(){const t=e.length>1?1:0;return this.getTranslatedPhrase(YN,t)},callback(){var t,i;if(e.length===0)return;let r=e[0],s=e[e.length-1];r=(t=this.columnIndexMapper.getNearestNotHiddenIndex(r-1,-1))!==null&&t!==void 0?t:0,s=(i=this.columnIndexMapper.getNearestNotHiddenIndex(s+1,1))!==null&&i!==void 0?i:this.countCols()-1,n.showColumns(e),this.render(),this.view.adjustElementsSize(),s-r+1===this.countCols()||this.selectColumns(r,s)},disabled:!1,hidden(){const t=vt(n.getHiddenColumns(),h=>this.toPhysicalColumn(h));if(!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())||t.length<1)return!0;e.length=0;const i=this.getSelectedRangeLast(),r=i.getTopStartCorner().col,s=i.getBottomEndCorner().col,o=this.columnIndexMapper,a=o.getRenderableFromVisualIndex(r),l=o.getRenderableFromVisualIndex(s),c=o.getNotTrimmedIndexes(),u=[];if(r!==s){const h=s-r+1,d=l-a+1;if(h>d){const f=c.slice(r,s+1);u.push(...f.filter(g=>t.includes(g)))}}else if(a===0&&a<r)u.push(...c.slice(0,r));else if(a===null)u.push(...c.slice(0,this.countCols()));else{const h=this.countCols()-1,d=o.getRenderableFromVisualIndex(o.getNearestNotHiddenIndex(h,-1));l===d&&h>s&&u.push(...c.slice(s+1))}return j(u,h=>{e.push(this.toVisualColumn(h))}),e.length===0}}}function JFe(n,e){mq(n,e),e.add(n)}function nj(n,e,t){mq(n,e),e.set(n,t)}function mq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ps(n,e){return n.get(uu(n,e))}function bv(n,e,t){return n.set(uu(n,e),t),t}function uu(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ie.getSingleton().register("beforeHideColumns");Ie.getSingleton().register("afterHideColumns");Ie.getSingleton().register("beforeUnhideColumns");Ie.getSingleton().register("afterUnhideColumns");const MM="hiddenColumns",eBe=310;var qa=new WeakMap,Ca=new WeakMap,Uh=new WeakSet;class tBe extends Lt{constructor(){super(...arguments),JFe(this,Uh),nj(this,qa,{}),nj(this,Ca,null)}static get PLUGIN_KEY(){return MM}static get PLUGIN_PRIORITY(){return eBe}isEnabled(){return!!this.hot.getSettings()[MM]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[MM];lt(t)&&(bv(qa,this,t),dn(t.copyPasteEnabled)&&(t.copyPasteEnabled=!0)),bv(Ca,this,new J1),ps(Ca,this).addLocalHook("init",()=>uu(Uh,this,aBe).call(this)),this.hot.columnIndexMapper.registerMap(this.pluginName,ps(Ca,this)),this.addHook("afterContextMenuDefaultOptions",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return uu(Uh,e,oBe).call(e,...r)}),this.addHook("afterGetCellMeta",(i,r,s)=>uu(Uh,this,iBe).call(this,i,r,s)),this.addHook("modifyColWidth",(i,r)=>uu(Uh,this,nBe).call(this,i,r),2),this.addHook("afterGetColHeader",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return uu(Uh,e,sBe).call(e,...r)}),this.addHook("modifyCopyableRange",i=>uu(Uh,this,rBe).call(this,i)),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),bv(qa,this,{}),super.disablePlugin(),this.resetCellsMeta()}showColumns(e){const t=this.getHiddenColumns(),i=this.isValidConfig(e);let r=t;const s=ps(Ca,this).getValues().slice(),o=e.length>0;if(i&&o){const l=e.map(c=>this.hot.toPhysicalColumn(c));j(l,c=>{s[c]=!1}),r=ci(s,(c,u,h)=>(u&&c.push(this.hot.toVisualColumn(h)),c),[])}this.hot.runHooks("beforeUnhideColumns",t,r,i&&o)!==!1&&(i&&o&&ps(Ca,this).setValues(s),this.hot.view.adjustElementsSize(),this.hot.runHooks("afterUnhideColumns",t,r,i&&o,i&&r.length<t.length))}showColumn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.showColumns(t)}hideColumns(e){const t=this.getHiddenColumns(),i=this.isValidConfig(e);let r=t;i&&(r=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeHideColumns",t,r,i)!==!1&&(i&&this.hot.batchExecution(()=>{j(e,o=>{ps(Ca,this).setValueAtIndex(this.hot.toPhysicalColumn(o),!0)})},!0),this.hot.runHooks("afterHideColumns",t,r,i,i&&r.length>t.length))}hideColumn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.hideColumns(t)}getHiddenColumns(){return vt(ps(Ca,this).getHiddenIndexes(),e=>this.hot.toVisualColumn(e))}isHidden(e){return ps(Ca,this).getValueAtIndex(this.hot.toPhysicalColumn(e))||!1}isValidConfig(e){const t=this.hot.countCols();return Array.isArray(e)&&e.length>0?e.every(i=>Number.isInteger(i)&&i>=0&&i<t):!1}resetCellsMeta(){j(this.hot.getCellsMeta(),e=>{e&&(e.skipColumnOnPaste=!1)})}destroy(){bv(qa,this,null),bv(Ca,this,null),super.destroy()}}function nBe(n,e){if(this.isHidden(e))return 0;if(ps(qa,this).indicators&&(this.isHidden(e+1)||this.isHidden(e-1))&&typeof n=="number"&&this.hot.hasColHeaders())return n+15}function iBe(n,e,t){if(ps(qa,this).copyPasteEnabled===!1&&this.isHidden(e)&&(t.skipColumnOnPaste=!0),this.isHidden(e-1))t.className=t.className||"",t.className.indexOf("afterHiddenColumn")===-1&&(t.className+=" afterHiddenColumn");else if(t.className){const i=t.className.split(" ");if(i.length>0){const r=i.indexOf("afterHiddenColumn");r>-1&&i.splice(r,1),t.className=i.join(" ")}}}function rBe(n){if(ps(qa,this).copyPasteEnabled)return n;const e=[],t=(i,r,s,o)=>{e.push({startRow:i,endRow:r,startCol:s,endCol:o})};return j(n,i=>{let r=!0,s=0;He(i.startCol,i.endCol,o=>{this.isHidden(o)?(r||t(i.startRow,i.endRow,s,o-1),r=!0):(r&&(s=o),o===i.endCol&&t(i.startRow,i.endRow,s,o),r=!1)})}),e}function sBe(n,e){if(!ps(qa,this).indicators||n<0)return;const t=[];n>=1&&this.isHidden(n-1)&&t.push("afterHiddenColumn"),n<this.hot.countCols()-1&&this.isHidden(n+1)&&t.push("beforeHiddenColumn"),ue(e,t)}function oBe(n){n.items.push({name:ht},ZFe(this),QFe(this))}function aBe(){Array.isArray(ps(qa,this).columns)&&this.hideColumns(ps(qa,this).columns)}function lBe(n){return{key:"hidden_rows_hide",name(){const e=this.getSelectedLast();let t=0;if(Array.isArray(e)){const[i,,r]=e;i-r!==0&&(t=1)}return this.getTranslatedPhrase(KN,t)},callback(){const{from:e,to:t}=this.getSelectedRangeLast(),i=Math.max(Math.min(e.row,t.row),0),r=Math.max(e.row,t.row),s=[];for(let l=i;l<=r;l+=1)s.push(l);n.hideRows(s);const o=s[s.length-1],a=this.rowIndexMapper.getNearestNotHiddenIndex(o,1,!0);Number.isInteger(a)&&a>=0?this.selectRows(a):this.deselectCell(),this.render(),this.view.adjustElementsSize()},disabled:!1,hidden(){return!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())}}}function cBe(n){const e=[];return{key:"hidden_rows_show",name(){const t=e.length>1?1:0;return this.getTranslatedPhrase(qN,t)},callback(){var t,i;if(e.length===0)return;let r=e[0],s=e[e.length-1];r=(t=this.rowIndexMapper.getNearestNotHiddenIndex(r-1,-1))!==null&&t!==void 0?t:0,s=(i=this.rowIndexMapper.getNearestNotHiddenIndex(s+1,1))!==null&&i!==void 0?i:this.countRows()-1,n.showRows(e),this.render(),this.view.adjustElementsSize(),s-r+1===this.countRows()||this.selectRows(r,s)},disabled:!1,hidden(){const t=vt(n.getHiddenRows(),h=>this.toPhysicalRow(h));if(!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())||t.length<1)return!0;e.length=0;const i=this.getSelectedRangeLast(),r=i.getTopStartCorner().row,s=i.getBottomEndCorner().row,o=this.rowIndexMapper,a=o.getRenderableFromVisualIndex(r),l=o.getRenderableFromVisualIndex(s),c=o.getNotTrimmedIndexes(),u=[];if(r!==s){const h=s-r+1,d=l-a+1;if(h>d){const f=c.slice(r,s+1);u.push(...f.filter(g=>t.includes(g)))}}else if(a===0&&a<r)u.push(...c.slice(0,r));else if(a===null)u.push(...c.slice(0,this.countRows()));else{const h=this.countRows()-1,d=o.getRenderableFromVisualIndex(o.getNearestNotHiddenIndex(h,-1));l===d&&h>s&&u.push(...c.slice(s+1))}return j(u,h=>{e.push(this.toVisualRow(h))}),e.length===0}}}function uBe(n,e){vq(n,e),e.add(n)}function ij(n,e,t){vq(n,e),e.set(n,t)}function vq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ks(n,e){return n.get(hu(n,e))}function wv(n,e,t){return n.set(hu(n,e),t),t}function hu(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ie.getSingleton().register("beforeHideRows");Ie.getSingleton().register("afterHideRows");Ie.getSingleton().register("beforeUnhideRows");Ie.getSingleton().register("afterUnhideRows");const AM="hiddenRows",hBe=320;var pc=new WeakMap,Sa=new WeakMap,Gh=new WeakSet;class dBe extends Lt{constructor(){super(...arguments),uBe(this,Gh),ij(this,pc,{}),ij(this,Sa,null)}static get PLUGIN_KEY(){return AM}static get PLUGIN_PRIORITY(){return hBe}isEnabled(){return!!this.hot.getSettings()[AM]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[AM];lt(t)&&(wv(pc,this,t),dn(t.copyPasteEnabled)&&(t.copyPasteEnabled=!0)),wv(Sa,this,new J1),Ks(Sa,this).addLocalHook("init",()=>hu(Gh,this,bBe).call(this)),this.hot.rowIndexMapper.registerMap(this.pluginName,Ks(Sa,this)),this.addHook("afterContextMenuDefaultOptions",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return hu(Gh,e,vBe).call(e,...r)}),this.addHook("afterGetCellMeta",(i,r,s)=>hu(Gh,this,gBe).call(this,i,r,s)),this.addHook("modifyRowHeight",(i,r)=>hu(Gh,this,fBe).call(this,i,r)),this.addHook("afterGetRowHeader",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return hu(Gh,e,mBe).call(e,...r)}),this.addHook("modifyCopyableRange",i=>hu(Gh,this,pBe).call(this,i)),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap(this.pluginName),wv(pc,this,{}),super.disablePlugin(),this.resetCellsMeta()}showRows(e){const t=this.getHiddenRows(),i=this.isValidConfig(e);let r=t;const s=Ks(Sa,this).getValues().slice(),o=e.length>0;if(i&&o){const l=e.map(c=>this.hot.toPhysicalRow(c));j(l,c=>{s[c]=!1}),r=ci(s,(c,u,h)=>(u&&c.push(this.hot.toVisualRow(h)),c),[])}this.hot.runHooks("beforeUnhideRows",t,r,i&&o)!==!1&&(i&&o&&Ks(Sa,this).setValues(s),this.hot.runHooks("afterUnhideRows",t,r,i&&o,i&&r.length<t.length))}showRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.showRows(t)}hideRows(e){const t=this.getHiddenRows(),i=this.isValidConfig(e);let r=t;i&&(r=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeHideRows",t,r,i)!==!1&&(i&&this.hot.batchExecution(()=>{j(e,o=>{Ks(Sa,this).setValueAtIndex(this.hot.toPhysicalRow(o),!0)})},!0),this.hot.runHooks("afterHideRows",t,r,i,i&&r.length>t.length))}hideRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.hideRows(t)}getHiddenRows(){return vt(Ks(Sa,this).getHiddenIndexes(),e=>this.hot.toVisualRow(e))}isHidden(e){return Ks(Sa,this).getValueAtIndex(this.hot.toPhysicalRow(e))||!1}isValidConfig(e){const t=this.hot.countRows();return Array.isArray(e)&&e.length>0?e.every(i=>Number.isInteger(i)&&i>=0&&i<t):!1}resetCellsMeta(){j(this.hot.getCellsMeta(),e=>{e&&(e.skipRowOnPaste=!1)})}destroy(){wv(pc,this,null),wv(Sa,this,null),super.destroy()}}function fBe(n,e){return this.isHidden(e)?0:n}function gBe(n,e,t){if(Ks(pc,this).copyPasteEnabled===!1&&this.isHidden(n)&&(t.skipRowOnPaste=!0),this.isHidden(n-1))t.className=t.className||"",t.className.indexOf("afterHiddenRow")===-1&&(t.className+=" afterHiddenRow");else if(t.className){const i=t.className.split(" ");if(i.length>0){const r=i.indexOf("afterHiddenRow");r>-1&&i.splice(r,1),t.className=i.join(" ")}}}function pBe(n){if(Ks(pc,this).copyPasteEnabled)return n;const e=[],t=(i,r,s,o)=>{e.push({startRow:i,endRow:r,startCol:s,endCol:o})};return j(n,i=>{let r=!0,s=0;He(i.startRow,i.endRow,o=>{this.isHidden(o)?(r||t(s,o-1,i.startCol,i.endCol),r=!0):(r&&(s=o),o===i.endRow&&t(s,o,i.startCol,i.endCol),r=!1)})}),e}function mBe(n,e){if(!Ks(pc,this).indicators||n<0)return;const t=[];n>=1&&this.isHidden(n-1)&&t.push("afterHiddenRow"),n<this.hot.countRows()-1&&this.isHidden(n+1)&&t.push("beforeHiddenRow"),ue(e,t)}function vBe(n){n.items.push({name:ht},lBe(this),cBe(this))}function bBe(){Array.isArray(Ks(pc,this).rows)&&this.hideRows(Ks(pc,this).rows)}function wBe(n){return{key:"freeze_column",name(){return this.getTranslatedPhrase(AN)},callback(e,t){const[{start:{col:i}}]=t;n.freezeColumn(i),this.render(),this.view.adjustElementsSize()},hidden(){const e=this.getSelectedRange();let t=!1;return(e===void 0||e.length>1||e[0].from.col!==e[0].to.col||e[0].from.col<=this.getSettings().fixedColumnsStart-1)&&(t=!0),t}}}function yBe(n){return{key:"unfreeze_column",name(){return this.getTranslatedPhrase(PN)},callback(e,t){const[{start:{col:i}}]=t;n.unfreezeColumn(i),this.render(),this.view.adjustElementsSize()},hidden(){const e=this.getSelectedRange();let t=!1;return(e===void 0||e.length>1||e[0].from.col!==e[0].to.col||e[0].from.col>=this.getSettings().fixedColumnsStart)&&(t=!0),t}}}function CBe(n,e){bq(n,e),e.add(n)}function SBe(n,e,t){bq(n,e),e.set(n,t)}function bq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function BI(n,e){return n.get(vR(n,e))}function PM(n,e,t){return n.set(vR(n,e),t),t}function vR(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ie.getSingleton().register("beforeColumnFreeze");Ie.getSingleton().register("afterColumnFreeze");Ie.getSingleton().register("beforeColumnUnfreeze");Ie.getSingleton().register("afterColumnUnfreeze");const rj="manualColumnFreeze",_Be=110;var ud=new WeakMap,IM=new WeakSet;class RBe extends Lt{constructor(){super(...arguments),CBe(this,IM),SBe(this,ud,!1)}static get PLUGIN_KEY(){return rj}static get PLUGIN_PRIORITY(){return _Be}isEnabled(){return!!this.hot.getSettings()[rj]}enablePlugin(){this.enabled||(this.addHook("afterContextMenuDefaultOptions",e=>vR(IM,this,EBe).call(this,e)),this.addHook("beforeColumnMove",(e,t)=>vR(IM,this,xBe).call(this,e,t)),super.enablePlugin())}disablePlugin(){PM(ud,this,!1),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}freezeColumn(e){const t=this.hot.getSettings(),i=t.fixedColumnsStart<this.hot.countCols()&&e>t.fixedColumnsStart-1;BI(ud,this)||PM(ud,this,!0),this.hot.runHooks("beforeColumnFreeze",e,i)!==!1&&(i&&(this.hot.columnIndexMapper.moveIndexes(e,t.fixedColumnsStart),t._fixedColumnsStart+=1),this.hot.runHooks("afterColumnFreeze",e,i))}unfreezeColumn(e){const t=this.hot.getSettings(),i=t.fixedColumnsStart>0&&e<=t.fixedColumnsStart-1;BI(ud,this)||PM(ud,this,!0),this.hot.runHooks("beforeColumnUnfreeze",e,i)!==!1&&(i&&(t._fixedColumnsStart-=1,this.hot.columnIndexMapper.moveIndexes(e,t.fixedColumnsStart)),this.hot.runHooks("afterColumnUnfreeze",e,i))}}function EBe(n){n.items.push({name:"---------"},wBe(this),yBe(this))}function xBe(n,e){if(BI(ud,this)){const t=this.hot.getSettings().fixedColumnsStart;if(e<t||n.some(i=>i<t))return!1}}function AC(n,e,t){return(e=TBe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function TBe(n){var e=MBe(n,"string");return typeof e=="symbol"?e:e+""}function MBe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const OM=0,sj=1,oj=2,mg="px";let wq=class{constructor(e){AC(this,"hot",void 0),AC(this,"_element",null),AC(this,"state",OM),AC(this,"inlineProperty",void 0),this.hot=e,this.inlineProperty=e.isRtl()?"right":"left"}appendTo(e){e.appendChild(this._element),this.state=oj}build(){this.state===OM&&(this._element=this.hot.rootDocument.createElement("div"),this.state=sj)}destroy(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=OM}isAppended(){return this.state===oj}isBuilt(){return this.state>=sj}setPosition(e,t){rr(e)&&(this._element.style.top=e+mg),rr(t)&&(this._element.style[this.inlineProperty]=t+mg)}getPosition(){const e=this._element.style;return{top:e.top?parseInt(e.top,10):0,start:e[this.inlineProperty]?parseInt(e[this.inlineProperty],10):0}}setSize(e,t){rr(e)&&(this._element.style.width=e+mg),rr(t)&&(this._element.style.height=t+mg)}getSize(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}setOffset(e,t){rr(e)&&(this._element.style.marginTop=e+mg),rr(t)&&(this._element.style[`margin${fr(this.inlineProperty)}`]=t+mg)}getOffset(){const e=this._element.style,t=`margin${fr(this.inlineProperty)}`;return{top:e.marginTop?parseInt(e.marginTop,10):0,start:e[t]?parseInt(e[t],10):0}}};const ABe="ht__manualColumnMove--backlight";let PBe=class extends wq{build(){super.build(),ue(this._element,ABe)}};const IBe="ht__manualColumnMove--guideline";let OBe=class extends wq{build(){super.build(),ue(this._element,IBe)}};function kBe(n,e){yq(n,e),e.add(n)}function Io(n,e,t){yq(n,e),e.set(n,t)}function yq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xr(n,e,t){return n.set(du(n,e),t),t}function Ne(n,e){return n.get(du(n,e))}function du(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ie.getSingleton().register("beforeColumnMove");Ie.getSingleton().register("afterColumnMove");const kM="manualColumnMove",DBe=120,aj="ht__manualColumnMove",bR="show-ui",VI="on-moving--columns",WI="after-selection--columns";var xr=new WeakMap,bu=new WeakMap,mc=new WeakMap,LS=new WeakMap,Au=new WeakMap,Rr=new WeakMap,PC=new WeakMap,js=new WeakMap,Og=new WeakMap,wR=new WeakMap,Db=new WeakMap,Yh=new WeakSet;class NBe extends Lt{constructor(){super(...arguments),kBe(this,Yh),Io(this,xr,new PBe(this.hot)),Io(this,bu,new OBe(this.hot)),Io(this,mc,[]),Io(this,LS,0),Io(this,Au,!1),Io(this,Rr,{}),Io(this,PC,void 0),Io(this,js,void 0),Io(this,Og,void 0),Io(this,wR,void 0),Io(this,Db,void 0)}static get PLUGIN_KEY(){return kM}static get PLUGIN_PRIORITY(){return DBe}isEnabled(){return!!this.hot.getSettings()[kM]}enablePlugin(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return du(Yh,e,LBe).call(e,...i)}),this.addHook("beforeOnCellMouseOver",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return du(Yh,e,$Be).call(e,...i)}),this.addHook("afterScrollVertically",()=>du(Yh,this,BBe).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return du(Yh,e,VBe).call(e,...i)}),this.buildPluginUI(),this.registerEvents(),ue(this.hot.rootElement,aj),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),super.updatePlugin()}disablePlugin(){Ze(this.hot.rootElement,aj),this.unregisterEvents(),Ne(xr,this).destroy(),Ne(bu,this).destroy(),super.disablePlugin()}moveColumn(e,t){return this.moveColumns([e],t)}moveColumns(e,t){const i=Ne(PC,this),r=this.isMovePossible(e,t),s=this.hot.runHooks("beforeColumnMove",e,t,i,r);if(Xr(PC,this,void 0),s===!1)return;r&&this.hot.columnIndexMapper.moveIndexes(e,t);const o=r&&this.isColumnOrderChanged(e,t);return this.hot.runHooks("afterColumnMove",e,t,i,r,o),o}dragColumn(e,t){return this.dragColumns([e],t)}dragColumns(e,t){const i=this.countFinalIndex(e,t);return Xr(PC,this,t),this.moveColumns(e,i)}isMovePossible(e,t){const i=this.hot.columnIndexMapper.getNotTrimmedIndexesLength(),r=e.length+t>i,s=t<0,o=e.some(l=>l<0),a=e.some(l=>l>=i);return!(r||s||o||a)}isColumnOrderChanged(e,t){return e.some((i,r)=>i-r!==t)}countFinalIndex(e,t){const i=ci(e,(r,s)=>(s<t&&(r+=1),r),0);return t-i}getColumnsWidth(e,t){const i=this.hot.columnIndexMapper;let r=0;for(let s=e;s<=t;s+=1){const o=i.getRenderableFromVisualIndex(s);s<0?r+=this.hot.view._wt.wtViewport.getRowHeaderWidth()||0:o!==null&&(r+=this.hot.view._wt.wtTable.getStretchedColumnWidth(o)||0)}return r}moveBySettingsOrLoad(){const e=this.hot.getSettings()[kM];if(Array.isArray(e))this.moveColumns(e,0);else if(e!==void 0){const t=this.persistentStateLoad();t.length&&this.moveColumns(t,0)}}isFixedColumnsStart(e){return e<this.hot.getSettings().fixedColumnsStart}persistentStateSave(){this.hot.runHooks("persistentStateSave","manualColumnMove",this.hot.columnIndexMapper.getIndexesSequence())}persistentStateLoad(){const e={};return this.hot.runHooks("persistentStateLoad","manualColumnMove",e),e.value?e.value:[]}prepareColumnsToMoving(e,t){const i=[];return He(e,t,r=>{i.push(r)}),i}refreshPositions(){const e=this.hot.view.getFirstFullyVisibleColumn();this.isFixedColumnsStart(Ne(js,this))&&e>0&&this.hot.scrollViewportTo({col:this.hot.columnIndexMapper.getNearestNotHiddenIndex(e-1,-1)});const t=this.hot.view._wt.wtTable,i=this.hot.view._wt.wtOverlays.scrollableElement,r=typeof i.scrollX=="number"?i.scrollX:i.scrollLeft;let s=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,Ne(js,this)-1);const o=t.hider.offsetWidth,a=t.TBODY.offsetLeft,l=Ne(xr,this).getOffset().start,c=Ne(xr,this).getSize().width;let u=0,h=0;if(this.hot.isRtl()){const g=this.hot.rootWindow,p=fn(this.hot.rootElement),m=g.innerWidth-Ne(Og,this)-p;h=g.innerWidth-Ne(Rr,this).eventPageX-m-(i.scrollX===void 0?r:0)}else h=Ne(Rr,this).eventPageX-(Ne(Og,this)-(i.scrollX===void 0?r:0));if(Ne(wR,this)&&(u=this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsStart(Ne(js,this))&&(s+=r),s+=u,Ne(js,this)<0)Ne(Db,this)>0?Ne(Rr,this).col=0:Ne(Rr,this).col=e>0?e-1:e;else if(Ne(Rr,this).TD.offsetWidth/2+s<=h){const g=Ne(js,this)>=Ne(LS,this)?Ne(LS,this)-1:Ne(js,this);Ne(Rr,this).col=g+1,s+=Ne(Rr,this).TD.offsetWidth}else Ne(Rr,this).col=Ne(js,this);let d=h,f=s;h+c+l>=o?d=o-c-l:h+l<a+u&&(d=a+u+Math.abs(l)),s>=o-1?f=o-1:f===0?f=1:i.scrollX!==void 0&&Ne(js,this)<Ne(Db,this)&&(f-=Ne(Og,this)<=i.scrollX?Ne(Og,this):0),Ne(xr,this).setPosition(null,d),Ne(bu,this).setPosition(null,f)}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mousemove",t=>du(Yh,this,HBe).call(this,t)),this.eventManager.addEventListener(e,"mouseup",()=>du(Yh,this,FBe).call(this))}unregisterEvents(){this.eventManager.clear()}buildPluginUI(){Ne(xr,this).build(),Ne(bu,this).build()}destroy(){Ne(xr,this).destroy(),Ne(bu,this).destroy(),super.destroy()}}function LBe(n,e,t,i){const r=this.hot.view._wt.wtTable,s=this.hot.selection.isSelectedByColumnHeader(),o=this.hot.getSelectedRangeLast(),a=Ue(n.target,"sortAction");if(!o||!s||Ne(Au,this)||n.button!==0||a){Xr(Au,this,!1),Ne(mc,this).length=0,Ze(this.hot.rootElement,[VI,bR]);return}const l=Ne(bu,this).isBuilt()&&!Ne(bu,this).isAppended(),c=Ne(xr,this).isBuilt()&&!Ne(xr,this).isAppended();l&&c&&(Ne(bu,this).appendTo(r.hider),Ne(xr,this).appendTo(r.hider));const{from:u,to:h}=o,d=Math.min(u.col,h.col),f=Math.max(u.col,h.col);if(e.row<0&&e.col>=d&&e.col<=f){i.column=!0,Xr(Au,this,!0);const g=t.firstChild?x9(n,t.firstChild).x:n.offsetX;Ne(Rr,this).eventPageX=n.pageX,Xr(js,this,e.col),Ne(Rr,this).TD=t,Ne(Rr,this).col=e.col,Xr(mc,this,this.prepareColumnsToMoving(d,f)),Xr(wR,this,!!this.hot.getSettings().rowHeaders),Xr(LS,this,this.hot.countCols()),Xr(Db,this,this.hot.getSettings().fixedColumnsStart),Xr(Og,this,xi(this.hot.rootElement).left);const p=Ne(wR,this)?-1:0,m=r.holder.scrollTop+r.getColumnHeaderHeight(0)+1,b=e.col<Ne(Db,this),y=this.hot.view._wt.wtOverlays.inlineStartOverlay.getOverlayOffset(),w=Math.abs(g-(this.hot.isRtl()?t.offsetWidth:0)),R=this.getColumnsWidth(d,e.col-1)+w,E=this.getColumnsWidth(p,d-1)+(b?y:0)+R;Ne(xr,this).setPosition(m,E),Ne(xr,this).setSize(this.getColumnsWidth(d,f),r.hider.offsetHeight-m),Ne(xr,this).setOffset(null,-R),ue(this.hot.rootElement,VI)}else Ze(this.hot.rootElement,WI),Xr(Au,this,!1),Ne(mc,this).length=0}function HBe(n){Ne(Au,this)&&(Ne(Rr,this).eventPageX=n.pageX,this.refreshPositions())}function $Be(n,e,t,i){!this.hot.getSelectedRangeLast()||!Ne(Au,this)||(Ne(mc,this).indexOf(e.col)>-1?Ze(this.hot.rootElement,bR):ue(this.hot.rootElement,bR),i.row=!0,i.column=!0,i.cell=!0,Xr(js,this,e.col),Ne(Rr,this).TD=t)}function FBe(){const n=Ne(Rr,this).col,e=Ne(mc,this).length;if(Xr(js,this,void 0),Xr(Au,this,!1),Ze(this.hot.rootElement,[VI,bR,WI]),this.hot.selection.isSelectedByColumnHeader()&&ue(this.hot.rootElement,WI),e<1||n===void 0)return;const t=Ne(mc,this)[0],i=this.hot.toPhysicalColumn(t),r=this.dragColumns(Ne(mc,this),n);if(Ne(mc,this).length=0,r===!0){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize();const s=this.hot.toVisualColumn(i),o=s+e-1;this.hot.selectColumns(s,o)}}function BBe(){const n=this.hot.view._wt.wtTable,e=n.getColumnHeaderHeight(0)+1,t=n.holder.scrollTop,i=e+t;Ne(xr,this).setPosition(i),Ne(xr,this).setSize(null,n.hider.offsetHeight-i)}function VBe(){this.moveBySettingsOrLoad()}function WBe(n,e){Cq(n,e),e.add(n)}function Ji(n,e,t){Cq(n,e),e.set(n,t)}function Cq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zn(n,e,t){return n.set(Fo(n,e),t),t}function Ee(n,e){return n.get(Fo(n,e))}function Fo(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const yR="manualColumnResize",jBe=130,lj="manualColumnWidths";var Ql=new WeakMap,IC=new WeakMap,hs=new WeakMap,CR=new WeakMap,Ua=new WeakMap,zBe=new WeakMap,cp=new WeakMap,OC=new WeakMap,zr=new WeakMap,Gl=new WeakMap,cf=new WeakMap,SR=new WeakMap,Nb=new WeakMap,Lb=new WeakMap,fs=new WeakMap,Hb=new WeakMap,_a=new WeakSet;class UBe extends Lt{static get PLUGIN_KEY(){return yR}static get PLUGIN_PRIORITY(){return jBe}constructor(e){super(e),WBe(this,_a),Ji(this,Ql,null),Ji(this,IC,null),Ji(this,hs,[]),Ji(this,CR,null),Ji(this,Ua,null),Ji(this,zBe,null),Ji(this,cp,null),Ji(this,OC,null),Ji(this,zr,this.hot.rootDocument.createElement("DIV")),Ji(this,Gl,this.hot.rootDocument.createElement("DIV")),Ji(this,cf,null),Ji(this,SR,!1),Ji(this,Nb,0),Ji(this,Lb,null),Ji(this,fs,void 0),Ji(this,Hb,void 0),ue(Ee(zr,this),"manualColumnResizer"),ue(Ee(Gl,this),"manualColumnResizerGuide")}get inlineDir(){return this.hot.isRtl()?"right":"left"}isEnabled(){return this.hot.getSettings()[yR]}enablePlugin(){this.enabled||(Zn(fs,this,new lh),Ee(fs,this).addLocalHook("init",()=>Fo(_a,this,GBe).call(this)),this.hot.columnIndexMapper.registerMap(this.pluginName,Ee(fs,this)),this.addHook("modifyColWidth",(e,t)=>Fo(_a,this,QBe).call(this,e,t),1),this.addHook("beforeStretchingColumnWidth",(e,t)=>Fo(_a,this,JBe).call(this,e,t)),this.addHook("beforeColumnResize",(e,t,i)=>Fo(_a,this,eVe).call(this,e,t,i)),this.bindEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){Zn(Hb,this,Ee(fs,this).getValues()),this.hot.columnIndexMapper.unregisterMap(this.pluginName),super.disablePlugin()}saveManualColumnWidths(){this.hot.runHooks("persistentStateSave",lj,Ee(fs,this).getValues())}loadManualColumnWidths(){const e={};return this.hot.runHooks("persistentStateLoad",lj,e),e.value}setManualSize(e,t){const i=Math.max(t,20),r=this.hot.toPhysicalColumn(e);return Ee(fs,this).setValueAtIndex(r,i),i}clearManualSize(e){const t=this.hot.toPhysicalColumn(e);Ee(fs,this).setValueAtIndex(t,null)}setupHandlePosition(e){if(!e.parentNode)return;Zn(Ql,this,e);const{_wt:t}=this.hot.view,i=t.wtTable.getCoords(Ee(Ql,this)),r=i.col;if(r<0)return;const s=ni(Ee(Ql,this)),o=Ee(Ql,this).getBoundingClientRect(),a=r<t.getSetting("fixedColumnsStart");let l;a&&(l=t.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(Ee(Ql,this),i.row,i.col)),l||(l=t.wtOverlays.topOverlay.getRelativeCellPosition(Ee(Ql,this),i.row,i.col)),Zn(IC,this,this.hot.columnIndexMapper.getVisualFromRenderableIndex(r)),Zn(hs,this,[]);const c=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByColumnHeader();if(this.hot.selection.isSelected()&&c){const u=this.hot.getSelectedRange();j(u,h=>{const d=h.getTopStartCorner().col,f=h.getBottomEndCorner().col;He(d,f,g=>{Ee(hs,this).includes(g)||Ee(hs,this).push(g)})})}Ee(hs,this).includes(Ee(IC,this))||Zn(hs,this,[Ee(IC,this)]),Zn(OC,this,l.start-6),Zn(cp,this,parseInt(o.width,10)),Ee(zr,this).style.top=`${l.top}px`,Ee(zr,this).style[this.inlineDir]=`${Ee(OC,this)+Ee(cp,this)}px`,Ee(zr,this).style.height=`${s}px`,this.hot.rootElement.appendChild(Ee(zr,this))}refreshHandlePosition(){Ee(zr,this).style[this.inlineDir]=`${Ee(OC,this)+Ee(CR,this)}px`}setupGuidePosition(){const e=parseInt(ni(Ee(zr,this)),10),t=parseInt(Ee(zr,this).style.top,10)+e,i=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);ue(Ee(zr,this),"active"),ue(Ee(Gl,this),"active"),Ee(Gl,this).style.top=`${t}px`,this.refreshGuidePosition(),Ee(Gl,this).style.height=`${i-e}px`,this.hot.rootElement.appendChild(Ee(Gl,this))}refreshGuidePosition(){Ee(Gl,this).style[this.inlineDir]=Ee(zr,this).style[this.inlineDir]}hideHandleAndGuide(){Ze(Ee(zr,this),"active"),Ze(Ee(Gl,this),"active")}checkIfColumnHeader(e){const t=Gu(e,["THEAD"],this.hot.rootElement),{topOverlay:i,topInlineStartCornerOverlay:r}=this.hot.view._wt.wtOverlays;return[i.clone.wtTable.THEAD,r.clone.wtTable.THEAD].includes(t)}getClosestTHParent(e){return e.tagName!=="TABLE"?e.tagName==="TH"?e:this.getClosestTHParent(e.parentNode):null}afterMouseDownTimeout(){const e=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},t=(i,r)=>{const s=this.hot.runHooks("beforeColumnResize",Ee(Ua,this),i,!0);s!==void 0&&Zn(Ua,this,s),this.hot.getSettings().stretchH==="all"?this.clearManualSize(i):this.setManualSize(i,Ee(Ua,this)),this.saveManualColumnWidths(),this.hot.runHooks("afterColumnResize",Ee(Ua,this),i,!0),r&&e()};Ee(Nb,this)>=2&&(Ee(hs,this).length>1?(j(Ee(hs,this),r=>{t(r)}),e()):j(Ee(hs,this),r=>{t(r,!0)})),Zn(Nb,this,0),Zn(Lb,this,null)}bindEvents(){const{rootWindow:e,rootElement:t}=this.hot;this.eventManager.addEventListener(t,"mouseover",i=>Fo(_a,this,YBe).call(this,i)),this.eventManager.addEventListener(t,"mousedown",i=>Fo(_a,this,KBe).call(this,i)),this.eventManager.addEventListener(e,"mousemove",i=>Fo(_a,this,qBe).call(this,i)),this.eventManager.addEventListener(e,"mouseup",()=>Fo(_a,this,XBe).call(this)),this.eventManager.addEventListener(Ee(zr,this),"contextmenu",()=>Fo(_a,this,ZBe).call(this))}destroy(){super.destroy()}}function GBe(){const n=this.hot.getSettings()[yR],e=this.loadManualColumnWidths();typeof e<"u"?this.hot.batchExecution(()=>{e.forEach((t,i)=>{Ee(fs,this).setValueAtIndex(i,t)})},!0):Array.isArray(n)?(this.hot.batchExecution(()=>{n.forEach((t,i)=>{Ee(fs,this).setValueAtIndex(i,t)})},!0),Zn(Hb,this,n)):n===!0&&Array.isArray(Ee(Hb,this))&&this.hot.batchExecution(()=>{Ee(Hb,this).forEach((t,i)=>{Ee(fs,this).setValueAtIndex(i,t)})},!0)}function YBe(n){if(!RD(n.target)&&Ee(SR,this)!==!0&&this.checkIfColumnHeader(n.target)){const e=this.getClosestTHParent(n.target);if(!e)return;const t=e.getAttribute("colspan");e&&(t===null||t==="1")&&(Ee(cf,this)||this.setupHandlePosition(e))}}function KBe(n){n.target.parentNode===this.hot.rootElement&&Ue(n.target,"manualColumnResizer")&&(this.setupHandlePosition(Ee(Ql,this)),this.setupGuidePosition(),Zn(cf,this,!0),Ee(Lb,this)===null&&(Zn(Lb,this,setTimeout(()=>this.afterMouseDownTimeout(),500)),this.hot._registerTimeout(Ee(Lb,this))),Zn(Nb,this,Ee(Nb,this)+1),this.startX=n.pageX,Zn(Ua,this,Ee(cp,this)))}function qBe(n){if(Ee(cf,this)){const e=(n.pageX-this.startX)*this.hot.getDirectionFactor();Zn(CR,this,Ee(cp,this)+e),j(Ee(hs,this),t=>{Zn(Ua,this,this.setManualSize(t,Ee(CR,this)))}),this.refreshHandlePosition(),this.refreshGuidePosition()}}function XBe(){const n=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(t,i)=>{this.hot.runHooks("beforeColumnResize",Ee(Ua,this),t,!1),i&&n(),this.saveManualColumnWidths(),this.hot.runHooks("afterColumnResize",Ee(Ua,this),t,!1)};Ee(cf,this)&&(this.hideHandleAndGuide(),Zn(cf,this,!1),Ee(Ua,this)!==Ee(cp,this)&&(Ee(hs,this).length>1?(j(Ee(hs,this),i=>{e(i)}),n()):j(Ee(hs,this),i=>{e(i,!0)})),this.setupHandlePosition(Ee(Ql,this)))}function ZBe(){this.hideHandleAndGuide(),this.hot.rootElement.removeChild(Ee(zr,this)),this.hot.rootElement.removeChild(Ee(Gl,this)),Zn(cf,this,!1),Zn(SR,this,!0),this.hot._registerImmediate(()=>{Zn(SR,this,!1)})}function QBe(n,e){let t=n;if(this.enabled){const i=this.hot.toPhysicalColumn(e),r=Ee(fs,this).getValueAtIndex(i);this.hot.getSettings()[yR]&&r&&(t=r)}return t}function JBe(n,e){let t=Ee(fs,this).getValueAtIndex(e);return t===null&&(t=n),t}function eVe(){this.hot.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked()}function DM(n,e,t){return(e=tVe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tVe(n){var e=nVe(n,"string");return typeof e=="symbol"?e:e+""}function nVe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const NM=0,cj=1,uj=2,vg="px";let Sq=class{constructor(e){DM(this,"hot",void 0),DM(this,"_element",null),DM(this,"state",NM),this.hot=e}appendTo(e){e.appendChild(this._element),this.state=uj}build(){this.state===NM&&(this._element=this.hot.rootDocument.createElement("div"),this.state=cj)}destroy(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=NM}isAppended(){return this.state===uj}isBuilt(){return this.state>=cj}setPosition(e,t){e!==void 0&&(this._element.style.top=e+vg),t!==void 0&&(this._element.style.left=t+vg)}getPosition(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}setSize(e,t){e&&(this._element.style.width=e+vg),t&&(this._element.style.height=t+vg)}getSize(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}setOffset(e,t){e&&(this._element.style.marginTop=e+vg),t&&(this._element.style.marginLeft=t+vg)}getOffset(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}};const iVe="ht__manualRowMove--backlight";class rVe extends Sq{build(){super.build(),ue(this._element,iVe)}}const sVe="ht__manualRowMove--guideline";class oVe extends Sq{build(){super.build(),ue(this._element,sVe)}}function aVe(n,e){_q(n,e),e.add(n)}function bg(n,e,t){_q(n,e),e.set(n,t)}function _q(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Td(n,e,t){return n.set(fu(n,e),t),t}function et(n,e){return n.get(fu(n,e))}function fu(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ie.getSingleton().register("beforeRowMove");Ie.getSingleton().register("afterRowMove");const LM="manualRowMove",lVe=140,hj="ht__manualRowMove",_R="show-ui",jI="on-moving--rows",zI="after-selection--rows";var Tr=new WeakMap,wu=new WeakMap,vc=new WeakMap,Pu=new WeakMap,Zr=new WeakMap,kC=new WeakMap,Kh=new WeakSet;class cVe extends Lt{constructor(){super(...arguments),aVe(this,Kh),bg(this,Tr,new rVe(this.hot)),bg(this,wu,new oVe(this.hot)),bg(this,vc,[]),bg(this,Pu,void 0),bg(this,Zr,{}),bg(this,kC,void 0)}static get PLUGIN_KEY(){return LM}static get PLUGIN_PRIORITY(){return lVe}isEnabled(){return!!this.hot.getSettings()[LM]}enablePlugin(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return fu(Kh,e,uVe).call(e,...i)}),this.addHook("beforeOnCellMouseOver",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return fu(Kh,e,dVe).call(e,...i)}),this.addHook("afterScrollHorizontally",()=>fu(Kh,this,gVe).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return fu(Kh,e,pVe).call(e,...i)}),this.buildPluginUI(),this.registerEvents(),ue(this.hot.rootElement,hj),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),super.updatePlugin()}disablePlugin(){Ze(this.hot.rootElement,hj),this.unregisterEvents(),et(Tr,this).destroy(),et(wu,this).destroy(),super.disablePlugin()}moveRow(e,t){return this.moveRows([e],t)}moveRows(e,t){const i=et(kC,this),r=this.isMovePossible(e,t),s=this.hot.runHooks("beforeRowMove",e,t,i,r);if(Td(kC,this,void 0),s===!1)return;r&&this.hot.rowIndexMapper.moveIndexes(e,t);const o=r&&this.isRowOrderChanged(e,t);return this.hot.runHooks("afterRowMove",e,t,i,r,o),o}dragRow(e,t){return this.dragRows([e],t)}dragRows(e,t){const i=this.countFinalIndex(e,t);return Td(kC,this,t),this.moveRows(e,i)}isMovePossible(e,t){const i=this.hot.rowIndexMapper.getNotTrimmedIndexesLength(),r=e.length+t>i,s=t<0,o=e.some(l=>l<0),a=e.some(l=>l>=i);return!(r||s||o||a)}isRowOrderChanged(e,t){return e.some((i,r)=>i-r!==t)}countFinalIndex(e,t){const i=ci(e,(r,s)=>(s<t&&(r+=1),r),0);return t-i}getRowsHeight(e,t){const i=this.hot.rowIndexMapper;let r=0;for(let s=e;s<=t;s++){const o=i.getRenderableFromVisualIndex(s);o!==null&&(r+=this.hot.view._wt.wtTable.getRowHeight(o)||23)}return r}moveBySettingsOrLoad(){const e=this.hot.getSettings()[LM];if(Array.isArray(e))this.moveRows(e,0);else if(e!==void 0){const t=this.persistentStateLoad();t.length&&this.moveRows(t,0)}}isFixedRowTop(e){return e<this.hot.getSettings().fixedRowsTop}isFixedRowBottom(e){return e>this.hot.countRows()-1-this.hot.getSettings().fixedRowsBottom}persistentStateSave(){this.hot.runHooks("persistentStateSave","manualRowMove",this.hot.rowIndexMapper.getIndexesSequence())}persistentStateLoad(){const e={};return this.hot.runHooks("persistentStateLoad","manualRowMove",e),e.value?e.value:[]}prepareRowsToMoving(){const e=this.hot.getSelectedRangeLast(),t=[];if(!e)return t;const{from:i,to:r}=e,s=Math.min(i.row,r.row),o=Math.max(i.row,r.row);return He(s,o,a=>{t.push(a)}),t}refreshPositions(){const e=et(Zr,this).coords,t=this.hot.view.getFirstFullyVisibleRow(),i=this.hot.view.getLastFullyVisibleRow(),r=this.hot.countRows();this.isFixedRowTop(e.row)&&t>0&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(t-1,-1)),this.isFixedRowBottom(e.row)&&i<r&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(i+1,1),void 0,!0);const s=this.hot.view._wt.wtTable,o=et(Zr,this).TD,a=this.hot.rootElement,l=xi(a),c=rf(a),u=s.holder.scrollTop,h=this.hot.rootWindow!==c?c.scrollTop:0,d=l.top-h,f=et(Zr,this).eventPageY-d+u,g=s.hider.offsetHeight,p=s.TBODY.offsetTop,m=et(Tr,this).getOffset().top,b=et(Tr,this).getSize().height,y=o.offsetHeight/2,w=o.offsetHeight;let R=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,e.row-1);const E=f>=R+y;this.isFixedRowTop(e.row)&&(R+=this.hot.view._wt.wtOverlays.topOverlay.getOverlayOffset()),e.row<0?et(Zr,this).row=t>0?t-1:t:E?(et(Zr,this).row=e.row+1,R+=e.row===0?w-1:w):et(Zr,this).row=e.row;let _=f,T=R;f+b+m>=g?_=g-b-m:f+m<p&&(_=p+Math.abs(m)),R>=g-1&&(T=g-1),et(Tr,this).setPosition(_),et(wu,this).setPosition(T)}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mousemove",t=>fu(Kh,this,hVe).call(this,t)),this.eventManager.addEventListener(e,"mouseup",()=>fu(Kh,this,fVe).call(this))}unregisterEvents(){this.eventManager.clear()}buildPluginUI(){et(Tr,this).build(),et(wu,this).build()}destroy(){et(Tr,this).destroy(),et(wu,this).destroy(),super.destroy()}}function uVe(n,e,t,i){const{wtTable:r,wtViewport:s}=this.hot.view._wt,o=this.hot.selection.isSelectedByRowHeader(),a=this.hot.getSelectedRangeLast();if(!a||!o||et(Pu,this)||n.button!==0){Td(Pu,this,!1),et(vc,this).length=0,Ze(this.hot.rootElement,[jI,_R]);return}const l=et(wu,this).isBuilt()&&!et(wu,this).isAppended(),c=et(Tr,this).isBuilt()&&!et(Tr,this).isAppended();l&&c&&(et(wu,this).appendTo(r.hider),et(Tr,this).appendTo(r.hider));const{from:u,to:h}=a,d=Math.min(u.row,h.row),f=Math.max(u.row,h.row);if(e.col<0&&e.row>=d&&e.row<=f){i.row=!0,Td(Pu,this,!0),et(Zr,this).eventPageY=n.pageY,et(Zr,this).coords=e,et(Zr,this).TD=t,Td(vc,this,this.prepareRowsToMoving());const g=r.holder.scrollLeft+s.getRowHeaderWidth(),p=this.getRowsHeight(d,e.row-1)+n.offsetY;et(Tr,this).setPosition(null,g),et(Tr,this).setSize(r.hider.offsetWidth-g,this.getRowsHeight(d,f)),et(Tr,this).setOffset(-p,null),ue(this.hot.rootElement,jI),this.refreshPositions()}else Ze(this.hot.rootElement,zI),Td(Pu,this,!1),et(vc,this).length=0}function hVe(n){et(Pu,this)&&(et(Zr,this).eventPageY=n.pageY,this.refreshPositions())}function dVe(n,e,t,i){!this.hot.getSelectedRangeLast()||!et(Pu,this)||(et(vc,this).indexOf(e.row)>-1?Ze(this.hot.rootElement,_R):ue(this.hot.rootElement,_R),i.row=!0,i.column=!0,i.cell=!0,et(Zr,this).coords=e,et(Zr,this).TD=t)}function fVe(){const n=et(Zr,this).row,e=et(vc,this).length;if(Td(Pu,this,!1),Ze(this.hot.rootElement,[jI,_R,zI]),this.hot.selection.isSelectedByRowHeader()&&ue(this.hot.rootElement,zI),e<1||n===void 0)return;const t=et(vc,this)[0],i=this.hot.toPhysicalRow(t),r=this.dragRows(et(vc,this),n);if(et(vc,this).length=0,r===!0){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize();const s=this.hot.toVisualRow(i),o=s+e-1;this.hot.selectRows(s,o)}}function gVe(){const n=this.hot.view._wt.wtTable,e=this.hot.view._wt.wtViewport.getRowHeaderWidth(),t=n.holder.scrollLeft,i=e+t;et(Tr,this).setPosition(null,i),et(Tr,this).setSize(n.hider.offsetWidth-i)}function pVe(){this.moveBySettingsOrLoad()}function mVe(n,e){Rq(n,e),e.add(n)}function er(n,e,t){Rq(n,e),e.set(n,t)}function Rq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Bn(n,e,t){return n.set(Jl(n,e),t),t}function Re(n,e){return n.get(Jl(n,e))}function Jl(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const RR="manualRowResize",vVe=30,dj="manualRowHeights";var ka=new WeakMap,DC=new WeakMap,ds=new WeakMap,$b=new WeakMap,yu=new WeakMap,hH=new WeakMap,up=new WeakMap,NC=new WeakMap,yr=new WeakMap,Ia=new WeakMap,uf=new WeakMap,ER=new WeakMap,Fb=new WeakMap,Bb=new WeakMap,Vo=new WeakMap,Vb=new WeakMap,nu=new WeakSet;class bVe extends Lt{static get PLUGIN_KEY(){return RR}static get PLUGIN_PRIORITY(){return vVe}constructor(e){super(e),mVe(this,nu),er(this,ka,null),er(this,DC,null),er(this,ds,[]),er(this,$b,null),er(this,yu,null),er(this,hH,null),er(this,up,null),er(this,NC,null),er(this,yr,this.hot.rootDocument.createElement("DIV")),er(this,Ia,this.hot.rootDocument.createElement("DIV")),er(this,uf,!1),er(this,ER,!1),er(this,Fb,0),er(this,Bb,null),er(this,Vo,void 0),er(this,Vb,void 0),ue(Re(yr,this),"manualRowResizer"),ue(Re(Ia,this),"manualRowResizerGuide")}get inlineDir(){return this.hot.isRtl()?"right":"left"}isEnabled(){return this.hot.getSettings()[RR]}enablePlugin(){this.enabled||(Bn(Vo,this,new lh),Re(Vo,this).addLocalHook("init",()=>Jl(nu,this,EVe).call(this)),this.hot.rowIndexMapper.registerMap(this.pluginName,Re(Vo,this)),this.addHook("modifyRowHeight",(e,t)=>Jl(nu,this,RVe).call(this,e,t)),this.bindEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){Bn(Vb,this,Re(Vo,this).getValues()),this.hot.rowIndexMapper.unregisterMap(this.pluginName),super.disablePlugin()}saveManualRowHeights(){this.hot.runHooks("persistentStateSave",dj,Re(Vo,this).getValues())}loadManualRowHeights(){const e={};return this.hot.runHooks("persistentStateLoad",dj,e),e.value}setManualSize(e,t){const i=this.hot.toPhysicalRow(e),r=Math.max(t,z9);return Re(Vo,this).setValueAtIndex(i,r),r}getLastDesiredRowHeight(){return Re($b,this)}setupHandlePosition(e){Bn(ka,this,e);const{view:t}=this.hot,{_wt:i}=t,r=i.wtTable.getCoords(Re(ka,this)),s=r.row;if(s<0)return;const o=fn(Re(ka,this)),a=Re(ka,this).getBoundingClientRect(),l=s<i.getSetting("fixedRowsTop"),c=s>=t.countNotHiddenRowIndexes(0,1)-i.getSetting("fixedRowsBottom");let u;l?u=i.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(Re(ka,this),r.row,r.col):c&&(u=i.wtOverlays.bottomInlineStartCornerOverlay.getRelativeCellPosition(Re(ka,this),r.row,r.col)),u||(u=i.wtOverlays.inlineStartOverlay.getRelativeCellPosition(Re(ka,this),r.row,r.col)),Bn(DC,this,this.hot.rowIndexMapper.getVisualFromRenderableIndex(s)),Bn(ds,this,[]);const h=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByRowHeader();if(this.hot.selection.isSelected()&&h){const d=this.hot.getSelectedRange();j(d,f=>{const g=f.getTopStartCorner().row,p=f.getBottomStartCorner().row;He(g,p,m=>{Re(ds,this).includes(m)||Re(ds,this).push(m)})})}Re(ds,this).includes(Re(DC,this))||Bn(ds,this,[Re(DC,this)]),Bn(NC,this,u.top-6),Bn(up,this,parseInt(a.height,10)),Re(yr,this).style.top=`${Re(NC,this)+Re(up,this)}px`,Re(yr,this).style[this.inlineDir]=`${u.start}px`,Re(yr,this).style.width=`${o}px`,this.hot.rootElement.appendChild(Re(yr,this))}refreshHandlePosition(){Re(yr,this).style.top=`${Re(NC,this)+Re($b,this)}px`}setupGuidePosition(){const e=parseInt(fn(Re(yr,this)),10),t=parseInt(Re(yr,this).style[this.inlineDir],10)+e,i=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);ue(Re(yr,this),"active"),ue(Re(Ia,this),"active"),Re(Ia,this).style.top=Re(yr,this).style.top,Re(Ia,this).style[this.inlineDir]=`${t}px`,Re(Ia,this).style.width=`${i-e}px`,this.hot.rootElement.appendChild(Re(Ia,this))}refreshGuidePosition(){Re(Ia,this).style.top=Re(yr,this).style.top}hideHandleAndGuide(){Ze(Re(yr,this),"active"),Ze(Re(Ia,this),"active")}checkIfRowHeader(e){const t=Gu(e,["TBODY"],this.hot.rootElement),{inlineStartOverlay:i,topInlineStartCornerOverlay:r,bottomInlineStartCornerOverlay:s}=this.hot.view._wt.wtOverlays;return[i.clone.wtTable.TBODY,r.clone.wtTable.TBODY,s.clone.wtTable.TBODY].includes(t)}getClosestTHParent(e){return e.tagName!=="TABLE"?e.tagName==="TH"?e:this.getClosestTHParent(e.parentNode):null}getActualRowHeight(e){const t=this.hot.view._wt.wtTable.getRowHeight(e);return t!==void 0&&Re(yu,this)<t?t:Re(yu,this)}afterMouseDownTimeout(){const e=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},t=(i,r)=>{const s=this.hot.runHooks("beforeRowResize",this.getActualRowHeight(i),i,!0);s!==void 0&&Bn(yu,this,s),this.setManualSize(i,Re(yu,this)),this.hot.runHooks("afterRowResize",this.getActualRowHeight(i),i,!0),r&&e()};Re(Fb,this)>=2&&(Re(ds,this).length>1?(j(Re(ds,this),r=>{t(r)}),e()):j(Re(ds,this),r=>{t(r,!0)})),Bn(Fb,this,0),Bn(Bb,this,null)}bindEvents(){const{rootElement:e,rootWindow:t}=this.hot;this.eventManager.addEventListener(e,"mouseover",i=>Jl(nu,this,wVe).call(this,i)),this.eventManager.addEventListener(e,"mousedown",i=>Jl(nu,this,yVe).call(this,i)),this.eventManager.addEventListener(t,"mousemove",i=>Jl(nu,this,CVe).call(this,i)),this.eventManager.addEventListener(t,"mouseup",()=>Jl(nu,this,SVe).call(this)),this.eventManager.addEventListener(Re(yr,this),"contextmenu",()=>Jl(nu,this,_Ve).call(this))}destroy(){super.destroy()}}function wVe(n){if(!RD(n.target)&&Re(ER,this)!==!0&&this.checkIfRowHeader(n.target)){const e=this.getClosestTHParent(n.target);e&&(Re(uf,this)||this.setupHandlePosition(e))}}function yVe(n){Ue(n.target,"manualRowResizer")&&(this.setupHandlePosition(Re(ka,this)),this.setupGuidePosition(),Bn(uf,this,!0),Re(Bb,this)===null&&(Bn(Bb,this,setTimeout(()=>this.afterMouseDownTimeout(),500)),this.hot._registerTimeout(Re(Bb,this))),Bn(Fb,this,Re(Fb,this)+1),Bn(hH,this,n.pageY),Bn(yu,this,Re(up,this)))}function CVe(n){Re(uf,this)&&(Bn($b,this,Re(up,this)+(n.pageY-Re(hH,this))),j(Re(ds,this),e=>{Bn(yu,this,this.setManualSize(e,Re($b,this)))}),this.refreshHandlePosition(),this.refreshGuidePosition())}function SVe(){const n=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(t,i)=>{this.hot.runHooks("beforeRowResize",this.getActualRowHeight(t),t,!1),i&&n(),this.saveManualRowHeights(),this.hot.runHooks("afterRowResize",this.getActualRowHeight(t),t,!1)};Re(uf,this)&&(this.hideHandleAndGuide(),Bn(uf,this,!1),Re(yu,this)!==Re(up,this)&&(Re(ds,this).length>1?(j(Re(ds,this),i=>{e(i)}),n()):j(Re(ds,this),i=>{e(i,!0)})),this.setupHandlePosition(Re(ka,this)))}function _Ve(){this.hideHandleAndGuide(),this.hot.rootElement.removeChild(Re(yr,this)),this.hot.rootElement.removeChild(Re(Ia,this)),Bn(uf,this,!1),Bn(ER,this,!0),this.hot._registerImmediate(()=>{Bn(ER,this,!1)})}function RVe(n,e){let t=n;if(this.enabled){const i=this.hot.toPhysicalRow(e),r=Re(Vo,this).getValueAtIndex(i);this.hot.getSettings()[RR]&&r&&(t=r)}return t}function EVe(){const n=this.hot.getSettings()[RR],e=this.loadManualRowHeights();this.hot.batchExecution(()=>{typeof e<"u"?e.forEach((t,i)=>{Re(Vo,this).setValueAtIndex(i,t)}):Array.isArray(n)?(n.forEach((t,i)=>{Re(Vo,this).setValueAtIndex(i,t)}),Bn(Vb,this,n)):n===!0&&Array.isArray(Re(Vb,this))&&Re(Vb,this).forEach((t,i)=>{Re(Vo,this).setValueAtIndex(i,t)})},!0)}function xVe(n,e,t){TVe(n,e),e.set(n,t)}function TVe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qh(n,e,t){return(e=MVe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function MVe(n){var e=AVe(n,"string");return typeof e=="symbol"?e:e+""}function AVe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fj(n,e){return n.get(Eq(n,e))}function LC(n,e,t){return n.set(Eq(n,e),t),t}function Eq(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Xh=new WeakMap;class Da{constructor(e,t,i,r,s,o){qh(this,"row",void 0),qh(this,"col",void 0),qh(this,"rowspan",void 0),qh(this,"colspan",void 0),qh(this,"removed",!1),qh(this,"cellCoordsFactory",void 0),qh(this,"cellRangeFactory",void 0),xVe(this,Xh,null),this.row=e,this.col=t,this.rowspan=i,this.colspan=r,this.cellCoordsFactory=s,this.cellRangeFactory=o}static NEGATIVE_VALUES_WARNING(e){let{row:t,col:i,rowspan:r,colspan:s}=e;return Kt`The merged cell declared with {row: ${t}, col: ${i},\x20
      rowspan: ${r}, colspan: ${s}} contains negative values, which is\x20
      not supported. It will not be added to the collection.`}static IS_OUT_OF_BOUNDS_WARNING(e){let{row:t,col:i}=e;return Kt`The merged cell declared at [${t}, ${i}] is positioned\x20
      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup.`}static IS_SINGLE_CELL(e){let{row:t,col:i}=e;return Kt`The merged cell declared at [${t}, ${i}] has both "rowspan"\x20
      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.`}static ZERO_SPAN_WARNING(e){let{row:t,col:i}=e;return Kt`The merged cell declared at [${t}, ${i}] has "rowspan"\x20
      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.`}static containsNegativeValues(e){let{row:t,col:i,rowspan:r,colspan:s}=e;return t<0||i<0||r<0||s<0}static isSingleCell(e){let{rowspan:t,colspan:i}=e;return i===1&&t===1}static containsZeroSpan(e){let{rowspan:t,colspan:i}=e;return i===0||t===0}static isOutOfBounds(e,t,i){return e.row<0||e.col<0||e.row>=t||e.row+e.rowspan-1>=t||e.col>=i||e.col+e.colspan-1>=i}normalize(e){const t=e.countRows(),i=e.countCols();this.row<0?this.row=0:this.row>t-1&&(this.row=t-1),this.col<0?this.col=0:this.col>i-1&&(this.col=i-1),this.row+this.rowspan>t-1&&(this.rowspan=t-this.row),this.col+this.colspan>i-1&&(this.colspan=i-this.col),LC(Xh,this,null)}includes(e,t){return this.row<=e&&this.col<=t&&this.row+this.rowspan-1>=e&&this.col+this.colspan-1>=t}includesHorizontally(e){return this.col<=e&&this.col+this.colspan-1>=e}includesVertically(e){return this.row<=e&&this.row+this.rowspan-1>=e}shift(e,t){const i=e[0]||e[1],r=t+Math.abs(e[0]||e[1])-1,s=e[0]?"colspan":"rowspan",o=e[0]?"col":"row",a=Math.min(t,r),l=Math.max(t,r),c=this[o],u=this[o]+this[s]-1;if(c>=t&&(this[o]+=i),i>0)t<=u&&t>c&&(this[s]+=i);else if(i<0){if(a<=c&&l>=u)return this.removed=!0,LC(Xh,this,null),!1;if(c>=a&&c<=l){const h=l-c+1,d=Math.abs(i)-h;this[o]-=d+i,this[s]-=h}else if(c<=a&&u>=l)this[s]+=i;else if(c<=a&&u>=a&&u<l){const h=u-a+1;this[s]-=h}}return LC(Xh,this,null),!0}isFarther(e,t){return e?t==="down"?e.row+e.rowspan-1<this.row+this.rowspan-1:t==="up"?e.row>this.row:t==="right"?e.col+e.colspan-1<this.col+this.colspan-1:t==="left"?e.col>this.col:null:!0}getLastRow(){return this.row+this.rowspan-1}getLastColumn(){return this.col+this.colspan-1}getRange(){return fj(Xh,this)||LC(Xh,this,this.cellRangeFactory(this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.getLastRow(),this.getLastColumn()))),fj(Xh,this)}}function PVe(n,e){IVe(n,e),e.add(n)}function IVe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function HC(n,e,t){return(e=OVe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OVe(n){var e=kVe(n,"string");return typeof e=="symbol"?e:e+""}function kVe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Zh(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var iu=new WeakSet;class xR{constructor(e){PVe(this,iu),HC(this,"plugin",void 0),HC(this,"mergedCells",[]),HC(this,"mergedCellsMatrix",new Map),HC(this,"hot",void 0),this.plugin=e,this.hot=e.hot}static IS_OVERLAPPING_WARNING(e){let{row:t,col:i}=e;return Kt`The merged cell declared at [${t}, ${i}], overlaps\x20
      with the other declared merged cell. The overlapping merged cell was not added to the table, please\x20
      fix your setup.`}get(e,t){var i;return this.mergedCellsMatrix.has(e)&&(i=this.mergedCellsMatrix.get(e).get(t))!==null&&i!==void 0?i:!1}getByRange(e){let t=!1;return j(this.mergedCells,i=>i.row<=e.from.row&&i.row+i.rowspan-1>=e.to.row&&i.col<=e.from.col&&i.col+i.colspan-1>=e.to.col?(t=i,t):!0),t}filterOverlappingMergeCells(e){const t=new Set;return this.mergedCells.forEach(r=>{const{row:s,col:o,colspan:a,rowspan:l}=r;for(let c=s;c<s+l;c++)for(let u=o;u<o+a;u++)t.add(`r${c},c${u}`)}),e.filter(r=>{const{row:s,col:o,colspan:a,rowspan:l}=r,c=new Set;let u=!1;for(let h=s;h<s+l;h++){for(let d=o;d<o+a;d++){const f=`r${h},c${d}`;if(t.has(f)){Yt(xR.IS_OVERLAPPING_WARNING(r)),u=!0;break}c.add(f)}if(u)break}return u||t.add(...c),!u})}getWithinRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{row:i,col:r}=e.getTopStartCorner(),{row:s,col:o}=e.getBottomEndCorner(),a=[];for(let l=i;l<=s;l++)for(let c=r;c<=o;c++){const u=this.get(l,c);u&&(t||!t&&u.row===l&&u.col===c)&&a.push(u)}return a}add(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=e.row,r=e.col,s=e.rowspan,o=e.colspan,a=new Da(i,r,s,o,this.hot._createCellCoords,this.hot._createCellRange),l=this.get(i,r),c=t?!1:this.isOverlapping(a);return!l&&!c?(this.hot&&a.normalize(this.hot),this.mergedCells.push(a),Zh(iu,this,gj).call(this,a),a):(Yt(xR.IS_OVERLAPPING_WARNING(a)),!1)}remove(e,t){const i=this.get(e,t),r=i?this.mergedCells.indexOf(i):-1;return i&&r!==-1?(this.mergedCells.splice(r,1),Zh(iu,this,DVe).call(this,i),i):!1}clear(){j(this.mergedCells,e=>{let{row:t,col:i,rowspan:r,colspan:s}=e;He(t,t+r,o=>{He(i,i+s,a=>{const l=this.hot.getCell(o,a);l&&(l.removeAttribute("rowspan"),l.removeAttribute("colspan"),l.style.display="")})})}),this.mergedCells.length=0,this.mergedCellsMatrix=new Map}isOverlapping(e){const t=e.getRange();for(let i=0;i<this.mergedCells.length;i++)if(this.mergedCells[i].getRange().overlaps(t))return!0;return!1}isFirstRenderableMergedCell(e,t){const i=this.get(e,t);return i&&this.hot.rowIndexMapper.getNearestNotHiddenIndex(i.row,1)===e&&this.hot.columnIndexMapper.getNearestNotHiddenIndex(i.col,1)===t}getFirstRenderableCoords(e,t){const i=this.get(e,t);if(!i||this.isFirstRenderableMergedCell(e,t))return this.hot._createCellCoords(e,t);const r=this.hot.rowIndexMapper.getNearestNotHiddenIndex(i.row,1),s=this.hot.columnIndexMapper.getNearestNotHiddenIndex(i.col,1);return this.hot._createCellCoords(r,s)}getStartMostColumnIndex(e,t){const i=Zh(iu,this,$C).call(this,e,"col",-1);let r=t;for(let s=0;s<i.length;s++)if(i[s]<=t){r=i[s];break}return r}getEndMostColumnIndex(e,t){const i=Zh(iu,this,$C).call(this,e,"col",1);let r=t;for(let s=0;s<i.length;s++)if(i[s]>=t){r=i[s];break}return r}getTopMostRowIndex(e,t){const i=Zh(iu,this,$C).call(this,e,"row",-1);let r=t;for(let s=0;s<i.length;s++)if(i[s]<=t){r=i[s];break}return r}getBottomMostRowIndex(e,t){const i=Zh(iu,this,$C).call(this,e,"row",1);let r=t;for(let s=0;s<i.length;s++)if(i[s]>=t){r=i[s];break}return r}shiftCollections(e,t,i){const r=[0,0];switch(e){case"right":r[0]+=i;break;case"left":r[0]-=i;break;case"down":r[1]+=i;break;case"up":r[1]-=i;break}const s=[];this.mergedCells.forEach(o=>{o.shift(r,t),o.removed&&s.push(o)}),s.forEach(o=>{this.mergedCells.splice(this.mergedCells.indexOf(o),1)}),this.mergedCellsMatrix.clear(),this.mergedCells.forEach(o=>{Zh(iu,this,gj).call(this,o)})}}function $C(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=new Map,r=t===1?n.getTopStartCorner():n.getBottomEndCorner(),s=t===1?n.getBottomEndCorner():n.getTopStartCorner();for(let o=r.row;t===1?o<=s.row:o>=s.row;o+=t)for(let a=r.col;t===1?a<=s.col:a>=s.col;a+=t){const l=e==="row"?o:a,c=this.get(o,a);let u=l;c&&(u=t===1?c[e]+c[`${e}span`]-1:c[e]),i.has(l)||i.set(l,new Set),i.get(l).add(u)}return Array.from(new Set(Array.from(i.entries()).filter(o=>{let[,a]=o;return a.size===1}).flatMap(o=>{let[,a]=o;return Array.from(a)})))}function gj(n){for(let e=n.row;e<n.row+n.rowspan;e++)for(let t=n.col;t<n.col+n.colspan;t++)this.mergedCellsMatrix.has(e)||this.mergedCellsMatrix.set(e,new Map),this.mergedCellsMatrix.get(e).set(t,n)}function DVe(n){for(let e=n.row;e<n.row+n.rowspan;e++)for(let t=n.col;t<n.col+n.colspan;t++)this.mergedCellsMatrix.get(e).delete(t)}function HM(n,e,t){return(e=NVe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NVe(n){var e=LVe(n,"string");return typeof e=="symbol"?e:e+""}function LVe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class HVe{constructor(e){HM(this,"plugin",void 0),HM(this,"mergedCellsCollection",void 0),HM(this,"currentFillData",null),this.plugin=e,this.mergedCellsCollection=this.plugin.mergedCellsCollection}correctSelectionAreaSize(e){if(e[0]===e[2]&&e[1]===e[3]){const t=this.mergedCellsCollection.get(e[0],e[1]);t&&(e[2]=e[0]+t.rowspan-1,e[3]=e[1]+t.colspan-1)}}getDirection(e,t){let i=null;return t[0]===e[0]&&t[1]===e[1]&&t[3]===e[3]?i="down":t[2]===e[2]&&t[1]===e[1]&&t[3]===e[3]?i="up":t[1]===e[1]&&t[2]===e[2]?i="right":i="left",i}snapDragArea(e,t,i,r){const s=t.slice(0),o=this.getAutofillSize(e,t,i),[a,l,c,u]=e,d=["up","down"].indexOf(i)>-1?c-a+1:u-l+1,f=Math.floor(o/d)*d,g=o-f,p=this.getFarthestCollection(e,t,i,r);if(p){if(i==="down"){const m=p.row+p.rowspan-a-g;s[2]+m>=this.plugin.hot.countRows()?s[2]-=g:s[2]+=g?m:0}else if(i==="right"){const m=p.col+p.colspan-l-g;s[3]+m>=this.plugin.hot.countCols()?s[3]-=g:s[3]+=g?m:0}else if(i==="up"){const m=c-g-p.row+1;s[0]+m<0?s[0]+=g:s[0]-=g?m:0}else if(i==="left"){const m=u-g-p.col+1;s[1]+m<0?s[1]+=g:s[1]-=g?m:0}}return this.updateCurrentFillCache({baseArea:e,dragDirection:i,foundMergedCells:r,fillSize:o,dragArea:s,cycleLength:d}),s}updateCurrentFillCache(e){this.currentFillData||(this.currentFillData={}),li(this.currentFillData,e)}getAutofillSize(e,t,i){const[r,s,o,a]=e,[l,c,u,h]=t;switch(i){case"up":return r-l;case"down":return u-o;case"left":return s-c;case"right":return h-a;default:return null}}getDragArea(e,t,i){const[r,s,o,a]=e,[l,c,u,h]=t;switch(i){case"up":return[l,c,r-1,a];case"down":return[o+1,s,u,a];case"left":return[l,c,o,s-1];case"right":return[r,a+1,u,h];default:return null}}getFarthestCollection(e,t,i,r){const[s,o,a,l]=e,c=["up","down"].indexOf(i)>-1,u=c?a:l,h=c?s:o,d=this.getAutofillSize(e,t,i),f=c?a-s+1:l-o+1,g=Math.floor(d/f)*f,p=d-g;let m=null,b=null,y=null;switch(i){case"up":m="includesVertically",y=u-p+1;break;case"left":m="includesHorizontally",y=u-p+1;break;case"down":m="includesVertically",y=h+p-1;break;case"right":m="includesHorizontally",y=h+p-1;break}return j(r,w=>{w[m](y)&&w.isFarther(b,i)&&(b=w)}),b}recreateAfterDataPopulation(e){if(!this.currentFillData)return;const t=this.getRangeFromChanges(e),i=this.currentFillData.foundMergedCells,r=this.currentFillData.dragDirection,s=(c,u)=>{switch(r){case"up":return c.row-u>=t.from.row;case"down":return c.row+c.rowspan-1+u<=t.to.row;case"left":return c.col-u>=t.from.column;case"right":return c.col+c.colspan-1+u<=t.to.column;default:return null}};let o=0,a=null,l=1;do for(let c=0;c<i.length;c+=1){if(a=i[c],o=l*this.currentFillData.cycleLength,s(a,o))switch(r){case"up":this.plugin.mergedCellsCollection.add({row:a.row-o,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"down":this.plugin.mergedCellsCollection.add({row:a.row+o,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"left":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col-o,colspan:a.colspan});break;case"right":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col+o,colspan:a.colspan});break}c===i.length-1&&(l+=1)}while(s(a,o));this.currentFillData=null,this.plugin.hot.render(),i.length>0&&this.plugin.ifChromeForceRepaint()}getRangeFromChanges(e){const t={min:null,max:null},i={min:null,max:null};return j(e,r=>{const s=r[0],o=this.plugin.hot.propToCol(r[1]);(t.min===null||s<t.min)&&(t.min=s),(t.max===null||s>t.max)&&(t.max=s),(i.min===null||o<i.min)&&(i.min=o),(i.max===null||o>i.max)&&(i.max=o)}),{from:{row:t.min,column:i.min},to:{row:t.max,column:i.max}}}dragAreaOverlapsCollections(e,t,i){const r=this.getDragArea(e,t,i),[s,o,a,l]=r,c=this.plugin.hot._createCellCoords(s,o),u=this.plugin.hot._createCellCoords(a,l),h=this.plugin.hot._createCellRange(c,c,u);return this.mergedCellsCollection.getWithinRange(h,!0).length>0}}function $M(n,e,t){return(e=$Ve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $Ve(n){var e=FVe(n,"string");return typeof e=="symbol"?e:e+""}function FVe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class BVe{constructor(e){$M(this,"plugin",void 0),$M(this,"hot",void 0),$M(this,"fullySelectedMergedCellClassName","fullySelectedMergedCell"),this.plugin=e,this.hot=e.hot}getSelectedMergedCellClassName(e,t,i,r){const s=Math.min(i[0],i[2]),o=Math.min(i[1],i[3]),a=Math.max(i[0],i[2]),l=Math.max(i[1],i[3]);if(r===void 0||!this.plugin.mergedCellsCollection.isFirstRenderableMergedCell(e,t))return;const u=this.plugin.mergedCellsCollection.get(e,t);if(!u)return;const h=u.getLastRow(),d=u.getLastColumn();if(s<=u.row&&o<=u.col&&a>=h&&l>=d)return`${this.fullySelectedMergedCellClassName}-${r}`;if(this.isMergeCellFullySelected(u,this.plugin.hot.getSelectedRange()))return`${this.fullySelectedMergedCellClassName}-multiple`}isMergeCellFullySelected(e,t){const i=[];if(!t||!e)return!1;for(let r=0;r<e.rowspan;r+=1)for(let s=0;s<e.colspan;s+=1)i.push(this.hot._createCellCoords(e.row+r,e.col+s));for(let r=0;r<i.length;r+=1){const s=[];for(let o=0;o<t.length;o+=1)s[o]=t[o].includes(i[r]);if(!s.includes(!0))return!1}return!0}getSelectedMergedCellClassNameToRemove(){const e=[];for(let t=0;t<=7;t+=1)e.push(`${this.fullySelectedMergedCellClassName}-${t}`);return e.push(`${this.fullySelectedMergedCellClassName}-multiple`),e}}function VVe(n){return{key:"mergeCells",name(){const e=this.getSelectedLast();if(e){const t=n.mergedCellsCollection.get(e[0],e[1]);if(t.row===e[0]&&t.col===e[1]&&t.row+t.rowspan-1===e[2]&&t.col+t.colspan-1===e[3])return this.getTranslatedPhrase(ON)}return this.getTranslatedPhrase(IN)},callback(){const e=this.getSelectedRangeLast();if(!e)return;e.setDirection(this.isRtl()?"NE-SW":"NW-SE");const{from:t,to:i}=e;n.toggleMerge(e),this.selectCell(t.row,t.col,i.row,i.col,!1)},disabled(){const e=this.getSelectedLast();return e?Da.isSingleCell({row:e[0],col:e[1],rowspan:e[2]-e[0]+1,colspan:e[3]-e[1]+1})||this.selection.isSelectedByCorner():!0},hidden:!1}}function Wb(n,e,t){return(e=WVe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WVe(n){var e=jVe(n,"string");return typeof e=="symbol"?e:e+""}function jVe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class pj{constructor(e){Wb(this,"data",void 0),Wb(this,"next",null),Wb(this,"prev",null),this.data=e}}class FC{constructor(){Wb(this,"first",null),Wb(this,"last",null)}push(e){const t=new pj(e);if(this.first===null)this.first=t,this.last=t;else{const i=this.last;this.last=t,t.prev=i,i.next=t}return t}unshift(e){const t=new pj(e);if(this.first===null)this.first=t,this.last=t;else{const i=this.first;this.first=t,t.next=i,i.prev=t}}inorder(e){let t=this.first;for(;t;){const i=e(t);if(t===this.last||i===!0)break;t=t.next}}remove(e){if(this.first===null)return!1;let t=this.first,i,r;for(;t;){if(t.data===e)return i=t.next,r=t.prev,i&&(i.prev=r),r&&(r.next=i),t===this.first&&(this.first=i),t===this.last&&(this.last=r),!0;t=t.next}return!1}hasCycle(){let e=this.first,t=this.first;for(;;){if(e===null||(e=e.next,e===null))return!1;if(e=e.next,t=t.next,e===t)return!0}}pop(){if(this.last===null)return null;const e=this.last;return this.last=this.last.prev,e}shift(){if(this.first===null)return null;const e=this.first;return this.first=this.first.next,e}recursiveReverse(){function e(i,r){r&&(e(r,r.next),r.next=i)}if(!this.first)return;e(this.first,this.first.next),this.first.next=null;const t=this.first;this.first=this.last,this.last=t}reverse(){if(!this.first||!this.first.next)return;let e=this.first.next,t=this.first,i;for(;e;)i=e.next,e.next=t,t.prev=e,t=e,e=i;this.first.next=null,this.last.prev=null,i=this.first,this.first=t,this.last=i}}function zVe(n,e){xq(n,e),e.add(n)}function Qh(n,e,t){xq(n,e),e.set(n,t)}function xq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wt(n,e){return n.get(TR(n,e))}function ns(n,e,t){return n.set(TR(n,e),t),t}function TR(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ra=new WeakMap,Ea=new WeakMap,xa=new WeakMap,Ta=new WeakMap,UI=new WeakMap,BC=new WeakMap,VC=new WeakMap,FM=new WeakSet;class UVe{constructor(e){let{mergedCellsGetter:t,rowIndexMapper:i,columnIndexMapper:r}=e;zVe(this,FM),Qh(this,Ra,new FC),Qh(this,Ea,new FC),Qh(this,xa,null),Qh(this,Ta,null),Qh(this,UI,null),Qh(this,BC,null),Qh(this,VC,null),ns(UI,this,t),ns(BC,this,i),ns(VC,this,r)}getCurrentVerticalNode(){return Wt(Ta,this).data}getFirstVerticalNode(){return Wt(Ea,this).first.data}getNextVerticalNode(){return Wt(Ta,this).next.data}getPrevVerticalNode(){return Wt(Ta,this).prev.data}getCurrentHorizontalNode(){return Wt(xa,this).data}getFirstHorizontalNode(){return Wt(Ra,this).first.data}getNextHorizontalNode(){return Wt(xa,this).next.data}getPrevHorizontalNode(){return Wt(xa,this).prev.data}setPrevNodeAsActive(){ns(Ta,this,Wt(Ta,this).prev),ns(xa,this,Wt(xa,this).prev)}setNextNodeAsActive(){ns(Ta,this,Wt(Ta,this).next),ns(xa,this,Wt(xa,this).next)}buildFocusOrder(e){const t=e.getTopStartCorner(),i=e.getBottomEndCorner(),r=new WeakSet;ns(Ra,this,new FC);for(let o=t.row;o<=i.row;o++)if(!Wt(BC,this).isHidden(o))for(let a=t.col;a<=i.col;a++){if(Wt(VC,this).isHidden(a))continue;const l=TR(FM,this,mj).call(this,e,Wt(Ra,this),r,o,a);l&&ns(xa,this,l)}Wt(Ra,this).first&&(Wt(Ra,this).first.prev=Wt(Ra,this).last,Wt(Ra,this).last.next=Wt(Ra,this).first);const s=new WeakSet;ns(Ea,this,new FC);for(let o=t.col;o<=i.col;o++)if(!Wt(VC,this).isHidden(o))for(let a=t.row;a<=i.row;a++){if(Wt(BC,this).isHidden(a))continue;const l=TR(FM,this,mj).call(this,e,Wt(Ea,this),s,a,o);l&&ns(Ta,this,l)}Wt(Ea,this).first&&(Wt(Ea,this).first.prev=Wt(Ea,this).last,Wt(Ea,this).last.next=Wt(Ea,this).first)}setActiveNode(e,t){return Wt(Ra,this).inorder(i=>{const{rowStart:r,rowEnd:s,colStart:o,colEnd:a}=i.data;if(e>=r&&e<=s&&t>=o&&t<=a)return ns(xa,this,i),!1}),Wt(Ea,this).inorder(i=>{const{rowStart:r,rowEnd:s,colStart:o,colEnd:a}=i.data;if(e>=r&&e<=s&&t>=o&&t<=a)return ns(Ta,this,i),!1}),this}}function mj(n,e,t,i,r){const s=n.getTopStartCorner(),o=n.getBottomEndCorner(),a=n.highlight.clone().normalize(),l=Wt(UI,this).call(this,i,r);if(l&&t.has(l))return null;const c={colStart:r,colEnd:r,rowStart:i,rowEnd:i};if(l){if(t.add(l),l.row<s.row||l.row+l.rowspan-1>o.row||l.col<s.col||l.col+l.colspan-1>o.col)return null;c.colStart=l.col,c.colEnd=l.col+l.colspan-1,c.rowStart=l.row,c.rowEnd=l.row+l.rowspan-1}const u=e.push(c);return i===a.row&&r===a.col||l&&a.row>=l.row&&a.row<=l.row+l.rowspan-1&&a.col>=l.col&&a.col<=l.col+l.colspan-1?u:null}function GVe(n){const{hot:e}=n,{rowIndexMapper:t,columnIndexMapper:i}=e;function r(){}function s(o,a,l){const c=n.mergedCellsCollection.get(a,l);if(!lt(c)){o.removeAttribute("rowspan"),o.removeAttribute("colspan"),o.style.display="";return}const{row:u,col:h,colspan:d,rowspan:f}=c,[g,p]=n.translateMergedCellToRenderable(u,f,h,d),m=t.getRenderableFromVisualIndex(a),b=i.getRenderableFromVisualIndex(l),y=g-m+1,w=p-b+1,R=t.getNearestNotHiddenIndex(u,1),E=i.getNearestNotHiddenIndex(h,1),_=Math.min(f,y),T=Math.min(d,w);R===a&&E===l?(o.setAttribute("rowspan",_),o.setAttribute("colspan",T)):(o.removeAttribute("rowspan"),o.removeAttribute("colspan"),o.style.display="none")}return{before:r,after:s}}function YVe(n,e){Tq(n,e),e.add(n)}function WC(n,e,t){Tq(n,e),e.set(n,t)}function Tq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function BM(n,e,t){return(e=KVe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KVe(n){var e=qVe(n,"string");return typeof e=="symbol"?e:e+""}function qVe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Iw(n,e,t){return n.set(Ut(n,e),t),t}function un(n,e){return n.get(Ut(n,e))}function Ut(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ie.getSingleton().register("beforeMergeCells");Ie.getSingleton().register("afterMergeCells");Ie.getSingleton().register("beforeUnmergeCells");Ie.getSingleton().register("afterUnmergeCells");const jb="mergeCells",XVe=150,vj=jb;var Xs=new WeakMap,Qs=new WeakMap,Ga=new WeakMap,bj=new WeakMap,Zt=new WeakSet;class ZVe extends Lt{constructor(){super(...arguments),YVe(this,Zt),BM(this,"mergedCellsCollection",null),BM(this,"autofillCalculations",null),BM(this,"selectionCalculations",null),WC(this,Xs,null),WC(this,Qs,{row:0,col:0}),WC(this,Ga,new UVe({mergedCellsGetter:(e,t)=>this.mergedCellsCollection.get(e,t),rowIndexMapper:this.hot.rowIndexMapper,columnIndexMapper:this.hot.columnIndexMapper})),WC(this,bj,GVe(this))}static get PLUGIN_KEY(){return jb}static get PLUGIN_PRIORITY(){return XVe}isEnabled(){return!!this.hot.getSettings()[jb]}enablePlugin(){var e=this;this.enabled||(this.mergedCellsCollection=new xR(this),this.autofillCalculations=new HVe(this),this.selectionCalculations=new BVe(this),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,QVe).call(e,...i)}),this.addHook("modifyTransformFocus",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,eWe).call(e,...i)}),this.addHook("modifyTransformStart",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,tWe).call(e,...i)}),this.addHook("modifyTransformEnd",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,nWe).call(e,...i)}),this.addHook("beforeSelectionHighlightSet",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,iWe).call(e,...i)}),this.addHook("beforeSetRangeStart",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,wj).call(e,...i)}),this.addHook("beforeSetRangeStartOnly",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,wj).call(e,...i)}),this.addHook("beforeSelectionFocusSet",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,oWe).call(e,...i)}),this.addHook("afterSelectionFocusSet",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,aWe).call(e,...i)}),this.addHook("afterSelectionEnd",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,lWe).call(e,...i)}),this.addHook("modifyGetCellCoords",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,rWe).call(e,...i)}),this.addHook("afterIsMultipleSelection",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,JVe).call(e,...i)}),this.addHook("afterRenderer",function(){return un(bj,e).after(...arguments)}),this.addHook("afterContextMenuDefaultOptions",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,sWe).call(e,...i)}),this.addHook("afterGetCellMeta",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,cWe).call(e,...i)}),this.addHook("afterViewportRowCalculatorOverride",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,uWe).call(e,...i)}),this.addHook("afterViewportColumnCalculatorOverride",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,hWe).call(e,...i)}),this.addHook("modifyAutofillRange",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,dWe).call(e,...i)}),this.addHook("afterCreateCol",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,fWe).call(e,...i)}),this.addHook("afterRemoveCol",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,gWe).call(e,...i)}),this.addHook("afterCreateRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,pWe).call(e,...i)}),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,mWe).call(e,...i)}),this.addHook("afterChange",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,vWe).call(e,...i)}),this.addHook("beforeDrawBorders",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,bWe).call(e,...i)}),this.addHook("afterDrawSelection",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,wWe).call(e,...i)}),this.addHook("beforeRemoveCellClassNames",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,yWe).call(e,...i)}),this.addHook("beforeBeginEditing",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,CWe).call(e,...i)}),this.addHook("modifyRowHeightByOverlayName",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Zt,e,SWe).call(e,...i)}),this.addHook("beforeUndoStackChange",(t,i)=>{if(i==="MergeCells")return!1}),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){this.clearCollections(),this.unregisterShortcuts(),this.hot.render(),super.disablePlugin()}updatePlugin(){const e=this.hot.getSettings()[jb];this.disablePlugin(),this.enablePlugin(),this.generateFromSettings(e),super.updatePlugin()}ifChromeForceRepaint(){if(!AD())return;const e=[];let t=[];this.mergedCellsCollection.mergedCells.forEach(i=>{const{row:r,rowspan:s}=i;for(let o=r+1;o<r+s;o++)t.push(o)}),t=[...new Set(t)],t.forEach(i=>{const r=this.hot.rowIndexMapper.getRenderableFromVisualIndex(i);this.hot.view._wt.wtOverlays.getOverlays(!0).map(s=>(s==null?void 0:s.name)==="master"?s:s.clone.wtTable).forEach(s=>{const o=s.getRow(r);o&&(o.style.background=Rp(o,"backgroundColor").replace(")",", 0.99)"),e.push(o))})}),this.hot._registerTimeout(()=>{e.forEach(i=>{i.style.background=Rp(i,"backgroundColor").replace(", 0.99)",")")})},1)}validateSetting(e){return e?Da.containsNegativeValues(e)?(Yt(Da.NEGATIVE_VALUES_WARNING(e)),!1):Da.isOutOfBounds(e,this.hot.countRows(),this.hot.countCols())?(Yt(Da.IS_OUT_OF_BOUNDS_WARNING(e)),!1):Da.isSingleCell(e)?(Yt(Da.IS_SINGLE_CELL(e)),!1):Da.containsZeroSpan(e)?(Yt(Da.ZERO_SPAN_WARNING(e)),!1):!0:!1}generateFromSettings(e){if(!Array.isArray(e))return;const t=e.filter(s=>this.validateSetting(s)),i=this.mergedCellsCollection.filterOverlappingMergeCells(t),r=[];i.forEach(s=>{const{row:o,col:a,rowspan:l,colspan:c}=s,u=this.hot._createCellCoords(o,a),h=this.hot._createCellCoords(o+l-1,a+c-1),d=this.hot._createCellRange(u,u,h);this.mergeRange(d,!0,!0);for(let f=o;f<o+l;f++)for(let g=a;g<a+c;g++)(f!==o||g!==a)&&r.push([f,g,null])}),r.length!==0&&this.hot.setDataAtCell(r,void 0,void 0,this.pluginName)}clearCollections(){this.mergedCellsCollection.clear()}canMergeRange(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?!0:this.validateSetting(e)}mergeSelection(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.hot.getSelectedRangeLast();if(!e)return;e.setDirection(this.hot.isRtl()?"NE-SW":"NW-SE");const{from:t,to:i}=e;this.unmergeRange(e,!0),this.mergeRange(e),this.hot.selectCell(t.row,t.col,i.row,i.col,!1)}unmergeSelection(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.hot.getSelectedRangeLast();if(!e)return;const{from:t,to:i}=e;this.unmergeRange(e,!0),this.hot.selectCell(t.row,t.col,i.row,i.col,!1)}mergeRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=e.getTopStartCorner(),s=e.getBottomEndCorner(),o={row:r.row,col:r.col,rowspan:s.row-r.row+1,colspan:s.col-r.col+1},a=[];let l=null;return this.canMergeRange(o,t)?(this.hot.runHooks("beforeMergeCells",e,t),He(0,o.rowspan-1,u=>{He(0,o.colspan-1,h=>{let d=null;a[u]||(a[u]=[]),u===0&&h===0?d=this.hot.getSourceDataAtCell(this.hot.toPhysicalRow(o.row),this.hot.toPhysicalColumn(o.col)):this.hot.setCellMeta(o.row+u,o.col+h,"hidden",!0),a[u][h]=d})}),this.hot.setCellMeta(o.row,o.col,"spanned",!0),this.mergedCellsCollection.add(o,t)?(i?l=[o.row,o.col,a]:this.hot.populateFromArray(o.row,o.col,a,void 0,void 0,this.pluginName),t||this.ifChromeForceRepaint(),this.hot.runHooks("afterMergeCells",e,o,t),l):!0):!1}unmergeRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=this.mergedCellsCollection.getWithinRange(e);i.length!==0&&(this.hot.runHooks("beforeUnmergeCells",e,t),j(i,r=>{this.mergedCellsCollection.remove(r.row,r.col),He(0,r.rowspan-1,s=>{He(0,r.colspan-1,o=>{this.hot.removeCellMeta(r.row+s,r.col+o,"hidden"),this.hot.removeCellMeta(r.row+s,r.col+o,"copyable")})}),this.hot.removeCellMeta(r.row,r.col,"spanned")}),this.hot.runHooks("afterUnmergeCells",e,t),this.hot.render())}toggleMerge(e){const t=this.mergedCellsCollection.get(e.from.row,e.from.col);t.row===e.from.row&&t.col===e.from.col&&t.row+t.rowspan-1===e.to.row&&t.col+t.colspan-1===e.to.col?this.unmergeRange(e):this.mergeSelection(e)}merge(e,t,i,r){const s=this.hot._createCellCoords(e,t),o=this.hot._createCellCoords(i,r);this.mergeRange(this.hot._createCellRange(s,s,o))}unmerge(e,t,i,r){const s=this.hot._createCellCoords(e,t),o=this.hot._createCellCoords(i,r);this.unmergeRange(this.hot._createCellRange(s,s,o))}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control","m"]],callback:()=>{const i=this.hot.getSelectedRangeLast();i&&!i.isSingleHeader()&&(this.toggleMerge(i),this.hot.render())},runOnlyIf:i=>!i.altKey,group:vj})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(vj)}modifyViewportRowStart(e,t){const i=this.hot.rowIndexMapper,r=i.getVisualFromRenderableIndex(e.startRow);for(let s=0;s<t;s+=1){const o=this.mergedCellsCollection.get(r,s);if(lt(o)){const a=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(o.row,1));if(a<e.startRow){e.startRow=a,this.modifyViewportRowStart(e,t);return}}}}modifyViewportRowEnd(e,t){const i=this.hot.rowIndexMapper,r=i.getVisualFromRenderableIndex(e.endRow);for(let s=0;s<t;s+=1){const o=this.mergedCellsCollection.get(r,s);if(lt(o)){const a=o.row+o.rowspan-1,l=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(a,-1));if(l>e.endRow){e.endRow=l,this.modifyViewportRowEnd(e,t);return}}}}modifyViewportColumnStart(e,t){const i=this.hot.columnIndexMapper,r=i.getVisualFromRenderableIndex(e.startColumn);for(let s=0;s<t;s+=1){const o=this.mergedCellsCollection.get(s,r);if(lt(o)){const a=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(o.col,1));if(a<e.startColumn){e.startColumn=a,this.modifyViewportColumnStart(e,t);return}}}}modifyViewportColumnEnd(e,t){const i=this.hot.columnIndexMapper,r=i.getVisualFromRenderableIndex(e.endColumn);for(let s=0;s<t;s+=1){const o=this.mergedCellsCollection.get(s,r);if(lt(o)){const a=o.col+o.colspan-1,l=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(a,-1));if(l>e.endColumn){e.endColumn=l,this.modifyViewportColumnEnd(e,t);return}}}}translateMergedCellToRenderable(e,t,i,r){const{rowIndexMapper:s,columnIndexMapper:o}=this.hot;let a,l;t===0?a=s.getNearestNotHiddenIndex(e,1):a=s.getNearestNotHiddenIndex(e+t-1,-1),r===0?l=o.getNearestNotHiddenIndex(i,1):l=o.getNearestNotHiddenIndex(i+r-1,-1);const c=e>=0?s.getRenderableFromVisualIndex(a):e,u=i>=0?o.getRenderableFromVisualIndex(l):i;return[c,u]}}function QVe(){this.generateFromSettings(this.hot.getSettings()[jb]),this.hot.render()}function JVe(n){if(n){const e=this.mergedCellsCollection.mergedCells,t=this.hot.getSelectedRangeLast(),i=t.getTopStartCorner(),r=t.getBottomEndCorner();for(let s=0;s<e.length;s+=1)if(i.row===e[s].row&&i.col===e[s].col&&r.row===e[s].row+e[s].rowspan-1&&r.col===e[s].col+e[s].colspan-1)return!1}return n}function eWe(n){un(Qs,this).row=n.row,un(Qs,this).col=n.col}function tWe(n){const e=this.hot.getSelectedRangeLast(),{highlight:t}=e,{columnIndexMapper:i,rowIndexMapper:r}=this.hot;un(Xs,this)&&(r.getRenderableFromVisualIndex(un(Xs,this).row)!==null&&(t.row=un(Xs,this).row),i.getRenderableFromVisualIndex(un(Xs,this).col)!==null&&(t.col=un(Xs,this).col),Iw(Xs,this,null));const s=this.mergedCellsCollection.get(t.row,t.col);if(!s)return;const o=s.col,a=s.col+s.colspan-1;if(n.col<0){const u=t.col>=o&&t.col<=a?o-1:a,h=i.getNearestNotHiddenIndex(u,-1);h===null?n.col=-this.hot.view.countRenderableColumnsInRange(0,t.col):n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(h,t.col)-1,1)}else if(n.col>0){const u=t.col>=o&&t.col<=a?a+1:o,h=i.getNearestNotHiddenIndex(u,1);h===null?n.col=this.hot.view.countRenderableColumnsInRange(t.col,this.hot.countCols()):n.col=Math.max(this.hot.view.countRenderableColumnsInRange(t.col,h)-1,1)}const l=s.row,c=s.row+s.rowspan-1;if(n.row<0){const u=t.row>=l&&t.row<=c?l-1:c,h=r.getNearestNotHiddenIndex(u,-1);h===null?n.row=-this.hot.view.countRenderableRowsInRange(0,t.row):n.row=-Math.max(this.hot.view.countRenderableRowsInRange(h,t.row)-1,1)}else if(n.row>0){const u=t.row>=l&&t.row<=c?c+1:l,h=r.getNearestNotHiddenIndex(u,1);h===null?n.row=this.hot.view.countRenderableRowsInRange(t.row,this.hot.countRows()):n.row=Math.max(this.hot.view.countRenderableRowsInRange(t.row,h)-1,1)}}function nWe(n){const e=this.hot.getSelectedRangeLast(),t=e.clone(),{to:i}=e,{columnIndexMapper:r,rowIndexMapper:s}=this.hot,o=(a,l)=>{t.expand(this.hot._createCellCoords(a,l));for(let c=0;c<this.mergedCellsCollection.mergedCells.length;c+=1)t.expandByRange(this.mergedCellsCollection.mergedCells[c].getRange())};if(n.col<0){let a=this.mergedCellsCollection.getStartMostColumnIndex(e,i.col)+n.col;o(i.row,a),e.getHorizontalDirection()==="E-W"&&t.getHorizontalDirection()==="E-W"&&(a=t.getTopStartCorner().col);const l=r.getNearestNotHiddenIndex(a,1);l!==null&&(n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(l,i.col)-1,1))}else if(n.col>0){let a=this.mergedCellsCollection.getEndMostColumnIndex(e,i.col)+n.col;o(i.row,a),e.getHorizontalDirection()==="W-E"&&t.getHorizontalDirection()==="W-E"&&(a=t.getBottomEndCorner().col);const l=r.getNearestNotHiddenIndex(a,-1);l!==null&&(n.col=Math.max(this.hot.view.countRenderableColumnsInRange(i.col,l)-1,1))}if(n.row<0){let a=this.mergedCellsCollection.getTopMostRowIndex(e,i.row)+n.row;o(a,i.col),e.getVerticalDirection()==="S-N"&&t.getVerticalDirection()==="S-N"&&(a=t.getTopStartCorner().row);const l=s.getNearestNotHiddenIndex(a,1);l!==null&&(n.row=-Math.max(this.hot.view.countRenderableRowsInRange(l,i.row)-1,1))}else if(n.row>0){let a=this.mergedCellsCollection.getBottomMostRowIndex(e,i.row)+n.row;o(a,i.col),e.getVerticalDirection()==="N-S"&&t.getVerticalDirection()==="N-S"&&(a=t.getBottomStartCorner().row);const l=s.getNearestNotHiddenIndex(a,-1);l!==null&&(n.row=Math.max(this.hot.view.countRenderableRowsInRange(i.row,l)-1,1))}}function iWe(){const n=this.hot.getSelectedRangeLast(),{highlight:e}=n;if(this.hot.selection.isSelectedByColumnHeader()||this.hot.selection.isSelectedByRowHeader()){Iw(Xs,this,e.clone());return}for(let i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1)n.expandByRange(this.mergedCellsCollection.mergedCells[i].getRange(),!1);for(let i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1)n.expandByRange(this.mergedCellsCollection.mergedCells[i].getRange(),!1);const t=this.mergedCellsCollection.get(e.row,e.col);Iw(Xs,this,e.clone()),t&&e.assign(t)}function rWe(n,e){if(n<0||e<0)return;const t=this.mergedCellsCollection.get(n,e);if(!t)return;const{row:i,col:r,colspan:s,rowspan:o}=t;return[i,r,i+o-1,r+s-1]}function sWe(n){n.items.push({name:"---------"},VVe(this))}function wj(){Iw(Xs,this,null)}function oWe(){if(un(Xs,this).isCell())return;const n=this.hot.getSelectedRangeLast(),e=n.getVerticalDirection(),t=n.getHorizontalDirection(),i=un(Xs,this).clone().normalize();un(Ga,this).setActiveNode(i.row,i.col),un(Qs,this).row>0||un(Qs,this).col>0?un(Ga,this).setPrevNodeAsActive():(t==="E-W"&&un(Qs,this).col<0||e==="S-N"&&un(Qs,this).row<0)&&un(Ga,this).setNextNodeAsActive()}function aWe(n,e){const t=this.hot.getSelectedRangeLast(),{columnIndexMapper:i,rowIndexMapper:r}=this.hot;let s=null,o=null;if(un(Qs,this).col<0){const{rowEnd:a,colEnd:l}=un(Ga,this).getPrevHorizontalNode();o=i.getNearestNotHiddenIndex(l,-1),s=r.getNearestNotHiddenIndex(a,-1)}else if(un(Qs,this).col>0){const{rowStart:a,colStart:l}=un(Ga,this).getNextHorizontalNode();o=i.getNearestNotHiddenIndex(l,1),s=r.getNearestNotHiddenIndex(a,1)}else if(un(Qs,this).row<0){const{rowEnd:a,colEnd:l}=un(Ga,this).getPrevVerticalNode();o=i.getNearestNotHiddenIndex(l,-1),s=r.getNearestNotHiddenIndex(a,-1)}else if(un(Qs,this).row>0){const{rowStart:a,colStart:l}=un(Ga,this).getNextVerticalNode();o=i.getNearestNotHiddenIndex(l,1),s=r.getNearestNotHiddenIndex(a,1)}if(s!==null||o!==null){const a=this.hot._createCellCoords(s,o),l=this.mergedCellsCollection.get(a.row,a.col),c=this.hot.selection.highlight.getFocus();n=a.row,e=a.col,l?t.highlight.assign({row:this.hot.rowIndexMapper.getNearestNotHiddenIndex(l.row,1),col:this.hot.columnIndexMapper.getNearestNotHiddenIndex(l.col,1)}):t.highlight.assign(a),c.clear(),c.add(a).commit()}un(Ga,this).setActiveNode(n,e),Iw(Qs,this,{row:0,col:0})}function lWe(){this.hot.getSelectedRangeLast().isHeader()||un(Ga,this).buildFocusOrder(this.hot.getSelectedRangeLast())}function cWe(n,e,t){const i=this.mergedCellsCollection.get(n,e);i&&(i.row!==n||i.col!==e?t.copyable=!1:(t.rowspan=i.rowspan,t.colspan=i.colspan))}function uWe(n){const e=this.hot.countCols();this.modifyViewportRowStart(n,e),this.modifyViewportRowEnd(n,e)}function hWe(n){const e=this.hot.countRows();this.modifyViewportColumnStart(n,e),this.modifyViewportColumnEnd(n,e)}function dWe(n,e){this.autofillCalculations.correctSelectionAreaSize(e);const t=this.autofillCalculations.getDirection(e,n);let i=n;if(this.autofillCalculations.dragAreaOverlapsCollections(e,i,t))return i=e,i;const r=this.hot._createCellCoords(e[0],e[1]),s=this.hot._createCellCoords(e[2],e[3]),o=this.hot._createCellRange(r,r,s),a=this.mergedCellsCollection.getWithinRange(o);return a.length===0||(i=this.autofillCalculations.snapDragArea(e,i,t,a)),i}function fWe(n,e){this.mergedCellsCollection.shiftCollections("right",n,e)}function gWe(n,e){this.mergedCellsCollection.shiftCollections("left",n,e)}function pWe(n,e,t){t!=="auto"&&this.mergedCellsCollection.shiftCollections("down",n,e)}function mWe(n,e){this.mergedCellsCollection.shiftCollections("up",n,e)}function vWe(n,e){e==="Autofill.fill"&&this.autofillCalculations.recreateAfterDataPopulation(n)}function bWe(n,e){if(e&&e==="area"){const t=this.hot.getSelectedRangeLast(),i=this.mergedCellsCollection.getWithinRange(t);j(i,r=>{t.getBottomEndCorner().row===r.getLastRow()&&t.getBottomEndCorner().col===r.getLastColumn()&&(n[2]=r.row,n[3]=r.col)})}}function wWe(n,e,t,i){if(t)return this.selectionCalculations.getSelectedMergedCellClassName(n,e,t,i)}function yWe(){return this.selectionCalculations.getSelectedMergedCellClassNameToRemove()}function CWe(n,e,t,i){if(!(i instanceof MouseEvent))return;const r=this.hot.getSelectedRangeLast(),s=this.mergedCellsCollection.getByRange(r);if(!s)return;const o=this.hot._createCellCoords(s.row,s.col),a=this.hot._createCellCoords(s.row+s.rowspan-1,s.col+s.colspan-1);return this.hot.selection.getLayerLevel()===0&&r.isEqual(this.hot._createCellRange(o,o,a))}function SWe(n,e,t){if(this.hot.getSettings().rowHeaders||t==="bottom"||t==="bottom_inline_start_corner")return n;let i,r;if(t==="master")i=this.hot.view.getFirstRenderedVisibleColumn(),r=this.hot.view.getLastRenderedVisibleColumn();else{const d=this.hot.view.getOverlayByName(t);i=this.hot.columnIndexMapper.getVisualFromRenderableIndex(d.clone.wtTable.getFirstRenderedColumn()),r=this.hot.columnIndexMapper.getVisualFromRenderableIndex(d.clone.wtTable.getLastRenderedColumn())}if(!this.mergedCellsCollection.get(e,i))return n;const o=this.hot._createCellCoords(e,i),a=this.hot._createCellCoords(e,r),l=this.hot._createCellRange(o,o,a),c=this.mergedCellsCollection.getWithinRange(l),u=c.reduce((d,f)=>{let{rowspan:g}=f;return Math.max(d,g)},1);let h=0;return c.length>1&&c[0].rowspan<u&&(h=u-c[0].rowspan),c.forEach(d=>{var f;let{rowspan:g}=d,p=0;t==="top"||t==="top_inline_start_corner"?p=Math.min(u,this.hot.view.countNotHiddenFixedRowsTop()-e):p=g-h,n=Math.max((f=n)!==null&&f!==void 0?f:0,Ut(Zt,this,_We).call(this,e,p))}),n}function _We(n,e){const t=this.hot.view._wt.wtSettings.getSettingPure("defaultRowHeight"),i=this.hot.getPlugin("autoRowSize");let r=0;for(let o=n;o<n+e;o++)if(!this.hot.rowIndexMapper.isHidden(o)){var s;r+=(s=i==null?void 0:i.getRowHeight(o))!==null&&s!==void 0?s:t}return r}function RWe(n,e){return function(t,i){const[,...r]=t,[,...s]=i;return function o(a){const l=n[a],c=e[a],u=r[a],h=s[a],d=c.multiColumnSorting,g=(d.compareFunctionFactory?d.compareFunctionFactory:rK(c.type))(l,c,d)(u,h);if(g===el){const p=a+1;if(typeof e[p]<"u")return o(p)}return g}(0)}}function yj(){Yt(Kt`Plugins \`columnSorting\` and \`multiColumnSorting\` should not be enabled simultaneously. 
    Only \`multiColumnSorting\` will work. The \`columnSorting\` plugin will be disabled.`)}const Mq="sort";function EWe(n,e,t){const i=[];return t===!1||n.isColumnSorted(e)&&n.getNumberOfSortedColumns()>1&&i.push(`${Mq}-${n.getIndexOfColumnInSortQueue(e)+1}`),i}function xWe(n){const e=n.className.split(" "),t=new RegExp(`^${Mq}-[0-9]{1,2}$`);return e.filter(i=>t.test(i))}function TWe(n,e,t){return(e=MWe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function MWe(n){var e=AWe(n,"string");return typeof e=="symbol"?e:e+""}function AWe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const MR="multiColumnSorting",PWe=170,VM="columnSorting",Cj=MR;iK(MR,RWe);class IWe extends fK{constructor(){super(...arguments),TWe(this,"pluginKey",MR)}static get PLUGIN_KEY(){return MR}static get PLUGIN_PRIORITY(){return PWe}isEnabled(){return super.isEnabled()}enablePlugin(){!this.enabled&&this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[VM]&&(yj(),this.hot.getPlugin(VM).disablePlugin()),super.enablePlugin()}disablePlugin(){super.disablePlugin()}registerShortcuts(){super.registerShortcuts(),this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Shift","Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();return e.row===-1&&e.col>=0&&this.sort(this.getNextSortConfig(e.col,uR)),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.isHeader()},relativeToGroup:ch,position:"before",group:Cj})}unregisterShortcuts(){super.unregisterShortcuts(),this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(Cj)}sort(e){super.sort(e)}clearSort(){super.clearSort()}isSorted(){return super.isSorted()}getSortConfig(e){return super.getSortConfig(e)}setSortConfig(e){super.setSortConfig(e)}getNormalizedSortConfigs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)?e:[e]}updateHeaderClasses(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];super.updateHeaderClasses(e,...i),Ze(e,xWe(e)),this.enabled!==!1&&ue(e,EWe(...i))}onUpdateSettings(e){this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[VM]&&yj(),super.onUpdateSettings(e)}onAfterOnCellMouseDown(e,t){ZL(t.row,t.col,e)!==!1&&this.wasClickableHeaderClicked(e,t.col)&&(this.hot.getShortcutManager().isCtrlPressed()?(this.hot.deselectCell(),this.hot.selectColumns(t.col),this.sort(this.getNextSortConfig(t.col,uR))):this.sort(this.getColumnNextConfig(t.col)))}}function Sj(n,e,t){return(e=OWe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OWe(n){var e=kWe(n,"string");return typeof e=="symbol"?e:e+""}function kWe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const DWe="multipleSelectionHandles",NWe=160;class LWe extends Lt{constructor(){super(...arguments),Sj(this,"dragged",[]),Sj(this,"lastSetCell",null)}static get PLUGIN_KEY(){return DWe}static get PLUGIN_PRIORITY(){return NWe}isEnabled(){return fc()}enablePlugin(){this.enabled||(this.registerListeners(),super.enablePlugin())}registerListeners(){const e=this,{rootElement:t}=this.hot;function i(r){if(e.dragged.length===1)return e.dragged.splice(0,e.dragged.length),!0;const s=e.dragged.indexOf(r);if(s===-1)return!1;s===0?e.dragged=e.dragged.slice(0,1):s===1&&(e.dragged=e.dragged.slice(-1))}this.eventManager.addEventListener(t,"touchstart",r=>{let s;if(Ue(r.target,"topSelectionHandle-HitArea"))return s=e.hot.getSelectedRangeLast(),e.dragged.push("top"),e.touchStartRange={width:s.getWidth(),height:s.getHeight(),direction:s.getDirection()},r.preventDefault(),!1;if(Ue(r.target,"bottomSelectionHandle-HitArea"))return s=e.hot.getSelectedRangeLast(),e.dragged.push("bottom"),e.touchStartRange={width:s.getWidth(),height:s.getHeight(),direction:s.getDirection()},r.preventDefault(),!1}),this.eventManager.addEventListener(t,"touchend",r=>{if(Ue(r.target,"topSelectionHandle-HitArea"))return i.call(e,"top"),e.touchStartRange=void 0,r.preventDefault(),!1;if(Ue(r.target,"bottomSelectionHandle-HitArea"))return i.call(e,"bottom"),e.touchStartRange=void 0,r.preventDefault(),!1}),this.eventManager.addEventListener(t,"touchmove",r=>{const{rootDocument:s}=this.hot;let o,a,l,c,u,h;if(e.dragged.length===0)return;const d=s.elementFromPoint(r.touches[0].clientX,r.touches[0].clientY);!d||d===e.lastSetCell||((d.nodeName==="TD"||d.nodeName==="TH")&&(o=e.hot.getCoords(d),o.col===-1&&(o.col=0),a=e.hot.getSelectedRangeLast(),l=a.getWidth(),c=a.getHeight(),u=a.getDirection(),l===1&&c===1&&e.hot.selection.setRangeEnd(o),h=e.getCurrentRangeCoords(a,o,e.touchStartRange.direction,u,e.dragged[0]),h.start!==null&&e.hot.selection.setRangeStart(h.start),e.hot.selection.setRangeEnd(h.end),e.lastSetCell=d),r.preventDefault())})}getCurrentRangeCoords(e,t,i,r,s){const o=e.getTopStartCorner(),a=e.getBottomEndCorner(),l=e.getBottomStartCorner(),c=e.getTopEndCorner();let u={start:null,end:null};switch(i){case"NE-SW":switch(r){case"NE-SW":case"NW-SE":s==="top"?u={start:this.hot._createCellCoords(t.row,e.highlight.col),end:this.hot._createCellCoords(l.row,t.col)}:u={start:this.hot._createCellCoords(e.highlight.row,t.col),end:this.hot._createCellCoords(t.row,o.col)};break;case"SE-NW":s==="bottom"&&(u={start:this.hot._createCellCoords(a.row,t.col),end:this.hot._createCellCoords(t.row,o.col)});break}break;case"NW-SE":switch(r){case"NE-SW":s==="top"?u={start:t,end:l}:u.end=t;break;case"NW-SE":s==="top"?u={start:t,end:a}:u.end=t;break;case"SE-NW":s==="top"?u={start:t,end:o}:u.end=t;break;case"SW-NE":s==="top"?u={start:t,end:c}:u.end=t;break}break;case"SW-NE":switch(r){case"NW-SE":s==="bottom"?u={start:this.hot._createCellCoords(t.row,o.col),end:this.hot._createCellCoords(l.row,t.col)}:u={start:this.hot._createCellCoords(o.row,t.col),end:this.hot._createCellCoords(t.row,a.col)};break;case"SW-NE":s==="top"?u={start:this.hot._createCellCoords(e.highlight.row,t.col),end:this.hot._createCellCoords(t.row,a.col)}:u={start:this.hot._createCellCoords(t.row,o.col),end:this.hot._createCellCoords(o.row,t.col)};break;case"SE-NW":s==="bottom"?u={start:this.hot._createCellCoords(t.row,c.col),end:this.hot._createCellCoords(o.row,t.col)}:s==="top"&&(u={start:l,end:t});break}break;case"SE-NW":switch(r){case"NW-SE":case"NE-SW":case"SW-NE":s==="top"&&(u.end=t);break;case"SE-NW":s==="top"?u.end=t:u={start:t,end:o};break}break}return u}isDragged(){return this.dragged.length>0}}function GI(){let{label:n="",colspan:e=1,origColspan:t=1,collapsible:i=!1,crossHiddenColumns:r=[],isCollapsed:s=!1,isHidden:o=!1,isRoot:a=!1,isPlaceholder:l=!1,headerClassNames:c=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{label:n,colspan:e,origColspan:t,collapsible:i,isCollapsed:s,crossHiddenColumns:r,isHidden:o,isRoot:a,isPlaceholder:l,headerClassNames:c}}function Aq(){return{label:"",isPlaceholder:!0}}function HWe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0;const t=[];if(e===0)return t;j(n,r=>{const s=[];let o=0;t.push(s),j(r,a=>{const l=GI();if(lt(a)){const{label:u,colspan:h,headerClassName:d}=a;l.label=jn(u),typeof h=="number"&&h>1&&(l.colspan=h,l.origColspan=h),typeof d=="string"&&(l.headerClassNames=[...d.split(" ")])}else l.label=jn(a);o+=l.origColspan;let c=!1;if(o>=e&&(l.colspan=l.origColspan-(o-e),l.origColspan=l.colspan,c=!0),s.push(l),l.colspan>1)for(let u=0;u<l.colspan-1;u++)s.push(Aq());return!c})});const i=Math.max(...vt(t,r=>r.length));return j(t,r=>{if(r.length<i){const s=vt(new Array(i-r.length),()=>GI());r.splice(r.length,0,...s)}}),t}function WM(n,e,t){$We(n,e),e.set(n,t)}function $We(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Oo(n,e){return n.get(Pq(n,e))}function yv(n,e,t){return n.set(Pq(n,e),t),t}function Pq(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const _j=["label","collapsible"];var Fl=new WeakMap,Jh=new WeakMap,jM=new WeakMap;class FWe{constructor(){WM(this,Fl,[]),WM(this,Jh,0),WM(this,jM,1/0)}setColumnsLimit(e){yv(jM,this,e)}setData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];yv(Fl,this,HWe(e,Oo(jM,this))),yv(Jh,this,Oo(Fl,this).length)}getData(){return Oo(Fl,this)}mergeWith(e){j(e,t=>{let{row:i,col:r,...s}=t;const o=this.getHeaderSettings(i,r);o!==null&&li(o,s,_j)})}map(e){j(Oo(Fl,this),t=>{j(t,i=>{const r=e({...i});lt(r)&&li(i,r,_j)})})}getHeaderSettings(e,t){var i;if(e>=Oo(Jh,this)||e<0)return null;const r=Oo(Fl,this)[e];return Array.isArray(r)===!1||t>=r.length?null:(i=r[t])!==null&&i!==void 0?i:null}getHeadersSettings(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=[];if(e>=Oo(Jh,this)||e<0)return r;const s=Oo(Fl,this)[e];let o=0;for(let a=t;a<s.length;a++){const l=s[a];if(l.isPlaceholder)throw new Error("The first column settings cannot overlap the other header layers");if(o+=l.colspan,r.push(l),l.colspan>1&&(a+=l.colspan-1),o===i)break;if(o>i)throw new Error("The last column settings cannot overlap the other header layers")}return r}getLayersCount(){return Oo(Jh,this)}getColumnsCount(){return Oo(Jh,this)>0?Oo(Fl,this)[0].length:0}clear(){yv(Fl,this,[]),yv(Jh,this,0)}}function zM(n,e,t){return(e=BWe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BWe(n){var e=VWe(n,"string");return typeof e=="symbol"?e:e+""}function VWe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const Iq="DF-pre-order";function Oq(n,e){let t=n.call(e,this);for(let i=0;i<this.childs.length;i++){if(t===!1)return!1;t=Oq.call(this.childs[i],n,e)}return t}const WWe="DF-post-order";function kq(n,e){for(let t=0;t<this.childs.length;t++)if(kq.call(this.childs[t],n,e)===!1)return!1;return n.call(e,this)}const Dq="BF";function jWe(n,e){const t=[this];function i(){if(t.length===0)return;const r=t.shift();t.push(...r.childs),n.call(e,r)!==!1&&i()}i()}const zWe=Dq,Rj=new Map([[Iq,Oq],[WWe,kq],[Dq,jWe]]);class AR{constructor(e){zM(this,"data",{}),zM(this,"parent",null),zM(this,"childs",[]),this.data=e}addChild(e){e.parent=this,this.childs.push(e)}cloneTree(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this;const t=new AR({...e.data});for(let i=0;i<e.childs.length;i++)t.addChild(this.cloneTree(e.childs[i]));return t}replaceTreeWith(e){this.data={...e.data},this.childs=[];for(let t=0;t<e.childs.length;t++)this.addChild(e.childs[t])}walkDown(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zWe;if(!Rj.has(t))throw new Error(`Traversal strategy "${t}" does not exist`);Rj.get(t).call(this,e,this)}walkUp(e){const t=this,i=r=>{e.call(t,r)!==!1&&r.parent!==null&&i(r.parent)};i(this)}}function UM(n,e,t){UWe(n,e),e.set(n,t)}function UWe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function wr(n,e){return n.get(Nq(n,e))}function GWe(n,e,t){return n.set(Nq(n,e),t),t}function Nq(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var wg=new WeakMap,ed=new WeakMap,yg=new WeakMap;class YWe{constructor(e){UM(this,wg,new Map),UM(this,ed,new Map),UM(this,yg,null),GWe(yg,this,e)}getRoots(){return Array.from(wr(wg,this).values())}getRootByColumn(e){let t;return wr(ed,this).has(e)&&(t=wr(wg,this).get(wr(ed,this).get(e))),t}getNode(e,t){const i=this.getRootByColumn(t);if(!i)return;const r=t-wr(ed,this).get(t);let s=0,o;return i.walkDown(a=>{const{data:{origColspan:l,headerLevel:c}}=a;if(e===c){if(r>=s&&r<=s+l-1)return o=a,o.data.isRoot=t===o.data.columnIndex,!1;s+=l}}),o}rebuildTreeIndex(){let e=0;wr(ed,this).clear(),j(wr(wg,this),t=>{let[,{data:{colspan:i}}]=t;for(let r=e;r<e+i;r++)wr(ed,this).set(r,e);e+=i})}buildTree(){this.clear();const e=wr(yg,this).getColumnsCount();let t=0;for(;t<e;){const i=wr(yg,this).getHeaderSettings(0,t),r=new AR;wr(wg,this).set(t,r),this.buildLeaves(r,t,0,i.origColspan),t+=i.origColspan}this.rebuildTreeIndex()}buildLeaves(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;const s=wr(yg,this).getHeadersSettings(i,t,r);i+=1,j(s,o=>{const a={...o,headerLevel:i-1,columnIndex:t};let l;i===1?(e.data=a,l=e):(l=new AR(a),e.addChild(l)),i<wr(yg,this).getLayersCount()&&this.buildLeaves(l,t,i,o.origColspan),t+=o.origColspan})}clear(){wr(wg,this).clear(),wr(ed,this).clear()}}function Lq(n,e){n.walkDown(t=>{let{data:i,childs:r}=t;if(!i.isHidden&&(e(i.columnIndex),r.length===0))for(let s=1;s<i.colspan;s++)e(i.columnIndex+s)})}function PR(n,e){let{childs:t}=n;if(t.length!==0)return t[0].data[e]}function IR(n){return PR(n,"origColspan")===n.data.origColspan}function dH(n){const{data:e,childs:t}=n;if(!e.isCollapsed||e.isHidden||e.origColspan<=1)return{rollbackModification:()=>{},affectedColumns:[],colspanCompensation:0};if(IR(n))return dH(t[0]);e.isCollapsed=!1;const r=t.slice(1),s=new Set;let o=0;if(r.length>0)j(r,a=>{a.replaceTreeWith(a.data.clonedTree),a.data.clonedTree=null;const l=a.data;o+=l.colspan,Lq(a,c=>{s.add(c)})});else{const{colspan:a,origColspan:l,columnIndex:c}=e;o=l-a;for(let u=1;u<l;u++)s.add(c+u)}return n.walkUp(a=>{const{data:l}=a;l.colspan+=o,l.colspan>=l.origColspan?(l.colspan=l.origColspan,l.isCollapsed=!1):IR(a)&&(l.isCollapsed=PR(a,"isCollapsed"))}),{rollbackModification:()=>fH(n),affectedColumns:Array.from(s),colspanCompensation:o}}function fH(n){var e;const{data:t,childs:i}=n;if(t.isCollapsed||t.isHidden||t.origColspan<=1)return{rollbackModification:()=>{},affectedColumns:[],colspanCompensation:0};if(IR(n))return fH(i[0]);t.isCollapsed=!0;const s=i.slice(1),o=new Set;if(s.length>0)j(s,l=>{Lq(l,c=>{o.add(c)}),l.data.clonedTree=l.cloneTree(),l.walkDown(c=>{let{data:u}=c;u.isHidden=!0})});else{const{origColspan:l,columnIndex:c}=t;for(let u=1;u<l;u++){const h=c+u;o.add(h)}}const a=t.colspan-((e=PR(n,"colspan"))!==null&&e!==void 0?e:1);return n.walkUp(l=>{const{data:c}=l;c.colspan-=a,c.colspan<=1?(c.colspan=1,c.isCollapsed=!0):IR(l)&&(c.isCollapsed=PR(l,"isCollapsed"))}),{rollbackModification:()=>dH(n),affectedColumns:Array.from(o),colspanCompensation:a}}function KWe(n,e){if(!Number.isInteger(e))throw new Error("The passed gridColumnIndex argument has invalid type.");if(n.childs.length>0)throw new Error(Kt`The passed node is not the last node on the tree. Only for\x20
the last node, the hide column modification can be applied.`);const{crossHiddenColumns:t}=n.data;if(t.includes(e))return;let i=!1;n.walkUp(r=>{const{data:{collapsible:s}}=r;if(s)return i=!0,!1}),!i&&n.walkUp(r=>{const{data:s}=r;s.crossHiddenColumns.push(e),s.colspan>1?s.colspan-=1:s.isHidden=!0})}function qWe(n,e){if(!Number.isInteger(e))throw new Error("The passed gridColumnIndex argument has invalid type.");if(n.childs.length>0)throw new Error(Kt`The passed node is not the last node on the tree. Only for\x20
the last node, the show column modification can be applied.`);const{crossHiddenColumns:t}=n.data;if(!t.includes(e))return;let i=!1;n.walkUp(r=>{const{data:{collapsible:s}}=r;if(s)return i=!0,!1}),!i&&n.walkUp(r=>{const{data:s}=r;s.crossHiddenColumns.splice(s.crossHiddenColumns.indexOf(e),1),!s.isHidden&&s.colspan<s.origColspan&&(s.colspan+=1),s.isHidden=!1})}const Ej=new Map([["collapse",fH],["expand",dH],["hide-column",KWe],["show-column",qWe]]);function XWe(n,e,t){if(!Ej.has(n))throw new Error(`The node modifier action ("${n}") does not exist.`);return Ej.get(n)(e,t)}function jC(n){const e=[];return j(n,t=>{t.walkDown(i=>{const r=i.data,{origColspan:s,columnIndex:o,headerLevel:a,crossHiddenColumns:l}=r,c=QWe(e,a);let u=!1;for(let h=o;h<o+s;h++)if(l.includes(h)||u)c.push(Aq());else{const f=ZWe(r);f.isRoot=!0,c.push(f),u=!0}})}),e}function ZWe(n){const{crossHiddenColumns:e,...t}=GI(n);return t}function QWe(n,e){let t;return Array.isArray(n[e])?t=n[e]:(t=[],n[e]=t),t}function GM(n,e,t){JWe(n,e),e.set(n,t)}function JWe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Cv(n,e,t){return n.set(Hq(n,e),t),t}function $n(n,e){return n.get(Hq(n,e))}function Hq(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ma=new WeakMap,Wr=new WeakMap,td=new WeakMap;class e3e{constructor(){GM(this,Ma,new FWe),GM(this,Wr,new YWe($n(Ma,this))),GM(this,td,[[]])}setState(e){$n(Ma,this).setData(e);let t=!1;try{$n(Wr,this).buildTree()}catch{$n(Wr,this).clear(),$n(Ma,this).clear(),t=!0}return Cv(td,this,jC($n(Wr,this).getRoots())),t}setColumnsLimit(e){$n(Ma,this).setColumnsLimit(e)}mergeStateWith(e){const t=vt(e,i=>{let{row:r,...s}=i;return{row:r<0?this.rowCoordsToLevel(r):r,...s}});$n(Ma,this).mergeWith(t),$n(Wr,this).buildTree(),Cv(td,this,jC($n(Wr,this).getRoots()))}mapState(e){$n(Ma,this).map(e),$n(Wr,this).buildTree(),Cv(td,this,jC($n(Wr,this).getRoots()))}mapNodes(e){return ci($n(Wr,this).getRoots(),(t,i)=>(i.walkDown(r=>{const s=e(r.data);s!==void 0&&t.push(s)}),t),[])}triggerNodeModification(e,t,i){t<0&&(t=this.rowCoordsToLevel(t));const r=$n(Wr,this).getNode(t,i);let s;return r&&(s=XWe(e,r,i),Cv(td,this,jC($n(Wr,this).getRoots()))),s}triggerColumnModification(e,t){return this.triggerNodeModification(e,-1,t)}rowCoordsToLevel(e){if(e>=0)return null;const t=e+Math.max(this.getLayersCount(),1);return t<0?null:t}levelToRowCoords(e){if(e<0)return null;const t=e-Math.max(this.getLayersCount(),1);return t>=0?null:t}getHeaderSettings(e,t){var i,r;return e<0&&(e=this.rowCoordsToLevel(e)),e===null||e>=this.getLayersCount()?null:(i=(r=$n(td,this)[e])===null||r===void 0?void 0:r[t])!==null&&i!==void 0?i:null}getHeaderTreeNodeData(e,t){const i=this.getHeaderTreeNode(e,t);return i?{...i.data}:null}getHeaderTreeNode(e,t){if(e<0&&(e=this.rowCoordsToLevel(e)),e===null||e>=this.getLayersCount())return null;const i=$n(Wr,this).getNode(e,t);return i||null}findTopMostEntireHeaderLevel(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;const r=i-e+1;let s=!1,o=null;for(let a=e;a<=i;a++){const l=$n(Wr,this).getRootByColumn(a);if(!l)break;s=!0,l.walkDown(c=>{const{columnIndex:u,headerLevel:h,origColspan:d,isHidden:f}=c.data;f||d<=r&&u>=e&&u+d-1<=i&&(o===null||h<o)&&(o=h)},Iq)}return s&&o===null?-1:this.levelToRowCoords((t=o)!==null&&t!==void 0?t:0)}findLeftMostColumnIndex(e,t){var i;const{isRoot:r}=(i=this.getHeaderSettings(e,t))!==null&&i!==void 0?i:{isRoot:!0};if(r)return t;let s=t-1;for(;s>=0;){var o;const{isRoot:a}=(o=this.getHeaderSettings(e,s))!==null&&o!==void 0?o:{isRoot:!0};if(a)break;s-=1}return s}findRightMostColumnIndex(e,t){var i;const{isRoot:r,origColspan:s}=(i=this.getHeaderSettings(e,t))!==null&&i!==void 0?i:{isRoot:!0,origColspan:1};if(r)return t+s-1;let o=t+1;for(;o<this.getColumnsCount();){var a;const{isRoot:l}=(a=this.getHeaderSettings(e,o))!==null&&a!==void 0?a:{isRoot:!0};if(l)break;o+=1}return o-1}getLayersCount(){return $n(Ma,this).getLayersCount()}getColumnsCount(){return $n(Ma,this).getColumnsCount()}clear(){Cv(td,this,[]),$n(Ma,this).clear(),$n(Wr,this).clear()}}function Sv(n,e,t){return(e=t3e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function t3e(n){var e=n3e(n,"string");return typeof e=="symbol"?e:e+""}function n3e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class i3e{constructor(e,t){Sv(this,"hot",void 0),Sv(this,"nestedHeaderSettingsGetter",void 0),Sv(this,"layersCount",0),Sv(this,"container",void 0),Sv(this,"widthsMap",void 0),this.hot=e,this.nestedHeaderSettingsGetter=t,this.widthsMap=this.hot.columnIndexMapper.createAndRegisterIndexMap("nestedHeaders.widthsMap","physicalIndexToValue")}setLayersCount(e){return this.layersCount=e,this}getWidth(e){return this.widthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e))}buildWidthsMap(){this.container=this.hot.rootDocument.createElement("div"),this.container.classList.add("handsontable","htGhostTable","htAutoSize"),this._buildGhostTable(this.container),this.hot.rootDocument.body.appendChild(this.container);const e=this.container.querySelectorAll("tr:last-of-type th"),t=e.length;this.widthsMap.clear();for(let i=0;i<t;i++){const r=this.hot.columnIndexMapper.getVisualFromRenderableIndex(i),s=this.hot.toPhysicalColumn(r);this.widthsMap.setValueAtIndex(s,e[i].offsetWidth)}this.container.parentNode.removeChild(this.container),this.container=null}_buildGhostTable(e){const{rootDocument:t,columnIndexMapper:i}=this.hot,r=t.createDocumentFragment(),s=t.createElement("table"),o=!!this.hot.getSettings().dropdownMenu,a=i.getRenderableIndexesLength();for(let l=0;l<this.layersCount;l++){const c=t.createElement("tr");for(let u=0;u<a;u++){let h=i.getVisualFromRenderableIndex(u);h===null&&(h=u);const d=t.createElement("th"),f=this.nestedHeaderSettingsGetter(l,h);if(f&&(!f.isPlaceholder||f.isHidden)){let g=f.label;o&&(g+='<button class="changeType"></button>'),Mf(d,g),d.colSpan=f.colspan,c.appendChild(d)}}s.appendChild(c)}r.appendChild(s),e.appendChild(r)}clear(){this.widthsMap.clear(),this.container=null}}function r3e(n,e){$q(n,e),e.add(n)}function xj(n,e,t){return(e=s3e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function s3e(n){var e=o3e(n,"string");return typeof e=="symbol"?e:e+""}function o3e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function zC(n,e,t){$q(n,e),e.set(n,t)}function $q(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Md(n,e,t){return n.set(Fn(n,e),t),t}function Mt(n,e){return n.get(Fn(n,e))}function Fn(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Tj="nestedHeaders",a3e=280;var Jt=new WeakMap,ru=new WeakMap,zb=new WeakMap,CE=new WeakMap,Yn=new WeakSet;class l3e extends Lt{constructor(){super(...arguments),r3e(this,Yn),zC(this,Jt,new e3e),zC(this,ru,null),zC(this,zb,null),zC(this,CE,!1),xj(this,"ghostTable",new i3e(this.hot,(e,t)=>this.getHeaderSettings(e,t))),xj(this,"detectedOverlappedHeaders",!1)}static get PLUGIN_KEY(){return Tj}static get PLUGIN_PRIORITY(){return a3e}isEnabled(){return!!this.hot.getSettings()[Tj]}enablePlugin(){var e=this;if(this.enabled)return;const{nestedHeaders:t}=this.hot.getSettings();(!Array.isArray(t)||!Array.isArray(t[0]))&&Yt(Kt`Your Nested Headers plugin configuration is invalid. The settings has to be\x20
                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]`),this.addHook("init",()=>Fn(Yn,this,R3e).call(this)),this.addHook("afterLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,E3e).call(e,...r)}),this.addHook("beforeOnCellMouseDown",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,d3e).call(e,...r)}),this.addHook("afterOnCellMouseDown",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,f3e).call(e,...r)}),this.addHook("beforeOnCellMouseOver",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,g3e).call(e,...r)}),this.addHook("beforeOnCellMouseUp",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,p3e).call(e,...r)}),this.addHook("beforeSelectionHighlightSet",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,m3e).call(e,...r)}),this.addHook("modifyTransformStart",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,v3e).call(e,...r)}),this.addHook("afterSelection",()=>Fn(Yn,this,UC).call(this)),this.addHook("afterSelectionFocusSet",()=>Fn(Yn,this,UC).call(this)),this.addHook("beforeViewportScrollHorizontally",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,c3e).call(e,...r)}),this.addHook("afterGetColumnHeaderRenderers",i=>Fn(Yn,this,w3e).call(this,i)),this.addHook("modifyColWidth",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,C3e).call(e,...r)}),this.addHook("modifyColumnHeaderValue",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,S3e).call(e,...r)}),this.addHook("beforeHighlightingColumnHeader",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,u3e).call(e,...r)}),this.addHook("beforeCopy",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,h3e).call(e,...r)}),this.addHook("beforeSelectColumns",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,b3e).call(e,...r)}),this.addHook("afterViewportColumnCalculatorOverride",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,y3e).call(e,...r)}),this.addHook("modifyFocusedElement",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,_3e).call(e,...r)}),this.hot.columnIndexMapper.addLocalHook("cacheUpdated",()=>Fn(Yn,this,UC).call(this)),this.hot.rowIndexMapper.addLocalHook("cacheUpdated",()=>Fn(Yn,this,UC).call(this)),super.enablePlugin(),this.updatePlugin()}updatePlugin(){if(!this.hot.view)return;const{nestedHeaders:e}=this.hot.getSettings();Mt(Jt,this).setColumnsLimit(this.hot.countCols()),Array.isArray(e)&&(this.detectedOverlappedHeaders=Mt(Jt,this).setState(e)),this.detectedOverlappedHeaders&&Yt(Kt`Your Nested Headers plugin setup contains overlapping headers. This kind of configuration\x20
                        is currently not supported.`),this.enabled&&this.hot.columnIndexMapper.hidingMapsCollection.getMergedValues().forEach((t,i)=>{const r=t===!0?"hide-column":"show-column";Mt(Jt,this).triggerColumnModification(r,i)}),!Mt(ru,this)&&this.enabled&&Md(ru,this,this.hot.columnIndexMapper.createChangesObserver("hiding").subscribe(t=>{t.forEach(i=>{let{op:r,index:s,newValue:o}=i;if(r==="replace"){const a=o===!0?"hide-column":"show-column";Mt(Jt,this).triggerColumnModification(a,s)}}),this.ghostTable.buildWidthsMap()})),this.ghostTable.setLayersCount(this.getLayersCount()).buildWidthsMap(),super.updatePlugin()}disablePlugin(){this.clearColspans(),Mt(Jt,this).clear(),Mt(ru,this).unsubscribe(),Md(ru,this,null),this.ghostTable.clear(),super.disablePlugin()}getStateManager(){return Mt(Jt,this)}getLayersCount(){return Mt(Jt,this).getLayersCount()}getHeaderSettings(e,t){return Mt(Jt,this).getHeaderSettings(e,t)}clearColspans(){if(!this.hot.view)return;const{_wt:e}=this.hot.view,t=e.getSetting("columnHeaders").length,i=e.wtTable.THEAD,r=e.wtOverlays.topOverlay.clone.wtTable.THEAD,s=e.wtOverlays.topInlineStartCornerOverlay?e.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null;for(let o=0;o<t;o++){const a=i.childNodes[o];if(!a)break;const l=r.childNodes[o],c=s?s.childNodes[o]:null;for(let u=0,h=a.childNodes.length;u<h;u++)a.childNodes[u].removeAttribute("colspan"),Ze(a.childNodes[u],"hiddenHeader"),l&&l.childNodes[u]&&(l.childNodes[u].removeAttribute("colspan"),Ze(l.childNodes[u],"hiddenHeader")),s&&c&&c.childNodes[u]&&(c.childNodes[u].removeAttribute("colspan"),Ze(c.childNodes[u],"hiddenHeader"))}}headerRendererFactory(e){var t=this;const i=this.hot.view._wt.getSetting("fixedColumnsStart");return(r,s)=>{var o;const{columnIndexMapper:a,view:l}=this.hot;let c=a.getVisualFromRenderableIndex(r);c===null&&(c=r),s.removeAttribute("colspan"),Ze(s,"hiddenHeader");const{colspan:u,isHidden:h,isPlaceholder:d,headerClassNames:f}=(o=Mt(Jt,this).getHeaderSettings(e,c))!==null&&o!==void 0?o:{label:""};if(d||h)ue(s,"hiddenHeader");else if(u>1){var g,p;const{wtOverlays:m}=l._wt,b=(g=m.topInlineStartCornerOverlay)===null||g===void 0?void 0:g.clone.wtTable.THEAD.contains(s),y=(p=m.inlineStartOverlay)===null||p===void 0?void 0:p.clone.wtTable.THEAD.contains(s),w=b||y?Math.min(u,i-r):u;w>1&&s.setAttribute("colspan",w)}if(this.hot.view.appendColHeader(c,s,function(){return t.getColumnHeaderValue(...arguments)},e),!d&&!h){const m=s.querySelector("div.relative");m&&f&&f.length>0&&(Ze(m,this.hot.getColumnMeta(c).headerClassName),ue(m,f))}}}getColumnHeaderValue(e,t){var i;const{isHidden:r,isPlaceholder:s}=(i=Mt(Jt,this).getHeaderSettings(t,e))!==null&&i!==void 0?i:{};return s||r?"":this.hot.getColHeader(e,t)}destroy(){Md(Jt,this,null),Mt(ru,this)!==null&&(Mt(ru,this).unsubscribe(),Md(ru,this,null)),super.destroy()}_getHeaderTreeNodeDataByCoords(e){if(!(e.row>=0||e.col<0))return Mt(Jt,this).getHeaderTreeNodeData(e.row,e.col)}}function UC(){var n;const e=(n=this.hot)===null||n===void 0?void 0:n.getSelectedRangeLast();if(!e)return;const{highlight:t}=e;if(t.isHeader()&&t.col>=0){const r=Mt(Jt,this).findLeftMostColumnIndex(t.row,t.col),s=this.hot.selection.highlight.getFocus();s.visualCellRange.highlight.col=r,s.visualCellRange.from.col=r,s.visualCellRange.to.col=r,s.commit()}}function c3e(n){const e=this.hot.getSelectedRangeLast();if(!e)return n;const{highlight:t}=e;if(!(t.isHeader()&&t.col>=0))return n;const r=this.hot.view.getFirstFullyVisibleColumn(),s=this.hot.view.getLastFullyVisibleColumn(),o=Mt(Jt,this).findLeftMostColumnIndex(t.row,t.col),a=Mt(Jt,this).findRightMostColumnIndex(t.row,t.col);return o<r&&a>s?n:o<r?o:a}function u3e(n,e,t){const i=Mt(Jt,this).getHeaderTreeNodeData(e,n);if(!i)return n;const{columnCursor:r,selectionType:s,selectionWidth:o}=t,{isRoot:a,colspan:l}=Mt(Jt,this).getHeaderSettings(e,n);if(s===qD){if(!a)return i.columnIndex}else if(s===eY&&(l>o-r||!a))return null;return n}function h3e(n,e,t){let{columnHeadersCount:i}=t;if(i!==0)for(let s=0;s<e.length;s++){const{startRow:o,startCol:a,endRow:l,endCol:c}=e[s],u=l-o+1,h=a-c+1;if(o>=0||h===1)break;for(let d=a;d<=c;d++)for(let f=o;f<=l;f++){var r;const g=u+f,p=d-a;if(p===0)continue;((r=Mt(Jt,this).getHeaderTreeNodeData(f,d))===null||r===void 0?void 0:r.isRoot)===!1&&(n[g][p]="")}}}function d3e(n,e,t,i){this._getHeaderTreeNodeDataByCoords(e)&&(i.column=!0)}function f3e(n,e){const t=this._getHeaderTreeNodeDataByCoords(e);if(!t)return;Md(zb,this,e.clone()),Md(CE,this,!0);const{selection:i}=this.hot,r=i.isSelected()?i.getSelectedRange().current():null,s=[],{columnIndex:o,origColspan:a}=t,l=!i.inInSelection(e);n.shiftKey&&r?e.col<r.from.col?s.push(r.getTopEndCorner().col,o,e.row):e.col>r.from.col?s.push(r.getTopStartCorner().col,o+a-1,e.row):s.push(o,o+a-1,e.row):(Y1(n)||Ku(n)&&l||E9(n))&&s.push(o,o+a-1,e.row),i.selectColumns(...s)}function g3e(n,e,t,i){if(!this.hot.view.isMouseDown())return;const r=this._getHeaderTreeNodeDataByCoords(e);if(!r)return;const{columnIndex:s,origColspan:o}=r,a=this.hot.getSelectedRangeLast(),l=a.getTopStartCorner(),c=a.getBottomEndCorner(),{from:u}=a;i.column=!0,i.cell=!0;const h=[],d=Gt(e.row,-1/0,-1);e.col<u.col?h.push(c.col,s,d):e.col>u.col?h.push(l.col,s+o-1,d):h.push(s,s+o-1,d),this.hot.selection.selectColumns(...h)}function p3e(){Md(CE,this,!1)}function m3e(){const{navigableHeaders:n}=this.hot.getSettings();if(!this.hot.view.isMouseDown()||!Mt(CE,this)||!n)return;const e=this.hot.getSelectedRangeLast(),t=e.getTopStartCorner().col,i=e.getBottomEndCorner().col,{columnIndex:r,origColspan:s}=Mt(Jt,this).getHeaderTreeNodeData(Mt(zb,this).row,Mt(zb,this).col);if(e.setHighlight(Mt(zb,this)),s>e.getWidth()||r<t||r+s-1>i){const o=Mt(Jt,this).findTopMostEntireHeaderLevel(Gt(t,r,r+s-1),Gt(i,r,r+s-1));e.highlight.row=o,e.highlight.col=e.from.col}}function v3e(n){const{highlight:e}=this.hot.getSelectedRangeLast(),t=this.hot._createCellCoords(e.row+n.row,e.col+n.col);if(!(t.isHeader()&&t.col>=0))return;const r=Mt(Jt,this).findLeftMostColumnIndex(t.row,t.col),s=Mt(Jt,this).findRightMostColumnIndex(t.row,t.col);if(n.col<0){const o=e.col>=r&&e.col<=s?r-1:s,a=this.hot.columnIndexMapper.getNearestNotHiddenIndex(o,-1);a===null?n.col=-this.hot.view.countRenderableColumnsInRange(0,e.col):n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(a,e.col)-1,1)}else if(n.col>0){const o=e.col>=r&&e.col<=s?s+1:r,a=this.hot.columnIndexMapper.getNearestNotHiddenIndex(o,1);a===null?n.col=this.hot.view.countRenderableColumnsInRange(e.col,this.hot.countCols()):n.col=Math.max(this.hot.view.countRenderableColumnsInRange(e.col,a)-1,1)}}function b3e(n,e){const t=n.row,i=this._getHeaderTreeNodeDataByCoords({row:t,col:n.col}),r=this._getHeaderTreeNodeDataByCoords({row:t,col:e.col});e.col<n.col?(i&&(n.col=i.columnIndex+i.origColspan-1),r&&(e.col=r.columnIndex)):e.col>=n.col&&(i&&(n.col=i.columnIndex),r&&(e.col=r.columnIndex+r.origColspan-1))}function w3e(n){n.length=0;for(let e=0;e<Mt(Jt,this).getLayersCount();e++)n.push(this.headerRendererFactory(e))}function y3e(n){const e=Mt(Jt,this).getLayersCount();let t=n.startColumn,i=!!e;for(let r=0;r<e;r++){const s=Mt(Jt,this).findLeftMostColumnIndex(r,n.startColumn),o=this.hot.columnIndexMapper.getRenderableFromVisualIndex(s);if(s>=0&&(i=!1),rr(o)&&o<n.startColumn){t=o;break}}n.startColumn=i?Mt(Jt,this).getHeaderTreeNodeData(0,t).columnIndex:t}function C3e(n,e){const t=this.ghostTable.getWidth(e);return n>t?n:t}function S3e(n,e,t){var i;const{label:r}=(i=Mt(Jt,this).getHeaderTreeNodeData(t,e))!==null&&i!==void 0?i:{label:""};return r}function _3e(n,e){if(n<0)return this.hot.getCell(n,Mt(Jt,this).findLeftMostColumnIndex(n,e),!0)}function R3e(){this.updatePlugin()}function E3e(n,e){e||this.updatePlugin()}function _v(n,e,t){return(e=x3e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function x3e(n){var e=T3e(n,"string");return typeof e=="symbol"?e:e+""}function T3e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class M3e{constructor(e,t){_v(this,"hot",void 0),_v(this,"data",null),_v(this,"plugin",void 0),_v(this,"parentReference",new WeakMap),_v(this,"cache",{levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap}),this.hot=t,this.plugin=e}setData(e){this.data=e}getData(){return this.data}getRawSourceData(){let e=null;return this.plugin.disableCoreAPIModifiers(),e=this.hot.getSourceData(),this.plugin.enableCoreAPIModifiers(),e}updateWithData(e){this.setData(e),this.rewriteCache()}rewriteCache(){this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap},He(0,this.data.length-1,e=>{this.cacheNode(this.data[e],0,null)})}cacheNode(e,t,i){this.cache.levels[t]||(this.cache.levels[t]=[],this.cache.levelCount+=1),this.cache.levels[t].push(e),this.cache.rows.push(e),this.cache.nodeInfo.set(e,{parent:i,row:this.cache.rows.length-1,level:t}),this.hasChildren(e)&&j(e.__children,r=>{this.cacheNode(r,t+1,e)})}getDataObject(e){return e==null?null:this.cache.rows[e]}readTreeNodes(e,t,i,r){let s=!1,o=t;if(isNaN(o)&&o.end)return o;let a=e;return a||(a={__children:this.data},s=!0,o-=1),i!=null&&o===i?{result:a,end:!0}:r!=null&&a===r?{result:o,end:!0}:(o+=1,a.__children&&j(a.__children,l=>{if(this.parentReference.set(l,s?null:a),o=this.readTreeNodes(l,o,i,r),isNaN(o)&&o.end)return!1}),o)}mockParent(){const e=this.mockNode();return e.__children=this.data,e}mockNode(){const e={};return ct(this.data[0],(t,i)=>{e[i]=null}),e}getRowIndex(e){return e==null?null:this.cache.nodeInfo.get(e).row}getRowIndexWithinParent(e){let t=null;isNaN(e)?t=e:t=this.getDataObject(e);const i=this.getRowParent(e);return i==null?this.data.indexOf(t):i.__children.indexOf(t)}countAllRows(){const e={__children:this.data};return this.countChildren(e)}countChildren(e){let t=0,i=e;return isNaN(i)||(i=this.getDataObject(i)),!i||!i.__children?0:(j(i.__children,r=>{t+=1,r.__children&&(t+=this.countChildren(r))}),t)}getRowParent(e){let t;return isNaN(e)?t=e:t=this.getDataObject(e),this.getRowObjectParent(t)}getRowObjectParent(e){return!e||typeof e!="object"?null:this.cache.nodeInfo.get(e).parent}getRowLevel(e){let t=null;return isNaN(e)?t=e:t=this.getDataObject(e),t?this.getRowObjectLevel(t):null}getRowObjectLevel(e){return e==null?null:this.cache.nodeInfo.get(e).level}hasChildren(e){let t=e;return isNaN(t)||(t=this.getDataObject(t)),!!(t.__children&&t.__children.length)}isChild(e){return this.getRowParent(e)!==null}getChild(e,t){var i;return((i=e.__children)===null||i===void 0?void 0:i[t])||null}isRowHighestLevel(e){return!this.isChild(e)}isParent(e){var t;let i=e;return isNaN(i)||(i=this.getDataObject(i)),i&&!!i.__children&&((t=i.__children)===null||t===void 0?void 0:t.length)!==0}addChild(e,t){let i=t;this.hot.runHooks("beforeAddChild",e,i);let r=null;e&&(r=this.getRowIndex(e)),this.hot.runHooks("beforeCreateRow",r+this.countChildren(e)+1,1);let s=e;e||(s=this.mockParent()),s.__children||(s.__children=[]),i||(i=this.mockNode()),s.__children.push(i),this.rewriteCache();const o=this.getRowIndex(i);this.hot.rowIndexMapper.insertIndexes(o,1),this.hot.runHooks("afterCreateRow",o,1),this.hot.runHooks("afterAddChild",e,i)}addChildAtIndex(e,t,i){let r=i,s;if(r||(r=this.mockNode()),this.hot.runHooks("beforeAddChild",e,r,t),e){const a=this.getRowIndex(e)+t+1;this.hot.runHooks("beforeCreateRow",a,1),e.__children.splice(t,null,r),this.rewriteCache(),this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndexWithinParent(e),"__children",e.__children,"NestedRows.addChildAtIndex"),this.hot.rowIndexMapper.insertIndexes(a,1),this.plugin.enableCoreAPIModifiers(),this.hot.runHooks("afterCreateRow",a,1),s=a}else this.plugin.disableCoreAPIModifiers(),this.hot.alter("insert_row_above",t,1,"NestedRows.addChildAtIndex"),this.plugin.enableCoreAPIModifiers(),s=this.getRowIndex(this.data[t]);r=this.getDataObject(s),this.hot.runHooks("afterAddChild",e,r,t)}addSibling(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"below";const i=this.translateTrimmedRow(e),r=this.getRowParent(i),s=this.getRowIndexWithinParent(i);switch(t){case"below":this.addChildAtIndex(r,s+1,null);break;case"above":this.addChildAtIndex(r,s,null);break}}detachFromParent(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=null;const r=[];Array.isArray(e)?(He(e[0],e[2],d=>{const f=this.translateTrimmedRow(d);r.push(this.getDataObject(f))}),He(0,r.length-2,d=>{this.detachFromParent(r[d],!1)}),i=r[r.length-1]):i=e;const s=this.getRowIndex(i),o=this.countChildren(i),a=this.getRowIndexWithinParent(i),l=this.getRowParent(i),c=this.getRowParent(l),u=this.getRowIndex(c);let h=null;if(this.hot.runHooks("beforeDetachChild",l,i),a!=null){const d=Array.from(new Array(s+o+1).keys()).splice(-1*(o+1));if(this.hot.runHooks("beforeRemoveRow",s,o+1,d,this.plugin.pluginName),l.__children.splice(a,1),this.rewriteCache(),this.hot.runHooks("afterRemoveRow",s,o+1,d,this.plugin.pluginName),c){h=u+this.countChildren(c);const f=this.getChild(c,this.countChildren(c)-1),g=this.getRowIndex(f);this.hot.runHooks("beforeCreateRow",g+1,o+1,this.plugin.pluginName),c.__children.push(i)}else h=this.hot.countRows()+1,this.hot.runHooks("beforeCreateRow",h-2,o+1,this.plugin.pluginName),this.data.push(i)}this.rewriteCache(),this.hot.runHooks("afterCreateRow",h-2,o+1,this.plugin.pluginName),this.hot.runHooks("afterDetachChild",l,i,this.getRowIndex(i)),t&&this.hot.render()}filterData(e,t,i){const r=[];j(i,s=>{r.push(this.getDataObject(s))}),j(r,s=>{const o=this.getRowIndexWithinParent(s),a=this.getRowParent(s);a===null?this.data.splice(o,1):a.__children.splice(o,1)}),this.rewriteCache()}spliceData(e,t,i){const r=this.getDataObject(e-1);let s=null,o=e;r&&r.__children&&r.__children.length===0?(s=r,o=0):e<this.countAllRows()&&(s=this.getRowParent(e),o=this.getRowIndexWithinParent(e)),s?i?s.__children.splice(o,t,...i):s.__children.splice(o,t):i?this.data.splice(o,t,...i):this.data.splice(o,t),this.rewriteCache()}syncRowWithRawSource(e){let t=e,i=null;do i=this.getRowParent(i),i!==null&&(t=i);while(i!==null);this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndex(t),"__children",t.__children,"NestedRows.syncRowWithRawSource"),this.plugin.enableCoreAPIModifiers()}moveRow(e,t,i,r){const s=t===this.hot.countRows(),o=this.getRowParent(e),a=this.getRowIndexWithinParent(e),l=o.__children.slice(a,a+1),c=e>t;let u=s?this.getRowParent(t-1):this.getRowParent(t);u==null&&(u=this.getRowParent(t-1)),u==null&&(u=this.getDataObject(t-1)),u?u.__children||(u.__children=[]):(u=this.getDataObject(t),u.__children=[]);const h=s||i||r?u.__children.length:this.getRowIndexWithinParent(t),d=o===u;u.__children.splice(h,0,l[0]),o.__children.splice(a+(c&&d?1:0),1),this.syncRowWithRawSource(o),d||this.syncRowWithRawSource(u)}translateTrimmedRow(e){return this.plugin.collapsingUI?this.plugin.collapsingUI.translateTrimmedRow(e):e}untranslateTrimmedRow(e){return this.plugin.collapsingUI?this.plugin.collapsingUI.untranslateTrimmedRow(e):e}}function Mj(n,e,t){return(e=A3e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function A3e(n){var e=P3e(n,"string");return typeof e=="symbol"?e:e+""}function P3e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class gH{constructor(e,t){Mj(this,"hot",void 0),Mj(this,"plugin",void 0),this.hot=t,this.plugin=e}}class Ha extends gH{static get CSS_CLASSES(){return{indicatorContainer:"ht_nestingLevels",parent:"ht_nestingParent",indicator:"ht_nestingLevel",emptyIndicator:"ht_nestingLevel_empty",button:"ht_nestingButton",expandButton:"ht_nestingExpand",collapseButton:"ht_nestingCollapse"}}constructor(e,t){super(e,t),this.dataManager=this.plugin.dataManager,this.collapsingUI=this.plugin.collapsingUI,this.rowHeaderWidthCache=null}appendLevelIndicators(e,t){const i=this.hot.toPhysicalRow(e),r=this.dataManager.getRowLevel(i),s=this.dataManager.getDataObject(i),o=t.getElementsByTagName("DIV")[0],a=o.querySelector("span.rowHeader"),l=o.querySelectorAll('[class^="ht_nesting"]'),c=this.hot.getSettings().ariaTags;if(j(l,u=>{u&&o.removeChild(u)}),ue(t,Ha.CSS_CLASSES.indicatorContainer),r){const{rootDocument:u}=this.hot,h=a.cloneNode(!0);o.innerHTML="",He(0,r-1,()=>{const d=u.createElement("SPAN");ue(d,Ha.CSS_CLASSES.emptyIndicator),o.appendChild(d)}),o.appendChild(h)}if(this.dataManager.hasChildren(s)){const u=this.hot.rootDocument.createElement("DIV");c&&ze(u,[xf()]),ue(t,Ha.CSS_CLASSES.parent),this.collapsingUI.areChildrenCollapsed(i)?(ue(u,`${Ha.CSS_CLASSES.button} ${Ha.CSS_CLASSES.expandButton}`),c&&ze(t,[no(!1)])):(ue(u,`${Ha.CSS_CLASSES.button} ${Ha.CSS_CLASSES.collapseButton}`),c&&ze(t,[no(!0)])),o.appendChild(u)}}updateRowHeaderWidth(e){let t=e;t||(t=this.dataManager.cache.levelCount),this.rowHeaderWidthCache=Math.max(50,11+10*t+25),this.hot.render()}}class I3e extends gH{constructor(e,t){var i;super(e,t),i=this,this.dataManager=this.plugin.dataManager,this.collapsedRows=[],this.collapsedRowsStash={stash:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;i.lastCollapsedRows=i.collapsedRows.slice(0),i.expandMultipleChildren(i.lastCollapsedRows,r)},shiftStash:function(r,s){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;s==null&&(s=1/0),j(i.lastCollapsedRows,(a,l)=>{a>=r&&a<s&&(i.lastCollapsedRows[l]=a+o)})},applyStash:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i.collapseMultipleChildren(i.lastCollapsedRows,r),i.lastCollapsedRows=void 0},trimStash:(r,s)=>{He(r,r+s-1,o=>{const a=this.lastCollapsedRows.indexOf(o);a>-1&&this.lastCollapsedRows.splice(a,1)})}}}collapseChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=[];let s=null,o=null,a=null;return isNaN(e)?(s=e,o=this.dataManager.getRowIndex(s)):(s=this.dataManager.getDataObject(e),o=e),this.dataManager.hasChildren(s)&&j(s.__children,l=>{r.push(this.dataManager.getRowIndex(l))}),a=this.collapseRows(r,!0,!1),i&&this.trimRows(a),t&&this.renderAndAdjust(),this.collapsedRows.indexOf(o)===-1&&this.collapsedRows.push(o),a}collapseMultipleChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=[];j(e,s=>{r.push(...this.collapseChildren(s,!1,!1))}),i&&this.trimRows(r),t&&this.renderAndAdjust()}collapseRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.collapseRows([e],t)}collapseRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=[];return j(e,s=>{r.push(s),t&&this.collapseChildRows(s,r)}),i&&this.trimRows(r),r}collapseChildRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(this.dataManager.hasChildren(e)){const r=this.dataManager.getDataObject(e);j(r.__children,s=>{const o=this.dataManager.getRowIndex(s);t.push(o),this.collapseChildRows(o,t)})}i&&this.trimRows(t)}expandRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.expandRows([e],t)}expandRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=[];return j(e,s=>{r.push(s),t&&this.expandChildRows(s,r)}),i&&this.untrimRows(r),r}expandChildRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(this.dataManager.hasChildren(e)){const r=this.dataManager.getDataObject(e);j(r.__children,s=>{if(!this.isAnyParentCollapsed(s)){const o=this.dataManager.getRowIndex(s);t.push(o),this.expandChildRows(o,t)}})}i&&this.untrimRows(t)}expandChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=[];let s=null,o=null,a=null;return isNaN(e)?(s=e,o=this.dataManager.getRowIndex(e)):(s=this.dataManager.getDataObject(e),o=e),this.collapsedRows.splice(this.collapsedRows.indexOf(o),1),this.dataManager.hasChildren(s)&&j(s.__children,l=>{const c=this.dataManager.getRowIndex(l);r.push(c)}),a=this.expandRows(r,!0,!1),i&&this.untrimRows(a),t&&this.renderAndAdjust(),a}expandMultipleChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=[];j(e,s=>{r.push(...this.expandChildren(s,!1,!1))}),i&&this.untrimRows(r),t&&this.renderAndAdjust()}collapseAll(){const e=this.dataManager.getData(),t=[];j(e,i=>{this.dataManager.hasChildren(i)&&t.push(i)}),this.collapseMultipleChildren(t),this.renderAndAdjust()}expandAll(){const e=this.dataManager.getData(),t=[];j(e,i=>{this.dataManager.hasChildren(i)&&t.push(i)}),this.expandMultipleChildren(t),this.renderAndAdjust()}trimRows(e){this.hot.batchExecution(()=>{j(e,t=>{this.plugin.collapsedRowsMap.setValueAtIndex(t,!0)})},!0)}untrimRows(e){this.hot.batchExecution(()=>{j(e,t=>{this.plugin.collapsedRowsMap.setValueAtIndex(t,!1)})},!0)}areChildrenCollapsed(e){let t=isNaN(e)?e:this.dataManager.getDataObject(e),i=!0;return t===null&&(t={__children:this.dataManager.data}),this.dataManager.hasChildren(t)&&j(t.__children,r=>{const s=this.dataManager.getRowIndex(r);if(!this.plugin.collapsedRowsMap.getValueAtIndex(s))return i=!1,!1}),i}isAnyParentCollapsed(e){let t=e;for(;t!==null;){t=this.dataManager.getRowParent(t);const i=this.dataManager.getRowIndex(t);if(this.collapsedRows.indexOf(i)>-1)return!0}return!1}toggleState(e,t){if(t.col>=0)return;const i=this.translateTrimmedRow(t.row);Ue(e.target,Ha.CSS_CLASSES.button)&&(this.areChildrenCollapsed(i)?this.expandChildren(i):this.collapseChildren(i),mo(e))}translateTrimmedRow(e){return this.hot.toPhysicalRow(e)}untranslateTrimmedRow(e){return this.hot.toVisualRow(e)}renderAndAdjust(){this.hot.render(),this.hot.view.adjustElementsSize()}}function O3e(n,e,t){k3e(n,e),e.set(n,t)}function k3e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function D3e(n,e,t){return(e=N3e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function N3e(n){var e=L3e(n,"string");return typeof e=="symbol"?e:e+""}function L3e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function H3e(n,e){return n.get($3e(n,e))}function $3e(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Aj=new WeakMap;class F3e extends gH{constructor(){super(...arguments),D3e(this,"dataManager",this.plugin.dataManager),O3e(this,Aj,{row_above:(e,t)=>{const i=t[t.length-1];this.dataManager.addSibling(i.start.row,"above")},row_below:(e,t)=>{const i=t[t.length-1];this.dataManager.addSibling(i.start.row,"below")}})}appendOptions(e){const t=[{key:"add_child",name(){return this.getTranslatedPhrase(zN)},callback:()=>{const i=this.dataManager.translateTrimmedRow(this.hot.getSelectedLast()[0]),r=this.dataManager.getDataObject(i);this.dataManager.addChild(r)},disabled:()=>{const i=this.hot.getSelectedLast();return!i||i[0]<0||this.hot.selection.isSelectedByColumnHeader()||this.hot.countRows()>=this.hot.getSettings().maxRows}},{key:"detach_from_parent",name(){return this.getTranslatedPhrase(UN)},callback:()=>{this.dataManager.detachFromParent(this.hot.getSelectedLast())},disabled:()=>{const i=this.hot.getSelectedLast(),r=this.dataManager.translateTrimmedRow(i[0]);return!this.dataManager.getRowParent(r)||!i||i[0]<0||this.hot.selection.isSelectedByColumnHeader()||this.hot.countRows()>=this.hot.getSettings().maxRows}},{name:"---------"}];return He(0,e.items.length-1,i=>{if(i===0)return j(t,(r,s)=>{e.items.splice(i+s,0,r)}),!1}),this.modifyRowInsertingOptions(e)}modifyRowInsertingOptions(e){return He(0,e.items.length-1,t=>{const i=H3e(Aj,this)[e.items[t].key];i!=null&&(e.items[t].callback=i)}),e}}function GC(n,e,t){return(e=B3e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function B3e(n){var e=V3e(n,"string");return typeof e=="symbol"?e:e+""}function V3e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class W3e{constructor(e){GC(this,"plugin",void 0),GC(this,"hot",void 0),GC(this,"dataManager",void 0),GC(this,"collapsingUI",void 0),this.plugin=e,this.hot=e.hot,this.dataManager=e.dataManager,this.collapsingUI=e.collapsingUI}onBeforeRowMove(e,t,i,r){if(this.displayAPICompatibilityWarning({rows:e,finalIndex:t,dropIndex:i,movePossible:r}))return!1;this.movedToCollapsed=!1;const o=i===this.hot.countRows(),a=o?this.hot.countSourceRows():this.dataManager.translateTrimmedRow(i);let l=!0;const c=e.map(g=>{if(!l)return!1;const p=this.dataManager.translateTrimmedRow(g);return l=this.shouldAllowMoving(p,a),p}),u=c.indexOf(a)===-1;if(!l||!u)return!1;const h=this.getBaseParent(c),d=this.getTargetParent(o,a),f=h===d;return this.movedToCollapsed=this.collapsingUI.areChildrenCollapsed(d),this.collapsingUI.collapsedRowsStash.stash(),this.shiftCollapsibleParentsLocations(c,a,f),this.moveRows(c,a,d),this.dataManager.rewriteCache(),this.moveCellsMeta(c,a),this.collapsingUI.collapsedRowsStash.applyStash(!1),this.hot.runHooks("afterRowMove",e,t,i,r,r&&this.isRowOrderChanged(e,t)),this.hot.render(),this.selectCells(e,i),!1}displayAPICompatibilityWarning(e){const{rows:t,finalIndex:i,dropIndex:r,movePossible:s}=e;let o=!1;return dn(r)&&(Yt(Kt`Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows\x20
      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead.`),this.hot.runHooks("afterRowMove",t,i,r,s,!1),o=!0),o}shouldAllowMoving(e,t){return!(this.dataManager.isParent(e)||this.dataManager.isRowHighestLevel(e)||e===t||t===0)}getBaseParent(e){return this.dataManager.getRowParent(e[0])}getTargetParent(e,t){let i=this.dataManager.getRowParent(e?t-1:t);return i==null&&(i=this.dataManager.getRowParent(t-1)),i}shiftCollapsibleParentsLocations(e,t,i){i||(Math.max(...e)<=t?this.collapsingUI.collapsedRowsStash.shiftStash(e[0],t,-1*e.length):this.collapsingUI.collapsedRowsStash.shiftStash(t,e[0],e.length))}moveRows(e,t,i){const r=t===this.dataManager.getRowIndex(i)+this.dataManager.countChildren(i)+1;this.hot.batchRender(()=>{e.forEach(s=>{this.dataManager.moveRow(s,t,this.movedToCollapsed,r)})})}moveCellsMeta(e,t){const i=[],r=Math.max(...e)<t;e.forEach(s=>{i.push(this.hot.getCellMetaAtRow(s))}),this.hot.spliceCellsMeta(e[0],e.length),this.hot.spliceCellsMeta(t-(r?i.length:0),0,...i)}selectCells(e,t){const i=e.length;let r=0,s=0,o=null,a=null;if(this.movedToCollapsed){let l=null;e[i-1]<t?l=this.dataManager.translateTrimmedRow(t-i):l=this.dataManager.translateTrimmedRow(t);const c=this.dataManager.getRowParent(l===null?this.hot.countSourceRows()-1:l-1),u=this.dataManager.getRowIndex(c);r=this.dataManager.untranslateTrimmedRow(u),s=r}else e[i-1]<t?(s=t-1,r=s-i+1):(r=t,s=r+i-1);o=this.hot.selection,a=this.hot.countCols()-1,o.setRangeStart(this.hot._createCellCoords(r,0)),o.setRangeEnd(this.hot._createCellCoords(s,a),!0)}isRowOrderChanged(e,t){return e.some((i,r)=>i-r!==t)}}function j3e(n,e){Fq(n,e),e.add(n)}function Pj(n,e,t){Fq(n,e),e.set(n,t)}function Fq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function YM(n,e,t){return(e=z3e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function z3e(n){var e=U3e(n,"string");return typeof e=="symbol"?e:e+""}function U3e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function HS(n,e){return n.get(_i(n,e))}function OR(n,e,t){return n.set(_i(n,e),t),t}function _i(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const kR="nestedRows",G3e=300,Ij=kR,Y3e="The Nested Rows plugin requires an Array of Objects as a dataset to be provided. The plugin has been disabled.";var SE=new WeakMap,Cg=new WeakMap,Oi=new WeakSet;class K3e extends Lt{constructor(){super(...arguments),j3e(this,Oi),YM(this,"dataManager",null),YM(this,"headersUI",null),YM(this,"collapsedRowsMap",null),Pj(this,SE,!1),Pj(this,Cg,!1)}static get PLUGIN_KEY(){return kR}static get PLUGIN_PRIORITY(){return G3e}isEnabled(){return!!this.hot.getSettings()[kR]}enablePlugin(){var e=this;this.enabled||(this.collapsedRowsMap=this.hot.rowIndexMapper.registerMap("nestedRows",new my),this.dataManager=new M3e(this,this.hot),this.collapsingUI=new I3e(this,this.hot),this.headersUI=new Ha(this,this.hot),this.contextMenuUI=new F3e(this,this.hot),this.rowMoveController=new W3e(this),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,lje).call(e,...i)}),this.addHook("beforeViewRender",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,cje).call(e,...i)}),this.addHook("modifyRowData",function(){return e.onModifyRowData(...arguments)}),this.addHook("modifySourceLength",function(){return e.onModifySourceLength(...arguments)}),this.addHook("beforeDataSplice",function(){return e.onBeforeDataSplice(...arguments)}),this.addHook("filterData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,Z3e).call(e,...i)}),this.addHook("afterContextMenuDefaultOptions",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,Q3e).call(e,...i)}),this.addHook("afterGetRowHeader",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,J3e).call(e,...i)}),this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,X3e).call(e,...i)}),this.addHook("beforeRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,nje).call(e,...i)}),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,tje).call(e,...i)}),this.addHook("beforeAddChild",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,ije).call(e,...i)}),this.addHook("afterAddChild",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,rje).call(e,...i)}),this.addHook("beforeDetachChild",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,sje).call(e,...i)}),this.addHook("afterDetachChild",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,oje).call(e,...i)}),this.addHook("modifyRowHeaderWidth",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,eje).call(e,...i)}),this.addHook("afterCreateRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,aje).call(e,...i)}),this.addHook("beforeRowMove",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Oi,e,q3e).call(e,...i)}),this.addHook("beforeLoadData",t=>_i(Oi,this,Oj).call(this,t)),this.addHook("beforeUpdateData",t=>_i(Oi,this,Oj).call(this,t)),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("nestedRows"),this.unregisterShortcuts(),super.disablePlugin()}updatePlugin(){this.disablePlugin();const e=this.dataManager.getData();this.enablePlugin(),this.dataManager.updateWithData(e),super.updatePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast(),t=this.collapsingUI.translateTrimmedRow(e.row);return this.collapsingUI.areChildrenCollapsed(t)?this.collapsingUI.expandChildren(t):this.collapsingUI.collapseChildren(t),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.col===-1&&i.row>=0},group:Ij,relativeToGroup:ch,position:"before"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(Ij)}disableCoreAPIModifiers(){OR(Cg,this,!0)}enableCoreAPIModifiers(){OR(Cg,this,!1)}onModifyRowData(e){if(!HS(Cg,this))return this.dataManager.getDataObject(e)}onModifySourceLength(){if(!HS(Cg,this))return this.dataManager.countAllRows()}onBeforeDataSplice(e,t,i){return HS(Cg,this)||this.dataManager.isRowHighestLevel(e)?!0:(this.dataManager.spliceData(e,t,i),!1)}destroy(){super.destroy()}}function q3e(n,e,t,i){return this.rowMoveController.onBeforeRowMove(n,e,t,i)}function X3e(n,e,t){this.collapsingUI.toggleState(n,e,t)}function Z3e(n,e,t){return this.collapsingUI.collapsedRowsStash.stash(),this.collapsingUI.collapsedRowsStash.trimStash(t[0],e),this.collapsingUI.collapsedRowsStash.shiftStash(t[0],null,-1*e),this.dataManager.filterData(n,e,t),OR(SE,this,!0),this.dataManager.getData().slice()}function Q3e(n){return this.contextMenuUI.appendOptions(n)}function J3e(n,e){this.headersUI.appendLevelIndicators(n,e)}function eje(n){return Math.max(this.headersUI.rowHeaderWidthCache,n)}function tje(n,e,t,i){i!==this.pluginName&&this.hot._registerTimeout(()=>{OR(SE,this,!1),this.headersUI.updateRowHeaderWidth(),this.collapsingUI.collapsedRowsStash.applyStash()})}function nje(n,e,t){const i=Array.from(t.reduce((r,s)=>{if(this.dataManager.isParent(s)){const o=this.dataManager.getDataObject(s).__children;return r.add(s),Array.isArray(o)&&o.forEach(a=>r.add(this.dataManager.getRowIndex(a))),r}return r.add(s)},new Set));t.length=0,t.push(...i)}function ije(){this.collapsingUI.collapsedRowsStash.stash()}function rje(n,e){this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(e)),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}function sje(){this.collapsingUI.collapsedRowsStash.stash()}function oje(n,e,t){this.collapsingUI.collapsedRowsStash.shiftStash(t,null,-1),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}function aje(){this.dataManager.rewriteCache()}function lje(){this.headersUI.updateRowHeaderWidth()}function cje(n,e){HS(SE,this)&&(e.skipRender=!0)}function Oj(n){if(!cY(n)){ND(Y3e),this.hot.getSettings()[kR]=!1,this.disablePlugin();return}this.dataManager.setData(n),this.dataManager.rewriteCache()}function KM(n,e,t){return(e=uje(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uje(n){var e=hje(n,"string");return typeof e=="symbol"?e:e+""}function hje(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class dje{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;KM(this,"rootWindow",void 0),KM(this,"prefix",void 0),KM(this,"savedKeys",[]),this.rootWindow=t,this.prefix=e,this.loadSavedKeys()}saveValue(e,t){this.rootWindow.localStorage.setItem(`${this.prefix}_${e}`,JSON.stringify(t)),this.savedKeys.indexOf(e)===-1&&(this.savedKeys.push(e),this.saveSavedKeys())}loadValue(e,t){const i=typeof e>"u"?t:e,r=this.rootWindow.localStorage.getItem(`${this.prefix}_${i}`);return r===null?void 0:JSON.parse(r)}reset(e){this.rootWindow.localStorage.removeItem(`${this.prefix}_${e}`)}resetAll(){j(this.savedKeys,(e,t)=>{this.rootWindow.localStorage.removeItem(`${this.prefix}_${this.savedKeys[t]}`)}),this.clearSavedKeys()}loadSavedKeys(){const e=this.rootWindow.localStorage.getItem(`${this.prefix}__persistentStateKeys`),t=typeof e=="string"?JSON.parse(e):void 0;this.savedKeys=t||[]}saveSavedKeys(){this.rootWindow.localStorage.setItem(`${this.prefix}__persistentStateKeys`,JSON.stringify(this.savedKeys))}clearSavedKeys(){this.savedKeys.length=0,this.saveSavedKeys()}}function fje(n,e,t){return(e=gje(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gje(n){var e=pje(n,"string");return typeof e=="symbol"?e:e+""}function pje(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}Ie.getSingleton().register("persistentStateSave");Ie.getSingleton().register("persistentStateLoad");Ie.getSingleton().register("persistentStateReset");const kj="persistentState",mje=0;class vje extends Lt{constructor(){super(...arguments),fje(this,"storage",void 0)}static get PLUGIN_KEY(){return kj}static get PLUGIN_PRIORITY(){return mje}isEnabled(){return!!this.hot.getSettings()[kj]}enablePlugin(){this.enabled||(this.storage||(this.storage=new dje(this.hot.rootElement.id,this.hot.rootWindow)),this.addHook("persistentStateSave",(e,t)=>this.saveValue(e,t)),this.addHook("persistentStateLoad",(e,t)=>this.loadValue(e,t)),this.addHook("persistentStateReset",()=>this.resetValue()),super.enablePlugin())}disablePlugin(){this.storage=void 0,super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}loadValue(e,t){t.value=this.storage.loadValue(e)}saveValue(e,t){this.storage.saveValue(e,t)}resetValue(e){typeof e>"u"?this.storage.resetAll():this.storage.reset(e)}destroy(){super.destroy()}}function bje(n,e){wje(n,e),e.add(n)}function wje(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qM(n,e,t){return(e=yje(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yje(n){var e=Cje(n,"string");return typeof e=="symbol"?e:e+""}function Cje(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Dj(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const XM="search",Sje=190,_je="htSearchResult",Rje=function(n,e,t,i,r){n.getCellMeta(e,t).isSearchResult=r},Eje=function(n,e,t){return dn(n)||n===null||!n.toLocaleLowerCase||n.length===0||dn(e)||e===null?!1:e.toString().toLocaleLowerCase(t.locale).indexOf(n.toLocaleLowerCase(t.locale))!==-1};var ZM=new WeakSet;class xje extends Lt{constructor(){super(...arguments),bje(this,ZM),qM(this,"callback",Rje),qM(this,"queryMethod",Eje),qM(this,"searchResultClass",_je)}static get PLUGIN_KEY(){return XM}static get PLUGIN_PRIORITY(){return Sje}isEnabled(){return this.hot.getSettings()[XM]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[XM];this.updatePluginSettings(t),this.addHook("beforeRenderer",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Dj(ZM,e,Nj).call(e,...r)}),super.enablePlugin()}disablePlugin(){var e=this;const t=function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Dj(ZM,e,Nj).call(e,...r)};this.hot.addHook("beforeRenderer",t),this.hot.addHookOnce("afterViewRender",()=>{this.hot.removeHook("beforeRenderer",t)}),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}query(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getCallback(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getQueryMethod();const r=this.hot.countRows(),s=this.hot.countCols(),o=[],a=this.hot;return He(0,r-1,l=>{He(0,s-1,c=>{const u=this.hot.getDataAtCell(l,c),h=this.hot.getCellMeta(l,c),d=h.search.callback||t,g=(h.search.queryMethod||i)(e,u,h);if(g){const p={row:l,col:c,data:u};o.push(p)}d&&d(a,l,c,u,g)})}),o}getCallback(){return this.callback}setCallback(e){this.callback=e}getQueryMethod(){return this.queryMethod}setQueryMethod(e){this.queryMethod=e}getSearchResultClass(){return this.searchResultClass}setSearchResultClass(e){this.searchResultClass=e}updatePluginSettings(e){lt(e)&&(e.searchResultClass&&this.setSearchResultClass(e.searchResultClass),e.queryMethod&&this.setQueryMethod(e.queryMethod),e.callback&&this.setCallback(e.callback))}destroy(){super.destroy()}}function Nj(n,e,t,i,r,s){const o=s.className||[];let a=[];typeof o=="string"?a=o.split(" "):a.push(...o),this.isEnabled()&&s.isSearchResult?a.includes(this.searchResultClass)||a.push(`${this.searchResultClass}`):a.includes(this.searchResultClass)&&a.splice(a.indexOf(this.searchResultClass),1),s.className=a.join(" ")}function Tje(n,e){Mje(n,e),e.add(n)}function Mje(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function YC(n,e,t){return(e=Aje(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Aje(n){var e=Pje(n,"string");return typeof e=="symbol"?e:e+""}function Pje(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function QM(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Ije="touchScroll",Oje=200;var KC=new WeakSet;class kje extends Lt{constructor(){super(...arguments),Tje(this,KC),YC(this,"scrollbars",[]),YC(this,"clones",[]),YC(this,"lockedCollection",!1),YC(this,"freezeOverlays",!1)}static get PLUGIN_KEY(){return Ije}static get PLUGIN_PRIORITY(){return Oje}static get SETTING_KEYS(){return!0}isEnabled(){return MD()}enablePlugin(){this.enabled||(this.addHook("afterViewRender",()=>QM(KC,this,Dje).call(this)),this.registerEvents(),super.enablePlugin())}updatePlugin(){this.lockedCollection=!1,super.updatePlugin()}disablePlugin(){super.disablePlugin()}registerEvents(){this.addHook("beforeTouchScroll",()=>QM(KC,this,Nje).call(this)),this.addHook("afterMomentumScroll",()=>QM(KC,this,Lje).call(this))}}function Dje(){if(this.lockedCollection)return;const{topOverlay:n,bottomOverlay:e,inlineStartOverlay:t,topInlineStartCornerOverlay:i,bottomInlineStartCornerOverlay:r}=this.hot.view._wt.wtOverlays;this.lockedCollection=!0,this.scrollbars.length=0,this.scrollbars.push(n),e.clone&&this.scrollbars.push(e),this.scrollbars.push(t),i&&this.scrollbars.push(i),r&&r.clone&&this.scrollbars.push(r),this.clones=[],n.needFullRender&&this.clones.push(n.clone.wtTable.holder.parentNode),e.needFullRender&&this.clones.push(e.clone.wtTable.holder.parentNode),t.needFullRender&&this.clones.push(t.clone.wtTable.holder.parentNode),i&&this.clones.push(i.clone.wtTable.holder.parentNode),r&&r.clone&&this.clones.push(r.clone.wtTable.holder.parentNode)}function Nje(){this.freezeOverlays=!0,j(this.clones,n=>{ue(n,"hide-tween")})}function Lje(){this.freezeOverlays=!1,j(this.clones,n=>{Ze(n,"hide-tween"),ue(n,"show-tween")}),this.hot._registerTimeout(()=>{j(this.clones,n=>{Ze(n,"show-tween")})},400),j(this.scrollbars,n=>{n.refresh(),n.resetFixedPosition()}),this.hot.view._wt.wtOverlays.syncScrollWithMaster()}function Hje(n,e){$je(n,e),e.add(n)}function $je(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fje(n,e,t){return(e=Bje(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Bje(n){var e=Vje(n,"string");return typeof e=="symbol"?e:e+""}function Vje(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Wje(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const $S="trimRows",jje=330;var Lj=new WeakSet;class zje extends Lt{constructor(){super(...arguments),Hje(this,Lj),Fje(this,"trimmedRowsMap",null)}static get PLUGIN_KEY(){return $S}static get PLUGIN_PRIORITY(){return jje}isEnabled(){return!!this.hot.getSettings()[$S]}enablePlugin(){this.enabled||(this.trimmedRowsMap=this.hot.rowIndexMapper.registerMap("trimRows",new my),this.trimmedRowsMap.addLocalHook("init",()=>Wje(Lj,this,Uje).call(this)),super.enablePlugin())}updatePlugin(){const e=this.hot.getSettings()[$S];Array.isArray(e)&&this.hot.batchExecution(()=>{this.trimmedRowsMap.clear(),j(e,t=>{this.trimmedRowsMap.setValueAtIndex(t,!0)})},!0),super.updatePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("trimRows"),super.disablePlugin()}getTrimmedRows(){return this.trimmedRowsMap.getTrimmedIndexes()}trimRows(e){const t=this.getTrimmedRows(),i=this.isValidConfig(e);let r=t;i&&(r=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeTrimRow",t,r,i)!==!1&&(i&&this.hot.batchExecution(()=>{j(e,o=>{this.trimmedRowsMap.setValueAtIndex(o,!0)})},!0),this.hot.runHooks("afterTrimRow",t,r,i,i&&r.length>t.length))}trimRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.trimRows(t)}untrimRows(e){const t=this.getTrimmedRows(),i=this.isValidConfig(e);let r=t;const s=this.trimmedRowsMap.getValues().slice(),o=e.length>0;i&&o&&(j(e,l=>{s[l]=!1}),r=ci(s,(l,c,u)=>(c&&l.push(u),l),[])),this.hot.runHooks("beforeUntrimRow",t,r,i&&o)!==!1&&(i&&o&&this.trimmedRowsMap.setValues(s),this.hot.runHooks("afterUntrimRow",t,r,i&&o,i&&r.length<t.length))}untrimRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.untrimRows(t)}isTrimmed(e){return this.trimmedRowsMap.getValueAtIndex(e)||!1}untrimAll(){this.untrimRows(this.getTrimmedRows())}isValidConfig(e){const t=this.hot.countSourceRows();return e.every(i=>Number.isInteger(i)&&i>=0&&i<t)}destroy(){super.destroy()}}function Uje(){const n=this.hot.getSettings()[$S];Array.isArray(n)&&this.hot.batchExecution(()=>{j(n,e=>{this.trimmedRowsMap.setValueAtIndex(e,!0)})},!0)}var Bq={},Gje=oh,Yje=Bq,Kje=Gje("iterator"),qje=Array.prototype,Xje=function(n){return n!==void 0&&(Yje.Array===n||qje[Kje]===n)},Zje=C7,Hj=_1,Qje=b1,Jje=Bq,e6e=oh,t6e=e6e("iterator"),Vq=function(n){if(!Qje(n))return Hj(n,t6e)||Hj(n,"@@iterator")||Jje[Zje(n)]},n6e=aa,i6e=Xw,r6e=Hc,s6e=S1,o6e=Vq,a6e=TypeError,l6e=function(n,e){var t=arguments.length<2?o6e(n):e;if(i6e(t))return r6e(n6e(t,n));throw new a6e(s6e(n)+" is not iterable")},c6e=H7,u6e=aa,h6e=Hc,d6e=S1,f6e=Xje,g6e=ey,$j=y1,p6e=l6e,m6e=Vq,Fj=Vk,v6e=TypeError,FS=function(n,e){this.stopped=n,this.result=e},Bj=FS.prototype,b6e=function(n,e,t){var i=t&&t.that,r=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=c6e(e,i),c,u,h,d,f,g,p,m=function(y){return c&&Fj(c,"normal",y),new FS(!0,y)},b=function(y){return r?(h6e(y),a?l(y[0],y[1],m):l(y[0],y[1])):a?l(y,m):l(y)};if(s)c=n.iterator;else if(o)c=n;else{if(u=m6e(n),!u)throw new v6e(d6e(n)+" is not iterable");if(f6e(u)){for(h=0,d=g6e(n);d>h;h++)if(f=b(n[h]),f&&$j(Bj,f))return f;return new FS(!1)}c=p6e(n,u)}for(g=s?n.next:c.next;!(p=u6e(g,c)).done;){try{f=b(p.value)}catch(y){Fj(c,"throw",y)}if(typeof f=="object"&&f&&$j(Bj,f))return f}return new FS(!1)},w6e=oa,y6e=ah,C6e=v1,S6e=function(n,e,t){w6e?y6e.f(n,e,C6e(0,t)):n[e]=t},_6e=Yi,R6e=b6e,E6e=S6e;_6e({target:"Object",stat:!0},{fromEntries:function(e){var t={};return R6e(e,function(i,r){E6e(t,i,r)},{AS_ENTRIES:!0}),t}});const Wq="undoRedo",x6e="undoRedo";function ye(n){const e=this;this.instance=n,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,this.enabled=!1,n.addHook("afterChange",function(i,r){const s=i&&i.length;if(!s||!i.find(l=>{const[,,c,u]=l;return c!==u}))return;const a=()=>{const l=i.reduce((u,h)=>(u.push([...h]),u),[]);j(l,u=>{u[1]=n.propToCol(u[1])});const c=s>1?this.getSelected():[[l[0][0],l[0][1]]];return new ye.ChangeAction(l,c)};e.done(a,r)}),n.addHook("afterCreateRow",(i,r,s)=>{e.done(()=>new ye.CreateRowAction(i,r),s)});const t=(i,r,s,o)=>{const a=["visualRow","visualCol","row","col","prop"],l=a.length,c=[];return He(s,o,u=>{He(i,r,h=>{const d=n.getCellMeta(h,u);if(Object.keys(d).length!==l){const f=Object.fromEntries(Object.entries(d).filter(g=>{let[p]=g;return a.includes(p)===!1}));c.push([d.visualRow,d.visualCol,f])}})}),c};n.addHook("beforeRemoveRow",(i,r,s,o)=>{const a=()=>{const l=n.toPhysicalRow(i),c=l+r-1,u=gr(e.instance.getSourceData(l,0,l+r-1,e.instance.countSourceCols()-1));return new ye.RemoveRowAction(l,u,n.getSettings().fixedRowsBottom,n.getSettings().fixedRowsTop,n.rowIndexMapper.getIndexesSequence(),t(l,c,0,n.countCols()-1))};e.done(a,o)}),n.addHook("afterCreateCol",(i,r,s)=>{e.done(()=>new ye.CreateColumnAction(i,r),s)}),n.addHook("beforeRemoveCol",(i,r,s,o)=>{const a=()=>{const l=e.instance.getSourceDataArray(),c=(e.instance.countCols()+i)%e.instance.countCols(),u=c+r-1,h=[],d=[],f=[];He(l.length-1,m=>{const b=[],y=l[m];He(c,u,w=>{b.push(y[n.toPhysicalColumn(w)])}),h.push(b)}),He(r-1,m=>{f.push(n.toPhysicalColumn(c+m))}),Array.isArray(n.getSettings().colHeaders)&&He(r-1,m=>{d.push(n.getSettings().colHeaders[n.toPhysicalColumn(c+m)]||null)});const g=n.columnIndexMapper.getIndexesSequence(),p=n.rowIndexMapper.getIndexesSequence();return new ye.RemoveColumnAction(c,f,h,d,g,p,n.getSettings().fixedColumnsStart,t(0,n.countRows(),c,u))};e.done(a,o)}),n.addHook("beforeCellAlignment",(i,r,s,o)=>{e.done(()=>new ye.CellAlignmentAction(i,r,s,o))}),n.addHook("beforeFilter",(i,r)=>{e.done(()=>new ye.FiltersAction(i,r))}),n.addHook("beforeRowMove",(i,r)=>{i!==!1&&e.done(()=>new ye.RowMoveAction(i,r))}),n.addHook("beforeColumnMove",(i,r)=>{i!==!1&&e.done(()=>new ye.ColumnMoveAction(i,r))}),n.addHook("beforeMergeCells",(i,r)=>{r||e.done(()=>new ye.MergeCellsAction(n,i))}),n.addHook("afterUnmergeCells",(i,r)=>{r||e.done(()=>new ye.UnmergeCellsAction(n,i))}),n.addHook("beforeColumnSort",(i,r,s)=>{s&&e.done(()=>new ye.ColumnSortAction(i,r))}),n.addHook("afterInit",()=>{e.init()})}ye.prototype.done=function(n,e){if(this.ignoreNewActions||e==="UndoRedo.undo"||e==="UndoRedo.redo"||e==="auto")return;const i=this.doneActions.slice();if(this.instance.runHooks("beforeUndoStackChange",i,e)===!1)return;const s=n(),o=this.undoneActions.slice();this.doneActions.push(s),this.instance.runHooks("afterUndoStackChange",i,this.doneActions.slice()),this.instance.runHooks("beforeRedoStackChange",o),this.undoneActions.length=0,this.instance.runHooks("afterRedoStackChange",o,this.undoneActions.slice())};ye.prototype.undo=function(){if(this.isUndoAvailable()){const n=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",n);const e=this.doneActions.pop();this.instance.runHooks("afterUndoStackChange",n,this.doneActions.slice());const t=gr(e);if(this.instance.runHooks("beforeUndo",t)===!1)return;this.ignoreNewActions=!0;const r=this,s=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",s),e.undo(this.instance,()=>{r.ignoreNewActions=!1,r.undoneActions.push(e)}),this.instance.runHooks("afterRedoStackChange",s,this.undoneActions.slice()),this.instance.runHooks("afterUndo",t)}};ye.prototype.redo=function(){if(this.isRedoAvailable()){const n=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",n);const e=this.undoneActions.pop();this.instance.runHooks("afterRedoStackChange",n,this.undoneActions.slice());const t=gr(e);if(this.instance.runHooks("beforeRedo",t)===!1)return;this.ignoreNewActions=!0;const r=this,s=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",s),e.redo(this.instance,()=>{r.ignoreNewActions=!1,r.doneActions.push(e)}),this.instance.runHooks("afterUndoStackChange",s,this.doneActions.slice()),this.instance.runHooks("afterRedo",t)}};ye.prototype.isUndoAvailable=function(){return this.doneActions.length>0};ye.prototype.isRedoAvailable=function(){return this.undoneActions.length>0};ye.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0};ye.prototype.isEnabled=function(){return this.enabled};ye.prototype.enable=function(){if(this.isEnabled())return;const n=this.instance;this.enabled=!0,A6e(n),this.registerShortcuts(),n.addHook("afterChange",jq)};ye.prototype.disable=function(){if(!this.isEnabled())return;const n=this.instance;this.enabled=!1,P6e(n),this.unregisterShortcuts(),n.removeHook("afterChange",jq)};ye.prototype.destroy=function(){this.clear(),this.instance=null,this.doneActions=null,this.undoneActions=null};ye.Action=function(){};ye.Action.prototype.undo=function(){};ye.Action.prototype.redo=function(){};ye.ChangeAction=function(n,e){this.changes=n,this.selected=e,this.actionType="change"};ca(ye.ChangeAction,ye.Action);ye.ChangeAction.prototype.undo=function(n,e){const t=gr(this.changes),i=n.countEmptyRows(!0),r=n.countEmptyCols(!0);for(let o=0,a=t.length;o<a;o++)t[o].splice(3,1);n.addHookOnce("afterChange",e),n.setDataAtCell(t,null,null,"UndoRedo.undo");for(let o=0,a=t.length;o<a;o++){const[l,c]=t[o];n.getSettings().minSpareRows&&l+1+n.getSettings().minSpareRows===n.countRows()&&i===n.getSettings().minSpareRows&&(n.alter("remove_row",parseInt(l+1,10),n.getSettings().minSpareRows),n.undoRedo.doneActions.pop()),n.getSettings().minSpareCols&&c+1+n.getSettings().minSpareCols===n.countCols()&&r===n.getSettings().minSpareCols&&(n.alter("remove_col",parseInt(c+1,10),n.getSettings().minSpareCols),n.undoRedo.doneActions.pop())}const s=n.getSelectedLast();if(s!==void 0){const[o,a]=t[0],[l,c]=s,u=n.view.getFirstFullyVisibleRow(),h=n.view.getFirstFullyVisibleColumn(),d=o>=u,f=a>=h;if((d&&f)===!1&&(l!==o||c!==a)===!0){const m={row:o,col:a};d===!1&&(m.verticalSnap="top"),f===!1&&(m.horizontalSnap="start"),n.scrollViewportTo(m)}}n.selectCells(this.selected,!1,!1)};ye.ChangeAction.prototype.redo=function(n,e){const t=gr(this.changes);for(let i=0,r=t.length;i<r;i++)t[i].splice(2,1);n.addHookOnce("afterChange",e),n.setDataAtCell(t,null,null,"UndoRedo.redo"),this.selected&&n.selectCells(this.selected,!1,!1)};ye.CreateRowAction=function(n,e){this.index=n,this.amount=e,this.actionType="insert_row"};ca(ye.CreateRowAction,ye.Action);ye.CreateRowAction.prototype.undo=function(n,e){const t=n.countRows(),i=n.getSettings().minSpareRows;this.index>=t&&this.index-i<t&&(this.index-=i),n.addHookOnce("afterRemoveRow",e),n.alter("remove_row",this.index,this.amount,"UndoRedo.undo")};ye.CreateRowAction.prototype.redo=function(n,e){n.addHookOnce("afterCreateRow",e),n.alter("insert_row_above",this.index,this.amount,"UndoRedo.redo")};ye.RemoveRowAction=function(n,e,t,i,r,s){this.index=n,this.data=e,this.actionType="remove_row",this.fixedRowsBottom=t,this.fixedRowsTop=i,this.rowIndexesSequence=r,this.removedCellMetas=s};ca(ye.RemoveRowAction,ye.Action);ye.RemoveRowAction.prototype.undo=function(n,e){const t=n.getSettings(),i=[];t.fixedRowsBottom=this.fixedRowsBottom,t.fixedRowsTop=this.fixedRowsTop,this.data.forEach((r,s)=>{Object.keys(r).forEach(o=>{const a=parseInt(o,10);i.push([this.index+s,isNaN(a)?o:a,r[o]])})}),n.alter("insert_row_above",this.index,this.data.length,"UndoRedo.undo"),this.removedCellMetas.forEach(r=>{let[s,o,a]=r;n.setCellMetaObject(s,o,a)}),n.addHookOnce("afterViewRender",e),n.setSourceDataAtCell(i,null,null,"UndoRedo.undo"),n.rowIndexMapper.setIndexesSequence(this.rowIndexesSequence)};ye.RemoveRowAction.prototype.redo=function(n,e){n.addHookOnce("afterRemoveRow",e),n.alter("remove_row",this.index,this.data.length,"UndoRedo.redo")};ye.CreateColumnAction=function(n,e){this.index=n,this.amount=e,this.actionType="insert_col"};ca(ye.CreateColumnAction,ye.Action);ye.CreateColumnAction.prototype.undo=function(n,e){n.addHookOnce("afterRemoveCol",e),n.alter("remove_col",this.index,this.amount,"UndoRedo.undo")};ye.CreateColumnAction.prototype.redo=function(n,e){n.addHookOnce("afterCreateCol",e),n.alter("insert_col_start",this.index,this.amount,"UndoRedo.redo")};ye.RemoveColumnAction=function(n,e,t,i,r,s,o,a){this.index=n,this.indexes=e,this.data=t,this.amount=this.data[0].length,this.headers=i,this.columnPositions=r.slice(0),this.rowPositions=s.slice(0),this.actionType="remove_col",this.fixedColumnsStart=o,this.removedCellMetas=a};ca(ye.RemoveColumnAction,ye.Action);ye.RemoveColumnAction.prototype.undo=function(n,e){const t=n.getSettings();t.fixedColumnsStart=this.fixedColumnsStart;const i=this.indexes.slice(0).sort(),r=(c,u,h)=>h[this.indexes.indexOf(i[u])],s=this.data.length,o=[];for(let c=0;c<s;c++)o.push(vt(this.data[c],r));const a=vt(this.headers,r),l=[];n.alter("insert_col_start",this.indexes[0],this.indexes.length,"UndoRedo.undo"),j(n.getSourceDataArray(),(c,u)=>{j(i,(h,d)=>{c[h]=o[u][d],l.push([u,h,c[h]])})}),n.setSourceDataAtCell(l,void 0,void 0,"UndoRedo.undo"),typeof this.headers<"u"&&j(a,(c,u)=>{n.getSettings().colHeaders[i[u]]=c}),this.removedCellMetas.forEach(c=>{let[u,h,d]=c;n.setCellMetaObject(u,h,d)}),n.batchExecution(()=>{n.rowIndexMapper.setIndexesSequence(this.rowPositions),n.columnIndexMapper.setIndexesSequence(this.columnPositions)},!0),n.addHookOnce("afterViewRender",e),n.render()};ye.RemoveColumnAction.prototype.redo=function(n,e){n.addHookOnce("afterRemoveCol",e),n.alter("remove_col",this.index,this.amount,"UndoRedo.redo")};ye.CellAlignmentAction=function(n,e,t,i){this.stateBefore=n,this.range=e,this.type=t,this.alignment=i};ye.CellAlignmentAction.prototype.undo=function(n,e){j(this.range,t=>{t.forAll((i,r)=>{i>=0&&r>=0&&n.setCellMeta(i,r,"className",this.stateBefore[i][r]||" htLeft")})}),n.addHookOnce("afterViewRender",e),n.render()};ye.CellAlignmentAction.prototype.redo=function(n,e){au(this.range,this.type,this.alignment,(t,i)=>n.getCellMeta(t,i),(t,i,r,s)=>n.setCellMeta(t,i,r,s)),n.addHookOnce("afterViewRender",e),n.render()};ye.FiltersAction=function(n,e){this.previousConditionsStack=e,this.conditionsStack=n,this.actionType="filter"};ca(ye.FiltersAction,ye.Action);ye.FiltersAction.prototype.undo=function(n,e){const t=n.getPlugin("filters");n.addHookOnce("afterViewRender",e),this.previousConditionsStack&&t.conditionCollection.importAllConditions(this.previousConditionsStack),t.filter()};ye.FiltersAction.prototype.redo=function(n,e){const t=n.getPlugin("filters");n.addHookOnce("afterViewRender",e),t.conditionCollection.importAllConditions(this.conditionsStack),t.filter()};class T6e extends ye.Action{constructor(e,t){super(),this.cellRange=t;const i=this.cellRange.getTopStartCorner(),r=this.cellRange.getBottomEndCorner();this.rangeData=e.getData(i.row,i.col,r.row,r.col)}undo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.unmergeRange(this.cellRange,!0);const r=this.cellRange.getTopStartCorner();e.populateFromArray(r.row,r.col,this.rangeData,void 0,void 0,"MergeCells")}redo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.mergeRange(this.cellRange)}}ye.MergeCellsAction=T6e;class M6e extends ye.Action{constructor(e,t){super(),this.cellRange=t}undo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.mergeRange(this.cellRange,!0)}redo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.unmergeRange(this.cellRange,!0),e.render()}}ye.UnmergeCellsAction=M6e;ye.RowMoveAction=function(n,e){this.rows=n.slice(),this.finalRowIndex=e,this.actionType="row_move"};ca(ye.RowMoveAction,ye.Action);ye.RowMoveAction.prototype.undo=function(n,e){const t=n.getPlugin("manualRowMove");n.addHookOnce("afterViewRender",e),cH(this.rows,this.finalRowIndex,n.rowIndexMapper.getNumberOfIndexes()).reverse().forEach(r=>{let{from:s,to:o}=r;s<o&&(o-=1),t.moveRow(o,s)}),n.render(),n.deselectCell(),n.selectRows(this.rows[0],this.rows[0]+this.rows.length-1)};ye.RowMoveAction.prototype.redo=function(n,e){const t=n.getPlugin("manualRowMove");n.addHookOnce("afterViewRender",e),t.moveRows(this.rows.slice(),this.finalRowIndex),n.render(),n.deselectCell(),n.selectRows(this.finalRowIndex,this.finalRowIndex+this.rows.length-1)};ye.ColumnMoveAction=function(n,e){this.columns=n.slice(),this.finalColumnIndex=e,this.actionType="col_move"};ca(ye.ColumnMoveAction,ye.Action);ye.ColumnMoveAction.prototype.undo=function(n,e){const t=n.getPlugin("manualColumnMove");n.addHookOnce("afterViewRender",e),cH(this.columns,this.finalColumnIndex,n.columnIndexMapper.getNumberOfIndexes()).reverse().forEach(r=>{let{from:s,to:o}=r;s<o&&(o-=1),t.moveColumn(o,s)}),n.render(),n.deselectCell(),n.selectColumns(this.columns[0],this.columns[0]+this.columns.length-1)};ye.ColumnMoveAction.prototype.redo=function(n,e){const t=n.getPlugin("manualColumnMove");n.addHookOnce("afterViewRender",e),t.moveColumns(this.columns.slice(),this.finalColumnIndex),n.render(),n.deselectCell(),n.selectColumns(this.finalColumnIndex,this.finalColumnIndex+this.columns.length-1)};ye.ColumnSortAction=function(n,e){this.previousSortState=n,this.nextSortState=e};ca(ye.ColumnSortAction,ye.Action);ye.ColumnSortAction.prototype.undo=function(n,e){const t=n.getPlugin("columnSorting"),i=n.getPlugin("multiColumnSorting"),r=i.isEnabled()?i:t;this.previousSortState.length?r.sort(this.previousSortState):r.clearSort(),e()};ye.ColumnSortAction.prototype.redo=function(n,e){const t=n.getPlugin("columnSorting"),i=n.getPlugin("multiColumnSorting");(i.isEnabled()?i:t).sort(this.nextSortState),e()};ye.prototype.init=function(){const n=this.instance.getSettings().undo,e=typeof n>"u"||n;this.instance.undoRedo||(this.instance.undoRedo=this),e?this.instance.undoRedo.enable():this.instance.undoRedo.disable()};ye.prototype.registerShortcuts=function(){const e=this.instance.getShortcutManager().getContext("grid"),i={runOnlyIf:r=>!r.altKey,group:Wq};e.addShortcuts([{keys:[["Control/Meta","z"]],callback:()=>{this.undo()}},{keys:[["Control/Meta","y"],["Control/Meta","Shift","z"]],callback:()=>{this.redo()}}],i)};ye.prototype.unregisterShortcuts=function(){this.instance.getShortcutManager().getContext("grid").removeShortcutsByGroup(Wq)};function jq(n,e){const t=this;if(e==="loadData")return t.undoRedo.clear()}function A6e(n){n.undo=function(){return n.undoRedo.undo()},n.redo=function(){return n.undoRedo.redo()},n.isUndoAvailable=function(){return n.undoRedo.isUndoAvailable()},n.isRedoAvailable=function(){return n.undoRedo.isRedoAvailable()},n.clearUndo=function(){return n.undoRedo.clear()}}function P6e(n){delete n.undo,delete n.redo,delete n.isUndoAvailable,delete n.isRedoAvailable,delete n.clearUndo}const Ey=Ie.getSingleton();Ey.add("afterUpdateSettings",function(){var n;(n=this.getPlugin("undoRedo"))===null||n===void 0||n.init()});Ey.register("beforeUndo");Ey.register("afterUndo");Ey.register("beforeRedo");Ey.register("afterRedo");ye.PLUGIN_KEY=x6e;ye.SETTING_KEYS=!0;function I6e(){At(Tb),At(oke),At(Mb),At(Bke),At(Kke),At(fK),At(WDe),At(TNe),At(mE),At(GLe),At(bHe),At(xHe),At(wE),At(e$e),At(Q2e),At(AFe),At(tBe),At(dBe),At(RBe),At(NBe),At(UBe),At(cVe),At(bVe),At(ZVe),At(IWe),At(LWe),At(l3e),At(K3e),At(vje),At(xje),At(kje),At(zje),At(ye)}function O6e(){NIe(),JIe(),lOe(),MOe(),I6e()}function k6e(n){const e=typeof window>"u"?!1:window.jQuery;e&&(e.fn.handsontable=function(t){const i=this.first();let r=i.data("handsontable");if(typeof t!="string"){const c=t||{};return r?r.updateSettings(c):(r=new n.Core(i[0],c),i.data("handsontable",r),r.init()),i}let s;if(r)if(typeof r[t]<"u"){for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];s=r[t].call(r,...a),t==="destroy"&&i.removeData()}else throw new Error(`Handsontable do not provide action: ${t}`);return s})}var JM,eA,tA,nA,iA;O6e();k6e(Qe);Qe.__GhostTable=KL;Qe._getListenersCounter=LRe;Qe._getRegisteredMapsCounter=sMe;Qe.EventManager=co;const D6e=[jSe,Z_e,GTe,tOe,K_e,I_e,YSe,x1e,Y_e,qSe,eRe,E1e],N6e=[T_e,tRe];Qe.helper={};Qe.dom={};j(D6e,n=>{j(Object.getOwnPropertyNames(n),e=>{e.charAt(0)!=="_"&&(Qe.helper[e]=n[e])})});j(N6e,n=>{j(Object.getOwnPropertyNames(n),e=>{e.charAt(0)!=="_"&&(Qe.dom[e]=n[e])})});Qe.cellTypes=(JM=Qe.cellTypes)!==null&&JM!==void 0?JM:{};j(uAe(),n=>{Qe.cellTypes[n]=PL(n)});Qe.cellTypes.registerCellType=Ws;Qe.cellTypes.getCellType=PL;Qe.editors=(eA=Qe.editors)!==null&&eA!==void 0?eA:{};j(PRe(),n=>{Qe.editors[`${fr(n)}Editor`]=G_(n)});Qe.editors.registerEditor=Gr;Qe.editors.getEditor=G_;Qe.renderers=(tA=Qe.renderers)!==null&&tA!==void 0?tA:{};j(V1e(),n=>{const e=Y_(n);n==="base"&&(Qe.renderers.cellDecorator=e),Qe.renderers[`${fr(n)}Renderer`]=e});Qe.renderers.registerRenderer=ss;Qe.renderers.getRenderer=Y_;Qe.validators=(nA=Qe.validators)!==null&&nA!==void 0?nA:{};j(z1e(),n=>{Qe.validators[`${fr(n)}Validator`]=WD(n)});Qe.validators.registerValidator=vd;Qe.validators.getValidator=WD;Qe.plugins=(iA=Qe.plugins)!==null&&iA!==void 0?iA:{};j(VD(),n=>{Qe.plugins[n]=dy(n)});Qe.plugins[`${fr(Lt.PLUGIN_KEY)}Plugin`]=Lt;Qe.plugins.registerPlugin=At;Qe.plugins.getPlugin=dy;var zq;let Uq,Gq,Yq,Kq,qq;function L6e(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],b=e.length;function y(_,T,I){return function(x,P){T&&(P=x,x=n);for(var D=0;D<_.length;D++)P=_[D].apply(x,I?[P]:[]);return I?P:x}}function w(_,T,I,x){if(typeof _!="function"&&(x||_!==void 0))throw new TypeError(T+" must "+(I||"be")+" a function"+(x?"":" or undefined"));return _}function R(_,T,I,x,P,D,B,V,z,L,k){function F(oe){if(!k(oe))throw new TypeError("Attempted to access private element on non-instance")}var G=[].concat(T[0]),U=T[3],se=!B,v=P===1,C=P===3,S=P===4,A=P===2;function H(oe,ae,Fe){return function(ve,Se){return ae&&(Se=ve,ve=_),Fe&&Fe(ve),M[oe].call(ve,Se)}}if(!se){var M={},$=[],q=C?"get":S||v?"set":"value";if(z?(L||v?M={get:Vj(function(){return U(this)},x,"get"),set:function(oe){T[4](this,oe)}}:M[q]=U,L||Vj(M[q],x,A?"":q)):L||(M=Object.getOwnPropertyDescriptor(_,x)),!L&&!z){if((a=m[+V][x])&&(a^P)!=7)throw Error("Decorating two elements with the same name ("+M[q].name+") is not supported yet");m[+V][x]=P<3?1:P}}for(var Q=_,ce=G.length-1;ce>=0;ce-=I?2:1){var le=w(G[ce],"A decorator","be",!0),Me=I?G[ce-1]:void 0,Ce={},J={kind:["field","accessor","method","getter","setter","class"][P],name:x,metadata:o,addInitializer:(function(oe,ae){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ae,"An initializer","be",!0),D.push(ae)}).bind(null,Ce)};if(se)a=le.call(Me,Q,J),Ce.v=1,w(a,"class decorators","return")&&(Q=a);else if(J.static=V,J.private=z,a=J.access={has:z?k.bind():function(oe){return x in oe}},S||(a.get=z?A?function(oe){return F(oe),M.value}:H("get",0,F):function(oe){return oe[x]}),A||C||(a.set=z?H("set",0,F):function(oe,ae){oe[x]=ae}),Q=le.call(Me,v?{get:M.get,set:M.set}:M[q],J),Ce.v=1,v){if(typeof Q=="object"&&Q)(a=w(Q.get,"accessor.get"))&&(M.get=a),(a=w(Q.set,"accessor.set"))&&(M.set=a),(a=w(Q.init,"accessor.init"))&&$.unshift(a);else if(Q!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(Q,(L?"field":"method")+" decorators","return")&&(L?$.unshift(Q):M[q]=Q)}return P<2&&B.push(y($,V,1),y(D,V,0)),L||se||(z?v?B.splice(-1,0,H("get",V),H("set",V)):B.push(A?M[q]:w.call.bind(M[q])):g(_,x,M)),Q}function E(_){return g(_,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(_){_&&u.push(y(_))},d=function(_,T){for(var I=0;I<t.length;I++){var x=t[I],P=x[1],D=7&P;if((8&P)==_&&!D==T){var B=x[2],V=!!x[3],z=16&P;R(_?n:n.prototype,x,z,V?"#"+B:H6e(B),D,D<2?[]:_?c=c||[]:l=l||[],u,!!_,V,T,_&&V?function(L){return F6e(L)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,b||E(n),{e:a,get c(){var _=[];return b&&[E(n=R(n,[e],i,n.name,5,_)),y(_,1)]}}}function H6e(n){var e=$6e(n,"string");return typeof e=="symbol"?e:e+""}function $6e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Vj(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function F6e(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let Xq;class B6e{constructor(){this.ea=pe(aO),this.mytable=void 0,this.hot=void 0,this.datachannel=Gq(this),this.tabid=(Yq(this),Kq(this)),this.showtable=(qq(this),!0)}attached(){let e=[["Subject/Object/Predicate","type","CRC Risk","CRC Neoplasia","Physical Activity"],["Trans-Chlordane","environmental","corelates","is",0],["PCB194","environmental","corelates",1],["Sterilisation","biometric","increase",0],["Tobacco Consumption","lifestyle","increase",1,1],["PAC-RSK","Interaction Term","decrease",0,1]],t=this;this.hot=new Qe(this.mytable,{data:e,rowHeaders:!0,colHeaders:!0,autoWrapRow:!0,autoWrapCol:!0,licenseKey:"non-commercial-and-evaluation",afterChange:function(i,r){r==="loadData"||!i||i.forEach(([s,o,a,l])=>{t.changeContent(s,o,a,l)})}})}changeContent(e,t,i,r){if(console.log(`Cell at row ${e}, column ${t} changed from "${i}" to "${r}".`),e==0)this.ea.publish(this.datachannel,{type:"changeNode",old:i,value:r});else if(t==0)this.ea.publish(this.datachannel,{type:"changeNode",old:i,value:r});else if(t==1){const s=this.hot.getDataAtCell(e,0);this.ea.publish(this.datachannel,{type:"changeType",node:s,old:i,value:r})}else{const s=this.hot.getDataAtCell(e,0),o=this.hot.getDataAtCell(0,t);this.ea.publish(this.datachannel,{type:"changeEdge",subject:s,object:o,old:i,value:r})}}submit(){let e=this.hot.getData();console.log("submit data:",e),this.ea.publish(this.datachannel,e)}showHide(){this.showtable=!this.showtable}addRow(){let e=prompt("Subject name","");if(e){const t=this.hot.countRows();this.hot.alter("insert_row_below",t),this.hot.setDataAtCell(t,0,e),this.hot.setDataAtCell(t,1,"environmental"),this.hot.selectCell(t,0)}}addColumn(){let e=prompt("Object name","");if(e){const t=this.hot.countCols();this.hot.alter("insert_col_end",t),this.hot.setDataAtCell(0,t,e),this.hot.selectCell(0,t)}}}zq=B6e;({e:[Gq,Yq,Kq,qq],c:[Xq,Uq]}=L6e(zq,[mf({...nde,name:"sv-table"})],[[Fa,0,"datachannel"],[Fa,0,"tabid"]]));Uq();const Zq="network",YI=`<div>    
    <div ref="container" style="height:80vh;width:100%"></div>
</div>`,Qq=[],Jq={};let rA;function V6e(n){rA||(rA=Ar.define({name:Zq,template:YI,dependencies:Qq,bindables:Jq})),n.register(rA)}const W6e=Object.freeze(Object.defineProperty({__proto__:null,bindables:Jq,default:YI,dependencies:Qq,name:Zq,register:V6e,template:YI},Symbol.toStringTag,{value:"Module"}));var pH={exports:{}},hp=typeof Reflect=="object"?Reflect:null,Wj=hp&&typeof hp.apply=="function"?hp.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},BS;hp&&typeof hp.ownKeys=="function"?BS=hp.ownKeys:Object.getOwnPropertySymbols?BS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:BS=function(e){return Object.getOwnPropertyNames(e)};function j6e(n){console&&console.warn&&console.warn(n)}var eX=Number.isNaN||function(e){return e!==e};function an(){an.init.call(this)}pH.exports=an;pH.exports.once=Y6e;an.EventEmitter=an;an.prototype._events=void 0;an.prototype._eventsCount=0;an.prototype._maxListeners=void 0;var jj=10;function _E(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(an,"defaultMaxListeners",{enumerable:!0,get:function(){return jj},set:function(n){if(typeof n!="number"||n<0||eX(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");jj=n}});an.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};an.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||eX(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function tX(n){return n._maxListeners===void 0?an.defaultMaxListeners:n._maxListeners}an.prototype.getMaxListeners=function(){return tX(this)};an.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")Wj(l,this,t);else for(var c=l.length,u=oX(l,c),i=0;i<c;++i)Wj(u[i],this,t);return!0};function nX(n,e,t,i){var r,s,o;if(_E(t),s=n._events,s===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),s=n._events),o=s[e]),o===void 0)o=s[e]=t,++n._eventsCount;else if(typeof o=="function"?o=s[e]=i?[t,o]:[o,t]:i?o.unshift(t):o.push(t),r=tX(n),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=n,a.type=e,a.count=o.length,j6e(a)}return n}an.prototype.addListener=function(e,t){return nX(this,e,t,!1)};an.prototype.on=an.prototype.addListener;an.prototype.prependListener=function(e,t){return nX(this,e,t,!0)};function z6e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function iX(n,e,t){var i={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},r=z6e.bind(i);return r.listener=t,i.wrapFn=r,r}an.prototype.once=function(e,t){return _E(t),this.on(e,iX(this,e,t)),this};an.prototype.prependOnceListener=function(e,t){return _E(t),this.prependListener(e,iX(this,e,t)),this};an.prototype.removeListener=function(e,t){var i,r,s,o,a;if(_E(t),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():U6e(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};an.prototype.off=an.prototype.removeListener;an.prototype.removeAllListeners=function(e){var t,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function rX(n,e,t){var i=n._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?t?[r.listener||r]:[r]:t?G6e(r):oX(r,r.length)}an.prototype.listeners=function(e){return rX(this,e,!0)};an.prototype.rawListeners=function(e){return rX(this,e,!1)};an.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):sX.call(n,e)};an.prototype.listenerCount=sX;function sX(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}an.prototype.eventNames=function(){return this._eventsCount>0?BS(this._events):[]};function oX(n,e){for(var t=new Array(e),i=0;i<e;++i)t[i]=n[i];return t}function U6e(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function G6e(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function Y6e(n,e){return new Promise(function(t,i){function r(o){n.removeListener(e,s),i(o)}function s(){typeof n.removeListener=="function"&&n.removeListener("error",r),t([].slice.call(arguments))}aX(n,e,s,{once:!0}),e!=="error"&&K6e(n,r,{once:!0})})}function K6e(n,e,t){typeof n.on=="function"&&aX(n,"error",e,t)}function aX(n,e,t,i){if(typeof n.on=="function")i.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function r(s){i.once&&n.removeEventListener(e,r),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var mH=pH.exports;function ul(n){if(typeof n!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=n}typeof Symbol<"u"&&(ul.prototype[Symbol.iterator]=function(){return this});ul.of=function(){var n=arguments,e=n.length,t=0;return new ul(function(){return t>=e?{done:!0}:{done:!1,value:n[t++]}})};ul.empty=function(){var n=new ul(function(){return{done:!0}});return n};ul.fromSequence=function(n){var e=0,t=n.length;return new ul(function(){return e>=t?{done:!0}:{done:!1,value:n[e++]}})};ul.is=function(n){return n instanceof ul?!0:typeof n=="object"&&n!==null&&typeof n.next=="function"};var vH=ul;const uo=Up(vH);var bH={};bH.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";bH.SYMBOL_SUPPORT=typeof Symbol<"u";var q6e=vH,lX=bH,X6e=lX.ARRAY_BUFFER_SUPPORT,Z6e=lX.SYMBOL_SUPPORT;function Q6e(n){return typeof n=="string"||Array.isArray(n)||X6e&&ArrayBuffer.isView(n)?q6e.fromSequence(n):typeof n!="object"||n===null?null:Z6e&&typeof n[Symbol.iterator]=="function"?n[Symbol.iterator]():typeof n.next=="function"?n:null}var cX=function(e){var t=Q6e(e);if(!t)throw new Error("obliterator: target is not iterable nor a valid iterator.");return t},J6e=cX,eze=function(e,t){for(var i=arguments.length>1?t:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=J6e(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==t&&(r.length=o),r;r[o++]=s.value}};const uX=Up(eze);var tze=vH,nze=cX,ize=function(){var e=arguments,t=null,i=-1;return new tze(function(){var s=null;do{if(t===null){if(i++,i>=e.length)return{done:!0};t=nze(e[i])}if(s=t.next(),s.done===!0){t=null;continue}break}while(!0);return s})};const Sc=Up(ize);function rze(){const n=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const i in arguments[e])n[i]=arguments[e][i];return n}let Ei=rze;typeof Object.assign=="function"&&(Ei=Object.assign);function io(n,e,t,i){const r=n._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[t]||r.undirected&&r.undirected[t]:i==="directed"?s=r.out&&r.out[t]:s=r.undirected&&r.undirected[t]),s}function zi(n){return typeof n=="object"&&n!==null}function hX(n){let e;for(e in n)return!1;return!0}function Bs(n,e,t){Object.defineProperty(n,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function ko(n,e,t){const i={enumerable:!0,configurable:!0};typeof t=="function"?i.get=t:(i.value=t,i.writable=!1),Object.defineProperty(n,e,i)}function zj(n){return!(!zi(n)||n.attributes&&!Array.isArray(n.attributes))}function sze(){let n=Math.floor(Math.random()*256)&255;return()=>n++}class wH extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class Pe extends wH{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Pe.prototype.constructor)}}class we extends wH{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,we.prototype.constructor)}}class Ye extends wH{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ye.prototype.constructor)}}function dX(n,e){this.key=n,this.attributes=e,this.clear()}dX.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function fX(n,e){this.key=n,this.attributes=e,this.clear()}fX.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function gX(n,e){this.key=n,this.attributes=e,this.clear()}gX.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function rm(n,e,t,i,r){this.key=e,this.attributes=r,this.undirected=n,this.source=t,this.target=i}rm.prototype.attach=function(){let n="out",e="in";this.undirected&&(n=e="undirected");const t=this.source.key,i=this.target.key;this.source[n][i]=this,!(this.undirected&&t===i)&&(this.target[e][t]=this)};rm.prototype.attachMulti=function(){let n="out",e="in";const t=this.source.key,i=this.target.key;this.undirected&&(n=e="undirected");const r=this.source[n],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&t===i||(this.target[e][t]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][t]=this};rm.prototype.detach=function(){const n=this.source.key,e=this.target.key;let t="out",i="in";this.undirected&&(t=i="undirected"),delete this.source[t][e],delete this.target[i][n]};rm.prototype.detachMulti=function(){const n=this.source.key,e=this.target.key;let t="out",i="in";this.undirected&&(t=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[i][n]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[i][n]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const pX=0,mX=1,oze=2,vX=3;function jc(n,e,t,i,r,s,o){let a,l,c,u;if(i=""+i,t===pX){if(a=n._nodes.get(i),!a)throw new we(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(t===vX){if(r=""+r,l=n._edges.get(r),!l)throw new we(`Graph.${e}: could not find the "${r}" edge in the graph.`);const h=l.source.key,d=l.target.key;if(i===h)a=l.target;else if(i===d)a=l.source;else throw new we(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${h}, ${d}).`);c=s,u=o}else{if(l=n._edges.get(i),!l)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`);t===mX?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function aze(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=jc(this,e,t,i,r,s);return o.attributes[a]}}function lze(n,e,t){n.prototype[e]=function(i,r){const[s]=jc(this,e,t,i,r);return s.attributes}}function cze(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=jc(this,e,t,i,r,s);return o.attributes.hasOwnProperty(a)}}function uze(n,e,t){n.prototype[e]=function(i,r,s,o){const[a,l,c]=jc(this,e,t,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function hze(n,e,t){n.prototype[e]=function(i,r,s,o){const[a,l,c]=jc(this,e,t,i,r,s,o);if(typeof c!="function")throw new Pe(`Graph.${e}: updater should be a function.`);const u=a.attributes,h=c(u[l]);return u[l]=h,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function dze(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=jc(this,e,t,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function fze(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=jc(this,e,t,i,r,s);if(!zi(a))throw new Pe(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function gze(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=jc(this,e,t,i,r,s);if(!zi(a))throw new Pe(`Graph.${e}: provided attributes are not a plain object.`);return Ei(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function pze(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=jc(this,e,t,i,r,s);if(typeof a!="function")throw new Pe(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const mze=[{name:n=>`get${n}Attribute`,attacher:aze},{name:n=>`get${n}Attributes`,attacher:lze},{name:n=>`has${n}Attribute`,attacher:cze},{name:n=>`set${n}Attribute`,attacher:uze},{name:n=>`update${n}Attribute`,attacher:hze},{name:n=>`remove${n}Attribute`,attacher:dze},{name:n=>`replace${n}Attributes`,attacher:fze},{name:n=>`merge${n}Attributes`,attacher:gze},{name:n=>`update${n}Attributes`,attacher:pze}];function vze(n){mze.forEach(function({name:e,attacher:t}){t(n,e("Node"),pX),t(n,e("Source"),mX),t(n,e("Target"),oze),t(n,e("Opposite"),vX)})}function bze(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=io(this,o,a,t),!s)throw new we(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function wze(n,e,t){n.prototype[e]=function(i){let r;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=io(this,s,o,t),!r)throw new we(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function yze(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=io(this,o,a,t),!s)throw new we(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function Cze(n,e,t){n.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=io(this,a,l,t),!o)throw new we(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Sze(n,e,t){n.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=io(this,a,l,t),!o)throw new we(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new Pe(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function _ze(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=io(this,o,a,t),!s)throw new we(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function Rze(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=io(this,o,a,t),!s)throw new we(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!zi(r))throw new Pe(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function Eze(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=io(this,o,a,t),!s)throw new we(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!zi(r))throw new Pe(`Graph.${e}: provided attributes are not a plain object.`);return Ei(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function xze(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=io(this,o,a,t),!s)throw new we(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new Pe(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Tze=[{name:n=>`get${n}Attribute`,attacher:bze},{name:n=>`get${n}Attributes`,attacher:wze},{name:n=>`has${n}Attribute`,attacher:yze},{name:n=>`set${n}Attribute`,attacher:Cze},{name:n=>`update${n}Attribute`,attacher:Sze},{name:n=>`remove${n}Attribute`,attacher:_ze},{name:n=>`replace${n}Attributes`,attacher:Rze},{name:n=>`merge${n}Attributes`,attacher:Eze},{name:n=>`update${n}Attributes`,attacher:xze}];function Mze(n){Tze.forEach(function({name:e,attacher:t}){t(n,e("Edge"),"mixed"),t(n,e("DirectedEdge"),"directed"),t(n,e("UndirectedEdge"),"undirected")})}const Aze=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Pze(n,e,t,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=t(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),n&&r)return o.key}}function Ize(n,e,t,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=t(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),n&&a)return r.key;r=r.next}while(r!==void 0)}}function sA(n,e){const t=Object.keys(n),i=t.length;let r,s=0;return new uo(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=t[s++];if(a===e){r=void 0;continue}r=n[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function Oze(n,e,t,i){const r=e[t];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&n)return r.key}function kze(n,e,t,i){let r=e[t];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),n&&s)return r.key;r=r.next}while(r!==void 0)}function oA(n,e){let t=n[e];return t.next!==void 0?new uo(function(){if(!t)return{done:!0};const i={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:i}}):uo.of({edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected})}function Dze(n,e){if(n.size===0)return[];if(e==="mixed"||e===n.type)return typeof Array.from=="function"?Array.from(n._edges.keys()):uX(n._edges.keys(),n._edges.size);const t=e==="undirected"?n.undirectedSize:n.directedSize,i=new Array(t),r=e==="undirected",s=n._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function bX(n,e,t,i){if(e.size===0)return;const r=t!=="mixed"&&t!==e.type,s=t==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:h,source:d,target:f}=a;if(l=i(u,h,d.key,f.key,d.attributes,f.attributes,a.undirected),n&&l)return u}}function Nze(n,e){if(n.size===0)return uo.empty();const t=e!=="mixed"&&e!==n.type,i=e==="undirected",r=n._edges.values();return new uo(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(t&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function yH(n,e,t,i,r,s){const o=e?Ize:Pze;let a;if(t!=="undirected"&&(i!=="out"&&(a=o(n,r.in,s),n&&a)||i!=="in"&&(a=o(n,r.out,s,i?void 0:r.key),n&&a))||t!=="directed"&&(a=o(n,r.undirected,s),n&&a))return a}function Lze(n,e,t,i){const r=[];return yH(!1,n,e,t,i,function(s){r.push(s)}),r}function Hze(n,e,t){let i=uo.empty();return n!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(i=Sc(i,sA(t.in))),e!=="in"&&typeof t.out<"u"&&(i=Sc(i,sA(t.out,e?void 0:t.key)))),n!=="directed"&&typeof t.undirected<"u"&&(i=Sc(i,sA(t.undirected))),i}function CH(n,e,t,i,r,s,o){const a=t?kze:Oze;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(n,r.in,s,o),n&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(n,r.out,s,o),n&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(n,r.undirected,s,o),n&&l))return l}function $ze(n,e,t,i,r){const s=[];return CH(!1,n,e,t,i,r,function(o){s.push(o)}),s}function Fze(n,e,t,i){let r=uo.empty();return n!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&i in t.in&&(r=Sc(r,oA(t.in,i))),typeof t.out<"u"&&e!=="in"&&i in t.out&&(e||t.key!==i)&&(r=Sc(r,oA(t.out,i)))),n!=="directed"&&typeof t.undirected<"u"&&i in t.undirected&&(r=Sc(r,oA(t.undirected,i))),r}function Bze(n,e){const{name:t,type:i,direction:r}=e;n.prototype[t]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return Dze(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new we(`Graph.${t}: could not find the "${s}" node in the graph.`);return Lze(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new we(`Graph.${t}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new we(`Graph.${t}:  could not find the "${o}" target node in the graph.`);return $ze(i,this.multi,r,a,o)}throw new Pe(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Vze(n,e){const{name:t,type:i,direction:r}=e,s="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(c,u,h){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return h=c,bX(!1,this,i,h);if(arguments.length===2){c=""+c,h=u;const d=this._nodes.get(c);if(typeof d>"u")throw new we(`Graph.${s}: could not find the "${c}" node in the graph.`);return yH(!1,this.multi,i==="mixed"?this.type:i,r,d,h)}if(arguments.length===3){c=""+c,u=""+u;const d=this._nodes.get(c);if(!d)throw new we(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new we(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return CH(!1,i,this.multi,r,d,u,h)}throw new Pe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+t[0].toUpperCase()+t.slice(1);n.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let h;if(c.length===0){let d=0;i!=="directed"&&(d+=this.undirectedSize),i!=="undirected"&&(d+=this.directedSize),h=new Array(d);let f=0;c.push((g,p,m,b,y,w,R)=>{h[f++]=u(g,p,m,b,y,w,R)})}else h=[],c.push((d,f,g,p,m,b,y)=>{h.push(u(d,f,g,p,m,b,y))});return this[s].apply(this,c),h};const a="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),h=[];return c.push((d,f,g,p,m,b,y)=>{u(d,f,g,p,m,b,y)&&h.push(d)}),this[s].apply(this,c),h};const l="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new Pe(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new Pe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,h;c.length===2?(u=c[0],h=c[1],c=[]):c.length===3?(u=c[1],h=c[2],c=[c[0]]):c.length===4&&(u=c[2],h=c[3],c=[c[0],c[1]]);let d=h;return c.push((f,g,p,m,b,y,w)=>{d=u(d,f,g,p,m,b,y,w)}),this[s].apply(this,c),d}}function Wze(n,e){const{name:t,type:i,direction:r}=e,s="find"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,bX(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const h=this._nodes.get(l);if(typeof h>"u")throw new we(`Graph.${s}: could not find the "${l}" node in the graph.`);return yH(!0,this.multi,i==="mixed"?this.type:i,r,h,u)}if(arguments.length===3){l=""+l,c=""+c;const h=this._nodes.get(l);if(!h)throw new we(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new we(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return CH(!0,i,this.multi,r,h,c,u)}throw new Pe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((h,d,f,g,p,m,b)=>c(h,d,f,g,p,m,b)),!!this[s].apply(this,l)};const a="every"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((h,d,f,g,p,m,b)=>!c(h,d,f,g,p,m,b)),!this[s].apply(this,l)}}function jze(n,e){const{name:t,type:i,direction:r}=e,s=t.slice(0,-1)+"Entries";n.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return uo.empty();if(!arguments.length)return Nze(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new we(`Graph.${s}: could not find the "${o}" node in the graph.`);return Hze(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new we(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new we(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return Fze(i,r,l,a)}throw new Pe(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function zze(n){Aze.forEach(e=>{Bze(n,e),Vze(n,e),Wze(n,e),jze(n,e)})}const Uze=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function RE(){this.A=null,this.B=null}RE.prototype.wrap=function(n){this.A===null?this.A=n:this.B===null&&(this.B=n)};RE.prototype.has=function(n){return this.A!==null&&n in this.A||this.B!==null&&n in this.B};function Rv(n,e,t,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===t?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(n&&u)return c.key}}function SH(n,e,t,i,r){if(e!=="mixed"){if(e==="undirected")return Rv(n,null,i,i.undirected,r);if(typeof t=="string")return Rv(n,null,i,i[t],r)}const s=new RE;let o;if(e!=="undirected"){if(t!=="out"){if(o=Rv(n,null,i,i.in,r),n&&o)return o;s.wrap(i.in)}if(t!=="in"){if(o=Rv(n,s,i,i.out,r),n&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=Rv(n,s,i,i.undirected,r),n&&o))return o}function Gze(n,e,t){if(n!=="mixed"){if(n==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const i=[];return SH(!1,n,e,t,function(r){i.push(r)}),i}function Ev(n,e,t){const i=Object.keys(t),r=i.length;let s=0;return new uo(function(){let a=null;do{if(s>=r)return n&&n.wrap(t),{done:!0};const l=t[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,n&&n.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function Yze(n,e,t){if(n!=="mixed"){if(n==="undirected")return Ev(null,t,t.undirected);if(typeof e=="string")return Ev(null,t,t[e])}let i=uo.empty();const r=new RE;return n!=="undirected"&&(e!=="out"&&(i=Sc(i,Ev(r,t,t.in))),e!=="in"&&(i=Sc(i,Ev(r,t,t.out)))),n!=="directed"&&(i=Sc(i,Ev(r,t,t.undirected))),i}function Kze(n,e){const{name:t,type:i,direction:r}=e;n.prototype[t]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new we(`Graph.${t}: could not find the "${s}" node in the graph.`);return Gze(i==="mixed"?this.type:i,r,o)}}function qze(n,e){const{name:t,type:i,direction:r}=e,s="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const h=this._nodes.get(c);if(typeof h>"u")throw new we(`Graph.${s}: could not find the "${c}" node in the graph.`);SH(!1,i==="mixed"?this.type:i,r,h,u)};const o="map"+t[0].toUpperCase()+t.slice(1);n.prototype[o]=function(c,u){const h=[];return this[s](c,(d,f)=>{h.push(u(d,f))}),h};const a="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[a]=function(c,u){const h=[];return this[s](c,(d,f)=>{u(d,f)&&h.push(d)}),h};const l="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(c,u,h){if(arguments.length<3)throw new Pe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let d=h;return this[s](c,(f,g)=>{d=u(d,f,g)}),d}}function Xze(n,e){const{name:t,type:i,direction:r}=e,s=t[0].toUpperCase()+t.slice(1,-1),o="find"+s;n.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const h=this._nodes.get(c);if(typeof h>"u")throw new we(`Graph.${o}: could not find the "${c}" node in the graph.`);return SH(!0,i==="mixed"?this.type:i,r,h,u)};const a="some"+s;n.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;n.prototype[l]=function(c,u){return!this[o](c,(d,f)=>!u(d,f))}}function Zze(n,e){const{name:t,type:i,direction:r}=e,s=t.slice(0,-1)+"Entries";n.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return uo.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new we(`Graph.${s}: could not find the "${o}" node in the graph.`);return Yze(i==="mixed"?this.type:i,r,a)}}function Qze(n){Uze.forEach(e=>{Kze(n,e),qze(n,e),Xze(n,e),Zze(n,e)})}function qC(n,e,t,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,h,d;for(;a=s.next(),a.done!==!0;){let f=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){h=u[c];do d=h.target,f=!0,r(l.key,d.key,l.attributes,d.attributes,h.key,h.attributes,h.undirected),h=h.next;while(h)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){h=u[c];do d=h.target,d.key!==c&&(d=h.source),f=!0,r(l.key,d.key,l.attributes,d.attributes,h.key,h.attributes,h.undirected),h=h.next;while(h)}}t&&!f&&r(l.key,null,l.attributes,null,null,null,null)}}function Jze(n,e){const t={key:n};return hX(e.attributes)||(t.attributes=Ei({},e.attributes)),t}function e5e(n,e,t){const i={key:e,source:t.source.key,target:t.target.key};return hX(t.attributes)||(i.attributes=Ei({},t.attributes)),n==="mixed"&&t.undirected&&(i.undirected=!0),i}function t5e(n){if(!zi(n))throw new Pe('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in n))throw new Pe("Graph.import: serialized node is missing its key.");if("attributes"in n&&(!zi(n.attributes)||n.attributes===null))throw new Pe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function n5e(n){if(!zi(n))throw new Pe('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in n))throw new Pe("Graph.import: serialized edge is missing its source.");if(!("target"in n))throw new Pe("Graph.import: serialized edge is missing its target.");if("attributes"in n&&(!zi(n.attributes)||n.attributes===null))throw new Pe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in n&&typeof n.undirected!="boolean")throw new Pe("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const i5e=sze(),r5e=new Set(["directed","undirected","mixed"]),Uj=new Set(["domain","_events","_eventsCount","_maxListeners"]),s5e=[{name:n=>`${n}Edge`,generateKey:!0},{name:n=>`${n}DirectedEdge`,generateKey:!0,type:"directed"},{name:n=>`${n}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:n=>`${n}EdgeWithKey`},{name:n=>`${n}DirectedEdgeWithKey`,type:"directed"},{name:n=>`${n}UndirectedEdgeWithKey`,type:"undirected"}],o5e={allowSelfLoops:!0,multi:!1,type:"mixed"};function a5e(n,e,t){if(t&&!zi(t))throw new Pe(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},n._nodes.has(e))throw new Ye(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new n.NodeDataClass(e,t);return n._nodes.set(e,i),n.emit("nodeAdded",{key:e,attributes:t}),i}function Gj(n,e,t){const i=new n.NodeDataClass(e,t);return n._nodes.set(e,i),n.emit("nodeAdded",{key:e,attributes:t}),i}function wX(n,e,t,i,r,s,o,a){if(!i&&n.type==="undirected")throw new Ye(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&n.type==="directed")throw new Ye(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!zi(a))throw new Pe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!n.allowSelfLoops&&s===o)throw new Ye(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=n._nodes.get(s),c=n._nodes.get(o);if(!l)throw new we(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new we(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(t)r=n._edgeKeyGenerator();else if(r=""+r,n._edges.has(r))throw new Ye(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!n.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Ye(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const h=new rm(i,r,l,c,a);n._edges.set(r,h);const d=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,d&&(l.undirectedLoops++,n._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,d&&(l.directedLoops++,n._directedSelfLoopCount++)),n.multi?h.attachMulti():h.attach(),i?n._undirectedSize++:n._directedSize++,u.key=r,n.emit("edgeAdded",u),r}function l5e(n,e,t,i,r,s,o,a,l){if(!i&&n.type==="undirected")throw new Ye(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&n.type==="directed")throw new Ye(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new Pe(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!zi(a))throw new Pe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!n.allowSelfLoops&&s===o)throw new Ye(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=n._nodes.get(s),h=n._nodes.get(o),d,f;if(!t&&(d=n._edges.get(r),d)){if((d.source.key!==s||d.target.key!==o)&&(!i||d.source.key!==o||d.target.key!==s))throw new Ye(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${d.source.key}", "${d.target.key}").`);f=d}if(!f&&!n.multi&&u&&(f=i?u.undirected[o]:u.out[o]),f){const y=[f.key,!1,!1,!1];if(l?!c:!a)return y;if(l){const w=f.attributes;f.attributes=c(w),n.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else Ei(f.attributes,a),n.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return y}a=a||{},l&&c&&(a=c(a));const g={key:null,undirected:i,source:s,target:o,attributes:a};if(t)r=n._edgeKeyGenerator();else if(r=""+r,n._edges.has(r))throw new Ye(`Graph.${e}: the "${r}" edge already exists in the graph.`);let p=!1,m=!1;u||(u=Gj(n,s,{}),p=!0,s===o&&(h=u,m=!0)),h||(h=Gj(n,o,{}),m=!0),d=new rm(i,r,u,h,a),n._edges.set(r,d);const b=s===o;return i?(u.undirectedDegree++,h.undirectedDegree++,b&&(u.undirectedLoops++,n._undirectedSelfLoopCount++)):(u.outDegree++,h.inDegree++,b&&(u.directedLoops++,n._directedSelfLoopCount++)),n.multi?d.attachMulti():d.attach(),i?n._undirectedSize++:n._directedSize++,g.key=r,n.emit("edgeAdded",g),[r,!0,p,m]}function Sg(n,e){n._edges.delete(e.key);const{source:t,target:i,attributes:r}=e,s=e.undirected,o=t===i;s?(t.undirectedDegree--,i.undirectedDegree--,o&&(t.undirectedLoops--,n._undirectedSelfLoopCount--)):(t.outDegree--,i.inDegree--,o&&(t.directedLoops--,n._directedSelfLoopCount--)),n.multi?e.detachMulti():e.detach(),s?n._undirectedSize--:n._directedSize--,n.emit("edgeDropped",{key:e.key,attributes:r,source:t.key,target:i.key,undirected:s})}class qt extends mH.EventEmitter{constructor(e){if(super(),e=Ei({},o5e,e),typeof e.multi!="boolean")throw new Pe(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!r5e.has(e.type))throw new Pe(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new Pe(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?dX:e.type==="directed"?fX:gX;Bs(this,"NodeDataClass",t);const i="geid_"+i5e()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};Bs(this,"_attributes",{}),Bs(this,"_nodes",new Map),Bs(this,"_edges",new Map),Bs(this,"_directedSize",0),Bs(this,"_undirectedSize",0),Bs(this,"_directedSelfLoopCount",0),Bs(this,"_undirectedSelfLoopCount",0),Bs(this,"_edgeKeyGenerator",s),Bs(this,"_options",e),Uj.forEach(o=>Bs(this,o,this[o])),ko(this,"order",()=>this._nodes.size),ko(this,"size",()=>this._edges.size),ko(this,"directedSize",()=>this._directedSize),ko(this,"undirectedSize",()=>this._undirectedSize),ko(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ko(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ko(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ko(this,"multi",this._options.multi),ko(this,"type",this._options.type),ko(this,"allowSelfLoops",this._options.allowSelfLoops),ko(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(t):!1}throw new Pe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(t):!1}throw new Pe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(t)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(t):!1}throw new Pe(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new Ye("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new we(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new we(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const r=i.out&&i.out[t]||void 0;if(r)return r.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new Ye("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new we(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new we(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const r=i.undirected&&i.undirected[t]||void 0;if(r)return r.key}edge(e,t){if(this.multi)throw new Ye("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new we(`Graph.edge: could not find the "${t}" target node in the graph.`);const r=i.out&&i.out[t]||i.undirected&&i.undirected[t]||void 0;if(r)return r.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.in||t in i.out}areOutNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.out}areInNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in i.undirected}areNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in i.in||t in i.out)||this.type!=="directed"&&t in i.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in i.in||this.type!=="directed"&&t in i.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in i.out||this.type!=="directed"&&t in i.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.inDegree),i}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.outDegree),i}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.inDegree+t.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.inDegree,r+=t.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.outDegree,r+=t.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.inDegree+t.outDegree,r+=t.directedLoops*2),i-r}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new we(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new we(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new we(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const i=this._edges.get(t);if(!i)throw new we(`Graph.opposite: could not find the "${t}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new we(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${r}, ${s}).`)}hasExtremity(e,t){e=""+e,t=""+t;const i=this._edges.get(e);if(!i)throw new we(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===t||i.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new we(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new we(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new we(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return a5e(this,e,t).key}mergeNode(e,t){if(t&&!zi(t))throw new Pe(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let i=this._nodes.get(e);return i?(t&&(Ei(i.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:t})),[e,!1]):(i=new this.NodeDataClass(e,t),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new Pe(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let i=this._nodes.get(e);if(i){if(t){const s=i.attributes;i.attributes=t(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=t?t({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in t.out){i=t.out[r];do Sg(this,i),i=i.next;while(i)}for(const r in t.in){i=t.in[r];do Sg(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in t.undirected){i=t.undirected[r];do Sg(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(t=io(this,i,r,this.type),!t)throw new we(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new we(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Sg(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new Ye("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Ye("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const i=io(this,e,t,"directed");if(!i)throw new we(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Sg(this,i),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new Ye("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Ye("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=io(this,e,t,"undirected");if(!i)throw new we(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Sg(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new Pe("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=t(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!zi(e))throw new Pe("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!zi(e))throw new Pe("Graph.mergeAttributes: provided attributes are not a plain object.");return Ei(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new Pe("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new Pe("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!zj(t))throw new Pe("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new Pe("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!zj(t))throw new Pe("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new Pe("Graph.forEachAdjacencyEntry: expecting a callback.");qC(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Pe("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");qC(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new Pe("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");qC(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Pe("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");qC(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):uX(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new Pe("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new Pe("Graph.findNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new Pe("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=t.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new Pe("Graph.someNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new Pe("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new Pe("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let i,r;const s=[];for(;i=t.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,t){if(typeof e!="function")throw new Pe("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Pe("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=t;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new uo(()=>{const t=e.next();if(t.done)return t;const i=t.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((r,s)=>{e[t++]=Jze(s,r)});const i=new Array(this._edges.size);return t=0,this._edges.forEach((r,s)=>{i[t++]=e5e(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,t=!1){if(e instanceof qt)return e.forEachNode((l,c)=>{t?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,h,d,f,g)=>{t?g?this.mergeUndirectedEdgeWithKey(l,u,h,c):this.mergeDirectedEdgeWithKey(l,u,h,c):g?this.addUndirectedEdgeWithKey(l,u,h,c):this.addDirectedEdgeWithKey(l,u,h,c)}),this;if(!zi(e))throw new Pe("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!zi(e.attributes))throw new Pe("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new Pe("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],t5e(o);const{key:l,attributes:c}=o;t?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new Pe("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],n5e(a);const{source:c,target:u,attributes:h,undirected:d=l}=a;let f;"key"in a?(f=t?d?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:d?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,c,u,h)):(f=t?d?this.mergeUndirectedEdge:this.mergeDirectedEdge:d?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,c,u,h))}}return this}nullCopy(e){const t=new qt(Ei({},this._options,e));return t.replaceAttributes(Ei({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=Ei({},i.attributes);i=new t.NodeDataClass(r,s),t._nodes.set(r,i)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Ye(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Ye("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Ye("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,wX(t,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,Ei({},s.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const t={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,h;s.undirected&&c>u&&(h=c,c=u,u=h);const d=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[d]>"u"?i[d]=0:i[d]++,l+=`${i[d]}. `):l+=`[${o}]: `,l+=d,t[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!Uj.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=t,Bs(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(qt.prototype[Symbol.for("nodejs.util.inspect.custom")]=qt.prototype.inspect);s5e.forEach(n=>{["add","merge","update"].forEach(e=>{const t=n.name(e),i=e==="add"?wX:l5e;n.generateKey?qt.prototype[t]=function(r,s,o){return i(this,t,!0,(n.type||this.type)==="undirected",null,r,s,o,e==="update")}:qt.prototype[t]=function(r,s,o,a){return i(this,t,!1,(n.type||this.type)==="undirected",r,s,o,a,e==="update")}})});vze(qt);Mze(qt);zze(qt);Qze(qt);class yX extends qt{constructor(e){const t=Ei({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new Pe("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new Pe('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class CX extends qt{constructor(e){const t=Ei({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new Pe("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new Pe('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class SX extends qt{constructor(e){const t=Ei({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Pe("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class _X extends qt{constructor(e){const t=Ei({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Pe("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new Pe('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class RX extends qt{constructor(e){const t=Ei({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Pe("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new Pe('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function sm(n){n.from=function(e,t){const i=Ei({},e.options,t),r=new n(i);return r.import(e),r}}sm(qt);sm(yX);sm(CX);sm(SX);sm(_X);sm(RX);qt.Graph=qt;qt.DirectedGraph=yX;qt.UndirectedGraph=CX;qt.MultiGraph=SX;qt.MultiDirectedGraph=_X;qt.MultiUndirectedGraph=RX;qt.InvalidArgumentsGraphError=Pe;qt.NotFoundGraphError=we;qt.UsageGraphError=Ye;function c5e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ub(n){var e=c5e(n,"string");return typeof e=="symbol"?e:e+""}function pr(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Yj(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Ub(i.key),i)}}function mr(n,e,t){return e&&Yj(n.prototype,e),t&&Yj(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Pp(n){return Pp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pp(n)}function EX(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EX=function(){return!!n})()}function me(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function u5e(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return me(n)}function vo(n,e,t){return e=Pp(e),u5e(n,EX()?Reflect.construct(e,t||[],Pp(n).constructor):e.apply(n,t))}function KI(n,e){return KI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},KI(n,e)}function bo(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&KI(n,e)}function h5e(n){if(Array.isArray(n))return n}function d5e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function qI(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function xX(n,e){if(n){if(typeof n=="string")return qI(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?qI(n,e):void 0}}function f5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DR(n,e){return h5e(n)||d5e(n,e)||xX(n,e)||f5e()}var aA={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},TX=new Int8Array(4),lA=new Int32Array(TX.buffer,0,1),g5e=new Float32Array(TX.buffer,0,1),p5e=/^\s*rgba?\s*\(/,m5e=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function v5e(n){var e=0,t=0,i=0,r=1;if(n[0]==="#")n.length===4?(e=parseInt(n.charAt(1)+n.charAt(1),16),t=parseInt(n.charAt(2)+n.charAt(2),16),i=parseInt(n.charAt(3)+n.charAt(3),16)):(e=parseInt(n.charAt(1)+n.charAt(2),16),t=parseInt(n.charAt(3)+n.charAt(4),16),i=parseInt(n.charAt(5)+n.charAt(6),16)),n.length===9&&(r=parseInt(n.charAt(7)+n.charAt(8),16)/255);else if(p5e.test(n)){var s=n.match(m5e);s&&(e=+s[1],t=+s[2],i=+s[3],s[4]&&(r=+s[4]))}return{r:e,g:t,b:i,a:r}}var dp={};for(var XC in aA)dp[XC]=om(aA[XC]),dp[aA[XC]]=dp[XC];function MX(n,e,t,i,r){return lA[0]=i<<24|t<<16|e<<8|n,lA[0]=lA[0]&4278190079,g5e[0]}function om(n){if(n=n.toLowerCase(),typeof dp[n]<"u")return dp[n];var e=v5e(n),t=e.r,i=e.g,r=e.b,s=e.a;s=s*255|0;var o=MX(t,i,r,s);return dp[n]=o,o}var cA={};function AX(n){if(typeof cA[n]<"u")return cA[n];var e=(n&16711680)>>>16,t=(n&65280)>>>8,i=n&255,r=255,s=MX(e,t,i,r);return cA[n]=s,s}function Kj(n,e,t,i){return t+(e<<8)+(n<<16)}function qj(n,e,t,i,r,s){var o=Math.floor(t/s*r),a=Math.floor(n.drawingBufferHeight/s-i/s*r),l=new Uint8Array(4);n.bindFramebuffer(n.FRAMEBUFFER,e),n.readPixels(o,a,1,1,n.RGBA,n.UNSIGNED_BYTE,l);var c=DR(l,4),u=c[0],h=c[1],d=c[2],f=c[3];return[u,h,d,f]}function de(n,e,t){return(e=Ub(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Xj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function We(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xj(Object(t),!0).forEach(function(i){de(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Xj(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function b5e(n,e){for(;!{}.hasOwnProperty.call(n,e)&&(n=Pp(n))!==null;);return n}function XI(){return XI=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,e,t){var i=b5e(n,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?n:t):r.value}},XI.apply(null,arguments)}function PX(n,e,t,i){var r=XI(Pp(n.prototype),e,t);return typeof r=="function"?function(s){return r.apply(t,s)}:r}function w5e(n){return n.normalized?1:n.size}function uA(n){var e=0;return n.forEach(function(t){return e+=w5e(t)}),e}function IX(n,e,t){var i=n==="VERTEX"?e.VERTEX_SHADER:e.FRAGMENT_SHADER,r=e.createShader(i);if(r===null)throw new Error("loadShader: error while creating the shader");e.shaderSource(r,t),e.compileShader(r);var s=e.getShaderParameter(r,e.COMPILE_STATUS);if(!s){var o=e.getShaderInfoLog(r);throw e.deleteShader(r),new Error(`loadShader: error while compiling the shader:
`.concat(o,`
`).concat(t))}return r}function y5e(n,e){return IX("VERTEX",n,e)}function C5e(n,e){return IX("FRAGMENT",n,e)}function S5e(n,e){var t=n.createProgram();if(t===null)throw new Error("loadProgram: error while creating the program.");var i,r;for(i=0,r=e.length;i<r;i++)n.attachShader(t,e[i]);n.linkProgram(t);var s=n.getProgramParameter(t,n.LINK_STATUS);if(!s)throw n.deleteProgram(t),new Error("loadProgram: error while linking the program.");return t}function Zj(n){var e=n.gl,t=n.buffer,i=n.program,r=n.vertexShader,s=n.fragmentShader;e.deleteShader(r),e.deleteShader(s),e.deleteProgram(i),e.deleteBuffer(t)}var Qj=`#define PICKING_MODE
`,_5e=de(de(de(de(de(de(de(de({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),OX=function(){function n(e,t,i){pr(this,n),de(this,"array",new Float32Array),de(this,"constantArray",new Float32Array),de(this,"capacity",0),de(this,"verticesCount",0);var r=this.getDefinition();if(this.VERTICES=r.VERTICES,this.VERTEX_SHADER_SOURCE=r.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=r.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=r.UNIFORMS,this.ATTRIBUTES=r.ATTRIBUTES,this.METHOD=r.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in r?r.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in r?r.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in r,this.ATTRIBUTES_ITEMS_COUNT=uA(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=i,this.normalProgram=this.getProgramInfo("normal",e,r.VERTEX_SHADER_SOURCE,r.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=t?this.getProgramInfo("pick",e,Qj+r.VERTEX_SHADER_SOURCE,Qj+r.FRAGMENT_SHADER_SOURCE,t):null,this.isInstanced){var s=uA(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*s);for(var o=0;o<this.CONSTANT_DATA.length;o++){var a=this.CONSTANT_DATA[o];if(a.length!==s)throw new Error("Program: error while getting constant data (one vector has ".concat(a.length," items instead of ").concat(s,")"));for(var l=0;l<a.length;l++)this.constantArray[o*s+l]=a[l]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return mr(n,[{key:"kill",value:function(){Zj(this.normalProgram),this.pickProgram&&(Zj(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(t,i,r,s,o){var a=this.getDefinition(),l=i.createBuffer();if(l===null)throw new Error("Program: error while creating the WebGL buffer.");var c=y5e(i,r),u=C5e(i,s),h=S5e(i,[c,u]),d={};a.UNIFORMS.forEach(function(p){var m=i.getUniformLocation(h,p);m&&(d[p]=m)});var f={};a.ATTRIBUTES.forEach(function(p){f[p.name]=i.getAttribLocation(h,p.name)});var g;if("CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach(function(p){f[p.name]=i.getAttribLocation(h,p.name)}),g=i.createBuffer(),g===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:t,program:h,gl:i,frameBuffer:o,buffer:l,constantBuffer:g||{},uniformLocations:d,attributeLocations:f,isPicking:t==="pick",vertexShader:c,fragmentShader:u}}},{key:"bindProgram",value:function(t){var i=this,r=0,s=t.gl,o=t.buffer;this.isInstanced?(s.bindBuffer(s.ARRAY_BUFFER,t.constantBuffer),r=0,this.CONSTANT_ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,t,r,!1)}),s.bufferData(s.ARRAY_BUFFER,this.constantArray,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,t.buffer),r=0,this.ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,t,r,!0)}),s.bufferData(s.ARRAY_BUFFER,this.array,s.DYNAMIC_DRAW)):(s.bindBuffer(s.ARRAY_BUFFER,o),r=0,this.ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,t,r)}),s.bufferData(s.ARRAY_BUFFER,this.array,s.DYNAMIC_DRAW)),s.bindBuffer(s.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(t){var i=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,t,!1)}),this.ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,t,!0)})):this.ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,t)})}},{key:"bindAttribute",value:function(t,i,r,s){var o=_5e[t.type];if(typeof o!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(t.type,'"'));var a=i.attributeLocations[t.name],l=i.gl;if(a!==-1){l.enableVertexAttribArray(a);var c=this.isInstanced?(s?this.ATTRIBUTES_ITEMS_COUNT:uA(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(l.vertexAttribPointer(a,t.size,t.type,t.normalized||!1,c,r),this.isInstanced&&s)if(l instanceof WebGL2RenderingContext)l.vertexAttribDivisor(a,1);else{var u=l.getExtension("ANGLE_instanced_arrays");u&&u.vertexAttribDivisorANGLE(a,1)}}return t.size*o}},{key:"unbindAttribute",value:function(t,i,r){var s=i.attributeLocations[t.name],o=i.gl;if(s!==-1&&(o.disableVertexAttribArray(s),this.isInstanced&&r))if(o instanceof WebGL2RenderingContext)o.vertexAttribDivisor(s,0);else{var a=o.getExtension("ANGLE_instanced_arrays");a&&a.vertexAttribDivisorANGLE(s,0)}}},{key:"reallocate",value:function(t){t!==this.capacity&&(this.capacity=t,this.verticesCount=this.VERTICES*t,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(t,i){var r=i.gl,s=i.program;r.enable(r.BLEND),r.useProgram(s),this.setUniforms(t,i),this.drawWebGL(this.METHOD,i)}},{key:"render",value:function(t){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,t.width*t.pixelRatio/t.downSizingRatio,t.height*t.pixelRatio/t.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(We(We({},t),{},{pixelRatio:t.pixelRatio/t.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,t.width*t.pixelRatio,t.height*t.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(t,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(t,i){var r=i.gl,s=i.frameBuffer;if(r.bindFramebuffer(r.FRAMEBUFFER,s),!this.isInstanced)r.drawArrays(t,0,this.verticesCount);else if(r instanceof WebGL2RenderingContext)r.drawArraysInstanced(t,0,this.VERTICES,this.capacity);else{var o=r.getExtension("ANGLE_instanced_arrays");o&&o.drawArraysInstancedANGLE(t,0,this.VERTICES,this.capacity)}}}]),n}(),kX=function(n){bo(e,n);function e(){return pr(this,e),vo(this,e,arguments)}return mr(e,[{key:"kill",value:function(){PX(e,"kill",this)([])}},{key:"process",value:function(i,r,s){var o=r*this.STRIDE;if(s.hidden){for(var a=o+this.STRIDE;o<a;o++)this.array[o]=0;return}return this.processVisibleItem(AX(i),o,s)}}]),e}(OX),_H=function(n){bo(e,n);function e(){var t;pr(this,e);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=vo(this,e,[].concat(r)),de(me(t),"drawLabel",void 0),t}return mr(e,[{key:"kill",value:function(){PX(e,"kill",this)([])}},{key:"process",value:function(i,r,s,o,a){var l=r*this.STRIDE;if(a.hidden||s.hidden||o.hidden){for(var c=l+this.STRIDE;l<c;l++)this.array[l]=0;return}return this.processVisibleItem(AX(i),l,s,o,a)}}]),e}(OX);function R5e(n,e){return function(){function t(i,r,s){pr(this,t),de(this,"drawLabel",e),this.programs=n.map(function(o){return new o(i,r,s)})}return mr(t,[{key:"reallocate",value:function(r){this.programs.forEach(function(s){return s.reallocate(r)})}},{key:"process",value:function(r,s,o,a,l){this.programs.forEach(function(c){return c.process(r,s,o,a,l)})}},{key:"render",value:function(r){this.programs.forEach(function(s){return s.render(r)})}},{key:"kill",value:function(){this.programs.forEach(function(r){return r.kill()})}}]),t}()}function E5e(n,e,t,i,r){var s=r.edgeLabelSize,o=r.edgeLabelFont,a=r.edgeLabelWeight,l=r.edgeLabelColor.attribute?e[r.edgeLabelColor.attribute]||r.edgeLabelColor.color||"#000":r.edgeLabelColor.color,c=e.label;if(c){n.fillStyle=l,n.font="".concat(a," ").concat(s,"px ").concat(o);var u=t.size,h=i.size,d=t.x,f=t.y,g=i.x,p=i.y,m=(d+g)/2,b=(f+p)/2,y=g-d,w=p-f,R=Math.sqrt(y*y+w*w);if(!(R<u+h)){d+=y*u/R,f+=w*u/R,g-=y*h/R,p-=w*h/R,m=(d+g)/2,b=(f+p)/2,y=g-d,w=p-f,R=Math.sqrt(y*y+w*w);var E=n.measureText(c).width;if(E>R){var _="";for(c=c+_,E=n.measureText(c).width;E>R&&c.length>1;)c=c.slice(0,-2)+_,E=n.measureText(c).width;if(c.length<4)return}var T;y>0?w>0?T=Math.acos(y/R):T=Math.asin(w/R):w>0?T=Math.acos(y/R)+Math.PI:T=Math.asin(y/R)+Math.PI/2,n.save(),n.translate(m,b),n.rotate(T),n.fillText(c,-E/2,e.size/2+s),n.restore()}}}function DX(n,e,t){if(e.label){var i=t.labelSize,r=t.labelFont,s=t.labelWeight,o=t.labelColor.attribute?e[t.labelColor.attribute]||t.labelColor.color||"#000":t.labelColor.color;n.fillStyle=o,n.font="".concat(s," ").concat(i,"px ").concat(r),n.fillText(e.label,e.x+e.size+3,e.y+i/3)}}function x5e(n,e,t){var i=t.labelSize,r=t.labelFont,s=t.labelWeight;n.font="".concat(s," ").concat(i,"px ").concat(r),n.fillStyle="#FFF",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=8,n.shadowColor="#000";var o=2;if(typeof e.label=="string"){var a=n.measureText(e.label).width,l=Math.round(a+5),c=Math.round(i+2*o),u=Math.max(e.size,i/2)+o,h=Math.asin(c/2/u),d=Math.sqrt(Math.abs(Math.pow(u,2)-Math.pow(c/2,2)));n.beginPath(),n.moveTo(e.x+d,e.y+c/2),n.lineTo(e.x+u+l,e.y+c/2),n.lineTo(e.x+u+l,e.y-c/2),n.lineTo(e.x+d,e.y-c/2),n.arc(e.x,e.y,u,h,-h),n.closePath(),n.fill()}else n.beginPath(),n.arc(e.x,e.y,e.size+o,0,Math.PI*2),n.closePath(),n.fill();n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,DX(n,e,t)}var T5e=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,M5e=T5e,A5e=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,P5e=A5e,NX=WebGLRenderingContext,Jj=NX.UNSIGNED_BYTE,hA=NX.FLOAT,I5e=["u_sizeRatio","u_correctionRatio","u_matrix"],EE=function(n){bo(e,n);function e(){return pr(this,e),vo(this,e,arguments)}return mr(e,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:P5e,FRAGMENT_SHADER_SOURCE:M5e,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:I5e,ATTRIBUTES:[{name:"a_position",size:2,type:hA},{name:"a_size",size:1,type:hA},{name:"a_color",size:4,type:Jj,normalized:!0},{name:"a_id",size:4,type:Jj,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:hA}],CONSTANT_DATA:[[e.ANGLE_1],[e.ANGLE_2],[e.ANGLE_3]]}}},{key:"processVisibleItem",value:function(i,r,s){var o=this.array,a=om(s.color);o[r++]=s.x,o[r++]=s.y,o[r++]=s.size,o[r++]=a,o[r++]=i}},{key:"setUniforms",value:function(i,r){var s=r.gl,o=r.uniformLocations,a=o.u_sizeRatio,l=o.u_correctionRatio,c=o.u_matrix;s.uniform1f(l,i.correctionRatio),s.uniform1f(a,i.sizeRatio),s.uniformMatrix3fv(c,!1,i.matrix)}}]),e}(kX);de(EE,"ANGLE_1",0);de(EE,"ANGLE_2",2*Math.PI/3);de(EE,"ANGLE_3",4*Math.PI/3);var O5e=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,k5e=O5e,D5e=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,N5e=D5e,LX=WebGLRenderingContext,e6=LX.UNSIGNED_BYTE,ZC=LX.FLOAT,L5e=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],HX={lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function $X(n){var e=We(We({},HX),{});return function(t){bo(i,t);function i(){return pr(this,i),vo(this,i,arguments)}return mr(i,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:N5e,FRAGMENT_SHADER_SOURCE:k5e,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:L5e,ATTRIBUTES:[{name:"a_position",size:2,type:ZC},{name:"a_normal",size:2,type:ZC},{name:"a_radius",size:1,type:ZC},{name:"a_color",size:4,type:e6,normalized:!0},{name:"a_id",size:4,type:e6,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:ZC}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(s,o,a,l,c){var u=c.size||1,h=l.size||1,d=a.x,f=a.y,g=l.x,p=l.y,m=om(c.color),b=g-d,y=p-f,w=b*b+y*y,R=0,E=0;w&&(w=1/Math.sqrt(w),R=-y*w*u,E=b*w*u);var _=this.array;_[o++]=g,_[o++]=p,_[o++]=-R,_[o++]=-E,_[o++]=h,_[o++]=m,_[o++]=s}},{key:"setUniforms",value:function(s,o){var a=o.gl,l=o.uniformLocations,c=l.u_matrix,u=l.u_sizeRatio,h=l.u_correctionRatio,d=l.u_minEdgeThickness,f=l.u_lengthToThicknessRatio,g=l.u_widenessToThicknessRatio;a.uniformMatrix3fv(c,!1,s.matrix),a.uniform1f(u,s.sizeRatio),a.uniform1f(h,s.correctionRatio),a.uniform1f(d,s.minEdgeThickness),a.uniform1f(f,e.lengthToThicknessRatio),a.uniform1f(g,e.widenessToThicknessRatio)}}]),i}(_H)}$X();var H5e=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,FX=H5e,$5e=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,F5e=$5e,BX=WebGLRenderingContext,t6=BX.UNSIGNED_BYTE,nd=BX.FLOAT,B5e=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],V5e={lengthToThicknessRatio:HX.lengthToThicknessRatio};function VX(n){var e=We(We({},V5e),{});return function(t){bo(i,t);function i(){return pr(this,i),vo(this,i,arguments)}return mr(i,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:F5e,FRAGMENT_SHADER_SOURCE:FX,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:B5e,ATTRIBUTES:[{name:"a_positionStart",size:2,type:nd},{name:"a_positionEnd",size:2,type:nd},{name:"a_normal",size:2,type:nd},{name:"a_color",size:4,type:t6,normalized:!0},{name:"a_id",size:4,type:t6,normalized:!0},{name:"a_radius",size:1,type:nd}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:nd},{name:"a_normalCoef",size:1,type:nd},{name:"a_radiusCoef",size:1,type:nd}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(s,o,a,l,c){var u=c.size||1,h=a.x,d=a.y,f=l.x,g=l.y,p=om(c.color),m=f-h,b=g-d,y=l.size||1,w=m*m+b*b,R=0,E=0;w&&(w=1/Math.sqrt(w),R=-b*w*u,E=m*w*u);var _=this.array;_[o++]=h,_[o++]=d,_[o++]=f,_[o++]=g,_[o++]=R,_[o++]=E,_[o++]=p,_[o++]=s,_[o++]=y}},{key:"setUniforms",value:function(s,o){var a=o.gl,l=o.uniformLocations,c=l.u_matrix,u=l.u_zoomRatio,h=l.u_feather,d=l.u_pixelRatio,f=l.u_correctionRatio,g=l.u_sizeRatio,p=l.u_minEdgeThickness,m=l.u_lengthToThicknessRatio;a.uniformMatrix3fv(c,!1,s.matrix),a.uniform1f(u,s.zoomRatio),a.uniform1f(g,s.sizeRatio),a.uniform1f(f,s.correctionRatio),a.uniform1f(d,s.pixelRatio),a.uniform1f(h,s.antiAliasingFeather),a.uniform1f(p,s.minEdgeThickness),a.uniform1f(m,e.lengthToThicknessRatio)}}]),i}(_H)}VX();function W5e(n){return R5e([VX(),$X()])}var j5e=W5e(),z5e=j5e,U5e=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,G5e=U5e,WX=WebGLRenderingContext,n6=WX.UNSIGNED_BYTE,xv=WX.FLOAT,Y5e=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],K5e=function(n){bo(e,n);function e(){return pr(this,e),vo(this,e,arguments)}return mr(e,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:G5e,FRAGMENT_SHADER_SOURCE:FX,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Y5e,ATTRIBUTES:[{name:"a_positionStart",size:2,type:xv},{name:"a_positionEnd",size:2,type:xv},{name:"a_normal",size:2,type:xv},{name:"a_color",size:4,type:n6,normalized:!0},{name:"a_id",size:4,type:n6,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:xv},{name:"a_normalCoef",size:1,type:xv}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(i,r,s,o,a){var l=a.size||1,c=s.x,u=s.y,h=o.x,d=o.y,f=om(a.color),g=h-c,p=d-u,m=g*g+p*p,b=0,y=0;m&&(m=1/Math.sqrt(m),b=-p*m*l,y=g*m*l);var w=this.array;w[r++]=c,w[r++]=u,w[r++]=h,w[r++]=d,w[r++]=b,w[r++]=y,w[r++]=f,w[r++]=i}},{key:"setUniforms",value:function(i,r){var s=r.gl,o=r.uniformLocations,a=o.u_matrix,l=o.u_zoomRatio,c=o.u_feather,u=o.u_pixelRatio,h=o.u_correctionRatio,d=o.u_sizeRatio,f=o.u_minEdgeThickness;s.uniformMatrix3fv(a,!1,i.matrix),s.uniform1f(l,i.zoomRatio),s.uniform1f(d,i.sizeRatio),s.uniform1f(h,i.correctionRatio),s.uniform1f(u,i.pixelRatio),s.uniform1f(c,i.antiAliasingFeather),s.uniform1f(f,i.minEdgeThickness)}}]),e}(_H),RH=function(n){bo(e,n);function e(){var t;return pr(this,e),t=vo(this,e),t.rawEmitter=me(t),t}return mr(e)}(mH.EventEmitter),jX=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"};const q5e=Up(jX);var X5e=function(e){return e},Z5e=function(e){return e*e},Q5e=function(e){return e*(2-e)},J5e=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},e8e=function(e){return e*e*e},t8e=function(e){return--e*e*e+1},n8e=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},i8e={linear:X5e,quadraticIn:Z5e,quadraticOut:Q5e,quadraticInOut:J5e,cubicIn:e8e,cubicOut:t8e,cubicInOut:n8e},r8e={easing:"quadraticInOut",duration:150};function Bo(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function QC(n,e,t){return n[0]=e,n[4]=typeof t=="number"?t:e,n}function i6(n,e){var t=Math.sin(e),i=Math.cos(e);return n[0]=i,n[1]=t,n[3]=-t,n[4]=i,n}function r6(n,e,t){return n[6]=e,n[7]=t,n}function su(n,e){var t=n[0],i=n[1],r=n[2],s=n[3],o=n[4],a=n[5],l=n[6],c=n[7],u=n[8],h=e[0],d=e[1],f=e[2],g=e[3],p=e[4],m=e[5],b=e[6],y=e[7],w=e[8];return n[0]=h*t+d*s+f*l,n[1]=h*i+d*o+f*c,n[2]=h*r+d*a+f*u,n[3]=g*t+p*s+m*l,n[4]=g*i+p*o+m*c,n[5]=g*r+p*a+m*u,n[6]=b*t+y*s+w*l,n[7]=b*i+y*o+w*c,n[8]=b*r+y*a+w*u,n}function ZI(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=n[0],r=n[1],s=n[3],o=n[4],a=n[6],l=n[7],c=e.x,u=e.y;return{x:c*i+u*s+a*t,y:c*r+u*o+l*t}}function s8e(n,e){var t=n.height/n.width,i=e.height/e.width;return t<1&&i>1||t>1&&i<1?1:Math.min(Math.max(i,1/i),Math.max(1/t,t))}function Tv(n,e,t,i,r){var s=n.angle,o=n.ratio,a=n.x,l=n.y,c=e.width,u=e.height,h=Bo(),d=Math.min(c,u)-2*i,f=s8e(e,t);return r?(su(h,r6(Bo(),a,l)),su(h,QC(Bo(),o)),su(h,i6(Bo(),s)),su(h,QC(Bo(),c/d/2/f,u/d/2/f))):(su(h,QC(Bo(),2*(d/c)*f,2*(d/u)*f)),su(h,i6(Bo(),-s)),su(h,QC(Bo(),1/o)),su(h,r6(Bo(),-a,-l))),h}function o8e(n,e,t){var i=ZI(n,{x:Math.cos(e.angle),y:Math.sin(e.angle)},0),r=i.x,s=i.y;return 1/Math.sqrt(Math.pow(r,2)+Math.pow(s,2))/t.width}function a8e(n){if(!n.order)return{x:[0,1],y:[0,1]};var e=1/0,t=-1/0,i=1/0,r=-1/0;return n.forEachNode(function(s,o){var a=o.x,l=o.y;a<e&&(e=a),a>t&&(t=a),l<i&&(i=l),l>r&&(r=l)}),{x:[e,t],y:[i,r]}}function l8e(n){if(!q5e(n))throw new Error("Sigma: invalid graph instance.");n.forEachNode(function(e,t){if(!Number.isFinite(t.x)||!Number.isFinite(t.y))throw new Error("Sigma: Coordinates of node ".concat(e," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function c8e(n,e,t){var i=document.createElement(n);if(e)for(var r in e)i.style[r]=e[r];if(t)for(var s in t)i.setAttribute(s,t[s]);return i}function s6(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function o6(n,e,t){return t.sort(function(i,r){var s=e(i)||0,o=e(r)||0;return s<o?-1:s>o?1:0})}function a6(n){var e=DR(n.x,2),t=e[0],i=e[1],r=DR(n.y,2),s=r[0],o=r[1],a=Math.max(i-t,o-s),l=(i+t)/2,c=(o+s)/2;(a===0||Math.abs(a)===1/0||isNaN(a))&&(a=1),isNaN(l)&&(l=0),isNaN(c)&&(c=0);var u=function(d){return{x:.5+(d.x-l)/a,y:.5+(d.y-c)/a}};return u.applyTo=function(h){h.x=.5+(h.x-l)/a,h.y=.5+(h.y-c)/a},u.inverse=function(h){return{x:l+a*(h.x-.5),y:c+a*(h.y-.5)}},u.ratio=a,u}function l6(n,e){var t=e.size;if(t!==0){var i=n.length;n.length+=t;var r=0;e.forEach(function(s){n[i+r]=s,r++})}}function dA(n){n=n||{};for(var e=0,t=arguments.length<=1?0:arguments.length-1;e<t;e++){var i=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];i&&Object.assign(n,i)}return n}var EH={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:E5e,defaultDrawNodeLabel:DX,defaultDrawNodeHover:x5e,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraRotation:!0,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},u8e={circle:EE},h8e={arrow:z5e,line:K5e};function c6(n){if(typeof n.labelDensity!="number"||n.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var e=n.minCameraRatio,t=n.maxCameraRatio;if(typeof e=="number"&&typeof t=="number"&&t<e)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function d8e(n){var e=dA({},EH,n);return e.nodeProgramClasses=dA({},u8e,e.nodeProgramClasses),e.edgeProgramClasses=dA({},h8e,e.edgeProgramClasses),e}var JC=1.5,u6=function(n){bo(e,n);function e(){var t;return pr(this,e),t=vo(this,e),de(me(t),"x",.5),de(me(t),"y",.5),de(me(t),"angle",0),de(me(t),"ratio",1),de(me(t),"minRatio",null),de(me(t),"maxRatio",null),de(me(t),"enabledRotation",!0),de(me(t),"nextFrame",null),de(me(t),"previousState",null),de(me(t),"enabled",!0),t.previousState=t.getState(),t}return mr(e,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(i){return this.x===i.x&&this.y===i.y&&this.ratio===i.ratio&&this.angle===i.angle}},{key:"getPreviousState",value:function(){var i=this.previousState;return i?{x:i.x,y:i.y,angle:i.angle,ratio:i.ratio}:null}},{key:"getBoundedRatio",value:function(i){var r=i;return typeof this.minRatio=="number"&&(r=Math.max(r,this.minRatio)),typeof this.maxRatio=="number"&&(r=Math.min(r,this.maxRatio)),r}},{key:"validateState",value:function(i){var r={};return typeof i.x=="number"&&(r.x=i.x),typeof i.y=="number"&&(r.y=i.y),this.enabledRotation&&typeof i.angle=="number"&&(r.angle=i.angle),typeof i.ratio=="number"&&(r.ratio=this.getBoundedRatio(i.ratio)),r}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(i){if(!this.enabled)return this;this.previousState=this.getState();var r=this.validateState(i);return typeof r.x=="number"&&(this.x=r.x),typeof r.y=="number"&&(this.y=r.y),this.enabledRotation&&typeof r.angle=="number"&&(this.angle=r.angle),typeof r.ratio=="number"&&(this.ratio=r.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(i){return this.setState(i(this.getState())),this}},{key:"animate",value:function(i){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(!o)return new Promise(function(f){return r.animate(i,s,f)});if(this.enabled){var a=We(We({},r8e),s),l=this.validateState(i),c=typeof a.easing=="function"?a.easing:i8e[a.easing],u=Date.now(),h=this.getState(),d=function f(){var g=(Date.now()-u)/a.duration;if(g>=1){r.nextFrame=null,r.setState(l),r.animationCallback&&(r.animationCallback.call(null),r.animationCallback=void 0);return}var p=c(g),m={};typeof l.x=="number"&&(m.x=h.x+(l.x-h.x)*p),typeof l.y=="number"&&(m.y=h.y+(l.y-h.y)*p),r.enabledRotation&&typeof l.angle=="number"&&(m.angle=h.angle+(l.angle-h.angle)*p),typeof l.ratio=="number"&&(m.ratio=h.ratio+(l.ratio-h.ratio)*p),r.setState(m),r.nextFrame=requestAnimationFrame(f)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(d)):d(),this.animationCallback=o}}},{key:"animatedZoom",value:function(i){return i?typeof i=="number"?this.animate({ratio:this.ratio/i}):this.animate({ratio:this.ratio/(i.factor||JC)},i):this.animate({ratio:this.ratio/JC})}},{key:"animatedUnzoom",value:function(i){return i?typeof i=="number"?this.animate({ratio:this.ratio*i}):this.animate({ratio:this.ratio*(i.factor||JC)},i):this.animate({ratio:this.ratio*JC})}},{key:"animatedReset",value:function(i){return this.animate({x:.5,y:.5,ratio:1,angle:0},i)}},{key:"copy",value:function(){return e.from(this.getState())}}],[{key:"from",value:function(i){var r=new e;return r.setState(i)}}]),e}(RH);function Go(n,e){var t=e.getBoundingClientRect();return{x:n.clientX-t.left,y:n.clientY-t.top}}function Yl(n,e){var t=We(We({},Go(n,e)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){t.sigmaDefaultPrevented=!0},original:n});return t}function Mv(n){var e="x"in n?n:We(We({},n.touches[0]||n.previousTouches[0]),{},{original:n.original,sigmaDefaultPrevented:n.sigmaDefaultPrevented,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0,e.sigmaDefaultPrevented=!0}});return e}function f8e(n,e){return We(We({},Yl(n,e)),{},{delta:zX(n)})}var g8e=2;function VS(n){for(var e=[],t=0,i=Math.min(n.length,g8e);t<i;t++)e.push(n[t]);return e}function Av(n,e,t){var i={touches:VS(n.touches).map(function(r){return Go(r,t)}),previousTouches:e.map(function(r){return Go(r,t)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){i.sigmaDefaultPrevented=!0},original:n};return i}function zX(n){if(typeof n.deltaY<"u")return n.deltaY*-3/360;if(typeof n.detail<"u")return n.detail/-9;throw new Error("Captor: could not extract delta from event.")}var UX=function(n){bo(e,n);function e(t,i){var r;return pr(this,e),r=vo(this,e),r.container=t,r.renderer=i,r}return mr(e)}(RH),p8e=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],m8e=p8e.reduce(function(n,e){return We(We({},n),{},de({},e,EH[e]))},{}),v8e=function(n){bo(e,n);function e(t,i){var r;return pr(this,e),r=vo(this,e,[t,i]),de(me(r),"enabled",!0),de(me(r),"draggedEvents",0),de(me(r),"downStartTime",null),de(me(r),"lastMouseX",null),de(me(r),"lastMouseY",null),de(me(r),"isMouseDown",!1),de(me(r),"isMoving",!1),de(me(r),"movingTimeout",null),de(me(r),"startCameraState",null),de(me(r),"clicks",0),de(me(r),"doubleClickTimeout",null),de(me(r),"currentWheelDirection",0),de(me(r),"settings",m8e),r.handleClick=r.handleClick.bind(me(r)),r.handleRightClick=r.handleRightClick.bind(me(r)),r.handleDown=r.handleDown.bind(me(r)),r.handleUp=r.handleUp.bind(me(r)),r.handleMove=r.handleMove.bind(me(r)),r.handleWheel=r.handleWheel.bind(me(r)),r.handleLeave=r.handleLeave.bind(me(r)),r.handleEnter=r.handleEnter.bind(me(r)),t.addEventListener("click",r.handleClick,{capture:!1}),t.addEventListener("contextmenu",r.handleRightClick,{capture:!1}),t.addEventListener("mousedown",r.handleDown,{capture:!1}),t.addEventListener("wheel",r.handleWheel,{capture:!1}),t.addEventListener("mouseleave",r.handleLeave,{capture:!1}),t.addEventListener("mouseenter",r.handleEnter,{capture:!1}),document.addEventListener("mousemove",r.handleMove,{capture:!1}),document.addEventListener("mouseup",r.handleUp,{capture:!1}),r}return mr(e,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("click",this.handleClick),i.removeEventListener("contextmenu",this.handleRightClick),i.removeEventListener("mousedown",this.handleDown),i.removeEventListener("wheel",this.handleWheel),i.removeEventListener("mouseleave",this.handleLeave),i.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(i){var r=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(i);setTimeout(function(){r.clicks=0,r.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",Yl(i,this.container))}}},{key:"handleRightClick",value:function(i){this.enabled&&this.emit("rightClick",Yl(i,this.container))}},{key:"handleDoubleClick",value:function(i){if(this.enabled){i.preventDefault(),i.stopPropagation();var r=Yl(i,this.container);if(this.emit("doubleClick",r),!r.sigmaDefaultPrevented){var s=this.renderer.getCamera(),o=s.getBoundedRatio(s.getState().ratio/this.settings.doubleClickZoomingRatio);s.animate(this.renderer.getViewportZoomedState(Go(i,this.container),o),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(i){if(this.enabled){if(i.button===0){this.startCameraState=this.renderer.getCamera().getState();var r=Go(i,this.container),s=r.x,o=r.y;this.lastMouseX=s,this.lastMouseY=o,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",Yl(i,this.container))}}},{key:"handleUp",value:function(i){var r=this;if(!(!this.enabled||!this.isMouseDown)){var s=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var o=Go(i,this.container),a=o.x,l=o.y,c=s.getState(),u=s.getPreviousState()||{x:0,y:0};this.isMoving?s.animate({x:c.x+this.settings.inertiaRatio*(c.x-u.x),y:c.y+this.settings.inertiaRatio*(c.y-u.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==l)&&s.setState({x:c.x,y:c.y}),this.isMoving=!1,setTimeout(function(){var h=r.draggedEvents>0;r.draggedEvents=0,h&&r.renderer.refresh()},0),this.emit("mouseup",Yl(i,this.container))}}},{key:"handleMove",value:function(i){var r=this;if(this.enabled){var s=Yl(i,this.container);if(this.emit("mousemovebody",s),(i.target===this.container||i.composedPath()[0]===this.container)&&this.emit("mousemove",s),!s.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.movingTimeout=null,r.isMoving=!1},this.settings.dragTimeout);var o=this.renderer.getCamera(),a=Go(i,this.container),l=a.x,c=a.y,u=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),h=this.renderer.viewportToFramedGraph({x:l,y:c}),d=u.x-h.x,f=u.y-h.y,g=o.getState(),p=g.x+d,m=g.y+f;o.setState({x:p,y:m}),this.lastMouseX=l,this.lastMouseY=c,i.preventDefault(),i.stopPropagation()}}}},{key:"handleLeave",value:function(i){this.emit("mouseleave",Yl(i,this.container))}},{key:"handleEnter",value:function(i){this.emit("mouseenter",Yl(i,this.container))}},{key:"handleWheel",value:function(i){var r=this;if(this.enabled){i.preventDefault(),i.stopPropagation();var s=zX(i);if(s){var o=f8e(i,this.container);if(this.emit("wheel",o),!o.sigmaDefaultPrevented){var a=s>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,l=this.renderer.getCamera(),c=l.getBoundedRatio(l.getState().ratio*a),u=s>0?1:-1,h=Date.now();this.currentWheelDirection===u&&this.lastWheelTriggerTime&&h-this.lastWheelTriggerTime<this.settings.zoomDuration/5||(l.animate(this.renderer.getViewportZoomedState(Go(i,this.container),c),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){r.currentWheelDirection=0}),this.currentWheelDirection=u,this.lastWheelTriggerTime=h)}}}}},{key:"setSettings",value:function(i){this.settings=i}}]),e}(UX),b8e=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],w8e=b8e.reduce(function(n,e){return We(We({},n),{},de({},e,EH[e]))},{}),y8e=function(n){bo(e,n);function e(t,i){var r;return pr(this,e),r=vo(this,e,[t,i]),de(me(r),"enabled",!0),de(me(r),"isMoving",!1),de(me(r),"hasMoved",!1),de(me(r),"touchMode",0),de(me(r),"startTouchesPositions",[]),de(me(r),"lastTouches",[]),de(me(r),"lastTap",null),de(me(r),"settings",w8e),r.handleStart=r.handleStart.bind(me(r)),r.handleLeave=r.handleLeave.bind(me(r)),r.handleMove=r.handleMove.bind(me(r)),t.addEventListener("touchstart",r.handleStart,{capture:!1}),t.addEventListener("touchcancel",r.handleLeave,{capture:!1}),document.addEventListener("touchend",r.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",r.handleMove,{capture:!1,passive:!1}),r}return mr(e,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("touchstart",this.handleStart),i.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(i){var r=this;if(this.enabled){i.preventDefault();var s=VS(i.touches);if(this.touchMode=s.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=s.map(function(f){return Go(f,r.container)}),this.touchMode===2){var o=DR(this.startTouchesPositions,2),a=o[0],l=a.x,c=a.y,u=o[1],h=u.x,d=u.y;this.startTouchesAngle=Math.atan2(d-c,h-l),this.startTouchesDistance=Math.sqrt(Math.pow(h-l,2)+Math.pow(d-c,2))}this.emit("touchdown",Av(i,this.lastTouches,this.container)),this.lastTouches=s,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(i){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(i.cancelable&&i.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(i.touches.length===1){this.handleStart(i),i.preventDefault();break}case 1:if(this.isMoving){var r=this.renderer.getCamera(),s=r.getState(),o=r.getPreviousState()||{x:0,y:0};r.animate({x:s.x+this.settings.inertiaRatio*(s.x-o.x),y:s.y+this.settings.inertiaRatio*(s.y-o.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",Av(i,this.lastTouches,this.container)),!i.touches.length){var a=Go(this.lastTouches[0],this.container),l=this.startTouchesPositions[0],c=Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2);if(!i.touches.length&&c<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var u=Av(i,this.lastTouches,this.container);if(this.emit("doubletap",u),this.lastTap=null,!u.sigmaDefaultPrevented){var h=this.renderer.getCamera(),d=h.getBoundedRatio(h.getState().ratio/this.settings.doubleClickZoomingRatio);h.animate(this.renderer.getViewportZoomedState(a,d),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var f=Av(i,this.lastTouches,this.container);this.emit("tap",f),this.lastTap={time:Date.now(),position:f.touches[0]||f.previousTouches[0]}}}this.lastTouches=VS(i.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(i){var r=this;if(!(!this.enabled||!this.startTouchesPositions.length)){i.preventDefault();var s=VS(i.touches),o=s.map(function(v){return Go(v,r.container)}),a=this.lastTouches;this.lastTouches=s,this.lastTouchesPositions=o;var l=Av(i,a,this.container);if(this.emit("touchmove",l),!l.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=o.some(function(v,C){var S=r.startTouchesPositions[C];return S&&(v.x!==S.x||v.y!==S.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.isMoving=!1},this.settings.dragTimeout);var c=this.renderer.getCamera(),u=this.startCameraState,h=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var d=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),f=d.x,g=d.y,p=this.renderer.viewportToFramedGraph(o[0]),m=p.x,b=p.y;c.setState({x:u.x+f-m,y:u.y+g-b});break}case 2:{var y={x:.5,y:.5,angle:0,ratio:1},w=o[0],R=w.x,E=w.y,_=o[1],T=_.x,I=_.y,x=Math.atan2(I-E,T-R)-this.startTouchesAngle,P=Math.hypot(I-E,T-R)/this.startTouchesDistance,D=c.getBoundedRatio(u.ratio/P);y.ratio=D,y.angle=u.angle+x;var B=this.getDimensions(),V=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:u}),z=Math.min(B.width,B.height)-2*h,L=z/B.width,k=z/B.height,F=D/z,G=R-z/2/L,U=E-z/2/k,se=[G*Math.cos(-y.angle)-U*Math.sin(-y.angle),U*Math.cos(-y.angle)+G*Math.sin(-y.angle)];G=se[0],U=se[1],y.x=V.x-G*F,y.y=V.y+U*F,c.setState(y);break}}}}}},{key:"setSettings",value:function(i){this.settings=i}}]),e}(UX);function C8e(n){if(Array.isArray(n))return qI(n)}function S8e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h6(n){return C8e(n)||S8e(n)||xX(n)||_8e()}function R8e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;t[i]=n[i]}return t}function fA(n,e){if(n==null)return{};var t,i,r=R8e(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)t=s[i],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}var d6=function(){function n(e,t){pr(this,n),this.key=e,this.size=t}return mr(n,null,[{key:"compare",value:function(t,i){return t.size>i.size?-1:t.size<i.size||t.key>i.key?1:-1}}]),n}(),f6=function(){function n(){pr(this,n),de(this,"width",0),de(this,"height",0),de(this,"cellSize",0),de(this,"columns",0),de(this,"rows",0),de(this,"cells",{})}return mr(n,[{key:"resizeAndClear",value:function(t,i){this.width=t.width,this.height=t.height,this.cellSize=i,this.columns=Math.ceil(t.width/i),this.rows=Math.ceil(t.height/i),this.cells={}}},{key:"getIndex",value:function(t){var i=Math.floor(t.x/this.cellSize),r=Math.floor(t.y/this.cellSize);return r*this.columns+i}},{key:"add",value:function(t,i,r){var s=new d6(t,i),o=this.getIndex(r),a=this.cells[o];a||(a=[],this.cells[o]=a),a.push(s)}},{key:"organize",value:function(){for(var t in this.cells){var i=this.cells[t];i.sort(d6.compare)}}},{key:"getLabelsToDisplay",value:function(t,i){var r=this.cellSize*this.cellSize,s=r/t/t,o=s*i/r,a=Math.ceil(o),l=[];for(var c in this.cells)for(var u=this.cells[c],h=0;h<Math.min(a,u.length);h++)l.push(u[h].key);return l}}]),n}();function E8e(n){var e=n.graph,t=n.hoveredNode,i=n.highlightedNodes,r=n.displayedNodeLabels,s=[];return e.forEachEdge(function(o,a,l,c){(l===t||c===t||i.has(l)||i.has(c)||r.has(l)&&r.has(c))&&s.push(o)}),s}var g6=150,p6=50,sc=Object.prototype.hasOwnProperty;function x8e(n,e,t){if(!sc.call(t,"x")||!sc.call(t,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(e,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return t.color||(t.color=n.defaultNodeColor),!t.label&&t.label!==""&&(t.label=null),t.label!==void 0&&t.label!==null?t.label=""+t.label:t.label=null,t.size||(t.size=2),sc.call(t,"hidden")||(t.hidden=!1),sc.call(t,"highlighted")||(t.highlighted=!1),sc.call(t,"forceLabel")||(t.forceLabel=!1),(!t.type||t.type==="")&&(t.type=n.defaultNodeType),t.zIndex||(t.zIndex=0),t}function T8e(n,e,t){return t.color||(t.color=n.defaultEdgeColor),t.label||(t.label=""),t.size||(t.size=.5),sc.call(t,"hidden")||(t.hidden=!1),sc.call(t,"forceLabel")||(t.forceLabel=!1),(!t.type||t.type==="")&&(t.type=n.defaultEdgeType),t.zIndex||(t.zIndex=0),t}var m6=function(n){bo(e,n);function e(t,i){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(pr(this,e),r=vo(this,e),de(me(r),"elements",{}),de(me(r),"canvasContexts",{}),de(me(r),"webGLContexts",{}),de(me(r),"pickingLayers",new Set),de(me(r),"textures",{}),de(me(r),"frameBuffers",{}),de(me(r),"activeListeners",{}),de(me(r),"labelGrid",new f6),de(me(r),"nodeDataCache",{}),de(me(r),"edgeDataCache",{}),de(me(r),"nodeProgramIndex",{}),de(me(r),"edgeProgramIndex",{}),de(me(r),"nodesWithForcedLabels",new Set),de(me(r),"edgesWithForcedLabels",new Set),de(me(r),"nodeExtent",{x:[0,1],y:[0,1]}),de(me(r),"nodeZExtent",[1/0,-1/0]),de(me(r),"edgeZExtent",[1/0,-1/0]),de(me(r),"matrix",Bo()),de(me(r),"invMatrix",Bo()),de(me(r),"correctionRatio",1),de(me(r),"customBBox",null),de(me(r),"normalizationFunction",a6({x:[0,1],y:[0,1]})),de(me(r),"graphToViewportRatio",1),de(me(r),"itemIDsIndex",{}),de(me(r),"nodeIndices",{}),de(me(r),"edgeIndices",{}),de(me(r),"width",0),de(me(r),"height",0),de(me(r),"pixelRatio",s6()),de(me(r),"pickingDownSizingRatio",2*r.pixelRatio),de(me(r),"displayedNodeLabels",new Set),de(me(r),"displayedEdgeLabels",new Set),de(me(r),"highlightedNodes",new Set),de(me(r),"hoveredNode",null),de(me(r),"hoveredEdge",null),de(me(r),"renderFrame",null),de(me(r),"renderHighlightedNodesFrame",null),de(me(r),"needToProcess",!1),de(me(r),"checkEdgesEventsFrame",null),de(me(r),"nodePrograms",{}),de(me(r),"nodeHoverPrograms",{}),de(me(r),"edgePrograms",{}),r.settings=d8e(s),c6(r.settings),l8e(t),!(i instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");r.graph=t,r.container=i,r.createWebGLContext("edges",{picking:s.enableEdgeEvents}),r.createCanvasContext("edgeLabels"),r.createWebGLContext("nodes",{picking:!0}),r.createCanvasContext("labels"),r.createCanvasContext("hovers"),r.createWebGLContext("hoverNodes"),r.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),r.resize();for(var o in r.settings.nodeProgramClasses)r.registerNodeProgram(o,r.settings.nodeProgramClasses[o],r.settings.nodeHoverProgramClasses[o]);for(var a in r.settings.edgeProgramClasses)r.registerEdgeProgram(a,r.settings.edgeProgramClasses[a]);return r.camera=new u6,r.bindCameraHandlers(),r.mouseCaptor=new v8e(r.elements.mouse,me(r)),r.mouseCaptor.setSettings(r.settings),r.touchCaptor=new y8e(r.elements.mouse,me(r)),r.touchCaptor.setSettings(r.settings),r.bindEventHandlers(),r.bindGraphHandlers(),r.handleSettingsUpdate(),r.refresh(),r}return mr(e,[{key:"registerNodeProgram",value:function(i,r,s){return this.nodePrograms[i]&&this.nodePrograms[i].kill(),this.nodeHoverPrograms[i]&&this.nodeHoverPrograms[i].kill(),this.nodePrograms[i]=new r(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[i]=new(s||r)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(i,r){return this.edgePrograms[i]&&this.edgePrograms[i].kill(),this.edgePrograms[i]=new r(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(i){if(this.nodePrograms[i]){var r=this.nodePrograms,s=r[i],o=fA(r,[i].map(Ub));s.kill(),this.nodePrograms=o}if(this.nodeHoverPrograms[i]){var a=this.nodeHoverPrograms,l=a[i],c=fA(a,[i].map(Ub));l.kill(),this.nodePrograms=c}return this}},{key:"unregisterEdgeProgram",value:function(i){if(this.edgePrograms[i]){var r=this.edgePrograms,s=r[i],o=fA(r,[i].map(Ub));s.kill(),this.edgePrograms=o}return this}},{key:"resetWebGLTexture",value:function(i){var r=this.webGLContexts[i],s=this.frameBuffers[i],o=this.textures[i];o&&r.deleteTexture(o);var a=r.createTexture();return r.bindFramebuffer(r.FRAMEBUFFER,s),r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0),this.textures[i]=a,this}},{key:"bindCameraHandlers",value:function(){var i=this;return this.activeListeners.camera=function(){i.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(i){var r=i.x,s=i.y,o=qj(this.webGLContexts.nodes,this.frameBuffers.nodes,r,s,this.pixelRatio,this.pickingDownSizingRatio),a=Kj.apply(void 0,h6(o)),l=this.itemIDsIndex[a];return l&&l.type==="node"?l.id:null}},{key:"bindEventHandlers",value:function(){var i=this;this.activeListeners.handleResize=function(){i.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(s){var o=Mv(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}},l=i.getNodeAtPosition(o);if(l&&i.hoveredNode!==l&&!i.nodeDataCache[l].hidden){i.hoveredNode&&i.emit("leaveNode",We(We({},a),{},{node:i.hoveredNode})),i.hoveredNode=l,i.emit("enterNode",We(We({},a),{},{node:l})),i.scheduleHighlightedNodesRender();return}if(i.hoveredNode&&i.getNodeAtPosition(o)!==i.hoveredNode){var c=i.hoveredNode;i.hoveredNode=null,i.emit("leaveNode",We(We({},a),{},{node:c})),i.scheduleHighlightedNodesRender();return}if(i.settings.enableEdgeEvents){var u=i.hoveredNode?null:i.getEdgeAtPoint(a.event.x,a.event.y);u!==i.hoveredEdge&&(i.hoveredEdge&&i.emit("leaveEdge",We(We({},a),{},{edge:i.hoveredEdge})),u&&i.emit("enterEdge",We(We({},a),{},{edge:u})),i.hoveredEdge=u)}},this.activeListeners.handleMoveBody=function(s){var o=Mv(s);i.emit("moveBody",{event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(s){var o=Mv(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};i.hoveredNode&&(i.emit("leaveNode",We(We({},a),{},{node:i.hoveredNode})),i.scheduleHighlightedNodesRender()),i.settings.enableEdgeEvents&&i.hoveredEdge&&(i.emit("leaveEdge",We(We({},a),{},{edge:i.hoveredEdge})),i.scheduleHighlightedNodesRender()),i.emit("leaveStage",We({},a))},this.activeListeners.handleEnter=function(s){var o=Mv(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};i.emit("enterStage",We({},a))};var r=function(o){return function(a){var l=Mv(a),c={event:l,preventSigmaDefault:function(){l.preventSigmaDefault()}},u=i.getNodeAtPosition(l);if(u)return i.emit("".concat(o,"Node"),We(We({},c),{},{node:u}));if(i.settings.enableEdgeEvents){var h=i.getEdgeAtPoint(l.x,l.y);if(h)return i.emit("".concat(o,"Edge"),We(We({},c),{},{edge:h}))}return i.emit("".concat(o,"Stage"),c)}};return this.activeListeners.handleClick=r("click"),this.activeListeners.handleRightClick=r("rightClick"),this.activeListeners.handleDoubleClick=r("doubleClick"),this.activeListeners.handleWheel=r("wheel"),this.activeListeners.handleDown=r("down"),this.activeListeners.handleUp=r("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var i=this,r=this.graph,s=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(o){var a,l=(a=o.hints)===null||a===void 0?void 0:a.attributes;i.graph.forEachNode(function(u){return i.updateNode(u)});var c=!l||l.some(function(u){return s.has(u)});i.refresh({partialGraph:{nodes:r.nodes()},skipIndexation:!c,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(o){var a,l=(a=o.hints)===null||a===void 0?void 0:a.attributes;i.graph.forEachEdge(function(u){return i.updateEdge(u)});var c=l&&["zIndex","type"].some(function(u){return l==null?void 0:l.includes(u)});i.refresh({partialGraph:{edges:r.edges()},skipIndexation:!c,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(o){var a=o.key;i.addNode(a),i.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(o){var a=o.key;i.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(o){var a=o.key;i.removeNode(a),i.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(o){var a=o.key;i.addEdge(a),i.refresh({partialGraph:{edges:[a]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(o){var a=o.key;i.refresh({partialGraph:{edges:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(o){var a=o.key;i.removeEdge(a),i.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){i.clearEdgeState(),i.clearEdgeIndices(),i.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){i.clearEdgeState(),i.clearNodeState(),i.clearEdgeIndices(),i.clearNodeIndices(),i.refresh({schedule:!0})},r.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),r.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),r.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),r.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),r.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),r.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),r.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var i=this.graph;i.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),i.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),i.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),i.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),i.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),i.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),i.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),i.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),i.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),i.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(i,r){var s=qj(this.webGLContexts.edges,this.frameBuffers.edges,i,r,this.pixelRatio,this.pickingDownSizingRatio),o=Kj.apply(void 0,h6(s)),a=this.itemIDsIndex[o];return a&&a.type==="edge"?a.id:null}},{key:"process",value:function(){var i=this;this.emit("beforeProcess");var r=this.graph,s=this.settings,o=this.getDimensions();if(this.nodeExtent=a8e(this.graph),!this.settings.autoRescale){var a=o.width,l=o.height,c=this.nodeExtent,u=c.x,h=c.y;this.nodeExtent={x:[(u[0]+u[1])/2-a/2,(u[0]+u[1])/2+a/2],y:[(h[0]+h[1])/2-l/2,(h[0]+h[1])/2+l/2]}}this.normalizationFunction=a6(this.customBBox||this.nodeExtent);var d=new u6,f=Tv(d.getState(),o,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(o,s.labelGridCellSize);for(var g={},p={},m={},b={},y=1,w=r.nodes(),R=0,E=w.length;R<E;R++){var _=w[R],T=this.nodeDataCache[_],I=r.getNodeAttributes(_);T.x=I.x,T.y=I.y,this.normalizationFunction.applyTo(T),typeof T.label=="string"&&!T.hidden&&this.labelGrid.add(_,T.size,this.framedGraphToViewport(T,{matrix:f})),g[T.type]=(g[T.type]||0)+1}this.labelGrid.organize();for(var x in this.nodePrograms){if(!sc.call(this.nodePrograms,x))throw new Error('Sigma: could not find a suitable program for node type "'.concat(x,'"!'));this.nodePrograms[x].reallocate(g[x]||0),g[x]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(w=o6(this.nodeZExtent,function(H){return i.nodeDataCache[H].zIndex},w));for(var P=0,D=w.length;P<D;P++){var B=w[P];p[B]=y,b[p[B]]={type:"node",id:B},y++;var V=this.nodeDataCache[B];this.addNodeToProgram(B,p[B],g[V.type]++)}for(var z={},L=r.edges(),k=0,F=L.length;k<F;k++){var G=L[k],U=this.edgeDataCache[G];z[U.type]=(z[U.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(L=o6(this.edgeZExtent,function(H){return i.edgeDataCache[H].zIndex},L));for(var se in this.edgePrograms){if(!sc.call(this.edgePrograms,se))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(se,'"!'));this.edgePrograms[se].reallocate(z[se]||0),z[se]=0}for(var v=0,C=L.length;v<C;v++){var S=L[v];m[S]=y,b[m[S]]={type:"edge",id:S},y++;var A=this.edgeDataCache[S];this.addEdgeToProgram(S,m[S],z[A.type]++)}return this.itemIDsIndex=b,this.nodeIndices=p,this.edgeIndices=m,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(i){var r=this.settings;if(this.camera.minRatio=r.minCameraRatio,this.camera.maxRatio=r.maxCameraRatio,this.camera.enabledRotation=r.enableCameraRotation,this.camera.setState(this.camera.validateState(this.camera.getState())),i){if(i.edgeProgramClasses!==r.edgeProgramClasses){for(var s in r.edgeProgramClasses)r.edgeProgramClasses[s]!==i.edgeProgramClasses[s]&&this.registerEdgeProgram(s,r.edgeProgramClasses[s]);for(var o in i.edgeProgramClasses)r.edgeProgramClasses[o]||this.unregisterEdgeProgram(o)}if(i.nodeProgramClasses!==r.nodeProgramClasses||i.nodeHoverProgramClasses!==r.nodeHoverProgramClasses){for(var a in r.nodeProgramClasses)(r.nodeProgramClasses[a]!==i.nodeProgramClasses[a]||r.nodeHoverProgramClasses[a]!==i.nodeHoverProgramClasses[a])&&this.registerNodeProgram(a,r.nodeProgramClasses[a],r.nodeHoverProgramClasses[a]);for(var l in i.nodeProgramClasses)r.nodeProgramClasses[l]||this.unregisterNodeProgram(l)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var i=this.camera.getState(),r=this.labelGrid.getLabelsToDisplay(i.ratio,this.settings.labelDensity);l6(r,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var s=this.canvasContexts.labels,o=0,a=r.length;o<a;o++){var l=r[o],c=this.nodeDataCache[l];if(!this.displayedNodeLabels.has(l)&&!c.hidden){var u=this.framedGraphToViewport(c),h=u.x,d=u.y,f=this.scaleSize(c.size);if(!(!c.forceLabel&&f<this.settings.labelRenderedSizeThreshold)&&!(h<-g6||h>this.width+g6||d<-p6||d>this.height+p6)){this.displayedNodeLabels.add(l);var g=this.settings.defaultDrawNodeLabel,p=this.nodePrograms[c.type],m=(p==null?void 0:p.drawLabel)||g;m(s,We(We({key:l},c),{},{size:f,x:h,y:d}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var i=this.canvasContexts.edgeLabels;i.clearRect(0,0,this.width,this.height);var r=E8e({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});l6(r,this.edgesWithForcedLabels);for(var s=new Set,o=0,a=r.length;o<a;o++){var l=r[o],c=this.graph.extremities(l),u=this.nodeDataCache[c[0]],h=this.nodeDataCache[c[1]],d=this.edgeDataCache[l];if(!s.has(l)&&!(d.hidden||u.hidden||h.hidden)){var f=this.settings.defaultDrawEdgeLabel,g=this.edgePrograms[d.type],p=(g==null?void 0:g.drawLabel)||f;p(i,We(We({key:l},d),{},{size:this.scaleSize(d.size)}),We(We(We({key:c[0]},u),this.framedGraphToViewport(u)),{},{size:this.scaleSize(u.size)}),We(We(We({key:c[1]},h),this.framedGraphToViewport(h)),{},{size:this.scaleSize(h.size)}),this.settings),s.add(l)}}return this.displayedEdgeLabels=s,this}},{key:"renderHighlightedNodes",value:function(){var i=this,r=this.canvasContexts.hovers;r.clearRect(0,0,this.width,this.height);var s=function(f){var g=i.nodeDataCache[f],p=i.framedGraphToViewport(g),m=p.x,b=p.y,y=i.scaleSize(g.size),w=i.settings.defaultDrawNodeHover,R=i.nodePrograms[g.type],E=(R==null?void 0:R.drawHover)||w;E(r,We(We({key:f},g),{},{size:y,x:m,y:b}),i.settings)},o=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&o.push(this.hoveredNode),this.highlightedNodes.forEach(function(d){d!==i.hoveredNode&&o.push(d)}),o.forEach(function(d){return s(d)});var a={};o.forEach(function(d){var f=i.nodeDataCache[d].type;a[f]=(a[f]||0)+1});for(var l in this.nodeHoverPrograms)this.nodeHoverPrograms[l].reallocate(a[l]||0),a[l]=0;o.forEach(function(d){var f=i.nodeDataCache[d];i.nodeHoverPrograms[f.type].process(0,a[f.type]++,f)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var c=this.getRenderParams();for(var u in this.nodeHoverPrograms){var h=this.nodeHoverPrograms[u];h.render(c)}}},{key:"scheduleHighlightedNodesRender",value:function(){var i=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){i.renderHighlightedNodesFrame=null,i.renderHighlightedNodes(),i.renderEdgeLabels()}))}},{key:"render",value:function(){var i=this;this.emit("beforeRender");var r=function(){return i.emit("afterRender"),i};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(m){return i.resetWebGLTexture(m)}),!this.graph.order)return r();var s=this.mouseCaptor,o=this.camera.isAnimated()||s.isMoving||s.draggedEvents||s.currentWheelDirection,a=this.camera.getState(),l=this.getDimensions(),c=this.getGraphDimensions(),u=this.getStagePadding();this.matrix=Tv(a,l,c,u),this.invMatrix=Tv(a,l,c,u,!0),this.correctionRatio=o8e(this.matrix,a,l),this.graphToViewportRatio=this.getGraphToViewportRatio();var h=this.getRenderParams();for(var d in this.nodePrograms){var f=this.nodePrograms[d];f.render(h)}if(!this.settings.hideEdgesOnMove||!o)for(var g in this.edgePrograms){var p=this.edgePrograms[g];p.render(h)}return this.settings.hideLabelsOnMove&&o||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),r()}},{key:"addNode",value:function(i){var r=Object.assign({},this.graph.getNodeAttributes(i));this.settings.nodeReducer&&(r=this.settings.nodeReducer(i,r));var s=x8e(this.settings,i,r);this.nodeDataCache[i]=s,this.nodesWithForcedLabels.delete(i),s.forceLabel&&!s.hidden&&this.nodesWithForcedLabels.add(i),this.highlightedNodes.delete(i),s.highlighted&&!s.hidden&&this.highlightedNodes.add(i),this.settings.zIndex&&(s.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=s.zIndex),s.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=s.zIndex))}},{key:"updateNode",value:function(i){this.addNode(i);var r=this.nodeDataCache[i];this.normalizationFunction.applyTo(r)}},{key:"removeNode",value:function(i){delete this.nodeDataCache[i],delete this.nodeProgramIndex[i],this.highlightedNodes.delete(i),this.hoveredNode===i&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(i)}},{key:"addEdge",value:function(i){var r=Object.assign({},this.graph.getEdgeAttributes(i));this.settings.edgeReducer&&(r=this.settings.edgeReducer(i,r));var s=T8e(this.settings,i,r);this.edgeDataCache[i]=s,this.edgesWithForcedLabels.delete(i),s.forceLabel&&!s.hidden&&this.edgesWithForcedLabels.add(i),this.settings.zIndex&&(s.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=s.zIndex),s.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=s.zIndex))}},{key:"updateEdge",value:function(i){this.addEdge(i)}},{key:"removeEdge",value:function(i){delete this.edgeDataCache[i],delete this.edgeProgramIndex[i],this.hoveredEdge===i&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(i)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new f6,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0]}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(i,r,s){var o=this.nodeDataCache[i],a=this.nodePrograms[o.type];if(!a)throw new Error('Sigma: could not find a suitable program for node type "'.concat(o.type,'"!'));a.process(r,s,o),this.nodeProgramIndex[i]=s}},{key:"addEdgeToProgram",value:function(i,r,s){var o=this.edgeDataCache[i],a=this.edgePrograms[o.type];if(!a)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(o.type,'"!'));var l=this.graph.extremities(i),c=this.nodeDataCache[l[0]],u=this.nodeDataCache[l[1]];a.process(r,s,c,u,o),this.edgeProgramIndex[i]=s}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var i=this.settings,r=i.stagePadding,s=i.autoRescale;return s&&r||0}},{key:"createLayer",value:function(i,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.elements[i])throw new Error('Sigma: a layer named "'.concat(i,'" already exists'));var o=c8e(r,{position:"absolute"},{class:"sigma-".concat(i)});return s.style&&Object.assign(o.style,s.style),this.elements[i]=o,"beforeLayer"in s&&s.beforeLayer?this.elements[s.beforeLayer].before(o):"afterLayer"in s&&s.afterLayer?this.elements[s.afterLayer].after(o):this.container.appendChild(o),o}},{key:"createCanvas",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.createLayer(i,"canvas",r)}},{key:"createCanvasContext",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.createCanvas(i,r),o={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[i]=s.getContext("2d",o),this}},{key:"createWebGLContext",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=(r==null?void 0:r.canvas)||this.createCanvas(i,r);r.hidden&&s.remove();var o=We({preserveDrawingBuffer:!1,antialias:!1},r),a;a=s.getContext("webgl2",o),a||(a=s.getContext("webgl",o)),a||(a=s.getContext("experimental-webgl",o));var l=a;if(this.webGLContexts[i]=l,l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),r.picking){this.pickingLayers.add(i);var c=l.createFramebuffer();if(!c)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(i));this.frameBuffers[i]=c}return l}},{key:"killLayer",value:function(i){var r=this.elements[i];if(!r)throw new Error("Sigma: cannot kill layer ".concat(i,", which does not exist"));if(this.webGLContexts[i]){var s,o=this.webGLContexts[i];(s=o.getExtension("WEBGL_lose_context"))===null||s===void 0||s.loseContext(),delete this.webGLContexts[i]}else this.canvasContexts[i]&&delete this.canvasContexts[i];return r.remove(),delete this.elements[i],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(i){this.unbindCameraHandlers(),this.camera=i,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(i){i!==this.graph&&(this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=i,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var i=this.customBBox||this.nodeExtent;return{width:i.x[1]-i.x[0]||1,height:i.y[1]-i.y[0]||1}}},{key:"getNodeDisplayData",value:function(i){var r=this.nodeDataCache[i];return r?Object.assign({},r):void 0}},{key:"getEdgeDisplayData",value:function(i){var r=this.edgeDataCache[i];return r?Object.assign({},r):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return We({},this.settings)}},{key:"getSetting",value:function(i){return this.settings[i]}},{key:"setSetting",value:function(i,r){var s=We({},this.settings);return this.settings[i]=r,c6(this.settings),this.handleSettingsUpdate(s),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(i,r){return this.setSetting(i,r(this.settings[i])),this}},{key:"resize",value:function(i){var r=this.width,s=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=s6(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!i&&r===this.width&&s===this.height)return this;for(var o in this.elements){var a=this.elements[o];a.style.width=this.width+"px",a.style.height=this.height+"px"}for(var l in this.canvasContexts)this.elements[l].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[l].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[l].scale(this.pixelRatio,this.pixelRatio);for(var c in this.webGLContexts){this.elements[c].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[c].setAttribute("height",this.height*this.pixelRatio+"px");var u=this.webGLContexts[c];if(u.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(c)){var h=this.textures[c];h&&u.deleteTexture(h)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(i){var r=this,s=(i==null?void 0:i.skipIndexation)!==void 0?i==null?void 0:i.skipIndexation:!1,o=(i==null?void 0:i.schedule)!==void 0?i.schedule:!1,a=!i||!i.partialGraph;if(a)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(R){return r.addNode(R)}),this.graph.forEachEdge(function(R){return r.addEdge(R)});else{for(var l,c,u=((l=i.partialGraph)===null||l===void 0?void 0:l.nodes)||[],h=0,d=(u==null?void 0:u.length)||0;h<d;h++){var f=u[h];if(this.updateNode(f),s){var g=this.nodeProgramIndex[f];if(g===void 0)throw new Error('Sigma: node "'.concat(f,`" can't be repaint`));this.addNodeToProgram(f,this.nodeIndices[f],g)}}for(var p=(i==null||(c=i.partialGraph)===null||c===void 0?void 0:c.edges)||[],m=0,b=p.length;m<b;m++){var y=p[m];if(this.updateEdge(y),s){var w=this.edgeProgramIndex[y];if(w===void 0)throw new Error('Sigma: edge "'.concat(y,`" can't be repaint`));this.addEdgeToProgram(y,this.edgeIndices[y],w)}}}return(a||!s)&&(this.needToProcess=!0),o?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var i=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){i.render()})),this}},{key:"scheduleRefresh",value:function(i){return this.refresh(We(We({},i),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(i,r){var s=this.camera.getState(),o=s.ratio,a=s.angle,l=s.x,c=s.y,u=this.settings,h=u.minCameraRatio,d=u.maxCameraRatio;typeof d=="number"&&(r=Math.min(r,d)),typeof h=="number"&&(r=Math.max(r,h));var f=r/o,g={x:this.width/2,y:this.height/2},p=this.viewportToFramedGraph(i),m=this.viewportToFramedGraph(g);return{angle:a,x:(p.x-m.x)*(1-f)+l,y:(p.y-m.y)*(1-f)+c,ratio:r}}},{key:"viewRectangle",value:function(){var i=this.viewportToFramedGraph({x:0,y:0}),r=this.viewportToFramedGraph({x:this.width,y:0}),s=this.viewportToFramedGraph({x:0,y:this.height});return{x1:i.x,y1:i.y,x2:r.x,y2:r.y,height:r.y-s.y}}},{key:"framedGraphToViewport",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=!!r.cameraState||!!r.viewportDimensions||!!r.graphDimensions,o=r.matrix?r.matrix:s?Tv(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getStagePadding()):this.matrix,a=ZI(o,i);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=!!r.cameraState||!!r.viewportDimensions||!r.graphDimensions,o=r.matrix?r.matrix:s?Tv(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getStagePadding(),!0):this.invMatrix,a=ZI(o,{x:i.x/this.width*2-1,y:1-i.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a}},{key:"viewportToGraph",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(i,r))}},{key:"graphToViewport",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(i),r)}},{key:"getGraphToViewportRatio",value:function(){var i={x:0,y:0},r={x:1,y:1},s=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2)),o=this.graphToViewport(i),a=this.graphToViewport(r),l=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2));return l/s}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(i){return this.customBBox=i,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var i=this.container;i.firstChild;)i.removeChild(i.firstChild);this.canvasContexts={},this.webGLContexts={},this.elements={};for(var r in this.nodePrograms)this.nodePrograms[r].kill();for(var s in this.nodeHoverPrograms)this.nodeHoverPrograms[s].kill();for(var o in this.edgePrograms)this.edgePrograms[o].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var a in this.elements)this.killLayer(a)}},{key:"scaleSize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return i/this.settings.zoomToSizeRatioFunction(r)*(this.getSetting("itemSizesReference")==="positions"?r*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var i={};for(var r in this.elements)this.elements[r]instanceof HTMLCanvasElement&&(i[r]=this.elements[r]);return i}}]),e}(RH);function M8e(n){return!n||typeof n!="object"||typeof n=="function"||Array.isArray(n)||n instanceof Set||n instanceof Map||n instanceof RegExp||n instanceof Date}function GX(n,e){n=n||{};var t={};for(var i in e){var r=n[i],s=e[i];if(!M8e(s)){t[i]=GX(r,s);continue}r===void 0?t[i]=s:t[i]=r}return t}var A8e=GX,xE={};function P8e(n){return typeof n!="number"||isNaN(n)?1:n}function I8e(n,e){var t={},i=function(o){return typeof o>"u"?e:o};typeof e=="function"&&(i=e);var r=function(o){return i(o[n])},s=function(){return i(void 0)};return typeof n=="string"?(t.fromAttributes=r,t.fromGraph=function(o,a){return r(o.getNodeAttributes(a))},t.fromEntry=function(o,a){return r(a)}):typeof n=="function"?(t.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},t.fromGraph=function(o,a){return i(n(a,o.getNodeAttributes(a)))},t.fromEntry=function(o,a){return i(n(o,a))}):(t.fromAttributes=s,t.fromGraph=s,t.fromEntry=s),t}function YX(n,e){var t={},i=function(o){return typeof o>"u"?e:o};typeof e=="function"&&(i=e);var r=function(o){return i(o[n])},s=function(){return i(void 0)};return typeof n=="string"?(t.fromAttributes=r,t.fromGraph=function(o,a){return r(o.getEdgeAttributes(a))},t.fromEntry=function(o,a){return r(a)},t.fromPartialEntry=t.fromEntry,t.fromMinimalEntry=t.fromEntry):typeof n=="function"?(t.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},t.fromGraph=function(o,a){var l=o.extremities(a);return i(n(a,o.getEdgeAttributes(a),l[0],l[1],o.getNodeAttributes(l[0]),o.getNodeAttributes(l[1]),o.isUndirected(a)))},t.fromEntry=function(o,a,l,c,u,h,d){return i(n(o,a,l,c,u,h,d))},t.fromPartialEntry=function(o,a,l,c){return i(n(o,a,l,c))},t.fromMinimalEntry=function(o,a){return i(n(o,a))}):(t.fromAttributes=s,t.fromGraph=s,t.fromEntry=s,t.fromMinimalEntry=s),t}xE.createNodeValueGetter=I8e;xE.createEdgeValueGetter=YX;xE.createEdgeWeightGetter=function(n){return YX(n,P8e)};const{createNodeValueGetter:v6,createEdgeValueGetter:O8e}=xE;var k8e=function(e,t,i){const{nodeXAttribute:r,nodeYAttribute:s}=i,{attraction:o,repulsion:a,gravity:l,inertia:c,maxMove:u}=i.settings;let{shouldSkipNode:h,shouldSkipEdge:d,isNodeFixed:f}=i;f=v6(f),h=v6(h,!1),d=O8e(d,!1);const g=e.filterNodes((b,y)=>!h.fromEntry(b,y)),p=g.length;for(let b=0;b<p;b++){const y=g[b],w=e.getNodeAttributes(y),R=t[y];R?t[y]={dx:R.dx*c,dy:R.dy*c,x:w[r]||0,y:w[s]||0}:t[y]={dx:0,dy:0,x:w[r]||0,y:w[s]||0}}if(a)for(let b=0;b<p;b++){const y=g[b],w=t[y];for(let R=b+1;R<p;R++){const E=g[R],_=t[E],T=_.x-w.x,I=_.y-w.y,x=Math.sqrt(T*T+I*I)||1,P=a/x*T,D=a/x*I;w.dx-=P,w.dy-=D,_.dx+=P,_.dy+=D}}if(o&&e.forEachEdge((b,y,w,R,E,_,T)=>{if(w===R||h.fromEntry(w,E)||h.fromEntry(R,_)||d.fromEntry(b,y,w,R,E,_,T))return;const I=t[w],x=t[R],P=x.x-I.x,D=x.y-I.y,B=Math.sqrt(P*P+D*D)||1,V=o*B*P,z=o*B*D;I.dx+=V,I.dy+=z,x.dx-=V,x.dy-=z}),l)for(let b=0;b<p;b++){const y=g[b],w=t[y],{x:R,y:E}=w,_=Math.sqrt(R*R+E*E)||1;t[y].dx-=R*l*_,t[y].dy-=E*l*_}const m=!1;for(let b=0;b<p;b++){const y=g[b],w=t[y],R=Math.sqrt(w.dx*w.dx+w.dy*w.dy);R>u&&(w.dx*=u/R,w.dy*=u/R),f.fromGraph(e,y)?w.fixed=!0:(w.x+=w.dx,w.y+=w.dy,w.fixed=!1)}return{converged:m}},xH={};xH.assignLayoutChanges=function(n,e,t){const{nodeXAttribute:i,nodeYAttribute:r}=t;n.updateEachNodeAttributes((s,o)=>{const a=e[s];return!a||a.fixed||(o[i]=a.x,o[r]=a.y),o},{attributes:["x","y"]})};xH.collectLayoutChanges=function(n){const e={};for(const t in n){const i=n[t];e[t]={x:i.x,y:i.y}}return e};var D8e={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}};const N8e=jX,L8e=A8e,H8e=k8e,$8e=xH,F8e=D8e;function am(n,e){if(!N8e(n))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");e=L8e(e,F8e),this.callbacks={},e.onConverged&&(this.callbacks.onConverged=e.onConverged),this.graph=n,this.params=e,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}am.prototype.isRunning=function(){return this.running};am.prototype.runFrame=function(){let{converged:n}=H8e(this.graph,this.nodeStates,this.params);$8e.assignLayoutChanges(this.graph,this.nodeStates,this.params),n=!1,n?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())};am.prototype.stop=function(){return this.running=!1,this.frameID!==null&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this};am.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())};am.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0};var B8e=am;const b6=Up(B8e);function QI(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function V8e(n){if(Array.isArray(n))return QI(n)}function W8e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function j8e(n,e){if(n){if(typeof n=="string")return QI(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?QI(n,e):void 0}}function z8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TH(n){return V8e(n)||W8e(n)||j8e(n)||z8e()}function MH(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function U8e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KX(n){var e=U8e(n,"string");return typeof e=="symbol"?e:e+""}function G8e(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,KX(i.key),i)}}function AH(n,e,t){return e&&G8e(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ip(n){return Ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ip(n)}function qX(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qX=function(){return!!n})()}function Wo(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Y8e(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wo(n)}function XX(n,e,t){return e=Ip(e),Y8e(n,qX()?Reflect.construct(e,t||[],Ip(n).constructor):e.apply(n,t))}function K8e(n,e){for(;!{}.hasOwnProperty.call(n,e)&&(n=Ip(n))!==null;);return n}function JI(){return JI=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,e,t){var i=K8e(n,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?n:t):r.value}},JI.apply(null,arguments)}function w6(n,e,t,i){var r=JI(Ip(n.prototype),e,t);return typeof r=="function"?function(s){return r.apply(t,s)}:r}function eO(n,e){return eO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},eO(n,e)}function ZX(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&eO(n,e)}function ir(n,e,t){return(e=KX(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function q8e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;t[i]=n[i]}return t}function X8e(n,e){if(n==null)return{};var t,i,r=q8e(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)t=s[i],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function y6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ws(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?y6(Object(t),!0).forEach(function(i){ir(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):y6(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Z8e(n){var e=n.texturesCount,t=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying vec4 v_texture;
varying float v_textureIndex;

uniform sampler2D u_atlas[`.concat(e,`];
uniform float u_correctionRatio;
uniform float u_cameraAngle;
uniform float u_percentagePadding;
uniform bool u_colorizeImages;
uniform bool u_keepWithinCircle;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

const float radius = 0.5;

void main(void) {
  float border = 2.0 * u_correctionRatio;
  float dist = length(v_diffVector);
  vec4 color = gl_FragColor;

  float c = cos(-u_cameraAngle);
  float s = sin(-u_cameraAngle);
  vec2 diffVector = mat2(c, s, -s, c) * (v_diffVector);

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  border = 0.0;
  color = v_color;

  #else
  // First case: No image to display
  if (v_texture.w <= 0.0) {
    if (!u_colorizeImages) {
      color = v_color;
    }
  }

  // Second case: Image loaded into the texture
  else {
    float paddingRatio = 1.0 + 2.0 * u_percentagePadding;
    float coef = u_keepWithinCircle ? 1.0 : `).concat(Math.SQRT2,`;
    vec2 coordinateInTexture = diffVector * vec2(paddingRatio, -paddingRatio) / v_radius / 2.0 * coef + vec2(0.5, 0.5);
    int index = int(v_textureIndex + 0.5); // +0.5 avoid rounding errors

    bool noTextureFound = false;
    vec4 texel;

    `).concat(TH(new Array(e)).map(function(i,r){return"if (index == ".concat(r,") texel = texture2D(u_atlas[").concat(r,"], (v_texture.xy + coordinateInTexture * v_texture.zw), -1.0);")}).join(`
    else `)+`else {
      texel = texture2D(u_atlas[0], (v_texture.xy + coordinateInTexture * v_texture.zw), -1.0);
      noTextureFound = true;
    }`,`

    if (noTextureFound) {
      color = v_color;
    } else {
      // Colorize all visible image pixels:
      if (u_colorizeImages) {
        color = mix(gl_FragColor, v_color, texel.a);
      }

      // Colorize background pixels, keep image pixel colors:
      else {
        color = vec4(mix(v_color, texel, texel.a).rgb, max(texel.a, v_color.a));
      }

      // Erase pixels "in the padding":
      if (abs(diffVector.x) > v_radius / paddingRatio || abs(diffVector.y) > v_radius / paddingRatio) {
        color = u_colorizeImages ? gl_FragColor : v_color;
      }
    }
  }
  #endif

  // Crop in a circle when u_keepWithinCircle is truthy:
  if (u_keepWithinCircle) {
    if (dist < v_radius - border) {
      gl_FragColor = color;
    } else if (dist < v_radius) {
      gl_FragColor = mix(transparent, color, (v_radius - dist) / border);
    }
  }

  // Crop in a square else:
  else {
    float squareHalfSize = v_radius * `).concat(Math.SQRT1_2*Math.cos(Math.PI/12),`;
    if (abs(diffVector.x) > squareHalfSize || abs(diffVector.y) > squareHalfSize) {
      gl_FragColor = transparent;
    } else {
      gl_FragColor = color;
    }
  }
}
`);return t}var Q8e=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;
attribute vec4 a_texture;
attribute float a_textureIndex;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying vec4 v_texture;
varying float v_textureIndex;

const float bias = 255.0 / 254.0;
const float marginRatio = 1.05;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector * marginRatio;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0 / marginRatio;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;

  // Pass the texture coordinates:
  v_textureIndex = a_textureIndex;
  v_texture = a_texture;
  #endif

  v_color.a *= bias;
}
`,J8e=Q8e;function hf(){hf=function(){return e};var n,e={},t=Object.prototype,i=t.hasOwnProperty,r=Object.defineProperty||function(k,F,G){k[F]=G.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(k,F,G){return Object.defineProperty(k,F,{value:G,enumerable:!0,configurable:!0,writable:!0}),k[F]}try{c({},"")}catch{c=function(F,G,U){return F[G]=U}}function u(k,F,G,U){var se=F&&F.prototype instanceof b?F:b,v=Object.create(se.prototype),C=new z(U||[]);return r(v,"_invoke",{value:P(k,G,C)}),v}function h(k,F,G){try{return{type:"normal",arg:k.call(F,G)}}catch(U){return{type:"throw",arg:U}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",g="executing",p="completed",m={};function b(){}function y(){}function w(){}var R={};c(R,o,function(){return this});var E=Object.getPrototypeOf,_=E&&E(E(L([])));_&&_!==t&&i.call(_,o)&&(R=_);var T=w.prototype=b.prototype=Object.create(R);function I(k){["next","throw","return"].forEach(function(F){c(k,F,function(G){return this._invoke(F,G)})})}function x(k,F){function G(se,v,C,S){var A=h(k[se],k,v);if(A.type!=="throw"){var H=A.arg,M=H.value;return M&&typeof M=="object"&&i.call(M,"__await")?F.resolve(M.__await).then(function($){G("next",$,C,S)},function($){G("throw",$,C,S)}):F.resolve(M).then(function($){H.value=$,C(H)},function($){return G("throw",$,C,S)})}S(A.arg)}var U;r(this,"_invoke",{value:function(se,v){function C(){return new F(function(S,A){G(se,v,S,A)})}return U=U?U.then(C,C):C()}})}function P(k,F,G){var U=d;return function(se,v){if(U===g)throw Error("Generator is already running");if(U===p){if(se==="throw")throw v;return{value:n,done:!0}}for(G.method=se,G.arg=v;;){var C=G.delegate;if(C){var S=D(C,G);if(S){if(S===m)continue;return S}}if(G.method==="next")G.sent=G._sent=G.arg;else if(G.method==="throw"){if(U===d)throw U=p,G.arg;G.dispatchException(G.arg)}else G.method==="return"&&G.abrupt("return",G.arg);U=g;var A=h(k,F,G);if(A.type==="normal"){if(U=G.done?p:f,A.arg===m)continue;return{value:A.arg,done:G.done}}A.type==="throw"&&(U=p,G.method="throw",G.arg=A.arg)}}}function D(k,F){var G=F.method,U=k.iterator[G];if(U===n)return F.delegate=null,G==="throw"&&k.iterator.return&&(F.method="return",F.arg=n,D(k,F),F.method==="throw")||G!=="return"&&(F.method="throw",F.arg=new TypeError("The iterator does not provide a '"+G+"' method")),m;var se=h(U,k.iterator,F.arg);if(se.type==="throw")return F.method="throw",F.arg=se.arg,F.delegate=null,m;var v=se.arg;return v?v.done?(F[k.resultName]=v.value,F.next=k.nextLoc,F.method!=="return"&&(F.method="next",F.arg=n),F.delegate=null,m):v:(F.method="throw",F.arg=new TypeError("iterator result is not an object"),F.delegate=null,m)}function B(k){var F={tryLoc:k[0]};1 in k&&(F.catchLoc=k[1]),2 in k&&(F.finallyLoc=k[2],F.afterLoc=k[3]),this.tryEntries.push(F)}function V(k){var F=k.completion||{};F.type="normal",delete F.arg,k.completion=F}function z(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(B,this),this.reset(!0)}function L(k){if(k||k===""){var F=k[o];if(F)return F.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var G=-1,U=function se(){for(;++G<k.length;)if(i.call(k,G))return se.value=k[G],se.done=!1,se;return se.value=n,se.done=!0,se};return U.next=U}}throw new TypeError(typeof k+" is not iterable")}return y.prototype=w,r(T,"constructor",{value:w,configurable:!0}),r(w,"constructor",{value:y,configurable:!0}),y.displayName=c(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(k){var F=typeof k=="function"&&k.constructor;return!!F&&(F===y||(F.displayName||F.name)==="GeneratorFunction")},e.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,w):(k.__proto__=w,c(k,l,"GeneratorFunction")),k.prototype=Object.create(T),k},e.awrap=function(k){return{__await:k}},I(x.prototype),c(x.prototype,a,function(){return this}),e.AsyncIterator=x,e.async=function(k,F,G,U,se){se===void 0&&(se=Promise);var v=new x(u(k,F,G,U),se);return e.isGeneratorFunction(F)?v:v.next().then(function(C){return C.done?C.value:v.next()})},I(T),c(T,l,"Generator"),c(T,o,function(){return this}),c(T,"toString",function(){return"[object Generator]"}),e.keys=function(k){var F=Object(k),G=[];for(var U in F)G.push(U);return G.reverse(),function se(){for(;G.length;){var v=G.pop();if(v in F)return se.value=v,se.done=!1,se}return se.done=!0,se}},e.values=L,z.prototype={constructor:z,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(V),!k)for(var F in this)F.charAt(0)==="t"&&i.call(this,F)&&!isNaN(+F.slice(1))&&(this[F]=n)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var F=this;function G(A,H){return v.type="throw",v.arg=k,F.next=A,H&&(F.method="next",F.arg=n),!!H}for(var U=this.tryEntries.length-1;U>=0;--U){var se=this.tryEntries[U],v=se.completion;if(se.tryLoc==="root")return G("end");if(se.tryLoc<=this.prev){var C=i.call(se,"catchLoc"),S=i.call(se,"finallyLoc");if(C&&S){if(this.prev<se.catchLoc)return G(se.catchLoc,!0);if(this.prev<se.finallyLoc)return G(se.finallyLoc)}else if(C){if(this.prev<se.catchLoc)return G(se.catchLoc,!0)}else{if(!S)throw Error("try statement without catch or finally");if(this.prev<se.finallyLoc)return G(se.finallyLoc)}}}},abrupt:function(k,F){for(var G=this.tryEntries.length-1;G>=0;--G){var U=this.tryEntries[G];if(U.tryLoc<=this.prev&&i.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var se=U;break}}se&&(k==="break"||k==="continue")&&se.tryLoc<=F&&F<=se.finallyLoc&&(se=null);var v=se?se.completion:{};return v.type=k,v.arg=F,se?(this.method="next",this.next=se.finallyLoc,m):this.complete(v)},complete:function(k,F){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&F&&(this.next=F),m},finish:function(k){for(var F=this.tryEntries.length-1;F>=0;--F){var G=this.tryEntries[F];if(G.finallyLoc===k)return this.complete(G.completion,G.afterLoc),V(G),m}},catch:function(k){for(var F=this.tryEntries.length-1;F>=0;--F){var G=this.tryEntries[F];if(G.tryLoc===k){var U=G.completion;if(U.type==="throw"){var se=U.arg;V(G)}return se}}throw Error("illegal catch attempt")},delegateYield:function(k,F,G){return this.delegate={iterator:L(k),resultName:F,nextLoc:G},this.method==="next"&&(this.arg=n),m}},e}function C6(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function PH(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){C6(s,i,r,o,a,"next",l)}function a(l){C6(s,i,r,o,a,"throw",l)}o(void 0)})}}var IH={size:{mode:"max",value:512},objectFit:"cover",correctCentering:!1,maxTextureSize:4096,debounceTimeout:500,crossOrigin:"anonymous"},e4e=1;function tO(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.crossOrigin;return new Promise(function(i,r){var s=new Image;s.addEventListener("load",function(){i(s)},{once:!0}),s.addEventListener("error",function(o){r(o.error)},{once:!0}),t&&s.setAttribute("crossOrigin",t),s.src=n})}function t4e(n){return nO.apply(this,arguments)}function nO(){return nO=PH(hf().mark(function n(e){var t,i,r,s,o,a,l,c,u,h,d,f,g,p=arguments;return hf().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(t=p.length>1&&p[1]!==void 0?p[1]:{},i=t.size,r=t.crossOrigin,r!=="use-credentials"){b.next=7;break}return b.next=4,fetch(e,{credentials:"include"});case 4:s=b.sent,b.next=10;break;case 7:return b.next=9,fetch(e);case 9:s=b.sent;case 10:return b.next=12,s.text();case 12:if(o=b.sent,a=new DOMParser().parseFromString(o,"image/svg+xml"),l=a.documentElement,c=l.getAttribute("width"),u=l.getAttribute("height"),!(!c||!u)){b.next=19;break}throw new Error("loadSVGImage: cannot use `size` if target SVG has no definite dimensions.");case 19:return typeof i=="number"&&(l.setAttribute("width",""+i),l.setAttribute("height",""+i)),h=new XMLSerializer().serializeToString(a),d=new Blob([h],{type:"image/svg+xml"}),f=URL.createObjectURL(d),g=tO(f),g.finally(function(){return URL.revokeObjectURL(f)}),b.abrupt("return",g);case 26:case"end":return b.stop()}},n)})),nO.apply(this,arguments)}function n4e(n){return iO.apply(this,arguments)}function iO(){return iO=PH(hf().mark(function n(e){var t,i,r,s,o,a,l=arguments;return hf().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(i=l.length>1&&l[1]!==void 0?l[1]:{},r=i.size,s=i.crossOrigin,o=((t=e.split(/[#?]/)[0].split(".").pop())===null||t===void 0?void 0:t.trim().toLowerCase())==="svg",!(o&&r)){u.next=16;break}return u.prev=3,u.next=6,t4e(e,{size:r,crossOrigin:s});case 6:a=u.sent,u.next=14;break;case 9:return u.prev=9,u.t0=u.catch(3),u.next=13,tO(e,{crossOrigin:s});case 13:a=u.sent;case 14:u.next=19;break;case 16:return u.next=18,tO(e,{crossOrigin:s});case 18:a=u.sent;case 19:return u.abrupt("return",a);case 20:case"end":return u.stop()}},n,null,[[3,9]])})),iO.apply(this,arguments)}function i4e(n,e,t){var i=t.objectFit,r=t.size,s=t.correctCentering,o=i==="contain"?Math.max(n.width,n.height):Math.min(n.width,n.height),a=r.mode==="auto"?o:r.mode==="force"?r.value:Math.min(r.value,o),l=(n.width-o)/2,c=(n.height-o)/2;if(s){var u=e.getCorrectionOffset(n,o);l=u.x,c=u.y}return{sourceX:l,sourceY:c,sourceSize:o,destinationSize:a}}function r4e(n,e,t){for(var i=e.canvas,r=i.width,s=i.height,o=[],a=t.x,l=t.y,c=t.rowHeight,u=t.maxRowWidth,h={},d=0,f=n.length;d<f;d++){var g=n[d],p=g.key,m=g.image,b=g.sourceSize,y=g.sourceX,w=g.sourceY,R=g.destinationSize,E=R+e4e;l+E>s||a+E>r&&l+E+c>s||(a+E>r&&(u=Math.max(u,a),a=0,l+=c,c=E),o.push({key:p,image:m,sourceX:y,sourceY:w,sourceSize:b,destinationX:a,destinationY:l,destinationSize:R}),h[p]={x:a,y:l,size:R},a+=E,c=Math.max(c,E))}u=Math.max(u,a);for(var _=u,T=l+c,I=0,x=o.length;I<x;I++){var P=o[I],D=P.image,B=P.sourceSize,V=P.sourceX,z=P.sourceY,L=P.destinationSize,k=P.destinationX,F=P.destinationY;e.drawImage(D,V,z,B,B,k,F,L,L)}return{atlas:h,texture:e.getImageData(0,0,_,T),cursor:{x:a,y:l,rowHeight:c,maxRowWidth:u}}}function s4e(n,e,t){var i=n.atlas,r=n.textures,s=n.cursor,o={atlas:ws({},i),textures:TH(r.slice(0,-1)),cursor:ws({},s)},a=[];for(var l in e){var c,u=e[l];if(u.status==="ready"){var h=(c=i[l])===null||c===void 0?void 0:c.textureIndex;typeof h!="number"&&a.push(ws({key:l},u))}}for(var d=function(){var g=r4e(a,t,o.cursor),p=g.atlas,m=g.texture,b=g.cursor;o.cursor=b;var y=[];a.forEach(function(w){p[w.key]?o.atlas[w.key]=ws(ws({},p[w.key]),{},{textureIndex:o.textures.length}):y.push(w)}),o.textures.push(m),a=y,a.length&&(o.cursor={x:0,y:0,rowHeight:0,maxRowWidth:0},t.clearRect(0,0,t.canvas.width,t.canvas.height))};a.length;)d();return o}var o4e=function(){function n(){MH(this,n),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",{willReadFrequently:!0})}return AH(n,[{key:"getCorrectionOffset",value:function(t,i){this.canvas.width=i,this.canvas.height=i,this.context.clearRect(0,0,i,i),this.context.drawImage(t,0,0,i,i);for(var r=this.context.getImageData(0,0,i,i).data,s=new Uint8ClampedArray(r.length/4),o=0;o<r.length;o++)s[o]=r[o*4+3];for(var a=0,l=0,c=0,u=0;u<i;u++)for(var h=0;h<i;h++){var d=s[u*i+h];c+=d,a+=d*h,l+=d*u}var f=a/c,g=l/c;return{x:f-i/2,y:g-i/2}}}]),n}(),WS=function(n){ZX(e,n);function e(){var t,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return MH(this,e),t=XX(this,e),ir(Wo(t),"canvas",document.createElement("canvas")),ir(Wo(t),"ctx",t.canvas.getContext("2d",{willReadFrequently:!0})),ir(Wo(t),"corrector",new o4e),ir(Wo(t),"imageStates",{}),ir(Wo(t),"textures",[t.ctx.getImageData(0,0,1,1)]),ir(Wo(t),"lastTextureCursor",{x:0,y:0,rowHeight:0,maxRowWidth:0}),ir(Wo(t),"atlas",{}),t.options=ws(ws({},IH),i),t.canvas.width=t.options.maxTextureSize,t.canvas.height=t.options.maxTextureSize,t}return AH(e,[{key:"scheduleGenerateTexture",value:function(){var i=this;typeof this.frameId!="number"&&(typeof this.options.debounceTimeout=="number"?this.frameId=window.setTimeout(function(){i.generateTextures(),i.frameId=void 0},this.options.debounceTimeout):this.generateTextures())}},{key:"generateTextures",value:function(){var i=s4e({atlas:this.atlas,textures:this.textures,cursor:this.lastTextureCursor},this.imageStates,this.ctx),r=i.atlas,s=i.textures,o=i.cursor;this.atlas=r,this.textures=s,this.lastTextureCursor=o,this.emit(e.NEW_TEXTURE_EVENT,{atlas:r,textures:s})}},{key:"registerImage",value:function(){var t=PH(hf().mark(function r(s){var o,a;return hf().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this.imageStates[s]){c.next=2;break}return c.abrupt("return");case 2:return this.imageStates[s]={status:"loading"},c.prev=3,o=this.options.size,c.next=7,n4e(s,{size:o.mode==="force"?o.value:void 0,crossOrigin:this.options.crossOrigin||void 0});case 7:a=c.sent,this.imageStates[s]=ws({status:"ready",image:a},i4e(a,this.corrector,this.options)),this.scheduleGenerateTexture(),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(3),this.imageStates[s]={status:"error"};case 15:case"end":return c.stop()}},r,this,[[3,12]])}));function i(r){return t.apply(this,arguments)}return i}()},{key:"getAtlas",value:function(){return this.atlas}},{key:"getTextures",value:function(){return this.textures}}]),e}(mH.EventEmitter);ir(WS,"NEW_TEXTURE_EVENT","newTexture");var a4e=["drawHover","drawLabel","drawingMode","keepWithinCircle","padding","colorAttribute","imageAttribute"],QX=WebGLRenderingContext,S6=QX.UNSIGNED_BYTE,Pv=QX.FLOAT,l4e=ws(ws({},IH),{},{drawingMode:"background",keepWithinCircle:!0,drawLabel:void 0,drawHover:void 0,padding:0,colorAttribute:"color",imageAttribute:"image"}),c4e=["u_sizeRatio","u_correctionRatio","u_cameraAngle","u_percentagePadding","u_matrix","u_colorizeImages","u_keepWithinCircle","u_atlas"];function NR(n){var e,t=document.createElement("canvas").getContext("webgl"),i=Math.min(t.getParameter(t.MAX_TEXTURE_SIZE),IH.maxTextureSize);t.canvas.remove();var r=ws(ws(ws({},l4e),{maxTextureSize:i}),n||{}),s=r.drawHover,o=r.drawLabel,a=r.drawingMode,l=r.keepWithinCircle,c=r.padding,u=r.colorAttribute,h=r.imageAttribute,d=X8e(r,a4e),f=new WS(d);return e=function(g){ZX(p,g);function p(m,b,y){var w;return MH(this,p),w=XX(this,p,[m,b,y]),ir(Wo(w),"drawLabel",o),ir(Wo(w),"drawHover",s),ir(Wo(w),"textureManagerCallback",null),w.textureManagerCallback=function(R){var E=R.atlas,_=R.textures,T=_.length!==w.textures.length;w.atlas=E,w.textureImages=_,T&&w.upgradeShaders(),w.bindTextures(),w.latestRenderParams&&w.render(w.latestRenderParams),w.renderer&&w.renderer.refresh&&w.renderer.refresh()},f.on(WS.NEW_TEXTURE_EVENT,w.textureManagerCallback),w.atlas=f.getAtlas(),w.textureImages=f.getTextures(),w.textures=w.textureImages.map(function(){return m.createTexture()}),w.bindTextures(),w}return AH(p,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:J8e,FRAGMENT_SHADER_SOURCE:Z8e({texturesCount:f.getTextures().length}),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:c4e,ATTRIBUTES:[{name:"a_position",size:2,type:Pv},{name:"a_size",size:1,type:Pv},{name:"a_color",size:4,type:S6,normalized:!0},{name:"a_id",size:4,type:S6,normalized:!0},{name:"a_texture",size:4,type:Pv},{name:"a_textureIndex",size:1,type:Pv}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Pv}],CONSTANT_DATA:[[p.ANGLE_1],[p.ANGLE_2],[p.ANGLE_3]]}}},{key:"upgradeShaders",value:function(){var b=this.getDefinition(),y=this.normalProgram,w=y.program,R=y.buffer,E=y.vertexShader,_=y.fragmentShader,T=y.gl;T.deleteProgram(w),T.deleteBuffer(R),T.deleteShader(E),T.deleteShader(_),this.normalProgram=this.getProgramInfo("normal",T,b.VERTEX_SHADER_SOURCE,b.FRAGMENT_SHADER_SOURCE,null)}},{key:"kill",value:function(){var b,y=(b=this.normalProgram)===null||b===void 0?void 0:b.gl;if(y)for(var w=0;w<this.textures.length;w++)y.deleteTexture(this.textures[w]);this.textureManagerCallback&&(f.off(WS.NEW_TEXTURE_EVENT,this.textureManagerCallback),this.textureManagerCallback=null),w6(p,"kill",this)([])}},{key:"bindTextures",value:function(){for(var b=this.normalProgram.gl,y=0;y<this.textureImages.length;y++){if(y>=this.textures.length){var w=b.createTexture();w&&this.textures.push(w)}b.activeTexture(b.TEXTURE0+y),b.bindTexture(b.TEXTURE_2D,this.textures[y]),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,this.textureImages[y]),b.generateMipmap(b.TEXTURE_2D)}}},{key:"renderProgram",value:function(b,y){if(!y.isPicking)for(var w=y.gl,R=0;R<this.textureImages.length;R++)w.activeTexture(w.TEXTURE0+R),w.bindTexture(w.TEXTURE_2D,this.textures[R]);w6(p,"renderProgram",this)([b,y])}},{key:"processVisibleItem",value:function(b,y,w){var R=this.array,E=om(w[u]),_=w[h],T=_?this.atlas[_]:void 0;if(typeof _=="string"&&!T&&f.registerImage(_),R[y++]=w.x,R[y++]=w.y,R[y++]=w.size,R[y++]=E,R[y++]=b,T&&typeof T.textureIndex=="number"){var I=this.textureImages[T.textureIndex],x=I.width,P=I.height;R[y++]=T.x/x,R[y++]=T.y/P,R[y++]=T.size/x,R[y++]=T.size/P,R[y++]=T.textureIndex}else R[y++]=0,R[y++]=0,R[y++]=0,R[y++]=0,R[y++]=0}},{key:"setUniforms",value:function(b,y){var w=y.gl,R=y.uniformLocations,E=R.u_sizeRatio,_=R.u_correctionRatio,T=R.u_matrix,I=R.u_atlas,x=R.u_colorizeImages,P=R.u_keepWithinCircle,D=R.u_cameraAngle,B=R.u_percentagePadding;this.latestRenderParams=b,w.uniform1f(_,b.correctionRatio),w.uniform1f(E,l?b.sizeRatio:b.sizeRatio/Math.SQRT2),w.uniform1f(D,b.cameraAngle),w.uniform1f(B,c),w.uniformMatrix3fv(T,!1,b.matrix),w.uniform1iv(I,TH(new Array(this.textureImages.length)).map(function(V,z){return z})),w.uniform1i(x,a==="color"?1:0),w.uniform1i(P,l?1:0)}}]),p}(kX),ir(e,"ANGLE_1",0),ir(e,"ANGLE_2",2*Math.PI/3),ir(e,"ANGLE_3",4*Math.PI/3),ir(e,"textureManager",f),e}NR();NR({keepWithinCircle:!1,size:{mode:"force",value:256},drawingMode:"color",correctCentering:!0});var JX;let eZ,tZ,nZ;function u4e(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],b=e.length;function y(_,T,I){return function(x,P){T&&(P=x,x=n);for(var D=0;D<_.length;D++)P=_[D].apply(x,I?[P]:[]);return I?P:x}}function w(_,T,I,x){if(typeof _!="function"&&(x||_!==void 0))throw new TypeError(T+" must "+(I||"be")+" a function"+(x?"":" or undefined"));return _}function R(_,T,I,x,P,D,B,V,z,L,k){function F(oe){if(!k(oe))throw new TypeError("Attempted to access private element on non-instance")}var G=[].concat(T[0]),U=T[3],se=!B,v=P===1,C=P===3,S=P===4,A=P===2;function H(oe,ae,Fe){return function(ve,Se){return ae&&(Se=ve,ve=_),Fe&&Fe(ve),M[oe].call(ve,Se)}}if(!se){var M={},$=[],q=C?"get":S||v?"set":"value";if(z?(L||v?M={get:_6(function(){return U(this)},x,"get"),set:function(oe){T[4](this,oe)}}:M[q]=U,L||_6(M[q],x,A?"":q)):L||(M=Object.getOwnPropertyDescriptor(_,x)),!L&&!z){if((a=m[+V][x])&&(a^P)!=7)throw Error("Decorating two elements with the same name ("+M[q].name+") is not supported yet");m[+V][x]=P<3?1:P}}for(var Q=_,ce=G.length-1;ce>=0;ce-=I?2:1){var le=w(G[ce],"A decorator","be",!0),Me=I?G[ce-1]:void 0,Ce={},J={kind:["field","accessor","method","getter","setter","class"][P],name:x,metadata:o,addInitializer:(function(oe,ae){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ae,"An initializer","be",!0),D.push(ae)}).bind(null,Ce)};if(se)a=le.call(Me,Q,J),Ce.v=1,w(a,"class decorators","return")&&(Q=a);else if(J.static=V,J.private=z,a=J.access={has:z?k.bind():function(oe){return x in oe}},S||(a.get=z?A?function(oe){return F(oe),M.value}:H("get",0,F):function(oe){return oe[x]}),A||C||(a.set=z?H("set",0,F):function(oe,ae){oe[x]=ae}),Q=le.call(Me,v?{get:M.get,set:M.set}:M[q],J),Ce.v=1,v){if(typeof Q=="object"&&Q)(a=w(Q.get,"accessor.get"))&&(M.get=a),(a=w(Q.set,"accessor.set"))&&(M.set=a),(a=w(Q.init,"accessor.init"))&&$.unshift(a);else if(Q!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(Q,(L?"field":"method")+" decorators","return")&&(L?$.unshift(Q):M[q]=Q)}return P<2&&B.push(y($,V,1),y(D,V,0)),L||se||(z?v?B.splice(-1,0,H("get",V),H("set",V)):B.push(A?M[q]:w.call.bind(M[q])):g(_,x,M)),Q}function E(_){return g(_,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(_){_&&u.push(y(_))},d=function(_,T){for(var I=0;I<t.length;I++){var x=t[I],P=x[1],D=7&P;if((8&P)==_&&!D==T){var B=x[2],V=!!x[3],z=16&P;R(_?n:n.prototype,x,z,V?"#"+B:h4e(B),D,D<2?[]:_?c=c||[]:l=l||[],u,!!_,V,T,_&&V?function(L){return f4e(L)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,b||E(n),{e:a,get c(){var _=[];return b&&[E(n=R(n,[e],i,n.name,5,_)),y(_,1)]}}}function h4e(n){var e=d4e(n,"string");return typeof e=="symbol"?e:e+""}function d4e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _6(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function f4e(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let iZ;class g4e{constructor(){this.ea=pe(aO),this.container=void 0,this.tabid=void 0,this.datachannel=tZ(this),nZ(this)}attached(){this.ea.subscribe("showtab",e=>{this.tabid===this.showtabid&&(this.layout?this.layout.start():(console.warn("empty layout"),this.renderer=new m6(this.graph,this.container,{nodeProgramClasses:{image:NR()},renderEdgeLabels:!0,allowInvalidContainer:!0}),this.layout=new b6(this.graph),this.layout.start()))}),this.datachannel?this.ea.subscribe(this.datachannel,e=>{console.log("network received data:",e),Array.isArray(e)?this.transformDataToGraph(e):(this.layout&&this.layout.stop(),e.type=="changeNode"?(console.log("network changeNode"),this.renameNode(e.old,e.value)):e.type=="changeType"?(console.log("network changeType"),this.changeNodeType(e.node,e.value)):e.type=="changeEdge"?(console.log("network changeEdge"),this.updateEdge(e.subject,e.object,e.value)):console.warn("not recognized change",e),this.layout&&this.layout.start())}):console.warn("datachannel empty"),this.data=[],this.transformDataToGraph(this.data)}changeNodeType(e,t){const i=this.typeColorMap[t]||"gray";if(!this.graph.hasNode(e)){console.log(`Node "${e}" does not exist. Creating.`);const r=this.graph.order*2*Math.PI/this.graph.order;this.graph.addNode(e,{label:e,size:15,color:i,x:100*Math.cos(r),y:100*Math.sin(r)})}this.graph.setNodeAttribute(e,"color",i),this.graph.setNodeAttribute(e,"subjectType",t)}renameNode(e,t){if(!e){this.changeNodeType(t,"default");return}if(!this.graph.hasNode(e)){console.error(`Node "${e}" does not exist.`);return}if(this.graph.hasNode(t)){console.error(`Node "${t}" already exists.`);return}const i=this.graph.getNodeAttributes(e);i.label=t,this.graph.addNode(t,i),this.graph.forEachEdge(e,(r,s,o,a)=>{const l=o===e?a:o;this.graph.addEdge(t,l,s)}),this.graph.dropNode(e)}updateEdge(e,t,i){this.graph.hasEdge(e,t)?!i||i==0?(this.graph.dropEdge(e,t),console.log(`Edge between "${e}" and "${t}" has been removed.`)):(this.graph.setEdgeAttribute(e,t,"label",i),console.log(`Edge between "${e}" and "${t}" updated with label: "${i}".`)):i!==""&&i!==0?(this.graph.addEdge(e,t,{relationship:"related",type:"line",label:i,size:5}),console.log(`Edge between "${e}" and "${t}" has been added with label: "${i}".`)):console.warn(`Edge between "${e}" and "${t}" does not exist and no action was taken.`)}creategraph(){this.graph=new qt;const e="#FA4F40",t="#727EE0",i="#5DB346";this.graph.addNode("John",{size:15,label:"John",type:"image",image:"./user.svg",color:e}),this.graph.addNode("Mary",{size:15,label:"Mary",type:"image",image:"./user.svg",color:e}),this.graph.addNode("Suzan",{size:15,label:"Suzan",type:"image",image:"./user.svg",color:e}),this.graph.addNode("Nantes",{size:15,label:"Nantes",type:"image",image:"./city.svg",color:t}),this.graph.addNode("New-York",{size:15,label:"New-York",type:"image",image:"./city.svg",color:t}),this.graph.addNode("Sushis",{size:7,label:"Sushis",color:i}),this.graph.addNode("Falafels",{size:7,label:"Falafels",color:i}),this.graph.addNode("Kouign Amann",{size:7,label:"Kouign Amann",color:i}),this.graph.addEdge("John","Mary",{type:"line",label:"works with",size:5}),this.graph.addEdge("Mary","Suzan",{type:"line",label:"works with",size:5}),this.graph.addEdge("Mary","Nantes",{type:"arrow",label:"lives in",size:5}),this.graph.addEdge("John","New-York",{type:"arrow",label:"lives in",size:5}),this.graph.addEdge("Suzan","New-York",{type:"arrow",label:"lives in",size:5}),this.graph.addEdge("John","Falafels",{type:"arrow",label:"eats",size:5}),this.graph.addEdge("Mary","Sushis",{type:"arrow",label:"eats",size:5}),this.graph.addEdge("Suzan","Kouign Amann",{type:"arrow",label:"eats",size:5}),this.graph.nodes().forEach((r,s)=>{const o=s*2*Math.PI/this.graph.order;this.graph.setNodeAttribute(r,"x",100*Math.cos(o)),this.graph.setNodeAttribute(r,"y",100*Math.sin(o))})}showgraph(){console.log("showgraph()"),this.renderer=new m6(this.graph,this.container,{nodeProgramClasses:{image:NR()},renderEdgeLabels:!0,allowInvalidContainer:!0}),this.layout=new b6(this.graph),this.layout.start()}createGraphFromDatasheet(e){this.graph?this.graph.clear():this.graph=new qt({type:"undirected"}),e=[["Subject/Object/Predicate","type","CRC Risk","CRC Neoplasia","Physical Activity"],["Trans-Chlordane","environmental","corelates","is",0],["PCB194","environmental","corelates",1],["Sterilisation","biometric","increase",0],["Tobacco Consumption","lifestyle","increase",1,1],["PAC-RSK","Interaction Term","decrease",0,1]];const t=e[0];t.slice(2).forEach(r=>{this.graph.addNode(r,{type:"object"})});for(let r=1;r<e.length;r++){const s=e[r],o=s[0],a=s[1];this.graph.hasNode(o)||this.graph.addNode(o,{type:a});for(let l=2;l<t.length;l++){const c=t[l];if(s[l]===1){graph.hasNode(c)||graph.addNode(c,{type:"object"});const h=`${o}-${c}`;graph.hasEdge(h)||graph.addEdge(o,c,{relationship:"related"})}}for(let l=t.length;l<s.length;l++);}}transformDataToGraph(e){this.graph?this.graph.clearEdges():this.graph=new qt({type:"undirected"}),this.layout&&this.layout.stop(),console.log("transformDataToGraph data.length",e.length),e.length==0&&(e=[["Subject/Object/Predicate","type","CRC Risk","CRC Neoplasia","Physical Activity"],["Trans-Chlordane","environmental","corelates","is",0],["PCB194","environmental","corelates",1],["Sterilisation","biometric","increase",0],["Tobacco Consumption","lifestyle","increase",1,1],["PAC-RSK","Interaction Term","decrease",0,1]]),this.typeColorMap={environmental:"blue",biometric:"red",lifestyle:"green","Interaction Term":"purple"};const t=e[0],i=t.slice(2);for(let r=0;r<i.length;r++){const s=i[r];if(!this.graph.hasNode(s)){let o=r*2*Math.PI/e.length;this.graph.addNode(s,{label:s,size:15,color:"orange",x:100*Math.cos(o),y:100*Math.sin(o)})}}for(let r=1;r<e.length;r++){const s=e[r],o=s[0],a=s[1],l=this.typeColorMap[a]||"gray";let c=r*2*Math.PI/e.length;this.graph.hasNode(o)||this.graph.addNode(o,{label:o,size:7,color:l,subjectType:a,x:100*Math.cos(c),y:100*Math.sin(c)});for(let u=2;u<t.length;u++){const h=t[u],d=s[u];if(d&&d!=0){console.log("transformDataToGraph adding edge",o,h);const f=`${o}-${h}`;this.graph.hasEdge(f)?console.log("edge exist adddge"):(console.log("edge not exist adddge"),this.graph.addEdge(o,h,{relationship:"related",type:"line",label:d,size:5}))}}}this.layout?(console.log("layout detected, stop(), start()"),this.layout.start()):(console.log("no layout showgraph()"),this.showgraph())}}JX=g4e;({e:[tZ,nZ],c:[iZ,eZ]}=u4e(JX,[mf({...W6e,name:"sv-network"})],[[Fa,0,"datachannel"]]));eZ();const rZ="tabs",rO=`    <div class="w3-bar" if.bind="!vertical">
        <button class.bind="inactiveclass" style="width:145px">&nbsp;</button>
        <button repeat.for="id of ids" class.bind="id.cls" click.trigger="open(id)">\${id.title}</button>
    </div>
    <nav class="w3-bar-block" style="width:50px;float:left" if.bind="vertical">
        <button repeat.for="id of ids" class.bind="id.cls" click.trigger="open(id)">\${id.title}</button>
    </nav>
`,sZ=[],oZ={};let gA;function p4e(n){gA||(gA=Ar.define({name:rZ,template:rO,dependencies:sZ,bindables:oZ})),n.register(gA)}const m4e=Object.freeze(Object.defineProperty({__proto__:null,bindables:oZ,default:rO,dependencies:sZ,name:rZ,register:p4e,template:rO},Symbol.toStringTag,{value:"Module"}));var aZ;let lZ,cZ,uZ,hZ,dZ,fZ,gZ,pZ,mZ,vZ,bZ;function v4e(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],b=e.length;function y(_,T,I){return function(x,P){T&&(P=x,x=n);for(var D=0;D<_.length;D++)P=_[D].apply(x,I?[P]:[]);return I?P:x}}function w(_,T,I,x){if(typeof _!="function"&&(x||_!==void 0))throw new TypeError(T+" must "+(I||"be")+" a function"+(x?"":" or undefined"));return _}function R(_,T,I,x,P,D,B,V,z,L,k){function F(oe){if(!k(oe))throw new TypeError("Attempted to access private element on non-instance")}var G=[].concat(T[0]),U=T[3],se=!B,v=P===1,C=P===3,S=P===4,A=P===2;function H(oe,ae,Fe){return function(ve,Se){return ae&&(Se=ve,ve=_),Fe&&Fe(ve),M[oe].call(ve,Se)}}if(!se){var M={},$=[],q=C?"get":S||v?"set":"value";if(z?(L||v?M={get:R6(function(){return U(this)},x,"get"),set:function(oe){T[4](this,oe)}}:M[q]=U,L||R6(M[q],x,A?"":q)):L||(M=Object.getOwnPropertyDescriptor(_,x)),!L&&!z){if((a=m[+V][x])&&(a^P)!=7)throw Error("Decorating two elements with the same name ("+M[q].name+") is not supported yet");m[+V][x]=P<3?1:P}}for(var Q=_,ce=G.length-1;ce>=0;ce-=I?2:1){var le=w(G[ce],"A decorator","be",!0),Me=I?G[ce-1]:void 0,Ce={},J={kind:["field","accessor","method","getter","setter","class"][P],name:x,metadata:o,addInitializer:(function(oe,ae){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ae,"An initializer","be",!0),D.push(ae)}).bind(null,Ce)};if(se)a=le.call(Me,Q,J),Ce.v=1,w(a,"class decorators","return")&&(Q=a);else if(J.static=V,J.private=z,a=J.access={has:z?k.bind():function(oe){return x in oe}},S||(a.get=z?A?function(oe){return F(oe),M.value}:H("get",0,F):function(oe){return oe[x]}),A||C||(a.set=z?H("set",0,F):function(oe,ae){oe[x]=ae}),Q=le.call(Me,v?{get:M.get,set:M.set}:M[q],J),Ce.v=1,v){if(typeof Q=="object"&&Q)(a=w(Q.get,"accessor.get"))&&(M.get=a),(a=w(Q.set,"accessor.set"))&&(M.set=a),(a=w(Q.init,"accessor.init"))&&$.unshift(a);else if(Q!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(Q,(L?"field":"method")+" decorators","return")&&(L?$.unshift(Q):M[q]=Q)}return P<2&&B.push(y($,V,1),y(D,V,0)),L||se||(z?v?B.splice(-1,0,H("get",V),H("set",V)):B.push(A?M[q]:w.call.bind(M[q])):g(_,x,M)),Q}function E(_){return g(_,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(_){_&&u.push(y(_))},d=function(_,T){for(var I=0;I<t.length;I++){var x=t[I],P=x[1],D=7&P;if((8&P)==_&&!D==T){var B=x[2],V=!!x[3],z=16&P;R(_?n:n.prototype,x,z,V?"#"+B:b4e(B),D,D<2?[]:_?c=c||[]:l=l||[],u,!!_,V,T,_&&V?function(L){return y4e(L)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,b||E(n),{e:a,get c(){var _=[];return b&&[E(n=R(n,[e],i,n.name,5,_)),y(_,1)]}}}function b4e(n){var e=w4e(n,"string");return typeof e=="symbol"?e:e+""}function w4e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function R6(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function y4e(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let wZ;class C4e{constructor(){this.ea=pe(aO),this.idlist=cZ(this),this.titlelist=(uZ(this),hZ(this)),this.ids=(dZ(this),[]),this.w3class=fZ(this,"w3-bar-item"),this.vertical=(gZ(this),pZ(this,!1)),this.listen=(mZ(this),vZ(this)),this.activeclasstemplate=(bZ(this),"w3-button w3-white w3-border-top w3-border-left w3-border-right"),this.inactiveclasstemplate="w3-button w3-border-bottom w3-theme-l5",this.activeclasstemplatevertical="w3-bar-item w3-button w3-white w3-border-top w3-border-left w3-border-bottom",this.inactiveclasstemplatevertical="w3-bar-item w3-button w3-border-right w3-theme-l5",this.handleChange=e=>{if(e.detail&&e.detail.id){let t=this.ids.find(i=>i.name===e.detail.id);t&&this.open(t)}}}bound(){if(typeof this.vertical=="string"&&(this.vertical=this.vertical==="true"),this.w3class?(this.activeclass=this.w3class+" "+(this.vertical?this.activeclasstemplatevertical:this.activeclasstemplate),this.inactiveclass=this.w3class+" "+(this.vertical?this.inactiveclasstemplatevertical:this.inactiveclasstemplate)):(this.activeclass=this.vertical?this.activeclasstemplatevertical:this.activeclasstemplate,this.inactiveclass=this.vertical?this.activeclasstemplatevertical:this.activeclasstemplate),this.idlist&&(this.ids=this.idlist.split(",").map(e=>({name:e,title:e,cls:this.inactiveclass})),this.titlelist)){let e=this.titlelist.split(",");for(let t=0;t<e.length;t++)this.ids[t]&&(this.ids[t].title=e[t])}this.subscription1=this.ea.subscribe("quizshow",e=>{const t=this.check(e);t&&this.open(t)})}attached(){console.log("tabs component",this),this.open(this.ids[0]),this.listen&&(console.log("tabs component listening custom event with name:",this.listen),document.addEventListener(this.listen,this.handleChange))}check(e){if(e.includes(";")){const t=e.split(";");return this.ids.find(i=>i.name===t[1])}else return null}unbinding(){this.subscription1.dispose()}open(e){if(this.active)this.setinactive(this.active),this.setactive(e),this.active=e;else{for(let t of this.ids)t!==this.active&&this.setinactive(t);this.setactive(e),this.active=e}}setactive(e){let t=document.getElementById(e.name);t&&(t.style.display="block",e.cls=this.activeclass,this.ea.publish("showtab",e.name))}setinactive(e){let t=document.getElementById(e.name);t&&(t.style.display="none",e.cls=this.inactiveclass,this.ea.publish("hidetab",e.name))}}aZ=C4e;({e:[cZ,uZ,hZ,dZ,fZ,gZ,pZ,mZ,vZ,bZ],c:[wZ,lZ]}=v4e(aZ,[mf({...m4e,name:"sv-tabs"})],[[Fa,0,"idlist"],[Fa,0,"titlelist"],[Fa,0,"w3class"],[Fa,0,"vertical"],[Fa,0,"listen"]]));lZ();lb.register(u1).register(zU).register(Xq).register($U).register(iZ).register(wZ).app(R8).start()});export default S4e();
